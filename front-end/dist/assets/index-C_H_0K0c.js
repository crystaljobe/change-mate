var mQ=Object.defineProperty;var gQ=(e,t,n)=>t in e?mQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Wn=(e,t,n)=>(gQ(e,typeof t!="symbol"?t+"":t,n),n);function JF(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const l in r)if(l!=="default"&&!(l in e)){const d=Object.getOwnPropertyDescriptor(r,l);d&&Object.defineProperty(e,l,d.get?d:{enumerable:!0,get:()=>r[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(l){if(l.ep)return;l.ep=!0;const d=n(l);fetch(l.href,d)}})();var pc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function w0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Dd(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var l=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,l.get?l:{enumerable:!0,get:function(){return e[r]}})}),n}var e7={exports:{}},GS={},t7={exports:{}},co={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bx=Symbol.for("react.element"),yQ=Symbol.for("react.portal"),bQ=Symbol.for("react.fragment"),vQ=Symbol.for("react.strict_mode"),_Q=Symbol.for("react.profiler"),xQ=Symbol.for("react.provider"),wQ=Symbol.for("react.context"),EQ=Symbol.for("react.forward_ref"),TQ=Symbol.for("react.suspense"),SQ=Symbol.for("react.memo"),CQ=Symbol.for("react.lazy"),dz=Symbol.iterator;function kQ(e){return e===null||typeof e!="object"?null:(e=dz&&e[dz]||e["@@iterator"],typeof e=="function"?e:null)}var n7={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r7=Object.assign,o7={};function cv(e,t,n){this.props=e,this.context=t,this.refs=o7,this.updater=n||n7}cv.prototype.isReactComponent={};cv.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};cv.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function i7(){}i7.prototype=cv.prototype;function j5(e,t,n){this.props=e,this.context=t,this.refs=o7,this.updater=n||n7}var $5=j5.prototype=new i7;$5.constructor=j5;r7($5,cv.prototype);$5.isPureReactComponent=!0;var hz=Array.isArray,a7=Object.prototype.hasOwnProperty,U5={current:null},s7={key:!0,ref:!0,__self:!0,__source:!0};function l7(e,t,n){var r,l={},d=null,f=null;if(t!=null)for(r in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(d=""+t.key),t)a7.call(t,r)&&!s7.hasOwnProperty(r)&&(l[r]=t[r]);var y=arguments.length-2;if(y===1)l.children=n;else if(1<y){for(var a=Array(y),E=0;E<y;E++)a[E]=arguments[E+2];l.children=a}if(e&&e.defaultProps)for(r in y=e.defaultProps,y)l[r]===void 0&&(l[r]=y[r]);return{$$typeof:bx,type:e,key:d,ref:f,props:l,_owner:U5.current}}function AQ(e,t){return{$$typeof:bx,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function V5(e){return typeof e=="object"&&e!==null&&e.$$typeof===bx}function MQ(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var fz=/\/+/g;function ZA(e,t){return typeof e=="object"&&e!==null&&e.key!=null?MQ(""+e.key):t.toString(36)}function YE(e,t,n,r,l){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(d){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case bx:case yQ:f=!0}}if(f)return f=e,l=l(f),e=r===""?"."+ZA(f,0):r,hz(l)?(n="",e!=null&&(n=e.replace(fz,"$&/")+"/"),YE(l,t,n,"",function(E){return E})):l!=null&&(V5(l)&&(l=AQ(l,n+(!l.key||f&&f.key===l.key?"":(""+l.key).replace(fz,"$&/")+"/")+e)),t.push(l)),1;if(f=0,r=r===""?".":r+":",hz(e))for(var y=0;y<e.length;y++){d=e[y];var a=r+ZA(d,y);f+=YE(d,t,n,a,l)}else if(a=kQ(e),typeof a=="function")for(e=a.call(e),y=0;!(d=e.next()).done;)d=d.value,a=r+ZA(d,y++),f+=YE(d,t,n,a,l);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function qw(e,t,n){if(e==null)return e;var r=[],l=0;return YE(e,r,"","",function(d){return t.call(n,d,l++)}),r}function DQ(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ks={current:null},GE={transition:null},RQ={ReactCurrentDispatcher:ks,ReactCurrentBatchConfig:GE,ReactCurrentOwner:U5};function c7(){throw Error("act(...) is not supported in production builds of React.")}co.Children={map:qw,forEach:function(e,t,n){qw(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return qw(e,function(){t++}),t},toArray:function(e){return qw(e,function(t){return t})||[]},only:function(e){if(!V5(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};co.Component=cv;co.Fragment=bQ;co.Profiler=_Q;co.PureComponent=j5;co.StrictMode=vQ;co.Suspense=TQ;co.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RQ;co.act=c7;co.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=r7({},e.props),l=e.key,d=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,f=U5.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var y=e.type.defaultProps;for(a in t)a7.call(t,a)&&!s7.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&y!==void 0?y[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){y=Array(a);for(var E=0;E<a;E++)y[E]=arguments[E+2];r.children=y}return{$$typeof:bx,type:e.type,key:l,ref:d,props:r,_owner:f}};co.createContext=function(e){return e={$$typeof:wQ,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:xQ,_context:e},e.Consumer=e};co.createElement=l7;co.createFactory=function(e){var t=l7.bind(null,e);return t.type=e,t};co.createRef=function(){return{current:null}};co.forwardRef=function(e){return{$$typeof:EQ,render:e}};co.isValidElement=V5;co.lazy=function(e){return{$$typeof:CQ,_payload:{_status:-1,_result:e},_init:DQ}};co.memo=function(e,t){return{$$typeof:SQ,type:e,compare:t===void 0?null:t}};co.startTransition=function(e){var t=GE.transition;GE.transition={};try{e()}finally{GE.transition=t}};co.unstable_act=c7;co.useCallback=function(e,t){return ks.current.useCallback(e,t)};co.useContext=function(e){return ks.current.useContext(e)};co.useDebugValue=function(){};co.useDeferredValue=function(e){return ks.current.useDeferredValue(e)};co.useEffect=function(e,t){return ks.current.useEffect(e,t)};co.useId=function(){return ks.current.useId()};co.useImperativeHandle=function(e,t,n){return ks.current.useImperativeHandle(e,t,n)};co.useInsertionEffect=function(e,t){return ks.current.useInsertionEffect(e,t)};co.useLayoutEffect=function(e,t){return ks.current.useLayoutEffect(e,t)};co.useMemo=function(e,t){return ks.current.useMemo(e,t)};co.useReducer=function(e,t,n){return ks.current.useReducer(e,t,n)};co.useRef=function(e){return ks.current.useRef(e)};co.useState=function(e){return ks.current.useState(e)};co.useSyncExternalStore=function(e,t,n){return ks.current.useSyncExternalStore(e,t,n)};co.useTransition=function(){return ks.current.useTransition()};co.version="18.3.1";t7.exports=co;var j=t7.exports;const dt=w0(j),A1=JF({__proto__:null,default:dt},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IQ=j,PQ=Symbol.for("react.element"),OQ=Symbol.for("react.fragment"),LQ=Object.prototype.hasOwnProperty,NQ=IQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zQ={key:!0,ref:!0,__self:!0,__source:!0};function u7(e,t,n){var r,l={},d=null,f=null;n!==void 0&&(d=""+n),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(f=t.ref);for(r in t)LQ.call(t,r)&&!zQ.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)l[r]===void 0&&(l[r]=t[r]);return{$$typeof:PQ,type:e,key:d,ref:f,props:l,_owner:NQ.current}}GS.Fragment=OQ;GS.jsx=u7;GS.jsxs=u7;e7.exports=GS;var O=e7.exports,d7={exports:{}},zl={},h7={exports:{}},f7={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Re,bt){var Lt=Re.length;Re.push(bt);e:for(;0<Lt;){var Ct=Lt-1>>>1,Nt=Re[Ct];if(0<l(Nt,bt))Re[Ct]=bt,Re[Lt]=Nt,Lt=Ct;else break e}}function n(Re){return Re.length===0?null:Re[0]}function r(Re){if(Re.length===0)return null;var bt=Re[0],Lt=Re.pop();if(Lt!==bt){Re[0]=Lt;e:for(var Ct=0,Nt=Re.length,tn=Nt>>>1;Ct<tn;){var Dt=2*(Ct+1)-1,cn=Re[Dt],Mt=Dt+1,Vn=Re[Mt];if(0>l(cn,Lt))Mt<Nt&&0>l(Vn,cn)?(Re[Ct]=Vn,Re[Mt]=Lt,Ct=Mt):(Re[Ct]=cn,Re[Dt]=Lt,Ct=Dt);else if(Mt<Nt&&0>l(Vn,Lt))Re[Ct]=Vn,Re[Mt]=Lt,Ct=Mt;else break e}}return bt}function l(Re,bt){var Lt=Re.sortIndex-bt.sortIndex;return Lt!==0?Lt:Re.id-bt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var f=Date,y=f.now();e.unstable_now=function(){return f.now()-y}}var a=[],E=[],C=1,M=null,P=3,N=!1,F=!1,$=!1,Z=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(Re){for(var bt=n(E);bt!==null;){if(bt.callback===null)r(E);else if(bt.startTime<=Re)r(E),bt.sortIndex=bt.expirationTime,t(a,bt);else break;bt=n(E)}}function te(Re){if($=!1,Q(Re),!F)if(n(a)!==null)F=!0,ot(ie);else{var bt=n(E);bt!==null&&st(te,bt.startTime-Re)}}function ie(Re,bt){F=!1,$&&($=!1,q(me),me=-1),N=!0;var Lt=P;try{for(Q(bt),M=n(a);M!==null&&(!(M.expirationTime>bt)||Re&&!je());){var Ct=M.callback;if(typeof Ct=="function"){M.callback=null,P=M.priorityLevel;var Nt=Ct(M.expirationTime<=bt);bt=e.unstable_now(),typeof Nt=="function"?M.callback=Nt:M===n(a)&&r(a),Q(bt)}else r(a);M=n(a)}if(M!==null)var tn=!0;else{var Dt=n(E);Dt!==null&&st(te,Dt.startTime-bt),tn=!1}return tn}finally{M=null,P=Lt,N=!1}}var ue=!1,re=null,me=-1,ve=5,De=-1;function je(){return!(e.unstable_now()-De<ve)}function Be(){if(re!==null){var Re=e.unstable_now();De=Re;var bt=!0;try{bt=re(!0,Re)}finally{bt?Ue():(ue=!1,re=null)}}else ue=!1}var Ue;if(typeof K=="function")Ue=function(){K(Be)};else if(typeof MessageChannel<"u"){var Ge=new MessageChannel,ze=Ge.port2;Ge.port1.onmessage=Be,Ue=function(){ze.postMessage(null)}}else Ue=function(){Z(Be,0)};function ot(Re){re=Re,ue||(ue=!0,Ue())}function st(Re,bt){me=Z(function(){Re(e.unstable_now())},bt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Re){Re.callback=null},e.unstable_continueExecution=function(){F||N||(F=!0,ot(ie))},e.unstable_forceFrameRate=function(Re){0>Re||125<Re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ve=0<Re?Math.floor(1e3/Re):5},e.unstable_getCurrentPriorityLevel=function(){return P},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(Re){switch(P){case 1:case 2:case 3:var bt=3;break;default:bt=P}var Lt=P;P=bt;try{return Re()}finally{P=Lt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Re,bt){switch(Re){case 1:case 2:case 3:case 4:case 5:break;default:Re=3}var Lt=P;P=Re;try{return bt()}finally{P=Lt}},e.unstable_scheduleCallback=function(Re,bt,Lt){var Ct=e.unstable_now();switch(typeof Lt=="object"&&Lt!==null?(Lt=Lt.delay,Lt=typeof Lt=="number"&&0<Lt?Ct+Lt:Ct):Lt=Ct,Re){case 1:var Nt=-1;break;case 2:Nt=250;break;case 5:Nt=1073741823;break;case 4:Nt=1e4;break;default:Nt=5e3}return Nt=Lt+Nt,Re={id:C++,callback:bt,priorityLevel:Re,startTime:Lt,expirationTime:Nt,sortIndex:-1},Lt>Ct?(Re.sortIndex=Lt,t(E,Re),n(a)===null&&Re===n(E)&&($?(q(me),me=-1):$=!0,st(te,Lt-Ct))):(Re.sortIndex=Nt,t(a,Re),F||N||(F=!0,ot(ie))),Re},e.unstable_shouldYield=je,e.unstable_wrapCallback=function(Re){var bt=P;return function(){var Lt=P;P=bt;try{return Re.apply(this,arguments)}finally{P=Lt}}}})(f7);h7.exports=f7;var BQ=h7.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FQ=j,Ol=BQ;function pn(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p7=new Set,M1={};function E0(e,t){Db(e,t),Db(e+"Capture",t)}function Db(e,t){for(M1[e]=t,e=0;e<t.length;e++)p7.add(t[e])}var Zh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),OM=Object.prototype.hasOwnProperty,jQ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pz={},mz={};function $Q(e){return OM.call(mz,e)?!0:OM.call(pz,e)?!1:jQ.test(e)?mz[e]=!0:(pz[e]=!0,!1)}function UQ(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function VQ(e,t,n,r){if(t===null||typeof t>"u"||UQ(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function As(e,t,n,r,l,d,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=f}var Ya={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ya[e]=new As(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ya[t]=new As(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ya[e]=new As(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ya[e]=new As(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ya[e]=new As(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ya[e]=new As(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ya[e]=new As(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ya[e]=new As(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ya[e]=new As(e,5,!1,e.toLowerCase(),null,!1,!1)});var H5=/[\-:]([a-z])/g;function W5(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(H5,W5);Ya[t]=new As(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(H5,W5);Ya[t]=new As(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(H5,W5);Ya[t]=new As(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ya[e]=new As(e,1,!1,e.toLowerCase(),null,!1,!1)});Ya.xlinkHref=new As("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ya[e]=new As(e,1,!1,e.toLowerCase(),null,!0,!0)});function Y5(e,t,n,r){var l=Ya.hasOwnProperty(t)?Ya[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(VQ(t,n,l,r)&&(n=null),r||l===null?$Q(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,r=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var rf=FQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zw=Symbol.for("react.element"),Yy=Symbol.for("react.portal"),Gy=Symbol.for("react.fragment"),G5=Symbol.for("react.strict_mode"),LM=Symbol.for("react.profiler"),m7=Symbol.for("react.provider"),g7=Symbol.for("react.context"),q5=Symbol.for("react.forward_ref"),NM=Symbol.for("react.suspense"),zM=Symbol.for("react.suspense_list"),Z5=Symbol.for("react.memo"),vp=Symbol.for("react.lazy"),y7=Symbol.for("react.offscreen"),gz=Symbol.iterator;function __(e){return e===null||typeof e!="object"?null:(e=gz&&e[gz]||e["@@iterator"],typeof e=="function"?e:null)}var Mi=Object.assign,KA;function q_(e){if(KA===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);KA=t&&t[1]||""}return`
`+KA+e}var XA=!1;function QA(e,t){if(!e||XA)return"";XA=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(E){var r=E}Reflect.construct(e,[],t)}else{try{t.call()}catch(E){r=E}e.call(t.prototype)}else{try{throw Error()}catch(E){r=E}e()}}catch(E){if(E&&r&&typeof E.stack=="string"){for(var l=E.stack.split(`
`),d=r.stack.split(`
`),f=l.length-1,y=d.length-1;1<=f&&0<=y&&l[f]!==d[y];)y--;for(;1<=f&&0<=y;f--,y--)if(l[f]!==d[y]){if(f!==1||y!==1)do if(f--,y--,0>y||l[f]!==d[y]){var a=`
`+l[f].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=f&&0<=y);break}}}finally{XA=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?q_(e):""}function HQ(e){switch(e.tag){case 5:return q_(e.type);case 16:return q_("Lazy");case 13:return q_("Suspense");case 19:return q_("SuspenseList");case 0:case 2:case 15:return e=QA(e.type,!1),e;case 11:return e=QA(e.type.render,!1),e;case 1:return e=QA(e.type,!0),e;default:return""}}function BM(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gy:return"Fragment";case Yy:return"Portal";case LM:return"Profiler";case G5:return"StrictMode";case NM:return"Suspense";case zM:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case g7:return(e.displayName||"Context")+".Consumer";case m7:return(e._context.displayName||"Context")+".Provider";case q5:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Z5:return t=e.displayName||null,t!==null?t:BM(e.type)||"Memo";case vp:t=e._payload,e=e._init;try{return BM(e(t))}catch{}}return null}function WQ(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return BM(t);case 8:return t===G5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Gp(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function b7(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function YQ(e){var t=b7(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,d=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(f){r=""+f,d.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(f){r=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Kw(e){e._valueTracker||(e._valueTracker=YQ(e))}function v7(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=b7(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function TT(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function FM(e,t){var n=t.checked;return Mi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function yz(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Gp(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _7(e,t){t=t.checked,t!=null&&Y5(e,"checked",t,!1)}function jM(e,t){_7(e,t);var n=Gp(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$M(e,t.type,n):t.hasOwnProperty("defaultValue")&&$M(e,t.type,Gp(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function bz(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function $M(e,t,n){(t!=="number"||TT(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Z_=Array.isArray;function cb(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Gp(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function UM(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(pn(91));return Mi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function vz(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(pn(92));if(Z_(n)){if(1<n.length)throw Error(pn(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Gp(n)}}function x7(e,t){var n=Gp(t.value),r=Gp(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function _z(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function w7(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function VM(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?w7(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xw,E7=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Xw=Xw||document.createElement("div"),Xw.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Xw.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function D1(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var t1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GQ=["Webkit","ms","Moz","O"];Object.keys(t1).forEach(function(e){GQ.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),t1[t]=t1[e]})});function T7(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||t1.hasOwnProperty(e)&&t1[e]?(""+t).trim():t+"px"}function S7(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=T7(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}var qQ=Mi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function HM(e,t){if(t){if(qQ[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(pn(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(pn(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(pn(61))}if(t.style!=null&&typeof t.style!="object")throw Error(pn(62))}}function WM(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var YM=null;function K5(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var GM=null,ub=null,db=null;function xz(e){if(e=xx(e)){if(typeof GM!="function")throw Error(pn(280));var t=e.stateNode;t&&(t=QS(t),GM(e.stateNode,e.type,t))}}function C7(e){ub?db?db.push(e):db=[e]:ub=e}function k7(){if(ub){var e=ub,t=db;if(db=ub=null,xz(e),t)for(e=0;e<t.length;e++)xz(t[e])}}function A7(e,t){return e(t)}function M7(){}var JA=!1;function D7(e,t,n){if(JA)return e(t,n);JA=!0;try{return A7(e,t,n)}finally{JA=!1,(ub!==null||db!==null)&&(M7(),k7())}}function R1(e,t){var n=e.stateNode;if(n===null)return null;var r=QS(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(pn(231,t,typeof n));return n}var qM=!1;if(Zh)try{var x_={};Object.defineProperty(x_,"passive",{get:function(){qM=!0}}),window.addEventListener("test",x_,x_),window.removeEventListener("test",x_,x_)}catch{qM=!1}function ZQ(e,t,n,r,l,d,f,y,a){var E=Array.prototype.slice.call(arguments,3);try{t.apply(n,E)}catch(C){this.onError(C)}}var n1=!1,ST=null,CT=!1,ZM=null,KQ={onError:function(e){n1=!0,ST=e}};function XQ(e,t,n,r,l,d,f,y,a){n1=!1,ST=null,ZQ.apply(KQ,arguments)}function QQ(e,t,n,r,l,d,f,y,a){if(XQ.apply(this,arguments),n1){if(n1){var E=ST;n1=!1,ST=null}else throw Error(pn(198));CT||(CT=!0,ZM=E)}}function T0(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function R7(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wz(e){if(T0(e)!==e)throw Error(pn(188))}function JQ(e){var t=e.alternate;if(!t){if(t=T0(e),t===null)throw Error(pn(188));return t!==e?null:e}for(var n=e,r=t;;){var l=n.return;if(l===null)break;var d=l.alternate;if(d===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===d.child){for(d=l.child;d;){if(d===n)return wz(l),e;if(d===r)return wz(l),t;d=d.sibling}throw Error(pn(188))}if(n.return!==r.return)n=l,r=d;else{for(var f=!1,y=l.child;y;){if(y===n){f=!0,n=l,r=d;break}if(y===r){f=!0,r=l,n=d;break}y=y.sibling}if(!f){for(y=d.child;y;){if(y===n){f=!0,n=d,r=l;break}if(y===r){f=!0,r=d,n=l;break}y=y.sibling}if(!f)throw Error(pn(189))}}if(n.alternate!==r)throw Error(pn(190))}if(n.tag!==3)throw Error(pn(188));return n.stateNode.current===n?e:t}function I7(e){return e=JQ(e),e!==null?P7(e):null}function P7(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=P7(e);if(t!==null)return t;e=e.sibling}return null}var O7=Ol.unstable_scheduleCallback,Ez=Ol.unstable_cancelCallback,eJ=Ol.unstable_shouldYield,tJ=Ol.unstable_requestPaint,qi=Ol.unstable_now,nJ=Ol.unstable_getCurrentPriorityLevel,X5=Ol.unstable_ImmediatePriority,L7=Ol.unstable_UserBlockingPriority,kT=Ol.unstable_NormalPriority,rJ=Ol.unstable_LowPriority,N7=Ol.unstable_IdlePriority,qS=null,gd=null;function oJ(e){if(gd&&typeof gd.onCommitFiberRoot=="function")try{gd.onCommitFiberRoot(qS,e,void 0,(e.current.flags&128)===128)}catch{}}var yu=Math.clz32?Math.clz32:sJ,iJ=Math.log,aJ=Math.LN2;function sJ(e){return e>>>=0,e===0?32:31-(iJ(e)/aJ|0)|0}var Qw=64,Jw=4194304;function K_(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function AT(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,l=e.suspendedLanes,d=e.pingedLanes,f=n&268435455;if(f!==0){var y=f&~l;y!==0?r=K_(y):(d&=f,d!==0&&(r=K_(d)))}else f=n&~l,f!==0?r=K_(f):d!==0&&(r=K_(d));if(r===0)return 0;if(t!==0&&t!==r&&!(t&l)&&(l=r&-r,d=t&-t,l>=d||l===16&&(d&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-yu(t),l=1<<n,r|=e[n],t&=~l;return r}function lJ(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cJ(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,d=e.pendingLanes;0<d;){var f=31-yu(d),y=1<<f,a=l[f];a===-1?(!(y&n)||y&r)&&(l[f]=lJ(y,t)):a<=t&&(e.expiredLanes|=y),d&=~y}}function KM(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function z7(){var e=Qw;return Qw<<=1,!(Qw&4194240)&&(Qw=64),e}function e3(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vx(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-yu(t),e[t]=n}function uJ(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-yu(n),d=1<<l;t[l]=0,r[l]=-1,e[l]=-1,n&=~d}}function Q5(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-yu(n),l=1<<r;l&t|e[r]&t&&(e[r]|=t),n&=~l}}var Vo=0;function B7(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var F7,J5,j7,$7,U7,XM=!1,eE=[],Np=null,zp=null,Bp=null,I1=new Map,P1=new Map,Ep=[],dJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tz(e,t){switch(e){case"focusin":case"focusout":Np=null;break;case"dragenter":case"dragleave":zp=null;break;case"mouseover":case"mouseout":Bp=null;break;case"pointerover":case"pointerout":I1.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":P1.delete(t.pointerId)}}function w_(e,t,n,r,l,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:d,targetContainers:[l]},t!==null&&(t=xx(t),t!==null&&J5(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function hJ(e,t,n,r,l){switch(t){case"focusin":return Np=w_(Np,e,t,n,r,l),!0;case"dragenter":return zp=w_(zp,e,t,n,r,l),!0;case"mouseover":return Bp=w_(Bp,e,t,n,r,l),!0;case"pointerover":var d=l.pointerId;return I1.set(d,w_(I1.get(d)||null,e,t,n,r,l)),!0;case"gotpointercapture":return d=l.pointerId,P1.set(d,w_(P1.get(d)||null,e,t,n,r,l)),!0}return!1}function V7(e){var t=Hg(e.target);if(t!==null){var n=T0(t);if(n!==null){if(t=n.tag,t===13){if(t=R7(n),t!==null){e.blockedOn=t,U7(e.priority,function(){j7(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qE(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=QM(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);YM=r,n.target.dispatchEvent(r),YM=null}else return t=xx(n),t!==null&&J5(t),e.blockedOn=n,!1;t.shift()}return!0}function Sz(e,t,n){qE(e)&&n.delete(t)}function fJ(){XM=!1,Np!==null&&qE(Np)&&(Np=null),zp!==null&&qE(zp)&&(zp=null),Bp!==null&&qE(Bp)&&(Bp=null),I1.forEach(Sz),P1.forEach(Sz)}function E_(e,t){e.blockedOn===t&&(e.blockedOn=null,XM||(XM=!0,Ol.unstable_scheduleCallback(Ol.unstable_NormalPriority,fJ)))}function O1(e){function t(l){return E_(l,e)}if(0<eE.length){E_(eE[0],e);for(var n=1;n<eE.length;n++){var r=eE[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Np!==null&&E_(Np,e),zp!==null&&E_(zp,e),Bp!==null&&E_(Bp,e),I1.forEach(t),P1.forEach(t),n=0;n<Ep.length;n++)r=Ep[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ep.length&&(n=Ep[0],n.blockedOn===null);)V7(n),n.blockedOn===null&&Ep.shift()}var hb=rf.ReactCurrentBatchConfig,MT=!0;function pJ(e,t,n,r){var l=Vo,d=hb.transition;hb.transition=null;try{Vo=1,eR(e,t,n,r)}finally{Vo=l,hb.transition=d}}function mJ(e,t,n,r){var l=Vo,d=hb.transition;hb.transition=null;try{Vo=4,eR(e,t,n,r)}finally{Vo=l,hb.transition=d}}function eR(e,t,n,r){if(MT){var l=QM(e,t,n,r);if(l===null)u3(e,t,r,DT,n),Tz(e,r);else if(hJ(l,e,t,n,r))r.stopPropagation();else if(Tz(e,r),t&4&&-1<dJ.indexOf(e)){for(;l!==null;){var d=xx(l);if(d!==null&&F7(d),d=QM(e,t,n,r),d===null&&u3(e,t,r,DT,n),d===l)break;l=d}l!==null&&r.stopPropagation()}else u3(e,t,r,null,n)}}var DT=null;function QM(e,t,n,r){if(DT=null,e=K5(r),e=Hg(e),e!==null)if(t=T0(e),t===null)e=null;else if(n=t.tag,n===13){if(e=R7(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return DT=e,null}function H7(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nJ()){case X5:return 1;case L7:return 4;case kT:case rJ:return 16;case N7:return 536870912;default:return 16}default:return 16}}var Sp=null,tR=null,ZE=null;function W7(){if(ZE)return ZE;var e,t=tR,n=t.length,r,l="value"in Sp?Sp.value:Sp.textContent,d=l.length;for(e=0;e<n&&t[e]===l[e];e++);var f=n-e;for(r=1;r<=f&&t[n-r]===l[d-r];r++);return ZE=l.slice(e,1<r?1-r:void 0)}function KE(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function tE(){return!0}function Cz(){return!1}function Bl(e){function t(n,r,l,d,f){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=d,this.target=f,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(n=e[y],this[y]=n?n(d):d[y]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?tE:Cz,this.isPropagationStopped=Cz,this}return Mi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tE)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tE)},persist:function(){},isPersistent:tE}),t}var uv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nR=Bl(uv),_x=Mi({},uv,{view:0,detail:0}),gJ=Bl(_x),t3,n3,T_,ZS=Mi({},_x,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rR,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==T_&&(T_&&e.type==="mousemove"?(t3=e.screenX-T_.screenX,n3=e.screenY-T_.screenY):n3=t3=0,T_=e),t3)},movementY:function(e){return"movementY"in e?e.movementY:n3}}),kz=Bl(ZS),yJ=Mi({},ZS,{dataTransfer:0}),bJ=Bl(yJ),vJ=Mi({},_x,{relatedTarget:0}),r3=Bl(vJ),_J=Mi({},uv,{animationName:0,elapsedTime:0,pseudoElement:0}),xJ=Bl(_J),wJ=Mi({},uv,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),EJ=Bl(wJ),TJ=Mi({},uv,{data:0}),Az=Bl(TJ),SJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kJ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AJ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=kJ[e])?!!t[e]:!1}function rR(){return AJ}var MJ=Mi({},_x,{key:function(e){if(e.key){var t=SJ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=KE(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?CJ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rR,charCode:function(e){return e.type==="keypress"?KE(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?KE(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),DJ=Bl(MJ),RJ=Mi({},ZS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mz=Bl(RJ),IJ=Mi({},_x,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rR}),PJ=Bl(IJ),OJ=Mi({},uv,{propertyName:0,elapsedTime:0,pseudoElement:0}),LJ=Bl(OJ),NJ=Mi({},ZS,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zJ=Bl(NJ),BJ=[9,13,27,32],oR=Zh&&"CompositionEvent"in window,r1=null;Zh&&"documentMode"in document&&(r1=document.documentMode);var FJ=Zh&&"TextEvent"in window&&!r1,Y7=Zh&&(!oR||r1&&8<r1&&11>=r1),Dz=" ",Rz=!1;function G7(e,t){switch(e){case"keyup":return BJ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function q7(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qy=!1;function jJ(e,t){switch(e){case"compositionend":return q7(t);case"keypress":return t.which!==32?null:(Rz=!0,Dz);case"textInput":return e=t.data,e===Dz&&Rz?null:e;default:return null}}function $J(e,t){if(qy)return e==="compositionend"||!oR&&G7(e,t)?(e=W7(),ZE=tR=Sp=null,qy=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Y7&&t.locale!=="ko"?null:t.data;default:return null}}var UJ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iz(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!UJ[e.type]:t==="textarea"}function Z7(e,t,n,r){C7(r),t=RT(t,"onChange"),0<t.length&&(n=new nR("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var o1=null,L1=null;function VJ(e){aj(e,0)}function KS(e){var t=Xy(e);if(v7(t))return e}function HJ(e,t){if(e==="change")return t}var K7=!1;if(Zh){var o3;if(Zh){var i3="oninput"in document;if(!i3){var Pz=document.createElement("div");Pz.setAttribute("oninput","return;"),i3=typeof Pz.oninput=="function"}o3=i3}else o3=!1;K7=o3&&(!document.documentMode||9<document.documentMode)}function Oz(){o1&&(o1.detachEvent("onpropertychange",X7),L1=o1=null)}function X7(e){if(e.propertyName==="value"&&KS(L1)){var t=[];Z7(t,L1,e,K5(e)),D7(VJ,t)}}function WJ(e,t,n){e==="focusin"?(Oz(),o1=t,L1=n,o1.attachEvent("onpropertychange",X7)):e==="focusout"&&Oz()}function YJ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return KS(L1)}function GJ(e,t){if(e==="click")return KS(t)}function qJ(e,t){if(e==="input"||e==="change")return KS(t)}function ZJ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xu=typeof Object.is=="function"?Object.is:ZJ;function N1(e,t){if(xu(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!OM.call(t,l)||!xu(e[l],t[l]))return!1}return!0}function Lz(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Nz(e,t){var n=Lz(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Lz(n)}}function Q7(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Q7(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function J7(){for(var e=window,t=TT();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=TT(e.document)}return t}function iR(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function KJ(e){var t=J7(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Q7(n.ownerDocument.documentElement,n)){if(r!==null&&iR(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,d=Math.min(r.start,l);r=r.end===void 0?d:Math.min(r.end,l),!e.extend&&d>r&&(l=r,r=d,d=l),l=Nz(n,d);var f=Nz(n,r);l&&f&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),d>r?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var XJ=Zh&&"documentMode"in document&&11>=document.documentMode,Zy=null,JM=null,i1=null,eD=!1;function zz(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;eD||Zy==null||Zy!==TT(r)||(r=Zy,"selectionStart"in r&&iR(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),i1&&N1(i1,r)||(i1=r,r=RT(JM,"onSelect"),0<r.length&&(t=new nR("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Zy)))}function nE(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ky={animationend:nE("Animation","AnimationEnd"),animationiteration:nE("Animation","AnimationIteration"),animationstart:nE("Animation","AnimationStart"),transitionend:nE("Transition","TransitionEnd")},a3={},ej={};Zh&&(ej=document.createElement("div").style,"AnimationEvent"in window||(delete Ky.animationend.animation,delete Ky.animationiteration.animation,delete Ky.animationstart.animation),"TransitionEvent"in window||delete Ky.transitionend.transition);function XS(e){if(a3[e])return a3[e];if(!Ky[e])return e;var t=Ky[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ej)return a3[e]=t[n];return e}var tj=XS("animationend"),nj=XS("animationiteration"),rj=XS("animationstart"),oj=XS("transitionend"),ij=new Map,Bz="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function im(e,t){ij.set(e,t),E0(t,[e])}for(var s3=0;s3<Bz.length;s3++){var l3=Bz[s3],QJ=l3.toLowerCase(),JJ=l3[0].toUpperCase()+l3.slice(1);im(QJ,"on"+JJ)}im(tj,"onAnimationEnd");im(nj,"onAnimationIteration");im(rj,"onAnimationStart");im("dblclick","onDoubleClick");im("focusin","onFocus");im("focusout","onBlur");im(oj,"onTransitionEnd");Db("onMouseEnter",["mouseout","mouseover"]);Db("onMouseLeave",["mouseout","mouseover"]);Db("onPointerEnter",["pointerout","pointerover"]);Db("onPointerLeave",["pointerout","pointerover"]);E0("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));E0("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));E0("onBeforeInput",["compositionend","keypress","textInput","paste"]);E0("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));E0("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));E0("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var X_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eee=new Set("cancel close invalid load scroll toggle".split(" ").concat(X_));function Fz(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,QQ(r,t,void 0,e),e.currentTarget=null}function aj(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],l=r.event;r=r.listeners;e:{var d=void 0;if(t)for(var f=r.length-1;0<=f;f--){var y=r[f],a=y.instance,E=y.currentTarget;if(y=y.listener,a!==d&&l.isPropagationStopped())break e;Fz(l,y,E),d=a}else for(f=0;f<r.length;f++){if(y=r[f],a=y.instance,E=y.currentTarget,y=y.listener,a!==d&&l.isPropagationStopped())break e;Fz(l,y,E),d=a}}}if(CT)throw e=ZM,CT=!1,ZM=null,e}function ii(e,t){var n=t[iD];n===void 0&&(n=t[iD]=new Set);var r=e+"__bubble";n.has(r)||(sj(t,e,2,!1),n.add(r))}function c3(e,t,n){var r=0;t&&(r|=4),sj(n,e,r,t)}var rE="_reactListening"+Math.random().toString(36).slice(2);function z1(e){if(!e[rE]){e[rE]=!0,p7.forEach(function(n){n!=="selectionchange"&&(eee.has(n)||c3(n,!1,e),c3(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[rE]||(t[rE]=!0,c3("selectionchange",!1,t))}}function sj(e,t,n,r){switch(H7(t)){case 1:var l=pJ;break;case 4:l=mJ;break;default:l=eR}n=l.bind(null,t,n,e),l=void 0,!qM||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function u3(e,t,n,r,l){var d=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var f=r.tag;if(f===3||f===4){var y=r.stateNode.containerInfo;if(y===l||y.nodeType===8&&y.parentNode===l)break;if(f===4)for(f=r.return;f!==null;){var a=f.tag;if((a===3||a===4)&&(a=f.stateNode.containerInfo,a===l||a.nodeType===8&&a.parentNode===l))return;f=f.return}for(;y!==null;){if(f=Hg(y),f===null)return;if(a=f.tag,a===5||a===6){r=d=f;continue e}y=y.parentNode}}r=r.return}D7(function(){var E=d,C=K5(n),M=[];e:{var P=ij.get(e);if(P!==void 0){var N=nR,F=e;switch(e){case"keypress":if(KE(n)===0)break e;case"keydown":case"keyup":N=DJ;break;case"focusin":F="focus",N=r3;break;case"focusout":F="blur",N=r3;break;case"beforeblur":case"afterblur":N=r3;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=kz;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=bJ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=PJ;break;case tj:case nj:case rj:N=xJ;break;case oj:N=LJ;break;case"scroll":N=gJ;break;case"wheel":N=zJ;break;case"copy":case"cut":case"paste":N=EJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=Mz}var $=(t&4)!==0,Z=!$&&e==="scroll",q=$?P!==null?P+"Capture":null:P;$=[];for(var K=E,Q;K!==null;){Q=K;var te=Q.stateNode;if(Q.tag===5&&te!==null&&(Q=te,q!==null&&(te=R1(K,q),te!=null&&$.push(B1(K,te,Q)))),Z)break;K=K.return}0<$.length&&(P=new N(P,F,null,n,C),M.push({event:P,listeners:$}))}}if(!(t&7)){e:{if(P=e==="mouseover"||e==="pointerover",N=e==="mouseout"||e==="pointerout",P&&n!==YM&&(F=n.relatedTarget||n.fromElement)&&(Hg(F)||F[Kh]))break e;if((N||P)&&(P=C.window===C?C:(P=C.ownerDocument)?P.defaultView||P.parentWindow:window,N?(F=n.relatedTarget||n.toElement,N=E,F=F?Hg(F):null,F!==null&&(Z=T0(F),F!==Z||F.tag!==5&&F.tag!==6)&&(F=null)):(N=null,F=E),N!==F)){if($=kz,te="onMouseLeave",q="onMouseEnter",K="mouse",(e==="pointerout"||e==="pointerover")&&($=Mz,te="onPointerLeave",q="onPointerEnter",K="pointer"),Z=N==null?P:Xy(N),Q=F==null?P:Xy(F),P=new $(te,K+"leave",N,n,C),P.target=Z,P.relatedTarget=Q,te=null,Hg(C)===E&&($=new $(q,K+"enter",F,n,C),$.target=Q,$.relatedTarget=Z,te=$),Z=te,N&&F)t:{for($=N,q=F,K=0,Q=$;Q;Q=Ry(Q))K++;for(Q=0,te=q;te;te=Ry(te))Q++;for(;0<K-Q;)$=Ry($),K--;for(;0<Q-K;)q=Ry(q),Q--;for(;K--;){if($===q||q!==null&&$===q.alternate)break t;$=Ry($),q=Ry(q)}$=null}else $=null;N!==null&&jz(M,P,N,$,!1),F!==null&&Z!==null&&jz(M,Z,F,$,!0)}}e:{if(P=E?Xy(E):window,N=P.nodeName&&P.nodeName.toLowerCase(),N==="select"||N==="input"&&P.type==="file")var ie=HJ;else if(Iz(P))if(K7)ie=qJ;else{ie=YJ;var ue=WJ}else(N=P.nodeName)&&N.toLowerCase()==="input"&&(P.type==="checkbox"||P.type==="radio")&&(ie=GJ);if(ie&&(ie=ie(e,E))){Z7(M,ie,n,C);break e}ue&&ue(e,P,E),e==="focusout"&&(ue=P._wrapperState)&&ue.controlled&&P.type==="number"&&$M(P,"number",P.value)}switch(ue=E?Xy(E):window,e){case"focusin":(Iz(ue)||ue.contentEditable==="true")&&(Zy=ue,JM=E,i1=null);break;case"focusout":i1=JM=Zy=null;break;case"mousedown":eD=!0;break;case"contextmenu":case"mouseup":case"dragend":eD=!1,zz(M,n,C);break;case"selectionchange":if(XJ)break;case"keydown":case"keyup":zz(M,n,C)}var re;if(oR)e:{switch(e){case"compositionstart":var me="onCompositionStart";break e;case"compositionend":me="onCompositionEnd";break e;case"compositionupdate":me="onCompositionUpdate";break e}me=void 0}else qy?G7(e,n)&&(me="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(me="onCompositionStart");me&&(Y7&&n.locale!=="ko"&&(qy||me!=="onCompositionStart"?me==="onCompositionEnd"&&qy&&(re=W7()):(Sp=C,tR="value"in Sp?Sp.value:Sp.textContent,qy=!0)),ue=RT(E,me),0<ue.length&&(me=new Az(me,e,null,n,C),M.push({event:me,listeners:ue}),re?me.data=re:(re=q7(n),re!==null&&(me.data=re)))),(re=FJ?jJ(e,n):$J(e,n))&&(E=RT(E,"onBeforeInput"),0<E.length&&(C=new Az("onBeforeInput","beforeinput",null,n,C),M.push({event:C,listeners:E}),C.data=re))}aj(M,t)})}function B1(e,t,n){return{instance:e,listener:t,currentTarget:n}}function RT(e,t){for(var n=t+"Capture",r=[];e!==null;){var l=e,d=l.stateNode;l.tag===5&&d!==null&&(l=d,d=R1(e,n),d!=null&&r.unshift(B1(e,d,l)),d=R1(e,t),d!=null&&r.push(B1(e,d,l))),e=e.return}return r}function Ry(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function jz(e,t,n,r,l){for(var d=t._reactName,f=[];n!==null&&n!==r;){var y=n,a=y.alternate,E=y.stateNode;if(a!==null&&a===r)break;y.tag===5&&E!==null&&(y=E,l?(a=R1(n,d),a!=null&&f.unshift(B1(n,a,y))):l||(a=R1(n,d),a!=null&&f.push(B1(n,a,y)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var tee=/\r\n?/g,nee=/\u0000|\uFFFD/g;function $z(e){return(typeof e=="string"?e:""+e).replace(tee,`
`).replace(nee,"")}function oE(e,t,n){if(t=$z(t),$z(e)!==t&&n)throw Error(pn(425))}function IT(){}var tD=null,nD=null;function rD(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var oD=typeof setTimeout=="function"?setTimeout:void 0,ree=typeof clearTimeout=="function"?clearTimeout:void 0,Uz=typeof Promise=="function"?Promise:void 0,oee=typeof queueMicrotask=="function"?queueMicrotask:typeof Uz<"u"?function(e){return Uz.resolve(null).then(e).catch(iee)}:oD;function iee(e){setTimeout(function(){throw e})}function d3(e,t){var n=t,r=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){e.removeChild(l),O1(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);O1(t)}function Fp(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Vz(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var dv=Math.random().toString(36).slice(2),hd="__reactFiber$"+dv,F1="__reactProps$"+dv,Kh="__reactContainer$"+dv,iD="__reactEvents$"+dv,aee="__reactListeners$"+dv,see="__reactHandles$"+dv;function Hg(e){var t=e[hd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Kh]||n[hd]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Vz(e);e!==null;){if(n=e[hd])return n;e=Vz(e)}return t}e=n,n=e.parentNode}return null}function xx(e){return e=e[hd]||e[Kh],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xy(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(pn(33))}function QS(e){return e[F1]||null}var aD=[],Qy=-1;function am(e){return{current:e}}function si(e){0>Qy||(e.current=aD[Qy],aD[Qy]=null,Qy--)}function Jo(e,t){Qy++,aD[Qy]=e.current,e.current=t}var qp={},cs=am(qp),Ys=am(!1),a0=qp;function Rb(e,t){var n=e.type.contextTypes;if(!n)return qp;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},d;for(d in n)l[d]=t[d];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function Gs(e){return e=e.childContextTypes,e!=null}function PT(){si(Ys),si(cs)}function Hz(e,t,n){if(cs.current!==qp)throw Error(pn(168));Jo(cs,t),Jo(Ys,n)}function lj(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(pn(108,WQ(e)||"Unknown",l));return Mi({},n,r)}function OT(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||qp,a0=cs.current,Jo(cs,e),Jo(Ys,Ys.current),!0}function Wz(e,t,n){var r=e.stateNode;if(!r)throw Error(pn(169));n?(e=lj(e,t,a0),r.__reactInternalMemoizedMergedChildContext=e,si(Ys),si(cs),Jo(cs,e)):si(Ys),Jo(Ys,n)}var Dh=null,JS=!1,h3=!1;function cj(e){Dh===null?Dh=[e]:Dh.push(e)}function lee(e){JS=!0,cj(e)}function sm(){if(!h3&&Dh!==null){h3=!0;var e=0,t=Vo;try{var n=Dh;for(Vo=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Dh=null,JS=!1}catch(l){throw Dh!==null&&(Dh=Dh.slice(e+1)),O7(X5,sm),l}finally{Vo=t,h3=!1}}return null}var Jy=[],eb=0,LT=null,NT=0,uc=[],dc=0,s0=null,zh=1,Bh="";function Ng(e,t){Jy[eb++]=NT,Jy[eb++]=LT,LT=e,NT=t}function uj(e,t,n){uc[dc++]=zh,uc[dc++]=Bh,uc[dc++]=s0,s0=e;var r=zh;e=Bh;var l=32-yu(r)-1;r&=~(1<<l),n+=1;var d=32-yu(t)+l;if(30<d){var f=l-l%5;d=(r&(1<<f)-1).toString(32),r>>=f,l-=f,zh=1<<32-yu(t)+l|n<<l|r,Bh=d+e}else zh=1<<d|n<<l|r,Bh=e}function aR(e){e.return!==null&&(Ng(e,1),uj(e,1,0))}function sR(e){for(;e===LT;)LT=Jy[--eb],Jy[eb]=null,NT=Jy[--eb],Jy[eb]=null;for(;e===s0;)s0=uc[--dc],uc[dc]=null,Bh=uc[--dc],uc[dc]=null,zh=uc[--dc],uc[dc]=null}var Ml=null,Cl=null,mi=!1,pu=null;function dj(e,t){var n=mc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Yz(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ml=e,Cl=Fp(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ml=e,Cl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=s0!==null?{id:zh,overflow:Bh}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=mc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ml=e,Cl=null,!0):!1;default:return!1}}function sD(e){return(e.mode&1)!==0&&(e.flags&128)===0}function lD(e){if(mi){var t=Cl;if(t){var n=t;if(!Yz(e,t)){if(sD(e))throw Error(pn(418));t=Fp(n.nextSibling);var r=Ml;t&&Yz(e,t)?dj(r,n):(e.flags=e.flags&-4097|2,mi=!1,Ml=e)}}else{if(sD(e))throw Error(pn(418));e.flags=e.flags&-4097|2,mi=!1,Ml=e}}}function Gz(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ml=e}function iE(e){if(e!==Ml)return!1;if(!mi)return Gz(e),mi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!rD(e.type,e.memoizedProps)),t&&(t=Cl)){if(sD(e))throw hj(),Error(pn(418));for(;t;)dj(e,t),t=Fp(t.nextSibling)}if(Gz(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(pn(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Cl=Fp(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Cl=null}}else Cl=Ml?Fp(e.stateNode.nextSibling):null;return!0}function hj(){for(var e=Cl;e;)e=Fp(e.nextSibling)}function Ib(){Cl=Ml=null,mi=!1}function lR(e){pu===null?pu=[e]:pu.push(e)}var cee=rf.ReactCurrentBatchConfig;function S_(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(pn(309));var r=n.stateNode}if(!r)throw Error(pn(147,e));var l=r,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(f){var y=l.refs;f===null?delete y[d]:y[d]=f},t._stringRef=d,t)}if(typeof e!="string")throw Error(pn(284));if(!n._owner)throw Error(pn(290,e))}return e}function aE(e,t){throw e=Object.prototype.toString.call(t),Error(pn(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qz(e){var t=e._init;return t(e._payload)}function fj(e){function t(q,K){if(e){var Q=q.deletions;Q===null?(q.deletions=[K],q.flags|=16):Q.push(K)}}function n(q,K){if(!e)return null;for(;K!==null;)t(q,K),K=K.sibling;return null}function r(q,K){for(q=new Map;K!==null;)K.key!==null?q.set(K.key,K):q.set(K.index,K),K=K.sibling;return q}function l(q,K){return q=Vp(q,K),q.index=0,q.sibling=null,q}function d(q,K,Q){return q.index=Q,e?(Q=q.alternate,Q!==null?(Q=Q.index,Q<K?(q.flags|=2,K):Q):(q.flags|=2,K)):(q.flags|=1048576,K)}function f(q){return e&&q.alternate===null&&(q.flags|=2),q}function y(q,K,Q,te){return K===null||K.tag!==6?(K=v3(Q,q.mode,te),K.return=q,K):(K=l(K,Q),K.return=q,K)}function a(q,K,Q,te){var ie=Q.type;return ie===Gy?C(q,K,Q.props.children,te,Q.key):K!==null&&(K.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===vp&&qz(ie)===K.type)?(te=l(K,Q.props),te.ref=S_(q,K,Q),te.return=q,te):(te=rT(Q.type,Q.key,Q.props,null,q.mode,te),te.ref=S_(q,K,Q),te.return=q,te)}function E(q,K,Q,te){return K===null||K.tag!==4||K.stateNode.containerInfo!==Q.containerInfo||K.stateNode.implementation!==Q.implementation?(K=_3(Q,q.mode,te),K.return=q,K):(K=l(K,Q.children||[]),K.return=q,K)}function C(q,K,Q,te,ie){return K===null||K.tag!==7?(K=e0(Q,q.mode,te,ie),K.return=q,K):(K=l(K,Q),K.return=q,K)}function M(q,K,Q){if(typeof K=="string"&&K!==""||typeof K=="number")return K=v3(""+K,q.mode,Q),K.return=q,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case Zw:return Q=rT(K.type,K.key,K.props,null,q.mode,Q),Q.ref=S_(q,null,K),Q.return=q,Q;case Yy:return K=_3(K,q.mode,Q),K.return=q,K;case vp:var te=K._init;return M(q,te(K._payload),Q)}if(Z_(K)||__(K))return K=e0(K,q.mode,Q,null),K.return=q,K;aE(q,K)}return null}function P(q,K,Q,te){var ie=K!==null?K.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return ie!==null?null:y(q,K,""+Q,te);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Zw:return Q.key===ie?a(q,K,Q,te):null;case Yy:return Q.key===ie?E(q,K,Q,te):null;case vp:return ie=Q._init,P(q,K,ie(Q._payload),te)}if(Z_(Q)||__(Q))return ie!==null?null:C(q,K,Q,te,null);aE(q,Q)}return null}function N(q,K,Q,te,ie){if(typeof te=="string"&&te!==""||typeof te=="number")return q=q.get(Q)||null,y(K,q,""+te,ie);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case Zw:return q=q.get(te.key===null?Q:te.key)||null,a(K,q,te,ie);case Yy:return q=q.get(te.key===null?Q:te.key)||null,E(K,q,te,ie);case vp:var ue=te._init;return N(q,K,Q,ue(te._payload),ie)}if(Z_(te)||__(te))return q=q.get(Q)||null,C(K,q,te,ie,null);aE(K,te)}return null}function F(q,K,Q,te){for(var ie=null,ue=null,re=K,me=K=0,ve=null;re!==null&&me<Q.length;me++){re.index>me?(ve=re,re=null):ve=re.sibling;var De=P(q,re,Q[me],te);if(De===null){re===null&&(re=ve);break}e&&re&&De.alternate===null&&t(q,re),K=d(De,K,me),ue===null?ie=De:ue.sibling=De,ue=De,re=ve}if(me===Q.length)return n(q,re),mi&&Ng(q,me),ie;if(re===null){for(;me<Q.length;me++)re=M(q,Q[me],te),re!==null&&(K=d(re,K,me),ue===null?ie=re:ue.sibling=re,ue=re);return mi&&Ng(q,me),ie}for(re=r(q,re);me<Q.length;me++)ve=N(re,q,me,Q[me],te),ve!==null&&(e&&ve.alternate!==null&&re.delete(ve.key===null?me:ve.key),K=d(ve,K,me),ue===null?ie=ve:ue.sibling=ve,ue=ve);return e&&re.forEach(function(je){return t(q,je)}),mi&&Ng(q,me),ie}function $(q,K,Q,te){var ie=__(Q);if(typeof ie!="function")throw Error(pn(150));if(Q=ie.call(Q),Q==null)throw Error(pn(151));for(var ue=ie=null,re=K,me=K=0,ve=null,De=Q.next();re!==null&&!De.done;me++,De=Q.next()){re.index>me?(ve=re,re=null):ve=re.sibling;var je=P(q,re,De.value,te);if(je===null){re===null&&(re=ve);break}e&&re&&je.alternate===null&&t(q,re),K=d(je,K,me),ue===null?ie=je:ue.sibling=je,ue=je,re=ve}if(De.done)return n(q,re),mi&&Ng(q,me),ie;if(re===null){for(;!De.done;me++,De=Q.next())De=M(q,De.value,te),De!==null&&(K=d(De,K,me),ue===null?ie=De:ue.sibling=De,ue=De);return mi&&Ng(q,me),ie}for(re=r(q,re);!De.done;me++,De=Q.next())De=N(re,q,me,De.value,te),De!==null&&(e&&De.alternate!==null&&re.delete(De.key===null?me:De.key),K=d(De,K,me),ue===null?ie=De:ue.sibling=De,ue=De);return e&&re.forEach(function(Be){return t(q,Be)}),mi&&Ng(q,me),ie}function Z(q,K,Q,te){if(typeof Q=="object"&&Q!==null&&Q.type===Gy&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Zw:e:{for(var ie=Q.key,ue=K;ue!==null;){if(ue.key===ie){if(ie=Q.type,ie===Gy){if(ue.tag===7){n(q,ue.sibling),K=l(ue,Q.props.children),K.return=q,q=K;break e}}else if(ue.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===vp&&qz(ie)===ue.type){n(q,ue.sibling),K=l(ue,Q.props),K.ref=S_(q,ue,Q),K.return=q,q=K;break e}n(q,ue);break}else t(q,ue);ue=ue.sibling}Q.type===Gy?(K=e0(Q.props.children,q.mode,te,Q.key),K.return=q,q=K):(te=rT(Q.type,Q.key,Q.props,null,q.mode,te),te.ref=S_(q,K,Q),te.return=q,q=te)}return f(q);case Yy:e:{for(ue=Q.key;K!==null;){if(K.key===ue)if(K.tag===4&&K.stateNode.containerInfo===Q.containerInfo&&K.stateNode.implementation===Q.implementation){n(q,K.sibling),K=l(K,Q.children||[]),K.return=q,q=K;break e}else{n(q,K);break}else t(q,K);K=K.sibling}K=_3(Q,q.mode,te),K.return=q,q=K}return f(q);case vp:return ue=Q._init,Z(q,K,ue(Q._payload),te)}if(Z_(Q))return F(q,K,Q,te);if(__(Q))return $(q,K,Q,te);aE(q,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,K!==null&&K.tag===6?(n(q,K.sibling),K=l(K,Q),K.return=q,q=K):(n(q,K),K=v3(Q,q.mode,te),K.return=q,q=K),f(q)):n(q,K)}return Z}var Pb=fj(!0),pj=fj(!1),zT=am(null),BT=null,tb=null,cR=null;function uR(){cR=tb=BT=null}function dR(e){var t=zT.current;si(zT),e._currentValue=t}function cD(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function fb(e,t){BT=e,cR=tb=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Hs=!0),e.firstContext=null)}function _c(e){var t=e._currentValue;if(cR!==e)if(e={context:e,memoizedValue:t,next:null},tb===null){if(BT===null)throw Error(pn(308));tb=e,BT.dependencies={lanes:0,firstContext:e}}else tb=tb.next=e;return t}var Wg=null;function hR(e){Wg===null?Wg=[e]:Wg.push(e)}function mj(e,t,n,r){var l=t.interleaved;return l===null?(n.next=n,hR(t)):(n.next=l.next,l.next=n),t.interleaved=n,Xh(e,r)}function Xh(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var _p=!1;function fR(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jh(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function jp(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,_o&2){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,Xh(e,n)}return l=r.interleaved,l===null?(t.next=t,hR(r)):(t.next=l.next,l.next=t),r.interleaved=t,Xh(e,n)}function XE(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Q5(e,n)}}function Zz(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,d=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};d===null?l=d=f:d=d.next=f,n=n.next}while(n!==null);d===null?l=d=t:d=d.next=t}else l=d=t;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:d,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function FT(e,t,n,r){var l=e.updateQueue;_p=!1;var d=l.firstBaseUpdate,f=l.lastBaseUpdate,y=l.shared.pending;if(y!==null){l.shared.pending=null;var a=y,E=a.next;a.next=null,f===null?d=E:f.next=E,f=a;var C=e.alternate;C!==null&&(C=C.updateQueue,y=C.lastBaseUpdate,y!==f&&(y===null?C.firstBaseUpdate=E:y.next=E,C.lastBaseUpdate=a))}if(d!==null){var M=l.baseState;f=0,C=E=a=null,y=d;do{var P=y.lane,N=y.eventTime;if((r&P)===P){C!==null&&(C=C.next={eventTime:N,lane:0,tag:y.tag,payload:y.payload,callback:y.callback,next:null});e:{var F=e,$=y;switch(P=t,N=n,$.tag){case 1:if(F=$.payload,typeof F=="function"){M=F.call(N,M,P);break e}M=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=$.payload,P=typeof F=="function"?F.call(N,M,P):F,P==null)break e;M=Mi({},M,P);break e;case 2:_p=!0}}y.callback!==null&&y.lane!==0&&(e.flags|=64,P=l.effects,P===null?l.effects=[y]:P.push(y))}else N={eventTime:N,lane:P,tag:y.tag,payload:y.payload,callback:y.callback,next:null},C===null?(E=C=N,a=M):C=C.next=N,f|=P;if(y=y.next,y===null){if(y=l.shared.pending,y===null)break;P=y,y=P.next,P.next=null,l.lastBaseUpdate=P,l.shared.pending=null}}while(!0);if(C===null&&(a=M),l.baseState=a,l.firstBaseUpdate=E,l.lastBaseUpdate=C,t=l.shared.interleaved,t!==null){l=t;do f|=l.lane,l=l.next;while(l!==t)}else d===null&&(l.shared.lanes=0);c0|=f,e.lanes=f,e.memoizedState=M}}function Kz(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(pn(191,l));l.call(r)}}}var wx={},yd=am(wx),j1=am(wx),$1=am(wx);function Yg(e){if(e===wx)throw Error(pn(174));return e}function pR(e,t){switch(Jo($1,t),Jo(j1,e),Jo(yd,wx),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:VM(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=VM(t,e)}si(yd),Jo(yd,t)}function Ob(){si(yd),si(j1),si($1)}function yj(e){Yg($1.current);var t=Yg(yd.current),n=VM(t,e.type);t!==n&&(Jo(j1,e),Jo(yd,n))}function mR(e){j1.current===e&&(si(yd),si(j1))}var Si=am(0);function jT(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var f3=[];function gR(){for(var e=0;e<f3.length;e++)f3[e]._workInProgressVersionPrimary=null;f3.length=0}var QE=rf.ReactCurrentDispatcher,p3=rf.ReactCurrentBatchConfig,l0=0,Ai=null,ba=null,Ca=null,$T=!1,a1=!1,U1=0,uee=0;function ts(){throw Error(pn(321))}function yR(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!xu(e[n],t[n]))return!1;return!0}function bR(e,t,n,r,l,d){if(l0=d,Ai=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,QE.current=e===null||e.memoizedState===null?pee:mee,e=n(r,l),a1){d=0;do{if(a1=!1,U1=0,25<=d)throw Error(pn(301));d+=1,Ca=ba=null,t.updateQueue=null,QE.current=gee,e=n(r,l)}while(a1)}if(QE.current=UT,t=ba!==null&&ba.next!==null,l0=0,Ca=ba=Ai=null,$T=!1,t)throw Error(pn(300));return e}function vR(){var e=U1!==0;return U1=0,e}function id(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ca===null?Ai.memoizedState=Ca=e:Ca=Ca.next=e,Ca}function xc(){if(ba===null){var e=Ai.alternate;e=e!==null?e.memoizedState:null}else e=ba.next;var t=Ca===null?Ai.memoizedState:Ca.next;if(t!==null)Ca=t,ba=e;else{if(e===null)throw Error(pn(310));ba=e,e={memoizedState:ba.memoizedState,baseState:ba.baseState,baseQueue:ba.baseQueue,queue:ba.queue,next:null},Ca===null?Ai.memoizedState=Ca=e:Ca=Ca.next=e}return Ca}function V1(e,t){return typeof t=="function"?t(e):t}function m3(e){var t=xc(),n=t.queue;if(n===null)throw Error(pn(311));n.lastRenderedReducer=e;var r=ba,l=r.baseQueue,d=n.pending;if(d!==null){if(l!==null){var f=l.next;l.next=d.next,d.next=f}r.baseQueue=l=d,n.pending=null}if(l!==null){d=l.next,r=r.baseState;var y=f=null,a=null,E=d;do{var C=E.lane;if((l0&C)===C)a!==null&&(a=a.next={lane:0,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),r=E.hasEagerState?E.eagerState:e(r,E.action);else{var M={lane:C,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null};a===null?(y=a=M,f=r):a=a.next=M,Ai.lanes|=C,c0|=C}E=E.next}while(E!==null&&E!==d);a===null?f=r:a.next=y,xu(r,t.memoizedState)||(Hs=!0),t.memoizedState=r,t.baseState=f,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){l=e;do d=l.lane,Ai.lanes|=d,c0|=d,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function g3(e){var t=xc(),n=t.queue;if(n===null)throw Error(pn(311));n.lastRenderedReducer=e;var r=n.dispatch,l=n.pending,d=t.memoizedState;if(l!==null){n.pending=null;var f=l=l.next;do d=e(d,f.action),f=f.next;while(f!==l);xu(d,t.memoizedState)||(Hs=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),n.lastRenderedState=d}return[d,r]}function bj(){}function vj(e,t){var n=Ai,r=xc(),l=t(),d=!xu(r.memoizedState,l);if(d&&(r.memoizedState=l,Hs=!0),r=r.queue,_R(wj.bind(null,n,r,e),[e]),r.getSnapshot!==t||d||Ca!==null&&Ca.memoizedState.tag&1){if(n.flags|=2048,H1(9,xj.bind(null,n,r,l,t),void 0,null),Aa===null)throw Error(pn(349));l0&30||_j(n,t,l)}return l}function _j(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ai.updateQueue,t===null?(t={lastEffect:null,stores:null},Ai.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function xj(e,t,n,r){t.value=n,t.getSnapshot=r,Ej(t)&&Tj(e)}function wj(e,t,n){return n(function(){Ej(t)&&Tj(e)})}function Ej(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!xu(e,n)}catch{return!0}}function Tj(e){var t=Xh(e,1);t!==null&&bu(t,e,1,-1)}function Xz(e){var t=id();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:V1,lastRenderedState:e},t.queue=e,e=e.dispatch=fee.bind(null,Ai,e),[t.memoizedState,e]}function H1(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ai.updateQueue,t===null?(t={lastEffect:null,stores:null},Ai.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Sj(){return xc().memoizedState}function JE(e,t,n,r){var l=id();Ai.flags|=e,l.memoizedState=H1(1|t,n,void 0,r===void 0?null:r)}function eC(e,t,n,r){var l=xc();r=r===void 0?null:r;var d=void 0;if(ba!==null){var f=ba.memoizedState;if(d=f.destroy,r!==null&&yR(r,f.deps)){l.memoizedState=H1(t,n,d,r);return}}Ai.flags|=e,l.memoizedState=H1(1|t,n,d,r)}function Qz(e,t){return JE(8390656,8,e,t)}function _R(e,t){return eC(2048,8,e,t)}function Cj(e,t){return eC(4,2,e,t)}function kj(e,t){return eC(4,4,e,t)}function Aj(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Mj(e,t,n){return n=n!=null?n.concat([e]):null,eC(4,4,Aj.bind(null,t,e),n)}function xR(){}function Dj(e,t){var n=xc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&yR(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Rj(e,t){var n=xc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&yR(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ij(e,t,n){return l0&21?(xu(n,t)||(n=z7(),Ai.lanes|=n,c0|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Hs=!0),e.memoizedState=n)}function dee(e,t){var n=Vo;Vo=n!==0&&4>n?n:4,e(!0);var r=p3.transition;p3.transition={};try{e(!1),t()}finally{Vo=n,p3.transition=r}}function Pj(){return xc().memoizedState}function hee(e,t,n){var r=Up(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Oj(e))Lj(t,n);else if(n=mj(e,t,n,r),n!==null){var l=Cs();bu(n,e,r,l),Nj(n,t,r)}}function fee(e,t,n){var r=Up(e),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Oj(e))Lj(t,l);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var f=t.lastRenderedState,y=d(f,n);if(l.hasEagerState=!0,l.eagerState=y,xu(y,f)){var a=t.interleaved;a===null?(l.next=l,hR(t)):(l.next=a.next,a.next=l),t.interleaved=l;return}}catch{}finally{}n=mj(e,t,l,r),n!==null&&(l=Cs(),bu(n,e,r,l),Nj(n,t,r))}}function Oj(e){var t=e.alternate;return e===Ai||t!==null&&t===Ai}function Lj(e,t){a1=$T=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Nj(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Q5(e,n)}}var UT={readContext:_c,useCallback:ts,useContext:ts,useEffect:ts,useImperativeHandle:ts,useInsertionEffect:ts,useLayoutEffect:ts,useMemo:ts,useReducer:ts,useRef:ts,useState:ts,useDebugValue:ts,useDeferredValue:ts,useTransition:ts,useMutableSource:ts,useSyncExternalStore:ts,useId:ts,unstable_isNewReconciler:!1},pee={readContext:_c,useCallback:function(e,t){return id().memoizedState=[e,t===void 0?null:t],e},useContext:_c,useEffect:Qz,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,JE(4194308,4,Aj.bind(null,t,e),n)},useLayoutEffect:function(e,t){return JE(4194308,4,e,t)},useInsertionEffect:function(e,t){return JE(4,2,e,t)},useMemo:function(e,t){var n=id();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=id();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=hee.bind(null,Ai,e),[r.memoizedState,e]},useRef:function(e){var t=id();return e={current:e},t.memoizedState=e},useState:Xz,useDebugValue:xR,useDeferredValue:function(e){return id().memoizedState=e},useTransition:function(){var e=Xz(!1),t=e[0];return e=dee.bind(null,e[1]),id().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ai,l=id();if(mi){if(n===void 0)throw Error(pn(407));n=n()}else{if(n=t(),Aa===null)throw Error(pn(349));l0&30||_j(r,t,n)}l.memoizedState=n;var d={value:n,getSnapshot:t};return l.queue=d,Qz(wj.bind(null,r,d,e),[e]),r.flags|=2048,H1(9,xj.bind(null,r,d,n,t),void 0,null),n},useId:function(){var e=id(),t=Aa.identifierPrefix;if(mi){var n=Bh,r=zh;n=(r&~(1<<32-yu(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=U1++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=uee++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mee={readContext:_c,useCallback:Dj,useContext:_c,useEffect:_R,useImperativeHandle:Mj,useInsertionEffect:Cj,useLayoutEffect:kj,useMemo:Rj,useReducer:m3,useRef:Sj,useState:function(){return m3(V1)},useDebugValue:xR,useDeferredValue:function(e){var t=xc();return Ij(t,ba.memoizedState,e)},useTransition:function(){var e=m3(V1)[0],t=xc().memoizedState;return[e,t]},useMutableSource:bj,useSyncExternalStore:vj,useId:Pj,unstable_isNewReconciler:!1},gee={readContext:_c,useCallback:Dj,useContext:_c,useEffect:_R,useImperativeHandle:Mj,useInsertionEffect:Cj,useLayoutEffect:kj,useMemo:Rj,useReducer:g3,useRef:Sj,useState:function(){return g3(V1)},useDebugValue:xR,useDeferredValue:function(e){var t=xc();return ba===null?t.memoizedState=e:Ij(t,ba.memoizedState,e)},useTransition:function(){var e=g3(V1)[0],t=xc().memoizedState;return[e,t]},useMutableSource:bj,useSyncExternalStore:vj,useId:Pj,unstable_isNewReconciler:!1};function uu(e,t){if(e&&e.defaultProps){t=Mi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function uD(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Mi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var tC={isMounted:function(e){return(e=e._reactInternals)?T0(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Cs(),l=Up(e),d=jh(r,l);d.payload=t,n!=null&&(d.callback=n),t=jp(e,d,l),t!==null&&(bu(t,e,l,r),XE(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Cs(),l=Up(e),d=jh(r,l);d.tag=1,d.payload=t,n!=null&&(d.callback=n),t=jp(e,d,l),t!==null&&(bu(t,e,l,r),XE(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Cs(),r=Up(e),l=jh(n,r);l.tag=2,t!=null&&(l.callback=t),t=jp(e,l,r),t!==null&&(bu(t,e,r,n),XE(t,e,r))}};function Jz(e,t,n,r,l,d,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,d,f):t.prototype&&t.prototype.isPureReactComponent?!N1(n,r)||!N1(l,d):!0}function zj(e,t,n){var r=!1,l=qp,d=t.contextType;return typeof d=="object"&&d!==null?d=_c(d):(l=Gs(t)?a0:cs.current,r=t.contextTypes,d=(r=r!=null)?Rb(e,l):qp),t=new t(n,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=tC,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=d),t}function e6(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&tC.enqueueReplaceState(t,t.state,null)}function dD(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},fR(e);var d=t.contextType;typeof d=="object"&&d!==null?l.context=_c(d):(d=Gs(t)?a0:cs.current,l.context=Rb(e,d)),l.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(uD(e,t,d,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&tC.enqueueReplaceState(l,l.state,null),FT(e,n,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function Lb(e,t){try{var n="",r=t;do n+=HQ(r),r=r.return;while(r);var l=n}catch(d){l=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:l,digest:null}}function y3(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function hD(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var yee=typeof WeakMap=="function"?WeakMap:Map;function Bj(e,t,n){n=jh(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){HT||(HT=!0,wD=r),hD(e,t)},n}function Fj(e,t,n){n=jh(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;n.payload=function(){return r(l)},n.callback=function(){hD(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(n.callback=function(){hD(e,t),typeof r!="function"&&($p===null?$p=new Set([this]):$p.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),n}function t6(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new yee;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(n)||(l.add(n),e=Ree.bind(null,e,t,n),t.then(e,e))}function n6(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function r6(e,t,n,r,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=jh(-1,1),t.tag=2,jp(n,t,1))),n.lanes|=1),e)}var bee=rf.ReactCurrentOwner,Hs=!1;function ws(e,t,n,r){t.child=e===null?pj(t,null,n,r):Pb(t,e.child,n,r)}function o6(e,t,n,r,l){n=n.render;var d=t.ref;return fb(t,l),r=bR(e,t,n,r,d,l),n=vR(),e!==null&&!Hs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Qh(e,t,l)):(mi&&n&&aR(t),t.flags|=1,ws(e,t,r,l),t.child)}function i6(e,t,n,r,l){if(e===null){var d=n.type;return typeof d=="function"&&!MR(d)&&d.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=d,jj(e,t,d,r,l)):(e=rT(n.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&l)){var f=d.memoizedProps;if(n=n.compare,n=n!==null?n:N1,n(f,r)&&e.ref===t.ref)return Qh(e,t,l)}return t.flags|=1,e=Vp(d,r),e.ref=t.ref,e.return=t,t.child=e}function jj(e,t,n,r,l){if(e!==null){var d=e.memoizedProps;if(N1(d,r)&&e.ref===t.ref)if(Hs=!1,t.pendingProps=r=d,(e.lanes&l)!==0)e.flags&131072&&(Hs=!0);else return t.lanes=e.lanes,Qh(e,t,l)}return fD(e,t,n,r,l)}function $j(e,t,n){var r=t.pendingProps,l=r.children,d=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jo(rb,wl),wl|=n;else{if(!(n&1073741824))return e=d!==null?d.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Jo(rb,wl),wl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=d!==null?d.baseLanes:n,Jo(rb,wl),wl|=r}else d!==null?(r=d.baseLanes|n,t.memoizedState=null):r=n,Jo(rb,wl),wl|=r;return ws(e,t,l,n),t.child}function Uj(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function fD(e,t,n,r,l){var d=Gs(n)?a0:cs.current;return d=Rb(t,d),fb(t,l),n=bR(e,t,n,r,d,l),r=vR(),e!==null&&!Hs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Qh(e,t,l)):(mi&&r&&aR(t),t.flags|=1,ws(e,t,n,l),t.child)}function a6(e,t,n,r,l){if(Gs(n)){var d=!0;OT(t)}else d=!1;if(fb(t,l),t.stateNode===null)eT(e,t),zj(t,n,r),dD(t,n,r,l),r=!0;else if(e===null){var f=t.stateNode,y=t.memoizedProps;f.props=y;var a=f.context,E=n.contextType;typeof E=="object"&&E!==null?E=_c(E):(E=Gs(n)?a0:cs.current,E=Rb(t,E));var C=n.getDerivedStateFromProps,M=typeof C=="function"||typeof f.getSnapshotBeforeUpdate=="function";M||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==r||a!==E)&&e6(t,f,r,E),_p=!1;var P=t.memoizedState;f.state=P,FT(t,r,f,l),a=t.memoizedState,y!==r||P!==a||Ys.current||_p?(typeof C=="function"&&(uD(t,n,C,r),a=t.memoizedState),(y=_p||Jz(t,n,y,r,P,a,E))?(M||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),f.props=r,f.state=a,f.context=E,r=y):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{f=t.stateNode,gj(e,t),y=t.memoizedProps,E=t.type===t.elementType?y:uu(t.type,y),f.props=E,M=t.pendingProps,P=f.context,a=n.contextType,typeof a=="object"&&a!==null?a=_c(a):(a=Gs(n)?a0:cs.current,a=Rb(t,a));var N=n.getDerivedStateFromProps;(C=typeof N=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==M||P!==a)&&e6(t,f,r,a),_p=!1,P=t.memoizedState,f.state=P,FT(t,r,f,l);var F=t.memoizedState;y!==M||P!==F||Ys.current||_p?(typeof N=="function"&&(uD(t,n,N,r),F=t.memoizedState),(E=_p||Jz(t,n,E,r,P,F,a)||!1)?(C||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(r,F,a),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(r,F,a)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=F),f.props=r,f.state=F,f.context=a,r=E):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),r=!1)}return pD(e,t,n,r,d,l)}function pD(e,t,n,r,l,d){Uj(e,t);var f=(t.flags&128)!==0;if(!r&&!f)return l&&Wz(t,n,!1),Qh(e,t,d);r=t.stateNode,bee.current=t;var y=f&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&f?(t.child=Pb(t,e.child,null,d),t.child=Pb(t,null,y,d)):ws(e,t,y,d),t.memoizedState=r.state,l&&Wz(t,n,!0),t.child}function Vj(e){var t=e.stateNode;t.pendingContext?Hz(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Hz(e,t.context,!1),pR(e,t.containerInfo)}function s6(e,t,n,r,l){return Ib(),lR(l),t.flags|=256,ws(e,t,n,r),t.child}var mD={dehydrated:null,treeContext:null,retryLane:0};function gD(e){return{baseLanes:e,cachePool:null,transitions:null}}function Hj(e,t,n){var r=t.pendingProps,l=Si.current,d=!1,f=(t.flags&128)!==0,y;if((y=f)||(y=e!==null&&e.memoizedState===null?!1:(l&2)!==0),y?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Jo(Si,l&1),e===null)return lD(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=r.children,e=r.fallback,d?(r=t.mode,d=t.child,f={mode:"hidden",children:f},!(r&1)&&d!==null?(d.childLanes=0,d.pendingProps=f):d=oC(f,r,0,null),e=e0(e,r,n,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=gD(n),t.memoizedState=mD,e):wR(t,f));if(l=e.memoizedState,l!==null&&(y=l.dehydrated,y!==null))return vee(e,t,f,r,y,l,n);if(d){d=r.fallback,f=t.mode,l=e.child,y=l.sibling;var a={mode:"hidden",children:r.children};return!(f&1)&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=Vp(l,a),r.subtreeFlags=l.subtreeFlags&14680064),y!==null?d=Vp(y,d):(d=e0(d,f,n,null),d.flags|=2),d.return=t,r.return=t,r.sibling=d,t.child=r,r=d,d=t.child,f=e.child.memoizedState,f=f===null?gD(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},d.memoizedState=f,d.childLanes=e.childLanes&~n,t.memoizedState=mD,r}return d=e.child,e=d.sibling,r=Vp(d,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function wR(e,t){return t=oC({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function sE(e,t,n,r){return r!==null&&lR(r),Pb(t,e.child,null,n),e=wR(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function vee(e,t,n,r,l,d,f){if(n)return t.flags&256?(t.flags&=-257,r=y3(Error(pn(422))),sE(e,t,f,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=r.fallback,l=t.mode,r=oC({mode:"visible",children:r.children},l,0,null),d=e0(d,l,f,null),d.flags|=2,r.return=t,d.return=t,r.sibling=d,t.child=r,t.mode&1&&Pb(t,e.child,null,f),t.child.memoizedState=gD(f),t.memoizedState=mD,d);if(!(t.mode&1))return sE(e,t,f,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var y=r.dgst;return r=y,d=Error(pn(419)),r=y3(d,r,void 0),sE(e,t,f,r)}if(y=(f&e.childLanes)!==0,Hs||y){if(r=Aa,r!==null){switch(f&-f){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(r.suspendedLanes|f)?0:l,l!==0&&l!==d.retryLane&&(d.retryLane=l,Xh(e,l),bu(r,e,l,-1))}return AR(),r=y3(Error(pn(421))),sE(e,t,f,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=Iee.bind(null,e),l._reactRetry=t,null):(e=d.treeContext,Cl=Fp(l.nextSibling),Ml=t,mi=!0,pu=null,e!==null&&(uc[dc++]=zh,uc[dc++]=Bh,uc[dc++]=s0,zh=e.id,Bh=e.overflow,s0=t),t=wR(t,r.children),t.flags|=4096,t)}function l6(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),cD(e.return,t,n)}function b3(e,t,n,r,l){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=r,d.tail=n,d.tailMode=l)}function Wj(e,t,n){var r=t.pendingProps,l=r.revealOrder,d=r.tail;if(ws(e,t,r.children,n),r=Si.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&l6(e,n,t);else if(e.tag===19)l6(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Jo(Si,r),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&jT(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),b3(t,!1,l,n,d);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&jT(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}b3(t,!0,n,null,d);break;case"together":b3(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function eT(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qh(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),c0|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(pn(153));if(t.child!==null){for(e=t.child,n=Vp(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Vp(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function _ee(e,t,n){switch(t.tag){case 3:Vj(t),Ib();break;case 5:yj(t);break;case 1:Gs(t.type)&&OT(t);break;case 4:pR(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;Jo(zT,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Jo(Si,Si.current&1),t.flags|=128,null):n&t.child.childLanes?Hj(e,t,n):(Jo(Si,Si.current&1),e=Qh(e,t,n),e!==null?e.sibling:null);Jo(Si,Si.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Wj(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Jo(Si,Si.current),r)break;return null;case 22:case 23:return t.lanes=0,$j(e,t,n)}return Qh(e,t,n)}var Yj,yD,Gj,qj;Yj=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};yD=function(){};Gj=function(e,t,n,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,Yg(yd.current);var d=null;switch(n){case"input":l=FM(e,l),r=FM(e,r),d=[];break;case"select":l=Mi({},l,{value:void 0}),r=Mi({},r,{value:void 0}),d=[];break;case"textarea":l=UM(e,l),r=UM(e,r),d=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=IT)}HM(n,r);var f;n=null;for(E in l)if(!r.hasOwnProperty(E)&&l.hasOwnProperty(E)&&l[E]!=null)if(E==="style"){var y=l[E];for(f in y)y.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(M1.hasOwnProperty(E)?d||(d=[]):(d=d||[]).push(E,null));for(E in r){var a=r[E];if(y=l?.[E],r.hasOwnProperty(E)&&a!==y&&(a!=null||y!=null))if(E==="style")if(y){for(f in y)!y.hasOwnProperty(f)||a&&a.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in a)a.hasOwnProperty(f)&&y[f]!==a[f]&&(n||(n={}),n[f]=a[f])}else n||(d||(d=[]),d.push(E,n)),n=a;else E==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,y=y?y.__html:void 0,a!=null&&y!==a&&(d=d||[]).push(E,a)):E==="children"?typeof a!="string"&&typeof a!="number"||(d=d||[]).push(E,""+a):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(M1.hasOwnProperty(E)?(a!=null&&E==="onScroll"&&ii("scroll",e),d||y===a||(d=[])):(d=d||[]).push(E,a))}n&&(d=d||[]).push("style",n);var E=d;(t.updateQueue=E)&&(t.flags|=4)}};qj=function(e,t,n,r){n!==r&&(t.flags|=4)};function C_(e,t){if(!mi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ns(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function xee(e,t,n){var r=t.pendingProps;switch(sR(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ns(t),null;case 1:return Gs(t.type)&&PT(),ns(t),null;case 3:return r=t.stateNode,Ob(),si(Ys),si(cs),gR(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(iE(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,pu!==null&&(SD(pu),pu=null))),yD(e,t),ns(t),null;case 5:mR(t);var l=Yg($1.current);if(n=t.type,e!==null&&t.stateNode!=null)Gj(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(pn(166));return ns(t),null}if(e=Yg(yd.current),iE(t)){r=t.stateNode,n=t.type;var d=t.memoizedProps;switch(r[hd]=t,r[F1]=d,e=(t.mode&1)!==0,n){case"dialog":ii("cancel",r),ii("close",r);break;case"iframe":case"object":case"embed":ii("load",r);break;case"video":case"audio":for(l=0;l<X_.length;l++)ii(X_[l],r);break;case"source":ii("error",r);break;case"img":case"image":case"link":ii("error",r),ii("load",r);break;case"details":ii("toggle",r);break;case"input":yz(r,d),ii("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!d.multiple},ii("invalid",r);break;case"textarea":vz(r,d),ii("invalid",r)}HM(n,d),l=null;for(var f in d)if(d.hasOwnProperty(f)){var y=d[f];f==="children"?typeof y=="string"?r.textContent!==y&&(d.suppressHydrationWarning!==!0&&oE(r.textContent,y,e),l=["children",y]):typeof y=="number"&&r.textContent!==""+y&&(d.suppressHydrationWarning!==!0&&oE(r.textContent,y,e),l=["children",""+y]):M1.hasOwnProperty(f)&&y!=null&&f==="onScroll"&&ii("scroll",r)}switch(n){case"input":Kw(r),bz(r,d,!0);break;case"textarea":Kw(r),_z(r);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(r.onclick=IT)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{f=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=w7(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=f.createElement(n,{is:r.is}):(e=f.createElement(n),n==="select"&&(f=e,r.multiple?f.multiple=!0:r.size&&(f.size=r.size))):e=f.createElementNS(e,n),e[hd]=t,e[F1]=r,Yj(e,t,!1,!1),t.stateNode=e;e:{switch(f=WM(n,r),n){case"dialog":ii("cancel",e),ii("close",e),l=r;break;case"iframe":case"object":case"embed":ii("load",e),l=r;break;case"video":case"audio":for(l=0;l<X_.length;l++)ii(X_[l],e);l=r;break;case"source":ii("error",e),l=r;break;case"img":case"image":case"link":ii("error",e),ii("load",e),l=r;break;case"details":ii("toggle",e),l=r;break;case"input":yz(e,r),l=FM(e,r),ii("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=Mi({},r,{value:void 0}),ii("invalid",e);break;case"textarea":vz(e,r),l=UM(e,r),ii("invalid",e);break;default:l=r}HM(n,l),y=l;for(d in y)if(y.hasOwnProperty(d)){var a=y[d];d==="style"?S7(e,a):d==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&E7(e,a)):d==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&D1(e,a):typeof a=="number"&&D1(e,""+a):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(M1.hasOwnProperty(d)?a!=null&&d==="onScroll"&&ii("scroll",e):a!=null&&Y5(e,d,a,f))}switch(n){case"input":Kw(e),bz(e,r,!1);break;case"textarea":Kw(e),_z(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Gp(r.value));break;case"select":e.multiple=!!r.multiple,d=r.value,d!=null?cb(e,!!r.multiple,d,!1):r.defaultValue!=null&&cb(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=IT)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ns(t),null;case 6:if(e&&t.stateNode!=null)qj(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(pn(166));if(n=Yg($1.current),Yg(yd.current),iE(t)){if(r=t.stateNode,n=t.memoizedProps,r[hd]=t,(d=r.nodeValue!==n)&&(e=Ml,e!==null))switch(e.tag){case 3:oE(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&oE(r.nodeValue,n,(e.mode&1)!==0)}d&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hd]=t,t.stateNode=r}return ns(t),null;case 13:if(si(Si),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(mi&&Cl!==null&&t.mode&1&&!(t.flags&128))hj(),Ib(),t.flags|=98560,d=!1;else if(d=iE(t),r!==null&&r.dehydrated!==null){if(e===null){if(!d)throw Error(pn(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(pn(317));d[hd]=t}else Ib(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ns(t),d=!1}else pu!==null&&(SD(pu),pu=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Si.current&1?xa===0&&(xa=3):AR())),t.updateQueue!==null&&(t.flags|=4),ns(t),null);case 4:return Ob(),yD(e,t),e===null&&z1(t.stateNode.containerInfo),ns(t),null;case 10:return dR(t.type._context),ns(t),null;case 17:return Gs(t.type)&&PT(),ns(t),null;case 19:if(si(Si),d=t.memoizedState,d===null)return ns(t),null;if(r=(t.flags&128)!==0,f=d.rendering,f===null)if(r)C_(d,!1);else{if(xa!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=jT(e),f!==null){for(t.flags|=128,C_(d,!1),r=f.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)d=n,e=r,d.flags&=14680066,f=d.alternate,f===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=f.childLanes,d.lanes=f.lanes,d.child=f.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=f.memoizedProps,d.memoizedState=f.memoizedState,d.updateQueue=f.updateQueue,d.type=f.type,e=f.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Jo(Si,Si.current&1|2),t.child}e=e.sibling}d.tail!==null&&qi()>Nb&&(t.flags|=128,r=!0,C_(d,!1),t.lanes=4194304)}else{if(!r)if(e=jT(f),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),C_(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!mi)return ns(t),null}else 2*qi()-d.renderingStartTime>Nb&&n!==1073741824&&(t.flags|=128,r=!0,C_(d,!1),t.lanes=4194304);d.isBackwards?(f.sibling=t.child,t.child=f):(n=d.last,n!==null?n.sibling=f:t.child=f,d.last=f)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=qi(),t.sibling=null,n=Si.current,Jo(Si,r?n&1|2:n&1),t):(ns(t),null);case 22:case 23:return kR(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?wl&1073741824&&(ns(t),t.subtreeFlags&6&&(t.flags|=8192)):ns(t),null;case 24:return null;case 25:return null}throw Error(pn(156,t.tag))}function wee(e,t){switch(sR(t),t.tag){case 1:return Gs(t.type)&&PT(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ob(),si(Ys),si(cs),gR(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return mR(t),null;case 13:if(si(Si),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(pn(340));Ib()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return si(Si),null;case 4:return Ob(),null;case 10:return dR(t.type._context),null;case 22:case 23:return kR(),null;case 24:return null;default:return null}}var lE=!1,is=!1,Eee=typeof WeakSet=="function"?WeakSet:Set,Zn=null;function nb(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ni(e,t,r)}else n.current=null}function bD(e,t,n){try{n()}catch(r){Ni(e,t,r)}}var c6=!1;function Tee(e,t){if(tD=MT,e=J7(),iR(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,d=r.focusNode;r=r.focusOffset;try{n.nodeType,d.nodeType}catch{n=null;break e}var f=0,y=-1,a=-1,E=0,C=0,M=e,P=null;t:for(;;){for(var N;M!==n||l!==0&&M.nodeType!==3||(y=f+l),M!==d||r!==0&&M.nodeType!==3||(a=f+r),M.nodeType===3&&(f+=M.nodeValue.length),(N=M.firstChild)!==null;)P=M,M=N;for(;;){if(M===e)break t;if(P===n&&++E===l&&(y=f),P===d&&++C===r&&(a=f),(N=M.nextSibling)!==null)break;M=P,P=M.parentNode}M=N}n=y===-1||a===-1?null:{start:y,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(nD={focusedElem:e,selectionRange:n},MT=!1,Zn=t;Zn!==null;)if(t=Zn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Zn=e;else for(;Zn!==null;){t=Zn;try{var F=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var $=F.memoizedProps,Z=F.memoizedState,q=t.stateNode,K=q.getSnapshotBeforeUpdate(t.elementType===t.type?$:uu(t.type,$),Z);q.__reactInternalSnapshotBeforeUpdate=K}break;case 3:var Q=t.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pn(163))}}catch(te){Ni(t,t.return,te)}if(e=t.sibling,e!==null){e.return=t.return,Zn=e;break}Zn=t.return}return F=c6,c6=!1,F}function s1(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var d=l.destroy;l.destroy=void 0,d!==void 0&&bD(t,n,d)}l=l.next}while(l!==r)}}function nC(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function vD(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Zj(e){var t=e.alternate;t!==null&&(e.alternate=null,Zj(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[hd],delete t[F1],delete t[iD],delete t[aee],delete t[see])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Kj(e){return e.tag===5||e.tag===3||e.tag===4}function u6(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Kj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _D(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=IT));else if(r!==4&&(e=e.child,e!==null))for(_D(e,t,n),e=e.sibling;e!==null;)_D(e,t,n),e=e.sibling}function xD(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(xD(e,t,n),e=e.sibling;e!==null;)xD(e,t,n),e=e.sibling}var Va=null,du=!1;function dp(e,t,n){for(n=n.child;n!==null;)Xj(e,t,n),n=n.sibling}function Xj(e,t,n){if(gd&&typeof gd.onCommitFiberUnmount=="function")try{gd.onCommitFiberUnmount(qS,n)}catch{}switch(n.tag){case 5:is||nb(n,t);case 6:var r=Va,l=du;Va=null,dp(e,t,n),Va=r,du=l,Va!==null&&(du?(e=Va,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Va.removeChild(n.stateNode));break;case 18:Va!==null&&(du?(e=Va,n=n.stateNode,e.nodeType===8?d3(e.parentNode,n):e.nodeType===1&&d3(e,n),O1(e)):d3(Va,n.stateNode));break;case 4:r=Va,l=du,Va=n.stateNode.containerInfo,du=!0,dp(e,t,n),Va=r,du=l;break;case 0:case 11:case 14:case 15:if(!is&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var d=l,f=d.destroy;d=d.tag,f!==void 0&&(d&2||d&4)&&bD(n,t,f),l=l.next}while(l!==r)}dp(e,t,n);break;case 1:if(!is&&(nb(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(y){Ni(n,t,y)}dp(e,t,n);break;case 21:dp(e,t,n);break;case 22:n.mode&1?(is=(r=is)||n.memoizedState!==null,dp(e,t,n),is=r):dp(e,t,n);break;default:dp(e,t,n)}}function d6(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Eee),t.forEach(function(r){var l=Pee.bind(null,e,r);n.has(r)||(n.add(r),r.then(l,l))})}}function lu(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var d=e,f=t,y=f;e:for(;y!==null;){switch(y.tag){case 5:Va=y.stateNode,du=!1;break e;case 3:Va=y.stateNode.containerInfo,du=!0;break e;case 4:Va=y.stateNode.containerInfo,du=!0;break e}y=y.return}if(Va===null)throw Error(pn(160));Xj(d,f,l),Va=null,du=!1;var a=l.alternate;a!==null&&(a.return=null),l.return=null}catch(E){Ni(l,t,E)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Qj(t,e),t=t.sibling}function Qj(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(lu(t,e),od(e),r&4){try{s1(3,e,e.return),nC(3,e)}catch($){Ni(e,e.return,$)}try{s1(5,e,e.return)}catch($){Ni(e,e.return,$)}}break;case 1:lu(t,e),od(e),r&512&&n!==null&&nb(n,n.return);break;case 5:if(lu(t,e),od(e),r&512&&n!==null&&nb(n,n.return),e.flags&32){var l=e.stateNode;try{D1(l,"")}catch($){Ni(e,e.return,$)}}if(r&4&&(l=e.stateNode,l!=null)){var d=e.memoizedProps,f=n!==null?n.memoizedProps:d,y=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{y==="input"&&d.type==="radio"&&d.name!=null&&_7(l,d),WM(y,f);var E=WM(y,d);for(f=0;f<a.length;f+=2){var C=a[f],M=a[f+1];C==="style"?S7(l,M):C==="dangerouslySetInnerHTML"?E7(l,M):C==="children"?D1(l,M):Y5(l,C,M,E)}switch(y){case"input":jM(l,d);break;case"textarea":x7(l,d);break;case"select":var P=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!d.multiple;var N=d.value;N!=null?cb(l,!!d.multiple,N,!1):P!==!!d.multiple&&(d.defaultValue!=null?cb(l,!!d.multiple,d.defaultValue,!0):cb(l,!!d.multiple,d.multiple?[]:"",!1))}l[F1]=d}catch($){Ni(e,e.return,$)}}break;case 6:if(lu(t,e),od(e),r&4){if(e.stateNode===null)throw Error(pn(162));l=e.stateNode,d=e.memoizedProps;try{l.nodeValue=d}catch($){Ni(e,e.return,$)}}break;case 3:if(lu(t,e),od(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{O1(t.containerInfo)}catch($){Ni(e,e.return,$)}break;case 4:lu(t,e),od(e);break;case 13:lu(t,e),od(e),l=e.child,l.flags&8192&&(d=l.memoizedState!==null,l.stateNode.isHidden=d,!d||l.alternate!==null&&l.alternate.memoizedState!==null||(SR=qi())),r&4&&d6(e);break;case 22:if(C=n!==null&&n.memoizedState!==null,e.mode&1?(is=(E=is)||C,lu(t,e),is=E):lu(t,e),od(e),r&8192){if(E=e.memoizedState!==null,(e.stateNode.isHidden=E)&&!C&&e.mode&1)for(Zn=e,C=e.child;C!==null;){for(M=Zn=C;Zn!==null;){switch(P=Zn,N=P.child,P.tag){case 0:case 11:case 14:case 15:s1(4,P,P.return);break;case 1:nb(P,P.return);var F=P.stateNode;if(typeof F.componentWillUnmount=="function"){r=P,n=P.return;try{t=r,F.props=t.memoizedProps,F.state=t.memoizedState,F.componentWillUnmount()}catch($){Ni(r,n,$)}}break;case 5:nb(P,P.return);break;case 22:if(P.memoizedState!==null){f6(M);continue}}N!==null?(N.return=P,Zn=N):f6(M)}C=C.sibling}e:for(C=null,M=e;;){if(M.tag===5){if(C===null){C=M;try{l=M.stateNode,E?(d=l.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(y=M.stateNode,a=M.memoizedProps.style,f=a!=null&&a.hasOwnProperty("display")?a.display:null,y.style.display=T7("display",f))}catch($){Ni(e,e.return,$)}}}else if(M.tag===6){if(C===null)try{M.stateNode.nodeValue=E?"":M.memoizedProps}catch($){Ni(e,e.return,$)}}else if((M.tag!==22&&M.tag!==23||M.memoizedState===null||M===e)&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===e)break e;for(;M.sibling===null;){if(M.return===null||M.return===e)break e;C===M&&(C=null),M=M.return}C===M&&(C=null),M.sibling.return=M.return,M=M.sibling}}break;case 19:lu(t,e),od(e),r&4&&d6(e);break;case 21:break;default:lu(t,e),od(e)}}function od(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Kj(n)){var r=n;break e}n=n.return}throw Error(pn(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(D1(l,""),r.flags&=-33);var d=u6(e);xD(e,d,l);break;case 3:case 4:var f=r.stateNode.containerInfo,y=u6(e);_D(e,y,f);break;default:throw Error(pn(161))}}catch(a){Ni(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function See(e,t,n){Zn=e,Jj(e)}function Jj(e,t,n){for(var r=(e.mode&1)!==0;Zn!==null;){var l=Zn,d=l.child;if(l.tag===22&&r){var f=l.memoizedState!==null||lE;if(!f){var y=l.alternate,a=y!==null&&y.memoizedState!==null||is;y=lE;var E=is;if(lE=f,(is=a)&&!E)for(Zn=l;Zn!==null;)f=Zn,a=f.child,f.tag===22&&f.memoizedState!==null?p6(l):a!==null?(a.return=f,Zn=a):p6(l);for(;d!==null;)Zn=d,Jj(d),d=d.sibling;Zn=l,lE=y,is=E}h6(e)}else l.subtreeFlags&8772&&d!==null?(d.return=l,Zn=d):h6(e)}}function h6(e){for(;Zn!==null;){var t=Zn;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:is||nC(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!is)if(n===null)r.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:uu(t.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&Kz(t,d,r);break;case 3:var f=t.updateQueue;if(f!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Kz(t,f,n)}break;case 5:var y=t.stateNode;if(n===null&&t.flags&4){n=y;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var E=t.alternate;if(E!==null){var C=E.memoizedState;if(C!==null){var M=C.dehydrated;M!==null&&O1(M)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pn(163))}is||t.flags&512&&vD(t)}catch(P){Ni(t,t.return,P)}}if(t===e){Zn=null;break}if(n=t.sibling,n!==null){n.return=t.return,Zn=n;break}Zn=t.return}}function f6(e){for(;Zn!==null;){var t=Zn;if(t===e){Zn=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Zn=n;break}Zn=t.return}}function p6(e){for(;Zn!==null;){var t=Zn;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{nC(4,t)}catch(a){Ni(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(a){Ni(t,l,a)}}var d=t.return;try{vD(t)}catch(a){Ni(t,d,a)}break;case 5:var f=t.return;try{vD(t)}catch(a){Ni(t,f,a)}}}catch(a){Ni(t,t.return,a)}if(t===e){Zn=null;break}var y=t.sibling;if(y!==null){y.return=t.return,Zn=y;break}Zn=t.return}}var Cee=Math.ceil,VT=rf.ReactCurrentDispatcher,ER=rf.ReactCurrentOwner,yc=rf.ReactCurrentBatchConfig,_o=0,Aa=null,ua=null,Wa=0,wl=0,rb=am(0),xa=0,W1=null,c0=0,rC=0,TR=0,l1=null,Vs=null,SR=0,Nb=1/0,Ah=null,HT=!1,wD=null,$p=null,cE=!1,Cp=null,WT=0,c1=0,ED=null,tT=-1,nT=0;function Cs(){return _o&6?qi():tT!==-1?tT:tT=qi()}function Up(e){return e.mode&1?_o&2&&Wa!==0?Wa&-Wa:cee.transition!==null?(nT===0&&(nT=z7()),nT):(e=Vo,e!==0||(e=window.event,e=e===void 0?16:H7(e.type)),e):1}function bu(e,t,n,r){if(50<c1)throw c1=0,ED=null,Error(pn(185));vx(e,n,r),(!(_o&2)||e!==Aa)&&(e===Aa&&(!(_o&2)&&(rC|=n),xa===4&&Tp(e,Wa)),qs(e,r),n===1&&_o===0&&!(t.mode&1)&&(Nb=qi()+500,JS&&sm()))}function qs(e,t){var n=e.callbackNode;cJ(e,t);var r=AT(e,e===Aa?Wa:0);if(r===0)n!==null&&Ez(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ez(n),t===1)e.tag===0?lee(m6.bind(null,e)):cj(m6.bind(null,e)),oee(function(){!(_o&6)&&sm()}),n=null;else{switch(B7(r)){case 1:n=X5;break;case 4:n=L7;break;case 16:n=kT;break;case 536870912:n=N7;break;default:n=kT}n=s9(n,e9.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function e9(e,t){if(tT=-1,nT=0,_o&6)throw Error(pn(327));var n=e.callbackNode;if(pb()&&e.callbackNode!==n)return null;var r=AT(e,e===Aa?Wa:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=YT(e,r);else{t=r;var l=_o;_o|=2;var d=n9();(Aa!==e||Wa!==t)&&(Ah=null,Nb=qi()+500,Jg(e,t));do try{Mee();break}catch(y){t9(e,y)}while(!0);uR(),VT.current=d,_o=l,ua!==null?t=0:(Aa=null,Wa=0,t=xa)}if(t!==0){if(t===2&&(l=KM(e),l!==0&&(r=l,t=TD(e,l))),t===1)throw n=W1,Jg(e,0),Tp(e,r),qs(e,qi()),n;if(t===6)Tp(e,r);else{if(l=e.current.alternate,!(r&30)&&!kee(l)&&(t=YT(e,r),t===2&&(d=KM(e),d!==0&&(r=d,t=TD(e,d))),t===1))throw n=W1,Jg(e,0),Tp(e,r),qs(e,qi()),n;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(pn(345));case 2:zg(e,Vs,Ah);break;case 3:if(Tp(e,r),(r&130023424)===r&&(t=SR+500-qi(),10<t)){if(AT(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){Cs(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=oD(zg.bind(null,e,Vs,Ah),t);break}zg(e,Vs,Ah);break;case 4:if(Tp(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var f=31-yu(r);d=1<<f,f=t[f],f>l&&(l=f),r&=~d}if(r=l,r=qi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cee(r/1960))-r,10<r){e.timeoutHandle=oD(zg.bind(null,e,Vs,Ah),r);break}zg(e,Vs,Ah);break;case 5:zg(e,Vs,Ah);break;default:throw Error(pn(329))}}}return qs(e,qi()),e.callbackNode===n?e9.bind(null,e):null}function TD(e,t){var n=l1;return e.current.memoizedState.isDehydrated&&(Jg(e,t).flags|=256),e=YT(e,t),e!==2&&(t=Vs,Vs=n,t!==null&&SD(t)),e}function SD(e){Vs===null?Vs=e:Vs.push.apply(Vs,e)}function kee(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],d=l.getSnapshot;l=l.value;try{if(!xu(d(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Tp(e,t){for(t&=~TR,t&=~rC,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-yu(t),r=1<<n;e[n]=-1,t&=~r}}function m6(e){if(_o&6)throw Error(pn(327));pb();var t=AT(e,0);if(!(t&1))return qs(e,qi()),null;var n=YT(e,t);if(e.tag!==0&&n===2){var r=KM(e);r!==0&&(t=r,n=TD(e,r))}if(n===1)throw n=W1,Jg(e,0),Tp(e,t),qs(e,qi()),n;if(n===6)throw Error(pn(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,zg(e,Vs,Ah),qs(e,qi()),null}function CR(e,t){var n=_o;_o|=1;try{return e(t)}finally{_o=n,_o===0&&(Nb=qi()+500,JS&&sm())}}function u0(e){Cp!==null&&Cp.tag===0&&!(_o&6)&&pb();var t=_o;_o|=1;var n=yc.transition,r=Vo;try{if(yc.transition=null,Vo=1,e)return e()}finally{Vo=r,yc.transition=n,_o=t,!(_o&6)&&sm()}}function kR(){wl=rb.current,si(rb)}function Jg(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,ree(n)),ua!==null)for(n=ua.return;n!==null;){var r=n;switch(sR(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&PT();break;case 3:Ob(),si(Ys),si(cs),gR();break;case 5:mR(r);break;case 4:Ob();break;case 13:si(Si);break;case 19:si(Si);break;case 10:dR(r.type._context);break;case 22:case 23:kR()}n=n.return}if(Aa=e,ua=e=Vp(e.current,null),Wa=wl=t,xa=0,W1=null,TR=rC=c0=0,Vs=l1=null,Wg!==null){for(t=0;t<Wg.length;t++)if(n=Wg[t],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,d=n.pending;if(d!==null){var f=d.next;d.next=l,r.next=f}n.pending=r}Wg=null}return e}function t9(e,t){do{var n=ua;try{if(uR(),QE.current=UT,$T){for(var r=Ai.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}$T=!1}if(l0=0,Ca=ba=Ai=null,a1=!1,U1=0,ER.current=null,n===null||n.return===null){xa=1,W1=t,ua=null;break}e:{var d=e,f=n.return,y=n,a=t;if(t=Wa,y.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var E=a,C=y,M=C.tag;if(!(C.mode&1)&&(M===0||M===11||M===15)){var P=C.alternate;P?(C.updateQueue=P.updateQueue,C.memoizedState=P.memoizedState,C.lanes=P.lanes):(C.updateQueue=null,C.memoizedState=null)}var N=n6(f);if(N!==null){N.flags&=-257,r6(N,f,y,d,t),N.mode&1&&t6(d,E,t),t=N,a=E;var F=t.updateQueue;if(F===null){var $=new Set;$.add(a),t.updateQueue=$}else F.add(a);break e}else{if(!(t&1)){t6(d,E,t),AR();break e}a=Error(pn(426))}}else if(mi&&y.mode&1){var Z=n6(f);if(Z!==null){!(Z.flags&65536)&&(Z.flags|=256),r6(Z,f,y,d,t),lR(Lb(a,y));break e}}d=a=Lb(a,y),xa!==4&&(xa=2),l1===null?l1=[d]:l1.push(d),d=f;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var q=Bj(d,a,t);Zz(d,q);break e;case 1:y=a;var K=d.type,Q=d.stateNode;if(!(d.flags&128)&&(typeof K.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&($p===null||!$p.has(Q)))){d.flags|=65536,t&=-t,d.lanes|=t;var te=Fj(d,y,t);Zz(d,te);break e}}d=d.return}while(d!==null)}o9(n)}catch(ie){t=ie,ua===n&&n!==null&&(ua=n=n.return);continue}break}while(!0)}function n9(){var e=VT.current;return VT.current=UT,e===null?UT:e}function AR(){(xa===0||xa===3||xa===2)&&(xa=4),Aa===null||!(c0&268435455)&&!(rC&268435455)||Tp(Aa,Wa)}function YT(e,t){var n=_o;_o|=2;var r=n9();(Aa!==e||Wa!==t)&&(Ah=null,Jg(e,t));do try{Aee();break}catch(l){t9(e,l)}while(!0);if(uR(),_o=n,VT.current=r,ua!==null)throw Error(pn(261));return Aa=null,Wa=0,xa}function Aee(){for(;ua!==null;)r9(ua)}function Mee(){for(;ua!==null&&!eJ();)r9(ua)}function r9(e){var t=a9(e.alternate,e,wl);e.memoizedProps=e.pendingProps,t===null?o9(e):ua=t,ER.current=null}function o9(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=wee(n,t),n!==null){n.flags&=32767,ua=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{xa=6,ua=null;return}}else if(n=xee(n,t,wl),n!==null){ua=n;return}if(t=t.sibling,t!==null){ua=t;return}ua=t=e}while(t!==null);xa===0&&(xa=5)}function zg(e,t,n){var r=Vo,l=yc.transition;try{yc.transition=null,Vo=1,Dee(e,t,n,r)}finally{yc.transition=l,Vo=r}return null}function Dee(e,t,n,r){do pb();while(Cp!==null);if(_o&6)throw Error(pn(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(pn(177));e.callbackNode=null,e.callbackPriority=0;var d=n.lanes|n.childLanes;if(uJ(e,d),e===Aa&&(ua=Aa=null,Wa=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||cE||(cE=!0,s9(kT,function(){return pb(),null})),d=(n.flags&15990)!==0,n.subtreeFlags&15990||d){d=yc.transition,yc.transition=null;var f=Vo;Vo=1;var y=_o;_o|=4,ER.current=null,Tee(e,n),Qj(n,e),KJ(nD),MT=!!tD,nD=tD=null,e.current=n,See(n),tJ(),_o=y,Vo=f,yc.transition=d}else e.current=n;if(cE&&(cE=!1,Cp=e,WT=l),d=e.pendingLanes,d===0&&($p=null),oJ(n.stateNode),qs(e,qi()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(HT)throw HT=!1,e=wD,wD=null,e;return WT&1&&e.tag!==0&&pb(),d=e.pendingLanes,d&1?e===ED?c1++:(c1=0,ED=e):c1=0,sm(),null}function pb(){if(Cp!==null){var e=B7(WT),t=yc.transition,n=Vo;try{if(yc.transition=null,Vo=16>e?16:e,Cp===null)var r=!1;else{if(e=Cp,Cp=null,WT=0,_o&6)throw Error(pn(331));var l=_o;for(_o|=4,Zn=e.current;Zn!==null;){var d=Zn,f=d.child;if(Zn.flags&16){var y=d.deletions;if(y!==null){for(var a=0;a<y.length;a++){var E=y[a];for(Zn=E;Zn!==null;){var C=Zn;switch(C.tag){case 0:case 11:case 15:s1(8,C,d)}var M=C.child;if(M!==null)M.return=C,Zn=M;else for(;Zn!==null;){C=Zn;var P=C.sibling,N=C.return;if(Zj(C),C===E){Zn=null;break}if(P!==null){P.return=N,Zn=P;break}Zn=N}}}var F=d.alternate;if(F!==null){var $=F.child;if($!==null){F.child=null;do{var Z=$.sibling;$.sibling=null,$=Z}while($!==null)}}Zn=d}}if(d.subtreeFlags&2064&&f!==null)f.return=d,Zn=f;else e:for(;Zn!==null;){if(d=Zn,d.flags&2048)switch(d.tag){case 0:case 11:case 15:s1(9,d,d.return)}var q=d.sibling;if(q!==null){q.return=d.return,Zn=q;break e}Zn=d.return}}var K=e.current;for(Zn=K;Zn!==null;){f=Zn;var Q=f.child;if(f.subtreeFlags&2064&&Q!==null)Q.return=f,Zn=Q;else e:for(f=K;Zn!==null;){if(y=Zn,y.flags&2048)try{switch(y.tag){case 0:case 11:case 15:nC(9,y)}}catch(ie){Ni(y,y.return,ie)}if(y===f){Zn=null;break e}var te=y.sibling;if(te!==null){te.return=y.return,Zn=te;break e}Zn=y.return}}if(_o=l,sm(),gd&&typeof gd.onPostCommitFiberRoot=="function")try{gd.onPostCommitFiberRoot(qS,e)}catch{}r=!0}return r}finally{Vo=n,yc.transition=t}}return!1}function g6(e,t,n){t=Lb(n,t),t=Bj(e,t,1),e=jp(e,t,1),t=Cs(),e!==null&&(vx(e,1,t),qs(e,t))}function Ni(e,t,n){if(e.tag===3)g6(e,e,n);else for(;t!==null;){if(t.tag===3){g6(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($p===null||!$p.has(r))){e=Lb(n,e),e=Fj(t,e,1),t=jp(t,e,1),e=Cs(),t!==null&&(vx(t,1,e),qs(t,e));break}}t=t.return}}function Ree(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Cs(),e.pingedLanes|=e.suspendedLanes&n,Aa===e&&(Wa&n)===n&&(xa===4||xa===3&&(Wa&130023424)===Wa&&500>qi()-SR?Jg(e,0):TR|=n),qs(e,t)}function i9(e,t){t===0&&(e.mode&1?(t=Jw,Jw<<=1,!(Jw&130023424)&&(Jw=4194304)):t=1);var n=Cs();e=Xh(e,t),e!==null&&(vx(e,t,n),qs(e,n))}function Iee(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),i9(e,n)}function Pee(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(pn(314))}r!==null&&r.delete(t),i9(e,n)}var a9;a9=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ys.current)Hs=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Hs=!1,_ee(e,t,n);Hs=!!(e.flags&131072)}else Hs=!1,mi&&t.flags&1048576&&uj(t,NT,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;eT(e,t),e=t.pendingProps;var l=Rb(t,cs.current);fb(t,n),l=bR(null,t,r,e,l,n);var d=vR();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Gs(r)?(d=!0,OT(t)):d=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,fR(t),l.updater=tC,t.stateNode=l,l._reactInternals=t,dD(t,r,e,n),t=pD(null,t,r,!0,d,n)):(t.tag=0,mi&&d&&aR(t),ws(null,t,l,n),t=t.child),t;case 16:r=t.elementType;e:{switch(eT(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=Lee(r),e=uu(r,e),l){case 0:t=fD(null,t,r,e,n);break e;case 1:t=a6(null,t,r,e,n);break e;case 11:t=o6(null,t,r,e,n);break e;case 14:t=i6(null,t,r,uu(r.type,e),n);break e}throw Error(pn(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:uu(r,l),fD(e,t,r,l,n);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:uu(r,l),a6(e,t,r,l,n);case 3:e:{if(Vj(t),e===null)throw Error(pn(387));r=t.pendingProps,d=t.memoizedState,l=d.element,gj(e,t),FT(t,r,null,n);var f=t.memoizedState;if(r=f.element,d.isDehydrated)if(d={element:r,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){l=Lb(Error(pn(423)),t),t=s6(e,t,r,n,l);break e}else if(r!==l){l=Lb(Error(pn(424)),t),t=s6(e,t,r,n,l);break e}else for(Cl=Fp(t.stateNode.containerInfo.firstChild),Ml=t,mi=!0,pu=null,n=pj(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ib(),r===l){t=Qh(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return yj(t),e===null&&lD(t),r=t.type,l=t.pendingProps,d=e!==null?e.memoizedProps:null,f=l.children,rD(r,l)?f=null:d!==null&&rD(r,d)&&(t.flags|=32),Uj(e,t),ws(e,t,f,n),t.child;case 6:return e===null&&lD(t),null;case 13:return Hj(e,t,n);case 4:return pR(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Pb(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:uu(r,l),o6(e,t,r,l,n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:return ws(e,t,t.pendingProps.children,n),t.child;case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,d=t.memoizedProps,f=l.value,Jo(zT,r._currentValue),r._currentValue=f,d!==null)if(xu(d.value,f)){if(d.children===l.children&&!Ys.current){t=Qh(e,t,n);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var y=d.dependencies;if(y!==null){f=d.child;for(var a=y.firstContext;a!==null;){if(a.context===r){if(d.tag===1){a=jh(-1,n&-n),a.tag=2;var E=d.updateQueue;if(E!==null){E=E.shared;var C=E.pending;C===null?a.next=a:(a.next=C.next,C.next=a),E.pending=a}}d.lanes|=n,a=d.alternate,a!==null&&(a.lanes|=n),cD(d.return,n,t),y.lanes|=n;break}a=a.next}}else if(d.tag===10)f=d.type===t.type?null:d.child;else if(d.tag===18){if(f=d.return,f===null)throw Error(pn(341));f.lanes|=n,y=f.alternate,y!==null&&(y.lanes|=n),cD(f,n,t),f=d.sibling}else f=d.child;if(f!==null)f.return=d;else for(f=d;f!==null;){if(f===t){f=null;break}if(d=f.sibling,d!==null){d.return=f.return,f=d;break}f=f.return}d=f}ws(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,fb(t,n),l=_c(l),r=r(l),t.flags|=1,ws(e,t,r,n),t.child;case 14:return r=t.type,l=uu(r,t.pendingProps),l=uu(r.type,l),i6(e,t,r,l,n);case 15:return jj(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:uu(r,l),eT(e,t),t.tag=1,Gs(r)?(e=!0,OT(t)):e=!1,fb(t,n),zj(t,r,l),dD(t,r,l,n),pD(null,t,r,!0,e,n);case 19:return Wj(e,t,n);case 22:return $j(e,t,n)}throw Error(pn(156,t.tag))};function s9(e,t){return O7(e,t)}function Oee(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mc(e,t,n,r){return new Oee(e,t,n,r)}function MR(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Lee(e){if(typeof e=="function")return MR(e)?1:0;if(e!=null){if(e=e.$$typeof,e===q5)return 11;if(e===Z5)return 14}return 2}function Vp(e,t){var n=e.alternate;return n===null?(n=mc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function rT(e,t,n,r,l,d){var f=2;if(r=e,typeof e=="function")MR(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case Gy:return e0(n.children,l,d,t);case G5:f=8,l|=8;break;case LM:return e=mc(12,n,t,l|2),e.elementType=LM,e.lanes=d,e;case NM:return e=mc(13,n,t,l),e.elementType=NM,e.lanes=d,e;case zM:return e=mc(19,n,t,l),e.elementType=zM,e.lanes=d,e;case y7:return oC(n,l,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case m7:f=10;break e;case g7:f=9;break e;case q5:f=11;break e;case Z5:f=14;break e;case vp:f=16,r=null;break e}throw Error(pn(130,e==null?e:typeof e,""))}return t=mc(f,n,t,l),t.elementType=e,t.type=r,t.lanes=d,t}function e0(e,t,n,r){return e=mc(7,e,r,t),e.lanes=n,e}function oC(e,t,n,r){return e=mc(22,e,r,t),e.elementType=y7,e.lanes=n,e.stateNode={isHidden:!1},e}function v3(e,t,n){return e=mc(6,e,null,t),e.lanes=n,e}function _3(e,t,n){return t=mc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Nee(e,t,n,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=e3(0),this.expirationTimes=e3(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=e3(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function DR(e,t,n,r,l,d,f,y,a){return e=new Nee(e,t,n,y,a),t===1?(t=1,d===!0&&(t|=8)):t=0,d=mc(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fR(d),e}function zee(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yy,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function l9(e){if(!e)return qp;e=e._reactInternals;e:{if(T0(e)!==e||e.tag!==1)throw Error(pn(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Gs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(pn(171))}if(e.tag===1){var n=e.type;if(Gs(n))return lj(e,n,t)}return t}function c9(e,t,n,r,l,d,f,y,a){return e=DR(n,r,!0,e,l,d,f,y,a),e.context=l9(null),n=e.current,r=Cs(),l=Up(n),d=jh(r,l),d.callback=t??null,jp(n,d,l),e.current.lanes=l,vx(e,l,r),qs(e,r),e}function iC(e,t,n,r){var l=t.current,d=Cs(),f=Up(l);return n=l9(n),t.context===null?t.context=n:t.pendingContext=n,t=jh(d,f),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=jp(l,t,f),e!==null&&(bu(e,l,f,d),XE(e,l,f)),f}function GT(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function y6(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function RR(e,t){y6(e,t),(e=e.alternate)&&y6(e,t)}function Bee(){return null}var u9=typeof reportError=="function"?reportError:function(e){console.error(e)};function IR(e){this._internalRoot=e}aC.prototype.render=IR.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(pn(409));iC(e,t,null,null)};aC.prototype.unmount=IR.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;u0(function(){iC(null,e,null,null)}),t[Kh]=null}};function aC(e){this._internalRoot=e}aC.prototype.unstable_scheduleHydration=function(e){if(e){var t=$7();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ep.length&&t!==0&&t<Ep[n].priority;n++);Ep.splice(n,0,e),n===0&&V7(e)}};function PR(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function sC(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function b6(){}function Fee(e,t,n,r,l){if(l){if(typeof r=="function"){var d=r;r=function(){var E=GT(f);d.call(E)}}var f=c9(t,r,e,0,null,!1,!1,"",b6);return e._reactRootContainer=f,e[Kh]=f.current,z1(e.nodeType===8?e.parentNode:e),u0(),f}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var y=r;r=function(){var E=GT(a);y.call(E)}}var a=DR(e,0,!1,null,null,!1,!1,"",b6);return e._reactRootContainer=a,e[Kh]=a.current,z1(e.nodeType===8?e.parentNode:e),u0(function(){iC(t,a,n,r)}),a}function lC(e,t,n,r,l){var d=n._reactRootContainer;if(d){var f=d;if(typeof l=="function"){var y=l;l=function(){var a=GT(f);y.call(a)}}iC(t,f,e,l)}else f=Fee(n,t,e,l,r);return GT(f)}F7=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=K_(t.pendingLanes);n!==0&&(Q5(t,n|1),qs(t,qi()),!(_o&6)&&(Nb=qi()+500,sm()))}break;case 13:u0(function(){var r=Xh(e,1);if(r!==null){var l=Cs();bu(r,e,1,l)}}),RR(e,1)}};J5=function(e){if(e.tag===13){var t=Xh(e,134217728);if(t!==null){var n=Cs();bu(t,e,134217728,n)}RR(e,134217728)}};j7=function(e){if(e.tag===13){var t=Up(e),n=Xh(e,t);if(n!==null){var r=Cs();bu(n,e,t,r)}RR(e,t)}};$7=function(){return Vo};U7=function(e,t){var n=Vo;try{return Vo=e,t()}finally{Vo=n}};GM=function(e,t,n){switch(t){case"input":if(jM(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var l=QS(r);if(!l)throw Error(pn(90));v7(r),jM(r,l)}}}break;case"textarea":x7(e,n);break;case"select":t=n.value,t!=null&&cb(e,!!n.multiple,t,!1)}};A7=CR;M7=u0;var jee={usingClientEntryPoint:!1,Events:[xx,Xy,QS,C7,k7,CR]},k_={findFiberByHostInstance:Hg,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$ee={bundleType:k_.bundleType,version:k_.version,rendererPackageName:k_.rendererPackageName,rendererConfig:k_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rf.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=I7(e),e===null?null:e.stateNode},findFiberByHostInstance:k_.findFiberByHostInstance||Bee,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uE=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uE.isDisabled&&uE.supportsFiber)try{qS=uE.inject($ee),gd=uE}catch{}}zl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jee;zl.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!PR(t))throw Error(pn(200));return zee(e,t,null,n)};zl.createRoot=function(e,t){if(!PR(e))throw Error(pn(299));var n=!1,r="",l=u9;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=DR(e,1,!1,null,null,n,!1,r,l),e[Kh]=t.current,z1(e.nodeType===8?e.parentNode:e),new IR(t)};zl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(pn(188)):(e=Object.keys(e).join(","),Error(pn(268,e)));return e=I7(t),e=e===null?null:e.stateNode,e};zl.flushSync=function(e){return u0(e)};zl.hydrate=function(e,t,n){if(!sC(t))throw Error(pn(200));return lC(null,e,t,!0,n)};zl.hydrateRoot=function(e,t,n){if(!PR(e))throw Error(pn(405));var r=n!=null&&n.hydratedSources||null,l=!1,d="",f=u9;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(d=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),t=c9(t,null,e,1,n??null,l,!1,d,f),e[Kh]=t.current,z1(e),r)for(e=0;e<r.length;e++)n=r[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new aC(t)};zl.render=function(e,t,n){if(!sC(t))throw Error(pn(200));return lC(null,e,t,!1,n)};zl.unmountComponentAtNode=function(e){if(!sC(e))throw Error(pn(40));return e._reactRootContainer?(u0(function(){lC(null,null,e,!1,function(){e._reactRootContainer=null,e[Kh]=null})}),!0):!1};zl.unstable_batchedUpdates=CR;zl.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!sC(n))throw Error(pn(200));if(e==null||e._reactInternals===void 0)throw Error(pn(38));return lC(e,t,n,!1,r)};zl.version="18.3.1-next-f1338f8080-20240426";function d9(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d9)}catch(e){console.error(e)}}d9(),d7.exports=zl;var lm=d7.exports;const kp=w0(lm),Uee=JF({__proto__:null,default:kp},[lm]);/**
 * @remix-run/router v1.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ti(){return Ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ti.apply(this,arguments)}var Gi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Gi||(Gi={}));const v6="popstate";function Vee(e){e===void 0&&(e={});function t(r,l){let{pathname:d,search:f,hash:y}=r.location;return Y1("",{pathname:d,search:f,hash:y},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(r,l){return typeof l=="string"?l:d0(l)}return Wee(t,n,null,e)}function oo(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function zb(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Hee(){return Math.random().toString(36).substr(2,8)}function _6(e,t){return{usr:e.state,key:e.key,idx:t}}function Y1(e,t,n,r){return n===void 0&&(n=null),Ti({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?of(t):t,{state:n,key:t&&t.key||r||Hee()})}function d0(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function of(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Wee(e,t,n,r){r===void 0&&(r={});let{window:l=document.defaultView,v5Compat:d=!1}=r,f=l.history,y=Gi.Pop,a=null,E=C();E==null&&(E=0,f.replaceState(Ti({},f.state,{idx:E}),""));function C(){return(f.state||{idx:null}).idx}function M(){y=Gi.Pop;let Z=C(),q=Z==null?null:Z-E;E=Z,a&&a({action:y,location:$.location,delta:q})}function P(Z,q){y=Gi.Push;let K=Y1($.location,Z,q);n&&n(K,Z),E=C()+1;let Q=_6(K,E),te=$.createHref(K);try{f.pushState(Q,"",te)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;l.location.assign(te)}d&&a&&a({action:y,location:$.location,delta:1})}function N(Z,q){y=Gi.Replace;let K=Y1($.location,Z,q);n&&n(K,Z),E=C();let Q=_6(K,E),te=$.createHref(K);f.replaceState(Q,"",te),d&&a&&a({action:y,location:$.location,delta:0})}function F(Z){let q=l.location.origin!=="null"?l.location.origin:l.location.href,K=typeof Z=="string"?Z:d0(Z);return K=K.replace(/ $/,"%20"),oo(q,"No window.location.(origin|href) available to create URL for href: "+K),new URL(K,q)}let $={get action(){return y},get location(){return e(l,f)},listen(Z){if(a)throw new Error("A history only accepts one active listener");return l.addEventListener(v6,M),a=Z,()=>{l.removeEventListener(v6,M),a=null}},createHref(Z){return t(l,Z)},createURL:F,encodeLocation(Z){let q=F(Z);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:P,replace:N,go(Z){return f.go(Z)}};return $}var pi;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(pi||(pi={}));const Yee=new Set(["lazy","caseSensitive","path","id","index","children"]);function Gee(e){return e.index===!0}function CD(e,t,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),e.map((l,d)=>{let f=[...n,d],y=typeof l.id=="string"?l.id:f.join("-");if(oo(l.index!==!0||!l.children,"Cannot specify children on an index route"),oo(!r[y],'Found a route id collision on id "'+y+`".  Route id's must be globally unique within Data Router usages`),Gee(l)){let a=Ti({},l,t(l),{id:y});return r[y]=a,a}else{let a=Ti({},l,t(l),{id:y,children:void 0});return r[y]=a,l.children&&(a.children=CD(l.children,t,f,r)),a}})}function ob(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?of(t):t,l=hv(r.pathname||"/",n);if(l==null)return null;let d=h9(e);Zee(d);let f=null;for(let y=0;f==null&&y<d.length;++y){let a=ste(l);f=ote(d[y],a)}return f}function qee(e,t){let{route:n,pathname:r,params:l}=e;return{id:n.id,pathname:r,params:l,data:t[n.id],handle:n.handle}}function h9(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let l=(d,f,y)=>{let a={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};a.relativePath.startsWith("/")&&(oo(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let E=$h([r,a.relativePath]),C=n.concat(a);d.children&&d.children.length>0&&(oo(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+E+'".')),h9(d.children,t,C,E)),!(d.path==null&&!d.index)&&t.push({path:E,score:nte(E,d.index),routesMeta:C})};return e.forEach((d,f)=>{var y;if(d.path===""||!((y=d.path)!=null&&y.includes("?")))l(d,f);else for(let a of f9(d.path))l(d,f,a)}),t}function f9(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,l=n.endsWith("?"),d=n.replace(/\?$/,"");if(r.length===0)return l?[d,""]:[d];let f=f9(r.join("/")),y=[];return y.push(...f.map(a=>a===""?d:[d,a].join("/"))),l&&y.push(...f),y.map(a=>e.startsWith("/")&&a===""?"/":a)}function Zee(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:rte(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Kee=/^:[\w-]+$/,Xee=3,Qee=2,Jee=1,ete=10,tte=-2,x6=e=>e==="*";function nte(e,t){let n=e.split("/"),r=n.length;return n.some(x6)&&(r+=tte),t&&(r+=Qee),n.filter(l=>!x6(l)).reduce((l,d)=>l+(Kee.test(d)?Xee:d===""?Jee:ete),r)}function rte(e,t){return e.length===t.length&&e.slice(0,-1).every((r,l)=>r===t[l])?e[e.length-1]-t[t.length-1]:0}function ote(e,t){let{routesMeta:n}=e,r={},l="/",d=[];for(let f=0;f<n.length;++f){let y=n[f],a=f===n.length-1,E=l==="/"?t:t.slice(l.length)||"/",C=ite({path:y.relativePath,caseSensitive:y.caseSensitive,end:a},E);if(!C)return null;Object.assign(r,C.params);let M=y.route;d.push({params:r,pathname:$h([l,C.pathname]),pathnameBase:ute($h([l,C.pathnameBase])),route:M}),C.pathnameBase!=="/"&&(l=$h([l,C.pathnameBase]))}return d}function ite(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=ate(e.path,e.caseSensitive,e.end),l=t.match(n);if(!l)return null;let d=l[0],f=d.replace(/(.)\/+$/,"$1"),y=l.slice(1);return{params:r.reduce((E,C,M)=>{let{paramName:P,isOptional:N}=C;if(P==="*"){let $=y[M]||"";f=d.slice(0,d.length-$.length).replace(/(.)\/+$/,"$1")}const F=y[M];return N&&!F?E[P]=void 0:E[P]=(F||"").replace(/%2F/g,"/"),E},{}),pathname:d,pathnameBase:f,pattern:e}}function ate(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),zb(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,y,a)=>(r.push({paramName:y,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),r]}function ste(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return zb(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function hv(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function lte(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:l=""}=typeof e=="string"?of(e):e;return{pathname:n?n.startsWith("/")?n:cte(n,t):t,search:dte(r),hash:hte(l)}}function cte(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function x3(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function p9(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function OR(e,t){let n=p9(e);return t?n.map((r,l)=>l===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function LR(e,t,n,r){r===void 0&&(r=!1);let l;typeof e=="string"?l=of(e):(l=Ti({},e),oo(!l.pathname||!l.pathname.includes("?"),x3("?","pathname","search",l)),oo(!l.pathname||!l.pathname.includes("#"),x3("#","pathname","hash",l)),oo(!l.search||!l.search.includes("#"),x3("#","search","hash",l)));let d=e===""||l.pathname==="",f=d?"/":l.pathname,y;if(f==null)y=n;else{let M=t.length-1;if(!r&&f.startsWith("..")){let P=f.split("/");for(;P[0]==="..";)P.shift(),M-=1;l.pathname=P.join("/")}y=M>=0?t[M]:"/"}let a=lte(l,y),E=f&&f!=="/"&&f.endsWith("/"),C=(d||f===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(E||C)&&(a.pathname+="/"),a}const $h=e=>e.join("/").replace(/\/\/+/g,"/"),ute=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),dte=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,hte=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class NR{constructor(t,n,r,l){l===void 0&&(l=!1),this.status=t,this.statusText=n||"",this.internal=l,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function zR(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const m9=["post","put","patch","delete"],fte=new Set(m9),pte=["get",...m9],mte=new Set(pte),gte=new Set([301,302,303,307,308]),yte=new Set([307,308]),w3={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},bte={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},A_={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},BR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vte=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),g9="remix-router-transitions";function _te(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",r=!n;oo(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let l;if(e.mapRouteProperties)l=e.mapRouteProperties;else if(e.detectErrorBoundary){let Qe=e.detectErrorBoundary;l=pt=>({hasErrorBoundary:Qe(pt)})}else l=vte;let d={},f=CD(e.routes,l,void 0,d),y,a=e.basename||"/",E=e.unstable_dataStrategy||Tte,C=Ti({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},e.future),M=null,P=new Set,N=null,F=null,$=null,Z=e.hydrationData!=null,q=ob(f,e.history.location,a),K=null;if(q==null){let Qe=ac(404,{pathname:e.history.location.pathname}),{matches:pt,route:_t}=R6(f);q=pt,K={[_t.id]:Qe}}let Q,te=q.some(Qe=>Qe.route.lazy),ie=q.some(Qe=>Qe.route.loader);if(te)Q=!1;else if(!ie)Q=!0;else if(C.v7_partialHydration){let Qe=e.hydrationData?e.hydrationData.loaderData:null,pt=e.hydrationData?e.hydrationData.errors:null,_t=Kt=>Kt.route.loader?typeof Kt.route.loader=="function"&&Kt.route.loader.hydrate===!0?!1:Qe&&Qe[Kt.route.id]!==void 0||pt&&pt[Kt.route.id]!==void 0:!0;if(pt){let Kt=q.findIndex(vn=>pt[vn.route.id]!==void 0);Q=q.slice(0,Kt+1).every(_t)}else Q=q.every(_t)}else Q=e.hydrationData!=null;let ue,re={historyAction:e.history.action,location:e.history.location,matches:q,initialized:Q,navigation:w3,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||K,fetchers:new Map,blockers:new Map},me=Gi.Pop,ve=!1,De,je=!1,Be=new Map,Ue=null,Ge=!1,ze=!1,ot=[],st=[],Re=new Map,bt=0,Lt=-1,Ct=new Map,Nt=new Set,tn=new Map,Dt=new Map,cn=new Set,Mt=new Map,Vn=new Map,nt=!1;function Pn(){if(M=e.history.listen(Qe=>{let{action:pt,location:_t,delta:Kt}=Qe;if(nt){nt=!1;return}zb(Vn.size===0||Kt!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let vn=er({currentLocation:re.location,nextLocation:_t,historyAction:pt});if(vn&&Kt!=null){nt=!0,e.history.go(Kt*-1),en(vn,{state:"blocked",location:_t,proceed(){en(vn,{state:"proceeding",proceed:void 0,reset:void 0,location:_t}),e.history.go(Kt)},reset(){let tr=new Map(re.blockers);tr.set(vn,A_),bn({blockers:tr})}});return}return qr(pt,_t)}),n){Nte(t,Be);let Qe=()=>zte(t,Be);t.addEventListener("pagehide",Qe),Ue=()=>t.removeEventListener("pagehide",Qe)}return re.initialized||qr(Gi.Pop,re.location,{initialHydration:!0}),ue}function Un(){M&&M(),Ue&&Ue(),P.clear(),De&&De.abort(),re.fetchers.forEach((Qe,pt)=>Pe(pt)),re.blockers.forEach((Qe,pt)=>Ut(pt))}function En(Qe){return P.add(Qe),()=>P.delete(Qe)}function bn(Qe,pt){pt===void 0&&(pt={}),re=Ti({},re,Qe);let _t=[],Kt=[];C.v7_fetcherPersist&&re.fetchers.forEach((vn,tr)=>{vn.state==="idle"&&(cn.has(tr)?Kt.push(tr):_t.push(tr))}),[...P].forEach(vn=>vn(re,{deletedFetchers:Kt,unstable_viewTransitionOpts:pt.viewTransitionOpts,unstable_flushSync:pt.flushSync===!0})),C.v7_fetcherPersist&&(_t.forEach(vn=>re.fetchers.delete(vn)),Kt.forEach(vn=>Pe(vn)))}function Fn(Qe,pt,_t){var Kt,vn;let{flushSync:tr}=_t===void 0?{}:_t,mn=re.actionData!=null&&re.navigation.formMethod!=null&&hu(re.navigation.formMethod)&&re.navigation.state==="loading"&&((Kt=Qe.state)==null?void 0:Kt._isRedirect)!==!0,sn;pt.actionData?Object.keys(pt.actionData).length>0?sn=pt.actionData:sn=null:mn?sn=re.actionData:sn=null;let Ze=pt.loaderData?M6(re.loaderData,pt.loaderData,pt.matches||[],pt.errors):re.loaderData,Je=re.blockers;Je.size>0&&(Je=new Map(Je),Je.forEach((ut,kt)=>Je.set(kt,A_)));let Et=ve===!0||re.navigation.formMethod!=null&&hu(re.navigation.formMethod)&&((vn=Qe.state)==null?void 0:vn._isRedirect)!==!0;y&&(f=y,y=void 0),Ge||me===Gi.Pop||(me===Gi.Push?e.history.push(Qe,Qe.state):me===Gi.Replace&&e.history.replace(Qe,Qe.state));let Tt;if(me===Gi.Pop){let ut=Be.get(re.location.pathname);ut&&ut.has(Qe.pathname)?Tt={currentLocation:re.location,nextLocation:Qe}:Be.has(Qe.pathname)&&(Tt={currentLocation:Qe,nextLocation:re.location})}else if(je){let ut=Be.get(re.location.pathname);ut?ut.add(Qe.pathname):(ut=new Set([Qe.pathname]),Be.set(re.location.pathname,ut)),Tt={currentLocation:re.location,nextLocation:Qe}}bn(Ti({},pt,{actionData:sn,loaderData:Ze,historyAction:me,location:Qe,initialized:!0,navigation:w3,revalidation:"idle",restoreScrollPosition:vr(Qe,pt.matches||re.matches),preventScrollReset:Et,blockers:Je}),{viewTransitionOpts:Tt,flushSync:tr===!0}),me=Gi.Pop,ve=!1,je=!1,Ge=!1,ze=!1,ot=[],st=[]}async function On(Qe,pt){if(typeof Qe=="number"){e.history.go(Qe);return}let _t=kD(re.location,re.matches,a,C.v7_prependBasename,Qe,C.v7_relativeSplatPath,pt?.fromRouteId,pt?.relative),{path:Kt,submission:vn,error:tr}=w6(C.v7_normalizeFormMethod,!1,_t,pt),mn=re.location,sn=Y1(re.location,Kt,pt&&pt.state);sn=Ti({},sn,e.history.encodeLocation(sn));let Ze=pt&&pt.replace!=null?pt.replace:void 0,Je=Gi.Push;Ze===!0?Je=Gi.Replace:Ze===!1||vn!=null&&hu(vn.formMethod)&&vn.formAction===re.location.pathname+re.location.search&&(Je=Gi.Replace);let Et=pt&&"preventScrollReset"in pt?pt.preventScrollReset===!0:void 0,Tt=(pt&&pt.unstable_flushSync)===!0,ut=er({currentLocation:mn,nextLocation:sn,historyAction:Je});if(ut){en(ut,{state:"blocked",location:sn,proceed(){en(ut,{state:"proceeding",proceed:void 0,reset:void 0,location:sn}),On(Qe,pt)},reset(){let kt=new Map(re.blockers);kt.set(ut,A_),bn({blockers:kt})}});return}return await qr(Je,sn,{submission:vn,pendingError:tr,preventScrollReset:Et,replace:pt&&pt.replace,enableViewTransition:pt&&pt.unstable_viewTransition,flushSync:Tt})}function an(){if(eo(),bn({revalidation:"loading"}),re.navigation.state!=="submitting"){if(re.navigation.state==="idle"){qr(re.historyAction,re.location,{startUninterruptedRevalidation:!0});return}qr(me||re.historyAction,re.navigation.location,{overrideNavigation:re.navigation})}}async function qr(Qe,pt,_t){De&&De.abort(),De=null,me=Qe,Ge=(_t&&_t.startUninterruptedRevalidation)===!0,Cr(re.location,re.matches),ve=(_t&&_t.preventScrollReset)===!0,je=(_t&&_t.enableViewTransition)===!0;let Kt=y||f,vn=_t&&_t.overrideNavigation,tr=ob(Kt,pt,a),mn=(_t&&_t.flushSync)===!0;if(!tr){let ut=ac(404,{pathname:pt.pathname}),{matches:kt,route:Rt}=R6(Kt);Fr(),Fn(pt,{matches:kt,loaderData:{},errors:{[Rt.id]:ut}},{flushSync:mn});return}if(re.initialized&&!ze&&Dte(re.location,pt)&&!(_t&&_t.submission&&hu(_t.submission.formMethod))){Fn(pt,{matches:tr},{flushSync:mn});return}De=new AbortController;let sn=Iy(e.history,pt,De.signal,_t&&_t.submission),Ze;if(_t&&_t.pendingError)Ze=[u1(tr).route.id,{type:pi.error,error:_t.pendingError}];else if(_t&&_t.submission&&hu(_t.submission.formMethod)){let ut=await hn(sn,pt,_t.submission,tr,{replace:_t.replace,flushSync:mn});if(ut.shortCircuited)return;Ze=ut.pendingActionResult,vn=E3(pt,_t.submission),mn=!1,sn=Iy(e.history,sn.url,sn.signal)}let{shortCircuited:Je,loaderData:Et,errors:Tt}=await Wr(sn,pt,tr,vn,_t&&_t.submission,_t&&_t.fetcherSubmission,_t&&_t.replace,_t&&_t.initialHydration===!0,mn,Ze);Je||(De=null,Fn(pt,Ti({matches:tr},D6(Ze),{loaderData:Et,errors:Tt})))}async function hn(Qe,pt,_t,Kt,vn){vn===void 0&&(vn={}),eo();let tr=Ote(pt,_t);bn({navigation:tr},{flushSync:vn.flushSync===!0});let mn,sn=MD(Kt,pt);if(!sn.route.action&&!sn.route.lazy)mn={type:pi.error,error:ac(405,{method:Qe.method,pathname:pt.pathname,routeId:sn.route.id})};else if(mn=(await Mr("action",Qe,[sn],Kt))[0],Qe.signal.aborted)return{shortCircuited:!0};if(qg(mn)){let Ze;return vn&&vn.replace!=null?Ze=vn.replace:Ze=C6(mn.response.headers.get("Location"),new URL(Qe.url),a)===re.location.pathname+re.location.search,await to(Qe,mn,{submission:_t,replace:Ze}),{shortCircuited:!0}}if(Gg(mn))throw ac(400,{type:"defer-action"});if(hc(mn)){let Ze=u1(Kt,sn.route.id);return(vn&&vn.replace)!==!0&&(me=Gi.Push),{pendingActionResult:[Ze.route.id,mn]}}return{pendingActionResult:[sn.route.id,mn]}}async function Wr(Qe,pt,_t,Kt,vn,tr,mn,sn,Ze,Je){let Et=Kt||E3(pt,vn),Tt=vn||tr||O6(Et),ut=y||f,[kt,Rt]=E6(e.history,re,_t,Tt,pt,C.v7_partialHydration&&sn===!0,C.unstable_skipActionErrorRevalidation,ze,ot,st,cn,tn,Nt,ut,a,Je);if(Fr(Xn=>!(_t&&_t.some(ro=>ro.route.id===Xn))||kt&&kt.some(ro=>ro.route.id===Xn)),Lt=++bt,kt.length===0&&Rt.length===0){let Xn=ct();return Fn(pt,Ti({matches:_t,loaderData:{},errors:Je&&hc(Je[1])?{[Je[0]]:Je[1].error}:null},D6(Je),Xn?{fetchers:new Map(re.fetchers)}:{}),{flushSync:Ze}),{shortCircuited:!0}}if(!Ge&&(!C.v7_partialHydration||!sn)){Rt.forEach(ro=>{let sr=re.fetchers.get(ro.key),fo=M_(void 0,sr?sr.data:void 0);re.fetchers.set(ro.key,fo)});let Xn;Je&&!hc(Je[1])?Xn={[Je[0]]:Je[1].data}:re.actionData&&(Object.keys(re.actionData).length===0?Xn=null:Xn=re.actionData),bn(Ti({navigation:Et},Xn!==void 0?{actionData:Xn}:{},Rt.length>0?{fetchers:new Map(re.fetchers)}:{}),{flushSync:Ze})}Rt.forEach(Xn=>{Re.has(Xn.key)&&ft(Xn.key),Xn.controller&&Re.set(Xn.key,Xn.controller)});let Bt=()=>Rt.forEach(Xn=>ft(Xn.key));De&&De.signal.addEventListener("abort",Bt);let{loaderResults:Yt,fetcherResults:Ft}=await mr(re.matches,_t,kt,Rt,Qe);if(Qe.signal.aborted)return{shortCircuited:!0};De&&De.signal.removeEventListener("abort",Bt),Rt.forEach(Xn=>Re.delete(Xn.key));let An=I6([...Yt,...Ft]);if(An){if(An.idx>=kt.length){let Xn=Rt[An.idx-kt.length].key;Nt.add(Xn)}return await to(Qe,An.result,{replace:mn}),{shortCircuited:!0}}let{loaderData:nr,errors:nn}=A6(re,_t,kt,Yt,Je,Rt,Ft,Mt);Mt.forEach((Xn,ro)=>{Xn.subscribe(sr=>{(sr||Xn.done)&&Mt.delete(ro)})}),C.v7_partialHydration&&sn&&re.errors&&Object.entries(re.errors).filter(Xn=>{let[ro]=Xn;return!kt.some(sr=>sr.route.id===ro)}).forEach(Xn=>{let[ro,sr]=Xn;nn=Object.assign(nn||{},{[ro]:sr})});let Mn=ct(),_r=tt(Lt),Zr=Mn||_r||Rt.length>0;return Ti({loaderData:nr,errors:nn},Zr?{fetchers:new Map(re.fetchers)}:{})}function go(Qe,pt,_t,Kt){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Re.has(Qe)&&ft(Qe);let vn=(Kt&&Kt.unstable_flushSync)===!0,tr=y||f,mn=kD(re.location,re.matches,a,C.v7_prependBasename,_t,C.v7_relativeSplatPath,pt,Kt?.relative),sn=ob(tr,mn,a);if(!sn){pe(Qe,pt,ac(404,{pathname:mn}),{flushSync:vn});return}let{path:Ze,submission:Je,error:Et}=w6(C.v7_normalizeFormMethod,!0,mn,Kt);if(Et){pe(Qe,pt,Et,{flushSync:vn});return}let Tt=MD(sn,Ze);if(ve=(Kt&&Kt.preventScrollReset)===!0,Je&&hu(Je.formMethod)){pr(Qe,pt,Ze,Tt,sn,vn,Je);return}tn.set(Qe,{routeId:pt,path:Ze}),Pr(Qe,pt,Ze,Tt,sn,vn,Je)}async function pr(Qe,pt,_t,Kt,vn,tr,mn){if(eo(),tn.delete(Qe),!Kt.route.action&&!Kt.route.lazy){let fo=ac(405,{method:mn.formMethod,pathname:_t,routeId:pt});pe(Qe,pt,fo,{flushSync:tr});return}let sn=re.fetchers.get(Qe);Ke(Qe,Lte(mn,sn),{flushSync:tr});let Ze=new AbortController,Je=Iy(e.history,_t,Ze.signal,mn);Re.set(Qe,Ze);let Et=bt,ut=(await Mr("action",Je,[Kt],vn))[0];if(Je.signal.aborted){Re.get(Qe)===Ze&&Re.delete(Qe);return}if(C.v7_fetcherPersist&&cn.has(Qe)){if(qg(ut)||hc(ut)){Ke(Qe,bp(void 0));return}}else{if(qg(ut))if(Re.delete(Qe),Lt>Et){Ke(Qe,bp(void 0));return}else return Nt.add(Qe),Ke(Qe,M_(mn)),to(Je,ut,{fetcherSubmission:mn});if(hc(ut)){pe(Qe,pt,ut.error);return}}if(Gg(ut))throw ac(400,{type:"defer-action"});let kt=re.navigation.location||re.location,Rt=Iy(e.history,kt,Ze.signal),Bt=y||f,Yt=re.navigation.state!=="idle"?ob(Bt,re.navigation.location,a):re.matches;oo(Yt,"Didn't find any matches after fetcher action");let Ft=++bt;Ct.set(Qe,Ft);let An=M_(mn,ut.data);re.fetchers.set(Qe,An);let[nr,nn]=E6(e.history,re,Yt,mn,kt,!1,C.unstable_skipActionErrorRevalidation,ze,ot,st,cn,tn,Nt,Bt,a,[Kt.route.id,ut]);nn.filter(fo=>fo.key!==Qe).forEach(fo=>{let Fi=fo.key,ni=re.fetchers.get(Fi),jl=M_(void 0,ni?ni.data:void 0);re.fetchers.set(Fi,jl),Re.has(Fi)&&ft(Fi),fo.controller&&Re.set(Fi,fo.controller)}),bn({fetchers:new Map(re.fetchers)});let Mn=()=>nn.forEach(fo=>ft(fo.key));Ze.signal.addEventListener("abort",Mn);let{loaderResults:_r,fetcherResults:Zr}=await mr(re.matches,Yt,nr,nn,Rt);if(Ze.signal.aborted)return;Ze.signal.removeEventListener("abort",Mn),Ct.delete(Qe),Re.delete(Qe),nn.forEach(fo=>Re.delete(fo.key));let Xn=I6([..._r,...Zr]);if(Xn){if(Xn.idx>=nr.length){let fo=nn[Xn.idx-nr.length].key;Nt.add(fo)}return to(Rt,Xn.result)}let{loaderData:ro,errors:sr}=A6(re,re.matches,nr,_r,void 0,nn,Zr,Mt);if(re.fetchers.has(Qe)){let fo=bp(ut.data);re.fetchers.set(Qe,fo)}tt(Ft),re.navigation.state==="loading"&&Ft>Lt?(oo(me,"Expected pending action"),De&&De.abort(),Fn(re.navigation.location,{matches:Yt,loaderData:ro,errors:sr,fetchers:new Map(re.fetchers)})):(bn({errors:sr,loaderData:M6(re.loaderData,ro,Yt,sr),fetchers:new Map(re.fetchers)}),ze=!1)}async function Pr(Qe,pt,_t,Kt,vn,tr,mn){let sn=re.fetchers.get(Qe);Ke(Qe,M_(mn,sn?sn.data:void 0),{flushSync:tr});let Ze=new AbortController,Je=Iy(e.history,_t,Ze.signal);Re.set(Qe,Ze);let Et=bt,ut=(await Mr("loader",Je,[Kt],vn))[0];if(Gg(ut)&&(ut=await _9(ut,Je.signal,!0)||ut),Re.get(Qe)===Ze&&Re.delete(Qe),!Je.signal.aborted){if(cn.has(Qe)){Ke(Qe,bp(void 0));return}if(qg(ut))if(Lt>Et){Ke(Qe,bp(void 0));return}else{Nt.add(Qe),await to(Je,ut);return}if(hc(ut)){pe(Qe,pt,ut.error);return}oo(!Gg(ut),"Unhandled fetcher deferred data"),Ke(Qe,bp(ut.data))}}async function to(Qe,pt,_t){let{submission:Kt,fetcherSubmission:vn,replace:tr}=_t===void 0?{}:_t;pt.response.headers.has("X-Remix-Revalidate")&&(ze=!0);let mn=pt.response.headers.get("Location");oo(mn,"Expected a Location header on the redirect Response"),mn=C6(mn,new URL(Qe.url),a);let sn=Y1(re.location,mn,{_isRedirect:!0});if(n){let kt=!1;if(pt.response.headers.has("X-Remix-Reload-Document"))kt=!0;else if(BR.test(mn)){const Rt=e.history.createURL(mn);kt=Rt.origin!==t.location.origin||hv(Rt.pathname,a)==null}if(kt){tr?t.location.replace(mn):t.location.assign(mn);return}}De=null;let Ze=tr===!0?Gi.Replace:Gi.Push,{formMethod:Je,formAction:Et,formEncType:Tt}=re.navigation;!Kt&&!vn&&Je&&Et&&Tt&&(Kt=O6(re.navigation));let ut=Kt||vn;if(yte.has(pt.response.status)&&ut&&hu(ut.formMethod))await qr(Ze,sn,{submission:Ti({},ut,{formAction:mn}),preventScrollReset:ve});else{let kt=E3(sn,Kt);await qr(Ze,sn,{overrideNavigation:kt,fetcherSubmission:vn,preventScrollReset:ve})}}async function Mr(Qe,pt,_t,Kt){try{let vn=await Ste(E,Qe,pt,_t,Kt,d,l);return await Promise.all(vn.map((tr,mn)=>{if(Rte(tr)){let sn=tr.result;return{type:pi.redirect,response:Ate(sn,pt,_t[mn].route.id,Kt,a,C.v7_relativeSplatPath)}}return kte(tr)}))}catch(vn){return _t.map(()=>({type:pi.error,error:vn}))}}async function mr(Qe,pt,_t,Kt,vn){let[tr,...mn]=await Promise.all([_t.length?Mr("loader",vn,_t,pt):[],...Kt.map(sn=>{if(sn.matches&&sn.match&&sn.controller){let Ze=Iy(e.history,sn.path,sn.controller.signal);return Mr("loader",Ze,[sn.match],sn.matches).then(Je=>Je[0])}else return Promise.resolve({type:pi.error,error:ac(404,{pathname:sn.path})})})]);return await Promise.all([P6(Qe,_t,tr,tr.map(()=>vn.signal),!1,re.loaderData),P6(Qe,Kt.map(sn=>sn.match),mn,Kt.map(sn=>sn.controller?sn.controller.signal:null),!0)]),{loaderResults:tr,fetcherResults:mn}}function eo(){ze=!0,ot.push(...Fr()),tn.forEach((Qe,pt)=>{Re.has(pt)&&(st.push(pt),ft(pt))})}function Ke(Qe,pt,_t){_t===void 0&&(_t={}),re.fetchers.set(Qe,pt),bn({fetchers:new Map(re.fetchers)},{flushSync:(_t&&_t.flushSync)===!0})}function pe(Qe,pt,_t,Kt){Kt===void 0&&(Kt={});let vn=u1(re.matches,pt);Pe(Qe),bn({errors:{[vn.route.id]:_t},fetchers:new Map(re.fetchers)},{flushSync:(Kt&&Kt.flushSync)===!0})}function we(Qe){return C.v7_fetcherPersist&&(Dt.set(Qe,(Dt.get(Qe)||0)+1),cn.has(Qe)&&cn.delete(Qe)),re.fetchers.get(Qe)||bte}function Pe(Qe){let pt=re.fetchers.get(Qe);Re.has(Qe)&&!(pt&&pt.state==="loading"&&Ct.has(Qe))&&ft(Qe),tn.delete(Qe),Ct.delete(Qe),Nt.delete(Qe),cn.delete(Qe),re.fetchers.delete(Qe)}function at(Qe){if(C.v7_fetcherPersist){let pt=(Dt.get(Qe)||0)-1;pt<=0?(Dt.delete(Qe),cn.add(Qe)):Dt.set(Qe,pt)}else Pe(Qe);bn({fetchers:new Map(re.fetchers)})}function ft(Qe){let pt=Re.get(Qe);oo(pt,"Expected fetch controller: "+Qe),pt.abort(),Re.delete(Qe)}function it(Qe){for(let pt of Qe){let _t=we(pt),Kt=bp(_t.data);re.fetchers.set(pt,Kt)}}function ct(){let Qe=[],pt=!1;for(let _t of Nt){let Kt=re.fetchers.get(_t);oo(Kt,"Expected fetcher: "+_t),Kt.state==="loading"&&(Nt.delete(_t),Qe.push(_t),pt=!0)}return it(Qe),pt}function tt(Qe){let pt=[];for(let[_t,Kt]of Ct)if(Kt<Qe){let vn=re.fetchers.get(_t);oo(vn,"Expected fetcher: "+_t),vn.state==="loading"&&(ft(_t),Ct.delete(_t),pt.push(_t))}return it(pt),pt.length>0}function jt(Qe,pt){let _t=re.blockers.get(Qe)||A_;return Vn.get(Qe)!==pt&&Vn.set(Qe,pt),_t}function Ut(Qe){re.blockers.delete(Qe),Vn.delete(Qe)}function en(Qe,pt){let _t=re.blockers.get(Qe)||A_;oo(_t.state==="unblocked"&&pt.state==="blocked"||_t.state==="blocked"&&pt.state==="blocked"||_t.state==="blocked"&&pt.state==="proceeding"||_t.state==="blocked"&&pt.state==="unblocked"||_t.state==="proceeding"&&pt.state==="unblocked","Invalid blocker state transition: "+_t.state+" -> "+pt.state);let Kt=new Map(re.blockers);Kt.set(Qe,pt),bn({blockers:Kt})}function er(Qe){let{currentLocation:pt,nextLocation:_t,historyAction:Kt}=Qe;if(Vn.size===0)return;Vn.size>1&&zb(!1,"A router only supports one blocker at a time");let vn=Array.from(Vn.entries()),[tr,mn]=vn[vn.length-1],sn=re.blockers.get(tr);if(!(sn&&sn.state==="proceeding")&&mn({currentLocation:pt,nextLocation:_t,historyAction:Kt}))return tr}function Fr(Qe){let pt=[];return Mt.forEach((_t,Kt)=>{(!Qe||Qe(Kt))&&(_t.cancel(),pt.push(Kt),Mt.delete(Kt))}),pt}function no(Qe,pt,_t){if(N=Qe,$=pt,F=_t||null,!Z&&re.navigation===w3){Z=!0;let Kt=vr(re.location,re.matches);Kt!=null&&bn({restoreScrollPosition:Kt})}return()=>{N=null,$=null,F=null}}function Vr(Qe,pt){return F&&F(Qe,pt.map(Kt=>qee(Kt,re.loaderData)))||Qe.key}function Cr(Qe,pt){if(N&&$){let _t=Vr(Qe,pt);N[_t]=$()}}function vr(Qe,pt){if(N){let _t=Vr(Qe,pt),Kt=N[_t];if(typeof Kt=="number")return Kt}return null}function Nr(Qe){d={},y=CD(Qe,l,void 0,d)}return ue={get basename(){return a},get future(){return C},get state(){return re},get routes(){return f},get window(){return t},initialize:Pn,subscribe:En,enableScrollRestoration:no,navigate:On,fetch:go,revalidate:an,createHref:Qe=>e.history.createHref(Qe),encodeLocation:Qe=>e.history.encodeLocation(Qe),getFetcher:we,deleteFetcher:at,dispose:Un,getBlocker:jt,deleteBlocker:Ut,_internalFetchControllers:Re,_internalActiveDeferreds:Mt,_internalSetRoutes:Nr},ue}function xte(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function kD(e,t,n,r,l,d,f,y){let a,E;if(f){a=[];for(let M of t)if(a.push(M),M.route.id===f){E=M;break}}else a=t,E=t[t.length-1];let C=LR(l||".",OR(a,d),hv(e.pathname,n)||e.pathname,y==="path");return l==null&&(C.search=e.search,C.hash=e.hash),(l==null||l===""||l===".")&&E&&E.route.index&&!FR(C.search)&&(C.search=C.search?C.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(C.pathname=C.pathname==="/"?n:$h([n,C.pathname])),d0(C)}function w6(e,t,n,r){if(!r||!xte(r))return{path:n};if(r.formMethod&&!Pte(r.formMethod))return{path:n,error:ac(405,{method:r.formMethod})};let l=()=>({path:n,error:ac(400,{type:"invalid-body"})}),d=r.formMethod||"get",f=e?d.toUpperCase():d.toLowerCase(),y=b9(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!hu(f))return l();let P=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((N,F)=>{let[$,Z]=F;return""+N+$+"="+Z+`
`},""):String(r.body);return{path:n,submission:{formMethod:f,formAction:y,formEncType:r.formEncType,formData:void 0,json:void 0,text:P}}}else if(r.formEncType==="application/json"){if(!hu(f))return l();try{let P=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:f,formAction:y,formEncType:r.formEncType,formData:void 0,json:P,text:void 0}}}catch{return l()}}}oo(typeof FormData=="function","FormData is not available in this environment");let a,E;if(r.formData)a=AD(r.formData),E=r.formData;else if(r.body instanceof FormData)a=AD(r.body),E=r.body;else if(r.body instanceof URLSearchParams)a=r.body,E=k6(a);else if(r.body==null)a=new URLSearchParams,E=new FormData;else try{a=new URLSearchParams(r.body),E=k6(a)}catch{return l()}let C={formMethod:f,formAction:y,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:E,json:void 0,text:void 0};if(hu(C.formMethod))return{path:n,submission:C};let M=of(n);return t&&M.search&&FR(M.search)&&a.append("index",""),M.search="?"+a,{path:d0(M),submission:C}}function wte(e,t){let n=e;if(t){let r=e.findIndex(l=>l.route.id===t);r>=0&&(n=e.slice(0,r))}return n}function E6(e,t,n,r,l,d,f,y,a,E,C,M,P,N,F,$){let Z=$?hc($[1])?$[1].error:$[1].data:void 0,q=e.createURL(t.location),K=e.createURL(l),Q=$&&hc($[1])?$[0]:void 0,te=Q?wte(n,Q):n,ie=$?$[1].statusCode:void 0,ue=f&&ie&&ie>=400,re=te.filter((ve,De)=>{let{route:je}=ve;if(je.lazy)return!0;if(je.loader==null)return!1;if(d)return typeof je.loader!="function"||je.loader.hydrate?!0:t.loaderData[je.id]===void 0&&(!t.errors||t.errors[je.id]===void 0);if(Ete(t.loaderData,t.matches[De],ve)||a.some(Ge=>Ge===ve.route.id))return!0;let Be=t.matches[De],Ue=ve;return T6(ve,Ti({currentUrl:q,currentParams:Be.params,nextUrl:K,nextParams:Ue.params},r,{actionResult:Z,unstable_actionStatus:ie,defaultShouldRevalidate:ue?!1:y||q.pathname+q.search===K.pathname+K.search||q.search!==K.search||y9(Be,Ue)}))}),me=[];return M.forEach((ve,De)=>{if(d||!n.some(ze=>ze.route.id===ve.routeId)||C.has(De))return;let je=ob(N,ve.path,F);if(!je){me.push({key:De,routeId:ve.routeId,path:ve.path,matches:null,match:null,controller:null});return}let Be=t.fetchers.get(De),Ue=MD(je,ve.path),Ge=!1;P.has(De)?Ge=!1:E.includes(De)?Ge=!0:Be&&Be.state!=="idle"&&Be.data===void 0?Ge=y:Ge=T6(Ue,Ti({currentUrl:q,currentParams:t.matches[t.matches.length-1].params,nextUrl:K,nextParams:n[n.length-1].params},r,{actionResult:Z,unstable_actionStatus:ie,defaultShouldRevalidate:ue?!1:y})),Ge&&me.push({key:De,routeId:ve.routeId,path:ve.path,matches:je,match:Ue,controller:new AbortController})}),[re,me]}function Ete(e,t,n){let r=!t||n.route.id!==t.route.id,l=e[n.route.id]===void 0;return r||l}function y9(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function T6(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}async function S6(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let l=n[e.id];oo(l,"No route found in manifest");let d={};for(let f in r){let a=l[f]!==void 0&&f!=="hasErrorBoundary";zb(!a,'Route "'+l.id+'" has a static property "'+f+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+f+'" will be ignored.')),!a&&!Yee.has(f)&&(d[f]=r[f])}Object.assign(l,d),Object.assign(l,Ti({},t(l),{lazy:void 0}))}function Tte(e){return Promise.all(e.matches.map(t=>t.resolve()))}async function Ste(e,t,n,r,l,d,f,y){let a=r.reduce((M,P)=>M.add(P.route.id),new Set),E=new Set,C=await e({matches:l.map(M=>{let P=a.has(M.route.id);return Ti({},M,{shouldLoad:P,resolve:F=>(E.add(M.route.id),P?Cte(t,n,M,d,f,F,y):Promise.resolve({type:pi.data,result:void 0}))})}),request:n,params:l[0].params,context:y});return l.forEach(M=>oo(E.has(M.route.id),'`match.resolve()` was not called for route id "'+M.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),C.filter((M,P)=>a.has(l[P].route.id))}async function Cte(e,t,n,r,l,d,f){let y,a,E=C=>{let M,P=new Promise(($,Z)=>M=Z);a=()=>M(),t.signal.addEventListener("abort",a);let N=$=>typeof C!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+n.route.id+"]"))):C({request:t,params:n.params,context:f},...$!==void 0?[$]:[]),F;return d?F=d($=>N($)):F=(async()=>{try{return{type:"data",result:await N()}}catch($){return{type:"error",result:$}}})(),Promise.race([F,P])};try{let C=n.route[e];if(n.route.lazy)if(C){let M,[P]=await Promise.all([E(C).catch(N=>{M=N}),S6(n.route,l,r)]);if(M!==void 0)throw M;y=P}else if(await S6(n.route,l,r),C=n.route[e],C)y=await E(C);else if(e==="action"){let M=new URL(t.url),P=M.pathname+M.search;throw ac(405,{method:t.method,pathname:P,routeId:n.route.id})}else return{type:pi.data,result:void 0};else if(C)y=await E(C);else{let M=new URL(t.url),P=M.pathname+M.search;throw ac(404,{pathname:P})}oo(y.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(C){return{type:pi.error,result:C}}finally{a&&t.signal.removeEventListener("abort",a)}return y}async function kte(e){let{result:t,type:n,status:r}=e;if(v9(t)){let f;try{let y=t.headers.get("Content-Type");y&&/\bapplication\/json\b/.test(y)?t.body==null?f=null:f=await t.json():f=await t.text()}catch(y){return{type:pi.error,error:y}}return n===pi.error?{type:pi.error,error:new NR(t.status,t.statusText,f),statusCode:t.status,headers:t.headers}:{type:pi.data,data:f,statusCode:t.status,headers:t.headers}}if(n===pi.error)return{type:pi.error,error:t,statusCode:zR(t)?t.status:r};if(Ite(t)){var l,d;return{type:pi.deferred,deferredData:t,statusCode:(l=t.init)==null?void 0:l.status,headers:((d=t.init)==null?void 0:d.headers)&&new Headers(t.init.headers)}}return{type:pi.data,data:t,statusCode:r}}function Ate(e,t,n,r,l,d){let f=e.headers.get("Location");if(oo(f,"Redirects returned/thrown from loaders/actions must have a Location header"),!BR.test(f)){let y=r.slice(0,r.findIndex(a=>a.route.id===n)+1);f=kD(new URL(t.url),y,l,!0,f,d),e.headers.set("Location",f)}return e}function C6(e,t,n){if(BR.test(e)){let r=e,l=r.startsWith("//")?new URL(t.protocol+r):new URL(r),d=hv(l.pathname,n)!=null;if(l.origin===t.origin&&d)return l.pathname+l.search+l.hash}return e}function Iy(e,t,n,r){let l=e.createURL(b9(t)).toString(),d={signal:n};if(r&&hu(r.formMethod)){let{formMethod:f,formEncType:y}=r;d.method=f.toUpperCase(),y==="application/json"?(d.headers=new Headers({"Content-Type":y}),d.body=JSON.stringify(r.json)):y==="text/plain"?d.body=r.text:y==="application/x-www-form-urlencoded"&&r.formData?d.body=AD(r.formData):d.body=r.formData}return new Request(l,d)}function AD(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function k6(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function Mte(e,t,n,r,l,d){let f={},y=null,a,E=!1,C={},M=r&&hc(r[1])?r[1].error:void 0;return n.forEach((P,N)=>{let F=t[N].route.id;if(oo(!qg(P),"Cannot handle redirect results in processLoaderData"),hc(P)){let $=P.error;if(M!==void 0&&($=M,M=void 0),y=y||{},d)y[F]=$;else{let Z=u1(e,F);y[Z.route.id]==null&&(y[Z.route.id]=$)}f[F]=void 0,E||(E=!0,a=zR(P.error)?P.error.status:500),P.headers&&(C[F]=P.headers)}else Gg(P)?(l.set(F,P.deferredData),f[F]=P.deferredData.data,P.statusCode!=null&&P.statusCode!==200&&!E&&(a=P.statusCode),P.headers&&(C[F]=P.headers)):(f[F]=P.data,P.statusCode&&P.statusCode!==200&&!E&&(a=P.statusCode),P.headers&&(C[F]=P.headers))}),M!==void 0&&r&&(y={[r[0]]:M},f[r[0]]=void 0),{loaderData:f,errors:y,statusCode:a||200,loaderHeaders:C}}function A6(e,t,n,r,l,d,f,y){let{loaderData:a,errors:E}=Mte(t,n,r,l,y,!1);for(let C=0;C<d.length;C++){let{key:M,match:P,controller:N}=d[C];oo(f!==void 0&&f[C]!==void 0,"Did not find corresponding fetcher result");let F=f[C];if(!(N&&N.signal.aborted))if(hc(F)){let $=u1(e.matches,P?.route.id);E&&E[$.route.id]||(E=Ti({},E,{[$.route.id]:F.error})),e.fetchers.delete(M)}else if(qg(F))oo(!1,"Unhandled fetcher revalidation redirect");else if(Gg(F))oo(!1,"Unhandled fetcher deferred data");else{let $=bp(F.data);e.fetchers.set(M,$)}}return{loaderData:a,errors:E}}function M6(e,t,n,r){let l=Ti({},t);for(let d of n){let f=d.route.id;if(t.hasOwnProperty(f)?t[f]!==void 0&&(l[f]=t[f]):e[f]!==void 0&&d.route.loader&&(l[f]=e[f]),r&&r.hasOwnProperty(f))break}return l}function D6(e){return e?hc(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function u1(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function R6(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function ac(e,t){let{pathname:n,routeId:r,method:l,type:d}=t===void 0?{}:t,f="Unknown Server Error",y="Unknown @remix-run/router error";return e===400?(f="Bad Request",l&&n&&r?y="You made a "+l+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":d==="defer-action"?y="defer() is not supported in actions":d==="invalid-body"&&(y="Unable to encode submission body")):e===403?(f="Forbidden",y='Route "'+r+'" does not match URL "'+n+'"'):e===404?(f="Not Found",y='No route matches URL "'+n+'"'):e===405&&(f="Method Not Allowed",l&&n&&r?y="You made a "+l.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":l&&(y='Invalid request method "'+l.toUpperCase()+'"')),new NR(e||500,f,new Error(y),!0)}function I6(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(qg(n))return{result:n,idx:t}}}function b9(e){let t=typeof e=="string"?of(e):e;return d0(Ti({},t,{hash:""}))}function Dte(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Rte(e){return v9(e.result)&&gte.has(e.result.status)}function Gg(e){return e.type===pi.deferred}function hc(e){return e.type===pi.error}function qg(e){return(e&&e.type)===pi.redirect}function Ite(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function v9(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function Pte(e){return mte.has(e.toLowerCase())}function hu(e){return fte.has(e.toLowerCase())}async function P6(e,t,n,r,l,d){for(let f=0;f<n.length;f++){let y=n[f],a=t[f];if(!a)continue;let E=e.find(M=>M.route.id===a.route.id),C=E!=null&&!y9(E,a)&&(d&&d[a.route.id])!==void 0;if(Gg(y)&&(l||C)){let M=r[f];oo(M,"Expected an AbortSignal for revalidating fetcher deferred result"),await _9(y,M,l).then(P=>{P&&(n[f]=P||n[f])})}}}async function _9(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:pi.data,data:e.deferredData.unwrappedData}}catch(l){return{type:pi.error,error:l}}return{type:pi.data,data:e.deferredData.data}}}function FR(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function MD(e,t){let n=typeof t=="string"?of(t).search:t.search;if(e[e.length-1].route.index&&FR(n||""))return e[e.length-1];let r=p9(e);return r[r.length-1]}function O6(e){let{formMethod:t,formAction:n,formEncType:r,text:l,formData:d,json:f}=e;if(!(!t||!n||!r)){if(l!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:l};if(d!=null)return{formMethod:t,formAction:n,formEncType:r,formData:d,json:void 0,text:void 0};if(f!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:f,text:void 0}}}function E3(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Ote(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function M_(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Lte(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function bp(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Nte(e,t){try{let n=e.sessionStorage.getItem(g9);if(n){let r=JSON.parse(n);for(let[l,d]of Object.entries(r||{}))d&&Array.isArray(d)&&t.set(l,new Set(d||[]))}}catch{}}function zte(e,t){if(t.size>0){let n={};for(let[r,l]of t)n[r]=[...l];try{e.sessionStorage.setItem(g9,JSON.stringify(n))}catch(r){zb(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function G1(){return G1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G1.apply(this,arguments)}const cC=j.createContext(null),x9=j.createContext(null),S0=j.createContext(null),uC=j.createContext(null),af=j.createContext({outlet:null,matches:[],isDataRoute:!1}),w9=j.createContext(null);function Bte(e,t){let{relative:n}=t===void 0?{}:t;Ex()||oo(!1);let{basename:r,navigator:l}=j.useContext(S0),{hash:d,pathname:f,search:y}=S9(e,{relative:n}),a=f;return r!=="/"&&(a=f==="/"?r:$h([r,f])),l.createHref({pathname:a,search:y,hash:d})}function Ex(){return j.useContext(uC)!=null}function Tx(){return Ex()||oo(!1),j.useContext(uC).location}function E9(e){j.useContext(S0).static||j.useLayoutEffect(e)}function Ac(){let{isDataRoute:e}=j.useContext(af);return e?Xte():Fte()}function Fte(){Ex()||oo(!1);let e=j.useContext(cC),{basename:t,future:n,navigator:r}=j.useContext(S0),{matches:l}=j.useContext(af),{pathname:d}=Tx(),f=JSON.stringify(OR(l,n.v7_relativeSplatPath)),y=j.useRef(!1);return E9(()=>{y.current=!0}),j.useCallback(function(E,C){if(C===void 0&&(C={}),!y.current)return;if(typeof E=="number"){r.go(E);return}let M=LR(E,JSON.parse(f),d,C.relative==="path");e==null&&t!=="/"&&(M.pathname=M.pathname==="/"?t:$h([t,M.pathname])),(C.replace?r.replace:r.push)(M,C.state,C)},[t,r,f,d,e])}const T9=j.createContext(null);function Eu(){return j.useContext(T9)}function jte(e){let t=j.useContext(af).outlet;return t&&j.createElement(T9.Provider,{value:e},t)}function cm(){let{matches:e}=j.useContext(af),t=e[e.length-1];return t?t.params:{}}function S9(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=j.useContext(S0),{matches:l}=j.useContext(af),{pathname:d}=Tx(),f=JSON.stringify(OR(l,r.v7_relativeSplatPath));return j.useMemo(()=>LR(e,JSON.parse(f),d,n==="path"),[e,f,d,n])}function $te(e,t,n,r){Ex()||oo(!1);let{navigator:l}=j.useContext(S0),{matches:d}=j.useContext(af),f=d[d.length-1],y=f?f.params:{};f&&f.pathname;let a=f?f.pathnameBase:"/";f&&f.route;let E=Tx(),C;if(t){var M;let Z=typeof t=="string"?of(t):t;a==="/"||(M=Z.pathname)!=null&&M.startsWith(a)||oo(!1),C=Z}else C=E;let P=C.pathname||"/",N=P;if(a!=="/"){let Z=a.replace(/^\//,"").split("/");N="/"+P.replace(/^\//,"").split("/").slice(Z.length).join("/")}let F=ob(e,{pathname:N}),$=Yte(F&&F.map(Z=>Object.assign({},Z,{params:Object.assign({},y,Z.params),pathname:$h([a,l.encodeLocation?l.encodeLocation(Z.pathname).pathname:Z.pathname]),pathnameBase:Z.pathnameBase==="/"?a:$h([a,l.encodeLocation?l.encodeLocation(Z.pathnameBase).pathname:Z.pathnameBase])})),d,n,r);return t&&$?j.createElement(uC.Provider,{value:{location:G1({pathname:"/",search:"",hash:"",state:null,key:"default"},C),navigationType:Gi.Pop}},$):$}function Ute(){let e=Kte(),t=zR(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),n?j.createElement("pre",{style:l},n):null,null)}const Vte=j.createElement(Ute,null);class Hte extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?j.createElement(af.Provider,{value:this.props.routeContext},j.createElement(w9.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Wte(e){let{routeContext:t,match:n,children:r}=e,l=j.useContext(cC);return l&&l.static&&l.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(af.Provider,{value:t},r)}function Yte(e,t,n,r){var l;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var d;if((d=n)!=null&&d.errors)e=n.matches;else return null}let f=e,y=(l=n)==null?void 0:l.errors;if(y!=null){let C=f.findIndex(M=>M.route.id&&y?.[M.route.id]!==void 0);C>=0||oo(!1),f=f.slice(0,Math.min(f.length,C+1))}let a=!1,E=-1;if(n&&r&&r.v7_partialHydration)for(let C=0;C<f.length;C++){let M=f[C];if((M.route.HydrateFallback||M.route.hydrateFallbackElement)&&(E=C),M.route.id){let{loaderData:P,errors:N}=n,F=M.route.loader&&P[M.route.id]===void 0&&(!N||N[M.route.id]===void 0);if(M.route.lazy||F){a=!0,E>=0?f=f.slice(0,E+1):f=[f[0]];break}}}return f.reduceRight((C,M,P)=>{let N,F=!1,$=null,Z=null;n&&(N=y&&M.route.id?y[M.route.id]:void 0,$=M.route.errorElement||Vte,a&&(E<0&&P===0?(Qte("route-fallback",!1),F=!0,Z=null):E===P&&(F=!0,Z=M.route.hydrateFallbackElement||null)));let q=t.concat(f.slice(0,P+1)),K=()=>{let Q;return N?Q=$:F?Q=Z:M.route.Component?Q=j.createElement(M.route.Component,null):M.route.element?Q=M.route.element:Q=C,j.createElement(Wte,{match:M,routeContext:{outlet:C,matches:q,isDataRoute:n!=null},children:Q})};return n&&(M.route.ErrorBoundary||M.route.errorElement||P===0)?j.createElement(Hte,{location:n.location,revalidation:n.revalidation,component:$,error:N,children:K(),routeContext:{outlet:null,matches:q,isDataRoute:!0}}):K()},null)}var C9=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(C9||{}),Bb=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Bb||{});function Gte(e){let t=j.useContext(cC);return t||oo(!1),t}function k9(e){let t=j.useContext(x9);return t||oo(!1),t}function qte(e){let t=j.useContext(af);return t||oo(!1),t}function jR(e){let t=qte(),n=t.matches[t.matches.length-1];return n.route.id||oo(!1),n.route.id}function Zte(){let e=k9(Bb.UseLoaderData),t=jR(Bb.UseLoaderData);if(e.errors&&e.errors[t]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+t+")");return}return e.loaderData[t]}function Kte(){var e;let t=j.useContext(w9),n=k9(Bb.UseRouteError),r=jR(Bb.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Xte(){let{router:e}=Gte(C9.UseNavigateStable),t=jR(Bb.UseNavigateStable),n=j.useRef(!1);return E9(()=>{n.current=!0}),j.useCallback(function(l,d){d===void 0&&(d={}),n.current&&(typeof l=="number"?e.navigate(l):e.navigate(l,G1({fromRouteId:t},d)))},[e,t])}const L6={};function Qte(e,t,n){!t&&!L6[e]&&(L6[e]=!0)}function Jte(e){return jte(e.context)}function ene(e){let{basename:t="/",children:n=null,location:r,navigationType:l=Gi.Pop,navigator:d,static:f=!1,future:y}=e;Ex()&&oo(!1);let a=t.replace(/^\/*/,"/"),E=j.useMemo(()=>({basename:a,navigator:d,static:f,future:G1({v7_relativeSplatPath:!1},y)}),[a,y,d,f]);typeof r=="string"&&(r=of(r));let{pathname:C="/",search:M="",hash:P="",state:N=null,key:F="default"}=r,$=j.useMemo(()=>{let Z=hv(C,a);return Z==null?null:{location:{pathname:Z,search:M,hash:P,state:N,key:F},navigationType:l}},[a,C,M,P,N,F,l]);return $==null?null:j.createElement(S0.Provider,{value:E},j.createElement(uC.Provider,{children:n,value:$}))}new Promise(()=>{});function tne(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:j.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:j.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:j.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function q1(){return q1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q1.apply(this,arguments)}function nne(e,t){if(e==null)return{};var n={},r=Object.keys(e),l,d;for(d=0;d<r.length;d++)l=r[d],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}function rne(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function one(e,t){return e.button===0&&(!t||t==="_self")&&!rne(e)}const ine=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],ane="6";try{window.__reactRouterVersion=ane}catch{}function sne(e,t){return _te({basename:t?.basename,future:q1({},t?.future,{v7_prependBasename:!0}),history:Vee({window:t?.window}),hydrationData:t?.hydrationData||lne(),routes:e,mapRouteProperties:tne,unstable_dataStrategy:t?.unstable_dataStrategy,window:t?.window}).initialize()}function lne(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=q1({},t,{errors:cne(t.errors)})),t}function cne(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,l]of t)if(l&&l.__type==="RouteErrorResponse")n[r]=new NR(l.status,l.statusText,l.data,l.internal===!0);else if(l&&l.__type==="Error"){if(l.__subType){let d=window[l.__subType];if(typeof d=="function")try{let f=new d(l.message);f.stack="",n[r]=f}catch{}}if(n[r]==null){let d=new Error(l.message);d.stack="",n[r]=d}}else n[r]=l;return n}const une=j.createContext({isTransitioning:!1}),dne=j.createContext(new Map),hne="startTransition",N6=A1[hne],fne="flushSync",z6=Uee[fne];function pne(e){N6?N6(e):e()}function D_(e){z6?z6(e):e()}class mne{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",t(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function gne(e){let{fallbackElement:t,router:n,future:r}=e,[l,d]=j.useState(n.state),[f,y]=j.useState(),[a,E]=j.useState({isTransitioning:!1}),[C,M]=j.useState(),[P,N]=j.useState(),[F,$]=j.useState(),Z=j.useRef(new Map),{v7_startTransition:q}=r||{},K=j.useCallback(re=>{q?pne(re):re()},[q]),Q=j.useCallback((re,me)=>{let{deletedFetchers:ve,unstable_flushSync:De,unstable_viewTransitionOpts:je}=me;ve.forEach(Ue=>Z.current.delete(Ue)),re.fetchers.forEach((Ue,Ge)=>{Ue.data!==void 0&&Z.current.set(Ge,Ue.data)});let Be=n.window==null||typeof n.window.document.startViewTransition!="function";if(!je||Be){De?D_(()=>d(re)):K(()=>d(re));return}if(De){D_(()=>{P&&(C&&C.resolve(),P.skipTransition()),E({isTransitioning:!0,flushSync:!0,currentLocation:je.currentLocation,nextLocation:je.nextLocation})});let Ue=n.window.document.startViewTransition(()=>{D_(()=>d(re))});Ue.finished.finally(()=>{D_(()=>{M(void 0),N(void 0),y(void 0),E({isTransitioning:!1})})}),D_(()=>N(Ue));return}P?(C&&C.resolve(),P.skipTransition(),$({state:re,currentLocation:je.currentLocation,nextLocation:je.nextLocation})):(y(re),E({isTransitioning:!0,flushSync:!1,currentLocation:je.currentLocation,nextLocation:je.nextLocation}))},[n.window,P,C,Z,K]);j.useLayoutEffect(()=>n.subscribe(Q),[n,Q]),j.useEffect(()=>{a.isTransitioning&&!a.flushSync&&M(new mne)},[a]),j.useEffect(()=>{if(C&&f&&n.window){let re=f,me=C.promise,ve=n.window.document.startViewTransition(async()=>{K(()=>d(re)),await me});ve.finished.finally(()=>{M(void 0),N(void 0),y(void 0),E({isTransitioning:!1})}),N(ve)}},[K,f,C,n.window]),j.useEffect(()=>{C&&f&&l.location.key===f.location.key&&C.resolve()},[C,P,l.location,f]),j.useEffect(()=>{!a.isTransitioning&&F&&(y(F.state),E({isTransitioning:!0,flushSync:!1,currentLocation:F.currentLocation,nextLocation:F.nextLocation}),$(void 0))},[a.isTransitioning,F]),j.useEffect(()=>{},[]);let te=j.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:re=>n.navigate(re),push:(re,me,ve)=>n.navigate(re,{state:me,preventScrollReset:ve?.preventScrollReset}),replace:(re,me,ve)=>n.navigate(re,{replace:!0,state:me,preventScrollReset:ve?.preventScrollReset})}),[n]),ie=n.basename||"/",ue=j.useMemo(()=>({router:n,navigator:te,static:!1,basename:ie}),[n,te,ie]);return j.createElement(j.Fragment,null,j.createElement(cC.Provider,{value:ue},j.createElement(x9.Provider,{value:l},j.createElement(dne.Provider,{value:Z.current},j.createElement(une.Provider,{value:a},j.createElement(ene,{basename:ie,location:l.location,navigationType:l.historyAction,navigator:te,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},l.initialized||n.future.v7_partialHydration?j.createElement(yne,{routes:n.routes,future:n.future,state:l}):t))))),null)}function yne(e){let{routes:t,future:n,state:r}=e;return $te(t,void 0,r,n)}const bne=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vne=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,va=j.forwardRef(function(t,n){let{onClick:r,relative:l,reloadDocument:d,replace:f,state:y,target:a,to:E,preventScrollReset:C,unstable_viewTransition:M}=t,P=nne(t,ine),{basename:N}=j.useContext(S0),F,$=!1;if(typeof E=="string"&&vne.test(E)&&(F=E,bne))try{let Q=new URL(window.location.href),te=E.startsWith("//")?new URL(Q.protocol+E):new URL(E),ie=hv(te.pathname,N);te.origin===Q.origin&&ie!=null?E=ie+te.search+te.hash:$=!0}catch{}let Z=Bte(E,{relative:l}),q=_ne(E,{replace:f,state:y,target:a,preventScrollReset:C,relative:l,unstable_viewTransition:M});function K(Q){r&&r(Q),Q.defaultPrevented||q(Q)}return j.createElement("a",q1({},P,{href:F||Z,onClick:$||d?r:K,ref:n,target:a}))});var B6;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(B6||(B6={}));var F6;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(F6||(F6={}));function _ne(e,t){let{target:n,replace:r,state:l,preventScrollReset:d,relative:f,unstable_viewTransition:y}=t===void 0?{}:t,a=Ac(),E=Tx(),C=S9(e,{relative:f});return j.useCallback(M=>{if(one(M,n)){M.preventDefault();let P=r!==void 0?r:d0(E)===d0(C);a(e,{replace:P,state:l,preventScrollReset:d,relative:f,unstable_viewTransition:y})}},[E,a,C,r,l,n,e,d,f,y])}var DD={},j6=lm;DD.createRoot=j6.createRoot,DD.hydrateRoot=j6.hydrateRoot;var A9={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var d="",f=0;f<arguments.length;f++){var y=arguments[f];y&&(d=l(d,r(y)))}return d}function r(d){if(typeof d=="string"||typeof d=="number")return d;if(typeof d!="object")return"";if(Array.isArray(d))return n.apply(null,d);if(d.toString!==Object.prototype.toString&&!d.toString.toString().includes("[native code]"))return d.toString();var f="";for(var y in d)t.call(d,y)&&d[y]&&(f=l(f,y));return f}function l(d,f){return f?d?d+" "+f:d+f:d}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(A9);var xne=A9.exports;const Hn=w0(xne),wne=["xxl","xl","lg","md","sm","xs"],Ene="xs",dC=j.createContext({prefixes:{},breakpoints:wne,minBreakpoint:Ene});function ur(e,t){const{prefixes:n}=j.useContext(dC);return e||n[t]||t}function M9(){const{breakpoints:e}=j.useContext(dC);return e}function D9(){const{minBreakpoint:e}=j.useContext(dC);return e}function $R(){const{dir:e}=j.useContext(dC);return e==="rtl"}const R9=j.forwardRef(({bsPrefix:e,fluid:t=!1,as:n="div",className:r,...l},d)=>{const f=ur(e,"container"),y=typeof t=="string"?`-${t}`:"-fluid";return O.jsx(n,{ref:d,...l,className:Hn(r,t?`${f}${y}`:f)})});R9.displayName="Container";const Zi=R9;var Tne=Function.prototype.bind.call(Function.prototype.call,[].slice);function Rh(e,t){return Tne(e.querySelectorAll(t))}const fv=!!(typeof window<"u"&&window.document&&window.document.createElement);var RD=!1,ID=!1;try{var T3={get passive(){return RD=!0},get once(){return ID=RD=!0}};fv&&(window.addEventListener("test",T3,T3),window.removeEventListener("test",T3,!0))}catch{}function UR(e,t,n,r){if(r&&typeof r!="boolean"&&!ID){var l=r.once,d=r.capture,f=n;!ID&&l&&(f=n.__once||function y(a){this.removeEventListener(t,y,d),n.call(this,a)},n.__once=f),e.addEventListener(t,f,RD?r:d)}e.addEventListener(t,n,r)}function Sne(e,t,n){const r=j.useRef(e!==void 0),[l,d]=j.useState(t),f=e!==void 0,y=r.current;return r.current=f,!f&&y&&l!==t&&d(t),[f?e:l,j.useCallback((...a)=>{const[E,...C]=a;let M=n?.(E,...C);return d(E),M},[n])]}function I9(e){const t=j.useRef(null);return j.useEffect(()=>{t.current=e}),t.current}function P9(){const[,e]=j.useReducer(t=>!t,!1);return e}function O9(e){const t=j.useRef(e);return j.useEffect(()=>{t.current=e},[e]),t}function ai(e){const t=O9(e);return j.useCallback(function(...n){return t.current&&t.current(...n)},[t])}function Cne(e,t,n,r=!1){const l=ai(n);j.useEffect(()=>{const d=typeof e=="function"?e():e;return d.addEventListener(t,l,r),()=>d.removeEventListener(t,l,r)},[e])}const kne=j.createContext(null),hC=kne;function L9(){return j.useState(null)}var $6=Object.prototype.hasOwnProperty;function U6(e,t,n){for(n of e.keys())if(d1(n,t))return n}function d1(e,t){var n,r,l;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&d1(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(l=r,l&&typeof l=="object"&&(l=U6(t,l),!l)||!t.has(l))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(l=r[0],l&&typeof l=="object"&&(l=U6(t,l),!l)||!d1(r[1],t.get(l)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if($6.call(e,n)&&++r&&!$6.call(t,n)||!(n in t)||!d1(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function VR(){const e=j.useRef(!0),t=j.useRef(()=>e.current);return j.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function Ane(e){const t=VR();return[e[0],j.useCallback(n=>{if(t())return e[1](n)},[t,e[1]])]}var Zs="top",wc="bottom",Ec="right",Ks="left",HR="auto",Sx=[Zs,wc,Ec,Ks],Fb="start",Z1="end",Mne="clippingParents",N9="viewport",R_="popper",Dne="reference",V6=Sx.reduce(function(e,t){return e.concat([t+"-"+Fb,t+"-"+Z1])},[]),z9=[].concat(Sx,[HR]).reduce(function(e,t){return e.concat([t,t+"-"+Fb,t+"-"+Z1])},[]),Rne="beforeRead",Ine="read",Pne="afterRead",One="beforeMain",Lne="main",Nne="afterMain",zne="beforeWrite",Bne="write",Fne="afterWrite",jne=[Rne,Ine,Pne,One,Lne,Nne,zne,Bne,Fne];function bd(e){return e.split("-")[0]}function Ll(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function h0(e){var t=Ll(e).Element;return e instanceof t||e instanceof Element}function bc(e){var t=Ll(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function WR(e){if(typeof ShadowRoot>"u")return!1;var t=Ll(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var t0=Math.max,qT=Math.min,jb=Math.round;function PD(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function B9(){return!/^((?!chrome|android).)*safari/i.test(PD())}function $b(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),l=1,d=1;t&&bc(e)&&(l=e.offsetWidth>0&&jb(r.width)/e.offsetWidth||1,d=e.offsetHeight>0&&jb(r.height)/e.offsetHeight||1);var f=h0(e)?Ll(e):window,y=f.visualViewport,a=!B9()&&n,E=(r.left+(a&&y?y.offsetLeft:0))/l,C=(r.top+(a&&y?y.offsetTop:0))/d,M=r.width/l,P=r.height/d;return{width:M,height:P,top:C,right:E+M,bottom:C+P,left:E,x:E,y:C}}function YR(e){var t=$b(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function F9(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&WR(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Ed(e){return e?(e.nodeName||"").toLowerCase():null}function Jh(e){return Ll(e).getComputedStyle(e)}function $ne(e){return["table","td","th"].indexOf(Ed(e))>=0}function um(e){return((h0(e)?e.ownerDocument:e.document)||window.document).documentElement}function fC(e){return Ed(e)==="html"?e:e.assignedSlot||e.parentNode||(WR(e)?e.host:null)||um(e)}function H6(e){return!bc(e)||Jh(e).position==="fixed"?null:e.offsetParent}function Une(e){var t=/firefox/i.test(PD()),n=/Trident/i.test(PD());if(n&&bc(e)){var r=Jh(e);if(r.position==="fixed")return null}var l=fC(e);for(WR(l)&&(l=l.host);bc(l)&&["html","body"].indexOf(Ed(l))<0;){var d=Jh(l);if(d.transform!=="none"||d.perspective!=="none"||d.contain==="paint"||["transform","perspective"].indexOf(d.willChange)!==-1||t&&d.willChange==="filter"||t&&d.filter&&d.filter!=="none")return l;l=l.parentNode}return null}function Cx(e){for(var t=Ll(e),n=H6(e);n&&$ne(n)&&Jh(n).position==="static";)n=H6(n);return n&&(Ed(n)==="html"||Ed(n)==="body"&&Jh(n).position==="static")?t:n||Une(e)||t}function GR(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function h1(e,t,n){return t0(e,qT(t,n))}function Vne(e,t,n){var r=h1(e,t,n);return r>n?n:r}function j9(){return{top:0,right:0,bottom:0,left:0}}function $9(e){return Object.assign({},j9(),e)}function U9(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var Hne=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,$9(typeof t!="number"?t:U9(t,Sx))};function Wne(e){var t,n=e.state,r=e.name,l=e.options,d=n.elements.arrow,f=n.modifiersData.popperOffsets,y=bd(n.placement),a=GR(y),E=[Ks,Ec].indexOf(y)>=0,C=E?"height":"width";if(!(!d||!f)){var M=Hne(l.padding,n),P=YR(d),N=a==="y"?Zs:Ks,F=a==="y"?wc:Ec,$=n.rects.reference[C]+n.rects.reference[a]-f[a]-n.rects.popper[C],Z=f[a]-n.rects.reference[a],q=Cx(d),K=q?a==="y"?q.clientHeight||0:q.clientWidth||0:0,Q=$/2-Z/2,te=M[N],ie=K-P[C]-M[F],ue=K/2-P[C]/2+Q,re=h1(te,ue,ie),me=a;n.modifiersData[r]=(t={},t[me]=re,t.centerOffset=re-ue,t)}}function Yne(e){var t=e.state,n=e.options,r=n.element,l=r===void 0?"[data-popper-arrow]":r;l!=null&&(typeof l=="string"&&(l=t.elements.popper.querySelector(l),!l)||F9(t.elements.popper,l)&&(t.elements.arrow=l))}const V9={name:"arrow",enabled:!0,phase:"main",fn:Wne,effect:Yne,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ub(e){return e.split("-")[1]}var Gne={top:"auto",right:"auto",bottom:"auto",left:"auto"};function qne(e,t){var n=e.x,r=e.y,l=t.devicePixelRatio||1;return{x:jb(n*l)/l||0,y:jb(r*l)/l||0}}function W6(e){var t,n=e.popper,r=e.popperRect,l=e.placement,d=e.variation,f=e.offsets,y=e.position,a=e.gpuAcceleration,E=e.adaptive,C=e.roundOffsets,M=e.isFixed,P=f.x,N=P===void 0?0:P,F=f.y,$=F===void 0?0:F,Z=typeof C=="function"?C({x:N,y:$}):{x:N,y:$};N=Z.x,$=Z.y;var q=f.hasOwnProperty("x"),K=f.hasOwnProperty("y"),Q=Ks,te=Zs,ie=window;if(E){var ue=Cx(n),re="clientHeight",me="clientWidth";if(ue===Ll(n)&&(ue=um(n),Jh(ue).position!=="static"&&y==="absolute"&&(re="scrollHeight",me="scrollWidth")),ue=ue,l===Zs||(l===Ks||l===Ec)&&d===Z1){te=wc;var ve=M&&ue===ie&&ie.visualViewport?ie.visualViewport.height:ue[re];$-=ve-r.height,$*=a?1:-1}if(l===Ks||(l===Zs||l===wc)&&d===Z1){Q=Ec;var De=M&&ue===ie&&ie.visualViewport?ie.visualViewport.width:ue[me];N-=De-r.width,N*=a?1:-1}}var je=Object.assign({position:y},E&&Gne),Be=C===!0?qne({x:N,y:$},Ll(n)):{x:N,y:$};if(N=Be.x,$=Be.y,a){var Ue;return Object.assign({},je,(Ue={},Ue[te]=K?"0":"",Ue[Q]=q?"0":"",Ue.transform=(ie.devicePixelRatio||1)<=1?"translate("+N+"px, "+$+"px)":"translate3d("+N+"px, "+$+"px, 0)",Ue))}return Object.assign({},je,(t={},t[te]=K?$+"px":"",t[Q]=q?N+"px":"",t.transform="",t))}function Zne(e){var t=e.state,n=e.options,r=n.gpuAcceleration,l=r===void 0?!0:r,d=n.adaptive,f=d===void 0?!0:d,y=n.roundOffsets,a=y===void 0?!0:y,E={placement:bd(t.placement),variation:Ub(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:l,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,W6(Object.assign({},E,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:f,roundOffsets:a})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,W6(Object.assign({},E,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const H9={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Zne,data:{}};var dE={passive:!0};function Kne(e){var t=e.state,n=e.instance,r=e.options,l=r.scroll,d=l===void 0?!0:l,f=r.resize,y=f===void 0?!0:f,a=Ll(t.elements.popper),E=[].concat(t.scrollParents.reference,t.scrollParents.popper);return d&&E.forEach(function(C){C.addEventListener("scroll",n.update,dE)}),y&&a.addEventListener("resize",n.update,dE),function(){d&&E.forEach(function(C){C.removeEventListener("scroll",n.update,dE)}),y&&a.removeEventListener("resize",n.update,dE)}}const W9={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Kne,data:{}};var Xne={left:"right",right:"left",bottom:"top",top:"bottom"};function oT(e){return e.replace(/left|right|bottom|top/g,function(t){return Xne[t]})}var Qne={start:"end",end:"start"};function Y6(e){return e.replace(/start|end/g,function(t){return Qne[t]})}function qR(e){var t=Ll(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function ZR(e){return $b(um(e)).left+qR(e).scrollLeft}function Jne(e,t){var n=Ll(e),r=um(e),l=n.visualViewport,d=r.clientWidth,f=r.clientHeight,y=0,a=0;if(l){d=l.width,f=l.height;var E=B9();(E||!E&&t==="fixed")&&(y=l.offsetLeft,a=l.offsetTop)}return{width:d,height:f,x:y+ZR(e),y:a}}function ere(e){var t,n=um(e),r=qR(e),l=(t=e.ownerDocument)==null?void 0:t.body,d=t0(n.scrollWidth,n.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),f=t0(n.scrollHeight,n.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),y=-r.scrollLeft+ZR(e),a=-r.scrollTop;return Jh(l||n).direction==="rtl"&&(y+=t0(n.clientWidth,l?l.clientWidth:0)-d),{width:d,height:f,x:y,y:a}}function KR(e){var t=Jh(e),n=t.overflow,r=t.overflowX,l=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+l+r)}function Y9(e){return["html","body","#document"].indexOf(Ed(e))>=0?e.ownerDocument.body:bc(e)&&KR(e)?e:Y9(fC(e))}function f1(e,t){var n;t===void 0&&(t=[]);var r=Y9(e),l=r===((n=e.ownerDocument)==null?void 0:n.body),d=Ll(r),f=l?[d].concat(d.visualViewport||[],KR(r)?r:[]):r,y=t.concat(f);return l?y:y.concat(f1(fC(f)))}function OD(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function tre(e,t){var n=$b(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function G6(e,t,n){return t===N9?OD(Jne(e,n)):h0(t)?tre(t,n):OD(ere(um(e)))}function nre(e){var t=f1(fC(e)),n=["absolute","fixed"].indexOf(Jh(e).position)>=0,r=n&&bc(e)?Cx(e):e;return h0(r)?t.filter(function(l){return h0(l)&&F9(l,r)&&Ed(l)!=="body"}):[]}function rre(e,t,n,r){var l=t==="clippingParents"?nre(e):[].concat(t),d=[].concat(l,[n]),f=d[0],y=d.reduce(function(a,E){var C=G6(e,E,r);return a.top=t0(C.top,a.top),a.right=qT(C.right,a.right),a.bottom=qT(C.bottom,a.bottom),a.left=t0(C.left,a.left),a},G6(e,f,r));return y.width=y.right-y.left,y.height=y.bottom-y.top,y.x=y.left,y.y=y.top,y}function G9(e){var t=e.reference,n=e.element,r=e.placement,l=r?bd(r):null,d=r?Ub(r):null,f=t.x+t.width/2-n.width/2,y=t.y+t.height/2-n.height/2,a;switch(l){case Zs:a={x:f,y:t.y-n.height};break;case wc:a={x:f,y:t.y+t.height};break;case Ec:a={x:t.x+t.width,y};break;case Ks:a={x:t.x-n.width,y};break;default:a={x:t.x,y:t.y}}var E=l?GR(l):null;if(E!=null){var C=E==="y"?"height":"width";switch(d){case Fb:a[E]=a[E]-(t[C]/2-n[C]/2);break;case Z1:a[E]=a[E]+(t[C]/2-n[C]/2);break}}return a}function K1(e,t){t===void 0&&(t={});var n=t,r=n.placement,l=r===void 0?e.placement:r,d=n.strategy,f=d===void 0?e.strategy:d,y=n.boundary,a=y===void 0?Mne:y,E=n.rootBoundary,C=E===void 0?N9:E,M=n.elementContext,P=M===void 0?R_:M,N=n.altBoundary,F=N===void 0?!1:N,$=n.padding,Z=$===void 0?0:$,q=$9(typeof Z!="number"?Z:U9(Z,Sx)),K=P===R_?Dne:R_,Q=e.rects.popper,te=e.elements[F?K:P],ie=rre(h0(te)?te:te.contextElement||um(e.elements.popper),a,C,f),ue=$b(e.elements.reference),re=G9({reference:ue,element:Q,strategy:"absolute",placement:l}),me=OD(Object.assign({},Q,re)),ve=P===R_?me:ue,De={top:ie.top-ve.top+q.top,bottom:ve.bottom-ie.bottom+q.bottom,left:ie.left-ve.left+q.left,right:ve.right-ie.right+q.right},je=e.modifiersData.offset;if(P===R_&&je){var Be=je[l];Object.keys(De).forEach(function(Ue){var Ge=[Ec,wc].indexOf(Ue)>=0?1:-1,ze=[Zs,wc].indexOf(Ue)>=0?"y":"x";De[Ue]+=Be[ze]*Ge})}return De}function ore(e,t){t===void 0&&(t={});var n=t,r=n.placement,l=n.boundary,d=n.rootBoundary,f=n.padding,y=n.flipVariations,a=n.allowedAutoPlacements,E=a===void 0?z9:a,C=Ub(r),M=C?y?V6:V6.filter(function(F){return Ub(F)===C}):Sx,P=M.filter(function(F){return E.indexOf(F)>=0});P.length===0&&(P=M);var N=P.reduce(function(F,$){return F[$]=K1(e,{placement:$,boundary:l,rootBoundary:d,padding:f})[bd($)],F},{});return Object.keys(N).sort(function(F,$){return N[F]-N[$]})}function ire(e){if(bd(e)===HR)return[];var t=oT(e);return[Y6(e),t,Y6(t)]}function are(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var l=n.mainAxis,d=l===void 0?!0:l,f=n.altAxis,y=f===void 0?!0:f,a=n.fallbackPlacements,E=n.padding,C=n.boundary,M=n.rootBoundary,P=n.altBoundary,N=n.flipVariations,F=N===void 0?!0:N,$=n.allowedAutoPlacements,Z=t.options.placement,q=bd(Z),K=q===Z,Q=a||(K||!F?[oT(Z)]:ire(Z)),te=[Z].concat(Q).reduce(function(Dt,cn){return Dt.concat(bd(cn)===HR?ore(t,{placement:cn,boundary:C,rootBoundary:M,padding:E,flipVariations:F,allowedAutoPlacements:$}):cn)},[]),ie=t.rects.reference,ue=t.rects.popper,re=new Map,me=!0,ve=te[0],De=0;De<te.length;De++){var je=te[De],Be=bd(je),Ue=Ub(je)===Fb,Ge=[Zs,wc].indexOf(Be)>=0,ze=Ge?"width":"height",ot=K1(t,{placement:je,boundary:C,rootBoundary:M,altBoundary:P,padding:E}),st=Ge?Ue?Ec:Ks:Ue?wc:Zs;ie[ze]>ue[ze]&&(st=oT(st));var Re=oT(st),bt=[];if(d&&bt.push(ot[Be]<=0),y&&bt.push(ot[st]<=0,ot[Re]<=0),bt.every(function(Dt){return Dt})){ve=je,me=!1;break}re.set(je,bt)}if(me)for(var Lt=F?3:1,Ct=function(cn){var Mt=te.find(function(Vn){var nt=re.get(Vn);if(nt)return nt.slice(0,cn).every(function(Pn){return Pn})});if(Mt)return ve=Mt,"break"},Nt=Lt;Nt>0;Nt--){var tn=Ct(Nt);if(tn==="break")break}t.placement!==ve&&(t.modifiersData[r]._skip=!0,t.placement=ve,t.reset=!0)}}const q9={name:"flip",enabled:!0,phase:"main",fn:are,requiresIfExists:["offset"],data:{_skip:!1}};function q6(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Z6(e){return[Zs,Ec,wc,Ks].some(function(t){return e[t]>=0})}function sre(e){var t=e.state,n=e.name,r=t.rects.reference,l=t.rects.popper,d=t.modifiersData.preventOverflow,f=K1(t,{elementContext:"reference"}),y=K1(t,{altBoundary:!0}),a=q6(f,r),E=q6(y,l,d),C=Z6(a),M=Z6(E);t.modifiersData[n]={referenceClippingOffsets:a,popperEscapeOffsets:E,isReferenceHidden:C,hasPopperEscaped:M},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":C,"data-popper-escaped":M})}const Z9={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:sre};function lre(e,t,n){var r=bd(e),l=[Ks,Zs].indexOf(r)>=0?-1:1,d=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,f=d[0],y=d[1];return f=f||0,y=(y||0)*l,[Ks,Ec].indexOf(r)>=0?{x:y,y:f}:{x:f,y}}function cre(e){var t=e.state,n=e.options,r=e.name,l=n.offset,d=l===void 0?[0,0]:l,f=z9.reduce(function(C,M){return C[M]=lre(M,t.rects,d),C},{}),y=f[t.placement],a=y.x,E=y.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=a,t.modifiersData.popperOffsets.y+=E),t.modifiersData[r]=f}const K9={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:cre};function ure(e){var t=e.state,n=e.name;t.modifiersData[n]=G9({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const X9={name:"popperOffsets",enabled:!0,phase:"read",fn:ure,data:{}};function dre(e){return e==="x"?"y":"x"}function hre(e){var t=e.state,n=e.options,r=e.name,l=n.mainAxis,d=l===void 0?!0:l,f=n.altAxis,y=f===void 0?!1:f,a=n.boundary,E=n.rootBoundary,C=n.altBoundary,M=n.padding,P=n.tether,N=P===void 0?!0:P,F=n.tetherOffset,$=F===void 0?0:F,Z=K1(t,{boundary:a,rootBoundary:E,padding:M,altBoundary:C}),q=bd(t.placement),K=Ub(t.placement),Q=!K,te=GR(q),ie=dre(te),ue=t.modifiersData.popperOffsets,re=t.rects.reference,me=t.rects.popper,ve=typeof $=="function"?$(Object.assign({},t.rects,{placement:t.placement})):$,De=typeof ve=="number"?{mainAxis:ve,altAxis:ve}:Object.assign({mainAxis:0,altAxis:0},ve),je=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Be={x:0,y:0};if(ue){if(d){var Ue,Ge=te==="y"?Zs:Ks,ze=te==="y"?wc:Ec,ot=te==="y"?"height":"width",st=ue[te],Re=st+Z[Ge],bt=st-Z[ze],Lt=N?-me[ot]/2:0,Ct=K===Fb?re[ot]:me[ot],Nt=K===Fb?-me[ot]:-re[ot],tn=t.elements.arrow,Dt=N&&tn?YR(tn):{width:0,height:0},cn=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:j9(),Mt=cn[Ge],Vn=cn[ze],nt=h1(0,re[ot],Dt[ot]),Pn=Q?re[ot]/2-Lt-nt-Mt-De.mainAxis:Ct-nt-Mt-De.mainAxis,Un=Q?-re[ot]/2+Lt+nt+Vn+De.mainAxis:Nt+nt+Vn+De.mainAxis,En=t.elements.arrow&&Cx(t.elements.arrow),bn=En?te==="y"?En.clientTop||0:En.clientLeft||0:0,Fn=(Ue=je?.[te])!=null?Ue:0,On=st+Pn-Fn-bn,an=st+Un-Fn,qr=h1(N?qT(Re,On):Re,st,N?t0(bt,an):bt);ue[te]=qr,Be[te]=qr-st}if(y){var hn,Wr=te==="x"?Zs:Ks,go=te==="x"?wc:Ec,pr=ue[ie],Pr=ie==="y"?"height":"width",to=pr+Z[Wr],Mr=pr-Z[go],mr=[Zs,Ks].indexOf(q)!==-1,eo=(hn=je?.[ie])!=null?hn:0,Ke=mr?to:pr-re[Pr]-me[Pr]-eo+De.altAxis,pe=mr?pr+re[Pr]+me[Pr]-eo-De.altAxis:Mr,we=N&&mr?Vne(Ke,pr,pe):h1(N?Ke:to,pr,N?pe:Mr);ue[ie]=we,Be[ie]=we-pr}t.modifiersData[r]=Be}}const Q9={name:"preventOverflow",enabled:!0,phase:"main",fn:hre,requiresIfExists:["offset"]};function fre(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function pre(e){return e===Ll(e)||!bc(e)?qR(e):fre(e)}function mre(e){var t=e.getBoundingClientRect(),n=jb(t.width)/e.offsetWidth||1,r=jb(t.height)/e.offsetHeight||1;return n!==1||r!==1}function gre(e,t,n){n===void 0&&(n=!1);var r=bc(t),l=bc(t)&&mre(t),d=um(t),f=$b(e,l,n),y={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(r||!r&&!n)&&((Ed(t)!=="body"||KR(d))&&(y=pre(t)),bc(t)?(a=$b(t,!0),a.x+=t.clientLeft,a.y+=t.clientTop):d&&(a.x=ZR(d))),{x:f.left+y.scrollLeft-a.x,y:f.top+y.scrollTop-a.y,width:f.width,height:f.height}}function yre(e){var t=new Map,n=new Set,r=[];e.forEach(function(d){t.set(d.name,d)});function l(d){n.add(d.name);var f=[].concat(d.requires||[],d.requiresIfExists||[]);f.forEach(function(y){if(!n.has(y)){var a=t.get(y);a&&l(a)}}),r.push(d)}return e.forEach(function(d){n.has(d.name)||l(d)}),r}function bre(e){var t=yre(e);return jne.reduce(function(n,r){return n.concat(t.filter(function(l){return l.phase===r}))},[])}function vre(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function _re(e){var t=e.reduce(function(n,r){var l=n[r.name];return n[r.name]=l?Object.assign({},l,r,{options:Object.assign({},l.options,r.options),data:Object.assign({},l.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var K6={placement:"bottom",modifiers:[],strategy:"absolute"};function X6(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function J9(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,l=t.defaultOptions,d=l===void 0?K6:l;return function(y,a,E){E===void 0&&(E=d);var C={placement:"bottom",orderedModifiers:[],options:Object.assign({},K6,d),modifiersData:{},elements:{reference:y,popper:a},attributes:{},styles:{}},M=[],P=!1,N={state:C,setOptions:function(q){var K=typeof q=="function"?q(C.options):q;$(),C.options=Object.assign({},d,C.options,K),C.scrollParents={reference:h0(y)?f1(y):y.contextElement?f1(y.contextElement):[],popper:f1(a)};var Q=bre(_re([].concat(r,C.options.modifiers)));return C.orderedModifiers=Q.filter(function(te){return te.enabled}),F(),N.update()},forceUpdate:function(){if(!P){var q=C.elements,K=q.reference,Q=q.popper;if(X6(K,Q)){C.rects={reference:gre(K,Cx(Q),C.options.strategy==="fixed"),popper:YR(Q)},C.reset=!1,C.placement=C.options.placement,C.orderedModifiers.forEach(function(De){return C.modifiersData[De.name]=Object.assign({},De.data)});for(var te=0;te<C.orderedModifiers.length;te++){if(C.reset===!0){C.reset=!1,te=-1;continue}var ie=C.orderedModifiers[te],ue=ie.fn,re=ie.options,me=re===void 0?{}:re,ve=ie.name;typeof ue=="function"&&(C=ue({state:C,options:me,name:ve,instance:N})||C)}}}},update:vre(function(){return new Promise(function(Z){N.forceUpdate(),Z(C)})}),destroy:function(){$(),P=!0}};if(!X6(y,a))return N;N.setOptions(E).then(function(Z){!P&&E.onFirstUpdate&&E.onFirstUpdate(Z)});function F(){C.orderedModifiers.forEach(function(Z){var q=Z.name,K=Z.options,Q=K===void 0?{}:K,te=Z.effect;if(typeof te=="function"){var ie=te({state:C,name:q,instance:N,options:Q}),ue=function(){};M.push(ie||ue)}})}function $(){M.forEach(function(Z){return Z()}),M=[]}return N}}const xre=J9({defaultModifiers:[Z9,X9,H9,W9,K9,q9,Q9,V9]}),wre=["enabled","placement","strategy","modifiers"];function Ere(e,t){if(e==null)return{};var n={},r=Object.keys(e),l,d;for(d=0;d<r.length;d++)l=r[d],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}const Tre={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},Sre={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:e})=>()=>{const{reference:t,popper:n}=e.elements;if("removeAttribute"in t){const r=(t.getAttribute("aria-describedby")||"").split(",").filter(l=>l.trim()!==n.id);r.length?t.setAttribute("aria-describedby",r.join(",")):t.removeAttribute("aria-describedby")}},fn:({state:e})=>{var t;const{popper:n,reference:r}=e.elements,l=(t=n.getAttribute("role"))==null?void 0:t.toLowerCase();if(n.id&&l==="tooltip"&&"setAttribute"in r){const d=r.getAttribute("aria-describedby");if(d&&d.split(",").indexOf(n.id)!==-1)return;r.setAttribute("aria-describedby",d?`${d},${n.id}`:n.id)}}},Cre=[];function kre(e,t,n={}){let{enabled:r=!0,placement:l="bottom",strategy:d="absolute",modifiers:f=Cre}=n,y=Ere(n,wre);const a=j.useRef(f),E=j.useRef(),C=j.useCallback(()=>{var Z;(Z=E.current)==null||Z.update()},[]),M=j.useCallback(()=>{var Z;(Z=E.current)==null||Z.forceUpdate()},[]),[P,N]=Ane(j.useState({placement:l,update:C,forceUpdate:M,attributes:{},styles:{popper:{},arrow:{}}})),F=j.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:Z})=>{const q={},K={};Object.keys(Z.elements).forEach(Q=>{q[Q]=Z.styles[Q],K[Q]=Z.attributes[Q]}),N({state:Z,styles:q,attributes:K,update:C,forceUpdate:M,placement:Z.placement})}}),[C,M,N]),$=j.useMemo(()=>(d1(a.current,f)||(a.current=f),a.current),[f]);return j.useEffect(()=>{!E.current||!r||E.current.setOptions({placement:l,strategy:d,modifiers:[...$,F,Tre]})},[d,l,F,r,$]),j.useEffect(()=>{if(!(!r||e==null||t==null))return E.current=xre(e,t,Object.assign({},y,{placement:l,strategy:d,modifiers:[...$,Sre,F]})),()=>{E.current!=null&&(E.current.destroy(),E.current=void 0,N(Z=>Object.assign({},Z,{attributes:{},styles:{popper:{}}})))}},[r,e,t]),P}function ZT(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}function LD(e,t,n,r){var l=r&&typeof r!="boolean"?r.capture:r;e.removeEventListener(t,n,l),n.__once&&e.removeEventListener(t,n.__once,l)}function Ap(e,t,n,r){return UR(e,t,n,r),function(){LD(e,t,n,r)}}function kx(e){return e&&e.ownerDocument||document}var Are=function(){},Mre=Are;const Dre=w0(Mre),Q6=()=>{};function Rre(e){return e.button===0}function Ire(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const S3=e=>e&&("current"in e?e.current:e),J6={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function Pre(e,t=Q6,{disabled:n,clickTrigger:r="click"}={}){const l=j.useRef(!1),d=j.useRef(!1),f=j.useCallback(E=>{const C=S3(e);Dre(!!C,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),l.current=!C||Ire(E)||!Rre(E)||!!ZT(C,E.target)||d.current,d.current=!1},[e]),y=ai(E=>{const C=S3(e);C&&ZT(C,E.target)&&(d.current=!0)}),a=ai(E=>{l.current||t(E)});j.useEffect(()=>{var E,C;if(n||e==null)return;const M=kx(S3(e)),P=M.defaultView||window;let N=(E=P.event)!=null?E:(C=P.parent)==null?void 0:C.event,F=null;J6[r]&&(F=Ap(M,J6[r],y,!0));const $=Ap(M,r,f,!0),Z=Ap(M,r,K=>{if(K===N){N=void 0;return}a(K)});let q=[];return"ontouchstart"in M.documentElement&&(q=[].slice.call(M.body.children).map(K=>Ap(K,"mousemove",Q6))),()=>{F?.(),$(),Z(),q.forEach(K=>K())}},[e,n,r,f,y,a])}function Ore(e){const t={};return Array.isArray(e)?(e?.forEach(n=>{t[n.name]=n}),t):e||t}function Lre(e={}){return Array.isArray(e)?e:Object.keys(e).map(t=>(e[t].name=t,e[t]))}function Nre({enabled:e,enableEvents:t,placement:n,flip:r,offset:l,fixed:d,containerPadding:f,arrowElement:y,popperConfig:a={}}){var E,C,M,P,N;const F=Ore(a.modifiers);return Object.assign({},a,{placement:n,enabled:e,strategy:d?"fixed":a.strategy,modifiers:Lre(Object.assign({},F,{eventListeners:{enabled:t,options:(E=F.eventListeners)==null?void 0:E.options},preventOverflow:Object.assign({},F.preventOverflow,{options:f?Object.assign({padding:f},(C=F.preventOverflow)==null?void 0:C.options):(M=F.preventOverflow)==null?void 0:M.options}),offset:{options:Object.assign({offset:l},(P=F.offset)==null?void 0:P.options)},arrow:Object.assign({},F.arrow,{enabled:!!y,options:Object.assign({},(N=F.arrow)==null?void 0:N.options,{element:y})}),flip:Object.assign({enabled:!!r},F.flip)}))})}const zre=["children"];function Bre(e,t){if(e==null)return{};var n={},r=Object.keys(e),l,d;for(d=0;d<r.length;d++)l=r[d],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}const Fre=()=>{};function e$(e={}){const t=j.useContext(hC),[n,r]=L9(),l=j.useRef(!1),{flip:d,offset:f,rootCloseEvent:y,fixed:a=!1,placement:E,popperConfig:C={},enableEventListeners:M=!0,usePopper:P=!!t}=e,N=t?.show==null?!!e.show:t.show;N&&!l.current&&(l.current=!0);const F=ue=>{t?.toggle(!1,ue)},{placement:$,setMenu:Z,menuElement:q,toggleElement:K}=t||{},Q=kre(K,q,Nre({placement:E||$||"bottom-start",enabled:P,enableEvents:M??N,offset:f,flip:d,fixed:a,arrowElement:n,popperConfig:C})),te=Object.assign({ref:Z||Fre,"aria-labelledby":K?.id},Q.attributes.popper,{style:Q.styles.popper}),ie={show:N,placement:$,hasShown:l.current,toggle:t?.toggle,popper:P?Q:null,arrowProps:P?Object.assign({ref:r},Q.attributes.arrow,{style:Q.styles.arrow}):{}};return Pre(q,F,{clickTrigger:y,disabled:!N}),[te,ie]}const jre={usePopper:!0};function XR(e){let{children:t}=e,n=Bre(e,zre);const[r,l]=e$(n);return O.jsx(O.Fragment,{children:t(r,l)})}XR.displayName="DropdownMenu";XR.defaultProps=jre;const KT={prefix:String(Math.round(Math.random()*1e10)),current:0},t$=dt.createContext(KT),$re=dt.createContext(!1);let Ure=!!(typeof window<"u"&&window.document&&window.document.createElement),C3=new WeakMap;function Vre(e=!1){let t=j.useContext(t$),n=j.useRef(null);if(n.current===null&&!e){var r,l;let d=(l=dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||l===void 0||(r=l.ReactCurrentOwner)===null||r===void 0?void 0:r.current;if(d){let f=C3.get(d);f==null?C3.set(d,{id:t.current,state:d.memoizedState}):d.memoizedState!==f.state&&(t.current=f.id,C3.delete(d))}n.current=++t.current}return n.current}function Hre(e){let t=j.useContext(t$);t===KT&&!Ure&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=Vre(!!e),r=`react-aria${t.prefix}`;return e||`${r}-${n}`}function Wre(e){let t=dt.useId(),[n]=j.useState(Kre()),r=n?"react-aria":`react-aria${KT.prefix}`;return e||`${r}-${t}`}const Yre=typeof dt.useId=="function"?Wre:Hre;function Gre(){return!1}function qre(){return!0}function Zre(e){return()=>{}}function Kre(){return typeof dt.useSyncExternalStore=="function"?dt.useSyncExternalStore(Zre,Gre,qre):j.useContext($re)}const n$=e=>{var t;return((t=e.getAttribute("role"))==null?void 0:t.toLowerCase())==="menu"},e2=()=>{};function r$(){const e=Yre(),{show:t=!1,toggle:n=e2,setToggle:r,menuElement:l}=j.useContext(hC)||{},d=j.useCallback(y=>{n(!t,y)},[t,n]),f={id:e,ref:r||e2,onClick:d,"aria-expanded":!!t};return l&&n$(l)&&(f["aria-haspopup"]=!0),[f,{show:t,toggle:n}]}function o$({children:e}){const[t,n]=r$();return O.jsx(O.Fragment,{children:e(t,n)})}o$.displayName="DropdownToggle";const Xre=j.createContext(null),Vb=(e,t=null)=>e!=null?String(e):t||null,f0=Xre,i$=j.createContext(null);i$.displayName="NavContext";const QR=i$,Qre=["as","disabled"];function Jre(e,t){if(e==null)return{};var n={},r=Object.keys(e),l,d;for(d=0;d<r.length;d++)l=r[d],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}function eoe(e){return!e||e.trim()==="#"}function JR({tagName:e,disabled:t,href:n,target:r,rel:l,role:d,onClick:f,tabIndex:y=0,type:a}){e||(n!=null||r!=null||l!=null?e="a":e="button");const E={tagName:e};if(e==="button")return[{type:a||"button",disabled:t},E];const C=P=>{if((t||e==="a"&&eoe(n))&&P.preventDefault(),t){P.stopPropagation();return}f?.(P)},M=P=>{P.key===" "&&(P.preventDefault(),C(P))};return e==="a"&&(n||(n="#"),t&&(n=void 0)),[{role:d??"button",disabled:void 0,tabIndex:t?void 0:y,href:n,target:e==="a"?r:void 0,"aria-disabled":t||void 0,rel:e==="a"?l:void 0,onClick:C,onKeyDown:M},E]}const eI=j.forwardRef((e,t)=>{let{as:n,disabled:r}=e,l=Jre(e,Qre);const[d,{tagName:f}]=JR(Object.assign({tagName:n,disabled:r},l));return O.jsx(f,Object.assign({},l,d,{ref:t}))});eI.displayName="Button";const toe="data-rr-ui-",noe="rrUi";function pv(e){return`${toe}${e}`}function roe(e){return`${noe}${e}`}const ooe=["eventKey","disabled","onClick","active","as"];function ioe(e,t){if(e==null)return{};var n={},r=Object.keys(e),l,d;for(d=0;d<r.length;d++)l=r[d],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}function a$({key:e,href:t,active:n,disabled:r,onClick:l}){const d=j.useContext(f0),f=j.useContext(QR),{activeKey:y}=f||{},a=Vb(e,t),E=n==null&&e!=null?Vb(y)===a:n;return[{onClick:ai(M=>{r||(l?.(M),d&&!M.isPropagationStopped()&&d(a,M))}),"aria-disabled":r||void 0,"aria-selected":E,[pv("dropdown-item")]:""},{isActive:E}]}const s$=j.forwardRef((e,t)=>{let{eventKey:n,disabled:r,onClick:l,active:d,as:f=eI}=e,y=ioe(e,ooe);const[a]=a$({key:n,href:y.href,disabled:r,onClick:l,active:d});return O.jsx(f,Object.assign({},y,{ref:t},a))});s$.displayName="DropdownItem";const l$=j.createContext(fv?window:void 0);l$.Provider;function pC(){return j.useContext(l$)}function t2(){const e=P9(),t=j.useRef(null),n=j.useCallback(r=>{t.current=r,e()},[e]);return[t,n]}function Ax({defaultShow:e,show:t,onSelect:n,onToggle:r,itemSelector:l=`* [${pv("dropdown-item")}]`,focusFirstItemOnShow:d,placement:f="bottom-start",children:y}){const a=pC(),[E,C]=Sne(t,e,r),[M,P]=t2(),N=M.current,[F,$]=t2(),Z=F.current,q=I9(E),K=j.useRef(null),Q=j.useRef(!1),te=j.useContext(f0),ie=j.useCallback((je,Be,Ue=Be?.type)=>{C(je,{originalEvent:Be,source:Ue})},[C]),ue=ai((je,Be)=>{n?.(je,Be),ie(!1,Be,"select"),Be.isPropagationStopped()||te?.(je,Be)}),re=j.useMemo(()=>({toggle:ie,placement:f,show:E,menuElement:N,toggleElement:Z,setMenu:P,setToggle:$}),[ie,f,E,N,Z,P,$]);N&&q&&!E&&(Q.current=N.contains(N.ownerDocument.activeElement));const me=ai(()=>{Z&&Z.focus&&Z.focus()}),ve=ai(()=>{const je=K.current;let Be=d;if(Be==null&&(Be=M.current&&n$(M.current)?"keyboard":!1),Be===!1||Be==="keyboard"&&!/^key.+$/.test(je))return;const Ue=Rh(M.current,l)[0];Ue&&Ue.focus&&Ue.focus()});j.useEffect(()=>{E?ve():Q.current&&(Q.current=!1,me())},[E,Q,me,ve]),j.useEffect(()=>{K.current=null});const De=(je,Be)=>{if(!M.current)return null;const Ue=Rh(M.current,l);let Ge=Ue.indexOf(je)+Be;return Ge=Math.max(0,Math.min(Ge,Ue.length)),Ue[Ge]};return Cne(j.useCallback(()=>a.document,[a]),"keydown",je=>{var Be,Ue;const{key:Ge}=je,ze=je.target,ot=(Be=M.current)==null?void 0:Be.contains(ze),st=(Ue=F.current)==null?void 0:Ue.contains(ze);if(/input|textarea/i.test(ze.tagName)&&(Ge===" "||Ge!=="Escape"&&ot||Ge==="Escape"&&ze.type==="search")||!ot&&!st||Ge==="Tab"&&(!M.current||!E))return;K.current=je.type;const bt={originalEvent:je,source:je.type};switch(Ge){case"ArrowUp":{const Lt=De(ze,-1);Lt&&Lt.focus&&Lt.focus(),je.preventDefault();return}case"ArrowDown":if(je.preventDefault(),!E)C(!0,bt);else{const Lt=De(ze,1);Lt&&Lt.focus&&Lt.focus()}return;case"Tab":UR(ze.ownerDocument,"keyup",Lt=>{var Ct;(Lt.key==="Tab"&&!Lt.target||!((Ct=M.current)!=null&&Ct.contains(Lt.target)))&&C(!1,bt)},{once:!0});break;case"Escape":Ge==="Escape"&&(je.preventDefault(),je.stopPropagation()),C(!1,bt);break}}),O.jsx(f0.Provider,{value:ue,children:O.jsx(hC.Provider,{value:re,children:y})})}Ax.displayName="Dropdown";Ax.Menu=XR;Ax.Toggle=o$;Ax.Item=s$;function Ae(){return Ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ae.apply(this,arguments)}function Tn(e,t){if(e==null)return{};var n={},r=Object.keys(e),l,d;for(d=0;d<r.length;d++)l=r[d],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}function n2(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function aoe(e){var t=soe(e,"string");return typeof t=="symbol"?t:String(t)}function soe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function loe(e,t,n){var r=j.useRef(e!==void 0),l=j.useState(t),d=l[0],f=l[1],y=e!==void 0,a=r.current;return r.current=y,!y&&a&&d!==t&&f(t),[y?e:d,j.useCallback(function(E){for(var C=arguments.length,M=new Array(C>1?C-1:0),P=1;P<C;P++)M[P-1]=arguments[P];n&&n.apply(void 0,[E].concat(M)),f(E)},[n])]}function Mx(e,t){return Object.keys(t).reduce(function(n,r){var l,d=n,f=d[n2(r)],y=d[r],a=Tn(d,[n2(r),r].map(aoe)),E=t[r],C=loe(y,f,e[E]),M=C[0],P=C[1];return Ae({},a,(l={},l[r]=M,l[E]=P,l))},e)}function ND(e,t){return ND=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,l){return r.__proto__=l,r},ND(e,t)}function c$(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ND(e,t)}const u$=j.createContext({});u$.displayName="DropdownContext";const d$=u$,h$=j.forwardRef(({className:e,bsPrefix:t,as:n="hr",role:r="separator",...l},d)=>(t=ur(t,"dropdown-divider"),O.jsx(n,{ref:d,className:Hn(e,t),role:r,...l})));h$.displayName="DropdownDivider";const coe=h$,f$=j.forwardRef(({className:e,bsPrefix:t,as:n="div",role:r="heading",...l},d)=>(t=ur(t,"dropdown-header"),O.jsx(n,{ref:d,className:Hn(e,t),role:r,...l})));f$.displayName="DropdownHeader";const uoe=f$,doe=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",hoe=typeof document<"u",XT=hoe||doe?j.useLayoutEffect:j.useEffect,foe=["onKeyDown"];function poe(e,t){if(e==null)return{};var n={},r=Object.keys(e),l,d;for(d=0;d<r.length;d++)l=r[d],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}function moe(e){return!e||e.trim()==="#"}const p$=j.forwardRef((e,t)=>{let{onKeyDown:n}=e,r=poe(e,foe);const[l]=JR(Object.assign({tagName:"a"},r)),d=ai(f=>{l.onKeyDown(f),n?.(f)});return moe(r.href)||r.role==="button"?O.jsx("a",Object.assign({ref:t},r,l,{onKeyDown:d})):O.jsx("a",Object.assign({ref:t},r,{onKeyDown:n}))});p$.displayName="Anchor";const QT=p$,m$=j.forwardRef(({bsPrefix:e,className:t,eventKey:n,disabled:r=!1,onClick:l,active:d,as:f=QT,...y},a)=>{const E=ur(e,"dropdown-item"),[C,M]=a$({key:n,href:y.href,disabled:r,onClick:l,active:d});return O.jsx(f,{...y,...C,ref:a,className:Hn(t,E,M.isActive&&"active",r&&"disabled")})});m$.displayName="DropdownItem";const goe=m$,g$=j.forwardRef(({className:e,bsPrefix:t,as:n="span",...r},l)=>(t=ur(t,"dropdown-item-text"),O.jsx(n,{ref:l,className:Hn(e,t),...r})));g$.displayName="DropdownItemText";const yoe=g$,r2=e=>!e||typeof e=="function"?e:t=>{e.current=t};function boe(e,t){const n=r2(e),r=r2(t);return l=>{n&&n(l),r&&r(l)}}function dm(e,t){return j.useMemo(()=>boe(e,t),[e,t])}const y$=j.createContext(null);y$.displayName="InputGroupContext";const tI=y$,b$=j.createContext(null);b$.displayName="NavbarContext";const C0=b$;function v$(e,t){return e}var _$={exports:{}},voe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",_oe=voe,xoe=_oe;function x$(){}function w$(){}w$.resetWarningCache=x$;var woe=function(){function e(r,l,d,f,y,a){if(a!==xoe){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:w$,resetWarningCache:x$};return n.PropTypes=n,n};_$.exports=woe();var Eoe=_$.exports;const mo=w0(Eoe),Py=mo.oneOf(["start","end"]),Toe=mo.oneOfType([Py,mo.shape({sm:Py}),mo.shape({md:Py}),mo.shape({lg:Py}),mo.shape({xl:Py}),mo.shape({xxl:Py}),mo.object]);function E$(e,t,n){const r=n?"top-end":"top-start",l=n?"top-start":"top-end",d=n?"bottom-end":"bottom-start",f=n?"bottom-start":"bottom-end",y=n?"right-start":"left-start",a=n?"right-end":"left-end",E=n?"left-start":"right-start",C=n?"left-end":"right-end";let M=e?f:d;return t==="up"?M=e?l:r:t==="end"?M=e?C:E:t==="start"?M=e?a:y:t==="down-centered"?M="bottom":t==="up-centered"&&(M="top"),M}const T$=j.forwardRef(({bsPrefix:e,className:t,align:n,rootCloseEvent:r,flip:l=!0,show:d,renderOnMount:f,as:y="div",popperConfig:a,variant:E,...C},M)=>{let P=!1;const N=j.useContext(C0),F=ur(e,"dropdown-menu"),{align:$,drop:Z,isRTL:q}=j.useContext(d$);n=n||$;const K=j.useContext(tI),Q=[];if(n)if(typeof n=="object"){const je=Object.keys(n);if(je.length){const Be=je[0],Ue=n[Be];P=Ue==="start",Q.push(`${F}-${Be}-${Ue}`)}}else n==="end"&&(P=!0);const te=E$(P,Z,q),[ie,{hasShown:ue,popper:re,show:me,toggle:ve}]=e$({flip:l,rootCloseEvent:r,show:d,usePopper:!N&&Q.length===0,offset:[0,2],popperConfig:a,placement:te});if(ie.ref=dm(v$(M),ie.ref),XT(()=>{me&&re?.update()},[me]),!ue&&!f&&!K)return null;typeof y!="string"&&(ie.show=me,ie.close=()=>ve?.(!1),ie.align=n);let De=C.style;return re!=null&&re.placement&&(De={...C.style,...ie.style},C["x-placement"]=re.placement),O.jsx(y,{...C,...ie,style:De,...(Q.length||N)&&{"data-bs-popper":"static"},className:Hn(t,F,me&&"show",P&&`${F}-end`,E&&`${F}-${E}`,...Q)})});T$.displayName="DropdownMenu";const S$=T$,C$=j.forwardRef(({as:e,bsPrefix:t,variant:n="primary",size:r,active:l=!1,disabled:d=!1,className:f,...y},a)=>{const E=ur(t,"btn"),[C,{tagName:M}]=JR({tagName:e,disabled:d,...y}),P=M;return O.jsx(P,{...C,...y,ref:a,disabled:d,className:Hn(f,E,l&&"active",n&&`${E}-${n}`,r&&`${E}-${r}`,y.href&&d&&"disabled")})});C$.displayName="Button";const Ts=C$,k$=j.forwardRef(({bsPrefix:e,split:t,className:n,childBsPrefix:r,as:l=Ts,...d},f)=>{const y=ur(e,"dropdown-toggle"),a=j.useContext(hC);r!==void 0&&(d.bsPrefix=r);const[E]=r$();return E.ref=dm(E.ref,v$(f)),O.jsx(l,{className:Hn(n,y,t&&`${y}-split`,a?.show&&"show"),...E,...d})});k$.displayName="DropdownToggle";const A$=k$,M$=j.forwardRef((e,t)=>{const{bsPrefix:n,drop:r="down",show:l,className:d,align:f="start",onSelect:y,onToggle:a,focusFirstItemOnShow:E,as:C="div",navbar:M,autoClose:P=!0,...N}=Mx(e,{show:"onToggle"}),F=j.useContext(tI),$=ur(n,"dropdown"),Z=$R(),q=re=>P===!1?re==="click":P==="inside"?re!=="rootClose":P==="outside"?re!=="select":!0,K=ai((re,me)=>{var ve,De;!((ve=me.originalEvent)==null||(De=ve.target)==null)&&De.classList.contains("dropdown-toggle")&&me.source==="mousedown"||(me.originalEvent.currentTarget===document&&(me.source!=="keydown"||me.originalEvent.key==="Escape")&&(me.source="rootClose"),q(me.source)&&a?.(re,me))}),te=E$(f==="end",r,Z),ie=j.useMemo(()=>({align:f,drop:r,isRTL:Z}),[f,r,Z]),ue={down:$,"down-centered":`${$}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return O.jsx(d$.Provider,{value:ie,children:O.jsx(Ax,{placement:te,show:l,onSelect:y,onToggle:K,focusFirstItemOnShow:E,itemSelector:`.${$}-item:not(.disabled):not(:disabled)`,children:F?N.children:O.jsx(C,{...N,ref:t,className:Hn(d,l&&"show",ue[r])})})})});M$.displayName="Dropdown";const aa=Object.assign(M$,{Toggle:A$,Menu:S$,Item:goe,ItemText:yoe,Divider:coe,Header:uoe});var o2={exports:{}},zD={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){function l(f,y,a,E,C,M){var P=E||"<<anonymous>>",N=M||a;if(y[a]==null)return f?new Error("Required "+C+" `"+N+"` was not specified "+("in `"+P+"`.")):null;for(var F=arguments.length,$=Array(F>6?F-6:0),Z=6;Z<F;Z++)$[Z-6]=arguments[Z];return r.apply(void 0,[y,a,P,C,N].concat($))}var d=l.bind(null,!1);return d.isRequired=l.bind(null,!0),d}e.exports=t.default})(zD,zD.exports);var Soe=zD.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var n=Soe,r=l(n);function l(f){return f&&f.__esModule?f:{default:f}}function d(){for(var f=arguments.length,y=Array(f),a=0;a<f;a++)y[a]=arguments[a];function E(){for(var C=arguments.length,M=Array(C),P=0;P<C;P++)M[P]=arguments[P];var N=null;return y.forEach(function(F){if(N==null){var $=F.apply(void 0,M);$!=null&&(N=$)}}),N}return(0,r.default)(E)}e.exports=t.default})(o2,o2.exports);const Coe=j.createContext(null),D$=Coe,koe=["as","active","eventKey"];function Aoe(e,t){if(e==null)return{};var n={},r=Object.keys(e),l,d;for(d=0;d<r.length;d++)l=r[d],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}function nI({key:e,onClick:t,active:n,id:r,role:l,disabled:d}){const f=j.useContext(f0),y=j.useContext(QR),a=j.useContext(D$);let E=n;const C={role:l};if(y){!l&&y.role==="tablist"&&(C.role="tab");const M=y.getControllerId(e??null),P=y.getControlledId(e??null);C[pv("event-key")]=e,C.id=M||r,E=n==null&&e!=null?y.activeKey===e:n,(E||!(a!=null&&a.unmountOnExit)&&!(a!=null&&a.mountOnEnter))&&(C["aria-controls"]=P)}return C.role==="tab"&&(C["aria-selected"]=E,E||(C.tabIndex=-1),d&&(C.tabIndex=-1,C["aria-disabled"]=!0)),C.onClick=ai(M=>{d||(t?.(M),e!=null&&f&&!M.isPropagationStopped()&&f(e,M))}),[C,{isActive:E}]}const R$=j.forwardRef((e,t)=>{let{as:n=eI,active:r,eventKey:l}=e,d=Aoe(e,koe);const[f,y]=nI(Object.assign({key:Vb(l,d.href),active:r},d));return f[pv("active")]=y.isActive,O.jsx(n,Object.assign({},d,f,{ref:t}))});R$.displayName="NavItem";const Moe=R$,Doe=["as","onSelect","activeKey","role","onKeyDown"];function Roe(e,t){if(e==null)return{};var n={},r=Object.keys(e),l,d;for(d=0;d<r.length;d++)l=r[d],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}const i2=()=>{},a2=pv("event-key"),I$=j.forwardRef((e,t)=>{let{as:n="div",onSelect:r,activeKey:l,role:d,onKeyDown:f}=e,y=Roe(e,Doe);const a=P9(),E=j.useRef(!1),C=j.useContext(f0),M=j.useContext(D$);let P,N;M&&(d=d||"tablist",l=M.activeKey,P=M.getControlledId,N=M.getControllerId);const F=j.useRef(null),$=Q=>{const te=F.current;if(!te)return null;const ie=Rh(te,`[${a2}]:not([aria-disabled=true])`),ue=te.querySelector("[aria-selected=true]");if(!ue||ue!==document.activeElement)return null;const re=ie.indexOf(ue);if(re===-1)return null;let me=re+Q;return me>=ie.length&&(me=0),me<0&&(me=ie.length-1),ie[me]},Z=(Q,te)=>{Q!=null&&(r?.(Q,te),C?.(Q,te))},q=Q=>{if(f?.(Q),!M)return;let te;switch(Q.key){case"ArrowLeft":case"ArrowUp":te=$(-1);break;case"ArrowRight":case"ArrowDown":te=$(1);break;default:return}te&&(Q.preventDefault(),Z(te.dataset[roe("EventKey")]||null,Q),E.current=!0,a())};j.useEffect(()=>{if(F.current&&E.current){const Q=F.current.querySelector(`[${a2}][aria-selected=true]`);Q?.focus()}E.current=!1});const K=dm(t,F);return O.jsx(f0.Provider,{value:Z,children:O.jsx(QR.Provider,{value:{role:d,activeKey:Vb(l),getControlledId:P||i2,getControllerId:N||i2},children:O.jsx(n,Object.assign({},y,{onKeyDown:q,ref:K,role:d}))})})});I$.displayName="Nav";const P$=Object.assign(I$,{Item:Moe}),O$=j.createContext(null);O$.displayName="CardHeaderContext";const L$=O$,N$=j.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},l)=>(t=ur(t,"nav-item"),O.jsx(n,{ref:l,className:Hn(e,t),...r})));N$.displayName="NavItem";const Ioe=N$,z$=j.forwardRef(({bsPrefix:e,className:t,as:n=QT,active:r,eventKey:l,disabled:d=!1,...f},y)=>{e=ur(e,"nav-link");const[a,E]=nI({key:Vb(l,f.href),active:r,disabled:d,...f});return O.jsx(n,{...f,...a,ref:y,disabled:d,className:Hn(t,e,d&&"disabled",E.isActive&&"active")})});z$.displayName="NavLink";const Poe=z$,B$=j.forwardRef((e,t)=>{const{as:n="div",bsPrefix:r,variant:l,fill:d=!1,justify:f=!1,navbar:y,navbarScroll:a,className:E,activeKey:C,...M}=Mx(e,{activeKey:"onSelect"}),P=ur(r,"nav");let N,F,$=!1;const Z=j.useContext(C0),q=j.useContext(L$);return Z?(N=Z.bsPrefix,$=y??!0):q&&({cardHeaderBsPrefix:F}=q),O.jsx(P$,{as:n,ref:t,activeKey:C,className:Hn(E,{[P]:!$,[`${N}-nav`]:$,[`${N}-nav-scroll`]:$&&a,[`${F}-${l}`]:!!F,[`${P}-${l}`]:!!l,[`${P}-fill`]:d,[`${P}-justified`]:f}),...M})});B$.displayName="Nav";const I_=Object.assign(B$,{Item:Ioe,Link:Poe});mo.string,mo.bool,mo.bool,mo.bool,mo.bool;const F$=j.forwardRef(({bsPrefix:e,className:t,fluid:n=!1,rounded:r=!1,roundedCircle:l=!1,thumbnail:d=!1,...f},y)=>(e=ur(e,"img"),O.jsx("img",{ref:y,...f,className:Hn(t,n&&`${e}-fluid`,r&&"rounded",l&&"rounded-circle",d&&`${e}-thumbnail`)})));F$.displayName="Image";const JT=F$,j$=j.forwardRef(({bsPrefix:e,className:t,as:n,...r},l)=>{e=ur(e,"navbar-brand");const d=n||(r.href?"a":"span");return O.jsx(d,{...r,ref:l,className:Hn(t,e)})});j$.displayName="NavbarBrand";const Ooe=j$;function Loe(e){var t=kx(e);return t&&t.defaultView||window}function Noe(e,t){return Loe(e).getComputedStyle(e,t)}var zoe=/([A-Z])/g;function Boe(e){return e.replace(zoe,"-$1").toLowerCase()}var Foe=/^ms-/;function hE(e){return Boe(e).replace(Foe,"-ms-")}var joe=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function $oe(e){return!!(e&&joe.test(e))}function Uh(e,t){var n="",r="";if(typeof t=="string")return e.style.getPropertyValue(hE(t))||Noe(e).getPropertyValue(hE(t));Object.keys(t).forEach(function(l){var d=t[l];!d&&d!==0?e.style.removeProperty(hE(l)):$oe(l)?r+=l+"("+d+") ":n+=hE(l)+": "+d+";"}),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n}const s2={disabled:!1},eS=dt.createContext(null);var Uoe=function(t){return t.scrollTop},Q_="unmounted",xp="exited",mu="entering",Ih="entered",X1="exiting",sf=function(e){c$(t,e);function t(r,l){var d;d=e.call(this,r,l)||this;var f=l,y=f&&!f.isMounting?r.enter:r.appear,a;return d.appearStatus=null,r.in?y?(a=xp,d.appearStatus=mu):a=Ih:r.unmountOnExit||r.mountOnEnter?a=Q_:a=xp,d.state={status:a},d.nextCallback=null,d}t.getDerivedStateFromProps=function(l,d){var f=l.in;return f&&d.status===Q_?{status:xp}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(l){var d=null;if(l!==this.props){var f=this.state.status;this.props.in?f!==mu&&f!==Ih&&(d=mu):(f===mu||f===Ih)&&(d=X1)}this.updateStatus(!1,d)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var l=this.props.timeout,d,f,y;return d=f=y=l,l!=null&&typeof l!="number"&&(d=l.exit,f=l.enter,y=l.appear!==void 0?l.appear:f),{exit:d,enter:f,appear:y}},n.updateStatus=function(l,d){if(l===void 0&&(l=!1),d!==null)if(this.cancelNextCallback(),d===mu){if(this.props.unmountOnExit||this.props.mountOnEnter){var f=this.props.nodeRef?this.props.nodeRef.current:kp.findDOMNode(this);f&&Uoe(f)}this.performEnter(l)}else this.performExit();else this.props.unmountOnExit&&this.state.status===xp&&this.setState({status:Q_})},n.performEnter=function(l){var d=this,f=this.props.enter,y=this.context?this.context.isMounting:l,a=this.props.nodeRef?[y]:[kp.findDOMNode(this),y],E=a[0],C=a[1],M=this.getTimeouts(),P=y?M.appear:M.enter;if(!l&&!f||s2.disabled){this.safeSetState({status:Ih},function(){d.props.onEntered(E)});return}this.props.onEnter(E,C),this.safeSetState({status:mu},function(){d.props.onEntering(E,C),d.onTransitionEnd(P,function(){d.safeSetState({status:Ih},function(){d.props.onEntered(E,C)})})})},n.performExit=function(){var l=this,d=this.props.exit,f=this.getTimeouts(),y=this.props.nodeRef?void 0:kp.findDOMNode(this);if(!d||s2.disabled){this.safeSetState({status:xp},function(){l.props.onExited(y)});return}this.props.onExit(y),this.safeSetState({status:X1},function(){l.props.onExiting(y),l.onTransitionEnd(f.exit,function(){l.safeSetState({status:xp},function(){l.props.onExited(y)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(l,d){d=this.setNextCallback(d),this.setState(l,d)},n.setNextCallback=function(l){var d=this,f=!0;return this.nextCallback=function(y){f&&(f=!1,d.nextCallback=null,l(y))},this.nextCallback.cancel=function(){f=!1},this.nextCallback},n.onTransitionEnd=function(l,d){this.setNextCallback(d);var f=this.props.nodeRef?this.props.nodeRef.current:kp.findDOMNode(this),y=l==null&&!this.props.addEndListener;if(!f||y){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[f,this.nextCallback],E=a[0],C=a[1];this.props.addEndListener(E,C)}l!=null&&setTimeout(this.nextCallback,l)},n.render=function(){var l=this.state.status;if(l===Q_)return null;var d=this.props,f=d.children;d.in,d.mountOnEnter,d.unmountOnExit,d.appear,d.enter,d.exit,d.timeout,d.addEndListener,d.onEnter,d.onEntering,d.onEntered,d.onExit,d.onExiting,d.onExited,d.nodeRef;var y=Tn(d,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return dt.createElement(eS.Provider,{value:null},typeof f=="function"?f(l,y):dt.cloneElement(dt.Children.only(f),y))},t}(dt.Component);sf.contextType=eS;sf.propTypes={};function Oy(){}sf.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Oy,onEntering:Oy,onEntered:Oy,onExit:Oy,onExiting:Oy,onExited:Oy};sf.UNMOUNTED=Q_;sf.EXITED=xp;sf.ENTERING=mu;sf.ENTERED=Ih;sf.EXITING=X1;const mv=sf;function Voe(e,t,n,r){if(n===void 0&&(n=!1),r===void 0&&(r=!0),e){var l=document.createEvent("HTMLEvents");l.initEvent(t,n,r),e.dispatchEvent(l)}}function Hoe(e){var t=Uh(e,"transitionDuration")||"",n=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*n}function Woe(e,t,n){n===void 0&&(n=5);var r=!1,l=setTimeout(function(){r||Voe(e,"transitionend",!0)},t+n),d=Ap(e,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(l),d()}}function $$(e,t,n,r){n==null&&(n=Hoe(e)||0);var l=Woe(e,n,r),d=Ap(e,"transitionend",t);return function(){l(),d()}}function l2(e,t){const n=Uh(e,t)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function mC(e,t){const n=l2(e,"transitionDuration"),r=l2(e,"transitionDelay"),l=$$(e,d=>{d.target===e&&(l(),t(d))},n+r)}function P_(...e){return e.filter(t=>t!=null).reduce((t,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===null?n:function(...l){t.apply(this,l),n.apply(this,l)}},null)}function rI(e){e.offsetHeight}function Yoe(e){return e&&"setState"in e?kp.findDOMNode(e):e??null}const Goe=dt.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:r,onExiting:l,onExited:d,addEndListener:f,children:y,childRef:a,...E},C)=>{const M=j.useRef(null),P=dm(M,a),N=ue=>{P(Yoe(ue))},F=ue=>re=>{ue&&M.current&&ue(M.current,re)},$=j.useCallback(F(e),[e]),Z=j.useCallback(F(t),[t]),q=j.useCallback(F(n),[n]),K=j.useCallback(F(r),[r]),Q=j.useCallback(F(l),[l]),te=j.useCallback(F(d),[d]),ie=j.useCallback(F(f),[f]);return O.jsx(mv,{ref:C,...E,onEnter:$,onEntered:q,onEntering:Z,onExit:K,onExited:te,onExiting:Q,addEndListener:ie,nodeRef:M,children:typeof y=="function"?(ue,re)=>y(ue,{...re,ref:N}):dt.cloneElement(y,{ref:N})})}),gC=Goe,qoe={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function Zoe(e,t){const n=`offset${e[0].toUpperCase()}${e.slice(1)}`,r=t[n],l=qoe[e];return r+parseInt(Uh(t,l[0]),10)+parseInt(Uh(t,l[1]),10)}const Koe={[xp]:"collapse",[X1]:"collapsing",[mu]:"collapsing",[Ih]:"collapse show"},Xoe=dt.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:r,onExiting:l,className:d,children:f,dimension:y="height",in:a=!1,timeout:E=300,mountOnEnter:C=!1,unmountOnExit:M=!1,appear:P=!1,getDimensionValue:N=Zoe,...F},$)=>{const Z=typeof y=="function"?y():y,q=j.useMemo(()=>P_(ue=>{ue.style[Z]="0"},e),[Z,e]),K=j.useMemo(()=>P_(ue=>{const re=`scroll${Z[0].toUpperCase()}${Z.slice(1)}`;ue.style[Z]=`${ue[re]}px`},t),[Z,t]),Q=j.useMemo(()=>P_(ue=>{ue.style[Z]=null},n),[Z,n]),te=j.useMemo(()=>P_(ue=>{ue.style[Z]=`${N(Z,ue)}px`,rI(ue)},r),[r,N,Z]),ie=j.useMemo(()=>P_(ue=>{ue.style[Z]=null},l),[Z,l]);return O.jsx(gC,{ref:$,addEndListener:mC,...F,"aria-expanded":F.role?a:null,onEnter:q,onEntering:K,onEntered:Q,onExit:te,onExiting:ie,childRef:f.ref,in:a,timeout:E,mountOnEnter:C,unmountOnExit:M,appear:P,children:(ue,re)=>dt.cloneElement(f,{...re,className:Hn(d,f.props.className,Koe[ue],Z==="width"&&"collapse-horizontal")})})}),Qoe=Xoe,U$=j.forwardRef(({children:e,bsPrefix:t,...n},r)=>{t=ur(t,"navbar-collapse");const l=j.useContext(C0);return O.jsx(Qoe,{in:!!(l&&l.expanded),...n,children:O.jsx("div",{ref:r,className:t,children:e})})});U$.displayName="NavbarCollapse";const Joe=U$,V$=j.forwardRef(({bsPrefix:e,className:t,children:n,label:r="Toggle navigation",as:l="button",onClick:d,...f},y)=>{e=ur(e,"navbar-toggler");const{onToggle:a,expanded:E}=j.useContext(C0)||{},C=ai(M=>{d&&d(M),a&&a()});return l==="button"&&(f.type="button"),O.jsx(l,{...f,ref:y,onClick:C,"aria-label":r,className:Hn(t,e,!E&&"collapsed"),children:n||O.jsx("span",{className:`${e}-icon`})})});V$.displayName="NavbarToggle";const eie=V$,BD=new WeakMap,c2=(e,t)=>{if(!e||!t)return;const n=BD.get(t)||new Map;BD.set(t,n);let r=n.get(e);return r||(r=t.matchMedia(e),r.refCount=0,n.set(r.media,r)),r};function tie(e,t=typeof window>"u"?void 0:window){const n=c2(e,t),[r,l]=j.useState(()=>n?n.matches:!1);return XT(()=>{let d=c2(e,t);if(!d)return l(!1);let f=BD.get(t);const y=()=>{l(d.matches)};return d.refCount++,d.addListener(y),y(),()=>{d.removeListener(y),d.refCount--,d.refCount<=0&&f?.delete(d.media),d=void 0}},[e]),r}function nie(e){const t=Object.keys(e);function n(y,a){return y===a?a:y?`${y} and ${a}`:a}function r(y){return t[Math.min(t.indexOf(y)+1,t.length-1)]}function l(y){const a=r(y);let E=e[a];return typeof E=="number"?E=`${E-.2}px`:E=`calc(${E} - 0.2px)`,`(max-width: ${E})`}function d(y){let a=e[y];return typeof a=="number"&&(a=`${a}px`),`(min-width: ${a})`}function f(y,a,E){let C;typeof y=="object"?(C=y,E=a,a=!0):(a=a||!0,C={[y]:a});let M=j.useMemo(()=>Object.entries(C).reduce((P,[N,F])=>((F==="up"||F===!0)&&(P=n(P,d(N))),(F==="down"||F===!0)&&(P=n(P,l(N))),P),""),[JSON.stringify(C)]);return tie(M,E)}return f}const rie=nie({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400});function k3(e){e===void 0&&(e=kx());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function oie(e){const t=j.useRef(e);return t.current=e,t}function oI(e){const t=oie(e);j.useEffect(()=>()=>t.current(),[])}function iie(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const u2=pv("modal-open");let aie=class{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return iie(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",l=this.getElement();t.style={overflow:l.style.overflow,[r]:l.style[r]},t.scrollBarWidth&&(n[r]=`${parseInt(Uh(l,r)||"0",10)+t.scrollBarWidth}px`),l.setAttribute(u2,""),Uh(l,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(u2),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}};const iI=aie,A3=(e,t)=>fv?e==null?(t||kx()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function sie(e,t){const n=pC(),[r,l]=j.useState(()=>A3(e,n?.document));if(!r){const d=A3(e);d&&l(d)}return j.useEffect(()=>{t&&r&&t(r)},[t,r]),j.useEffect(()=>{const d=A3(e);d!==r&&l(d)},[e,r]),r}function lie({children:e,in:t,onExited:n,mountOnEnter:r,unmountOnExit:l}){const d=j.useRef(null),f=j.useRef(t),y=ai(n);j.useEffect(()=>{t?f.current=!0:y(d.current)},[t,y]);const a=dm(d,e.ref),E=j.cloneElement(e,{ref:a});return t?E:l||!f.current&&r?null:E}const cie=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function uie(e,t){if(e==null)return{};var n={},r=Object.keys(e),l,d;for(d=0;d<r.length;d++)l=r[d],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}function die(e){let{onEnter:t,onEntering:n,onEntered:r,onExit:l,onExiting:d,onExited:f,addEndListener:y,children:a}=e,E=uie(e,cie);const C=j.useRef(null),M=dm(C,typeof a=="function"?null:a.ref),P=te=>ie=>{te&&C.current&&te(C.current,ie)},N=j.useCallback(P(t),[t]),F=j.useCallback(P(n),[n]),$=j.useCallback(P(r),[r]),Z=j.useCallback(P(l),[l]),q=j.useCallback(P(d),[d]),K=j.useCallback(P(f),[f]),Q=j.useCallback(P(y),[y]);return Object.assign({},E,{nodeRef:C},t&&{onEnter:N},n&&{onEntering:F},r&&{onEntered:$},l&&{onExit:Z},d&&{onExiting:q},f&&{onExited:K},y&&{addEndListener:Q},{children:typeof a=="function"?(te,ie)=>a(te,Object.assign({},ie,{ref:M})):j.cloneElement(a,{ref:M})})}const hie=["component"];function fie(e,t){if(e==null)return{};var n={},r=Object.keys(e),l,d;for(d=0;d<r.length;d++)l=r[d],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}const pie=j.forwardRef((e,t)=>{let{component:n}=e,r=fie(e,hie);const l=die(r);return O.jsx(n,Object.assign({ref:t},l))}),mie=pie;function gie({in:e,onTransition:t}){const n=j.useRef(null),r=j.useRef(!0),l=ai(t);return XT(()=>{if(!n.current)return;let d=!1;return l({in:e,element:n.current,initial:r.current,isStale:()=>d}),()=>{d=!0}},[e,l]),XT(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function yie({children:e,in:t,onExited:n,onEntered:r,transition:l}){const[d,f]=j.useState(!t);t&&d&&f(!1);const y=gie({in:!!t,onTransition:E=>{const C=()=>{E.isStale()||(E.in?r?.(E.element,E.initial):(f(!0),n?.(E.element)))};Promise.resolve(l(E)).then(C,M=>{throw E.in||f(!0),M})}}),a=dm(y,e.ref);return d&&!t?null:j.cloneElement(e,{ref:a})}function d2(e,t,n){return e?O.jsx(mie,Object.assign({},n,{component:e})):t?O.jsx(yie,Object.assign({},n,{transition:t})):O.jsx(lie,Object.assign({},n))}function bie(e){return e.code==="Escape"||e.keyCode===27}const vie=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function _ie(e,t){if(e==null)return{};var n={},r=Object.keys(e),l,d;for(d=0;d<r.length;d++)l=r[d],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}let M3;function xie(e){return M3||(M3=new iI({ownerDocument:e?.document})),M3}function wie(e){const t=pC(),n=e||xie(t),r=j.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:j.useCallback(l=>{r.current.dialog=l},[]),setBackdropRef:j.useCallback(l=>{r.current.backdrop=l},[])})}const H$=j.forwardRef((e,t)=>{let{show:n=!1,role:r="dialog",className:l,style:d,children:f,backdrop:y=!0,keyboard:a=!0,onBackdropClick:E,onEscapeKeyDown:C,transition:M,runTransition:P,backdropTransition:N,runBackdropTransition:F,autoFocus:$=!0,enforceFocus:Z=!0,restoreFocus:q=!0,restoreFocusOptions:K,renderDialog:Q,renderBackdrop:te=an=>O.jsx("div",Object.assign({},an)),manager:ie,container:ue,onShow:re,onHide:me=()=>{},onExit:ve,onExited:De,onExiting:je,onEnter:Be,onEntering:Ue,onEntered:Ge}=e,ze=_ie(e,vie);const ot=pC(),st=sie(ue),Re=wie(ie),bt=VR(),Lt=I9(n),[Ct,Nt]=j.useState(!n),tn=j.useRef(null);j.useImperativeHandle(t,()=>Re,[Re]),fv&&!Lt&&n&&(tn.current=k3(ot?.document)),n&&Ct&&Nt(!1);const Dt=ai(()=>{if(Re.add(),Un.current=Ap(document,"keydown",nt),Pn.current=Ap(document,"focus",()=>setTimeout(Mt),!0),re&&re(),$){var an,qr;const hn=k3((an=(qr=Re.dialog)==null?void 0:qr.ownerDocument)!=null?an:ot?.document);Re.dialog&&hn&&!ZT(Re.dialog,hn)&&(tn.current=hn,Re.dialog.focus())}}),cn=ai(()=>{if(Re.remove(),Un.current==null||Un.current(),Pn.current==null||Pn.current(),q){var an;(an=tn.current)==null||an.focus==null||an.focus(K),tn.current=null}});j.useEffect(()=>{!n||!st||Dt()},[n,st,Dt]),j.useEffect(()=>{Ct&&cn()},[Ct,cn]),oI(()=>{cn()});const Mt=ai(()=>{if(!Z||!bt()||!Re.isTopModal())return;const an=k3(ot?.document);Re.dialog&&an&&!ZT(Re.dialog,an)&&Re.dialog.focus()}),Vn=ai(an=>{an.target===an.currentTarget&&(E?.(an),y===!0&&me())}),nt=ai(an=>{a&&bie(an)&&Re.isTopModal()&&(C?.(an),an.defaultPrevented||me())}),Pn=j.useRef(),Un=j.useRef(),En=(...an)=>{Nt(!0),De?.(...an)};if(!st)return null;const bn=Object.assign({role:r,ref:Re.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},ze,{style:d,className:l,tabIndex:-1});let Fn=Q?Q(bn):O.jsx("div",Object.assign({},bn,{children:j.cloneElement(f,{role:"document"})}));Fn=d2(M,P,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:ve,onExiting:je,onExited:En,onEnter:Be,onEntering:Ue,onEntered:Ge,children:Fn});let On=null;return y&&(On=te({ref:Re.setBackdropRef,onClick:Vn}),On=d2(N,F,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:On})),O.jsx(O.Fragment,{children:kp.createPortal(O.jsxs(O.Fragment,{children:[On,Fn]}),st)})});H$.displayName="Modal";const W$=Object.assign(H$,{Manager:iI}),Eie={[mu]:"show",[Ih]:"show"},Y$=j.forwardRef(({className:e,children:t,transitionClasses:n={},onEnter:r,...l},d)=>{const f={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...l},y=j.useCallback((a,E)=>{rI(a),r?.(a,E)},[r]);return O.jsx(gC,{ref:d,addEndListener:mC,...f,onEnter:y,childRef:t.ref,children:(a,E)=>j.cloneElement(t,{...E,className:Hn("fade",e,t.props.className,Eie[a],n[a])})})});Y$.displayName="Fade";const aI=Y$,G$=j.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},l)=>(t=ur(t,"offcanvas-body"),O.jsx(n,{ref:l,className:Hn(e,t),...r})));G$.displayName="OffcanvasBody";const Tie=G$,Sie={[mu]:"show",[Ih]:"show"},q$=j.forwardRef(({bsPrefix:e,className:t,children:n,in:r=!1,mountOnEnter:l=!1,unmountOnExit:d=!1,appear:f=!1,...y},a)=>(e=ur(e,"offcanvas"),O.jsx(gC,{ref:a,addEndListener:mC,in:r,mountOnEnter:l,unmountOnExit:d,appear:f,...y,childRef:n.ref,children:(E,C)=>j.cloneElement(n,{...C,className:Hn(t,n.props.className,(E===mu||E===X1)&&`${e}-toggling`,Sie[E])})})));q$.displayName="OffcanvasToggling";const Cie=q$,kie=j.createContext({onHide(){}}),sI=kie,Aie={"aria-label":mo.string,onClick:mo.func,variant:mo.oneOf(["white"])},lI=j.forwardRef(({className:e,variant:t,"aria-label":n="Close",...r},l)=>O.jsx("button",{ref:l,type:"button",className:Hn("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...r}));lI.displayName="CloseButton";lI.propTypes=Aie;const Mie=lI,Die=j.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:r,children:l,...d},f)=>{const y=j.useContext(sI),a=ai(()=>{y?.onHide(),r?.()});return O.jsxs("div",{ref:f,...d,children:[l,n&&O.jsx(Mie,{"aria-label":e,variant:t,onClick:a})]})}),Z$=Die,K$=j.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:r=!1,...l},d)=>(e=ur(e,"offcanvas-header"),O.jsx(Z$,{ref:d,...l,className:Hn(t,e),closeLabel:n,closeButton:r})));K$.displayName="OffcanvasHeader";const Rie=K$,yC=e=>j.forwardRef((t,n)=>O.jsx("div",{...t,ref:n,className:Hn(t.className,e)})),Iie=yC("h5"),X$=j.forwardRef(({className:e,bsPrefix:t,as:n=Iie,...r},l)=>(t=ur(t,"offcanvas-title"),O.jsx(n,{ref:l,className:Hn(e,t),...r})));X$.displayName="OffcanvasTitle";const Pie=X$;function Oie(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function Lie(e,t){e.classList?e.classList.add(t):Oie(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function h2(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Nie(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=h2(e.className,t):e.setAttribute("class",h2(e.className&&e.className.baseVal||"",t))}const Ly={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class Q$ extends iI{adjustAndStore(t,n,r){const l=n.style[t];n.dataset[t]=l,Uh(n,{[t]:`${parseFloat(Uh(n,t))+r}px`})}restore(t,n){const r=n.dataset[t];r!==void 0&&(delete n.dataset[t],Uh(n,{[t]:r}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(Lie(n,"modal-open"),!t.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",l=this.isRTL?"marginLeft":"marginRight";Rh(n,Ly.FIXED_CONTENT).forEach(d=>this.adjustAndStore(r,d,t.scrollBarWidth)),Rh(n,Ly.STICKY_CONTENT).forEach(d=>this.adjustAndStore(l,d,-t.scrollBarWidth)),Rh(n,Ly.NAVBAR_TOGGLER).forEach(d=>this.adjustAndStore(l,d,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();Nie(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",l=this.isRTL?"marginLeft":"marginRight";Rh(n,Ly.FIXED_CONTENT).forEach(d=>this.restore(r,d)),Rh(n,Ly.STICKY_CONTENT).forEach(d=>this.restore(l,d)),Rh(n,Ly.NAVBAR_TOGGLER).forEach(d=>this.restore(l,d))}}let D3;function J$(e){return D3||(D3=new Q$(e)),D3}function zie(e){return O.jsx(Cie,{...e})}function Bie(e){return O.jsx(aI,{...e})}const eU=j.forwardRef(({bsPrefix:e,className:t,children:n,"aria-labelledby":r,placement:l="start",responsive:d,show:f=!1,backdrop:y=!0,keyboard:a=!0,scroll:E=!1,onEscapeKeyDown:C,onShow:M,onHide:P,container:N,autoFocus:F=!0,enforceFocus:$=!0,restoreFocus:Z=!0,restoreFocusOptions:q,onEntered:K,onExit:Q,onExiting:te,onEnter:ie,onEntering:ue,onExited:re,backdropClassName:me,manager:ve,renderStaticNode:De=!1,...je},Be)=>{const Ue=j.useRef();e=ur(e,"offcanvas");const{onToggle:Ge}=j.useContext(C0)||{},[ze,ot]=j.useState(!1),st=rie(d||"xs","up");j.useEffect(()=>{ot(d?f&&!st:f)},[f,d,st]);const Re=ai(()=>{Ge?.(),P?.()}),bt=j.useMemo(()=>({onHide:Re}),[Re]);function Lt(){return ve||(E?(Ue.current||(Ue.current=new Q$({handleContainerOverflow:!1})),Ue.current):J$())}const Ct=(cn,...Mt)=>{cn&&(cn.style.visibility="visible"),ie?.(cn,...Mt)},Nt=(cn,...Mt)=>{cn&&(cn.style.visibility=""),re?.(...Mt)},tn=j.useCallback(cn=>O.jsx("div",{...cn,className:Hn(`${e}-backdrop`,me)}),[me,e]),Dt=cn=>O.jsx("div",{...cn,...je,className:Hn(t,d?`${e}-${d}`:e,`${e}-${l}`),"aria-labelledby":r,children:n});return O.jsxs(O.Fragment,{children:[!ze&&(d||De)&&Dt({}),O.jsx(sI.Provider,{value:bt,children:O.jsx(W$,{show:ze,ref:Be,backdrop:y,container:N,keyboard:a,autoFocus:F,enforceFocus:$&&!E,restoreFocus:Z,restoreFocusOptions:q,onEscapeKeyDown:C,onShow:M,onHide:Re,onEnter:Ct,onEntering:ue,onEntered:K,onExit:Q,onExiting:te,onExited:Nt,manager:Lt(),transition:zie,backdropTransition:Bie,renderBackdrop:tn,renderDialog:Dt})})]})});eU.displayName="Offcanvas";const Fie=Object.assign(eU,{Body:Tie,Header:Rie,Title:Pie}),tU=j.forwardRef((e,t)=>{const n=j.useContext(C0);return O.jsx(Fie,{ref:t,show:!!(n!=null&&n.expanded),...e,renderStaticNode:!0})});tU.displayName="NavbarOffcanvas";const jie=tU,nU=j.forwardRef(({className:e,bsPrefix:t,as:n="span",...r},l)=>(t=ur(t,"navbar-text"),O.jsx(n,{ref:l,className:Hn(e,t),...r})));nU.displayName="NavbarText";const $ie=nU,rU=j.forwardRef((e,t)=>{const{bsPrefix:n,expand:r=!0,variant:l="light",bg:d,fixed:f,sticky:y,className:a,as:E="nav",expanded:C,onToggle:M,onSelect:P,collapseOnSelect:N=!1,...F}=Mx(e,{expanded:"onToggle"}),$=ur(n,"navbar"),Z=j.useCallback((...Q)=>{P?.(...Q),N&&C&&M?.(!1)},[P,N,C,M]);F.role===void 0&&E!=="nav"&&(F.role="navigation");let q=`${$}-expand`;typeof r=="string"&&(q=`${q}-${r}`);const K=j.useMemo(()=>({onToggle:()=>M?.(!C),bsPrefix:$,expanded:!!C,expand:r}),[$,C,r,M]);return O.jsx(C0.Provider,{value:K,children:O.jsx(f0.Provider,{value:Z,children:O.jsx(E,{ref:t,...F,className:Hn(a,$,r&&q,l&&`${$}-${l}`,d&&`bg-${d}`,y&&`sticky-${y}`,f&&`fixed-${f}`)})})})});rU.displayName="Navbar";const f2=Object.assign(rU,{Brand:Ooe,Collapse:Joe,Offcanvas:jie,Text:$ie,Toggle:eie}),Uie="/assets/changemate-logo-CButfpqx.svg",oU="/assets/Default-Profile-iu5COMDh.png";function iU(e,t){return function(){return e.apply(t,arguments)}}const{toString:Vie}=Object.prototype,{getPrototypeOf:cI}=Object,bC=(e=>t=>{const n=Vie.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Rd=e=>(e=e.toLowerCase(),t=>bC(t)===e),vC=e=>t=>typeof t===e,{isArray:gv}=Array,Q1=vC("undefined");function Hie(e){return e!==null&&!Q1(e)&&e.constructor!==null&&!Q1(e.constructor)&&vc(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const aU=Rd("ArrayBuffer");function Wie(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&aU(e.buffer),t}const Yie=vC("string"),vc=vC("function"),sU=vC("number"),_C=e=>e!==null&&typeof e=="object",Gie=e=>e===!0||e===!1,iT=e=>{if(bC(e)!=="object")return!1;const t=cI(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},qie=Rd("Date"),Zie=Rd("File"),Kie=Rd("Blob"),Xie=Rd("FileList"),Qie=e=>_C(e)&&vc(e.pipe),Jie=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||vc(e.append)&&((t=bC(e))==="formdata"||t==="object"&&vc(e.toString)&&e.toString()==="[object FormData]"))},eae=Rd("URLSearchParams"),tae=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Dx(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,l;if(typeof e!="object"&&(e=[e]),gv(e))for(r=0,l=e.length;r<l;r++)t.call(null,e[r],r,e);else{const d=n?Object.getOwnPropertyNames(e):Object.keys(e),f=d.length;let y;for(r=0;r<f;r++)y=d[r],t.call(null,e[y],y,e)}}function lU(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,l;for(;r-- >0;)if(l=n[r],t===l.toLowerCase())return l;return null}const cU=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,uU=e=>!Q1(e)&&e!==cU;function FD(){const{caseless:e}=uU(this)&&this||{},t={},n=(r,l)=>{const d=e&&lU(t,l)||l;iT(t[d])&&iT(r)?t[d]=FD(t[d],r):iT(r)?t[d]=FD({},r):gv(r)?t[d]=r.slice():t[d]=r};for(let r=0,l=arguments.length;r<l;r++)arguments[r]&&Dx(arguments[r],n);return t}const nae=(e,t,n,{allOwnKeys:r}={})=>(Dx(t,(l,d)=>{n&&vc(l)?e[d]=iU(l,n):e[d]=l},{allOwnKeys:r}),e),rae=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),oae=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},iae=(e,t,n,r)=>{let l,d,f;const y={};if(t=t||{},e==null)return t;do{for(l=Object.getOwnPropertyNames(e),d=l.length;d-- >0;)f=l[d],(!r||r(f,e,t))&&!y[f]&&(t[f]=e[f],y[f]=!0);e=n!==!1&&cI(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},aae=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},sae=e=>{if(!e)return null;if(gv(e))return e;let t=e.length;if(!sU(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},lae=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&cI(Uint8Array)),cae=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let l;for(;(l=r.next())&&!l.done;){const d=l.value;t.call(e,d[0],d[1])}},uae=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},dae=Rd("HTMLFormElement"),hae=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,l){return r.toUpperCase()+l}),p2=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),fae=Rd("RegExp"),dU=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Dx(n,(l,d)=>{let f;(f=t(l,d,e))!==!1&&(r[d]=f||l)}),Object.defineProperties(e,r)},pae=e=>{dU(e,(t,n)=>{if(vc(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(vc(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},mae=(e,t)=>{const n={},r=l=>{l.forEach(d=>{n[d]=!0})};return gv(e)?r(e):r(String(e).split(t)),n},gae=()=>{},yae=(e,t)=>(e=+e,Number.isFinite(e)?e:t),R3="abcdefghijklmnopqrstuvwxyz",m2="0123456789",hU={DIGIT:m2,ALPHA:R3,ALPHA_DIGIT:R3+R3.toUpperCase()+m2},bae=(e=16,t=hU.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function vae(e){return!!(e&&vc(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const _ae=e=>{const t=new Array(10),n=(r,l)=>{if(_C(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[l]=r;const d=gv(r)?[]:{};return Dx(r,(f,y)=>{const a=n(f,l+1);!Q1(a)&&(d[y]=a)}),t[l]=void 0,d}}return r};return n(e,0)},xae=Rd("AsyncFunction"),wae=e=>e&&(_C(e)||vc(e))&&vc(e.then)&&vc(e.catch),qt={isArray:gv,isArrayBuffer:aU,isBuffer:Hie,isFormData:Jie,isArrayBufferView:Wie,isString:Yie,isNumber:sU,isBoolean:Gie,isObject:_C,isPlainObject:iT,isUndefined:Q1,isDate:qie,isFile:Zie,isBlob:Kie,isRegExp:fae,isFunction:vc,isStream:Qie,isURLSearchParams:eae,isTypedArray:lae,isFileList:Xie,forEach:Dx,merge:FD,extend:nae,trim:tae,stripBOM:rae,inherits:oae,toFlatObject:iae,kindOf:bC,kindOfTest:Rd,endsWith:aae,toArray:sae,forEachEntry:cae,matchAll:uae,isHTMLForm:dae,hasOwnProperty:p2,hasOwnProp:p2,reduceDescriptors:dU,freezeMethods:pae,toObjectSet:mae,toCamelCase:hae,noop:gae,toFiniteNumber:yae,findKey:lU,global:cU,isContextDefined:uU,ALPHABET:hU,generateString:bae,isSpecCompliantForm:vae,toJSONObject:_ae,isAsyncFn:xae,isThenable:wae};function vo(e,t,n,r,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),l&&(this.response=l)}qt.inherits(vo,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:qt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const fU=vo.prototype,pU={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{pU[e]={value:e}});Object.defineProperties(vo,pU);Object.defineProperty(fU,"isAxiosError",{value:!0});vo.from=(e,t,n,r,l,d)=>{const f=Object.create(fU);return qt.toFlatObject(e,f,function(a){return a!==Error.prototype},y=>y!=="isAxiosError"),vo.call(f,e.message,t,n,r,l),f.cause=e,f.name=e.name,d&&Object.assign(f,d),f};const Eae=null;function jD(e){return qt.isPlainObject(e)||qt.isArray(e)}function mU(e){return qt.endsWith(e,"[]")?e.slice(0,-2):e}function g2(e,t,n){return e?e.concat(t).map(function(l,d){return l=mU(l),!n&&d?"["+l+"]":l}).join(n?".":""):t}function Tae(e){return qt.isArray(e)&&!e.some(jD)}const Sae=qt.toFlatObject(qt,{},null,function(t){return/^is[A-Z]/.test(t)});function xC(e,t,n){if(!qt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=qt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function($,Z){return!qt.isUndefined(Z[$])});const r=n.metaTokens,l=n.visitor||C,d=n.dots,f=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&qt.isSpecCompliantForm(t);if(!qt.isFunction(l))throw new TypeError("visitor must be a function");function E(F){if(F===null)return"";if(qt.isDate(F))return F.toISOString();if(!a&&qt.isBlob(F))throw new vo("Blob is not supported. Use a Buffer instead.");return qt.isArrayBuffer(F)||qt.isTypedArray(F)?a&&typeof Blob=="function"?new Blob([F]):Buffer.from(F):F}function C(F,$,Z){let q=F;if(F&&!Z&&typeof F=="object"){if(qt.endsWith($,"{}"))$=r?$:$.slice(0,-2),F=JSON.stringify(F);else if(qt.isArray(F)&&Tae(F)||(qt.isFileList(F)||qt.endsWith($,"[]"))&&(q=qt.toArray(F)))return $=mU($),q.forEach(function(Q,te){!(qt.isUndefined(Q)||Q===null)&&t.append(f===!0?g2([$],te,d):f===null?$:$+"[]",E(Q))}),!1}return jD(F)?!0:(t.append(g2(Z,$,d),E(F)),!1)}const M=[],P=Object.assign(Sae,{defaultVisitor:C,convertValue:E,isVisitable:jD});function N(F,$){if(!qt.isUndefined(F)){if(M.indexOf(F)!==-1)throw Error("Circular reference detected in "+$.join("."));M.push(F),qt.forEach(F,function(q,K){(!(qt.isUndefined(q)||q===null)&&l.call(t,q,qt.isString(K)?K.trim():K,$,P))===!0&&N(q,$?$.concat(K):[K])}),M.pop()}}if(!qt.isObject(e))throw new TypeError("data must be an object");return N(e),t}function y2(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function uI(e,t){this._pairs=[],e&&xC(e,this,t)}const gU=uI.prototype;gU.append=function(t,n){this._pairs.push([t,n])};gU.toString=function(t){const n=t?function(r){return t.call(this,r,y2)}:y2;return this._pairs.map(function(l){return n(l[0])+"="+n(l[1])},"").join("&")};function Cae(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function yU(e,t,n){if(!t)return e;const r=n&&n.encode||Cae,l=n&&n.serialize;let d;if(l?d=l(t,n):d=qt.isURLSearchParams(t)?t.toString():new uI(t,n).toString(r),d){const f=e.indexOf("#");f!==-1&&(e=e.slice(0,f)),e+=(e.indexOf("?")===-1?"?":"&")+d}return e}class b2{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){qt.forEach(this.handlers,function(r){r!==null&&t(r)})}}const bU={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kae=typeof URLSearchParams<"u"?URLSearchParams:uI,Aae=typeof FormData<"u"?FormData:null,Mae=typeof Blob<"u"?Blob:null,Dae={isBrowser:!0,classes:{URLSearchParams:kae,FormData:Aae,Blob:Mae},protocols:["http","https","file","blob","url","data"]},vU=typeof window<"u"&&typeof document<"u",Rae=(e=>vU&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),Iae=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Pae=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:vU,hasStandardBrowserEnv:Rae,hasStandardBrowserWebWorkerEnv:Iae},Symbol.toStringTag,{value:"Module"})),md={...Pae,...Dae};function Oae(e,t){return xC(e,new md.classes.URLSearchParams,Object.assign({visitor:function(n,r,l,d){return md.isNode&&qt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},t))}function Lae(e){return qt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Nae(e){const t={},n=Object.keys(e);let r;const l=n.length;let d;for(r=0;r<l;r++)d=n[r],t[d]=e[d];return t}function _U(e){function t(n,r,l,d){let f=n[d++];if(f==="__proto__")return!0;const y=Number.isFinite(+f),a=d>=n.length;return f=!f&&qt.isArray(l)?l.length:f,a?(qt.hasOwnProp(l,f)?l[f]=[l[f],r]:l[f]=r,!y):((!l[f]||!qt.isObject(l[f]))&&(l[f]=[]),t(n,r,l[f],d)&&qt.isArray(l[f])&&(l[f]=Nae(l[f])),!y)}if(qt.isFormData(e)&&qt.isFunction(e.entries)){const n={};return qt.forEachEntry(e,(r,l)=>{t(Lae(r),l,n,0)}),n}return null}function zae(e,t,n){if(qt.isString(e))try{return(t||JSON.parse)(e),qt.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const dI={transitional:bU,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",l=r.indexOf("application/json")>-1,d=qt.isObject(t);if(d&&qt.isHTMLForm(t)&&(t=new FormData(t)),qt.isFormData(t))return l?JSON.stringify(_U(t)):t;if(qt.isArrayBuffer(t)||qt.isBuffer(t)||qt.isStream(t)||qt.isFile(t)||qt.isBlob(t))return t;if(qt.isArrayBufferView(t))return t.buffer;if(qt.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let y;if(d){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Oae(t,this.formSerializer).toString();if((y=qt.isFileList(t))||r.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return xC(y?{"files[]":t}:t,a&&new a,this.formSerializer)}}return d||l?(n.setContentType("application/json",!1),zae(t)):t}],transformResponse:[function(t){const n=this.transitional||dI.transitional,r=n&&n.forcedJSONParsing,l=this.responseType==="json";if(t&&qt.isString(t)&&(r&&!this.responseType||l)){const f=!(n&&n.silentJSONParsing)&&l;try{return JSON.parse(t)}catch(y){if(f)throw y.name==="SyntaxError"?vo.from(y,vo.ERR_BAD_RESPONSE,this,null,this.response):y}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:md.classes.FormData,Blob:md.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};qt.forEach(["delete","get","head","post","put","patch"],e=>{dI.headers[e]={}});const hI=dI,Bae=qt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Fae=e=>{const t={};let n,r,l;return e&&e.split(`
`).forEach(function(f){l=f.indexOf(":"),n=f.substring(0,l).trim().toLowerCase(),r=f.substring(l+1).trim(),!(!n||t[n]&&Bae[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},v2=Symbol("internals");function O_(e){return e&&String(e).trim().toLowerCase()}function aT(e){return e===!1||e==null?e:qt.isArray(e)?e.map(aT):String(e)}function jae(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const $ae=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function I3(e,t,n,r,l){if(qt.isFunction(r))return r.call(this,t,n);if(l&&(t=n),!!qt.isString(t)){if(qt.isString(r))return t.indexOf(r)!==-1;if(qt.isRegExp(r))return r.test(t)}}function Uae(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function Vae(e,t){const n=qt.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(l,d,f){return this[r].call(this,t,l,d,f)},configurable:!0})})}class wC{constructor(t){t&&this.set(t)}set(t,n,r){const l=this;function d(y,a,E){const C=O_(a);if(!C)throw new Error("header name must be a non-empty string");const M=qt.findKey(l,C);(!M||l[M]===void 0||E===!0||E===void 0&&l[M]!==!1)&&(l[M||a]=aT(y))}const f=(y,a)=>qt.forEach(y,(E,C)=>d(E,C,a));return qt.isPlainObject(t)||t instanceof this.constructor?f(t,n):qt.isString(t)&&(t=t.trim())&&!$ae(t)?f(Fae(t),n):t!=null&&d(n,t,r),this}get(t,n){if(t=O_(t),t){const r=qt.findKey(this,t);if(r){const l=this[r];if(!n)return l;if(n===!0)return jae(l);if(qt.isFunction(n))return n.call(this,l,r);if(qt.isRegExp(n))return n.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=O_(t),t){const r=qt.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||I3(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let l=!1;function d(f){if(f=O_(f),f){const y=qt.findKey(r,f);y&&(!n||I3(r,r[y],y,n))&&(delete r[y],l=!0)}}return qt.isArray(t)?t.forEach(d):d(t),l}clear(t){const n=Object.keys(this);let r=n.length,l=!1;for(;r--;){const d=n[r];(!t||I3(this,this[d],d,t,!0))&&(delete this[d],l=!0)}return l}normalize(t){const n=this,r={};return qt.forEach(this,(l,d)=>{const f=qt.findKey(r,d);if(f){n[f]=aT(l),delete n[d];return}const y=t?Uae(d):String(d).trim();y!==d&&delete n[d],n[y]=aT(l),r[y]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return qt.forEach(this,(r,l)=>{r!=null&&r!==!1&&(n[l]=t&&qt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(l=>r.set(l)),r}static accessor(t){const r=(this[v2]=this[v2]={accessors:{}}).accessors,l=this.prototype;function d(f){const y=O_(f);r[y]||(Vae(l,f),r[y]=!0)}return qt.isArray(t)?t.forEach(d):d(t),this}}wC.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);qt.reduceDescriptors(wC.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});qt.freezeMethods(wC);const Vh=wC;function P3(e,t){const n=this||hI,r=t||n,l=Vh.from(r.headers);let d=r.data;return qt.forEach(e,function(y){d=y.call(n,d,l.normalize(),t?t.status:void 0)}),l.normalize(),d}function xU(e){return!!(e&&e.__CANCEL__)}function Rx(e,t,n){vo.call(this,e??"canceled",vo.ERR_CANCELED,t,n),this.name="CanceledError"}qt.inherits(Rx,vo,{__CANCEL__:!0});function Hae(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new vo("Request failed with status code "+n.status,[vo.ERR_BAD_REQUEST,vo.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const Wae=md.hasStandardBrowserEnv?{write(e,t,n,r,l,d){const f=[e+"="+encodeURIComponent(t)];qt.isNumber(n)&&f.push("expires="+new Date(n).toGMTString()),qt.isString(r)&&f.push("path="+r),qt.isString(l)&&f.push("domain="+l),d===!0&&f.push("secure"),document.cookie=f.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Yae(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Gae(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function wU(e,t){return e&&!Yae(t)?Gae(e,t):t}const qae=md.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function l(d){let f=d;return t&&(n.setAttribute("href",f),f=n.href),n.setAttribute("href",f),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=l(window.location.href),function(f){const y=qt.isString(f)?l(f):f;return y.protocol===r.protocol&&y.host===r.host}}():function(){return function(){return!0}}();function Zae(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Kae(e,t){e=e||10;const n=new Array(e),r=new Array(e);let l=0,d=0,f;return t=t!==void 0?t:1e3,function(a){const E=Date.now(),C=r[d];f||(f=E),n[l]=a,r[l]=E;let M=d,P=0;for(;M!==l;)P+=n[M++],M=M%e;if(l=(l+1)%e,l===d&&(d=(d+1)%e),E-f<t)return;const N=C&&E-C;return N?Math.round(P*1e3/N):void 0}}function _2(e,t){let n=0;const r=Kae(50,250);return l=>{const d=l.loaded,f=l.lengthComputable?l.total:void 0,y=d-n,a=r(y),E=d<=f;n=d;const C={loaded:d,total:f,progress:f?d/f:void 0,bytes:y,rate:a||void 0,estimated:a&&f&&E?(f-d)/a:void 0,event:l};C[t?"download":"upload"]=!0,e(C)}}const Xae=typeof XMLHttpRequest<"u",Qae=Xae&&function(e){return new Promise(function(n,r){let l=e.data;const d=Vh.from(e.headers).normalize();let{responseType:f,withXSRFToken:y}=e,a;function E(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}let C;if(qt.isFormData(l)){if(md.hasStandardBrowserEnv||md.hasStandardBrowserWebWorkerEnv)d.setContentType(!1);else if((C=d.getContentType())!==!1){const[$,...Z]=C?C.split(";").map(q=>q.trim()).filter(Boolean):[];d.setContentType([$||"multipart/form-data",...Z].join("; "))}}let M=new XMLHttpRequest;if(e.auth){const $=e.auth.username||"",Z=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";d.set("Authorization","Basic "+btoa($+":"+Z))}const P=wU(e.baseURL,e.url);M.open(e.method.toUpperCase(),yU(P,e.params,e.paramsSerializer),!0),M.timeout=e.timeout;function N(){if(!M)return;const $=Vh.from("getAllResponseHeaders"in M&&M.getAllResponseHeaders()),q={data:!f||f==="text"||f==="json"?M.responseText:M.response,status:M.status,statusText:M.statusText,headers:$,config:e,request:M};Hae(function(Q){n(Q),E()},function(Q){r(Q),E()},q),M=null}if("onloadend"in M?M.onloadend=N:M.onreadystatechange=function(){!M||M.readyState!==4||M.status===0&&!(M.responseURL&&M.responseURL.indexOf("file:")===0)||setTimeout(N)},M.onabort=function(){M&&(r(new vo("Request aborted",vo.ECONNABORTED,e,M)),M=null)},M.onerror=function(){r(new vo("Network Error",vo.ERR_NETWORK,e,M)),M=null},M.ontimeout=function(){let Z=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const q=e.transitional||bU;e.timeoutErrorMessage&&(Z=e.timeoutErrorMessage),r(new vo(Z,q.clarifyTimeoutError?vo.ETIMEDOUT:vo.ECONNABORTED,e,M)),M=null},md.hasStandardBrowserEnv&&(y&&qt.isFunction(y)&&(y=y(e)),y||y!==!1&&qae(P))){const $=e.xsrfHeaderName&&e.xsrfCookieName&&Wae.read(e.xsrfCookieName);$&&d.set(e.xsrfHeaderName,$)}l===void 0&&d.setContentType(null),"setRequestHeader"in M&&qt.forEach(d.toJSON(),function(Z,q){M.setRequestHeader(q,Z)}),qt.isUndefined(e.withCredentials)||(M.withCredentials=!!e.withCredentials),f&&f!=="json"&&(M.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&M.addEventListener("progress",_2(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&M.upload&&M.upload.addEventListener("progress",_2(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=$=>{M&&(r(!$||$.type?new Rx(null,e,M):$),M.abort(),M=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const F=Zae(P);if(F&&md.protocols.indexOf(F)===-1){r(new vo("Unsupported protocol "+F+":",vo.ERR_BAD_REQUEST,e));return}M.send(l||null)})},$D={http:Eae,xhr:Qae};qt.forEach($D,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const x2=e=>`- ${e}`,Jae=e=>qt.isFunction(e)||e===null||e===!1,EU={getAdapter:e=>{e=qt.isArray(e)?e:[e];const{length:t}=e;let n,r;const l={};for(let d=0;d<t;d++){n=e[d];let f;if(r=n,!Jae(n)&&(r=$D[(f=String(n)).toLowerCase()],r===void 0))throw new vo(`Unknown adapter '${f}'`);if(r)break;l[f||"#"+d]=r}if(!r){const d=Object.entries(l).map(([y,a])=>`adapter ${y} `+(a===!1?"is not supported by the environment":"is not available in the build"));let f=t?d.length>1?`since :
`+d.map(x2).join(`
`):" "+x2(d[0]):"as no adapter specified";throw new vo("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return r},adapters:$D};function O3(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Rx(null,e)}function w2(e){return O3(e),e.headers=Vh.from(e.headers),e.data=P3.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),EU.getAdapter(e.adapter||hI.adapter)(e).then(function(r){return O3(e),r.data=P3.call(e,e.transformResponse,r),r.headers=Vh.from(r.headers),r},function(r){return xU(r)||(O3(e),r&&r.response&&(r.response.data=P3.call(e,e.transformResponse,r.response),r.response.headers=Vh.from(r.response.headers))),Promise.reject(r)})}const E2=e=>e instanceof Vh?{...e}:e;function Hb(e,t){t=t||{};const n={};function r(E,C,M){return qt.isPlainObject(E)&&qt.isPlainObject(C)?qt.merge.call({caseless:M},E,C):qt.isPlainObject(C)?qt.merge({},C):qt.isArray(C)?C.slice():C}function l(E,C,M){if(qt.isUndefined(C)){if(!qt.isUndefined(E))return r(void 0,E,M)}else return r(E,C,M)}function d(E,C){if(!qt.isUndefined(C))return r(void 0,C)}function f(E,C){if(qt.isUndefined(C)){if(!qt.isUndefined(E))return r(void 0,E)}else return r(void 0,C)}function y(E,C,M){if(M in t)return r(E,C);if(M in e)return r(void 0,E)}const a={url:d,method:d,data:d,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:y,headers:(E,C)=>l(E2(E),E2(C),!0)};return qt.forEach(Object.keys(Object.assign({},e,t)),function(C){const M=a[C]||l,P=M(e[C],t[C],C);qt.isUndefined(P)&&M!==y||(n[C]=P)}),n}const TU="1.6.8",fI={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{fI[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const T2={};fI.transitional=function(t,n,r){function l(d,f){return"[Axios v"+TU+"] Transitional option '"+d+"'"+f+(r?". "+r:"")}return(d,f,y)=>{if(t===!1)throw new vo(l(f," has been removed"+(n?" in "+n:"")),vo.ERR_DEPRECATED);return n&&!T2[f]&&(T2[f]=!0,console.warn(l(f," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(d,f,y):!0}};function ese(e,t,n){if(typeof e!="object")throw new vo("options must be an object",vo.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let l=r.length;for(;l-- >0;){const d=r[l],f=t[d];if(f){const y=e[d],a=y===void 0||f(y,d,e);if(a!==!0)throw new vo("option "+d+" must be "+a,vo.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new vo("Unknown option "+d,vo.ERR_BAD_OPTION)}}const UD={assertOptions:ese,validators:fI},hp=UD.validators;class tS{constructor(t){this.defaults=t,this.interceptors={request:new b2,response:new b2}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let l;Error.captureStackTrace?Error.captureStackTrace(l={}):l=new Error;const d=l.stack?l.stack.replace(/^.+\n/,""):"";r.stack?d&&!String(r.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+d):r.stack=d}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Hb(this.defaults,n);const{transitional:r,paramsSerializer:l,headers:d}=n;r!==void 0&&UD.assertOptions(r,{silentJSONParsing:hp.transitional(hp.boolean),forcedJSONParsing:hp.transitional(hp.boolean),clarifyTimeoutError:hp.transitional(hp.boolean)},!1),l!=null&&(qt.isFunction(l)?n.paramsSerializer={serialize:l}:UD.assertOptions(l,{encode:hp.function,serialize:hp.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let f=d&&qt.merge(d.common,d[n.method]);d&&qt.forEach(["delete","get","head","post","put","patch","common"],F=>{delete d[F]}),n.headers=Vh.concat(f,d);const y=[];let a=!0;this.interceptors.request.forEach(function($){typeof $.runWhen=="function"&&$.runWhen(n)===!1||(a=a&&$.synchronous,y.unshift($.fulfilled,$.rejected))});const E=[];this.interceptors.response.forEach(function($){E.push($.fulfilled,$.rejected)});let C,M=0,P;if(!a){const F=[w2.bind(this),void 0];for(F.unshift.apply(F,y),F.push.apply(F,E),P=F.length,C=Promise.resolve(n);M<P;)C=C.then(F[M++],F[M++]);return C}P=y.length;let N=n;for(M=0;M<P;){const F=y[M++],$=y[M++];try{N=F(N)}catch(Z){$.call(this,Z);break}}try{C=w2.call(this,N)}catch(F){return Promise.reject(F)}for(M=0,P=E.length;M<P;)C=C.then(E[M++],E[M++]);return C}getUri(t){t=Hb(this.defaults,t);const n=wU(t.baseURL,t.url);return yU(n,t.params,t.paramsSerializer)}}qt.forEach(["delete","get","head","options"],function(t){tS.prototype[t]=function(n,r){return this.request(Hb(r||{},{method:t,url:n,data:(r||{}).data}))}});qt.forEach(["post","put","patch"],function(t){function n(r){return function(d,f,y){return this.request(Hb(y||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:d,data:f}))}}tS.prototype[t]=n(),tS.prototype[t+"Form"]=n(!0)});const sT=tS;class pI{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(d){n=d});const r=this;this.promise.then(l=>{if(!r._listeners)return;let d=r._listeners.length;for(;d-- >0;)r._listeners[d](l);r._listeners=null}),this.promise.then=l=>{let d;const f=new Promise(y=>{r.subscribe(y),d=y}).then(l);return f.cancel=function(){r.unsubscribe(d)},f},t(function(d,f,y){r.reason||(r.reason=new Rx(d,f,y),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new pI(function(l){t=l}),cancel:t}}}const tse=pI;function nse(e){return function(n){return e.apply(null,n)}}function rse(e){return qt.isObject(e)&&e.isAxiosError===!0}const VD={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(VD).forEach(([e,t])=>{VD[t]=e});const ose=VD;function SU(e){const t=new sT(e),n=iU(sT.prototype.request,t);return qt.extend(n,sT.prototype,t,{allOwnKeys:!0}),qt.extend(n,t,null,{allOwnKeys:!0}),n.create=function(l){return SU(Hb(e,l))},n}const ha=SU(hI);ha.Axios=sT;ha.CanceledError=Rx;ha.CancelToken=tse;ha.isCancel=xU;ha.VERSION=TU;ha.toFormData=xC;ha.AxiosError=vo;ha.Cancel=ha.CanceledError;ha.all=function(t){return Promise.all(t)};ha.spread=nse;ha.isAxiosError=rse;ha.mergeConfig=Hb;ha.AxiosHeaders=Vh;ha.formToJSON=e=>_U(qt.isHTMLForm(e)?new FormData(e):e);ha.getAdapter=EU.getAdapter;ha.HttpStatusCode=ose;ha.default=ha;const ho=ha.create({baseURL:"http://18.205.226.58/api/v1/"}),ise=async()=>{const e=localStorage.getItem("token");if(e){ho.defaults.headers.common.Authorization=`Token ${e}`;const t=await ho.get("users/");return t.status===200?{user:t.data.email}:null}else return console.log("userConfirmation no token in localStorage"),null},ase=async(e,t)=>{let n=await ho.post("users/signup/",{email:e,password:t});if(n.status===201){let{user:r,token:l}=n.data;return localStorage.setItem("token",l),ho.defaults.headers.common.Authorization=`Token ${l}`,r}return alert(n.data),null},sse=async(e,t)=>{const n=await ho.post("users/login/",{email:e,password:t});if(n.status===200){let{user:r,token:l}=n.data;return localStorage.setItem("token",l),ho.defaults.headers.common.Authorization=`Token ${l}`,r}return alert("Invalid Login Credentials"),null},lse=async()=>{if((await ho.post("/users/logout/")).status===204)return localStorage.removeItem("token"),delete ho.defaults.headers.common.Authorization,console.log("user logged out"),!0;alert("Logout failure.")};function cse({user:e,setUser:t,userImg:n,setUserProfileData:r}){const l=Ac(),d=async()=>{await lse()&&(t(null),r([]),l("/"))};cm();const f=j.forwardRef(({children:y,onClick:a},E)=>O.jsxs("a",{href:"",ref:E,onClick:C=>{C.preventDefault(),a(C)},style:{alignItems:"start"},children:[O.jsx("img",{src:n||oU,alt:"User Profile Image",style:{width:45,height:45,borderRadius:"50%",marginLeft:8}}),y]}));return f.displayName="CustomToggle",O.jsx(f2,{className:".bg-body-secondary",sticky:"top",collapseOnSelect:!0,children:O.jsxs(Zi,{fluid:!0,children:[O.jsx(f2.Brand,{as:va,to:"/profile",style:{paddingLeft:"6px"},children:O.jsx("img",{src:Uie,width:"80",height:"50",className:"d-inline-block align-top",alt:"ChangeMate Logo"})}),O.jsx(I_,{align:"end",children:e?O.jsxs(O.Fragment,{children:[O.jsx(I_.Link,{eventKey:"4",as:va,to:"/events",style:{marginTop:"2px"},children:"Search"}),O.jsx(I_.Link,{eventKey:"3",as:va,to:"/createevent",style:{marginTop:"2px"},children:"Create Event"}),O.jsxs(aa,{children:[O.jsx(aa.Toggle,{as:f,id:"dropdown-custom-components"}),O.jsxs(aa.Menu,{align:"end",children:[O.jsx(aa.Item,{as:va,to:"/profile",children:"Profile"}),O.jsx(aa.Item,{as:va,to:"/editprofile",children:"Update Profile"}),O.jsx(aa.Item,{as:va,to:"/FAQ",children:"FAQ"}),O.jsx(aa.Divider,{}),O.jsx(aa.Item,{onClick:()=>d(),children:"Log Out"})]})]})]}):O.jsxs(O.Fragment,{children:[O.jsx(I_.Link,{as:va,to:"/signup",children:"Sign Up"}),O.jsx(I_.Link,{as:va,to:"/login",children:"Log In"})]})})]})})}const CU=async e=>(await ho.get("userprofile/")).data,use=async e=>{const t=Object.fromEntries(Object.entries(e).filter(([r,l])=>l!=null&&(typeof l!="string"||l.trim()!=="")&&(!Array.isArray(l)||l.length>0)));let n=await ho.put("userprofile/edit_profile/",t);if(n.status===200)return n.data;console.log("error:",n.data)},dse=async e=>{const t=await ho.get(`userprofile/search/${e}/`);return t.status===200?t.data:(console.log("error:",t.data),null)};function hse(){const[e,t]=j.useState(Zte()),[n,r]=j.useState([]),l=Ac(),d=Tx();return j.useEffect(()=>{(async()=>{if(e)try{const M=await CU(e);r(M)}catch(M){console.error("Error fetching user profile data:",M)}})();let y=["/login","/signup"],a=["/login","/signup","/","/events"],E=y.includes(d.pathname),C=a.includes(d.pathname);e&&E?l("/profile"):!e&&!C&&l("/")},[e,d.pathname]),O.jsxs(O.Fragment,{children:[O.jsx(cse,{setUserProfileData:r,user:e,setUser:t,userImg:n.image}),O.jsx(Jte,{context:{user:e,setUser:t,userProfileData:n,setUserProfileData:r}})]})}const kU=j.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},l)=>(t=ur(t,"card-body"),O.jsx(n,{ref:l,className:Hn(e,t),...r})));kU.displayName="CardBody";const AU=kU,MU=j.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},l)=>(t=ur(t,"card-footer"),O.jsx(n,{ref:l,className:Hn(e,t),...r})));MU.displayName="CardFooter";const fse=MU,DU=j.forwardRef(({bsPrefix:e,className:t,as:n="div",...r},l)=>{const d=ur(e,"card-header"),f=j.useMemo(()=>({cardHeaderBsPrefix:d}),[d]);return O.jsx(L$.Provider,{value:f,children:O.jsx(n,{ref:l,...r,className:Hn(t,d)})})});DU.displayName="CardHeader";const pse=DU,RU=j.forwardRef(({bsPrefix:e,className:t,variant:n,as:r="img",...l},d)=>{const f=ur(e,"card-img");return O.jsx(r,{ref:d,className:Hn(n?`${f}-${n}`:f,t),...l})});RU.displayName="CardImg";const mse=RU,IU=j.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},l)=>(t=ur(t,"card-img-overlay"),O.jsx(n,{ref:l,className:Hn(e,t),...r})));IU.displayName="CardImgOverlay";const gse=IU,PU=j.forwardRef(({className:e,bsPrefix:t,as:n="a",...r},l)=>(t=ur(t,"card-link"),O.jsx(n,{ref:l,className:Hn(e,t),...r})));PU.displayName="CardLink";const yse=PU,bse=yC("h6"),OU=j.forwardRef(({className:e,bsPrefix:t,as:n=bse,...r},l)=>(t=ur(t,"card-subtitle"),O.jsx(n,{ref:l,className:Hn(e,t),...r})));OU.displayName="CardSubtitle";const vse=OU,LU=j.forwardRef(({className:e,bsPrefix:t,as:n="p",...r},l)=>(t=ur(t,"card-text"),O.jsx(n,{ref:l,className:Hn(e,t),...r})));LU.displayName="CardText";const _se=LU,xse=yC("h5"),NU=j.forwardRef(({className:e,bsPrefix:t,as:n=xse,...r},l)=>(t=ur(t,"card-title"),O.jsx(n,{ref:l,className:Hn(e,t),...r})));NU.displayName="CardTitle";const wse=NU,zU=j.forwardRef(({bsPrefix:e,className:t,bg:n,text:r,border:l,body:d=!1,children:f,as:y="div",...a},E)=>{const C=ur(e,"card");return O.jsx(y,{ref:E,...a,className:Hn(t,C,n&&`bg-${n}`,r&&`text-${r}`,l&&`border-${l}`),children:d?O.jsx(AU,{children:f}):f})});zU.displayName="Card";const io=Object.assign(zU,{Img:mse,Title:wse,Subtitle:vse,Body:AU,Link:yse,Text:_se,Header:pse,Footer:fse,ImgOverlay:gse});function Ese(e,t){const n=j.useRef(!0);j.useEffect(()=>{if(n.current){n.current=!1;return}return e()},t)}const HD=2**31-1;function BU(e,t,n){const r=n-Date.now();e.current=r<=HD?setTimeout(t,r):setTimeout(()=>BU(e,t,n),HD)}function Tse(){const e=VR(),t=j.useRef();return oI(()=>clearTimeout(t.current)),j.useMemo(()=>{const n=()=>clearTimeout(t.current);function r(l,d=0){e()&&(n(),d<=HD?t.current=setTimeout(l,d):BU(t,l,Date.now()+d))}return{set:r,clear:n,handleRef:t}},[])}const FU=j.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},l)=>(t=ur(t,"carousel-caption"),O.jsx(n,{ref:l,className:Hn(e,t),...r})));FU.displayName="CarouselCaption";const Sse=FU,jU=j.forwardRef(({as:e="div",bsPrefix:t,className:n,...r},l)=>{const d=Hn(n,ur(t,"carousel-item"));return O.jsx(e,{ref:l,...r,className:d})});jU.displayName="CarouselItem";const Cse=jU;function S2(e,t){let n=0;return j.Children.map(e,r=>j.isValidElement(r)?t(r,n++):r)}function kse(e,t){let n=0;j.Children.forEach(e,r=>{j.isValidElement(r)&&t(r,n++)})}function Ase(e,t){return j.Children.toArray(e).some(n=>j.isValidElement(n)&&n.type===t)}const Mse=40;function Dse(e){if(!e||!e.style||!e.parentNode||!e.parentNode.style)return!1;const t=getComputedStyle(e);return t.display!=="none"&&t.visibility!=="hidden"&&getComputedStyle(e.parentNode).display!=="none"}const $U=j.forwardRef(({defaultActiveIndex:e=0,...t},n)=>{const{as:r="div",bsPrefix:l,slide:d=!0,fade:f=!1,controls:y=!0,indicators:a=!0,indicatorLabels:E=[],activeIndex:C,onSelect:M,onSlide:P,onSlid:N,interval:F=5e3,keyboard:$=!0,onKeyDown:Z,pause:q="hover",onMouseOver:K,onMouseOut:Q,wrap:te=!0,touch:ie=!0,onTouchStart:ue,onTouchMove:re,onTouchEnd:me,prevIcon:ve=O.jsx("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:De="Previous",nextIcon:je=O.jsx("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:Be="Next",variant:Ue,className:Ge,children:ze,...ot}=Mx({defaultActiveIndex:e,...t},{activeIndex:"onSelect"}),st=ur(l,"carousel"),Re=$R(),bt=j.useRef(null),[Lt,Ct]=j.useState("next"),[Nt,tn]=j.useState(!1),[Dt,cn]=j.useState(!1),[Mt,Vn]=j.useState(C||0);j.useEffect(()=>{!Dt&&C!==Mt&&(bt.current?Ct(bt.current):Ct((C||0)>Mt?"next":"prev"),d&&cn(!0),Vn(C||0))},[C,Dt,Mt,d]),j.useEffect(()=>{bt.current&&(bt.current=null)});let nt=0,Pn;kse(ze,(it,ct)=>{++nt,ct===C&&(Pn=it.props.interval)});const Un=O9(Pn),En=j.useCallback(it=>{if(Dt)return;let ct=Mt-1;if(ct<0){if(!te)return;ct=nt-1}bt.current="prev",M?.(ct,it)},[Dt,Mt,M,te,nt]),bn=ai(it=>{if(Dt)return;let ct=Mt+1;if(ct>=nt){if(!te)return;ct=0}bt.current="next",M?.(ct,it)}),Fn=j.useRef();j.useImperativeHandle(n,()=>({element:Fn.current,prev:En,next:bn}));const On=ai(()=>{!document.hidden&&Dse(Fn.current)&&(Re?En():bn())}),an=Lt==="next"?"start":"end";Ese(()=>{d||(P?.(Mt,an),N?.(Mt,an))},[Mt]);const qr=`${st}-item-${Lt}`,hn=`${st}-item-${an}`,Wr=j.useCallback(it=>{rI(it),P?.(Mt,an)},[P,Mt,an]),go=j.useCallback(()=>{cn(!1),N?.(Mt,an)},[N,Mt,an]),pr=j.useCallback(it=>{if($&&!/input|textarea/i.test(it.target.tagName))switch(it.key){case"ArrowLeft":it.preventDefault(),Re?bn(it):En(it);return;case"ArrowRight":it.preventDefault(),Re?En(it):bn(it);return}Z?.(it)},[$,Z,En,bn,Re]),Pr=j.useCallback(it=>{q==="hover"&&tn(!0),K?.(it)},[q,K]),to=j.useCallback(it=>{tn(!1),Q?.(it)},[Q]),Mr=j.useRef(0),mr=j.useRef(0),eo=Tse(),Ke=j.useCallback(it=>{Mr.current=it.touches[0].clientX,mr.current=0,q==="hover"&&tn(!0),ue?.(it)},[q,ue]),pe=j.useCallback(it=>{it.touches&&it.touches.length>1?mr.current=0:mr.current=it.touches[0].clientX-Mr.current,re?.(it)},[re]),we=j.useCallback(it=>{if(ie){const ct=mr.current;Math.abs(ct)>Mse&&(ct>0?En(it):bn(it))}q==="hover"&&eo.set(()=>{tn(!1)},F||void 0),me?.(it)},[ie,q,En,bn,eo,F,me]),Pe=F!=null&&!Nt&&!Dt,at=j.useRef();j.useEffect(()=>{var it,ct;if(!Pe)return;const tt=Re?En:bn;return at.current=window.setInterval(document.visibilityState?On:tt,(it=(ct=Un.current)!=null?ct:F)!=null?it:void 0),()=>{at.current!==null&&clearInterval(at.current)}},[Pe,En,bn,Un,F,On,Re]);const ft=j.useMemo(()=>a&&Array.from({length:nt},(it,ct)=>tt=>{M?.(ct,tt)}),[a,nt,M]);return O.jsxs(r,{ref:Fn,...ot,onKeyDown:pr,onMouseOver:Pr,onMouseOut:to,onTouchStart:Ke,onTouchMove:pe,onTouchEnd:we,className:Hn(Ge,st,d&&"slide",f&&`${st}-fade`,Ue&&`${st}-${Ue}`),children:[a&&O.jsx("div",{className:`${st}-indicators`,children:S2(ze,(it,ct)=>O.jsx("button",{type:"button","data-bs-target":"","aria-label":E!=null&&E.length?E[ct]:`Slide ${ct+1}`,className:ct===Mt?"active":void 0,onClick:ft?ft[ct]:void 0,"aria-current":ct===Mt},ct))}),O.jsx("div",{className:`${st}-inner`,children:S2(ze,(it,ct)=>{const tt=ct===Mt;return d?O.jsx(gC,{in:tt,onEnter:tt?Wr:void 0,onEntered:tt?go:void 0,addEndListener:mC,children:(jt,Ut)=>j.cloneElement(it,{...Ut,className:Hn(it.props.className,tt&&jt!=="entered"&&qr,(jt==="entered"||jt==="exiting")&&"active",(jt==="entering"||jt==="exiting")&&hn)})}):j.cloneElement(it,{className:Hn(it.props.className,tt&&"active")})})}),y&&O.jsxs(O.Fragment,{children:[(te||C!==0)&&O.jsxs(QT,{className:`${st}-control-prev`,onClick:En,children:[ve,De&&O.jsx("span",{className:"visually-hidden",children:De})]}),(te||C!==nt-1)&&O.jsxs(QT,{className:`${st}-control-next`,onClick:bn,children:[je,Be&&O.jsx("span",{className:"visually-hidden",children:Be})]})]})]})});$U.displayName="Carousel";const sd=Object.assign($U,{Caption:Sse,Item:Cse});function Rse({as:e,bsPrefix:t,className:n,...r}){t=ur(t,"col");const l=M9(),d=D9(),f=[],y=[];return l.forEach(a=>{const E=r[a];delete r[a];let C,M,P;typeof E=="object"&&E!=null?{span:C,offset:M,order:P}=E:C=E;const N=a!==d?`-${a}`:"";C&&f.push(C===!0?`${t}${N}`:`${t}${N}-${C}`),P!=null&&y.push(`order${N}-${P}`),M!=null&&y.push(`offset${N}-${M}`)}),[{...r,className:Hn(n,...f,...y)},{as:e,bsPrefix:t,spans:f}]}const UU=j.forwardRef((e,t)=>{const[{className:n,...r},{as:l="div",bsPrefix:d,spans:f}]=Rse(e);return O.jsx(l,{...r,ref:t,className:Hn(n,!f.length&&d)})});UU.displayName="Col";const Ir=UU,Ise={id:mo.string,href:mo.string,onClick:mo.func,title:mo.node.isRequired,disabled:mo.bool,align:Toe,menuRole:mo.string,renderMenuOnMount:mo.bool,rootCloseEvent:mo.string,menuVariant:mo.oneOf(["dark"]),flip:mo.bool,bsPrefix:mo.string,variant:mo.string,size:mo.string},mI=j.forwardRef(({title:e,children:t,bsPrefix:n,rootCloseEvent:r,variant:l,size:d,menuRole:f,renderMenuOnMount:y,disabled:a,href:E,id:C,menuVariant:M,flip:P,...N},F)=>O.jsxs(aa,{ref:F,...N,children:[O.jsx(A$,{id:C,href:E,size:d,variant:l,disabled:a,childBsPrefix:n,children:e}),O.jsx(S$,{role:f,renderOnMount:y,rootCloseEvent:r,variant:M,flip:P,children:t})]}));mI.displayName="DropdownButton";mI.propTypes=Ise;const mb=mI,Pse={type:mo.string,tooltip:mo.bool,as:mo.elementType},gI=j.forwardRef(({as:e="div",className:t,type:n="valid",tooltip:r=!1,...l},d)=>O.jsx(e,{...l,ref:d,className:Hn(t,`${n}-${r?"tooltip":"feedback"}`)}));gI.displayName="Feedback";gI.propTypes=Pse;const VU=gI,Ose=j.createContext({}),ef=Ose,HU=j.forwardRef(({id:e,bsPrefix:t,className:n,type:r="checkbox",isValid:l=!1,isInvalid:d=!1,as:f="input",...y},a)=>{const{controlId:E}=j.useContext(ef);return t=ur(t,"form-check-input"),O.jsx(f,{...y,ref:a,type:r,id:e||E,className:Hn(n,t,l&&"is-valid",d&&"is-invalid")})});HU.displayName="FormCheckInput";const EC=HU,WU=j.forwardRef(({bsPrefix:e,className:t,htmlFor:n,...r},l)=>{const{controlId:d}=j.useContext(ef);return e=ur(e,"form-check-label"),O.jsx("label",{...r,ref:l,htmlFor:n||d,className:Hn(t,e)})});WU.displayName="FormCheckLabel";const WD=WU,YU=j.forwardRef(({id:e,bsPrefix:t,bsSwitchPrefix:n,inline:r=!1,reverse:l=!1,disabled:d=!1,isValid:f=!1,isInvalid:y=!1,feedbackTooltip:a=!1,feedback:E,feedbackType:C,className:M,style:P,title:N="",type:F="checkbox",label:$,children:Z,as:q="input",...K},Q)=>{t=ur(t,"form-check"),n=ur(n,"form-switch");const{controlId:te}=j.useContext(ef),ie=j.useMemo(()=>({controlId:e||te}),[te,e]),ue=!Z&&$!=null&&$!==!1||Ase(Z,WD),re=O.jsx(EC,{...K,type:F==="switch"?"checkbox":F,ref:Q,isValid:f,isInvalid:y,disabled:d,as:q});return O.jsx(ef.Provider,{value:ie,children:O.jsx("div",{style:P,className:Hn(M,ue&&t,r&&`${t}-inline`,l&&`${t}-reverse`,F==="switch"&&n),children:Z||O.jsxs(O.Fragment,{children:[re,ue&&O.jsx(WD,{title:N,children:$}),E&&O.jsx(VU,{type:C,tooltip:a,children:E})]})})})});YU.displayName="FormCheck";const nS=Object.assign(YU,{Input:EC,Label:WD}),GU=j.forwardRef(({bsPrefix:e,type:t,size:n,htmlSize:r,id:l,className:d,isValid:f=!1,isInvalid:y=!1,plaintext:a,readOnly:E,as:C="input",...M},P)=>{const{controlId:N}=j.useContext(ef);return e=ur(e,"form-control"),O.jsx(C,{...M,type:t,size:r,ref:P,readOnly:E,id:l||N,className:Hn(d,a?`${e}-plaintext`:e,n&&`${e}-${n}`,t==="color"&&`${e}-color`,f&&"is-valid",y&&"is-invalid")})});GU.displayName="FormControl";const qU=Object.assign(GU,{Feedback:VU}),ZU=j.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},l)=>(t=ur(t,"form-floating"),O.jsx(n,{ref:l,className:Hn(e,t),...r})));ZU.displayName="FormFloating";const Lse=ZU,KU=j.forwardRef(({controlId:e,as:t="div",...n},r)=>{const l=j.useMemo(()=>({controlId:e}),[e]);return O.jsx(ef.Provider,{value:l,children:O.jsx(t,{...n,ref:r})})});KU.displayName="FormGroup";const XU=KU,QU=j.forwardRef(({as:e="label",bsPrefix:t,column:n=!1,visuallyHidden:r=!1,className:l,htmlFor:d,...f},y)=>{const{controlId:a}=j.useContext(ef);t=ur(t,"form-label");let E="col-form-label";typeof n=="string"&&(E=`${E} ${E}-${n}`);const C=Hn(l,t,r&&"visually-hidden",n&&E);return d=d||a,n?O.jsx(Ir,{ref:y,as:"label",className:C,htmlFor:d,...f}):O.jsx(e,{ref:y,className:C,htmlFor:d,...f})});QU.displayName="FormLabel";const Nse=QU,JU=j.forwardRef(({bsPrefix:e,className:t,id:n,...r},l)=>{const{controlId:d}=j.useContext(ef);return e=ur(e,"form-range"),O.jsx("input",{...r,type:"range",ref:l,className:Hn(t,e),id:n||d})});JU.displayName="FormRange";const zse=JU,eV=j.forwardRef(({bsPrefix:e,size:t,htmlSize:n,className:r,isValid:l=!1,isInvalid:d=!1,id:f,...y},a)=>{const{controlId:E}=j.useContext(ef);return e=ur(e,"form-select"),O.jsx("select",{...y,size:n,ref:a,className:Hn(r,e,t&&`${e}-${t}`,l&&"is-valid",d&&"is-invalid"),id:f||E})});eV.displayName="FormSelect";const Bse=eV,tV=j.forwardRef(({bsPrefix:e,className:t,as:n="small",muted:r,...l},d)=>(e=ur(e,"form-text"),O.jsx(n,{...l,ref:d,className:Hn(t,e,r&&"text-muted")})));tV.displayName="FormText";const Fse=tV,nV=j.forwardRef((e,t)=>O.jsx(nS,{...e,ref:t,type:"switch"}));nV.displayName="Switch";const jse=Object.assign(nV,{Input:nS.Input,Label:nS.Label}),rV=j.forwardRef(({bsPrefix:e,className:t,children:n,controlId:r,label:l,...d},f)=>(e=ur(e,"form-floating"),O.jsxs(XU,{ref:f,className:Hn(t,e),controlId:r,...d,children:[n,O.jsx("label",{htmlFor:r,children:l})]})));rV.displayName="FloatingLabel";const $se=rV,Use={_ref:mo.any,validated:mo.bool,as:mo.elementType},yI=j.forwardRef(({className:e,validated:t,as:n="form",...r},l)=>O.jsx(n,{...r,ref:l,className:Hn(e,t&&"was-validated")}));yI.displayName="Form";yI.propTypes=Use;const Sn=Object.assign(yI,{Group:XU,Control:qU,Floating:Lse,Check:nS,Switch:jse,Label:Nse,Text:Fse,Range:zse,Select:Bse,FloatingLabel:$se}),oV=j.forwardRef(({className:e,bsPrefix:t,as:n="span",...r},l)=>(t=ur(t,"input-group-text"),O.jsx(n,{ref:l,className:Hn(e,t),...r})));oV.displayName="InputGroupText";const bI=oV,Vse=e=>O.jsx(bI,{children:O.jsx(EC,{type:"checkbox",...e})}),Hse=e=>O.jsx(bI,{children:O.jsx(EC,{type:"radio",...e})}),iV=j.forwardRef(({bsPrefix:e,size:t,hasValidation:n,className:r,as:l="div",...d},f)=>{e=ur(e,"input-group");const y=j.useMemo(()=>({}),[]);return O.jsx(tI.Provider,{value:y,children:O.jsx(l,{ref:f,...d,className:Hn(r,e,t&&`${e}-${t}`,n&&"has-validation")})})});iV.displayName="InputGroup";const Bg=Object.assign(iV,{Text:bI,Radio:Hse,Checkbox:Vse}),aV=j.forwardRef(({bsPrefix:e,active:t,disabled:n,eventKey:r,className:l,variant:d,action:f,as:y,...a},E)=>{e=ur(e,"list-group-item");const[C,M]=nI({key:Vb(r,a.href),active:t,...a}),P=ai(F=>{if(n){F.preventDefault(),F.stopPropagation();return}C.onClick(F)});n&&a.tabIndex===void 0&&(a.tabIndex=-1,a["aria-disabled"]=!0);const N=y||(f?a.href?"a":"button":"div");return O.jsx(N,{ref:E,...a,...C,onClick:P,className:Hn(l,e,M.isActive&&"active",n&&"disabled",d&&`${e}-${d}`,f&&`${e}-action`)})});aV.displayName="ListGroupItem";const Wse=aV,sV=j.forwardRef((e,t)=>{const{className:n,bsPrefix:r,variant:l,horizontal:d,numbered:f,as:y="div",...a}=Mx(e,{activeKey:"onSelect"}),E=ur(r,"list-group");let C;return d&&(C=d===!0?"horizontal":`horizontal-${d}`),O.jsx(P$,{ref:t,...a,as:y,className:Hn(n,E,l&&`${E}-${l}`,C&&`${E}-${C}`,f&&`${E}-numbered`)})});sV.displayName="ListGroup";const cu=Object.assign(sV,{Item:Wse});var fE;function C2(e){if((!fE&&fE!==0||e)&&fv){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),fE=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return fE}const lV=j.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},l)=>(t=ur(t,"modal-body"),O.jsx(n,{ref:l,className:Hn(e,t),...r})));lV.displayName="ModalBody";const Yse=lV,cV=j.forwardRef(({bsPrefix:e,className:t,contentClassName:n,centered:r,size:l,fullscreen:d,children:f,scrollable:y,...a},E)=>{e=ur(e,"modal");const C=`${e}-dialog`,M=typeof d=="string"?`${e}-fullscreen-${d}`:`${e}-fullscreen`;return O.jsx("div",{...a,ref:E,className:Hn(C,t,l&&`${e}-${l}`,r&&`${C}-centered`,y&&`${C}-scrollable`,d&&M),children:O.jsx("div",{className:Hn(`${e}-content`,n),children:f})})});cV.displayName="ModalDialog";const uV=cV,dV=j.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},l)=>(t=ur(t,"modal-footer"),O.jsx(n,{ref:l,className:Hn(e,t),...r})));dV.displayName="ModalFooter";const Gse=dV,hV=j.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:r=!1,...l},d)=>(e=ur(e,"modal-header"),O.jsx(Z$,{ref:d,...l,className:Hn(t,e),closeLabel:n,closeButton:r})));hV.displayName="ModalHeader";const qse=hV,Zse=yC("h4"),fV=j.forwardRef(({className:e,bsPrefix:t,as:n=Zse,...r},l)=>(t=ur(t,"modal-title"),O.jsx(n,{ref:l,className:Hn(e,t),...r})));fV.displayName="ModalTitle";const Kse=fV;function Xse(e){return O.jsx(aI,{...e,timeout:null})}function Qse(e){return O.jsx(aI,{...e,timeout:null})}const pV=j.forwardRef(({bsPrefix:e,className:t,style:n,dialogClassName:r,contentClassName:l,children:d,dialogAs:f=uV,"data-bs-theme":y,"aria-labelledby":a,"aria-describedby":E,"aria-label":C,show:M=!1,animation:P=!0,backdrop:N=!0,keyboard:F=!0,onEscapeKeyDown:$,onShow:Z,onHide:q,container:K,autoFocus:Q=!0,enforceFocus:te=!0,restoreFocus:ie=!0,restoreFocusOptions:ue,onEntered:re,onExit:me,onExiting:ve,onEnter:De,onEntering:je,onExited:Be,backdropClassName:Ue,manager:Ge,...ze},ot)=>{const[st,Re]=j.useState({}),[bt,Lt]=j.useState(!1),Ct=j.useRef(!1),Nt=j.useRef(!1),tn=j.useRef(null),[Dt,cn]=L9(),Mt=dm(ot,cn),Vn=ai(q),nt=$R();e=ur(e,"modal");const Pn=j.useMemo(()=>({onHide:Vn}),[Vn]);function Un(){return Ge||J$({isRTL:nt})}function En(Ke){if(!fv)return;const pe=Un().getScrollbarWidth()>0,we=Ke.scrollHeight>kx(Ke).documentElement.clientHeight;Re({paddingRight:pe&&!we?C2():void 0,paddingLeft:!pe&&we?C2():void 0})}const bn=ai(()=>{Dt&&En(Dt.dialog)});oI(()=>{LD(window,"resize",bn),tn.current==null||tn.current()});const Fn=()=>{Ct.current=!0},On=Ke=>{Ct.current&&Dt&&Ke.target===Dt.dialog&&(Nt.current=!0),Ct.current=!1},an=()=>{Lt(!0),tn.current=$$(Dt.dialog,()=>{Lt(!1)})},qr=Ke=>{Ke.target===Ke.currentTarget&&an()},hn=Ke=>{if(N==="static"){qr(Ke);return}if(Nt.current||Ke.target!==Ke.currentTarget){Nt.current=!1;return}q?.()},Wr=Ke=>{F?$?.(Ke):(Ke.preventDefault(),N==="static"&&an())},go=(Ke,pe)=>{Ke&&En(Ke),De?.(Ke,pe)},pr=Ke=>{tn.current==null||tn.current(),me?.(Ke)},Pr=(Ke,pe)=>{je?.(Ke,pe),UR(window,"resize",bn)},to=Ke=>{Ke&&(Ke.style.display=""),Be?.(Ke),LD(window,"resize",bn)},Mr=j.useCallback(Ke=>O.jsx("div",{...Ke,className:Hn(`${e}-backdrop`,Ue,!P&&"show")}),[P,Ue,e]),mr={...n,...st};mr.display="block";const eo=Ke=>O.jsx("div",{role:"dialog",...Ke,style:mr,className:Hn(t,e,bt&&`${e}-static`,!P&&"show"),onClick:N?hn:void 0,onMouseUp:On,"data-bs-theme":y,"aria-label":C,"aria-labelledby":a,"aria-describedby":E,children:O.jsx(f,{...ze,onMouseDown:Fn,className:r,contentClassName:l,children:d})});return O.jsx(sI.Provider,{value:Pn,children:O.jsx(W$,{show:M,ref:Mt,backdrop:N,container:K,keyboard:!0,autoFocus:Q,enforceFocus:te,restoreFocus:ie,restoreFocusOptions:ue,onEscapeKeyDown:Wr,onShow:Z,onHide:q,onEnter:go,onEntering:Pr,onEntered:re,onExit:pr,onExiting:ve,onExited:to,manager:Un(),transition:P?Xse:void 0,backdropTransition:P?Qse:void 0,renderBackdrop:Mr,renderDialog:eo})})});pV.displayName="Modal";const Ph=Object.assign(pV,{Body:Yse,Header:qse,Title:Kse,Footer:Gse,Dialog:uV,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),mV=j.forwardRef(({bsPrefix:e,className:t,as:n="div",...r},l)=>{const d=ur(e,"row"),f=M9(),y=D9(),a=`${d}-cols`,E=[];return f.forEach(C=>{const M=r[C];delete r[C];let P;M!=null&&typeof M=="object"?{cols:P}=M:P=M;const N=C!==y?`-${C}`:"";P!=null&&E.push(`${a}${N}-${P}`)}),O.jsx(n,{ref:l,...r,className:Hn(t,d,...E)})});mV.displayName="Row";const Jr=mV;function gV(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(n=gV(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function fn(){for(var e,t,n=0,r="",l=arguments.length;n<l;n++)(e=arguments[n])&&(t=gV(e))&&(r&&(r+=" "),r+=t);return r}function vI(e,t){const n=Ae({},t);return Object.keys(e).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=Ae({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const l=e[r]||{},d=t[r];n[r]={},!d||!Object.keys(d)?n[r]=l:!l||!Object.keys(l)?n[r]=d:(n[r]=Ae({},d),Object.keys(l).forEach(f=>{n[r][f]=vI(l[f],d[f])}))}else n[r]===void 0&&(n[r]=e[r])}),n}function Or(e,t,n=void 0){const r={};return Object.keys(e).forEach(l=>{r[l]=e[l].reduce((d,f)=>{if(f){const y=t(f);y!==""&&d.push(y),n&&n[f]&&d.push(n[f])}return d},[]).join(" ")}),r}var Ji={},yV={exports:{}};(function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(yV);var yi=yV.exports;function p0(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const Jse=Object.freeze(Object.defineProperty({__proto__:null,default:p0},Symbol.toStringTag,{value:"Module"})),ele=Dd(Jse);function bV(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}const tle=Object.freeze(Object.defineProperty({__proto__:null,default:bV},Symbol.toStringTag,{value:"Module"})),nle=Dd(tle);var vV=yi;Object.defineProperty(Ji,"__esModule",{value:!0});var da=Ji.alpha=EV;Ji.blend=gle;Ji.colorChannel=void 0;var rle=Ji.darken=xI;Ji.decomposeColor=Tc;var ole=Ji.emphasize=TV,ile=Ji.getContrastRatio=dle;Ji.getLuminance=rS;Ji.hexToRgb=_V;Ji.hslToRgb=wV;var ale=Ji.lighten=wI;Ji.private_safeAlpha=hle;Ji.private_safeColorChannel=void 0;Ji.private_safeDarken=fle;Ji.private_safeEmphasize=mle;Ji.private_safeLighten=ple;Ji.recomposeColor=yv;Ji.rgbToHex=ule;var k2=vV(ele),sle=vV(nle);function _I(e,t=0,n=1){return(0,sle.default)(e,t,n)}function _V(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,l)=>l<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function lle(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function Tc(e){if(e.type)return e;if(e.charAt(0)==="#")return Tc(_V(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error((0,k2.default)(9,e));let r=e.substring(t+1,e.length-1),l;if(n==="color"){if(r=r.split(" "),l=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(l)===-1)throw new Error((0,k2.default)(10,l))}else r=r.split(",");return r=r.map(d=>parseFloat(d)),{type:n,values:r,colorSpace:l}}const xV=e=>{const t=Tc(e);return t.values.slice(0,3).map((n,r)=>t.type.indexOf("hsl")!==-1&&r!==0?`${n}%`:n).join(" ")};Ji.colorChannel=xV;const cle=(e,t)=>{try{return xV(e)}catch{return e}};Ji.private_safeColorChannel=cle;function yv(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.indexOf("rgb")!==-1?r=r.map((l,d)=>d<3?parseInt(l,10):l):t.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),t.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${t}(${r})`}function ule(e){if(e.indexOf("#")===0)return e;const{values:t}=Tc(e);return`#${t.map((n,r)=>lle(r===3?Math.round(255*n):n)).join("")}`}function wV(e){e=Tc(e);const{values:t}=e,n=t[0],r=t[1]/100,l=t[2]/100,d=r*Math.min(l,1-l),f=(E,C=(E+n/30)%12)=>l-d*Math.max(Math.min(C-3,9-C,1),-1);let y="rgb";const a=[Math.round(f(0)*255),Math.round(f(8)*255),Math.round(f(4)*255)];return e.type==="hsla"&&(y+="a",a.push(t[3])),yv({type:y,values:a})}function rS(e){e=Tc(e);let t=e.type==="hsl"||e.type==="hsla"?Tc(wV(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function dle(e,t){const n=rS(e),r=rS(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function EV(e,t){return e=Tc(e),t=_I(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,yv(e)}function hle(e,t,n){try{return EV(e,t)}catch{return e}}function xI(e,t){if(e=Tc(e),t=_I(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return yv(e)}function fle(e,t,n){try{return xI(e,t)}catch{return e}}function wI(e,t){if(e=Tc(e),t=_I(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return yv(e)}function ple(e,t,n){try{return wI(e,t)}catch{return e}}function TV(e,t=.15){return rS(e)>.5?xI(e,t):wI(e,t)}function mle(e,t,n){try{return TV(e,t)}catch{return e}}function gle(e,t,n,r=1){const l=(a,E)=>Math.round((a**(1/r)*(1-n)+E**(1/r)*n)**r),d=Tc(e),f=Tc(t),y=[l(d.values[0],f.values[0]),l(d.values[1],f.values[1]),l(d.values[2],f.values[2])];return yv({type:"rgb",values:y})}var Ix={},L3={exports:{}},A2;function SV(){return A2||(A2=1,function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var l=arguments[r];for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(n[d]=l[d])}return n},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(L3)),L3.exports}var N3={exports:{}},M2;function yle(){return M2||(M2=1,function(e){function t(n,r){if(n==null)return{};var l={},d=Object.keys(n),f,y;for(y=0;y<d.length;y++)f=d[y],!(r.indexOf(f)>=0)&&(l[f]=n[f]);return l}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(N3)),N3.exports}function CV(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var ble=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,vle=CV(function(e){return ble.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function _le(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function xle(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var wle=function(){function e(n){var r=this;this._insertTag=function(l){var d;r.tags.length===0?r.insertionPoint?d=r.insertionPoint.nextSibling:r.prepend?d=r.container.firstChild:d=r.before:d=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(l,d),r.tags.push(l)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(xle(this));var l=this.tags[this.tags.length-1];if(this.isSpeedy){var d=_le(l);try{d.insertRule(r,d.cssRules.length)}catch{}}else l.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),rs="-ms-",oS="-moz-",Ao="-webkit-",kV="comm",EI="rule",TI="decl",Ele="@import",AV="@keyframes",Tle="@layer",Sle=Math.abs,TC=String.fromCharCode,Cle=Object.assign;function kle(e,t){return Ha(e,0)^45?(((t<<2^Ha(e,0))<<2^Ha(e,1))<<2^Ha(e,2))<<2^Ha(e,3):0}function MV(e){return e.trim()}function Ale(e,t){return(e=t.exec(e))?e[0]:e}function Mo(e,t,n){return e.replace(t,n)}function YD(e,t){return e.indexOf(t)}function Ha(e,t){return e.charCodeAt(t)|0}function J1(e,t,n){return e.slice(t,n)}function ld(e){return e.length}function SI(e){return e.length}function pE(e,t){return t.push(e),e}function Mle(e,t){return e.map(t).join("")}var SC=1,Wb=1,DV=0,Xs=0,ca=0,bv="";function CC(e,t,n,r,l,d,f){return{value:e,root:t,parent:n,type:r,props:l,children:d,line:SC,column:Wb,length:f,return:""}}function L_(e,t){return Cle(CC("",null,null,"",null,null,0),e,{length:-e.length},t)}function Dle(){return ca}function Rle(){return ca=Xs>0?Ha(bv,--Xs):0,Wb--,ca===10&&(Wb=1,SC--),ca}function Dl(){return ca=Xs<DV?Ha(bv,Xs++):0,Wb++,ca===10&&(Wb=1,SC++),ca}function vd(){return Ha(bv,Xs)}function lT(){return Xs}function Px(e,t){return J1(bv,e,t)}function ex(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function RV(e){return SC=Wb=1,DV=ld(bv=e),Xs=0,[]}function IV(e){return bv="",e}function cT(e){return MV(Px(Xs-1,GD(e===91?e+2:e===40?e+1:e)))}function Ile(e){for(;(ca=vd())&&ca<33;)Dl();return ex(e)>2||ex(ca)>3?"":" "}function Ple(e,t){for(;--t&&Dl()&&!(ca<48||ca>102||ca>57&&ca<65||ca>70&&ca<97););return Px(e,lT()+(t<6&&vd()==32&&Dl()==32))}function GD(e){for(;Dl();)switch(ca){case e:return Xs;case 34:case 39:e!==34&&e!==39&&GD(ca);break;case 40:e===41&&GD(e);break;case 92:Dl();break}return Xs}function Ole(e,t){for(;Dl()&&e+ca!==57;)if(e+ca===84&&vd()===47)break;return"/*"+Px(t,Xs-1)+"*"+TC(e===47?e:Dl())}function Lle(e){for(;!ex(vd());)Dl();return Px(e,Xs)}function Nle(e){return IV(uT("",null,null,null,[""],e=RV(e),0,[0],e))}function uT(e,t,n,r,l,d,f,y,a){for(var E=0,C=0,M=f,P=0,N=0,F=0,$=1,Z=1,q=1,K=0,Q="",te=l,ie=d,ue=r,re=Q;Z;)switch(F=K,K=Dl()){case 40:if(F!=108&&Ha(re,M-1)==58){YD(re+=Mo(cT(K),"&","&\f"),"&\f")!=-1&&(q=-1);break}case 34:case 39:case 91:re+=cT(K);break;case 9:case 10:case 13:case 32:re+=Ile(F);break;case 92:re+=Ple(lT()-1,7);continue;case 47:switch(vd()){case 42:case 47:pE(zle(Ole(Dl(),lT()),t,n),a);break;default:re+="/"}break;case 123*$:y[E++]=ld(re)*q;case 125*$:case 59:case 0:switch(K){case 0:case 125:Z=0;case 59+C:q==-1&&(re=Mo(re,/\f/g,"")),N>0&&ld(re)-M&&pE(N>32?R2(re+";",r,n,M-1):R2(Mo(re," ","")+";",r,n,M-2),a);break;case 59:re+=";";default:if(pE(ue=D2(re,t,n,E,C,l,y,Q,te=[],ie=[],M),d),K===123)if(C===0)uT(re,t,ue,ue,te,d,M,y,ie);else switch(P===99&&Ha(re,3)===110?100:P){case 100:case 108:case 109:case 115:uT(e,ue,ue,r&&pE(D2(e,ue,ue,0,0,l,y,Q,l,te=[],M),ie),l,ie,M,y,r?te:ie);break;default:uT(re,ue,ue,ue,[""],ie,0,y,ie)}}E=C=N=0,$=q=1,Q=re="",M=f;break;case 58:M=1+ld(re),N=F;default:if($<1){if(K==123)--$;else if(K==125&&$++==0&&Rle()==125)continue}switch(re+=TC(K),K*$){case 38:q=C>0?1:(re+="\f",-1);break;case 44:y[E++]=(ld(re)-1)*q,q=1;break;case 64:vd()===45&&(re+=cT(Dl())),P=vd(),C=M=ld(Q=re+=Lle(lT())),K++;break;case 45:F===45&&ld(re)==2&&($=0)}}return d}function D2(e,t,n,r,l,d,f,y,a,E,C){for(var M=l-1,P=l===0?d:[""],N=SI(P),F=0,$=0,Z=0;F<r;++F)for(var q=0,K=J1(e,M+1,M=Sle($=f[F])),Q=e;q<N;++q)(Q=MV($>0?P[q]+" "+K:Mo(K,/&\f/g,P[q])))&&(a[Z++]=Q);return CC(e,t,n,l===0?EI:y,a,E,C)}function zle(e,t,n){return CC(e,t,n,kV,TC(Dle()),J1(e,2,-2),0)}function R2(e,t,n,r){return CC(e,t,n,TI,J1(e,0,r),J1(e,r+1,-1),r)}function gb(e,t){for(var n="",r=SI(e),l=0;l<r;l++)n+=t(e[l],l,e,t)||"";return n}function Ble(e,t,n,r){switch(e.type){case Tle:if(e.children.length)break;case Ele:case TI:return e.return=e.return||e.value;case kV:return"";case AV:return e.return=e.value+"{"+gb(e.children,r)+"}";case EI:e.value=e.props.join(",")}return ld(n=gb(e.children,r))?e.return=e.value+"{"+n+"}":""}function Fle(e){var t=SI(e);return function(n,r,l,d){for(var f="",y=0;y<t;y++)f+=e[y](n,r,l,d)||"";return f}}function jle(e){return function(t){t.root||(t=t.return)&&e(t)}}var $le=function(t,n,r){for(var l=0,d=0;l=d,d=vd(),l===38&&d===12&&(n[r]=1),!ex(d);)Dl();return Px(t,Xs)},Ule=function(t,n){var r=-1,l=44;do switch(ex(l)){case 0:l===38&&vd()===12&&(n[r]=1),t[r]+=$le(Xs-1,n,r);break;case 2:t[r]+=cT(l);break;case 4:if(l===44){t[++r]=vd()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=TC(l)}while(l=Dl());return t},Vle=function(t,n){return IV(Ule(RV(t),n))},I2=new WeakMap,Hle=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,l=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!I2.get(r))&&!l){I2.set(t,!0);for(var d=[],f=Vle(n,d),y=r.props,a=0,E=0;a<f.length;a++)for(var C=0;C<y.length;C++,E++)t.props[E]=d[a]?f[a].replace(/&\f/g,y[C]):y[C]+" "+f[a]}}},Wle=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function PV(e,t){switch(kle(e,t)){case 5103:return Ao+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ao+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ao+e+oS+e+rs+e+e;case 6828:case 4268:return Ao+e+rs+e+e;case 6165:return Ao+e+rs+"flex-"+e+e;case 5187:return Ao+e+Mo(e,/(\w+).+(:[^]+)/,Ao+"box-$1$2"+rs+"flex-$1$2")+e;case 5443:return Ao+e+rs+"flex-item-"+Mo(e,/flex-|-self/,"")+e;case 4675:return Ao+e+rs+"flex-line-pack"+Mo(e,/align-content|flex-|-self/,"")+e;case 5548:return Ao+e+rs+Mo(e,"shrink","negative")+e;case 5292:return Ao+e+rs+Mo(e,"basis","preferred-size")+e;case 6060:return Ao+"box-"+Mo(e,"-grow","")+Ao+e+rs+Mo(e,"grow","positive")+e;case 4554:return Ao+Mo(e,/([^-])(transform)/g,"$1"+Ao+"$2")+e;case 6187:return Mo(Mo(Mo(e,/(zoom-|grab)/,Ao+"$1"),/(image-set)/,Ao+"$1"),e,"")+e;case 5495:case 3959:return Mo(e,/(image-set\([^]*)/,Ao+"$1$`$1");case 4968:return Mo(Mo(e,/(.+:)(flex-)?(.*)/,Ao+"box-pack:$3"+rs+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ao+e+e;case 4095:case 3583:case 4068:case 2532:return Mo(e,/(.+)-inline(.+)/,Ao+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ld(e)-1-t>6)switch(Ha(e,t+1)){case 109:if(Ha(e,t+4)!==45)break;case 102:return Mo(e,/(.+:)(.+)-([^]+)/,"$1"+Ao+"$2-$3$1"+oS+(Ha(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~YD(e,"stretch")?PV(Mo(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ha(e,t+1)!==115)break;case 6444:switch(Ha(e,ld(e)-3-(~YD(e,"!important")&&10))){case 107:return Mo(e,":",":"+Ao)+e;case 101:return Mo(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ao+(Ha(e,14)===45?"inline-":"")+"box$3$1"+Ao+"$2$3$1"+rs+"$2box$3")+e}break;case 5936:switch(Ha(e,t+11)){case 114:return Ao+e+rs+Mo(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ao+e+rs+Mo(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ao+e+rs+Mo(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Ao+e+rs+e+e}return e}var Yle=function(t,n,r,l){if(t.length>-1&&!t.return)switch(t.type){case TI:t.return=PV(t.value,t.length);break;case AV:return gb([L_(t,{value:Mo(t.value,"@","@"+Ao)})],l);case EI:if(t.length)return Mle(t.props,function(d){switch(Ale(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return gb([L_(t,{props:[Mo(d,/:(read-\w+)/,":"+oS+"$1")]})],l);case"::placeholder":return gb([L_(t,{props:[Mo(d,/:(plac\w+)/,":"+Ao+"input-$1")]}),L_(t,{props:[Mo(d,/:(plac\w+)/,":"+oS+"$1")]}),L_(t,{props:[Mo(d,/:(plac\w+)/,rs+"input-$1")]})],l)}return""})}},Gle=[Yle],OV=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function($){var Z=$.getAttribute("data-emotion");Z.indexOf(" ")!==-1&&(document.head.appendChild($),$.setAttribute("data-s",""))})}var l=t.stylisPlugins||Gle,d={},f,y=[];f=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function($){for(var Z=$.getAttribute("data-emotion").split(" "),q=1;q<Z.length;q++)d[Z[q]]=!0;y.push($)});var a,E=[Hle,Wle];{var C,M=[Ble,jle(function($){C.insert($)})],P=Fle(E.concat(l,M)),N=function(Z){return gb(Nle(Z),P)};a=function(Z,q,K,Q){C=K,N(Z?Z+"{"+q.styles+"}":q.styles),Q&&(F.inserted[q.name]=!0)}}var F={key:n,sheet:new wle({key:n,container:f,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:d,registered:{},insert:a};return F.sheet.hydrate(y),F},LV={exports:{}},Ho={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ma=typeof Symbol=="function"&&Symbol.for,CI=Ma?Symbol.for("react.element"):60103,kI=Ma?Symbol.for("react.portal"):60106,kC=Ma?Symbol.for("react.fragment"):60107,AC=Ma?Symbol.for("react.strict_mode"):60108,MC=Ma?Symbol.for("react.profiler"):60114,DC=Ma?Symbol.for("react.provider"):60109,RC=Ma?Symbol.for("react.context"):60110,AI=Ma?Symbol.for("react.async_mode"):60111,IC=Ma?Symbol.for("react.concurrent_mode"):60111,PC=Ma?Symbol.for("react.forward_ref"):60112,OC=Ma?Symbol.for("react.suspense"):60113,qle=Ma?Symbol.for("react.suspense_list"):60120,LC=Ma?Symbol.for("react.memo"):60115,NC=Ma?Symbol.for("react.lazy"):60116,Zle=Ma?Symbol.for("react.block"):60121,Kle=Ma?Symbol.for("react.fundamental"):60117,Xle=Ma?Symbol.for("react.responder"):60118,Qle=Ma?Symbol.for("react.scope"):60119;function Fl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case CI:switch(e=e.type,e){case AI:case IC:case kC:case MC:case AC:case OC:return e;default:switch(e=e&&e.$$typeof,e){case RC:case PC:case NC:case LC:case DC:return e;default:return t}}case kI:return t}}}function NV(e){return Fl(e)===IC}Ho.AsyncMode=AI;Ho.ConcurrentMode=IC;Ho.ContextConsumer=RC;Ho.ContextProvider=DC;Ho.Element=CI;Ho.ForwardRef=PC;Ho.Fragment=kC;Ho.Lazy=NC;Ho.Memo=LC;Ho.Portal=kI;Ho.Profiler=MC;Ho.StrictMode=AC;Ho.Suspense=OC;Ho.isAsyncMode=function(e){return NV(e)||Fl(e)===AI};Ho.isConcurrentMode=NV;Ho.isContextConsumer=function(e){return Fl(e)===RC};Ho.isContextProvider=function(e){return Fl(e)===DC};Ho.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===CI};Ho.isForwardRef=function(e){return Fl(e)===PC};Ho.isFragment=function(e){return Fl(e)===kC};Ho.isLazy=function(e){return Fl(e)===NC};Ho.isMemo=function(e){return Fl(e)===LC};Ho.isPortal=function(e){return Fl(e)===kI};Ho.isProfiler=function(e){return Fl(e)===MC};Ho.isStrictMode=function(e){return Fl(e)===AC};Ho.isSuspense=function(e){return Fl(e)===OC};Ho.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===kC||e===IC||e===MC||e===AC||e===OC||e===qle||typeof e=="object"&&e!==null&&(e.$$typeof===NC||e.$$typeof===LC||e.$$typeof===DC||e.$$typeof===RC||e.$$typeof===PC||e.$$typeof===Kle||e.$$typeof===Xle||e.$$typeof===Qle||e.$$typeof===Zle)};Ho.typeOf=Fl;LV.exports=Ho;var Jle=LV.exports,zV=Jle,ece={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},tce={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},BV={};BV[zV.ForwardRef]=ece;BV[zV.Memo]=tce;var nce=!0;function rce(e,t,n){var r="";return n.split(" ").forEach(function(l){e[l]!==void 0?t.push(e[l]+";"):r+=l+" "}),r}var FV=function(t,n,r){var l=t.key+"-"+n.name;(r===!1||nce===!1)&&t.registered[l]===void 0&&(t.registered[l]=n.styles)},jV=function(t,n,r){FV(t,n,r);var l=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var d=n;do t.insert(n===d?"."+l:"",d,t.sheet,!0),d=d.next;while(d!==void 0)}};function oce(e){for(var t=0,n,r=0,l=e.length;l>=4;++r,l-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(l){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var ice={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ace=/[A-Z]|^ms/g,sce=/_EMO_([^_]+?)_([^]*?)_EMO_/g,$V=function(t){return t.charCodeAt(1)===45},P2=function(t){return t!=null&&typeof t!="boolean"},z3=CV(function(e){return $V(e)?e:e.replace(ace,"-$&").toLowerCase()}),O2=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(sce,function(r,l,d){return cd={name:l,styles:d,next:cd},l})}return ice[t]!==1&&!$V(t)&&typeof n=="number"&&n!==0?n+"px":n};function tx(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return cd={name:n.name,styles:n.styles,next:cd},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)cd={name:r.name,styles:r.styles,next:cd},r=r.next;var l=n.styles+";";return l}return lce(e,t,n)}case"function":{if(e!==void 0){var d=cd,f=n(e);return cd=d,tx(e,t,f)}break}}if(t==null)return n;var y=t[n];return y!==void 0?y:n}function lce(e,t,n){var r="";if(Array.isArray(n))for(var l=0;l<n.length;l++)r+=tx(e,t,n[l])+";";else for(var d in n){var f=n[d];if(typeof f!="object")t!=null&&t[f]!==void 0?r+=d+"{"+t[f]+"}":P2(f)&&(r+=z3(d)+":"+O2(d,f)+";");else if(Array.isArray(f)&&typeof f[0]=="string"&&(t==null||t[f[0]]===void 0))for(var y=0;y<f.length;y++)P2(f[y])&&(r+=z3(d)+":"+O2(d,f[y])+";");else{var a=tx(e,t,f);switch(d){case"animation":case"animationName":{r+=z3(d)+":"+a+";";break}default:r+=d+"{"+a+"}"}}}return r}var L2=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cd,MI=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var l=!0,d="";cd=void 0;var f=t[0];f==null||f.raw===void 0?(l=!1,d+=tx(r,n,f)):d+=f[0];for(var y=1;y<t.length;y++)d+=tx(r,n,t[y]),l&&(d+=f[y]);L2.lastIndex=0;for(var a="",E;(E=L2.exec(d))!==null;)a+="-"+E[1];var C=oce(d)+a;return{name:C,styles:d,next:cd}},cce=function(t){return t()},UV=A1.useInsertionEffect?A1.useInsertionEffect:!1,uce=UV||cce,N2=UV||j.useLayoutEffect,VV=j.createContext(typeof HTMLElement<"u"?OV({key:"css"}):null),dce=VV.Provider,HV=function(t){return j.forwardRef(function(n,r){var l=j.useContext(VV);return t(n,l,r)})},zC=j.createContext({});SV();var hce=HV(function(e,t){var n=e.styles,r=MI([n],void 0,j.useContext(zC)),l=j.useRef();return N2(function(){var d=t.key+"-global",f=new t.sheet.constructor({key:d,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),y=!1,a=document.querySelector('style[data-emotion="'+d+" "+r.name+'"]');return t.sheet.tags.length&&(f.before=t.sheet.tags[0]),a!==null&&(y=!0,a.setAttribute("data-emotion",d),f.hydrate([a])),l.current=[f,y],function(){f.flush()}},[t]),N2(function(){var d=l.current,f=d[0],y=d[1];if(y){d[1]=!1;return}if(r.next!==void 0&&jV(t,r.next,!0),f.tags.length){var a=f.tags[f.tags.length-1].nextElementSibling;f.before=a,f.flush()}t.insert("",r,f,!1)},[t,r.name]),null});function WV(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return MI(t)}var BC=function(){var t=WV.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},fce=vle,pce=function(t){return t!=="theme"},z2=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?fce:pce},B2=function(t,n,r){var l;if(n){var d=n.shouldForwardProp;l=t.__emotion_forwardProp&&d?function(f){return t.__emotion_forwardProp(f)&&d(f)}:d}return typeof l!="function"&&r&&(l=t.__emotion_forwardProp),l},mce=function(t){var n=t.cache,r=t.serialized,l=t.isStringTag;return FV(n,r,l),uce(function(){return jV(n,r,l)}),null},gce=function e(t,n){var r=t.__emotion_real===t,l=r&&t.__emotion_base||t,d,f;n!==void 0&&(d=n.label,f=n.target);var y=B2(t,n,r),a=y||z2(l),E=!a("as");return function(){var C=arguments,M=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(d!==void 0&&M.push("label:"+d+";"),C[0]==null||C[0].raw===void 0)M.push.apply(M,C);else{M.push(C[0][0]);for(var P=C.length,N=1;N<P;N++)M.push(C[N],C[0][N])}var F=HV(function($,Z,q){var K=E&&$.as||l,Q="",te=[],ie=$;if($.theme==null){ie={};for(var ue in $)ie[ue]=$[ue];ie.theme=j.useContext(zC)}typeof $.className=="string"?Q=rce(Z.registered,te,$.className):$.className!=null&&(Q=$.className+" ");var re=MI(M.concat(te),Z.registered,ie);Q+=Z.key+"-"+re.name,f!==void 0&&(Q+=" "+f);var me=E&&y===void 0?z2(K):a,ve={};for(var De in $)E&&De==="as"||me(De)&&(ve[De]=$[De]);return ve.className=Q,ve.ref=q,j.createElement(j.Fragment,null,j.createElement(mce,{cache:Z,serialized:re,isStringTag:typeof K=="string"}),j.createElement(K,ve))});return F.displayName=d!==void 0?d:"Styled("+(typeof l=="string"?l:l.displayName||l.name||"Component")+")",F.defaultProps=t.defaultProps,F.__emotion_real=F,F.__emotion_base=l,F.__emotion_styles=M,F.__emotion_forwardProp=y,Object.defineProperty(F,"toString",{value:function(){return"."+f}}),F.withComponent=function($,Z){return e($,Ae({},n,Z,{shouldForwardProp:B2(F,Z,!0)})).apply(void 0,M)},F}},yce=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],qD=gce.bind();yce.forEach(function(e){qD[e]=qD(e)});let ZD;typeof document=="object"&&(ZD=OV({key:"css",prepend:!0}));function bce(e){const{injectFirst:t,children:n}=e;return t&&ZD?O.jsx(dce,{value:ZD,children:n}):n}function vce(e){return e==null||Object.keys(e).length===0}function YV(e){const{styles:t,defaultTheme:n={}}=e,r=typeof t=="function"?l=>t(vce(l)?n:l):t;return O.jsx(hce,{styles:r})}function DI(e,t){return qD(e,t)}const GV=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},_ce=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:YV,StyledEngineProvider:bce,ThemeContext:zC,css:WV,default:DI,internal_processStyles:GV,keyframes:BC},Symbol.toStringTag,{value:"Module"})),qV=Dd(_ce);function Oh(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function ZV(e){if(!Oh(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=ZV(e[n])}),t}function Rl(e,t,n={clone:!0}){const r=n.clone?Ae({},e):e;return Oh(e)&&Oh(t)&&Object.keys(t).forEach(l=>{l!=="__proto__"&&(Oh(t[l])&&l in e&&Oh(e[l])?r[l]=Rl(e[l],t[l],n):n.clone?r[l]=Oh(t[l])?ZV(t[l]):t[l]:r[l]=t[l])}),r}const xce=Object.freeze(Object.defineProperty({__proto__:null,default:Rl,isPlainObject:Oh},Symbol.toStringTag,{value:"Module"})),wce=Dd(xce);function Yn(e){if(typeof e!="string")throw new Error(p0(7));return e.charAt(0).toUpperCase()+e.slice(1)}const Ece=Object.freeze(Object.defineProperty({__proto__:null,default:Yn},Symbol.toStringTag,{value:"Module"})),Tce=Dd(Ece);var KV={exports:{}},Wo={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RI=Symbol.for("react.element"),II=Symbol.for("react.portal"),FC=Symbol.for("react.fragment"),jC=Symbol.for("react.strict_mode"),$C=Symbol.for("react.profiler"),UC=Symbol.for("react.provider"),VC=Symbol.for("react.context"),Sce=Symbol.for("react.server_context"),HC=Symbol.for("react.forward_ref"),WC=Symbol.for("react.suspense"),YC=Symbol.for("react.suspense_list"),GC=Symbol.for("react.memo"),qC=Symbol.for("react.lazy"),Cce=Symbol.for("react.offscreen"),XV;XV=Symbol.for("react.module.reference");function Mc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case RI:switch(e=e.type,e){case FC:case $C:case jC:case WC:case YC:return e;default:switch(e=e&&e.$$typeof,e){case Sce:case VC:case HC:case qC:case GC:case UC:return e;default:return t}}case II:return t}}}Wo.ContextConsumer=VC;Wo.ContextProvider=UC;Wo.Element=RI;Wo.ForwardRef=HC;Wo.Fragment=FC;Wo.Lazy=qC;Wo.Memo=GC;Wo.Portal=II;Wo.Profiler=$C;Wo.StrictMode=jC;Wo.Suspense=WC;Wo.SuspenseList=YC;Wo.isAsyncMode=function(){return!1};Wo.isConcurrentMode=function(){return!1};Wo.isContextConsumer=function(e){return Mc(e)===VC};Wo.isContextProvider=function(e){return Mc(e)===UC};Wo.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===RI};Wo.isForwardRef=function(e){return Mc(e)===HC};Wo.isFragment=function(e){return Mc(e)===FC};Wo.isLazy=function(e){return Mc(e)===qC};Wo.isMemo=function(e){return Mc(e)===GC};Wo.isPortal=function(e){return Mc(e)===II};Wo.isProfiler=function(e){return Mc(e)===$C};Wo.isStrictMode=function(e){return Mc(e)===jC};Wo.isSuspense=function(e){return Mc(e)===WC};Wo.isSuspenseList=function(e){return Mc(e)===YC};Wo.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===FC||e===$C||e===jC||e===WC||e===YC||e===Cce||typeof e=="object"&&e!==null&&(e.$$typeof===qC||e.$$typeof===GC||e.$$typeof===UC||e.$$typeof===VC||e.$$typeof===HC||e.$$typeof===XV||e.getModuleId!==void 0)};Wo.typeOf=Mc;KV.exports=Wo;var F2=KV.exports;const kce=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function QV(e){const t=`${e}`.match(kce);return t&&t[1]||""}function JV(e,t=""){return e.displayName||e.name||QV(e)||t}function j2(e,t,n){const r=JV(t);return e.displayName||(r!==""?`${n}(${r})`:n)}function Ace(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return JV(e,"Component");if(typeof e=="object")switch(e.$$typeof){case F2.ForwardRef:return j2(e,e.render,"ForwardRef");case F2.Memo:return j2(e,e.type,"memo");default:return}}}const Mce=Object.freeze(Object.defineProperty({__proto__:null,default:Ace,getFunctionName:QV},Symbol.toStringTag,{value:"Module"})),Dce=Dd(Mce),Rce=["values","unit","step"],Ice=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,r)=>n.val-r.val),t.reduce((n,r)=>Ae({},n,{[r.key]:r.val}),{})};function eH(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=e,l=Tn(e,Rce),d=Ice(t),f=Object.keys(d);function y(P){return`@media (min-width:${typeof t[P]=="number"?t[P]:P}${n})`}function a(P){return`@media (max-width:${(typeof t[P]=="number"?t[P]:P)-r/100}${n})`}function E(P,N){const F=f.indexOf(N);return`@media (min-width:${typeof t[P]=="number"?t[P]:P}${n}) and (max-width:${(F!==-1&&typeof t[f[F]]=="number"?t[f[F]]:N)-r/100}${n})`}function C(P){return f.indexOf(P)+1<f.length?E(P,f[f.indexOf(P)+1]):y(P)}function M(P){const N=f.indexOf(P);return N===0?y(f[1]):N===f.length-1?a(f[N]):E(P,f[f.indexOf(P)+1]).replace("@media","@media not all and")}return Ae({keys:f,values:d,up:y,down:a,between:E,only:C,not:M,unit:n},l)}const Pce={borderRadius:4},Oce=Pce;function p1(e,t){return t?Rl(e,t,{clone:!1}):e}const PI={xs:0,sm:600,md:900,lg:1200,xl:1536},$2={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${PI[e]}px)`};function Sc(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const d=r.breakpoints||$2;return t.reduce((f,y,a)=>(f[d.up(d.keys[a])]=n(t[a]),f),{})}if(typeof t=="object"){const d=r.breakpoints||$2;return Object.keys(t).reduce((f,y)=>{if(Object.keys(d.values||PI).indexOf(y)!==-1){const a=d.up(y);f[a]=n(t[y],y)}else{const a=y;f[a]=t[a]}return f},{})}return n(t)}function Lce(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((r,l)=>{const d=e.up(l);return r[d]={},r},{}))||{}}function Nce(e,t){return e.reduce((n,r)=>{const l=n[r];return(!l||Object.keys(l).length===0)&&delete n[r],n},t)}function zce(e,t){if(typeof e!="object")return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach((l,d)=>{d<e.length&&(n[l]=!0)}):r.forEach(l=>{e[l]!=null&&(n[l]=!0)}),n}function ZC({values:e,breakpoints:t,base:n}){const r=n||zce(e,t),l=Object.keys(r);if(l.length===0)return e;let d;return l.reduce((f,y,a)=>(Array.isArray(e)?(f[y]=e[a]!=null?e[a]:e[d],d=a):typeof e=="object"?(f[y]=e[y]!=null?e[y]:e[d],d=y):f[y]=e,f),{})}function Yb(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const r=`vars.${t}`.split(".").reduce((l,d)=>l&&l[d]?l[d]:null,e);if(r!=null)return r}return t.split(".").reduce((r,l)=>r&&r[l]!=null?r[l]:null,e)}function iS(e,t,n,r=n){let l;return typeof e=="function"?l=e(n):Array.isArray(e)?l=e[n]||r:l=Yb(e,n)||r,t&&(l=t(l,r,e)),l}function ea(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:l}=e,d=f=>{if(f[t]==null)return null;const y=f[t],a=f.theme,E=Yb(a,r)||{};return Sc(f,y,M=>{let P=iS(E,l,M);return M===P&&typeof M=="string"&&(P=iS(E,l,`${t}${M==="default"?"":Yn(M)}`,M)),n===!1?P:{[n]:P}})};return d.propTypes={},d.filterProps=[t],d}function Bce(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const Fce={m:"margin",p:"padding"},jce={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},U2={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},$ce=Bce(e=>{if(e.length>2)if(U2[e])e=U2[e];else return[e];const[t,n]=e.split(""),r=Fce[t],l=jce[n]||"";return Array.isArray(l)?l.map(d=>r+d):[r+l]}),OI=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],LI=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...OI,...LI];function Ox(e,t,n,r){var l;const d=(l=Yb(e,t,!1))!=null?l:n;return typeof d=="number"?f=>typeof f=="string"?f:d*f:Array.isArray(d)?f=>typeof f=="string"?f:d[f]:typeof d=="function"?d:()=>{}}function tH(e){return Ox(e,"spacing",8)}function Lx(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),r=e(n);return t>=0?r:typeof r=="number"?-r:`-${r}`}function Uce(e,t){return n=>e.reduce((r,l)=>(r[l]=Lx(t,n),r),{})}function Vce(e,t,n,r){if(t.indexOf(n)===-1)return null;const l=$ce(n),d=Uce(l,r),f=e[n];return Sc(e,f,d)}function nH(e,t){const n=tH(e.theme);return Object.keys(e).map(r=>Vce(e,t,r,n)).reduce(p1,{})}function Oi(e){return nH(e,OI)}Oi.propTypes={};Oi.filterProps=OI;function Li(e){return nH(e,LI)}Li.propTypes={};Li.filterProps=LI;function Hce(e=8){if(e.mui)return e;const t=tH({spacing:e}),n=(...r)=>(r.length===0?[1]:r).map(d=>{const f=t(d);return typeof f=="number"?`${f}px`:f}).join(" ");return n.mui=!0,n}function KC(...e){const t=e.reduce((r,l)=>(l.filterProps.forEach(d=>{r[d]=l}),r),{}),n=r=>Object.keys(r).reduce((l,d)=>t[d]?p1(l,t[d](r)):l,{});return n.propTypes={},n.filterProps=e.reduce((r,l)=>r.concat(l.filterProps),[]),n}function fc(e){return typeof e!="number"?e:`${e}px solid`}function Dc(e,t){return ea({prop:e,themeKey:"borders",transform:t})}const Wce=Dc("border",fc),Yce=Dc("borderTop",fc),Gce=Dc("borderRight",fc),qce=Dc("borderBottom",fc),Zce=Dc("borderLeft",fc),Kce=Dc("borderColor"),Xce=Dc("borderTopColor"),Qce=Dc("borderRightColor"),Jce=Dc("borderBottomColor"),eue=Dc("borderLeftColor"),tue=Dc("outline",fc),nue=Dc("outlineColor"),XC=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Ox(e.theme,"shape.borderRadius",4),n=r=>({borderRadius:Lx(t,r)});return Sc(e,e.borderRadius,n)}return null};XC.propTypes={};XC.filterProps=["borderRadius"];KC(Wce,Yce,Gce,qce,Zce,Kce,Xce,Qce,Jce,eue,XC,tue,nue);const QC=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Ox(e.theme,"spacing",8),n=r=>({gap:Lx(t,r)});return Sc(e,e.gap,n)}return null};QC.propTypes={};QC.filterProps=["gap"];const JC=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Ox(e.theme,"spacing",8),n=r=>({columnGap:Lx(t,r)});return Sc(e,e.columnGap,n)}return null};JC.propTypes={};JC.filterProps=["columnGap"];const ek=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Ox(e.theme,"spacing",8),n=r=>({rowGap:Lx(t,r)});return Sc(e,e.rowGap,n)}return null};ek.propTypes={};ek.filterProps=["rowGap"];const rue=ea({prop:"gridColumn"}),oue=ea({prop:"gridRow"}),iue=ea({prop:"gridAutoFlow"}),aue=ea({prop:"gridAutoColumns"}),sue=ea({prop:"gridAutoRows"}),lue=ea({prop:"gridTemplateColumns"}),cue=ea({prop:"gridTemplateRows"}),uue=ea({prop:"gridTemplateAreas"}),due=ea({prop:"gridArea"});KC(QC,JC,ek,rue,oue,iue,aue,sue,lue,cue,uue,due);function yb(e,t){return t==="grey"?t:e}const hue=ea({prop:"color",themeKey:"palette",transform:yb}),fue=ea({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:yb}),pue=ea({prop:"backgroundColor",themeKey:"palette",transform:yb});KC(hue,fue,pue);function Tl(e){return e<=1&&e!==0?`${e*100}%`:e}const mue=ea({prop:"width",transform:Tl}),NI=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var r,l;const d=((r=e.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||PI[n];return d?((l=e.theme)==null||(l=l.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${d}${e.theme.breakpoints.unit}`}:{maxWidth:d}:{maxWidth:Tl(n)}};return Sc(e,e.maxWidth,t)}return null};NI.filterProps=["maxWidth"];const gue=ea({prop:"minWidth",transform:Tl}),yue=ea({prop:"height",transform:Tl}),bue=ea({prop:"maxHeight",transform:Tl}),vue=ea({prop:"minHeight",transform:Tl});ea({prop:"size",cssProperty:"width",transform:Tl});ea({prop:"size",cssProperty:"height",transform:Tl});const _ue=ea({prop:"boxSizing"});KC(mue,NI,gue,yue,bue,vue,_ue);const xue={border:{themeKey:"borders",transform:fc},borderTop:{themeKey:"borders",transform:fc},borderRight:{themeKey:"borders",transform:fc},borderBottom:{themeKey:"borders",transform:fc},borderLeft:{themeKey:"borders",transform:fc},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:fc},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:XC},color:{themeKey:"palette",transform:yb},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:yb},backgroundColor:{themeKey:"palette",transform:yb},p:{style:Li},pt:{style:Li},pr:{style:Li},pb:{style:Li},pl:{style:Li},px:{style:Li},py:{style:Li},padding:{style:Li},paddingTop:{style:Li},paddingRight:{style:Li},paddingBottom:{style:Li},paddingLeft:{style:Li},paddingX:{style:Li},paddingY:{style:Li},paddingInline:{style:Li},paddingInlineStart:{style:Li},paddingInlineEnd:{style:Li},paddingBlock:{style:Li},paddingBlockStart:{style:Li},paddingBlockEnd:{style:Li},m:{style:Oi},mt:{style:Oi},mr:{style:Oi},mb:{style:Oi},ml:{style:Oi},mx:{style:Oi},my:{style:Oi},margin:{style:Oi},marginTop:{style:Oi},marginRight:{style:Oi},marginBottom:{style:Oi},marginLeft:{style:Oi},marginX:{style:Oi},marginY:{style:Oi},marginInline:{style:Oi},marginInlineStart:{style:Oi},marginInlineEnd:{style:Oi},marginBlock:{style:Oi},marginBlockStart:{style:Oi},marginBlockEnd:{style:Oi},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:QC},rowGap:{style:ek},columnGap:{style:JC},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Tl},maxWidth:{style:NI},minWidth:{transform:Tl},height:{transform:Tl},maxHeight:{transform:Tl},minHeight:{transform:Tl},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},Nx=xue;function wue(...e){const t=e.reduce((r,l)=>r.concat(Object.keys(l)),[]),n=new Set(t);return e.every(r=>n.size===Object.keys(r).length)}function Eue(e,t){return typeof e=="function"?e(t):e}function rH(){function e(n,r,l,d){const f={[n]:r,theme:l},y=d[n];if(!y)return{[n]:r};const{cssProperty:a=n,themeKey:E,transform:C,style:M}=y;if(r==null)return null;if(E==="typography"&&r==="inherit")return{[n]:r};const P=Yb(l,E)||{};return M?M(f):Sc(f,r,F=>{let $=iS(P,C,F);return F===$&&typeof F=="string"&&($=iS(P,C,`${n}${F==="default"?"":Yn(F)}`,F)),a===!1?$:{[a]:$}})}function t(n){var r;const{sx:l,theme:d={}}=n||{};if(!l)return null;const f=(r=d.unstable_sxConfig)!=null?r:Nx;function y(a){let E=a;if(typeof a=="function")E=a(d);else if(typeof a!="object")return a;if(!E)return null;const C=Lce(d.breakpoints),M=Object.keys(C);let P=C;return Object.keys(E).forEach(N=>{const F=Eue(E[N],d);if(F!=null)if(typeof F=="object")if(f[N])P=p1(P,e(N,F,d,f));else{const $=Sc({theme:d},F,Z=>({[N]:Z}));wue($,F)?P[N]=t({sx:F,theme:d}):P=p1(P,$)}else P=p1(P,e(N,F,d,f))}),Nce(M,P)}return Array.isArray(l)?l.map(y):y(l)}return t}const oH=rH();oH.filterProps=["sx"];const zx=oH;function iH(e,t){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:n.palette.mode===e?t:{}}const Tue=["breakpoints","palette","spacing","shape"];function Bx(e={},...t){const{breakpoints:n={},palette:r={},spacing:l,shape:d={}}=e,f=Tn(e,Tue),y=eH(n),a=Hce(l);let E=Rl({breakpoints:y,direction:"ltr",components:{},palette:Ae({mode:"light"},r),spacing:a,shape:Ae({},Oce,d)},f);return E.applyStyles=iH,E=t.reduce((C,M)=>Rl(C,M),E),E.unstable_sxConfig=Ae({},Nx,f?.unstable_sxConfig),E.unstable_sx=function(M){return zx({sx:M,theme:this})},E}const Sue=Object.freeze(Object.defineProperty({__proto__:null,default:Bx,private_createBreakpoints:eH,unstable_applyStyles:iH},Symbol.toStringTag,{value:"Module"})),Cue=Dd(Sue),kue=["sx"],Aue=e=>{var t,n;const r={systemProps:{},otherProps:{}},l=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:Nx;return Object.keys(e).forEach(d=>{l[d]?r.systemProps[d]=e[d]:r.otherProps[d]=e[d]}),r};function tk(e){const{sx:t}=e,n=Tn(e,kue),{systemProps:r,otherProps:l}=Aue(n);let d;return Array.isArray(t)?d=[r,...t]:typeof t=="function"?d=(...f)=>{const y=t(...f);return Oh(y)?Ae({},r,y):r}:d=Ae({},r,t),Ae({},l,{sx:d})}const Mue=Object.freeze(Object.defineProperty({__proto__:null,default:zx,extendSxProp:tk,unstable_createStyleFunctionSx:rH,unstable_defaultSxConfig:Nx},Symbol.toStringTag,{value:"Module"})),Due=Dd(Mue);var vv=yi;Object.defineProperty(Ix,"__esModule",{value:!0});var Rue=Ix.default=Hue;Ix.shouldForwardProp=dT;Ix.systemDefaultTheme=void 0;var sc=vv(SV()),KD=vv(yle()),V2=Bue(qV),Iue=wce;vv(Tce);vv(Dce);var Pue=vv(Cue),Oue=vv(Due);const Lue=["ownerState"],Nue=["variants"],zue=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function aH(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(aH=function(r){return r?n:t})(e)}function Bue(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=aH(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if(d!=="default"&&Object.prototype.hasOwnProperty.call(e,d)){var f=l?Object.getOwnPropertyDescriptor(e,d):null;f&&(f.get||f.set)?Object.defineProperty(r,d,f):r[d]=e[d]}return r.default=e,n&&n.set(e,r),r}function Fue(e){return Object.keys(e).length===0}function jue(e){return typeof e=="string"&&e.charCodeAt(0)>96}function dT(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const $ue=Ix.systemDefaultTheme=(0,Pue.default)(),Uue=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function mE({defaultTheme:e,theme:t,themeId:n}){return Fue(t)?e:t[n]||t}function Vue(e){return e?(t,n)=>n[e]:null}function hT(e,t){let{ownerState:n}=t,r=(0,KD.default)(t,Lue);const l=typeof e=="function"?e((0,sc.default)({ownerState:n},r)):e;if(Array.isArray(l))return l.flatMap(d=>hT(d,(0,sc.default)({ownerState:n},r)));if(l&&typeof l=="object"&&Array.isArray(l.variants)){const{variants:d=[]}=l;let y=(0,KD.default)(l,Nue);return d.forEach(a=>{let E=!0;typeof a.props=="function"?E=a.props((0,sc.default)({ownerState:n},r,n)):Object.keys(a.props).forEach(C=>{n?.[C]!==a.props[C]&&r[C]!==a.props[C]&&(E=!1)}),E&&(Array.isArray(y)||(y=[y]),y.push(typeof a.style=="function"?a.style((0,sc.default)({ownerState:n},r,n)):a.style))}),y}return l}function Hue(e={}){const{themeId:t,defaultTheme:n=$ue,rootShouldForwardProp:r=dT,slotShouldForwardProp:l=dT}=e,d=f=>(0,Oue.default)((0,sc.default)({},f,{theme:mE((0,sc.default)({},f,{defaultTheme:n,themeId:t}))}));return d.__mui_systemSx=!0,(f,y={})=>{(0,V2.internal_processStyles)(f,ie=>ie.filter(ue=>!(ue!=null&&ue.__mui_systemSx)));const{name:a,slot:E,skipVariantsResolver:C,skipSx:M,overridesResolver:P=Vue(Uue(E))}=y,N=(0,KD.default)(y,zue),F=C!==void 0?C:E&&E!=="Root"&&E!=="root"||!1,$=M||!1;let Z,q=dT;E==="Root"||E==="root"?q=r:E?q=l:jue(f)&&(q=void 0);const K=(0,V2.default)(f,(0,sc.default)({shouldForwardProp:q,label:Z},N)),Q=ie=>typeof ie=="function"&&ie.__emotion_real!==ie||(0,Iue.isPlainObject)(ie)?ue=>hT(ie,(0,sc.default)({},ue,{theme:mE({theme:ue.theme,defaultTheme:n,themeId:t})})):ie,te=(ie,...ue)=>{let re=Q(ie);const me=ue?ue.map(Q):[];a&&P&&me.push(je=>{const Be=mE((0,sc.default)({},je,{defaultTheme:n,themeId:t}));if(!Be.components||!Be.components[a]||!Be.components[a].styleOverrides)return null;const Ue=Be.components[a].styleOverrides,Ge={};return Object.entries(Ue).forEach(([ze,ot])=>{Ge[ze]=hT(ot,(0,sc.default)({},je,{theme:Be}))}),P(je,Ge)}),a&&!F&&me.push(je=>{var Be;const Ue=mE((0,sc.default)({},je,{defaultTheme:n,themeId:t})),Ge=Ue==null||(Be=Ue.components)==null||(Be=Be[a])==null?void 0:Be.variants;return hT({variants:Ge},(0,sc.default)({},je,{theme:Ue}))}),$||me.push(d);const ve=me.length-ue.length;if(Array.isArray(ie)&&ve>0){const je=new Array(ve).fill("");re=[...ie,...je],re.raw=[...ie.raw,...je]}const De=K(re,...me);return f.muiName&&(De.muiName=f.muiName),De};return K.withConfig&&(te.withConfig=K.withConfig),te}}const H2=e=>e,Wue=()=>{let e=H2;return{configure(t){e=t},generate(t){return e(t)},reset(){e=H2}}},Yue=Wue(),zI=Yue,sH={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Lr(e,t,n="Mui"){const r=sH[t];return r?`${n}-${r}`:`${zI.generate(e)}-${t}`}function Gue(e,t){return Ae({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const que={black:"#000",white:"#fff"},nx=que,Zue={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Kue=Zue,Xue={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Ny=Xue,Que={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},zy=Que,Jue={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},N_=Jue,ede={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},By=ede,tde={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Fy=tde,nde={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},jy=nde,rde=["mode","contrastThreshold","tonalOffset"],W2={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:nx.white,default:nx.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},B3={text:{primary:nx.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:nx.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Y2(e,t,n,r){const l=r.light||r,d=r.dark||r*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=ale(e.main,l):t==="dark"&&(e.dark=rle(e.main,d)))}function ode(e="light"){return e==="dark"?{main:By[200],light:By[50],dark:By[400]}:{main:By[700],light:By[400],dark:By[800]}}function ide(e="light"){return e==="dark"?{main:Ny[200],light:Ny[50],dark:Ny[400]}:{main:Ny[500],light:Ny[300],dark:Ny[700]}}function ade(e="light"){return e==="dark"?{main:zy[500],light:zy[300],dark:zy[700]}:{main:zy[700],light:zy[400],dark:zy[800]}}function sde(e="light"){return e==="dark"?{main:Fy[400],light:Fy[300],dark:Fy[700]}:{main:Fy[700],light:Fy[500],dark:Fy[900]}}function lde(e="light"){return e==="dark"?{main:jy[400],light:jy[300],dark:jy[700]}:{main:jy[800],light:jy[500],dark:jy[900]}}function cde(e="light"){return e==="dark"?{main:N_[400],light:N_[300],dark:N_[700]}:{main:"#ed6c02",light:N_[500],dark:N_[900]}}function ude(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,l=Tn(e,rde),d=e.primary||ode(t),f=e.secondary||ide(t),y=e.error||ade(t),a=e.info||sde(t),E=e.success||lde(t),C=e.warning||cde(t);function M($){return ile($,B3.text.primary)>=n?B3.text.primary:W2.text.primary}const P=({color:$,name:Z,mainShade:q=500,lightShade:K=300,darkShade:Q=700})=>{if($=Ae({},$),!$.main&&$[q]&&($.main=$[q]),!$.hasOwnProperty("main"))throw new Error(p0(11,Z?` (${Z})`:"",q));if(typeof $.main!="string")throw new Error(p0(12,Z?` (${Z})`:"",JSON.stringify($.main)));return Y2($,"light",K,r),Y2($,"dark",Q,r),$.contrastText||($.contrastText=M($.main)),$},N={dark:B3,light:W2};return Rl(Ae({common:Ae({},nx),mode:t,primary:P({color:d,name:"primary"}),secondary:P({color:f,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:P({color:y,name:"error"}),warning:P({color:C,name:"warning"}),info:P({color:a,name:"info"}),success:P({color:E,name:"success"}),grey:Kue,contrastThreshold:n,getContrastText:M,augmentColor:P,tonalOffset:r},N[t]),l)}const dde=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function hde(e){return Math.round(e*1e5)/1e5}const G2={textTransform:"uppercase"},q2='"Roboto", "Helvetica", "Arial", sans-serif';function fde(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:r=q2,fontSize:l=14,fontWeightLight:d=300,fontWeightRegular:f=400,fontWeightMedium:y=500,fontWeightBold:a=700,htmlFontSize:E=16,allVariants:C,pxToRem:M}=n,P=Tn(n,dde),N=l/14,F=M||(q=>`${q/E*N}rem`),$=(q,K,Q,te,ie)=>Ae({fontFamily:r,fontWeight:q,fontSize:F(K),lineHeight:Q},r===q2?{letterSpacing:`${hde(te/K)}em`}:{},ie,C),Z={h1:$(d,96,1.167,-1.5),h2:$(d,60,1.2,-.5),h3:$(f,48,1.167,0),h4:$(f,34,1.235,.25),h5:$(f,24,1.334,0),h6:$(y,20,1.6,.15),subtitle1:$(f,16,1.75,.15),subtitle2:$(y,14,1.57,.1),body1:$(f,16,1.5,.15),body2:$(f,14,1.43,.15),button:$(y,14,1.75,.4,G2),caption:$(f,12,1.66,.4),overline:$(f,12,2.66,1,G2),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Rl(Ae({htmlFontSize:E,pxToRem:F,fontFamily:r,fontSize:l,fontWeightLight:d,fontWeightRegular:f,fontWeightMedium:y,fontWeightBold:a},Z),P,{clone:!1})}const pde=.2,mde=.14,gde=.12;function fi(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${pde})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${mde})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${gde})`].join(",")}const yde=["none",fi(0,2,1,-1,0,1,1,0,0,1,3,0),fi(0,3,1,-2,0,2,2,0,0,1,5,0),fi(0,3,3,-2,0,3,4,0,0,1,8,0),fi(0,2,4,-1,0,4,5,0,0,1,10,0),fi(0,3,5,-1,0,5,8,0,0,1,14,0),fi(0,3,5,-1,0,6,10,0,0,1,18,0),fi(0,4,5,-2,0,7,10,1,0,2,16,1),fi(0,5,5,-3,0,8,10,1,0,3,14,2),fi(0,5,6,-3,0,9,12,1,0,3,16,2),fi(0,6,6,-3,0,10,14,1,0,4,18,3),fi(0,6,7,-4,0,11,15,1,0,4,20,3),fi(0,7,8,-4,0,12,17,2,0,5,22,4),fi(0,7,8,-4,0,13,19,2,0,5,24,4),fi(0,7,9,-4,0,14,21,2,0,5,26,4),fi(0,8,9,-5,0,15,22,2,0,6,28,5),fi(0,8,10,-5,0,16,24,2,0,6,30,5),fi(0,8,11,-5,0,17,26,2,0,6,32,5),fi(0,9,11,-5,0,18,28,2,0,7,34,6),fi(0,9,12,-6,0,19,29,2,0,7,36,6),fi(0,10,13,-6,0,20,31,3,0,8,38,7),fi(0,10,13,-6,0,21,33,3,0,8,40,7),fi(0,10,14,-6,0,22,35,3,0,8,42,7),fi(0,11,14,-7,0,23,36,3,0,9,44,8),fi(0,11,15,-7,0,24,38,3,0,9,46,8)],bde=["duration","easing","delay"],vde={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},lH={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Z2(e){return`${Math.round(e)}ms`}function _de(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function xde(e){const t=Ae({},vde,e.easing),n=Ae({},lH,e.duration);return Ae({getAutoHeightDuration:_de,create:(l=["all"],d={})=>{const{duration:f=n.standard,easing:y=t.easeInOut,delay:a=0}=d;return Tn(d,bde),(Array.isArray(l)?l:[l]).map(E=>`${E} ${typeof f=="string"?f:Z2(f)} ${y} ${typeof a=="string"?a:Z2(a)}`).join(",")}},e,{easing:t,duration:n})}const wde={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Ede=wde,Tde=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function cH(e={},...t){const{mixins:n={},palette:r={},transitions:l={},typography:d={}}=e,f=Tn(e,Tde);if(e.vars)throw new Error(p0(18));const y=ude(r),a=Bx(e);let E=Rl(a,{mixins:Gue(a.breakpoints,n),palette:y,shadows:yde.slice(),typography:fde(y,d),transitions:xde(l),zIndex:Ae({},Ede)});return E=Rl(E,f),E=t.reduce((C,M)=>Rl(C,M),E),E.unstable_sxConfig=Ae({},Nx,f?.unstable_sxConfig),E.unstable_sx=function(M){return zx({sx:M,theme:this})},E}const Sde=cH(),nk=Sde,Fx="$$material";function uH(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Cde=e=>uH(e)&&e!=="classes",Qs=Cde,_n=Rue({themeId:Fx,defaultTheme:nk,rootShouldForwardProp:Qs});function kde(e){const{theme:t,name:n,props:r}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?r:vI(t.components[n].defaultProps,r)}function Ade(e){return Object.keys(e).length===0}function Mde(e=null){const t=j.useContext(zC);return!t||Ade(t)?e:t}const Dde=Bx();function rk(e=Dde){return Mde(e)}function dH({props:e,name:t,defaultTheme:n,themeId:r}){let l=rk(n);return r&&(l=l[r]||l),kde({theme:l,name:t,props:e})}function Hr({props:e,name:t}){return dH({props:e,name:t,defaultTheme:nk,themeId:Fx})}function aS(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function ti(...e){return j.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{aS(n,t)})},e)}const Rde=typeof window<"u"?j.useLayoutEffect:j.useEffect,Cc=Rde;function Fh(e){const t=j.useRef(e);return Cc(()=>{t.current=e}),j.useRef((...n)=>(0,t.current)(...n)).current}const K2={};function Ide(e,t){const n=j.useRef(K2);return n.current===K2&&(n.current=e(t)),n}const Pde=[];function Ode(e){j.useEffect(e,Pde)}class jx{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new jx}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}}function Mp(){const e=Ide(jx.create).current;return Ode(e.disposeEffect),e}let ok=!0,XD=!1;const Lde=new jx,Nde={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function zde(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&Nde[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function Bde(e){e.metaKey||e.altKey||e.ctrlKey||(ok=!0)}function F3(){ok=!1}function Fde(){this.visibilityState==="hidden"&&XD&&(ok=!0)}function jde(e){e.addEventListener("keydown",Bde,!0),e.addEventListener("mousedown",F3,!0),e.addEventListener("pointerdown",F3,!0),e.addEventListener("touchstart",F3,!0),e.addEventListener("visibilitychange",Fde,!0)}function $de(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return ok||zde(t)}function ik(){const e=j.useCallback(l=>{l!=null&&jde(l.ownerDocument)},[]),t=j.useRef(!1);function n(){return t.current?(XD=!0,Lde.start(100,()=>{XD=!1}),t.current=!1,!0):!1}function r(l){return $de(l)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:r,onBlur:n,ref:e}}function Ude(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BI(e,t){var n=function(d){return t&&j.isValidElement(d)?t(d):d},r=Object.create(null);return e&&j.Children.map(e,function(l){return l}).forEach(function(l){r[l.key]=n(l)}),r}function Vde(e,t){e=e||{},t=t||{};function n(C){return C in t?t[C]:e[C]}var r=Object.create(null),l=[];for(var d in e)d in t?l.length&&(r[d]=l,l=[]):l.push(d);var f,y={};for(var a in t){if(r[a])for(f=0;f<r[a].length;f++){var E=r[a][f];y[r[a][f]]=n(E)}y[a]=n(a)}for(f=0;f<l.length;f++)y[l[f]]=n(l[f]);return y}function Zg(e,t,n){return n[t]!=null?n[t]:e.props[t]}function Hde(e,t){return BI(e.children,function(n){return j.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Zg(n,"appear",e),enter:Zg(n,"enter",e),exit:Zg(n,"exit",e)})})}function Wde(e,t,n){var r=BI(e.children),l=Vde(t,r);return Object.keys(l).forEach(function(d){var f=l[d];if(j.isValidElement(f)){var y=d in t,a=d in r,E=t[d],C=j.isValidElement(E)&&!E.props.in;a&&(!y||C)?l[d]=j.cloneElement(f,{onExited:n.bind(null,f),in:!0,exit:Zg(f,"exit",e),enter:Zg(f,"enter",e)}):!a&&y&&!C?l[d]=j.cloneElement(f,{in:!1}):a&&y&&j.isValidElement(E)&&(l[d]=j.cloneElement(f,{onExited:n.bind(null,f),in:E.props.in,exit:Zg(f,"exit",e),enter:Zg(f,"enter",e)}))}}),l}var Yde=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Gde={component:"div",childFactory:function(t){return t}},FI=function(e){c$(t,e);function t(r,l){var d;d=e.call(this,r,l)||this;var f=d.handleExited.bind(Ude(d));return d.state={contextValue:{isMounting:!0},handleExited:f,firstRender:!0},d}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(l,d){var f=d.children,y=d.handleExited,a=d.firstRender;return{children:a?Hde(l,y):Wde(l,f,y),firstRender:!1}},n.handleExited=function(l,d){var f=BI(this.props.children);l.key in f||(l.props.onExited&&l.props.onExited(d),this.mounted&&this.setState(function(y){var a=Ae({},y.children);return delete a[l.key],{children:a}}))},n.render=function(){var l=this.props,d=l.component,f=l.childFactory,y=Tn(l,["component","childFactory"]),a=this.state.contextValue,E=Yde(this.state.children).map(f);return delete y.appear,delete y.enter,delete y.exit,d===null?dt.createElement(eS.Provider,{value:a},E):dt.createElement(eS.Provider,{value:a},dt.createElement(d,y,E))},t}(dt.Component);FI.propTypes={};FI.defaultProps=Gde;const qde=FI;function Zde({styles:e,themeId:t,defaultTheme:n={}}){const r=rk(n),l=typeof e=="function"?e(t&&r[t]||r):e;return O.jsx(YV,{styles:l})}const Kde=["className","component"];function Xde(e={}){const{themeId:t,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:l}=e,d=DI("div",{shouldForwardProp:y=>y!=="theme"&&y!=="sx"&&y!=="as"})(zx);return j.forwardRef(function(a,E){const C=rk(n),M=tk(a),{className:P,component:N="div"}=M,F=Tn(M,Kde);return O.jsx(d,Ae({as:N,ref:E,className:fn(P,l?l(r):r),theme:t&&C[t]||C},F))})}function Ar(e,t,n="Mui"){const r={};return t.forEach(l=>{r[l]=Lr(e,l,n)}),r}const Qde=["ownerState"],Jde=["variants"],ehe=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function the(e){return Object.keys(e).length===0}function nhe(e){return typeof e=="string"&&e.charCodeAt(0)>96}function j3(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const rhe=Bx(),ohe=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function gE({defaultTheme:e,theme:t,themeId:n}){return the(t)?e:t[n]||t}function ihe(e){return e?(t,n)=>n[e]:null}function fT(e,t){let{ownerState:n}=t,r=Tn(t,Qde);const l=typeof e=="function"?e(Ae({ownerState:n},r)):e;if(Array.isArray(l))return l.flatMap(d=>fT(d,Ae({ownerState:n},r)));if(l&&typeof l=="object"&&Array.isArray(l.variants)){const{variants:d=[]}=l;let y=Tn(l,Jde);return d.forEach(a=>{let E=!0;typeof a.props=="function"?E=a.props(Ae({ownerState:n},r,n)):Object.keys(a.props).forEach(C=>{n?.[C]!==a.props[C]&&r[C]!==a.props[C]&&(E=!1)}),E&&(Array.isArray(y)||(y=[y]),y.push(typeof a.style=="function"?a.style(Ae({ownerState:n},r,n)):a.style))}),y}return l}function ahe(e={}){const{themeId:t,defaultTheme:n=rhe,rootShouldForwardProp:r=j3,slotShouldForwardProp:l=j3}=e,d=f=>zx(Ae({},f,{theme:gE(Ae({},f,{defaultTheme:n,themeId:t}))}));return d.__mui_systemSx=!0,(f,y={})=>{GV(f,ie=>ie.filter(ue=>!(ue!=null&&ue.__mui_systemSx)));const{name:a,slot:E,skipVariantsResolver:C,skipSx:M,overridesResolver:P=ihe(ohe(E))}=y,N=Tn(y,ehe),F=C!==void 0?C:E&&E!=="Root"&&E!=="root"||!1,$=M||!1;let Z,q=j3;E==="Root"||E==="root"?q=r:E?q=l:nhe(f)&&(q=void 0);const K=DI(f,Ae({shouldForwardProp:q,label:Z},N)),Q=ie=>typeof ie=="function"&&ie.__emotion_real!==ie||Oh(ie)?ue=>fT(ie,Ae({},ue,{theme:gE({theme:ue.theme,defaultTheme:n,themeId:t})})):ie,te=(ie,...ue)=>{let re=Q(ie);const me=ue?ue.map(Q):[];a&&P&&me.push(je=>{const Be=gE(Ae({},je,{defaultTheme:n,themeId:t}));if(!Be.components||!Be.components[a]||!Be.components[a].styleOverrides)return null;const Ue=Be.components[a].styleOverrides,Ge={};return Object.entries(Ue).forEach(([ze,ot])=>{Ge[ze]=fT(ot,Ae({},je,{theme:Be}))}),P(je,Ge)}),a&&!F&&me.push(je=>{var Be;const Ue=gE(Ae({},je,{defaultTheme:n,themeId:t})),Ge=Ue==null||(Be=Ue.components)==null||(Be=Be[a])==null?void 0:Be.variants;return fT({variants:Ge},Ae({},je,{theme:Ue}))}),$||me.push(d);const ve=me.length-ue.length;if(Array.isArray(ie)&&ve>0){const je=new Array(ve).fill("");re=[...ie,...je],re.raw=[...ie.raw,...je]}const De=K(re,...me);return f.muiName&&(De.muiName=f.muiName),De};return K.withConfig&&(te.withConfig=K.withConfig),te}}const she=ahe();function QD(...e){return e.reduce((t,n)=>n==null?t:function(...l){t.apply(this,l),n.apply(this,l)},()=>{})}function ak(e,t=166){let n;function r(...l){const d=()=>{e.apply(this,l)};clearTimeout(n),n=setTimeout(d,t)}return r.clear=()=>{clearTimeout(n)},r}function lhe(e,t){return()=>null}function bb(e,t){var n,r;return j.isValidElement(e)&&t.indexOf((n=e.type.muiName)!=null?n:(r=e.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function ss(e){return e&&e.ownerDocument||document}function Td(e){return ss(e).defaultView||window}function che(e,t){return()=>null}let X2=0;function uhe(e){const[t,n]=j.useState(e),r=e||t;return j.useEffect(()=>{t==null&&(X2+=1,n(`mui-${X2}`))},[t]),r}const Q2=A1.useId;function $x(e){if(Q2!==void 0){const t=Q2();return e??t}return uhe(e)}function dhe(e,t,n,r,l){return null}function Gb({controlled:e,default:t,name:n,state:r="value"}){const{current:l}=j.useRef(e!==void 0),[d,f]=j.useState(t),y=l?e:d,a=j.useCallback(E=>{l||f(E)},[]);return[y,a]}function hH(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const hhe=j.createContext(),jI=()=>{const e=j.useContext(hhe);return e??!1},fhe=["className","component","disableGutters","fixed","maxWidth","classes"],phe=Bx(),mhe=she("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${Yn(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),ghe=e=>dH({props:e,name:"MuiContainer",defaultTheme:phe}),yhe=(e,t)=>{const n=a=>Lr(t,a),{classes:r,fixed:l,disableGutters:d,maxWidth:f}=e,y={root:["root",f&&`maxWidth${Yn(String(f))}`,l&&"fixed",d&&"disableGutters"]};return Or(y,n,r)};function bhe(e={}){const{createStyledComponent:t=mhe,useThemeProps:n=ghe,componentName:r="MuiContainer"}=e,l=t(({theme:f,ownerState:y})=>Ae({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!y.disableGutters&&{paddingLeft:f.spacing(2),paddingRight:f.spacing(2),[f.breakpoints.up("sm")]:{paddingLeft:f.spacing(3),paddingRight:f.spacing(3)}}),({theme:f,ownerState:y})=>y.fixed&&Object.keys(f.breakpoints.values).reduce((a,E)=>{const C=E,M=f.breakpoints.values[C];return M!==0&&(a[f.breakpoints.up(C)]={maxWidth:`${M}${f.breakpoints.unit}`}),a},{}),({theme:f,ownerState:y})=>Ae({},y.maxWidth==="xs"&&{[f.breakpoints.up("xs")]:{maxWidth:Math.max(f.breakpoints.values.xs,444)}},y.maxWidth&&y.maxWidth!=="xs"&&{[f.breakpoints.up(y.maxWidth)]:{maxWidth:`${f.breakpoints.values[y.maxWidth]}${f.breakpoints.unit}`}}));return j.forwardRef(function(y,a){const E=n(y),{className:C,component:M="div",disableGutters:P=!1,fixed:N=!1,maxWidth:F="lg"}=E,$=Tn(E,fhe),Z=Ae({},E,{component:M,disableGutters:P,fixed:N,maxWidth:F}),q=yhe(Z,r);return O.jsx(l,Ae({as:M,ownerState:Z,className:fn(q.root,C),ref:a},$))})}function vhe(e){const{className:t,classes:n,pulsate:r=!1,rippleX:l,rippleY:d,rippleSize:f,in:y,onExited:a,timeout:E}=e,[C,M]=j.useState(!1),P=fn(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),N={width:f,height:f,top:-(f/2)+d,left:-(f/2)+l},F=fn(n.child,C&&n.childLeaving,r&&n.childPulsate);return!y&&!C&&M(!0),j.useEffect(()=>{if(!y&&a!=null){const $=setTimeout(a,E);return()=>{clearTimeout($)}}},[a,y,E]),O.jsx("span",{className:P,style:N,children:O.jsx("span",{className:F})})}const cc=Ar("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),_he=["center","classes","className"];let sk=e=>e,J2,e8,t8,n8;const JD=550,xhe=80,whe=BC(J2||(J2=sk`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),Ehe=BC(e8||(e8=sk`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),The=BC(t8||(t8=sk`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),She=_n("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Che=_n(vhe,{name:"MuiTouchRipple",slot:"Ripple"})(n8||(n8=sk`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),cc.rippleVisible,whe,JD,({theme:e})=>e.transitions.easing.easeInOut,cc.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,cc.child,cc.childLeaving,Ehe,JD,({theme:e})=>e.transitions.easing.easeInOut,cc.childPulsate,The,({theme:e})=>e.transitions.easing.easeInOut),khe=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiTouchRipple"}),{center:l=!1,classes:d={},className:f}=r,y=Tn(r,_he),[a,E]=j.useState([]),C=j.useRef(0),M=j.useRef(null);j.useEffect(()=>{M.current&&(M.current(),M.current=null)},[a]);const P=j.useRef(!1),N=Mp(),F=j.useRef(null),$=j.useRef(null),Z=j.useCallback(te=>{const{pulsate:ie,rippleX:ue,rippleY:re,rippleSize:me,cb:ve}=te;E(De=>[...De,O.jsx(Che,{classes:{ripple:fn(d.ripple,cc.ripple),rippleVisible:fn(d.rippleVisible,cc.rippleVisible),ripplePulsate:fn(d.ripplePulsate,cc.ripplePulsate),child:fn(d.child,cc.child),childLeaving:fn(d.childLeaving,cc.childLeaving),childPulsate:fn(d.childPulsate,cc.childPulsate)},timeout:JD,pulsate:ie,rippleX:ue,rippleY:re,rippleSize:me},C.current)]),C.current+=1,M.current=ve},[d]),q=j.useCallback((te={},ie={},ue=()=>{})=>{const{pulsate:re=!1,center:me=l||ie.pulsate,fakeElement:ve=!1}=ie;if(te?.type==="mousedown"&&P.current){P.current=!1;return}te?.type==="touchstart"&&(P.current=!0);const De=ve?null:$.current,je=De?De.getBoundingClientRect():{width:0,height:0,left:0,top:0};let Be,Ue,Ge;if(me||te===void 0||te.clientX===0&&te.clientY===0||!te.clientX&&!te.touches)Be=Math.round(je.width/2),Ue=Math.round(je.height/2);else{const{clientX:ze,clientY:ot}=te.touches&&te.touches.length>0?te.touches[0]:te;Be=Math.round(ze-je.left),Ue=Math.round(ot-je.top)}if(me)Ge=Math.sqrt((2*je.width**2+je.height**2)/3),Ge%2===0&&(Ge+=1);else{const ze=Math.max(Math.abs((De?De.clientWidth:0)-Be),Be)*2+2,ot=Math.max(Math.abs((De?De.clientHeight:0)-Ue),Ue)*2+2;Ge=Math.sqrt(ze**2+ot**2)}te!=null&&te.touches?F.current===null&&(F.current=()=>{Z({pulsate:re,rippleX:Be,rippleY:Ue,rippleSize:Ge,cb:ue})},N.start(xhe,()=>{F.current&&(F.current(),F.current=null)})):Z({pulsate:re,rippleX:Be,rippleY:Ue,rippleSize:Ge,cb:ue})},[l,Z,N]),K=j.useCallback(()=>{q({},{pulsate:!0})},[q]),Q=j.useCallback((te,ie)=>{if(N.clear(),te?.type==="touchend"&&F.current){F.current(),F.current=null,N.start(0,()=>{Q(te,ie)});return}F.current=null,E(ue=>ue.length>0?ue.slice(1):ue),M.current=ie},[N]);return j.useImperativeHandle(n,()=>({pulsate:K,start:q,stop:Q}),[K,q,Q]),O.jsx(She,Ae({className:fn(cc.root,d.root,f),ref:$},y,{children:O.jsx(qde,{component:null,exit:!0,children:a})}))}),Ahe=khe;function Mhe(e){return Lr("MuiButtonBase",e)}const Dhe=Ar("MuiButtonBase",["root","disabled","focusVisible"]),Rhe=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Ihe=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:l}=e,f=Or({root:["root",t&&"disabled",n&&"focusVisible"]},Mhe,l);return n&&r&&(f.root+=` ${r}`),f},Phe=_n("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Dhe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Ohe=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiButtonBase"}),{action:l,centerRipple:d=!1,children:f,className:y,component:a="button",disabled:E=!1,disableRipple:C=!1,disableTouchRipple:M=!1,focusRipple:P=!1,LinkComponent:N="a",onBlur:F,onClick:$,onContextMenu:Z,onDragLeave:q,onFocus:K,onFocusVisible:Q,onKeyDown:te,onKeyUp:ie,onMouseDown:ue,onMouseLeave:re,onMouseUp:me,onTouchEnd:ve,onTouchMove:De,onTouchStart:je,tabIndex:Be=0,TouchRippleProps:Ue,touchRippleRef:Ge,type:ze}=r,ot=Tn(r,Rhe),st=j.useRef(null),Re=j.useRef(null),bt=ti(Re,Ge),{isFocusVisibleRef:Lt,onFocus:Ct,onBlur:Nt,ref:tn}=ik(),[Dt,cn]=j.useState(!1);E&&Dt&&cn(!1),j.useImperativeHandle(l,()=>({focusVisible:()=>{cn(!0),st.current.focus()}}),[]);const[Mt,Vn]=j.useState(!1);j.useEffect(()=>{Vn(!0)},[]);const nt=Mt&&!C&&!E;j.useEffect(()=>{Dt&&P&&!C&&Mt&&Re.current.pulsate()},[C,P,Dt,Mt]);function Pn(Pe,at,ft=M){return Fh(it=>(at&&at(it),!ft&&Re.current&&Re.current[Pe](it),!0))}const Un=Pn("start",ue),En=Pn("stop",Z),bn=Pn("stop",q),Fn=Pn("stop",me),On=Pn("stop",Pe=>{Dt&&Pe.preventDefault(),re&&re(Pe)}),an=Pn("start",je),qr=Pn("stop",ve),hn=Pn("stop",De),Wr=Pn("stop",Pe=>{Nt(Pe),Lt.current===!1&&cn(!1),F&&F(Pe)},!1),go=Fh(Pe=>{st.current||(st.current=Pe.currentTarget),Ct(Pe),Lt.current===!0&&(cn(!0),Q&&Q(Pe)),K&&K(Pe)}),pr=()=>{const Pe=st.current;return a&&a!=="button"&&!(Pe.tagName==="A"&&Pe.href)},Pr=j.useRef(!1),to=Fh(Pe=>{P&&!Pr.current&&Dt&&Re.current&&Pe.key===" "&&(Pr.current=!0,Re.current.stop(Pe,()=>{Re.current.start(Pe)})),Pe.target===Pe.currentTarget&&pr()&&Pe.key===" "&&Pe.preventDefault(),te&&te(Pe),Pe.target===Pe.currentTarget&&pr()&&Pe.key==="Enter"&&!E&&(Pe.preventDefault(),$&&$(Pe))}),Mr=Fh(Pe=>{P&&Pe.key===" "&&Re.current&&Dt&&!Pe.defaultPrevented&&(Pr.current=!1,Re.current.stop(Pe,()=>{Re.current.pulsate(Pe)})),ie&&ie(Pe),$&&Pe.target===Pe.currentTarget&&pr()&&Pe.key===" "&&!Pe.defaultPrevented&&$(Pe)});let mr=a;mr==="button"&&(ot.href||ot.to)&&(mr=N);const eo={};mr==="button"?(eo.type=ze===void 0?"button":ze,eo.disabled=E):(!ot.href&&!ot.to&&(eo.role="button"),E&&(eo["aria-disabled"]=E));const Ke=ti(n,tn,st),pe=Ae({},r,{centerRipple:d,component:a,disabled:E,disableRipple:C,disableTouchRipple:M,focusRipple:P,tabIndex:Be,focusVisible:Dt}),we=Ihe(pe);return O.jsxs(Phe,Ae({as:mr,className:fn(we.root,y),ownerState:pe,onBlur:Wr,onClick:$,onContextMenu:En,onFocus:go,onKeyDown:to,onKeyUp:Mr,onMouseDown:Un,onMouseLeave:On,onMouseUp:Fn,onDragLeave:bn,onTouchEnd:qr,onTouchMove:hn,onTouchStart:an,ref:Ke,tabIndex:E?-1:Be,type:ze},eo,ot,{children:[f,nt?O.jsx(Ahe,Ae({ref:bt,center:d},Ue)):null]}))}),_v=Ohe;function Lhe(e){return Lr("MuiButton",e)}const Nhe=Ar("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),yE=Nhe,zhe=j.createContext({}),Bhe=zhe,Fhe=j.createContext(void 0),jhe=Fhe,$he=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Uhe=e=>{const{color:t,disableElevation:n,fullWidth:r,size:l,variant:d,classes:f}=e,y={root:["root",d,`${d}${Yn(t)}`,`size${Yn(l)}`,`${d}Size${Yn(l)}`,`color${Yn(t)}`,n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${Yn(l)}`],endIcon:["icon","endIcon",`iconSize${Yn(l)}`]},a=Or(y,Lhe,f);return Ae({},f,a)},fH=e=>Ae({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),Vhe=_n(_v,{shouldForwardProp:e=>Qs(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${Yn(n.color)}`],t[`size${Yn(n.size)}`],t[`${n.variant}Size${Yn(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var n,r;const l=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],d=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return Ae({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":Ae({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:da(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:da(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:da(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:d,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":Ae({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${yE.focusVisible}`]:Ae({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${yE.disabled}`]:Ae({color:(e.vars||e).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},t.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${da(e.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(n=(r=e.palette).getContrastText)==null?void 0:n.call(r,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:l,boxShadow:(e.vars||e).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${yE.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${yE.disabled}`]:{boxShadow:"none"}}),Hhe=_n("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${Yn(n.size)}`]]}})(({ownerState:e})=>Ae({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},fH(e))),Whe=_n("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${Yn(n.size)}`]]}})(({ownerState:e})=>Ae({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},fH(e))),Yhe=j.forwardRef(function(t,n){const r=j.useContext(Bhe),l=j.useContext(jhe),d=vI(r,t),f=Hr({props:d,name:"MuiButton"}),{children:y,color:a="primary",component:E="button",className:C,disabled:M=!1,disableElevation:P=!1,disableFocusRipple:N=!1,endIcon:F,focusVisibleClassName:$,fullWidth:Z=!1,size:q="medium",startIcon:K,type:Q,variant:te="text"}=f,ie=Tn(f,$he),ue=Ae({},f,{color:a,component:E,disabled:M,disableElevation:P,disableFocusRipple:N,fullWidth:Z,size:q,type:Q,variant:te}),re=Uhe(ue),me=K&&O.jsx(Hhe,{className:re.startIcon,ownerState:ue,children:K}),ve=F&&O.jsx(Whe,{className:re.endIcon,ownerState:ue,children:F}),De=l||"";return O.jsxs(Vhe,Ae({ownerState:ue,className:fn(r.className,re.root,C,De),component:E,disabled:M,focusRipple:!N,focusVisibleClassName:fn(re.focusVisible,$),ref:n,type:Q},ie,{classes:re,children:[me,y,ve]}))}),la=Yhe,Ghe="/assets/llama-homepage-f54QODG8.png",pH="/assets/home-banner-vRSwIKJ5.png";function qhe(){return O.jsxs(O.Fragment,{children:[O.jsx(Zi,{style:{marginTop:"4rem"},children:O.jsxs(Jr,{className:"d-flex justify-content-center",children:[O.jsx(Ir,{md:3,lg:3,sm:12,className:"text-center",style:{paddingTop:"2px"},children:O.jsx(JT,{src:Ghe,rounded:!0,style:{height:"19rem",width:"19rem",marginTop:"17px",filter:"drop-shadow(gray -1rem 2rem 10px)"}})}),O.jsxs(Ir,{lg:9,md:9,sm:12,className:"text-center mt-4",style:{paddingTop:"6px"},children:[O.jsx(Jr,{className:"mt-4",children:O.jsxs("h1",{className:"homepage-header-text",children:["Join our dynamic platform to seamlessly discover and participate in social impact events, organize meaningful initiatives, and collaborate with others to drive social change"," ",O.jsx("span",{style:{fontStyle:"italic"},children:"all in one place!"})]})}),O.jsx(Jr,{className:"text-center",children:O.jsx("h4",{className:"homepage-subtext",children:"Sign up to make impactful connections today!"})}),O.jsx(Jr,{className:"text-center",children:O.jsxs(Ir,{className:"mt-2",children:[O.jsx(la,{component:va,to:"/signup",style:{marginRight:"px",paddingLeft:"3rem",paddingRight:"3rem"},size:"large",variant:"outlined",sx:{borderColor:"primary.dark",color:"black",border:"2px solid",fontWeight:"bold","&:hover":{backgroundColor:"secondary.dark",color:"white"}},children:"Sign Up"}),O.jsx(la,{component:va,to:"/login",style:{marginLeft:"20px",paddingLeft:"3.5rem",paddingRight:"3.5rem"},size:"large",variant:"outlined",sx:{borderColor:"primary.dark",color:"black",fontWeight:"bold",border:"2px solid","&:hover":{backgroundColor:"secondary.dark",color:"white"}},children:"Login"})]})})]})]})}),O.jsx("div",{style:{height:"15rem",display:"flex",justifyContent:"center",alignItems:"flex-end"},children:O.jsx("img",{style:{height:"5rem"},src:"src/assets/scroll-chevrons.png",alt:"scroll to learn more"})}),O.jsx("div",{style:{height:"8rem"}}),O.jsxs(Zi,{children:[O.jsx("h1",{style:{textAlign:"center"},children:"Support a Variety of Causes"}),O.jsxs(Jr,{style:{textAlign:"center",marginTop:"3rem"},children:[O.jsx(Ir,{children:O.jsx("h4",{children:"Make a Difference in Your Community"})}),O.jsx(Ir,{children:O.jsx("h4",{children:"Discover Volunteer Opportunities Near You"})}),O.jsx(Ir,{children:O.jsx("h4",{children:"Organize Events for a Good Cause"})})]}),O.jsxs(Jr,{style:{marginTop:"1rem"},children:[O.jsx(Ir,{children:"Our app supports a wide range of causes, including environmental causes, women's rights, minority support, and more."}),O.jsx(Ir,{children:"Find meaningful ways to give back to your community through our app's extensive network of volunteering options."}),O.jsx(Ir,{children:"Create and manage events that support your chosen cause, bringing people together to make a positive impact."})]})]}),O.jsx("div",{style:{height:"8rem"}}),O.jsxs(Zi,{style:{backgroundColor:"#6840DF",borderRadius:"10px",padding:"1rem",paddingTop:"3rem",paddingBottom:"3rem",boxShadow:"0 2px 4px rgba(0,0,0,0.5)"},children:[O.jsx("h1",{style:{textAlign:"center",color:"white"},children:"Join us and make a difference"}),O.jsx("p",{style:{textAlign:"center",color:"white"},children:"Sign up now and start contributing to the causes that you care about"}),O.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1rem",marginTop:"2rem"},children:O.jsx(la,{component:va,to:"/signup",style:{paddingLeft:"3rem",paddingRight:"3rem"},size:"large",variant:"outlined",sx:{borderColor:"primary.light",color:"white",border:"2px solid",fontWeight:"bold","&:hover":{backgroundColor:"secondary.dark",color:"white"}},children:"Sign Up Here!"})})]}),O.jsx("div",{style:{height:"8rem"}}),O.jsxs(Zi,{children:[O.jsx("h1",{style:{textAlign:"center"},children:"How It Works"}),O.jsxs(Jr,{style:{textAlign:"center",marginTop:"2rem"},children:[O.jsxs(Ir,{children:[O.jsx("h4",{children:"Sign Up"}),O.jsx("p",{style:{marginTop:"1rem"},children:"Register for an account to access our platform and start making a difference."}),O.jsx(la,{className:"d-flex justify-self-center",component:va,to:"/signup",sx:{color:"#6840DF",fontSize:"1rem"},children:"Sign Up Here!"})]}),O.jsxs(Ir,{children:[O.jsx("h4",{children:"Find Events"}),O.jsx("p",{style:{marginTop:"1rem"},children:"Search for events based on your interests, location, and availability."}),O.jsx(la,{className:"d-flex justify-self-center",component:va,to:"/events",sx:{color:"#6840DF",fontSize:"1rem"},children:"Look for Events!"})]}),O.jsxs(Ir,{children:[O.jsx("h4",{children:"Get Involved"}),O.jsx("p",{style:{marginTop:"1rem"},children:"Sign up to volunteer or collaborate on events that inspire you."}),O.jsx(la,{className:"d-flex justify-self-center",component:va,to:"/signup",sx:{color:"#6840DF",fontSize:"1rem"},children:"Get Started!"})]})]})]}),O.jsx("div",{style:{height:"8rem"}}),O.jsx(Zi,{children:O.jsx(JT,{className:"d-flex jusify-self-center",src:pH,alt:"Your impact matters",style:{borderRadius:"10px",boxShadow:"0 2px 4px rgba(0,0,0,0.5)"}})}),O.jsx("div",{style:{height:"7rem"}}),O.jsxs(Zi,{children:[O.jsx("h1",{style:{textAlign:"center"},children:"FAQs"}),O.jsx("h4",{children:"How do I create an event?"}),O.jsx("p",{style:{marginTop:"1rem"},children:"To create an event, simply go to the menu and click on the 'Create Event' option. Fill in the necessary details, such as the event name, date, location, and description. Once you're done, click 'Submit' to create the event."}),O.jsx("h4",{children:"How do I volunteer?"}),O.jsx("p",{style:{marginTop:"1rem"},children:"Volunteering is a great way to make a difference! Visit the 'Search Events' option on the menu to explore volunteering opportunities. You can filter by location, cause, date or whether it's In-Person or Virtual to find the perfect volunteer opportunity for you. Once you've found an opportunity you're interested in, click 'Count Me In' to get involved."}),O.jsx("h4",{children:"How can I manage my events?"}),O.jsx("p",{style:{marginTop:"1rem"},children:"Managing your events is simple! Just go to your event and click on the 'Event Admin' button. From there, you can view and edit your events, manage volunteers and collabrorators, and create tasks for your event's to-do list. Make sure to keep your event details up to date to ensure a successful event."}),O.jsx("h4",{children:"How do I sign up?"}),O.jsx("p",{style:{marginTop:"1rem"},children:"Signing up is quick and easy! Just click on the 'Sign Up' button on the homepage and fill in your details. Once you've completed the registration process, you'll be ready to start using our app and making a difference!"}),O.jsx("div",{style:{height:"5rem"}}),O.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"7rem"},children:O.jsx(la,{component:va,to:"/signup",style:{marginRight:"px",paddingLeft:"3rem",paddingRight:"3rem"},size:"large",variant:"outlined",sx:{fontSize:"1.25rem",borderColor:"primary.dark",color:"black",border:"2px solid",fontWeight:"bold","&:hover":{backgroundColor:"secondary.dark",color:"white"}},children:"Make a Difference Today!"})})]})]})}function lk(e){return Hr}function Zhe(e){return Lr("MuiSvgIcon",e)}Ar("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Khe=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Xhe=e=>{const{color:t,fontSize:n,classes:r}=e,l={root:["root",t!=="inherit"&&`color${Yn(t)}`,`fontSize${Yn(n)}`]};return Or(l,Zhe,r)},Qhe=_n("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${Yn(n.color)}`],t[`fontSize${Yn(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,r,l,d,f,y,a,E,C,M,P,N,F;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=e.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(l=e.transitions)==null||(l=l.duration)==null?void 0:l.shorter}),fontSize:{inherit:"inherit",small:((d=e.typography)==null||(f=d.pxToRem)==null?void 0:f.call(d,20))||"1.25rem",medium:((y=e.typography)==null||(a=y.pxToRem)==null?void 0:a.call(y,24))||"1.5rem",large:((E=e.typography)==null||(C=E.pxToRem)==null?void 0:C.call(E,35))||"2.1875rem"}[t.fontSize],color:(M=(P=(e.vars||e).palette)==null||(P=P[t.color])==null?void 0:P.main)!=null?M:{action:(N=(e.vars||e).palette)==null||(N=N.action)==null?void 0:N.active,disabled:(F=(e.vars||e).palette)==null||(F=F.action)==null?void 0:F.disabled,inherit:void 0}[t.color]}}),e5=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiSvgIcon"}),{children:l,className:d,color:f="inherit",component:y="svg",fontSize:a="medium",htmlColor:E,inheritViewBox:C=!1,titleAccess:M,viewBox:P="0 0 24 24"}=r,N=Tn(r,Khe),F=j.isValidElement(l)&&l.type==="svg",$=Ae({},r,{color:f,component:y,fontSize:a,instanceFontSize:t.fontSize,inheritViewBox:C,viewBox:P,hasSvgAsChild:F}),Z={};C||(Z.viewBox=P);const q=Xhe($);return O.jsxs(Qhe,Ae({as:y,className:fn(q.root,d),focusable:"false",color:E,"aria-hidden":M?void 0:!0,role:M?"img":void 0,ref:n},Z,N,F&&l.props,{ownerState:$,children:[F?l.props.children:l,M?O.jsx("title",{children:M}):null]}))});e5.muiName="SvgIcon";function $I(e,t){function n(r,l){return O.jsx(e5,Ae({"data-testid":`${t}Icon`,ref:l},r,{children:e}))}return n.muiName=e5.muiName,j.memo(j.forwardRef(n))}const Jhe=$I(O.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function efe(e){return Lr("MuiAvatar",e)}Ar("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);function qb(e){return typeof e=="string"}function ib(e,t,n){return e===void 0||qb(e)?t:Ae({},t,{ownerState:Ae({},t.ownerState,n)})}const tfe={disableDefaultClasses:!1},nfe=j.createContext(tfe);function rfe(e){const{disableDefaultClasses:t}=j.useContext(nfe);return n=>t?"":e(n)}function mH(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(r=>r.match(/^on[A-Z]/)&&typeof e[r]=="function"&&!t.includes(r)).forEach(r=>{n[r]=e[r]}),n}function gH(e,t,n){return typeof e=="function"?e(t,n):e}function r8(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function yH(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:l,className:d}=e;if(!t){const N=fn(n?.className,d,l?.className,r?.className),F=Ae({},n?.style,l?.style,r?.style),$=Ae({},n,l,r);return N.length>0&&($.className=N),Object.keys(F).length>0&&($.style=F),{props:$,internalRef:void 0}}const f=mH(Ae({},l,r)),y=r8(r),a=r8(l),E=t(f),C=fn(E?.className,n?.className,d,l?.className,r?.className),M=Ae({},E?.style,n?.style,l?.style,r?.style),P=Ae({},E,n,a,y);return C.length>0&&(P.className=C),Object.keys(M).length>0&&(P.style=M),{props:P,internalRef:E.ref}}const ofe=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function m0(e){var t;const{elementType:n,externalSlotProps:r,ownerState:l,skipResolvingSlotProps:d=!1}=e,f=Tn(e,ofe),y=d?{}:gH(r,l),{props:a,internalRef:E}=yH(Ae({},f,{externalSlotProps:y})),C=ti(E,y?.ref,(t=e.additionalProps)==null?void 0:t.ref);return ib(n,Ae({},a,{ref:C}),l)}const ife=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],afe=["component","slots","slotProps"],sfe=["component"];function bH(e,t){const{className:n,elementType:r,ownerState:l,externalForwardedProps:d,getSlotOwnerState:f,internalForwardedProps:y}=t,a=Tn(t,ife),{component:E,slots:C={[e]:void 0},slotProps:M={[e]:void 0}}=d,P=Tn(d,afe),N=C[e]||r,F=gH(M[e],l),$=yH(Ae({className:n},a,{externalForwardedProps:e==="root"?P:void 0,externalSlotProps:F})),{props:{component:Z},internalRef:q}=$,K=Tn($.props,sfe),Q=ti(q,F?.ref,t.ref),te=f?f(K):{},ie=Ae({},l,te),ue=e==="root"?Z||E:Z,re=ib(N,Ae({},e==="root"&&!E&&!C[e]&&y,e!=="root"&&!C[e]&&y,K,ue&&{as:ue},{ref:Q}),ie);return Object.keys(te).forEach(me=>{delete re[me]}),[N,re]}const lfe=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],cfe=lk(),ufe=e=>{const{classes:t,variant:n,colorDefault:r}=e;return Or({root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]},efe,t)},dfe=_n("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:Ae({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:Ae({backgroundColor:e.palette.grey[400]},e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})))}]})),hfe=_n("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),ffe=_n(Jhe,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function pfe({crossOrigin:e,referrerPolicy:t,src:n,srcSet:r}){const[l,d]=j.useState(!1);return j.useEffect(()=>{if(!n&&!r)return;d(!1);let f=!0;const y=new Image;return y.onload=()=>{f&&d("loaded")},y.onerror=()=>{f&&d("error")},y.crossOrigin=e,y.referrerPolicy=t,y.src=n,r&&(y.srcset=r),()=>{f=!1}},[e,t,n,r]),l}const mfe=j.forwardRef(function(t,n){const r=cfe({props:t,name:"MuiAvatar"}),{alt:l,children:d,className:f,component:y="div",slots:a={},slotProps:E={},imgProps:C,sizes:M,src:P,srcSet:N,variant:F="circular"}=r,$=Tn(r,lfe);let Z=null;const q=pfe(Ae({},C,{src:P,srcSet:N})),K=P||N,Q=K&&q!=="error",te=Ae({},r,{colorDefault:!Q,component:y,variant:F}),ie=ufe(te),[ue,re]=bH("img",{className:ie.img,elementType:hfe,externalForwardedProps:{slots:a,slotProps:{img:Ae({},C,E.img)}},additionalProps:{alt:l,src:P,srcSet:N,sizes:M},ownerState:te});return Q?Z=O.jsx(ue,Ae({},re)):d||d===0?Z=d:K&&l?Z=l[0]:Z=O.jsx(ffe,{ownerState:te,className:ie.fallback}),O.jsx(dfe,Ae({as:y,ownerState:te,className:fn(ie.root,f),ref:n},$,{children:Z}))}),gu=mfe,vH="base";function gfe(e){return`${vH}--${e}`}function yfe(e,t){return`${vH}-${e}-${t}`}function _H(e,t){const n=sH[t];return n?gfe(n):yfe(e,t)}function bfe(e,t){const n={};return t.forEach(r=>{n[r]=_H(e,r)}),n}const vfe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function _fe(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function xfe(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=r=>e.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function wfe(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||xfe(e))}function Efe(e){const t=[],n=[];return Array.from(e.querySelectorAll(vfe)).forEach((r,l)=>{const d=_fe(r);d===-1||!wfe(r)||(d===0?t.push(r):n.push({documentOrder:l,tabIndex:d,node:r}))}),n.sort((r,l)=>r.tabIndex===l.tabIndex?r.documentOrder-l.documentOrder:r.tabIndex-l.tabIndex).map(r=>r.node).concat(t)}function Tfe(){return!0}function Sfe(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:l=!1,getTabbable:d=Efe,isEnabled:f=Tfe,open:y}=e,a=j.useRef(!1),E=j.useRef(null),C=j.useRef(null),M=j.useRef(null),P=j.useRef(null),N=j.useRef(!1),F=j.useRef(null),$=ti(t.ref,F),Z=j.useRef(null);j.useEffect(()=>{!y||!F.current||(N.current=!n)},[n,y]),j.useEffect(()=>{if(!y||!F.current)return;const Q=ss(F.current);return F.current.contains(Q.activeElement)||(F.current.hasAttribute("tabIndex")||F.current.setAttribute("tabIndex","-1"),N.current&&F.current.focus()),()=>{l||(M.current&&M.current.focus&&(a.current=!0,M.current.focus()),M.current=null)}},[y]),j.useEffect(()=>{if(!y||!F.current)return;const Q=ss(F.current),te=re=>{Z.current=re,!(r||!f()||re.key!=="Tab")&&Q.activeElement===F.current&&re.shiftKey&&(a.current=!0,C.current&&C.current.focus())},ie=()=>{const re=F.current;if(re===null)return;if(!Q.hasFocus()||!f()||a.current){a.current=!1;return}if(re.contains(Q.activeElement)||r&&Q.activeElement!==E.current&&Q.activeElement!==C.current)return;if(Q.activeElement!==P.current)P.current=null;else if(P.current!==null)return;if(!N.current)return;let me=[];if((Q.activeElement===E.current||Q.activeElement===C.current)&&(me=d(F.current)),me.length>0){var ve,De;const je=!!((ve=Z.current)!=null&&ve.shiftKey&&((De=Z.current)==null?void 0:De.key)==="Tab"),Be=me[0],Ue=me[me.length-1];typeof Be!="string"&&typeof Ue!="string"&&(je?Ue.focus():Be.focus())}else re.focus()};Q.addEventListener("focusin",ie),Q.addEventListener("keydown",te,!0);const ue=setInterval(()=>{Q.activeElement&&Q.activeElement.tagName==="BODY"&&ie()},50);return()=>{clearInterval(ue),Q.removeEventListener("focusin",ie),Q.removeEventListener("keydown",te,!0)}},[n,r,l,f,y,d]);const q=Q=>{M.current===null&&(M.current=Q.relatedTarget),N.current=!0,P.current=Q.target;const te=t.props.onFocus;te&&te(Q)},K=Q=>{M.current===null&&(M.current=Q.relatedTarget),N.current=!0};return O.jsxs(j.Fragment,{children:[O.jsx("div",{tabIndex:y?0:-1,onFocus:K,ref:E,"data-testid":"sentinelStart"}),j.cloneElement(t,{ref:$,onFocus:q}),O.jsx("div",{tabIndex:y?0:-1,onFocus:K,ref:C,"data-testid":"sentinelEnd"})]})}const Zb=Math.min,n0=Math.max,sS=Math.round,bE=Math.floor,Zp=e=>({x:e,y:e}),Cfe={left:"right",right:"left",bottom:"top",top:"bottom"},kfe={start:"end",end:"start"};function Afe(e,t,n){return n0(e,Zb(t,n))}function ck(e,t){return typeof e=="function"?e(t):e}function Kb(e){return e.split("-")[0]}function Ux(e){return e.split("-")[1]}function Mfe(e){return e==="x"?"y":"x"}function UI(e){return e==="y"?"height":"width"}function VI(e){return["top","bottom"].includes(Kb(e))?"y":"x"}function HI(e){return Mfe(VI(e))}function Dfe(e,t,n){n===void 0&&(n=!1);const r=Ux(e),l=HI(e),d=UI(l);let f=l==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[d]>t.floating[d]&&(f=lS(f)),[f,lS(f)]}function Rfe(e){const t=lS(e);return[t5(e),t,t5(t)]}function t5(e){return e.replace(/start|end/g,t=>kfe[t])}function Ife(e,t,n){const r=["left","right"],l=["right","left"],d=["top","bottom"],f=["bottom","top"];switch(e){case"top":case"bottom":return n?t?l:r:t?r:l;case"left":case"right":return t?d:f;default:return[]}}function Pfe(e,t,n,r){const l=Ux(e);let d=Ife(Kb(e),n==="start",r);return l&&(d=d.map(f=>f+"-"+l),t&&(d=d.concat(d.map(t5)))),d}function lS(e){return e.replace(/left|right|bottom|top/g,t=>Cfe[t])}function Ofe(e){return{top:0,right:0,bottom:0,left:0,...e}}function xH(e){return typeof e!="number"?Ofe(e):{top:e,right:e,bottom:e,left:e}}function cS(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function o8(e,t,n){let{reference:r,floating:l}=e;const d=VI(t),f=HI(t),y=UI(f),a=Kb(t),E=d==="y",C=r.x+r.width/2-l.width/2,M=r.y+r.height/2-l.height/2,P=r[y]/2-l[y]/2;let N;switch(a){case"top":N={x:C,y:r.y-l.height};break;case"bottom":N={x:C,y:r.y+r.height};break;case"right":N={x:r.x+r.width,y:M};break;case"left":N={x:r.x-l.width,y:M};break;default:N={x:r.x,y:r.y}}switch(Ux(t)){case"start":N[f]-=P*(n&&E?-1:1);break;case"end":N[f]+=P*(n&&E?-1:1);break}return N}const Lfe=async(e,t,n)=>{const{placement:r="bottom",strategy:l="absolute",middleware:d=[],platform:f}=n,y=d.filter(Boolean),a=await(f.isRTL==null?void 0:f.isRTL(t));let E=await f.getElementRects({reference:e,floating:t,strategy:l}),{x:C,y:M}=o8(E,r,a),P=r,N={},F=0;for(let $=0;$<y.length;$++){const{name:Z,fn:q}=y[$],{x:K,y:Q,data:te,reset:ie}=await q({x:C,y:M,initialPlacement:r,placement:P,strategy:l,middlewareData:N,rects:E,platform:f,elements:{reference:e,floating:t}});C=K??C,M=Q??M,N={...N,[Z]:{...N[Z],...te}},ie&&F<=50&&(F++,typeof ie=="object"&&(ie.placement&&(P=ie.placement),ie.rects&&(E=ie.rects===!0?await f.getElementRects({reference:e,floating:t,strategy:l}):ie.rects),{x:C,y:M}=o8(E,P,a)),$=-1)}return{x:C,y:M,placement:P,strategy:l,middlewareData:N}};async function Nfe(e,t){var n;t===void 0&&(t={});const{x:r,y:l,platform:d,rects:f,elements:y,strategy:a}=e,{boundary:E="clippingAncestors",rootBoundary:C="viewport",elementContext:M="floating",altBoundary:P=!1,padding:N=0}=ck(t,e),F=xH(N),Z=y[P?M==="floating"?"reference":"floating":M],q=cS(await d.getClippingRect({element:(n=await(d.isElement==null?void 0:d.isElement(Z)))==null||n?Z:Z.contextElement||await(d.getDocumentElement==null?void 0:d.getDocumentElement(y.floating)),boundary:E,rootBoundary:C,strategy:a})),K=M==="floating"?{...f.floating,x:r,y:l}:f.reference,Q=await(d.getOffsetParent==null?void 0:d.getOffsetParent(y.floating)),te=await(d.isElement==null?void 0:d.isElement(Q))?await(d.getScale==null?void 0:d.getScale(Q))||{x:1,y:1}:{x:1,y:1},ie=cS(d.convertOffsetParentRelativeRectToViewportRelativeRect?await d.convertOffsetParentRelativeRectToViewportRelativeRect({elements:y,rect:K,offsetParent:Q,strategy:a}):K);return{top:(q.top-ie.top+F.top)/te.y,bottom:(ie.bottom-q.bottom+F.bottom)/te.y,left:(q.left-ie.left+F.left)/te.x,right:(ie.right-q.right+F.right)/te.x}}const zfe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:l,rects:d,platform:f,elements:y,middlewareData:a}=t,{element:E,padding:C=0}=ck(e,t)||{};if(E==null)return{};const M=xH(C),P={x:n,y:r},N=HI(l),F=UI(N),$=await f.getDimensions(E),Z=N==="y",q=Z?"top":"left",K=Z?"bottom":"right",Q=Z?"clientHeight":"clientWidth",te=d.reference[F]+d.reference[N]-P[N]-d.floating[F],ie=P[N]-d.reference[N],ue=await(f.getOffsetParent==null?void 0:f.getOffsetParent(E));let re=ue?ue[Q]:0;(!re||!await(f.isElement==null?void 0:f.isElement(ue)))&&(re=y.floating[Q]||d.floating[F]);const me=te/2-ie/2,ve=re/2-$[F]/2-1,De=Zb(M[q],ve),je=Zb(M[K],ve),Be=De,Ue=re-$[F]-je,Ge=re/2-$[F]/2+me,ze=Afe(Be,Ge,Ue),ot=!a.arrow&&Ux(l)!=null&&Ge!==ze&&d.reference[F]/2-(Ge<Be?De:je)-$[F]/2<0,st=ot?Ge<Be?Ge-Be:Ge-Ue:0;return{[N]:P[N]+st,data:{[N]:ze,centerOffset:Ge-ze-st,...ot&&{alignmentOffset:st}},reset:ot}}}),Bfe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:l,middlewareData:d,rects:f,initialPlacement:y,platform:a,elements:E}=t,{mainAxis:C=!0,crossAxis:M=!0,fallbackPlacements:P,fallbackStrategy:N="bestFit",fallbackAxisSideDirection:F="none",flipAlignment:$=!0,...Z}=ck(e,t);if((n=d.arrow)!=null&&n.alignmentOffset)return{};const q=Kb(l),K=Kb(y)===y,Q=await(a.isRTL==null?void 0:a.isRTL(E.floating)),te=P||(K||!$?[lS(y)]:Rfe(y));!P&&F!=="none"&&te.push(...Pfe(y,$,F,Q));const ie=[y,...te],ue=await Nfe(t,Z),re=[];let me=((r=d.flip)==null?void 0:r.overflows)||[];if(C&&re.push(ue[q]),M){const Be=Dfe(l,f,Q);re.push(ue[Be[0]],ue[Be[1]])}if(me=[...me,{placement:l,overflows:re}],!re.every(Be=>Be<=0)){var ve,De;const Be=(((ve=d.flip)==null?void 0:ve.index)||0)+1,Ue=ie[Be];if(Ue)return{data:{index:Be,overflows:me},reset:{placement:Ue}};let Ge=(De=me.filter(ze=>ze.overflows[0]<=0).sort((ze,ot)=>ze.overflows[1]-ot.overflows[1])[0])==null?void 0:De.placement;if(!Ge)switch(N){case"bestFit":{var je;const ze=(je=me.map(ot=>[ot.placement,ot.overflows.filter(st=>st>0).reduce((st,Re)=>st+Re,0)]).sort((ot,st)=>ot[1]-st[1])[0])==null?void 0:je[0];ze&&(Ge=ze);break}case"initialPlacement":Ge=y;break}if(l!==Ge)return{reset:{placement:Ge}}}return{}}}};async function Ffe(e,t){const{placement:n,platform:r,elements:l}=e,d=await(r.isRTL==null?void 0:r.isRTL(l.floating)),f=Kb(n),y=Ux(n),a=VI(n)==="y",E=["left","top"].includes(f)?-1:1,C=d&&a?-1:1,M=ck(t,e);let{mainAxis:P,crossAxis:N,alignmentAxis:F}=typeof M=="number"?{mainAxis:M,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...M};return y&&typeof F=="number"&&(N=y==="end"?F*-1:F),a?{x:N*C,y:P*E}:{x:P*E,y:N*C}}const jfe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:l,y:d,placement:f,middlewareData:y}=t,a=await Ffe(t,e);return f===((n=y.offset)==null?void 0:n.placement)&&(r=y.arrow)!=null&&r.alignmentOffset?{}:{x:l+a.x,y:d+a.y,data:{...a,placement:f}}}}};function Kp(e){return wH(e)?(e.nodeName||"").toLowerCase():"#document"}function Il(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function lf(e){var t;return(t=(wH(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function wH(e){return e instanceof Node||e instanceof Il(e).Node}function kl(e){return e instanceof Element||e instanceof Il(e).Element}function Sd(e){return e instanceof HTMLElement||e instanceof Il(e).HTMLElement}function i8(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Il(e).ShadowRoot}function Vx(e){const{overflow:t,overflowX:n,overflowY:r,display:l}=kc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(l)}function $fe(e){return["table","td","th"].includes(Kp(e))}function WI(e){const t=YI(),n=kc(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Ufe(e){let t=Xb(e);for(;Sd(t)&&!uk(t);){if(WI(t))return t;t=Xb(t)}return null}function YI(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function uk(e){return["html","body","#document"].includes(Kp(e))}function kc(e){return Il(e).getComputedStyle(e)}function dk(e){return kl(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Xb(e){if(Kp(e)==="html")return e;const t=e.assignedSlot||e.parentNode||i8(e)&&e.host||lf(e);return i8(t)?t.host:t}function EH(e){const t=Xb(e);return uk(t)?e.ownerDocument?e.ownerDocument.body:e.body:Sd(t)&&Vx(t)?t:EH(t)}function rx(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const l=EH(e),d=l===((r=e.ownerDocument)==null?void 0:r.body),f=Il(l);return d?t.concat(f,f.visualViewport||[],Vx(l)?l:[],f.frameElement&&n?rx(f.frameElement):[]):t.concat(l,rx(l,[],n))}function TH(e){const t=kc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const l=Sd(e),d=l?e.offsetWidth:n,f=l?e.offsetHeight:r,y=sS(n)!==d||sS(r)!==f;return y&&(n=d,r=f),{width:n,height:r,$:y}}function GI(e){return kl(e)?e:e.contextElement}function vb(e){const t=GI(e);if(!Sd(t))return Zp(1);const n=t.getBoundingClientRect(),{width:r,height:l,$:d}=TH(t);let f=(d?sS(n.width):n.width)/r,y=(d?sS(n.height):n.height)/l;return(!f||!Number.isFinite(f))&&(f=1),(!y||!Number.isFinite(y))&&(y=1),{x:f,y}}const Vfe=Zp(0);function SH(e){const t=Il(e);return!YI()||!t.visualViewport?Vfe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Hfe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Il(e)?!1:t}function g0(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const l=e.getBoundingClientRect(),d=GI(e);let f=Zp(1);t&&(r?kl(r)&&(f=vb(r)):f=vb(e));const y=Hfe(d,n,r)?SH(d):Zp(0);let a=(l.left+y.x)/f.x,E=(l.top+y.y)/f.y,C=l.width/f.x,M=l.height/f.y;if(d){const P=Il(d),N=r&&kl(r)?Il(r):r;let F=P,$=F.frameElement;for(;$&&r&&N!==F;){const Z=vb($),q=$.getBoundingClientRect(),K=kc($),Q=q.left+($.clientLeft+parseFloat(K.paddingLeft))*Z.x,te=q.top+($.clientTop+parseFloat(K.paddingTop))*Z.y;a*=Z.x,E*=Z.y,C*=Z.x,M*=Z.y,a+=Q,E+=te,F=Il($),$=F.frameElement}}return cS({width:C,height:M,x:a,y:E})}const Wfe=[":popover-open",":modal"];function CH(e){return Wfe.some(t=>{try{return e.matches(t)}catch{return!1}})}function Yfe(e){let{elements:t,rect:n,offsetParent:r,strategy:l}=e;const d=l==="fixed",f=lf(r),y=t?CH(t.floating):!1;if(r===f||y&&d)return n;let a={scrollLeft:0,scrollTop:0},E=Zp(1);const C=Zp(0),M=Sd(r);if((M||!M&&!d)&&((Kp(r)!=="body"||Vx(f))&&(a=dk(r)),Sd(r))){const P=g0(r);E=vb(r),C.x=P.x+r.clientLeft,C.y=P.y+r.clientTop}return{width:n.width*E.x,height:n.height*E.y,x:n.x*E.x-a.scrollLeft*E.x+C.x,y:n.y*E.y-a.scrollTop*E.y+C.y}}function Gfe(e){return Array.from(e.getClientRects())}function kH(e){return g0(lf(e)).left+dk(e).scrollLeft}function qfe(e){const t=lf(e),n=dk(e),r=e.ownerDocument.body,l=n0(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),d=n0(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let f=-n.scrollLeft+kH(e);const y=-n.scrollTop;return kc(r).direction==="rtl"&&(f+=n0(t.clientWidth,r.clientWidth)-l),{width:l,height:d,x:f,y}}function Zfe(e,t){const n=Il(e),r=lf(e),l=n.visualViewport;let d=r.clientWidth,f=r.clientHeight,y=0,a=0;if(l){d=l.width,f=l.height;const E=YI();(!E||E&&t==="fixed")&&(y=l.offsetLeft,a=l.offsetTop)}return{width:d,height:f,x:y,y:a}}function Kfe(e,t){const n=g0(e,!0,t==="fixed"),r=n.top+e.clientTop,l=n.left+e.clientLeft,d=Sd(e)?vb(e):Zp(1),f=e.clientWidth*d.x,y=e.clientHeight*d.y,a=l*d.x,E=r*d.y;return{width:f,height:y,x:a,y:E}}function a8(e,t,n){let r;if(t==="viewport")r=Zfe(e,n);else if(t==="document")r=qfe(lf(e));else if(kl(t))r=Kfe(t,n);else{const l=SH(e);r={...t,x:t.x-l.x,y:t.y-l.y}}return cS(r)}function AH(e,t){const n=Xb(e);return n===t||!kl(n)||uk(n)?!1:kc(n).position==="fixed"||AH(n,t)}function Xfe(e,t){const n=t.get(e);if(n)return n;let r=rx(e,[],!1).filter(y=>kl(y)&&Kp(y)!=="body"),l=null;const d=kc(e).position==="fixed";let f=d?Xb(e):e;for(;kl(f)&&!uk(f);){const y=kc(f),a=WI(f);!a&&y.position==="fixed"&&(l=null),(d?!a&&!l:!a&&y.position==="static"&&!!l&&["absolute","fixed"].includes(l.position)||Vx(f)&&!a&&AH(e,f))?r=r.filter(C=>C!==f):l=y,f=Xb(f)}return t.set(e,r),r}function Qfe(e){let{element:t,boundary:n,rootBoundary:r,strategy:l}=e;const f=[...n==="clippingAncestors"?Xfe(t,this._c):[].concat(n),r],y=f[0],a=f.reduce((E,C)=>{const M=a8(t,C,l);return E.top=n0(M.top,E.top),E.right=Zb(M.right,E.right),E.bottom=Zb(M.bottom,E.bottom),E.left=n0(M.left,E.left),E},a8(t,y,l));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function Jfe(e){const{width:t,height:n}=TH(e);return{width:t,height:n}}function epe(e,t,n){const r=Sd(t),l=lf(t),d=n==="fixed",f=g0(e,!0,d,t);let y={scrollLeft:0,scrollTop:0};const a=Zp(0);if(r||!r&&!d)if((Kp(t)!=="body"||Vx(l))&&(y=dk(t)),r){const M=g0(t,!0,d,t);a.x=M.x+t.clientLeft,a.y=M.y+t.clientTop}else l&&(a.x=kH(l));const E=f.left+y.scrollLeft-a.x,C=f.top+y.scrollTop-a.y;return{x:E,y:C,width:f.width,height:f.height}}function s8(e,t){return!Sd(e)||kc(e).position==="fixed"?null:t?t(e):e.offsetParent}function MH(e,t){const n=Il(e);if(!Sd(e)||CH(e))return n;let r=s8(e,t);for(;r&&$fe(r)&&kc(r).position==="static";)r=s8(r,t);return r&&(Kp(r)==="html"||Kp(r)==="body"&&kc(r).position==="static"&&!WI(r))?n:r||Ufe(e)||n}const tpe=async function(e){const t=this.getOffsetParent||MH,n=this.getDimensions;return{reference:epe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await n(e.floating)}}};function npe(e){return kc(e).direction==="rtl"}const DH={convertOffsetParentRelativeRectToViewportRelativeRect:Yfe,getDocumentElement:lf,getClippingRect:Qfe,getOffsetParent:MH,getElementRects:tpe,getClientRects:Gfe,getDimensions:Jfe,getScale:vb,isElement:kl,isRTL:npe};function rpe(e,t){let n=null,r;const l=lf(e);function d(){var y;clearTimeout(r),(y=n)==null||y.disconnect(),n=null}function f(y,a){y===void 0&&(y=!1),a===void 0&&(a=1),d();const{left:E,top:C,width:M,height:P}=e.getBoundingClientRect();if(y||t(),!M||!P)return;const N=bE(C),F=bE(l.clientWidth-(E+M)),$=bE(l.clientHeight-(C+P)),Z=bE(E),K={rootMargin:-N+"px "+-F+"px "+-$+"px "+-Z+"px",threshold:n0(0,Zb(1,a))||1};let Q=!0;function te(ie){const ue=ie[0].intersectionRatio;if(ue!==a){if(!Q)return f();ue?f(!1,ue):r=setTimeout(()=>{f(!1,1e-7)},100)}Q=!1}try{n=new IntersectionObserver(te,{...K,root:l.ownerDocument})}catch{n=new IntersectionObserver(te,K)}n.observe(e)}return f(!0),d}function ope(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:l=!0,ancestorResize:d=!0,elementResize:f=typeof ResizeObserver=="function",layoutShift:y=typeof IntersectionObserver=="function",animationFrame:a=!1}=r,E=GI(e),C=l||d?[...E?rx(E):[],...rx(t)]:[];C.forEach(q=>{l&&q.addEventListener("scroll",n,{passive:!0}),d&&q.addEventListener("resize",n)});const M=E&&y?rpe(E,n):null;let P=-1,N=null;f&&(N=new ResizeObserver(q=>{let[K]=q;K&&K.target===E&&N&&(N.unobserve(t),cancelAnimationFrame(P),P=requestAnimationFrame(()=>{var Q;(Q=N)==null||Q.observe(t)})),n()}),E&&!a&&N.observe(E),N.observe(t));let F,$=a?g0(e):null;a&&Z();function Z(){const q=g0(e);$&&(q.x!==$.x||q.y!==$.y||q.width!==$.width||q.height!==$.height)&&n(),$=q,F=requestAnimationFrame(Z)}return n(),()=>{var q;C.forEach(K=>{l&&K.removeEventListener("scroll",n),d&&K.removeEventListener("resize",n)}),M?.(),(q=N)==null||q.disconnect(),N=null,a&&cancelAnimationFrame(F)}}const ipe=Bfe,l8=zfe,ape=(e,t,n)=>{const r=new Map,l={platform:DH,...n},d={...l.platform,_c:r};return Lfe(e,t,{...l,platform:d})},spe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:l}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?l8({element:r.current,padding:l}).fn(n):{}:r?l8({element:r,padding:l}).fn(n):{}}}};var pT=typeof document<"u"?j.useLayoutEffect:j.useEffect;function uS(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,l;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!uS(e[r],t[r]))return!1;return!0}if(l=Object.keys(e),n=l.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,l[r]))return!1;for(r=n;r--!==0;){const d=l[r];if(!(d==="_owner"&&e.$$typeof)&&!uS(e[d],t[d]))return!1}return!0}return e!==e&&t!==t}function RH(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function c8(e,t){const n=RH(e);return Math.round(t*n)/n}function u8(e){const t=j.useRef(e);return pT(()=>{t.current=e}),t}function lpe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:l,elements:{reference:d,floating:f}={},transform:y=!0,whileElementsMounted:a,open:E}=e,[C,M]=j.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[P,N]=j.useState(r);uS(P,r)||N(r);const[F,$]=j.useState(null),[Z,q]=j.useState(null),K=j.useCallback(st=>{st!==ue.current&&(ue.current=st,$(st))},[]),Q=j.useCallback(st=>{st!==re.current&&(re.current=st,q(st))},[]),te=d||F,ie=f||Z,ue=j.useRef(null),re=j.useRef(null),me=j.useRef(C),ve=a!=null,De=u8(a),je=u8(l),Be=j.useCallback(()=>{if(!ue.current||!re.current)return;const st={placement:t,strategy:n,middleware:P};je.current&&(st.platform=je.current),ape(ue.current,re.current,st).then(Re=>{const bt={...Re,isPositioned:!0};Ue.current&&!uS(me.current,bt)&&(me.current=bt,lm.flushSync(()=>{M(bt)}))})},[P,t,n,je]);pT(()=>{E===!1&&me.current.isPositioned&&(me.current.isPositioned=!1,M(st=>({...st,isPositioned:!1})))},[E]);const Ue=j.useRef(!1);pT(()=>(Ue.current=!0,()=>{Ue.current=!1}),[]),pT(()=>{if(te&&(ue.current=te),ie&&(re.current=ie),te&&ie){if(De.current)return De.current(te,ie,Be);Be()}},[te,ie,Be,De,ve]);const Ge=j.useMemo(()=>({reference:ue,floating:re,setReference:K,setFloating:Q}),[K,Q]),ze=j.useMemo(()=>({reference:te,floating:ie}),[te,ie]),ot=j.useMemo(()=>{const st={position:n,left:0,top:0};if(!ze.floating)return st;const Re=c8(ze.floating,C.x),bt=c8(ze.floating,C.y);return y?{...st,transform:"translate("+Re+"px, "+bt+"px)",...RH(ze.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Re,top:bt}},[n,y,ze.floating,C.x,C.y]);return j.useMemo(()=>({...C,update:Be,refs:Ge,elements:ze,floatingStyles:ot}),[C,Be,Ge,ze,ot])}function cpe(e){return typeof e=="function"?e():e}const IH=j.forwardRef(function(t,n){const{children:r,container:l,disablePortal:d=!1}=t,[f,y]=j.useState(null),a=ti(j.isValidElement(r)?r.ref:null,n);if(Cc(()=>{d||y(cpe(l)||document.body)},[l,d]),Cc(()=>{if(f&&!d)return aS(n,f),()=>{aS(n,null)}},[n,f,d]),d){if(j.isValidElement(r)){const E={ref:a};return j.cloneElement(r,E)}return O.jsx(j.Fragment,{children:r})}return O.jsx(j.Fragment,{children:f&&lm.createPortal(r,f)})});function upe(e){const t=ss(e);return t.body===e?Td(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function m1(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function d8(e){return parseInt(Td(e).getComputedStyle(e).paddingRight,10)||0}function dpe(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,r=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||r}function h8(e,t,n,r,l){const d=[t,n,...r];[].forEach.call(e.children,f=>{const y=d.indexOf(f)===-1,a=!dpe(f);y&&a&&m1(f,l)})}function $3(e,t){let n=-1;return e.some((r,l)=>t(r)?(n=l,!0):!1),n}function hpe(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(upe(r)){const f=hH(ss(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${d8(r)+f}px`;const y=ss(r).querySelectorAll(".mui-fixed");[].forEach.call(y,a=>{n.push({value:a.style.paddingRight,property:"padding-right",el:a}),a.style.paddingRight=`${d8(a)+f}px`})}let d;if(r.parentNode instanceof DocumentFragment)d=ss(r).body;else{const f=r.parentElement,y=Td(r);d=f?.nodeName==="HTML"&&y.getComputedStyle(f).overflowY==="scroll"?f:r}n.push({value:d.style.overflow,property:"overflow",el:d},{value:d.style.overflowX,property:"overflow-x",el:d},{value:d.style.overflowY,property:"overflow-y",el:d}),d.style.overflow="hidden"}return()=>{n.forEach(({value:d,el:f,property:y})=>{d?f.style.setProperty(y,d):f.style.removeProperty(y)})}}function fpe(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class ppe{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,n){let r=this.modals.indexOf(t);if(r!==-1)return r;r=this.modals.length,this.modals.push(t),t.modalRef&&m1(t.modalRef,!1);const l=fpe(n);h8(n,t.mount,t.modalRef,l,!0);const d=$3(this.containers,f=>f.container===n);return d!==-1?(this.containers[d].modals.push(t),r):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:l}),r)}mount(t,n){const r=$3(this.containers,d=>d.modals.indexOf(t)!==-1),l=this.containers[r];l.restore||(l.restore=hpe(l,n))}remove(t,n=!0){const r=this.modals.indexOf(t);if(r===-1)return r;const l=$3(this.containers,f=>f.modals.indexOf(t)!==-1),d=this.containers[l];if(d.modals.splice(d.modals.indexOf(t),1),this.modals.splice(r,1),d.modals.length===0)d.restore&&d.restore(),t.modalRef&&m1(t.modalRef,n),h8(d.container,t.mount,t.modalRef,d.hiddenSiblings,!1),this.containers.splice(l,1);else{const f=d.modals[d.modals.length-1];f.modalRef&&m1(f.modalRef,!1)}return r}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function mpe(e){return typeof e=="function"?e():e}function gpe(e){return e?e.props.hasOwnProperty("in"):!1}const ype=new ppe;function bpe(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,manager:l=ype,closeAfterTransition:d=!1,onTransitionEnter:f,onTransitionExited:y,children:a,onClose:E,open:C,rootRef:M}=e,P=j.useRef({}),N=j.useRef(null),F=j.useRef(null),$=ti(F,M),[Z,q]=j.useState(!C),K=gpe(a);let Q=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(Q=!1);const te=()=>ss(N.current),ie=()=>(P.current.modalRef=F.current,P.current.mount=N.current,P.current),ue=()=>{l.mount(ie(),{disableScrollLock:r}),F.current&&(F.current.scrollTop=0)},re=Fh(()=>{const ot=mpe(t)||te().body;l.add(ie(),ot),F.current&&ue()}),me=j.useCallback(()=>l.isTopModal(ie()),[l]),ve=Fh(ot=>{N.current=ot,ot&&(C&&me()?ue():F.current&&m1(F.current,Q))}),De=j.useCallback(()=>{l.remove(ie(),Q)},[Q,l]);j.useEffect(()=>()=>{De()},[De]),j.useEffect(()=>{C?re():(!K||!d)&&De()},[C,De,K,d,re]);const je=ot=>st=>{var Re;(Re=ot.onKeyDown)==null||Re.call(ot,st),!(st.key!=="Escape"||st.which===229||!me())&&(n||(st.stopPropagation(),E&&E(st,"escapeKeyDown")))},Be=ot=>st=>{var Re;(Re=ot.onClick)==null||Re.call(ot,st),st.target===st.currentTarget&&E&&E(st,"backdropClick")};return{getRootProps:(ot={})=>{const st=mH(e);delete st.onTransitionEnter,delete st.onTransitionExited;const Re=Ae({},st,ot);return Ae({role:"presentation"},Re,{onKeyDown:je(Re),ref:$})},getBackdropProps:(ot={})=>{const st=ot;return Ae({"aria-hidden":!0},st,{onClick:Be(st),open:C})},getTransitionProps:()=>{const ot=()=>{q(!1),f&&f()},st=()=>{q(!0),y&&y(),d&&De()};return{onEnter:QD(ot,a?.props.onEnter),onExited:QD(st,a?.props.onExited)}},rootRef:$,portalRef:ve,isTopModal:me,exited:Z,hasTransition:K}}function vpe(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},l=t.attributes[n]||{},d=t.elements[n];!bc(d)||!Ed(d)||(Object.assign(d.style,r),Object.keys(l).forEach(function(f){var y=l[f];y===!1?d.removeAttribute(f):d.setAttribute(f,y===!0?"":y)}))})}function _pe(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var l=t.elements[r],d=t.attributes[r]||{},f=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),y=f.reduce(function(a,E){return a[E]="",a},{});!bc(l)||!Ed(l)||(Object.assign(l.style,y),Object.keys(d).forEach(function(a){l.removeAttribute(a)}))})}}const xpe={name:"applyStyles",enabled:!0,phase:"write",fn:vpe,effect:_pe,requires:["computeStyles"]};var wpe=[W9,X9,H9,xpe,K9,q9,Q9,V9,Z9],Epe=J9({defaultModifiers:wpe});const PH="Popper";function Tpe(e){return _H(PH,e)}bfe(PH,["root"]);const Spe=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],Cpe=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function kpe(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function n5(e){return typeof e=="function"?e():e}function Ape(e){return e.nodeType!==void 0}const Mpe=()=>Or({root:["root"]},rfe(Tpe)),Dpe={},Rpe=j.forwardRef(function(t,n){var r;const{anchorEl:l,children:d,direction:f,disablePortal:y,modifiers:a,open:E,placement:C,popperOptions:M,popperRef:P,slotProps:N={},slots:F={},TransitionProps:$}=t,Z=Tn(t,Spe),q=j.useRef(null),K=ti(q,n),Q=j.useRef(null),te=ti(Q,P),ie=j.useRef(te);Cc(()=>{ie.current=te},[te]),j.useImperativeHandle(P,()=>Q.current,[]);const ue=kpe(C,f),[re,me]=j.useState(ue),[ve,De]=j.useState(n5(l));j.useEffect(()=>{Q.current&&Q.current.forceUpdate()}),j.useEffect(()=>{l&&De(n5(l))},[l]),Cc(()=>{if(!ve||!E)return;const ze=Re=>{me(Re.placement)};let ot=[{name:"preventOverflow",options:{altBoundary:y}},{name:"flip",options:{altBoundary:y}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Re})=>{ze(Re)}}];a!=null&&(ot=ot.concat(a)),M&&M.modifiers!=null&&(ot=ot.concat(M.modifiers));const st=Epe(ve,q.current,Ae({placement:ue},M,{modifiers:ot}));return ie.current(st),()=>{st.destroy(),ie.current(null)}},[ve,y,a,E,M,ue]);const je={placement:re};$!==null&&(je.TransitionProps=$);const Be=Mpe(),Ue=(r=F.root)!=null?r:"div",Ge=m0({elementType:Ue,externalSlotProps:N.root,externalForwardedProps:Z,additionalProps:{role:"tooltip",ref:K},ownerState:t,className:Be.root});return O.jsx(Ue,Ae({},Ge,{children:typeof d=="function"?d(je):d}))}),Ipe=j.forwardRef(function(t,n){const{anchorEl:r,children:l,container:d,direction:f="ltr",disablePortal:y=!1,keepMounted:a=!1,modifiers:E,open:C,placement:M="bottom",popperOptions:P=Dpe,popperRef:N,style:F,transition:$=!1,slotProps:Z={},slots:q={}}=t,K=Tn(t,Cpe),[Q,te]=j.useState(!0),ie=()=>{te(!1)},ue=()=>{te(!0)};if(!a&&!C&&(!$||Q))return null;let re;if(d)re=d;else if(r){const De=n5(r);re=De&&Ape(De)?ss(De).body:ss(null).body}const me=!C&&a&&(!$||Q)?"none":void 0,ve=$?{in:C,onEnter:ie,onExited:ue}:void 0;return O.jsx(IH,{disablePortal:y,container:re,children:O.jsx(Rpe,Ae({anchorEl:r,direction:f,disablePortal:y,modifiers:E,ref:n,open:$?!Q:C,placement:M,popperOptions:P,popperRef:N,slotProps:Z,slots:q},K,{style:Ae({position:"fixed",top:0,left:0,display:me},F),TransitionProps:ve,children:l}))})}),Ppe=["onChange","maxRows","minRows","style","value"];function vE(e){return parseInt(e,10)||0}const Ope={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function Lpe(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflowing}const Npe=j.forwardRef(function(t,n){const{onChange:r,maxRows:l,minRows:d=1,style:f,value:y}=t,a=Tn(t,Ppe),{current:E}=j.useRef(y!=null),C=j.useRef(null),M=ti(n,C),P=j.useRef(null),N=j.useCallback(()=>{const Z=C.current,K=Td(Z).getComputedStyle(Z);if(K.width==="0px")return{outerHeightStyle:0,overflowing:!1};const Q=P.current;Q.style.width=K.width,Q.value=Z.value||t.placeholder||"x",Q.value.slice(-1)===`
`&&(Q.value+=" ");const te=K.boxSizing,ie=vE(K.paddingBottom)+vE(K.paddingTop),ue=vE(K.borderBottomWidth)+vE(K.borderTopWidth),re=Q.scrollHeight;Q.value="x";const me=Q.scrollHeight;let ve=re;d&&(ve=Math.max(Number(d)*me,ve)),l&&(ve=Math.min(Number(l)*me,ve)),ve=Math.max(ve,me);const De=ve+(te==="border-box"?ie+ue:0),je=Math.abs(ve-re)<=1;return{outerHeightStyle:De,overflowing:je}},[l,d,t.placeholder]),F=j.useCallback(()=>{const Z=N();if(Lpe(Z))return;const q=C.current;q.style.height=`${Z.outerHeightStyle}px`,q.style.overflow=Z.overflowing?"hidden":""},[N]);Cc(()=>{const Z=()=>{F()};let q;const K=ak(Z),Q=C.current,te=Td(Q);te.addEventListener("resize",K);let ie;return typeof ResizeObserver<"u"&&(ie=new ResizeObserver(Z),ie.observe(Q)),()=>{K.clear(),cancelAnimationFrame(q),te.removeEventListener("resize",K),ie&&ie.disconnect()}},[N,F]),Cc(()=>{F()});const $=Z=>{E||F(),r&&r(Z)};return O.jsxs(j.Fragment,{children:[O.jsx("textarea",Ae({value:y,onChange:$,ref:M,rows:d,style:f},a)),O.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:P,tabIndex:-1,style:Ae({},Ope.shadow,f,{paddingTop:0,paddingBottom:0})})]})});function xv({props:e,states:t,muiFormControl:n}){return t.reduce((r,l)=>(r[l]=e[l],n&&typeof e[l]>"u"&&(r[l]=n[l]),r),{})}const zpe=j.createContext(void 0),hk=zpe;function k0(){return j.useContext(hk)}function Bpe(e){return O.jsx(Zde,Ae({},e,{defaultTheme:nk,themeId:Fx}))}function f8(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function dS(e,t=!1){return e&&(f8(e.value)&&e.value!==""||t&&f8(e.defaultValue)&&e.defaultValue!=="")}function Fpe(e){return e.startAdornment}function jpe(e){return Lr("MuiInputBase",e)}const $pe=Ar("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Qb=$pe,Upe=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],fk=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${Yn(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},pk=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},Vpe=e=>{const{classes:t,color:n,disabled:r,error:l,endAdornment:d,focused:f,formControl:y,fullWidth:a,hiddenLabel:E,multiline:C,readOnly:M,size:P,startAdornment:N,type:F}=e,$={root:["root",`color${Yn(n)}`,r&&"disabled",l&&"error",a&&"fullWidth",f&&"focused",y&&"formControl",P&&P!=="medium"&&`size${Yn(P)}`,C&&"multiline",N&&"adornedStart",d&&"adornedEnd",E&&"hiddenLabel",M&&"readOnly"],input:["input",r&&"disabled",F==="search"&&"inputTypeSearch",C&&"inputMultiline",P==="small"&&"inputSizeSmall",E&&"inputHiddenLabel",N&&"inputAdornedStart",d&&"inputAdornedEnd",M&&"readOnly"]};return Or($,jpe,t)},mk=_n("div",{name:"MuiInputBase",slot:"Root",overridesResolver:fk})(({theme:e,ownerState:t})=>Ae({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Qb.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&Ae({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),gk=_n("input",{name:"MuiInputBase",slot:"Input",overridesResolver:pk})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light",r=Ae({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),l={opacity:"0 !important"},d=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return Ae({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Qb.formControl} &`]:{"&::-webkit-input-placeholder":l,"&::-moz-placeholder":l,"&:-ms-input-placeholder":l,"&::-ms-input-placeholder":l,"&:focus::-webkit-input-placeholder":d,"&:focus::-moz-placeholder":d,"&:focus:-ms-input-placeholder":d,"&:focus::-ms-input-placeholder":d},[`&.${Qb.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),Hpe=O.jsx(Bpe,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Wpe=j.forwardRef(function(t,n){var r;const l=Hr({props:t,name:"MuiInputBase"}),{"aria-describedby":d,autoComplete:f,autoFocus:y,className:a,components:E={},componentsProps:C={},defaultValue:M,disabled:P,disableInjectingGlobalStyles:N,endAdornment:F,fullWidth:$=!1,id:Z,inputComponent:q="input",inputProps:K={},inputRef:Q,maxRows:te,minRows:ie,multiline:ue=!1,name:re,onBlur:me,onChange:ve,onClick:De,onFocus:je,onKeyDown:Be,onKeyUp:Ue,placeholder:Ge,readOnly:ze,renderSuffix:ot,rows:st,slotProps:Re={},slots:bt={},startAdornment:Lt,type:Ct="text",value:Nt}=l,tn=Tn(l,Upe),Dt=K.value!=null?K.value:Nt,{current:cn}=j.useRef(Dt!=null),Mt=j.useRef(),Vn=j.useCallback(we=>{},[]),nt=ti(Mt,Q,K.ref,Vn),[Pn,Un]=j.useState(!1),En=k0(),bn=xv({props:l,muiFormControl:En,states:["color","disabled","error","hiddenLabel","size","required","filled"]});bn.focused=En?En.focused:Pn,j.useEffect(()=>{!En&&P&&Pn&&(Un(!1),me&&me())},[En,P,Pn,me]);const Fn=En&&En.onFilled,On=En&&En.onEmpty,an=j.useCallback(we=>{dS(we)?Fn&&Fn():On&&On()},[Fn,On]);Cc(()=>{cn&&an({value:Dt})},[Dt,an,cn]);const qr=we=>{if(bn.disabled){we.stopPropagation();return}je&&je(we),K.onFocus&&K.onFocus(we),En&&En.onFocus?En.onFocus(we):Un(!0)},hn=we=>{me&&me(we),K.onBlur&&K.onBlur(we),En&&En.onBlur?En.onBlur(we):Un(!1)},Wr=(we,...Pe)=>{if(!cn){const at=we.target||Mt.current;if(at==null)throw new Error(p0(1));an({value:at.value})}K.onChange&&K.onChange(we,...Pe),ve&&ve(we,...Pe)};j.useEffect(()=>{an(Mt.current)},[]);const go=we=>{Mt.current&&we.currentTarget===we.target&&Mt.current.focus(),De&&De(we)};let pr=q,Pr=K;ue&&pr==="input"&&(st?Pr=Ae({type:void 0,minRows:st,maxRows:st},Pr):Pr=Ae({type:void 0,maxRows:te,minRows:ie},Pr),pr=Npe);const to=we=>{an(we.animationName==="mui-auto-fill-cancel"?Mt.current:{value:"x"})};j.useEffect(()=>{En&&En.setAdornedStart(!!Lt)},[En,Lt]);const Mr=Ae({},l,{color:bn.color||"primary",disabled:bn.disabled,endAdornment:F,error:bn.error,focused:bn.focused,formControl:En,fullWidth:$,hiddenLabel:bn.hiddenLabel,multiline:ue,size:bn.size,startAdornment:Lt,type:Ct}),mr=Vpe(Mr),eo=bt.root||E.Root||mk,Ke=Re.root||C.root||{},pe=bt.input||E.Input||gk;return Pr=Ae({},Pr,(r=Re.input)!=null?r:C.input),O.jsxs(j.Fragment,{children:[!N&&Hpe,O.jsxs(eo,Ae({},Ke,!qb(eo)&&{ownerState:Ae({},Mr,Ke.ownerState)},{ref:n,onClick:go},tn,{className:fn(mr.root,Ke.className,a,ze&&"MuiInputBase-readOnly"),children:[Lt,O.jsx(hk.Provider,{value:null,children:O.jsx(pe,Ae({ownerState:Mr,"aria-invalid":bn.error,"aria-describedby":d,autoComplete:f,autoFocus:y,defaultValue:M,disabled:bn.disabled,id:Z,onAnimationStart:to,name:re,placeholder:Ge,readOnly:ze,required:bn.required,rows:st,value:Dt,onKeyDown:Be,onKeyUp:Ue,type:Ct},Pr,!qb(pe)&&{as:pr,ownerState:Ae({},Mr,Pr.ownerState)},{ref:nt,className:fn(mr.input,Pr.className,ze&&"MuiInputBase-readOnly"),onBlur:hn,onChange:Wr,onFocus:qr}))}),F,ot?ot(Ae({},bn,{startAdornment:Lt})):null]}))]})}),qI=Wpe;function Ype(e){return Lr("MuiInput",e)}const Gpe=Ae({},Qb,Ar("MuiInput",["root","underline","input"])),z_=Gpe,qpe=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Zpe=e=>{const{classes:t,disableUnderline:n}=e,l=Or({root:["root",!n&&"underline"],input:["input"]},Ype,t);return Ae({},t,l)},Kpe=_n(mk,{shouldForwardProp:e=>Qs(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...fk(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{let r=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(r=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),Ae({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${z_.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${z_.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${z_.disabled}, .${z_.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${z_.disabled}:before`]:{borderBottomStyle:"dotted"}})}),Xpe=_n(gk,{name:"MuiInput",slot:"Input",overridesResolver:pk})({}),OH=j.forwardRef(function(t,n){var r,l,d,f;const y=Hr({props:t,name:"MuiInput"}),{disableUnderline:a,components:E={},componentsProps:C,fullWidth:M=!1,inputComponent:P="input",multiline:N=!1,slotProps:F,slots:$={},type:Z="text"}=y,q=Tn(y,qpe),K=Zpe(y),te={root:{ownerState:{disableUnderline:a}}},ie=F??C?Rl(F??C,te):te,ue=(r=(l=$.root)!=null?l:E.Root)!=null?r:Kpe,re=(d=(f=$.input)!=null?f:E.Input)!=null?d:Xpe;return O.jsx(qI,Ae({slots:{root:ue,input:re},slotProps:ie,fullWidth:M,inputComponent:P,multiline:N,ref:n,type:Z},q,{classes:K}))});OH.muiName="Input";const LH=OH;function Qpe(e){return Lr("MuiFilledInput",e)}const Jpe=Ae({},Qb,Ar("MuiFilledInput",["root","underline","input"])),Og=Jpe,eme=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],tme=e=>{const{classes:t,disableUnderline:n}=e,l=Or({root:["root",!n&&"underline"],input:["input"]},Qpe,t);return Ae({},t,l)},nme=_n(mk,{shouldForwardProp:e=>Qs(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...fk(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{var n;const r=e.palette.mode==="light",l=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",d=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",f=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",y=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return Ae({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:d,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:f,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:d}},[`&.${Og.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:d},[`&.${Og.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:y}},!t.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n=(e.vars||e).palette[t.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Og.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Og.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:l}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Og.disabled}, .${Og.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${Og.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&Ae({padding:"25px 12px 8px"},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9}))}),rme=_n(gk,{name:"MuiFilledInput",slot:"Input",overridesResolver:pk})(({theme:e,ownerState:t})=>Ae({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),NH=j.forwardRef(function(t,n){var r,l,d,f;const y=Hr({props:t,name:"MuiFilledInput"}),{components:a={},componentsProps:E,fullWidth:C=!1,inputComponent:M="input",multiline:P=!1,slotProps:N,slots:F={},type:$="text"}=y,Z=Tn(y,eme),q=Ae({},y,{fullWidth:C,inputComponent:M,multiline:P,type:$}),K=tme(y),Q={root:{ownerState:q},input:{ownerState:q}},te=N??E?Rl(Q,N??E):Q,ie=(r=(l=F.root)!=null?l:a.Root)!=null?r:nme,ue=(d=(f=F.input)!=null?f:a.Input)!=null?d:rme;return O.jsx(qI,Ae({slots:{root:ie,input:ue},componentsProps:te,fullWidth:C,inputComponent:M,multiline:P,ref:n,type:$},Z,{classes:K}))});NH.muiName="Input";const zH=NH;var p8;const ome=["children","classes","className","label","notched"],ime=_n("fieldset",{shouldForwardProp:Qs})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),ame=_n("legend",{shouldForwardProp:Qs})(({ownerState:e,theme:t})=>Ae({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&Ae({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})));function sme(e){const{className:t,label:n,notched:r}=e,l=Tn(e,ome),d=n!=null&&n!=="",f=Ae({},e,{notched:r,withLabel:d});return O.jsx(ime,Ae({"aria-hidden":!0,className:t,ownerState:f},l,{children:O.jsx(ame,{ownerState:f,children:d?O.jsx("span",{children:n}):p8||(p8=O.jsx("span",{className:"notranslate",children:"​"}))})}))}function lme(e){return Lr("MuiOutlinedInput",e)}const cme=Ae({},Qb,Ar("MuiOutlinedInput",["root","notchedOutline","input"])),fp=cme,ume=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],dme=e=>{const{classes:t}=e,r=Or({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},lme,t);return Ae({},t,r)},hme=_n(mk,{shouldForwardProp:e=>Qs(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:fk})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return Ae({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${fp.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${fp.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${fp.focused} .${fp.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${fp.error} .${fp.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${fp.disabled} .${fp.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&Ae({padding:"16.5px 14px"},t.size==="small"&&{padding:"8.5px 14px"}))}),fme=_n(sme,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),pme=_n(gk,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:pk})(({theme:e,ownerState:t})=>Ae({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})),BH=j.forwardRef(function(t,n){var r,l,d,f,y;const a=Hr({props:t,name:"MuiOutlinedInput"}),{components:E={},fullWidth:C=!1,inputComponent:M="input",label:P,multiline:N=!1,notched:F,slots:$={},type:Z="text"}=a,q=Tn(a,ume),K=dme(a),Q=k0(),te=xv({props:a,muiFormControl:Q,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),ie=Ae({},a,{color:te.color||"primary",disabled:te.disabled,error:te.error,focused:te.focused,formControl:Q,fullWidth:C,hiddenLabel:te.hiddenLabel,multiline:N,size:te.size,type:Z}),ue=(r=(l=$.root)!=null?l:E.Root)!=null?r:hme,re=(d=(f=$.input)!=null?f:E.Input)!=null?d:pme;return O.jsx(qI,Ae({slots:{root:ue,input:re},renderSuffix:me=>O.jsx(fme,{ownerState:ie,className:K.notchedOutline,label:P!=null&&P!==""&&te.required?y||(y=O.jsxs(j.Fragment,{children:[P," ","*"]})):P,notched:typeof F<"u"?F:!!(me.startAdornment||me.filled||me.focused)}),fullWidth:C,inputComponent:M,multiline:N,ref:n,type:Z},q,{classes:Ae({},K,{notchedOutline:null})}))});BH.muiName="Input";const FH=BH;function mme(e){return Lr("MuiFormLabel",e)}const gme=Ar("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),g1=gme,yme=["children","className","color","component","disabled","error","filled","focused","required"],bme=e=>{const{classes:t,color:n,focused:r,disabled:l,error:d,filled:f,required:y}=e,a={root:["root",`color${Yn(n)}`,l&&"disabled",d&&"error",f&&"filled",r&&"focused",y&&"required"],asterisk:["asterisk",d&&"error"]};return Or(a,mme,t)},vme=_n("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>Ae({},t.root,e.color==="secondary"&&t.colorSecondary,e.filled&&t.filled)})(({theme:e,ownerState:t})=>Ae({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${g1.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${g1.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${g1.error}`]:{color:(e.vars||e).palette.error.main}})),_me=_n("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${g1.error}`]:{color:(e.vars||e).palette.error.main}})),xme=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiFormLabel"}),{children:l,className:d,component:f="label"}=r,y=Tn(r,yme),a=k0(),E=xv({props:r,muiFormControl:a,states:["color","required","focused","disabled","error","filled"]}),C=Ae({},r,{color:E.color||"primary",component:f,disabled:E.disabled,error:E.error,filled:E.filled,focused:E.focused,required:E.required}),M=bme(C);return O.jsxs(vme,Ae({as:f,ownerState:C,className:fn(M.root,d),ref:n},y,{children:[l,E.required&&O.jsxs(_me,{ownerState:C,"aria-hidden":!0,className:M.asterisk,children:[" ","*"]})]}))}),wme=xme;function Eme(e){return Lr("MuiInputLabel",e)}Ar("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Tme=["disableAnimation","margin","shrink","variant","className"],Sme=e=>{const{classes:t,formControl:n,size:r,shrink:l,disableAnimation:d,variant:f,required:y}=e,a={root:["root",n&&"formControl",!d&&"animated",l&&"shrink",r&&r!=="normal"&&`size${Yn(r)}`,f],asterisk:[y&&"asterisk"]},E=Or(a,Eme,t);return Ae({},t,E)},Cme=_n(wme,{shouldForwardProp:e=>Qs(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${g1.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(({theme:e,ownerState:t})=>Ae({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},t.size==="small"&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},t.variant==="filled"&&Ae({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&Ae({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},t.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),t.variant==="outlined"&&Ae({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),kme=j.forwardRef(function(t,n){const r=Hr({name:"MuiInputLabel",props:t}),{disableAnimation:l=!1,shrink:d,className:f}=r,y=Tn(r,Tme),a=k0();let E=d;typeof E>"u"&&a&&(E=a.filled||a.focused||a.adornedStart);const C=xv({props:r,muiFormControl:a,states:["size","variant","required","focused"]}),M=Ae({},r,{disableAnimation:l,formControl:a,shrink:E,size:C.size,variant:C.variant,required:C.required,focused:C.focused}),P=Sme(M);return O.jsx(Cme,Ae({"data-shrink":E,ownerState:M,ref:n,className:fn(P.root,f)},y,{classes:P}))}),Ame=kme;function Mme(e){return Lr("MuiFormControl",e)}Ar("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Dme=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Rme=e=>{const{classes:t,margin:n,fullWidth:r}=e,l={root:["root",n!=="none"&&`margin${Yn(n)}`,r&&"fullWidth"]};return Or(l,Mme,t)},Ime=_n("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>Ae({},t.root,t[`margin${Yn(e.margin)}`],e.fullWidth&&t.fullWidth)})(({ownerState:e})=>Ae({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),Pme=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiFormControl"}),{children:l,className:d,color:f="primary",component:y="div",disabled:a=!1,error:E=!1,focused:C,fullWidth:M=!1,hiddenLabel:P=!1,margin:N="none",required:F=!1,size:$="medium",variant:Z="outlined"}=r,q=Tn(r,Dme),K=Ae({},r,{color:f,component:y,disabled:a,error:E,fullWidth:M,hiddenLabel:P,margin:N,required:F,size:$,variant:Z}),Q=Rme(K),[te,ie]=j.useState(()=>{let Ue=!1;return l&&j.Children.forEach(l,Ge=>{if(!bb(Ge,["Input","Select"]))return;const ze=bb(Ge,["Select"])?Ge.props.input:Ge;ze&&Fpe(ze.props)&&(Ue=!0)}),Ue}),[ue,re]=j.useState(()=>{let Ue=!1;return l&&j.Children.forEach(l,Ge=>{bb(Ge,["Input","Select"])&&(dS(Ge.props,!0)||dS(Ge.props.inputProps,!0))&&(Ue=!0)}),Ue}),[me,ve]=j.useState(!1);a&&me&&ve(!1);const De=C!==void 0&&!a?C:me;let je;const Be=j.useMemo(()=>({adornedStart:te,setAdornedStart:ie,color:f,disabled:a,error:E,filled:ue,focused:De,fullWidth:M,hiddenLabel:P,size:$,onBlur:()=>{ve(!1)},onEmpty:()=>{re(!1)},onFilled:()=>{re(!0)},onFocus:()=>{ve(!0)},registerEffect:je,required:F,variant:Z}),[te,f,a,E,ue,De,M,P,je,F,$,Z]);return O.jsx(hk.Provider,{value:Be,children:O.jsx(Ime,Ae({as:y,ownerState:K,className:fn(Q.root,d),ref:n},q,{children:l}))})}),Ome=Pme;function Lme(e){return Lr("MuiFormHelperText",e)}const Nme=Ar("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),m8=Nme;var g8;const zme=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Bme=e=>{const{classes:t,contained:n,size:r,disabled:l,error:d,filled:f,focused:y,required:a}=e,E={root:["root",l&&"disabled",d&&"error",r&&`size${Yn(r)}`,n&&"contained",y&&"focused",f&&"filled",a&&"required"]};return Or(E,Lme,t)},Fme=_n("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${Yn(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(({theme:e,ownerState:t})=>Ae({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${m8.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${m8.error}`]:{color:(e.vars||e).palette.error.main}},t.size==="small"&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14})),jme=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiFormHelperText"}),{children:l,className:d,component:f="p"}=r,y=Tn(r,zme),a=k0(),E=xv({props:r,muiFormControl:a,states:["variant","size","disabled","error","filled","focused","required"]}),C=Ae({},r,{component:f,contained:E.variant==="filled"||E.variant==="outlined",variant:E.variant,size:E.size,disabled:E.disabled,error:E.error,filled:E.filled,focused:E.focused,required:E.required}),M=Bme(C);return O.jsx(Fme,Ae({as:f,ownerState:C,className:fn(M.root,d),ref:n},y,{children:l===" "?g8||(g8=O.jsx("span",{className:"notranslate",children:"​"})):l}))}),$me=jme,Ume=j.createContext({}),Hh=Ume;function Vme(e){return Lr("MuiList",e)}Ar("MuiList",["root","padding","dense","subheader"]);const Hme=["children","className","component","dense","disablePadding","subheader"],Wme=e=>{const{classes:t,disablePadding:n,dense:r,subheader:l}=e;return Or({root:["root",!n&&"padding",r&&"dense",l&&"subheader"]},Vme,t)},Yme=_n("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})(({ownerState:e})=>Ae({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),Gme=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiList"}),{children:l,className:d,component:f="ul",dense:y=!1,disablePadding:a=!1,subheader:E}=r,C=Tn(r,Hme),M=j.useMemo(()=>({dense:y}),[y]),P=Ae({},r,{component:f,dense:y,disablePadding:a}),N=Wme(P);return O.jsx(Hh.Provider,{value:M,children:O.jsxs(Yme,Ae({as:f,className:fn(N.root,d),ref:n,ownerState:P},C,{children:[E,l]}))})}),Wh=Gme,qme=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function U3(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function y8(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function jH(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.indexOf(t.keys.join(""))===0}function B_(e,t,n,r,l,d){let f=!1,y=l(e,t,t?n:!1);for(;y;){if(y===e.firstChild){if(f)return!1;f=!0}const a=r?!1:y.disabled||y.getAttribute("aria-disabled")==="true";if(!y.hasAttribute("tabindex")||!jH(y,d)||a)y=l(e,y,n);else return y.focus(),!0}return!1}const Zme=j.forwardRef(function(t,n){const{actions:r,autoFocus:l=!1,autoFocusItem:d=!1,children:f,className:y,disabledItemsFocusable:a=!1,disableListWrap:E=!1,onKeyDown:C,variant:M="selectedMenu"}=t,P=Tn(t,qme),N=j.useRef(null),F=j.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Cc(()=>{l&&N.current.focus()},[l]),j.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(Q,{direction:te})=>{const ie=!N.current.style.width;if(Q.clientHeight<N.current.clientHeight&&ie){const ue=`${hH(ss(Q))}px`;N.current.style[te==="rtl"?"paddingLeft":"paddingRight"]=ue,N.current.style.width=`calc(100% + ${ue})`}return N.current}}),[]);const $=Q=>{const te=N.current,ie=Q.key,ue=ss(te).activeElement;if(ie==="ArrowDown")Q.preventDefault(),B_(te,ue,E,a,U3);else if(ie==="ArrowUp")Q.preventDefault(),B_(te,ue,E,a,y8);else if(ie==="Home")Q.preventDefault(),B_(te,null,E,a,U3);else if(ie==="End")Q.preventDefault(),B_(te,null,E,a,y8);else if(ie.length===1){const re=F.current,me=ie.toLowerCase(),ve=performance.now();re.keys.length>0&&(ve-re.lastTime>500?(re.keys=[],re.repeating=!0,re.previousKeyMatched=!0):re.repeating&&me!==re.keys[0]&&(re.repeating=!1)),re.lastTime=ve,re.keys.push(me);const De=ue&&!re.repeating&&jH(ue,re);re.previousKeyMatched&&(De||B_(te,ue,!1,a,U3,re))?Q.preventDefault():re.previousKeyMatched=!1}C&&C(Q)},Z=ti(N,n);let q=-1;j.Children.forEach(f,(Q,te)=>{if(!j.isValidElement(Q)){q===te&&(q+=1,q>=f.length&&(q=-1));return}Q.props.disabled||(M==="selectedMenu"&&Q.props.selected||q===-1)&&(q=te),q===te&&(Q.props.disabled||Q.props.muiSkipListHighlight||Q.type.muiSkipListHighlight)&&(q+=1,q>=f.length&&(q=-1))});const K=j.Children.map(f,(Q,te)=>{if(te===q){const ie={};return d&&(ie.autoFocus=!0),Q.props.tabIndex===void 0&&M==="selectedMenu"&&(ie.tabIndex=0),j.cloneElement(Q,ie)}return Q});return O.jsx(Wh,Ae({role:"menu",ref:Z,className:y,onKeyDown:$,tabIndex:l?0:-1},P,{children:K}))}),Kme=Zme;function Id(){const e=rk(nk);return e[Fx]||e}const yk=e=>e.scrollTop;function Cd(e,t){var n,r;const{timeout:l,easing:d,style:f={}}=e;return{duration:(n=f.transitionDuration)!=null?n:typeof l=="number"?l:l[t.mode]||0,easing:(r=f.transitionTimingFunction)!=null?r:typeof d=="object"?d[t.mode]:d,delay:f.transitionDelay}}const Xme=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function r5(e){return`scale(${e}, ${e**2})`}const Qme={entering:{opacity:1,transform:r5(1)},entered:{opacity:1,transform:"none"}},V3=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),$H=j.forwardRef(function(t,n){const{addEndListener:r,appear:l=!0,children:d,easing:f,in:y,onEnter:a,onEntered:E,onEntering:C,onExit:M,onExited:P,onExiting:N,style:F,timeout:$="auto",TransitionComponent:Z=mv}=t,q=Tn(t,Xme),K=Mp(),Q=j.useRef(),te=Id(),ie=j.useRef(null),ue=ti(ie,d.ref,n),re=ze=>ot=>{if(ze){const st=ie.current;ot===void 0?ze(st):ze(st,ot)}},me=re(C),ve=re((ze,ot)=>{yk(ze);const{duration:st,delay:Re,easing:bt}=Cd({style:F,timeout:$,easing:f},{mode:"enter"});let Lt;$==="auto"?(Lt=te.transitions.getAutoHeightDuration(ze.clientHeight),Q.current=Lt):Lt=st,ze.style.transition=[te.transitions.create("opacity",{duration:Lt,delay:Re}),te.transitions.create("transform",{duration:V3?Lt:Lt*.666,delay:Re,easing:bt})].join(","),a&&a(ze,ot)}),De=re(E),je=re(N),Be=re(ze=>{const{duration:ot,delay:st,easing:Re}=Cd({style:F,timeout:$,easing:f},{mode:"exit"});let bt;$==="auto"?(bt=te.transitions.getAutoHeightDuration(ze.clientHeight),Q.current=bt):bt=ot,ze.style.transition=[te.transitions.create("opacity",{duration:bt,delay:st}),te.transitions.create("transform",{duration:V3?bt:bt*.666,delay:V3?st:st||bt*.333,easing:Re})].join(","),ze.style.opacity=0,ze.style.transform=r5(.75),M&&M(ze)}),Ue=re(P),Ge=ze=>{$==="auto"&&K.start(Q.current||0,ze),r&&r(ie.current,ze)};return O.jsx(Z,Ae({appear:l,in:y,nodeRef:ie,onEnter:ve,onEntered:De,onEntering:me,onExit:Be,onExited:Ue,onExiting:je,addEndListener:Ge,timeout:$==="auto"?null:$},q,{children:(ze,ot)=>j.cloneElement(d,Ae({style:Ae({opacity:0,transform:r5(.75),visibility:ze==="exited"&&!y?"hidden":void 0},Qme[ze],F,d.props.style),ref:ue},ot))}))});$H.muiSupportAuto=!0;const o5=$H,Jme=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],ege={entering:{opacity:1},entered:{opacity:1}},tge=j.forwardRef(function(t,n){const r=Id(),l={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:d,appear:f=!0,children:y,easing:a,in:E,onEnter:C,onEntered:M,onEntering:P,onExit:N,onExited:F,onExiting:$,style:Z,timeout:q=l,TransitionComponent:K=mv}=t,Q=Tn(t,Jme),te=j.useRef(null),ie=ti(te,y.ref,n),ue=Ge=>ze=>{if(Ge){const ot=te.current;ze===void 0?Ge(ot):Ge(ot,ze)}},re=ue(P),me=ue((Ge,ze)=>{yk(Ge);const ot=Cd({style:Z,timeout:q,easing:a},{mode:"enter"});Ge.style.webkitTransition=r.transitions.create("opacity",ot),Ge.style.transition=r.transitions.create("opacity",ot),C&&C(Ge,ze)}),ve=ue(M),De=ue($),je=ue(Ge=>{const ze=Cd({style:Z,timeout:q,easing:a},{mode:"exit"});Ge.style.webkitTransition=r.transitions.create("opacity",ze),Ge.style.transition=r.transitions.create("opacity",ze),N&&N(Ge)}),Be=ue(F),Ue=Ge=>{d&&d(te.current,Ge)};return O.jsx(K,Ae({appear:f,in:E,nodeRef:te,onEnter:me,onEntered:ve,onEntering:re,onExit:je,onExited:Be,onExiting:De,addEndListener:Ue,timeout:q},Q,{children:(Ge,ze)=>j.cloneElement(y,Ae({style:Ae({opacity:0,visibility:Ge==="exited"&&!E?"hidden":void 0},ege[Ge],Z,y.props.style),ref:ie},ze))}))}),UH=tge;function nge(e){return Lr("MuiBackdrop",e)}Ar("MuiBackdrop",["root","invisible"]);const rge=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],oge=e=>{const{classes:t,invisible:n}=e;return Or({root:["root",n&&"invisible"]},nge,t)},ige=_n("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})(({ownerState:e})=>Ae({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),age=j.forwardRef(function(t,n){var r,l,d;const f=Hr({props:t,name:"MuiBackdrop"}),{children:y,className:a,component:E="div",components:C={},componentsProps:M={},invisible:P=!1,open:N,slotProps:F={},slots:$={},TransitionComponent:Z=UH,transitionDuration:q}=f,K=Tn(f,rge),Q=Ae({},f,{component:E,invisible:P}),te=oge(Q),ie=(r=F.root)!=null?r:M.root;return O.jsx(Z,Ae({in:N,timeout:q},K,{children:O.jsx(ige,Ae({"aria-hidden":!0},ie,{as:(l=(d=$.root)!=null?d:C.Root)!=null?l:E,className:fn(te.root,a,ie?.className),ownerState:Ae({},Q,ie?.ownerState),classes:te,ref:n,children:y}))}))}),VH=age;function sge(e){return Lr("MuiModal",e)}Ar("MuiModal",["root","hidden","backdrop"]);const lge=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],cge=e=>{const{open:t,exited:n,classes:r}=e;return Or({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},sge,r)},uge=_n("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(({theme:e,ownerState:t})=>Ae({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),dge=_n(VH,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),hge=j.forwardRef(function(t,n){var r,l,d,f,y,a;const E=Hr({name:"MuiModal",props:t}),{BackdropComponent:C=dge,BackdropProps:M,className:P,closeAfterTransition:N=!1,children:F,container:$,component:Z,components:q={},componentsProps:K={},disableAutoFocus:Q=!1,disableEnforceFocus:te=!1,disableEscapeKeyDown:ie=!1,disablePortal:ue=!1,disableRestoreFocus:re=!1,disableScrollLock:me=!1,hideBackdrop:ve=!1,keepMounted:De=!1,onBackdropClick:je,open:Be,slotProps:Ue,slots:Ge}=E,ze=Tn(E,lge),ot=Ae({},E,{closeAfterTransition:N,disableAutoFocus:Q,disableEnforceFocus:te,disableEscapeKeyDown:ie,disablePortal:ue,disableRestoreFocus:re,disableScrollLock:me,hideBackdrop:ve,keepMounted:De}),{getRootProps:st,getBackdropProps:Re,getTransitionProps:bt,portalRef:Lt,isTopModal:Ct,exited:Nt,hasTransition:tn}=bpe(Ae({},ot,{rootRef:n})),Dt=Ae({},ot,{exited:Nt}),cn=cge(Dt),Mt={};if(F.props.tabIndex===void 0&&(Mt.tabIndex="-1"),tn){const{onEnter:Fn,onExited:On}=bt();Mt.onEnter=Fn,Mt.onExited=On}const Vn=(r=(l=Ge?.root)!=null?l:q.Root)!=null?r:uge,nt=(d=(f=Ge?.backdrop)!=null?f:q.Backdrop)!=null?d:C,Pn=(y=Ue?.root)!=null?y:K.root,Un=(a=Ue?.backdrop)!=null?a:K.backdrop,En=m0({elementType:Vn,externalSlotProps:Pn,externalForwardedProps:ze,getSlotProps:st,additionalProps:{ref:n,as:Z},ownerState:Dt,className:fn(P,Pn?.className,cn?.root,!Dt.open&&Dt.exited&&cn?.hidden)}),bn=m0({elementType:nt,externalSlotProps:Un,additionalProps:M,getSlotProps:Fn=>Re(Ae({},Fn,{onClick:On=>{je&&je(On),Fn!=null&&Fn.onClick&&Fn.onClick(On)}})),className:fn(Un?.className,M?.className,cn?.backdrop),ownerState:Dt});return!De&&!Be&&(!tn||Nt)?null:O.jsx(IH,{ref:Lt,container:$,disablePortal:ue,children:O.jsxs(Vn,Ae({},En,{children:[!ve&&C?O.jsx(nt,Ae({},bn)):null,O.jsx(Sfe,{disableEnforceFocus:te,disableAutoFocus:Q,disableRestoreFocus:re,isEnabled:Ct,open:Be,children:j.cloneElement(F,Mt)})]}))})}),wv=hge,b8=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)};function fge(e){return Lr("MuiPaper",e)}Ar("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const pge=["className","component","elevation","square","variant"],mge=e=>{const{square:t,elevation:n,variant:r,classes:l}=e,d={root:["root",r,!t&&"rounded",r==="elevation"&&`elevation${n}`]};return Or(d,fge,l)},gge=_n("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(({theme:e,ownerState:t})=>{var n;return Ae({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&Ae({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${da("#fff",b8(t.elevation))}, ${da("#fff",b8(t.elevation))})`},e.vars&&{backgroundImage:(n=e.vars.overlays)==null?void 0:n[t.elevation]}))}),yge=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiPaper"}),{className:l,component:d="div",elevation:f=1,square:y=!1,variant:a="elevation"}=r,E=Tn(r,pge),C=Ae({},r,{component:d,elevation:f,square:y,variant:a}),M=mge(C);return O.jsx(gge,Ae({as:d,ownerState:C,className:fn(M.root,l),ref:n},E))}),A0=yge;function bge(e){return Lr("MuiPopover",e)}Ar("MuiPopover",["root","paper"]);const vge=["onEntering"],_ge=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],xge=["slotProps"];function v8(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function _8(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function x8(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function H3(e){return typeof e=="function"?e():e}const wge=e=>{const{classes:t}=e;return Or({root:["root"],paper:["paper"]},bge,t)},Ege=_n(wv,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),HH=_n(A0,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Tge=j.forwardRef(function(t,n){var r,l,d;const f=Hr({props:t,name:"MuiPopover"}),{action:y,anchorEl:a,anchorOrigin:E={vertical:"top",horizontal:"left"},anchorPosition:C,anchorReference:M="anchorEl",children:P,className:N,container:F,elevation:$=8,marginThreshold:Z=16,open:q,PaperProps:K={},slots:Q,slotProps:te,transformOrigin:ie={vertical:"top",horizontal:"left"},TransitionComponent:ue=o5,transitionDuration:re="auto",TransitionProps:{onEntering:me}={},disableScrollLock:ve=!1}=f,De=Tn(f.TransitionProps,vge),je=Tn(f,_ge),Be=(r=te?.paper)!=null?r:K,Ue=j.useRef(),Ge=ti(Ue,Be.ref),ze=Ae({},f,{anchorOrigin:E,anchorReference:M,elevation:$,marginThreshold:Z,externalPaperSlotProps:Be,transformOrigin:ie,TransitionComponent:ue,transitionDuration:re,TransitionProps:De}),ot=wge(ze),st=j.useCallback(()=>{if(M==="anchorPosition")return C;const Fn=H3(a),an=(Fn&&Fn.nodeType===1?Fn:ss(Ue.current).body).getBoundingClientRect();return{top:an.top+v8(an,E.vertical),left:an.left+_8(an,E.horizontal)}},[a,E.horizontal,E.vertical,C,M]),Re=j.useCallback(Fn=>({vertical:v8(Fn,ie.vertical),horizontal:_8(Fn,ie.horizontal)}),[ie.horizontal,ie.vertical]),bt=j.useCallback(Fn=>{const On={width:Fn.offsetWidth,height:Fn.offsetHeight},an=Re(On);if(M==="none")return{top:null,left:null,transformOrigin:x8(an)};const qr=st();let hn=qr.top-an.vertical,Wr=qr.left-an.horizontal;const go=hn+On.height,pr=Wr+On.width,Pr=Td(H3(a)),to=Pr.innerHeight-Z,Mr=Pr.innerWidth-Z;if(Z!==null&&hn<Z){const mr=hn-Z;hn-=mr,an.vertical+=mr}else if(Z!==null&&go>to){const mr=go-to;hn-=mr,an.vertical+=mr}if(Z!==null&&Wr<Z){const mr=Wr-Z;Wr-=mr,an.horizontal+=mr}else if(pr>Mr){const mr=pr-Mr;Wr-=mr,an.horizontal+=mr}return{top:`${Math.round(hn)}px`,left:`${Math.round(Wr)}px`,transformOrigin:x8(an)}},[a,M,st,Re,Z]),[Lt,Ct]=j.useState(q),Nt=j.useCallback(()=>{const Fn=Ue.current;if(!Fn)return;const On=bt(Fn);On.top!==null&&(Fn.style.top=On.top),On.left!==null&&(Fn.style.left=On.left),Fn.style.transformOrigin=On.transformOrigin,Ct(!0)},[bt]);j.useEffect(()=>(ve&&window.addEventListener("scroll",Nt),()=>window.removeEventListener("scroll",Nt)),[a,ve,Nt]);const tn=(Fn,On)=>{me&&me(Fn,On),Nt()},Dt=()=>{Ct(!1)};j.useEffect(()=>{q&&Nt()}),j.useImperativeHandle(y,()=>q?{updatePosition:()=>{Nt()}}:null,[q,Nt]),j.useEffect(()=>{if(!q)return;const Fn=ak(()=>{Nt()}),On=Td(a);return On.addEventListener("resize",Fn),()=>{Fn.clear(),On.removeEventListener("resize",Fn)}},[a,q,Nt]);let cn=re;re==="auto"&&!ue.muiSupportAuto&&(cn=void 0);const Mt=F||(a?ss(H3(a)).body:void 0),Vn=(l=Q?.root)!=null?l:Ege,nt=(d=Q?.paper)!=null?d:HH,Pn=m0({elementType:nt,externalSlotProps:Ae({},Be,{style:Lt?Be.style:Ae({},Be.style,{opacity:0})}),additionalProps:{elevation:$,ref:Ge},ownerState:ze,className:fn(ot.paper,Be?.className)}),Un=m0({elementType:Vn,externalSlotProps:te?.root||{},externalForwardedProps:je,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:Mt,open:q},ownerState:ze,className:fn(ot.root,N)}),{slotProps:En}=Un,bn=Tn(Un,xge);return O.jsx(Vn,Ae({},bn,!qb(Vn)&&{slotProps:En,disableScrollLock:ve},{children:O.jsx(ue,Ae({appear:!0,in:q,onEntering:tn,onExited:Dt,timeout:cn},De,{children:O.jsx(nt,Ae({},Pn,{children:P}))}))}))}),Sge=Tge;function Cge(e){return Lr("MuiMenu",e)}Ar("MuiMenu",["root","paper","list"]);const kge=["onEntering"],Age=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],Mge={vertical:"top",horizontal:"right"},Dge={vertical:"top",horizontal:"left"},Rge=e=>{const{classes:t}=e;return Or({root:["root"],paper:["paper"],list:["list"]},Cge,t)},Ige=_n(Sge,{shouldForwardProp:e=>Qs(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Pge=_n(HH,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Oge=_n(Kme,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),Lge=j.forwardRef(function(t,n){var r,l;const d=Hr({props:t,name:"MuiMenu"}),{autoFocus:f=!0,children:y,className:a,disableAutoFocusItem:E=!1,MenuListProps:C={},onClose:M,open:P,PaperProps:N={},PopoverClasses:F,transitionDuration:$="auto",TransitionProps:{onEntering:Z}={},variant:q="selectedMenu",slots:K={},slotProps:Q={}}=d,te=Tn(d.TransitionProps,kge),ie=Tn(d,Age),ue=jI(),re=Ae({},d,{autoFocus:f,disableAutoFocusItem:E,MenuListProps:C,onEntering:Z,PaperProps:N,transitionDuration:$,TransitionProps:te,variant:q}),me=Rge(re),ve=f&&!E&&P,De=j.useRef(null),je=(Re,bt)=>{De.current&&De.current.adjustStyleForScrollbar(Re,{direction:ue?"rtl":"ltr"}),Z&&Z(Re,bt)},Be=Re=>{Re.key==="Tab"&&(Re.preventDefault(),M&&M(Re,"tabKeyDown"))};let Ue=-1;j.Children.map(y,(Re,bt)=>{j.isValidElement(Re)&&(Re.props.disabled||(q==="selectedMenu"&&Re.props.selected||Ue===-1)&&(Ue=bt))});const Ge=(r=K.paper)!=null?r:Pge,ze=(l=Q.paper)!=null?l:N,ot=m0({elementType:K.root,externalSlotProps:Q.root,ownerState:re,className:[me.root,a]}),st=m0({elementType:Ge,externalSlotProps:ze,ownerState:re,className:me.paper});return O.jsx(Ige,Ae({onClose:M,anchorOrigin:{vertical:"bottom",horizontal:ue?"right":"left"},transformOrigin:ue?Mge:Dge,slots:{paper:Ge,root:K.root},slotProps:{root:ot,paper:st},open:P,ref:n,transitionDuration:$,TransitionProps:Ae({onEntering:je},te),ownerState:re},ie,{classes:F,children:O.jsx(Oge,Ae({onKeyDown:Be,actions:De,autoFocus:f&&(Ue===-1||E),autoFocusItem:ve,variant:q},C,{className:fn(me.list,C.className),children:y}))}))}),WH=Lge;function Nge(e){return Lr("MuiNativeSelect",e)}const zge=Ar("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),ZI=zge,Bge=["className","disabled","error","IconComponent","inputRef","variant"],Fge=e=>{const{classes:t,variant:n,disabled:r,multiple:l,open:d,error:f}=e,y={select:["select",n,r&&"disabled",l&&"multiple",f&&"error"],icon:["icon",`icon${Yn(n)}`,d&&"iconOpen",r&&"disabled"]};return Or(y,Nge,t)},YH=({ownerState:e,theme:t})=>Ae({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":Ae({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${ZI.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},e.variant==="filled"&&{"&&&":{paddingRight:32}},e.variant==="outlined"&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),jge=_n("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Qs,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${ZI.multiple}`]:t.multiple}]}})(YH),GH=({ownerState:e,theme:t})=>Ae({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${ZI.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},e.variant==="filled"&&{right:7},e.variant==="outlined"&&{right:7}),$ge=_n("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Yn(n.variant)}`],n.open&&t.iconOpen]}})(GH),Uge=j.forwardRef(function(t,n){const{className:r,disabled:l,error:d,IconComponent:f,inputRef:y,variant:a="standard"}=t,E=Tn(t,Bge),C=Ae({},t,{disabled:l,variant:a,error:d}),M=Fge(C);return O.jsxs(j.Fragment,{children:[O.jsx(jge,Ae({ownerState:C,className:fn(M.select,r),disabled:l,ref:y||n},E)),t.multiple?null:O.jsx($ge,{as:f,ownerState:C,className:M.icon})]})}),Vge=Uge;function Hge(e){return Lr("MuiSelect",e)}const F_=Ar("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var w8;const Wge=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],Yge=_n("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${F_.select}`]:t.select},{[`&.${F_.select}`]:t[n.variant]},{[`&.${F_.error}`]:t.error},{[`&.${F_.multiple}`]:t.multiple}]}})(YH,{[`&.${F_.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Gge=_n("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Yn(n.variant)}`],n.open&&t.iconOpen]}})(GH),qge=_n("input",{shouldForwardProp:e=>uH(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function E8(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function Zge(e){return e==null||typeof e=="string"&&!e.trim()}const Kge=e=>{const{classes:t,variant:n,disabled:r,multiple:l,open:d,error:f}=e,y={select:["select",n,r&&"disabled",l&&"multiple",f&&"error"],icon:["icon",`icon${Yn(n)}`,d&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return Or(y,Hge,t)},Xge=j.forwardRef(function(t,n){var r;const{"aria-describedby":l,"aria-label":d,autoFocus:f,autoWidth:y,children:a,className:E,defaultOpen:C,defaultValue:M,disabled:P,displayEmpty:N,error:F=!1,IconComponent:$,inputRef:Z,labelId:q,MenuProps:K={},multiple:Q,name:te,onBlur:ie,onChange:ue,onClose:re,onFocus:me,onOpen:ve,open:De,readOnly:je,renderValue:Be,SelectDisplayProps:Ue={},tabIndex:Ge,value:ze,variant:ot="standard"}=t,st=Tn(t,Wge),[Re,bt]=Gb({controlled:ze,default:M,name:"Select"}),[Lt,Ct]=Gb({controlled:De,default:C,name:"Select"}),Nt=j.useRef(null),tn=j.useRef(null),[Dt,cn]=j.useState(null),{current:Mt}=j.useRef(De!=null),[Vn,nt]=j.useState(),Pn=ti(n,Z),Un=j.useCallback(ct=>{tn.current=ct,ct&&cn(ct)},[]),En=Dt?.parentNode;j.useImperativeHandle(Pn,()=>({focus:()=>{tn.current.focus()},node:Nt.current,value:Re}),[Re]),j.useEffect(()=>{C&&Lt&&Dt&&!Mt&&(nt(y?null:En.clientWidth),tn.current.focus())},[Dt,y]),j.useEffect(()=>{f&&tn.current.focus()},[f]),j.useEffect(()=>{if(!q)return;const ct=ss(tn.current).getElementById(q);if(ct){const tt=()=>{getSelection().isCollapsed&&tn.current.focus()};return ct.addEventListener("click",tt),()=>{ct.removeEventListener("click",tt)}}},[q]);const bn=(ct,tt)=>{ct?ve&&ve(tt):re&&re(tt),Mt||(nt(y?null:En.clientWidth),Ct(ct))},Fn=ct=>{ct.button===0&&(ct.preventDefault(),tn.current.focus(),bn(!0,ct))},On=ct=>{bn(!1,ct)},an=j.Children.toArray(a),qr=ct=>{const tt=an.find(jt=>jt.props.value===ct.target.value);tt!==void 0&&(bt(tt.props.value),ue&&ue(ct,tt))},hn=ct=>tt=>{let jt;if(tt.currentTarget.hasAttribute("tabindex")){if(Q){jt=Array.isArray(Re)?Re.slice():[];const Ut=Re.indexOf(ct.props.value);Ut===-1?jt.push(ct.props.value):jt.splice(Ut,1)}else jt=ct.props.value;if(ct.props.onClick&&ct.props.onClick(tt),Re!==jt&&(bt(jt),ue)){const Ut=tt.nativeEvent||tt,en=new Ut.constructor(Ut.type,Ut);Object.defineProperty(en,"target",{writable:!0,value:{value:jt,name:te}}),ue(en,ct)}Q||bn(!1,tt)}},Wr=ct=>{je||[" ","ArrowUp","ArrowDown","Enter"].indexOf(ct.key)!==-1&&(ct.preventDefault(),bn(!0,ct))},go=Dt!==null&&Lt,pr=ct=>{!go&&ie&&(Object.defineProperty(ct,"target",{writable:!0,value:{value:Re,name:te}}),ie(ct))};delete st["aria-invalid"];let Pr,to;const Mr=[];let mr=!1;(dS({value:Re})||N)&&(Be?Pr=Be(Re):mr=!0);const eo=an.map(ct=>{if(!j.isValidElement(ct))return null;let tt;if(Q){if(!Array.isArray(Re))throw new Error(p0(2));tt=Re.some(jt=>E8(jt,ct.props.value)),tt&&mr&&Mr.push(ct.props.children)}else tt=E8(Re,ct.props.value),tt&&mr&&(to=ct.props.children);return j.cloneElement(ct,{"aria-selected":tt?"true":"false",onClick:hn(ct),onKeyUp:jt=>{jt.key===" "&&jt.preventDefault(),ct.props.onKeyUp&&ct.props.onKeyUp(jt)},role:"option",selected:tt,value:void 0,"data-value":ct.props.value})});mr&&(Q?Mr.length===0?Pr=null:Pr=Mr.reduce((ct,tt,jt)=>(ct.push(tt),jt<Mr.length-1&&ct.push(", "),ct),[]):Pr=to);let Ke=Vn;!y&&Mt&&Dt&&(Ke=En.clientWidth);let pe;typeof Ge<"u"?pe=Ge:pe=P?null:0;const we=Ue.id||(te?`mui-component-select-${te}`:void 0),Pe=Ae({},t,{variant:ot,value:Re,open:go,error:F}),at=Kge(Pe),ft=Ae({},K.PaperProps,(r=K.slotProps)==null?void 0:r.paper),it=$x();return O.jsxs(j.Fragment,{children:[O.jsx(Yge,Ae({ref:Un,tabIndex:pe,role:"combobox","aria-controls":it,"aria-disabled":P?"true":void 0,"aria-expanded":go?"true":"false","aria-haspopup":"listbox","aria-label":d,"aria-labelledby":[q,we].filter(Boolean).join(" ")||void 0,"aria-describedby":l,onKeyDown:Wr,onMouseDown:P||je?null:Fn,onBlur:pr,onFocus:me},Ue,{ownerState:Pe,className:fn(Ue.className,at.select,E),id:we,children:Zge(Pr)?w8||(w8=O.jsx("span",{className:"notranslate",children:"​"})):Pr})),O.jsx(qge,Ae({"aria-invalid":F,value:Array.isArray(Re)?Re.join(","):Re,name:te,ref:Nt,"aria-hidden":!0,onChange:qr,tabIndex:-1,disabled:P,className:at.nativeInput,autoFocus:f,ownerState:Pe},st)),O.jsx(Gge,{as:$,className:at.icon,ownerState:Pe}),O.jsx(WH,Ae({id:`menu-${te||""}`,anchorEl:En,open:go,onClose:On,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},K,{MenuListProps:Ae({"aria-labelledby":q,role:"listbox","aria-multiselectable":Q?"true":void 0,disableListWrap:!0,id:it},K.MenuListProps),slotProps:Ae({},K.slotProps,{paper:Ae({},ft,{style:Ae({minWidth:Ke},ft!=null?ft.style:null)})}),children:eo}))]})}),Qge=Xge,Jge=$I(O.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),e0e=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],t0e=["root"],n0e=e=>{const{classes:t}=e;return t},KI={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>Qs(e)&&e!=="variant",slot:"Root"},r0e=_n(LH,KI)(""),o0e=_n(FH,KI)(""),i0e=_n(zH,KI)(""),qH=j.forwardRef(function(t,n){const r=Hr({name:"MuiSelect",props:t}),{autoWidth:l=!1,children:d,classes:f={},className:y,defaultOpen:a=!1,displayEmpty:E=!1,IconComponent:C=Jge,id:M,input:P,inputProps:N,label:F,labelId:$,MenuProps:Z,multiple:q=!1,native:K=!1,onClose:Q,onOpen:te,open:ie,renderValue:ue,SelectDisplayProps:re,variant:me="outlined"}=r,ve=Tn(r,e0e),De=K?Vge:Qge,je=k0(),Be=xv({props:r,muiFormControl:je,states:["variant","error"]}),Ue=Be.variant||me,Ge=Ae({},r,{variant:Ue,classes:f}),ze=n0e(Ge),ot=Tn(ze,t0e),st=P||{standard:O.jsx(r0e,{ownerState:Ge}),outlined:O.jsx(o0e,{label:F,ownerState:Ge}),filled:O.jsx(i0e,{ownerState:Ge})}[Ue],Re=ti(n,st.ref);return O.jsx(j.Fragment,{children:j.cloneElement(st,Ae({inputComponent:De,inputProps:Ae({children:d,error:Be.error,IconComponent:C,variant:Ue,type:void 0,multiple:q},K?{id:M}:{autoWidth:l,defaultOpen:a,displayEmpty:E,labelId:$,MenuProps:Z,onClose:Q,onOpen:te,open:ie,renderValue:ue,SelectDisplayProps:Ae({id:M},re)},N,{classes:N?Rl(ot,N.classes):ot},P?P.props.inputProps:{})},(q&&K||E)&&Ue==="outlined"?{notched:!0}:{},{ref:Re,className:fn(st.props.className,y,ze.root)},!P&&{variant:Ue},ve))})});qH.muiName="Select";const a0e=qH;function s0e(e){return Lr("MuiTextField",e)}Ar("MuiTextField",["root"]);const l0e=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],c0e={standard:LH,filled:zH,outlined:FH},u0e=e=>{const{classes:t}=e;return Or({root:["root"]},s0e,t)},d0e=_n(Ome,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),h0e=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiTextField"}),{autoComplete:l,autoFocus:d=!1,children:f,className:y,color:a="primary",defaultValue:E,disabled:C=!1,error:M=!1,FormHelperTextProps:P,fullWidth:N=!1,helperText:F,id:$,InputLabelProps:Z,inputProps:q,InputProps:K,inputRef:Q,label:te,maxRows:ie,minRows:ue,multiline:re=!1,name:me,onBlur:ve,onChange:De,onFocus:je,placeholder:Be,required:Ue=!1,rows:Ge,select:ze=!1,SelectProps:ot,type:st,value:Re,variant:bt="outlined"}=r,Lt=Tn(r,l0e),Ct=Ae({},r,{autoFocus:d,color:a,disabled:C,error:M,fullWidth:N,multiline:re,required:Ue,select:ze,variant:bt}),Nt=u0e(Ct),tn={};bt==="outlined"&&(Z&&typeof Z.shrink<"u"&&(tn.notched=Z.shrink),tn.label=te),ze&&((!ot||!ot.native)&&(tn.id=void 0),tn["aria-describedby"]=void 0);const Dt=$x($),cn=F&&Dt?`${Dt}-helper-text`:void 0,Mt=te&&Dt?`${Dt}-label`:void 0,Vn=c0e[bt],nt=O.jsx(Vn,Ae({"aria-describedby":cn,autoComplete:l,autoFocus:d,defaultValue:E,fullWidth:N,multiline:re,name:me,rows:Ge,maxRows:ie,minRows:ue,type:st,value:Re,id:Dt,inputRef:Q,onBlur:ve,onChange:De,onFocus:je,placeholder:Be,inputProps:q},tn,K));return O.jsxs(d0e,Ae({className:fn(Nt.root,y),disabled:C,error:M,fullWidth:N,ref:n,required:Ue,color:a,variant:bt,ownerState:Ct},Lt,{children:[te!=null&&te!==""&&O.jsx(Ame,Ae({htmlFor:Dt,id:Mt},Z,{children:te})),ze?O.jsx(a0e,Ae({"aria-describedby":cn,id:Dt,labelId:Mt,value:Re,input:nt},ot,{children:f})):nt,F&&O.jsx($me,Ae({id:cn},P,{children:F}))]}))}),kd=h0e;function f0e(e){return Lr("MuiTypography",e)}Ar("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const p0e=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],m0e=e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:l,variant:d,classes:f}=e,y={root:["root",d,e.align!=="inherit"&&`align${Yn(t)}`,n&&"gutterBottom",r&&"noWrap",l&&"paragraph"]};return Or(y,f0e,f)},g0e=_n("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${Yn(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>Ae({margin:0},t.variant==="inherit"&&{font:"inherit"},t.variant!=="inherit"&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),T8={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},y0e={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},b0e=e=>y0e[e]||e,v0e=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiTypography"}),l=b0e(r.color),d=tk(Ae({},r,{color:l})),{align:f="inherit",className:y,component:a,gutterBottom:E=!1,noWrap:C=!1,paragraph:M=!1,variant:P="body1",variantMapping:N=T8}=d,F=Tn(d,p0e),$=Ae({},d,{align:f,color:l,className:y,component:a,gutterBottom:E,noWrap:C,paragraph:M,variant:P,variantMapping:N}),Z=a||(M?"p":N[P]||T8[P])||"span",q=m0e($);return O.jsx(g0e,Ae({as:Z,ref:n,ownerState:$,className:fn(q.root,y)},F))}),sa=v0e;function _0e(e){return Lr("MuiLink",e)}const x0e=Ar("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),w0e=x0e,ZH={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},E0e=e=>ZH[e]||e,T0e=({theme:e,ownerState:t})=>{const n=E0e(t.color),r=Yb(e,`palette.${n}`,!1)||t.color,l=Yb(e,`palette.${n}Channel`);return"vars"in e&&l?`rgba(${l} / 0.4)`:da(r,.4)},S0e=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],C0e=e=>{const{classes:t,component:n,focusVisible:r,underline:l}=e,d={root:["root",`underline${Yn(l)}`,n==="button"&&"button",r&&"focusVisible"]};return Or(d,_0e,t)},k0e=_n(sa,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`underline${Yn(n.underline)}`],n.component==="button"&&t.button]}})(({theme:e,ownerState:t})=>Ae({},t.underline==="none"&&{textDecoration:"none"},t.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},t.underline==="always"&&Ae({textDecoration:"underline"},t.color!=="inherit"&&{textDecorationColor:T0e({theme:e,ownerState:t})},{"&:hover":{textDecorationColor:"inherit"}}),t.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${w0e.focusVisible}`]:{outline:"auto"}})),A0e=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiLink"}),{className:l,color:d="primary",component:f="a",onBlur:y,onFocus:a,TypographyClasses:E,underline:C="always",variant:M="inherit",sx:P}=r,N=Tn(r,S0e),{isFocusVisibleRef:F,onBlur:$,onFocus:Z,ref:q}=ik(),[K,Q]=j.useState(!1),te=ti(n,q),ie=ve=>{$(ve),F.current===!1&&Q(!1),y&&y(ve)},ue=ve=>{Z(ve),F.current===!0&&Q(!0),a&&a(ve)},re=Ae({},r,{color:d,component:f,focusVisible:K,underline:C,variant:M}),me=C0e(re);return O.jsx(k0e,Ae({color:d,className:fn(me.root,l),classes:E,component:f,onBlur:ie,onFocus:ue,ref:te,ownerState:re,variant:M,sx:[...Object.keys(ZH).includes(d)?[]:[{color:d}],...Array.isArray(P)?P:[P]]},N))}),KH=A0e,M0e=j.createContext(),S8=M0e;function D0e(e){return Lr("MuiGrid",e)}const R0e=[0,1,2,3,4,5,6,7,8,9,10],I0e=["column-reverse","column","row-reverse","row"],P0e=["nowrap","wrap-reverse","wrap"],j_=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],ox=Ar("MuiGrid",["root","container","item","zeroMinWidth",...R0e.map(e=>`spacing-xs-${e}`),...I0e.map(e=>`direction-xs-${e}`),...P0e.map(e=>`wrap-xs-${e}`),...j_.map(e=>`grid-xs-${e}`),...j_.map(e=>`grid-sm-${e}`),...j_.map(e=>`grid-md-${e}`),...j_.map(e=>`grid-lg-${e}`),...j_.map(e=>`grid-xl-${e}`)]),O0e=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function _b(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function L0e({theme:e,ownerState:t}){let n;return e.breakpoints.keys.reduce((r,l)=>{let d={};if(t[l]&&(n=t[l]),!n)return r;if(n===!0)d={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")d={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const f=ZC({values:t.columns,breakpoints:e.breakpoints.values}),y=typeof f=="object"?f[l]:f;if(y==null)return r;const a=`${Math.round(n/y*1e8)/1e6}%`;let E={};if(t.container&&t.item&&t.columnSpacing!==0){const C=e.spacing(t.columnSpacing);if(C!=="0px"){const M=`calc(${a} + ${_b(C)})`;E={flexBasis:M,maxWidth:M}}}d=Ae({flexBasis:a,flexGrow:0,maxWidth:a},E)}return e.breakpoints.values[l]===0?Object.assign(r,d):r[e.breakpoints.up(l)]=d,r},{})}function N0e({theme:e,ownerState:t}){const n=ZC({values:t.direction,breakpoints:e.breakpoints.values});return Sc({theme:e},n,r=>{const l={flexDirection:r};return r.indexOf("column")===0&&(l[`& > .${ox.item}`]={maxWidth:"none"}),l})}function XH({breakpoints:e,values:t}){let n="";Object.keys(t).forEach(l=>{n===""&&t[l]!==0&&(n=l)});const r=Object.keys(e).sort((l,d)=>e[l]-e[d]);return r.slice(0,r.indexOf(n))}function z0e({theme:e,ownerState:t}){const{container:n,rowSpacing:r}=t;let l={};if(n&&r!==0){const d=ZC({values:r,breakpoints:e.breakpoints.values});let f;typeof d=="object"&&(f=XH({breakpoints:e.breakpoints.values,values:d})),l=Sc({theme:e},d,(y,a)=>{var E;const C=e.spacing(y);return C!=="0px"?{marginTop:`-${_b(C)}`,[`& > .${ox.item}`]:{paddingTop:_b(C)}}:(E=f)!=null&&E.includes(a)?{}:{marginTop:0,[`& > .${ox.item}`]:{paddingTop:0}}})}return l}function B0e({theme:e,ownerState:t}){const{container:n,columnSpacing:r}=t;let l={};if(n&&r!==0){const d=ZC({values:r,breakpoints:e.breakpoints.values});let f;typeof d=="object"&&(f=XH({breakpoints:e.breakpoints.values,values:d})),l=Sc({theme:e},d,(y,a)=>{var E;const C=e.spacing(y);return C!=="0px"?{width:`calc(100% + ${_b(C)})`,marginLeft:`-${_b(C)}`,[`& > .${ox.item}`]:{paddingLeft:_b(C)}}:(E=f)!=null&&E.includes(a)?{}:{width:"100%",marginLeft:0,[`& > .${ox.item}`]:{paddingLeft:0}}})}return l}function F0e(e,t,n={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[n[`spacing-xs-${String(e)}`]];const r=[];return t.forEach(l=>{const d=e[l];Number(d)>0&&r.push(n[`spacing-${l}-${String(d)}`])}),r}const j0e=_n("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:r,direction:l,item:d,spacing:f,wrap:y,zeroMinWidth:a,breakpoints:E}=n;let C=[];r&&(C=F0e(f,E,t));const M=[];return E.forEach(P=>{const N=n[P];N&&M.push(t[`grid-${P}-${String(N)}`])}),[t.root,r&&t.container,d&&t.item,a&&t.zeroMinWidth,...C,l!=="row"&&t[`direction-xs-${String(l)}`],y!=="wrap"&&t[`wrap-xs-${String(y)}`],...M]}})(({ownerState:e})=>Ae({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),N0e,z0e,B0e,L0e);function $0e(e,t){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const n=[];return t.forEach(r=>{const l=e[r];if(Number(l)>0){const d=`spacing-${r}-${String(l)}`;n.push(d)}}),n}const U0e=e=>{const{classes:t,container:n,direction:r,item:l,spacing:d,wrap:f,zeroMinWidth:y,breakpoints:a}=e;let E=[];n&&(E=$0e(d,a));const C=[];a.forEach(P=>{const N=e[P];N&&C.push(`grid-${P}-${String(N)}`)});const M={root:["root",n&&"container",l&&"item",y&&"zeroMinWidth",...E,r!=="row"&&`direction-xs-${String(r)}`,f!=="wrap"&&`wrap-xs-${String(f)}`,...C]};return Or(M,D0e,t)},V0e=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiGrid"}),{breakpoints:l}=Id(),d=tk(r),{className:f,columns:y,columnSpacing:a,component:E="div",container:C=!1,direction:M="row",item:P=!1,rowSpacing:N,spacing:F=0,wrap:$="wrap",zeroMinWidth:Z=!1}=d,q=Tn(d,O0e),K=N||F,Q=a||F,te=j.useContext(S8),ie=C?y||12:te,ue={},re=Ae({},q);l.keys.forEach(De=>{q[De]!=null&&(ue[De]=q[De],delete re[De])});const me=Ae({},d,{columns:ie,container:C,direction:M,item:P,rowSpacing:K,columnSpacing:Q,wrap:$,zeroMinWidth:Z,spacing:F},ue,{breakpoints:l.keys}),ve=U0e(me);return O.jsx(S8.Provider,{value:ie,children:O.jsx(j0e,Ae({ownerState:me,className:fn(ve.root,f),as:E,ref:n},re))})}),hS=V0e,H0e=Ar("MuiBox",["root"]),W0e=H0e,Y0e=cH(),G0e=Xde({themeId:Fx,defaultTheme:Y0e,defaultClassName:W0e.root,generateClassName:zI.generate}),Nl=G0e;var XI={},W3={};const q0e={configure:e=>{zI.configure(e)}},Z0e=Object.freeze(Object.defineProperty({__proto__:null,capitalize:Yn,createChainedFunction:QD,createSvgIcon:$I,debounce:ak,deprecatedPropType:lhe,isMuiElement:bb,ownerDocument:ss,ownerWindow:Td,requirePropFactory:che,setRef:aS,unstable_ClassNameGenerator:q0e,unstable_useEnhancedEffect:Cc,unstable_useId:$x,unsupportedProp:dhe,useControlled:Gb,useEventCallback:Fh,useForkRef:ti,useIsFocusVisible:ik},Symbol.toStringTag,{value:"Module"})),K0e=Dd(Z0e);var C8;function Bi(){return C8||(C8=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=K0e}(W3)),W3}var X0e=yi;Object.defineProperty(XI,"__esModule",{value:!0});var QI=XI.default=void 0,Q0e=X0e(Bi()),J0e=O;QI=XI.default=(0,Q0e.default)((0,J0e.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2M9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9zm9 14H6V10h12zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2"}),"LockOutlined");const eye=bhe({createStyledComponent:_n("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${Yn(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>Hr({props:e,name:"MuiContainer"})}),QH=eye;function tye(){const[e,t]=j.useState(""),[n,r]=j.useState(""),{setUser:l}=Eu(),d=Ac(),f=async y=>{y.preventDefault();const a=await ase(e,n);l(a),d("/editprofile")};return O.jsx(O.Fragment,{children:O.jsx(QH,{component:"main",maxWidth:"xs",children:O.jsxs(Nl,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[O.jsx(gu,{sx:{m:1,bgcolor:"secondary.main"},children:O.jsx(QI,{})}),O.jsx(sa,{component:"h1",variant:"h5",children:"Sign Up"}),O.jsxs(Nl,{component:"form",onSubmit:f,noValidate:!0,sx:{mt:1},children:[O.jsx(kd,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:y=>t(y.target.value),value:e}),O.jsx(kd,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:y=>r(y.target.value),value:n}),O.jsx(la,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:f,children:"Sign Up"}),O.jsx(hS,{container:!0,children:O.jsx(hS,{item:!0,children:O.jsx(KH,{href:"/login",variant:"body2",children:" Already have an account? Sign in"})})})]})]})})})}function nye(){const[e,t]=j.useState(""),[n,r]=j.useState(""),{setUser:l}=Eu(),d=Ac(),f=async y=>{y.preventDefault();let a=await sse(e,n);l(a),d("/profile")};return O.jsx(O.Fragment,{children:O.jsx(QH,{component:"main",maxWidth:"xs",children:O.jsxs(Nl,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[O.jsx(gu,{sx:{m:1,bgcolor:"secondary.main"},children:O.jsx(QI,{})}),O.jsx(sa,{component:"h1",variant:"h5",children:"Log In"}),O.jsxs(Nl,{component:"form",onSubmit:f,noValidate:!0,sx:{mt:1},children:[O.jsx(kd,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:y=>t(y.target.value),value:e}),O.jsx(kd,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:y=>r(y.target.value),value:n}),O.jsx(la,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:f,children:"Log In"}),O.jsx(hS,{container:!0,children:O.jsx(hS,{item:!0,children:O.jsx(KH,{href:"/signup",variant:"body2",children:"Don't have an account? Sign Up"})})})]})]})})})}const rye="/assets/Sad-Llama-DPQ5FqJ1.png";function oye(){return O.jsx("div",{style:{backgroundColor:"white",minHeight:"100vh"},children:O.jsxs(Jr,{children:[O.jsx(Ir,{lg:3,md:5,sm:12,children:O.jsx(JT,{src:rye,thumbnail:!0,style:{height:"30rem",width:"25rem",marginTop:"17px",border:"none"}})}),O.jsx(Ir,{className:"justify-content-start",style:{paddingTop:"5rem"},children:O.jsx("h1",{children:"Error: This page does not exist."})})]})})}var JH={exports:{}};(function(e,t){var n={};(function(r,l){e.exports=l()})(pc,function(){var r,l,d;function f(a,E){if(!r)r=E;else if(!l)l=E;else{var C="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+r+")(sharedChunk); ("+l+")(sharedChunk); self.onerror = null;",M={};r(M),d=E(M),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(d.workerUrl=window.URL.createObjectURL(new Blob([C],{type:"text/javascript"})))}}f(["exports"],function(a){var E="3.3.0";let C;const M={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(C==null){const i=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{C=n.API_URL_REGEX!=null?new RegExp(n.API_URL_REGEX):i}catch{C=i}}return C},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!M.API_URL)return null;try{const i=new URL(M.API_URL);return i.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":i.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"};function P(i){return M.API_URL_REGEX.test(i)}function N(i){return i.indexOf("mapbox:")===0}function F(i){return M.API_CDN_URL_REGEX.test(i)}function $(i){return M.API_SPRITE_REGEX.test(i)}function Z(i){return M.API_STYLE_REGEX.test(i)&&!$(i)}const q={create:"create",load:"load",fullLoad:"fullLoad"};function K(i){const o=i.name.split("?")[0];return F(o)&&o.includes("mapbox-gl.js")?"javascript":F(o)&&o.includes("mapbox-gl.css")?"css":function(s){return M.API_FONTS_REGEX.test(s)}(o)?"fontRange":$(o)?"sprite":Z(o)?"style":function(s){return M.API_TILEJSON_REGEX.test(s)}(o)?"tilejson":"other"}function Q(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var te=ie;function ie(i,o,s,u){this.cx=3*i,this.bx=3*(s-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(u-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=o,this.p2x=s,this.p2y=u}ie.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,o){if(o===void 0&&(o=1e-6),i<0)return 0;if(i>1)return 1;for(var s=i,u=0;u<8;u++){var p=this.sampleCurveX(s)-i;if(Math.abs(p)<o)return s;var m=this.sampleCurveDerivativeX(s);if(Math.abs(m)<1e-6)break;s-=p/m}var v=0,x=1;for(s=i,u=0;u<20&&(p=this.sampleCurveX(s),!(Math.abs(p-i)<o));u++)i>p?v=s:x=s,s=.5*(x-v)+v;return s},solve:function(i,o){return this.sampleCurveY(this.solveCurveX(i,o))}};var ue=Q(te),re=me;function me(i,o){this.x=i,this.y=o}me.prototype={clone:function(){return new me(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,o){return this.clone()._rotateAround(i,o)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var o=i.x-this.x,s=i.y-this.y;return o*o+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,o){return Math.atan2(this.x*o-this.y*i,this.x*i+this.y*o)},_matMult:function(i){var o=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=o,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var o=Math.cos(i),s=Math.sin(i),u=s*this.x+o*this.y;return this.x=o*this.x-s*this.y,this.y=u,this},_rotateAround:function(i,o){var s=Math.cos(i),u=Math.sin(i),p=o.y+u*(this.x-o.x)+s*(this.y-o.y);return this.x=o.x+s*(this.x-o.x)-u*(this.y-o.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},me.convert=function(i){return i instanceof me?i:Array.isArray(i)?new me(i[0],i[1]):i};var ve=Q(re);const De=Math.PI/180,je=180/Math.PI;function Be(i){return i*De}function Ue(i){return i*je}const Ge=[[0,0],[1,0],[1,1],[0,1]];function ze(i){if(i<=0)return 0;if(i>=1)return 1;const o=i*i,s=o*i;return 4*(i<.5?s:3*(i-o)+s-.75)}function ot(i,o,s,u){const p=new ue(i,o,s,u);return function(m){return p.solve(m)}}const st=ot(.25,.1,.25,1);function Re(i,o,s){return Math.min(s,Math.max(o,i))}function bt(i,o,s){return(s=Re((s-i)/(o-i),0,1))*s*(3-2*s)}function Lt(i,o,s){const u=s-o,p=((i-o)%u+u)%u+o;return p===o?s:p}function Ct(i,o,s){if(!i.length)return s(null,[]);let u=i.length;const p=new Array(i.length);let m=null;i.forEach((v,x)=>{o(v,(T,S)=>{T&&(m=T),p[x]=S,--u==0&&s(m,p)})})}function Nt(i,...o){for(const s of o)for(const u in s)i[u]=s[u];return i}let tn=1;function Dt(){return tn++}function cn(){return function i(o){return o?(o^Math.random()*(16>>o/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,i)}()}function Mt(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function Vn(i){return!!i&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(i)}function nt(i,o){i.forEach(s=>{o[s]&&(o[s]=o[s].bind(o))})}function Pn(i,o){return i.indexOf(o,i.length-o.length)!==-1}function Un(i,o,s){const u={};for(const p in i)u[p]=o.call(s||this,i[p],p,i);return u}function En(i,o,s){const u={};for(const p in i)o.call(s||this,i[p],p,i)&&(u[p]=i[p]);return u}function bn(i){return Array.isArray(i)?i.map(bn):typeof i=="object"&&i?Un(i,bn):i}const Fn={};function On(i){Fn[i]||(typeof console<"u"&&console.warn(i),Fn[i]=!0)}function an(i,o,s){return(s.y-i.y)*(o.x-i.x)>(o.y-i.y)*(s.x-i.x)}function qr(i){let o=0;for(let s,u,p=0,m=i.length,v=m-1;p<m;v=p++)s=i[p],u=i[v],o+=(u.x-s.x)*(s.y+u.y);return o}function hn([i,o,s]){const u=Be(o+90),p=Be(s);return{x:i*Math.cos(u)*Math.sin(p),y:i*Math.sin(u)*Math.sin(p),z:i*Math.cos(p),azimuthal:o,polar:s}}function Wr(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function go(i){const o={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,u,p,m)=>{const v=p||m;return o[u]=!v||v.toLowerCase(),""}),o["max-age"]){const s=parseInt(o["max-age"],10);isNaN(s)?delete o["max-age"]:o["max-age"]=s}return o}let pr,Pr,to,Mr,mr,eo,Ke=null;function pe(i){try{const o=self[i];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch{return!1}}function we(i,o){return[i[4*o],i[4*o+1],i[4*o+2],i[4*o+3]]}function Pe(i,o,s,u){for(;o<s;){const p=o+s>>1;i[p]<u?o=p+1:s=p}return o}function at(i,o,s,u){for(;o<s;){const p=o+s>>1;i[p]<=u?o=p+1:s=p}return o}function ft(){return pr==null&&(pr=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),pr}const it={now:()=>Mr!==void 0?Mr:performance.now(),setNow(i){Mr=i},restoreNow(){Mr=void 0},frame(i){const o=requestAnimationFrame(i);return{cancel:()=>cancelAnimationFrame(o)}},getImageData(i,o=0){const{width:s,height:u}=i;mr||(mr=document.createElement("canvas"));const p=mr.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return(s>mr.width||u>mr.height)&&(mr.width=s,mr.height=u),p.clearRect(-o,-o,s+2*o,u+2*o),p.drawImage(i,0,0,s,u),p.getImageData(-o,-o,s+2*o,u+2*o)},resolveURL:i=>(Pr||(Pr=document.createElement("a")),Pr.href=i,Pr.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(to==null&&(to=window.matchMedia("(prefers-reduced-motion: reduce)")),to.matches)},hasCanvasFingerprintNoise(){if(eo!==void 0)return eo;if(!ft())return eo=!1,!1;const i=new OffscreenCanvas(85,1),o=i.getContext("2d",{willReadFrequently:!0});let s=0;for(let p=0;p<i.width;++p)o.fillStyle=`rgba(${s++},${s++},${s++}, 255)`,o.fillRect(p,0,1,1);const u=o.getImageData(0,0,i.width,i.height);s=0;for(let p=0;p<u.data.length;++p)if(p%4!=3&&s++!==u.data[p])return eo=!0,!0;return eo=!1,!1}},ct="mapbox-tiles";let tt=500,jt=50,Ut,en;function er(){try{return caches}catch{}}function Fr(){const i=er();i&&!Ut&&(Ut=i.open(ct))}function no(i){const o=i.indexOf("?");if(o<0)return i;const s=["language","worldview"],u=new URLSearchParams,p=new URLSearchParams(i.slice(o));for(const m of s){const v=p.get(m);v&&u.set(m,v)}return`${i.slice(0,o)}?${u.toString()}`}function Vr(i,o){const s=i.indexOf("?");if(s<0)return`${i}?${new URLSearchParams(o).toString()}`;const u=new URLSearchParams(i.slice(s));for(const p in o)u.set(p,o[p]);return`${i.slice(0,s)}?${u.toString()}`}let Cr=1/0;const vr={supported:!1,testSupport:function(i){!pt&&Qe&&(_t?vn(i):Nr=i)}};let Nr,Qe,pt=!1,_t=!1;const Kt=typeof self<"u"?self:{};function vn(i){const o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o);try{if(i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,Qe),i.isContextLost())return;vr.supported=!0}catch{}i.deleteTexture(o),pt=!0}Kt.document&&(Qe=Kt.document.createElement("img"),Qe.onload=function(){Nr&&vn(Nr),Nr=null,_t=!0},Qe.onerror=function(){pt=!0,Nr=null},Qe.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const tr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(tr);class mn extends Error{constructor(o,s,u){s===401&&P(u)&&(o+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(o),this.status=s,this.url=u}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const sn=Wr()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,Ze=function(i,o){if(!(/^file:/.test(s=i.url)||/^file:/.test(sn())&&!/^\w+:/.test(s))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(u,p){const m=new AbortController,v=new Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:sn(),referrerPolicy:u.referrerPolicy,signal:m.signal});let x=!1,T=!1;const S=(A=v.url).indexOf("sku=")>0&&P(A);var A;u.type==="json"&&v.headers.set("Accept","application/json");const I=(V,Y,X)=>{if(T)return;if(V&&V.message!=="SecurityError"&&On(V.toString()),Y&&X)return z(Y);const ne=Date.now();fetch(v).then(ae=>{if(ae.ok){const ye=S?ae.clone():null;return z(ae,ye,ne)}return p(new mn(ae.statusText,ae.status,u.url))}).catch(ae=>{ae.name!=="AbortError"&&p(new Error(`${ae.message} ${u.url}`))})},z=(V,Y,X)=>{(u.type==="arrayBuffer"?V.arrayBuffer():u.type==="json"?V.json():V.text()).then(ne=>{T||(Y&&X&&function(ae,ye,xe){if(Fr(),!Ut)return;const _e=go(ye.headers.get("Cache-Control")||"");if(_e["no-store"])return;const Ie={status:ye.status,statusText:ye.statusText,headers:new Headers};ye.headers.forEach((We,qe)=>Ie.headers.set(qe,We)),_e["max-age"]&&Ie.headers.set("Expires",new Date(xe+1e3*_e["max-age"]).toUTCString());const Me=Ie.headers.get("Expires");if(!Me||new Date(Me).getTime()-xe<42e4)return;let $e=no(ae.url);if(ye.status===206){const We=ae.headers.get("Range");if(!We)return;Ie.status=200,$e=Vr($e,{range:We})}(function(We,qe){if(en===void 0)try{new Response(new ReadableStream),en=!0}catch{en=!1}en?qe(We.body):We.blob().then(qe)})(ye,We=>{const qe=new Response(We,Ie);Fr(),Ut&&Ut.then(rt=>rt.put($e,qe)).catch(rt=>On(rt.message))})}(v,Y,X),x=!0,p(null,ne,V.headers.get("Cache-Control"),V.headers.get("Expires")))}).catch(ne=>{T||p(new Error(ne.message))})};return S?function(V,Y){if(Fr(),!Ut)return Y(null);Ut.then(X=>{let ne=no(V.url);const ae=V.headers.get("Range");ae&&(ne=Vr(ne,{range:ae})),X.match(ne).then(ye=>{const xe=function(_e){if(!_e)return!1;const Ie=new Date(_e.headers.get("Expires")||0),Me=go(_e.headers.get("Cache-Control")||"");return Ie>Date.now()&&!Me["no-cache"]}(ye);X.delete(ne),xe&&X.put(ne,ye.clone()),Y(null,ye,xe)}).catch(Y)}).catch(Y)}(v,I):I(null,null),{cancel:()=>{T=!0,x||m.abort()}}}(i,o);if(Wr()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,o,void 0,!0)}var s;return function(u,p){const m=new XMLHttpRequest;m.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(m.responseType="arraybuffer");for(const v in u.headers)m.setRequestHeader(v,u.headers[v]);return u.type==="json"&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials=u.credentials==="include",m.onerror=()=>{p(new Error(m.statusText))},m.onload=()=>{if((m.status>=200&&m.status<300||m.status===0)&&m.response!==null){let v=m.response;if(u.type==="json")try{v=JSON.parse(m.response)}catch(x){return p(x)}p(null,v,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else p(new mn(m.statusText,m.status,u.url))},m.send(u.body),{cancel:()=>m.abort()}}(i,o)},Je=function(i,o){return Ze(Nt(i,{type:"arrayBuffer"}),o)};function Et(i){const o=document.createElement("a");return o.href=i,o.protocol===location.protocol&&o.host===location.host}const Tt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ut,kt;ut=[],kt=0;const Rt=function(i,o){if(vr.supported&&(i.headers||(i.headers={}),i.headers.accept="image/webp,*/*"),kt>=M.MAX_PARALLEL_IMAGE_REQUESTS){const m={requestParameters:i,callback:o,cancelled:!1,cancel(){this.cancelled=!0}};return ut.push(m),m}kt++;let s=!1;const u=()=>{if(!s)for(s=!0,kt--;ut.length&&kt<M.MAX_PARALLEL_IMAGE_REQUESTS;){const m=ut.shift(),{requestParameters:v,callback:x,cancelled:T}=m;T||(m.cancel=Rt(v,x).cancel)}},p=Je(i,(m,v,x,T)=>{u(),m?o(m):v&&(self.createImageBitmap?function(S,A){const I=new Blob([new Uint8Array(S)],{type:"image/png"});createImageBitmap(I).then(z=>{A(null,z)}).catch(z=>{A(new Error(`Could not load image because of ${z.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(v,(S,A)=>o(S,A,x,T)):function(S,A){const I=new Image;I.onload=()=>{A(null,I),URL.revokeObjectURL(I.src),I.onload=null,requestAnimationFrame(()=>{I.src=Tt})},I.onerror=()=>A(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const z=new Blob([new Uint8Array(S)],{type:"image/png"});I.src=S.byteLength?URL.createObjectURL(z):Tt}(v,(S,A)=>o(S,A,x,T)))});return{cancel:()=>{p.cancel(),u()}}},Bt="01",Yt="NO_ACCESS_TOKEN",Ft=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function An(i){const o=i.match(Ft);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function nr(i){const o=i.params.length?`?${i.params.join("&")}`:"";return`${i.protocol}://${i.authority}${i.path}${o}`}const nn="mapbox.eventData";function Mn(i){if(!i)return null;const o=i.split(".");if(!o||o.length!==3)return null;try{return JSON.parse(decodeURIComponent(atob(o[1]).split("").map(s=>"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class _r{constructor(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(o){const s=Mn(M.ACCESS_TOKEN);let u="";return u=s&&s.u?btoa(encodeURIComponent(s.u).replace(/%([0-9A-F]{2})/g,(p,m)=>String.fromCharCode(+("0x"+m)))):M.ACCESS_TOKEN||"",o?`${nn}.${o}:${u}`:`${nn}:${u}`}fetchEventData(){const o=pe("localStorage"),s=this.getStorageKey(),u=this.getStorageKey("uuid");if(o)try{const p=localStorage.getItem(s);p&&(this.eventData=JSON.parse(p));const m=localStorage.getItem(u);m&&(this.anonId=m)}catch{On("Unable to read from LocalStorage")}}saveEventData(){const o=pe("localStorage"),s=this.getStorageKey(),u=this.getStorageKey("uuid"),p=this.anonId;if(o&&p)try{localStorage.setItem(u,p),Object.keys(this.eventData).length>=1&&localStorage.setItem(s,JSON.stringify(this.eventData))}catch{On("Unable to write to LocalStorage")}}processRequests(o){}postEvent(o,s,u,p){if(!M.EVENTS_URL)return;const m=An(M.EVENTS_URL);m.params.push(`access_token=${p||M.ACCESS_TOKEN||""}`);const v={event:this.type,created:new Date(o).toISOString()},x=s?Nt(v,s):v,T={url:nr(m),headers:{"Content-Type":"text/plain"},body:JSON.stringify([x])};this.pendingRequest=function(S,A){return Ze(Nt(S,{method:"POST"}),A)}(T,S=>{this.pendingRequest=null,u(S),this.saveEventData(),this.processRequests(p)})}queueRequest(o,s){this.queue.push(o),this.processRequests(s)}}const Zr=new class extends _r{constructor(i){super("appUserTurnstile"),this._customAccessToken=i}postTurnstileEvent(i,o){M.EVENTS_URL&&M.ACCESS_TOKEN&&Array.isArray(i)&&i.some(s=>N(s)||P(s))&&this.queueRequest(Date.now(),o)}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const o=Mn(M.ACCESS_TOKEN),s=o?o.u:M.ACCESS_TOKEN;let u=s!==this.eventData.tokenU;Vn(this.anonId)||(this.anonId=cn(),u=!0);const p=this.queue.shift();if(this.eventData.lastSuccess){const m=new Date(this.eventData.lastSuccess),v=new Date(p),x=(p-this.eventData.lastSuccess)/864e5;u=u||x>=1||x<-1||m.getDate()!==v.getDate()}else u=!0;u?this.postEvent(p,{sdkIdentifier:"mapbox-gl-js",sdkVersion:E,skuId:Bt,"enabled.telemetry":!1,userId:this.anonId},m=>{m||(this.eventData.lastSuccess=p,this.eventData.tokenU=s)},i):this.processRequests()}},Xn=Zr.postTurnstileEvent.bind(Zr),ro=new class extends _r{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(i,o,s,u){this.skuToken=o,this.errorCb=u,M.EVENTS_URL&&(s||M.ACCESS_TOKEN?this.queueRequest({id:i,timestamp:Date.now()},s):this.errorCb(new Error(Yt)))}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:s}=this.queue.shift();o&&this.success[o]||(this.anonId||this.fetchEventData(),Vn(this.anonId)||(this.anonId=cn()),this.postEvent(s,{sdkIdentifier:"mapbox-gl-js",sdkVersion:E,skuId:Bt,skuToken:this.skuToken,userId:this.anonId},u=>{u?this.errorCb(u):o&&(this.success[o]=!0)},i))}remove(){this.errorCb=null}},sr=ro.postMapLoadEvent.bind(ro),fo=new class extends _r{constructor(){super("gljs.performance")}postPerformanceEvent(i,o){M.EVENTS_URL&&(i||M.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:o},i)}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,performanceData:s}=this.queue.shift(),u=function(p){const m=performance.getEntriesByType("resource"),v=performance.getEntriesByType("mark"),x=function(V){const Y={};if(V){for(const X in V)if(X!=="other")for(const ne of V[X]){const ae=`${X}ResolveRangeMin`,ye=`${X}ResolveRangeMax`,xe=`${X}RequestCount`,_e=`${X}RequestCachedCount`;Y[ae]=Math.min(Y[ae]||1/0,ne.startTime),Y[ye]=Math.max(Y[ye]||-1/0,ne.responseEnd);const Ie=Me=>{Y[Me]===void 0&&(Y[Me]=0),++Y[Me]};ne.transferSize!==void 0&&ne.transferSize===0&&Ie(_e),Ie(xe)}}return Y}(function(V,Y){const X={};if(V)for(const ne of V){const ae=Y(ne);X[ae]===void 0&&(X[ae]=[]),X[ae].push(ne)}return X}(m,K)),T=window.devicePixelRatio,S=navigator.connection||navigator.mozConnection||navigator.webkitConnection,A=S?S.effectiveType:void 0,I={counters:[],metadata:[],attributes:[]},z=(V,Y,X)=>{X!=null&&V.push({name:Y,value:X.toString()})};for(const V in x)z(I.counters,V,x[V]);if(p.interactionRange[0]!==1/0&&p.interactionRange[1]!==-1/0&&(z(I.counters,"interactionRangeMin",p.interactionRange[0]),z(I.counters,"interactionRangeMax",p.interactionRange[1])),v)for(const V of Object.keys(q)){const Y=q[V],X=v.find(ne=>ne.name===Y);X&&z(I.counters,Y,X.startTime)}return z(I.counters,"visibilityHidden",p.visibilityHidden),z(I.attributes,"style",function(V){if(V)for(const Y of V){const X=Y.name.split("?")[0];if(Z(X)){const ne=X.split("/").slice(-2);if(ne.length===2)return`mapbox://styles/${ne[0]}/${ne[1]}`}}}(m)),z(I.attributes,"terrainEnabled",p.terrainEnabled?"true":"false"),z(I.attributes,"fogEnabled",p.fogEnabled?"true":"false"),z(I.attributes,"projection",p.projection),z(I.attributes,"zoom",p.zoom),z(I.metadata,"devicePixelRatio",T),z(I.metadata,"connectionEffectiveType",A),z(I.metadata,"navigatorUserAgent",navigator.userAgent),z(I.metadata,"screenWidth",window.screen.width),z(I.metadata,"screenHeight",window.screen.height),z(I.metadata,"windowWidth",window.innerWidth),z(I.metadata,"windowHeight",window.innerHeight),z(I.metadata,"mapWidth",p.width/T),z(I.metadata,"mapHeight",p.height/T),z(I.metadata,"webglRenderer",p.renderer),z(I.metadata,"webglVendor",p.vendor),z(I.metadata,"sdkVersion",E),z(I.metadata,"sdkIdentifier","mapbox-gl-js"),I}(s);for(const p of u.metadata);for(const p of u.counters);for(const p of u.attributes);this.postEvent(o,u,()=>{},i)}},Fi=fo.postPerformanceEvent.bind(fo),ni=new class extends _r{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(i,o,s,u){if(!M.API_URL||!M.SESSION_PATH)return;const p=An(M.API_URL+M.SESSION_PATH);p.params.push(`sku=${o||""}`),p.params.push(`access_token=${u||M.ACCESS_TOKEN||""}`);const m={url:nr(p),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(v,x){return Ze(Nt(v,{method:"GET"}),x)}(m,v=>{this.pendingRequest=null,s(v),this.saveEventData(),this.processRequests(u)})}getSessionAPI(i,o,s,u){this.skuToken=o,this.errorCb=u,M.SESSION_PATH&&M.API_URL&&(s||M.ACCESS_TOKEN?this.queueRequest({id:i,timestamp:Date.now()},s):this.errorCb(new Error(Yt)))}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:s}=this.queue.shift();o&&this.success[o]||this.getSession(s,this.skuToken,u=>{u?this.errorCb(u):o&&(this.success[o]=!0)},i)}remove(){this.errorCb=null}},jl=ni.getSessionAPI.bind(ni),el=new Set;function Tu(i,o,s){s[i]&&s[i].indexOf(o)!==-1||(s[i]=s[i]||[],s[i].push(o))}function mm(i,o,s){if(s&&s[i]){const u=s[i].indexOf(o);u!==-1&&s[i].splice(u,1)}}class Rc{constructor(o,s={}){Nt(this,s),this.type=o}}class gm extends Rc{constructor(o,s={}){super("error",Nt({error:o},s))}}class Su{on(o,s){return this._listeners=this._listeners||{},Tu(o,s,this._listeners),this}off(o,s){return mm(o,s,this._listeners),mm(o,s,this._oneTimeListeners),this}once(o,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Tu(o,s,this._oneTimeListeners),this):new Promise(u=>this.once(o,u))}fire(o,s){typeof o=="string"&&(o=new Rc(o,s||{}));const u=o.type;if(this.listens(u)){o.target=this;const p=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const x of p)x.call(this,o);const m=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const x of m)mm(u,x,this._oneTimeListeners),x.call(this,o);const v=this._eventedParent;v&&(Nt(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),v.fire(o))}else o instanceof gm&&console.error(o.error);return this}listens(o){return!!(this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o))}setEventedParent(o,s){return this._eventedParent=o,this._eventedParentData=s,this}}a.y=void 0;var L0={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function df(i){return(i=Math.round(i))<0?0:i>255?255:i}function ym(i){return df(i[i.length-1]==="%"?parseFloat(i)/100*255:parseInt(i))}function tl(i){return(o=i[i.length-1]==="%"?parseFloat(i)/100:parseFloat(i))<0?0:o>1?1:o;var o}function bm(i,o,s){return s<0?s+=1:s>1&&(s-=1),6*s<1?i+(o-i)*s*6:2*s<1?o:3*s<2?i+(o-i)*(2/3-s)*6:i}try{a.y={}.parseCSSColor=function(i){var o,s=i.replace(/ /g,"").toLowerCase();if(s in L0)return L0[s].slice();if(s[0]==="#")return s.length===4?(o=parseInt(s.substr(1),16))>=0&&o<=4095?[(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,1]:null:s.length===7&&(o=parseInt(s.substr(1),16))>=0&&o<=16777215?[(16711680&o)>>16,(65280&o)>>8,255&o,1]:null;var u=s.indexOf("("),p=s.indexOf(")");if(u!==-1&&p+1===s.length){var m=s.substr(0,u),v=s.substr(u+1,p-(u+1)).split(","),x=1;switch(m){case"rgba":if(v.length!==4)return null;x=tl(v.pop());case"rgb":return v.length!==3?null:[ym(v[0]),ym(v[1]),ym(v[2]),x];case"hsla":if(v.length!==4)return null;x=tl(v.pop());case"hsl":if(v.length!==3)return null;var T=(parseFloat(v[0])%360+360)%360/360,S=tl(v[1]),A=tl(v[2]),I=A<=.5?A*(S+1):A+S-A*S,z=2*A-I;return[df(255*bm(z,I,T+1/3)),df(255*bm(z,I,T)),df(255*bm(z,I,T-1/3)),x];default:return null}}return null}}catch{}class Oa{constructor(o,s,u,p=1){this.r=o,this.g=s,this.b=u,this.a=p}static parse(o){if(!o)return;if(o instanceof Oa)return o;if(typeof o!="string")return;const s=a.y(o);return s?new Oa(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3]):void 0}toString(){const[o,s,u,p]=this.toArray();return`rgba(${Math.round(o)},${Math.round(s)},${Math.round(u)},${p})`}toArray(){const{r:o,g:s,b:u,a:p}=this;return p===0?[0,0,0,0]:[255*o/p,255*s/p,255*u/p,p]}toArray01(){const{r:o,g:s,b:u,a:p}=this;return p===0?[0,0,0,0]:[o/p,s/p,u/p,p]}toArray01Scaled(o){const{r:s,g:u,b:p,a:m}=this;return m===0?[0,0,0]:[s/m*o,u/m*o,p/m*o]}toArray01PremultipliedAlpha(){const{r:o,g:s,b:u,a:p}=this;return[o,s,u,p]}toArray01Linear(){const{r:o,g:s,b:u,a:p}=this;return p===0?[0,0,0,0]:[Math.pow(o/p,2.2),Math.pow(s/p,2.2),Math.pow(u/p,2.2),p]}}Oa.black=new Oa(0,0,0,1),Oa.white=new Oa(1,1,1,1),Oa.transparent=new Oa(0,0,0,0),Oa.red=new Oa(1,0,0,1),Oa.blue=new Oa(0,0,1,1);var So=Oa;function yr(i,o,s){return i*(1-s)+o*s}function N0(i,o,s){return i.map((u,p)=>yr(u,o[p],s))}var hf=Object.freeze({__proto__:null,array:N0,color:function(i,o,s){return new So(yr(i.r,o.r,s),yr(i.g,o.g,s),yr(i.b,o.b,s),yr(i.a,o.a,s))},number:yr});function vm(i,...o){for(const s of o)for(const u in s)i[u]=s[u];return i}class Sv extends Error{constructor(o,s){super(s),this.message=s,this.key=o}}var Ms=Sv;class Pd{constructor(o,s=[]){this.parent=o,this.bindings={};for(const[u,p]of s)this.bindings[u]=p}concat(o){return new Pd(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}var Cu=Pd;const nl={kind:"null"},Qt={kind:"number"},jr={kind:"string"},$r={kind:"boolean"},Ga={kind:"color"},ku={kind:"object"},kr={kind:"value"},Au={kind:"collator"},Mu={kind:"formatted"},Od={kind:"resolvedImage"};function bi(i,o){return{kind:"array",itemType:i,N:o}}function Kr(i){if(i.kind==="array"){const o=Kr(i.itemType);return typeof i.N=="number"?`array<${o}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${o}>`}return i.kind}const gn=[nl,Qt,jr,$r,Ga,Mu,ku,bi(kr),Od];function vi(i,o){if(o.kind==="error")return null;if(i.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!vi(i.itemType,o.itemType))&&(typeof i.N!="number"||i.N===o.N))return null}else{if(i.kind===o.kind)return null;if(i.kind==="value"){for(const s of gn)if(!vi(s,o))return null}}return`Expected ${Kr(i)} but found ${Kr(o)} instead.`}function Dn(i,o){return o.some(s=>s.kind===i.kind)}function ds(i,o){return o.some(s=>s==="null"?i===null:s==="array"?Array.isArray(i):s==="object"?i&&!Array.isArray(i)&&typeof i=="object":s===typeof i)}class rr{constructor(o,s,u){this.sensitivity=o?s?"variant":"case":s?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,s){return this.collator.compare(o,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class qa{constructor(o,s,u,p,m){this.text=o.normalize?o.normalize():o,this.image=s,this.scale=u,this.fontStack=p,this.textColor=m}}class qo{constructor(o){this.sections=o}static fromString(o){return new qo([new qa(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(o=>o.text.length!==0||o.image&&o.image.namePrimary.length!==0)}static factory(o){return o instanceof qo?o:qo.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map(o=>o.text).join("")}serialize(){const o=["format"];for(const s of this.sections){if(s.image){o.push(["image",s.image.namePrimary]);continue}o.push(s.text);const u={};s.fontStack&&(u["text-font"]=["literal",s.fontStack.split(",")]),s.scale&&(u["font-scale"]=s.scale),s.textColor&&(u["text-color"]=["rgba"].concat(s.textColor.toArray())),o.push(u)}return o}}class Rn{constructor(o){this.namePrimary=o.namePrimary,o.nameSecondary&&(this.nameSecondary=o.nameSecondary),this.available=o.available}toString(){return this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}static fromString(o,s){return o?new Rn({namePrimary:o,nameSecondary:s,available:!1}):null}serialize(){return this.nameSecondary?["image",this.namePrimary,this.nameSecondary]:["image",this.namePrimary]}}function ff(i,o,s,u){return typeof i=="number"&&i>=0&&i<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof s=="number"&&s>=0&&s<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[i,o,s,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[i,o,s,u]:[i,o,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Za(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof So||i instanceof rr||i instanceof qo||i instanceof Rn)return!0;if(Array.isArray(i)){for(const o of i)if(!Za(o))return!1;return!0}if(typeof i=="object"){for(const o in i)if(!Za(i[o]))return!1;return!0}return!1}function Zo(i){if(i===null)return nl;if(typeof i=="string")return jr;if(typeof i=="boolean")return $r;if(typeof i=="number")return Qt;if(i instanceof So)return Ga;if(i instanceof rr)return Au;if(i instanceof qo)return Mu;if(i instanceof Rn)return Od;if(Array.isArray(i)){const o=i.length;let s;for(const u of i){const p=Zo(u);if(s){if(s===p)continue;s=kr;break}s=p}return bi(s||kr,o)}return ku}function wa(i){const o=typeof i;return i===null?"":o==="string"||o==="number"||o==="boolean"?String(i):i instanceof So||i instanceof qo||i instanceof Rn?i.toString():JSON.stringify(i)}class Ds{constructor(o,s){this.type=o,this.value=s}static parse(o,s){if(o.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!Za(o[1]))return s.error("invalid value");const u=o[1];let p=Zo(u);const m=s.expectedType;return p.kind!=="array"||p.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(p=m),new Ds(p,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof So?["rgba"].concat(this.value.toArray()):this.value instanceof qo?this.value.serialize():this.value}}var Rs=Ds,Ko=class{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}};const pf={string:jr,number:Qt,boolean:$r,object:ku};class mf{constructor(o,s){this.type=o,this.args=s}static parse(o,s){if(o.length<2)return s.error("Expected at least one argument.");let u,p=1;const m=o[0];if(m==="array"){let x,T;if(o.length>2){const S=o[1];if(typeof S!="string"||!(S in pf)||S==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);x=pf[S],p++}else x=kr;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return s.error('The length argument to "array" must be a positive integer literal',2);T=o[2],p++}u=bi(x,T)}else u=pf[m];const v=[];for(;p<o.length;p++){const x=s.parse(o[p],p,kr);if(!x)return null;v.push(x)}return new mf(u,v)}evaluate(o){for(let s=0;s<this.args.length;s++){const u=this.args[s].evaluate(o);if(!vi(this.type,Zo(u)))return u;if(s===this.args.length-1)throw new Ko(`Expected value to be of type ${Kr(this.type)}, but found ${Kr(Zo(u))} instead.`)}return null}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=this.type,s=[o.kind];if(o.kind==="array"){const u=o.itemType;if(u.kind==="string"||u.kind==="number"||u.kind==="boolean"){s.push(u.kind);const p=o.N;(typeof p=="number"||this.args.length>1)&&s.push(p)}}return s.concat(this.args.map(u=>u.serialize()))}}var Is=mf;class Ic{constructor(o){this.type=Mu,this.sections=o}static parse(o,s){if(o.length<2)return s.error("Expected at least one argument.");const u=o[1];if(!Array.isArray(u)&&typeof u=="object")return s.error("First argument must be an image or text section.");const p=[];let m=!1;for(let v=1;v<=o.length-1;++v){const x=o[v];if(m&&typeof x=="object"&&!Array.isArray(x)){m=!1;let T=null;if(x["font-scale"]&&(T=s.parse(x["font-scale"],1,Qt),!T))return null;let S=null;if(x["text-font"]&&(S=s.parse(x["text-font"],1,bi(jr)),!S))return null;let A=null;if(x["text-color"]&&(A=s.parse(x["text-color"],1,Ga),!A))return null;const I=p[p.length-1];I.scale=T,I.font=S,I.textColor=A}else{const T=s.parse(o[v],1,kr);if(!T)return null;const S=T.type.kind;if(S!=="string"&&S!=="value"&&S!=="null"&&S!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,p.push({content:T,scale:null,font:null,textColor:null})}}return new Ic(p)}evaluate(o){return new qo(this.sections.map(s=>{const u=s.content.evaluate(o);return Zo(u)===Od?new qa("",u,null,null,null):new qa(wa(u),null,s.scale?s.scale.evaluate(o):null,s.font?s.font.evaluate(o).join(","):null,s.textColor?s.textColor.evaluate(o):null)}))}eachChild(o){for(const s of this.sections)o(s.content),s.scale&&o(s.scale),s.font&&o(s.font),s.textColor&&o(s.textColor)}outputDefined(){return!1}serialize(){const o=["format"];for(const s of this.sections){o.push(s.content.serialize());const u={};s.scale&&(u["font-scale"]=s.scale.serialize()),s.font&&(u["text-font"]=s.font.serialize()),s.textColor&&(u["text-color"]=s.textColor.serialize()),o.push(u)}return o}}class $l{constructor(o,s){this.type=Od,this.inputPrimary=o,this.inputSecondary=s}static parse(o,s){if(o.length<2)return s.error("Expected two or more arguments.");const u=s.parse(o[1],1,jr);if(!u)return s.error("No image name provided.");if(o.length===2)return new $l(u);const p=s.parse(o[2],1,jr);return p?new $l(u,p):s.error("Secondary image variant is not a string.")}evaluate(o){const s=Rn.fromString(this.inputPrimary.evaluate(o),this.inputSecondary?this.inputSecondary.evaluate(o):void 0);return s&&o.availableImages&&(s.available=o.availableImages.indexOf(s.namePrimary)>-1,s.nameSecondary&&s.available&&o.availableImages&&(s.available=o.availableImages.indexOf(s.nameSecondary)>-1)),s}eachChild(o){o(this.inputPrimary),this.inputSecondary&&o(this.inputSecondary)}outputDefined(){return!1}serialize(){return this.inputSecondary?["image",this.inputPrimary.serialize(),this.inputSecondary.serialize()]:["image",this.inputPrimary.serialize()]}}function Pc(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}const Ka={"to-boolean":$r,"to-color":Ga,"to-number":Qt,"to-string":jr};class Ld{constructor(o,s){this.type=o,this.args=s}static parse(o,s){if(o.length<2)return s.error("Expected at least one argument.");const u=o[0],p=[];let m=nl;if(u==="to-array"){if(!Array.isArray(o[1]))return null;const v=o[1].length;if(s.expectedType){if(s.expectedType.kind!=="array")return s.error(`Expected ${s.expectedType.kind} but found array.`);m=bi(s.expectedType.itemType,v)}else{if(!(v>0&&Za(o[1][0])))return null;m=bi(Zo(o[1][0]),v)}for(let x=0;x<v;x++){const T=o[1][x];let S;if(Pc(T)==="array")S=s.parse(T,void 0,m.itemType);else{const A=Pc(T);if(A!==m.itemType.kind)return s.error(`Expected ${m.itemType.kind} but found ${A}.`);S=s.registry.literal.parse(["literal",T===void 0?null:T],s)}if(!S)return null;p.push(S)}}else{if((u==="to-boolean"||u==="to-string")&&o.length!==2)return s.error("Expected one argument.");m=Ka[u];for(let v=1;v<o.length;v++){const x=s.parse(o[v],v,kr);if(!x)return null;p.push(x)}}return new Ld(m,p)}evaluate(o){if(this.type.kind==="boolean")return!!this.args[0].evaluate(o);if(this.type.kind==="color"){let s,u;for(const p of this.args){if(s=p.evaluate(o),u=null,s instanceof So)return s;if(typeof s=="string"){const m=o.parseColor(s);if(m)return m}else if(Array.isArray(s)&&(u=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:ff(s[0],s[1],s[2],s[3]),!u))return new So(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Ko(u||`Could not parse color from value '${typeof s=="string"?s:String(JSON.stringify(s))}'`)}if(this.type.kind==="number"){let s=null;for(const u of this.args){if(s=u.evaluate(o),s===null)return 0;const p=Number(s);if(!isNaN(p))return p}throw new Ko(`Could not convert ${JSON.stringify(s)} to number.`)}return this.type.kind==="formatted"?qo.fromString(wa(this.args[0].evaluate(o))):this.type.kind==="resolvedImage"?Rn.fromString(wa(this.args[0].evaluate(o))):this.type.kind==="array"?this.args.map(s=>s.evaluate(o)):wa(this.args[0].evaluate(o))}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Ic([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new $l(this.args[0]).serialize();const o=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(s=>{o.push(s.serialize())}),o}}var Ri=Ld;const ji=["Unknown","Point","LineString","Polygon"];var Ul=class{constructor(i,o){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=i,this.options=o}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ji[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(i){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const i=this.featureDistanceData.center,o=this.featureDistanceData.scale,{x:s,y:u}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(s*o-i[0])+this.featureDistanceData.bearing[1]*(u*o-i[1])}return 0}parseColor(i){let o=this._parseColorCache[i];return o||(o=this._parseColorCache[i]=So.parse(i)),o}getConfig(i){return this.options?this.options.get(i):null}};class Ii{constructor(o,s,u,p,m){this.name=o,this.type=s,this._evaluate=u,this.args=p,this._overloadIndex=m}evaluate(o){if(!this._evaluate){const s=Ii.definitions[this.name];this._evaluate=Array.isArray(s)?s[2]:s.overloads[this._overloadIndex][1]}return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(o=>o.serialize()))}static parse(o,s){const u=o[0],p=Ii.definitions[u];if(!p)return s.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(p)?p[0]:p.type,v=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,x=[];let T=null,S=-1;for(const[A,I]of v){if(Array.isArray(A)&&A.length!==o.length-1)continue;x.push(A),S++,T=new Pm(s.registry,s.path,null,s.scope,void 0,s._scope,s.options);const z=[];let V=!1;for(let Y=1;Y<o.length;Y++){const X=o[Y],ne=Array.isArray(A)?A[Y-1]:A.type,ae=T.parse(X,1+z.length,ne);if(!ae){V=!0;break}z.push(ae)}if(!V)if(Array.isArray(A)&&A.length!==z.length)T.error(`Expected ${A.length} arguments, but found ${z.length} instead.`);else{for(let Y=0;Y<z.length;Y++){const X=Array.isArray(A)?A[Y]:A.type,ne=z[Y];T.concat(Y+1).checkSubtype(X,ne.type)}if(T.errors.length===0)return new Ii(u,m,I,z,S)}}if(x.length===1)s.errors.push(...T.errors);else{const A=(x.length?x:v.map(([z])=>z)).map(gf).join(" | "),I=[];for(let z=1;z<o.length;z++){const V=s.parse(o[z],1+I.length);if(!V)return null;I.push(Kr(V.type))}s.error(`Expected arguments of type ${A}, but found (${I.join(", ")}) instead.`)}return null}static register(o,s){Ii.definitions=s;for(const u in s)o[u]=Ii}}function gf(i){return Array.isArray(i)?`(${i.map(Kr).join(", ")})`:`(${Kr(i.type)}...)`}var xr=Ii;class Nd{constructor(o,s,u){this.type=Au,this.locale=u,this.caseSensitive=o,this.diacriticSensitive=s}static parse(o,s){if(o.length!==2)return s.error("Expected one argument.");const u=o[1];if(typeof u!="object"||Array.isArray(u))return s.error("Collator options argument must be an object.");const p=s.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,$r);if(!p)return null;const m=s.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,$r);if(!m)return null;let v=null;return u.locale&&(v=s.parse(u.locale,1,jr),!v)?null:new Nd(p,m,v)}evaluate(o){return new rr(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}serialize(){const o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]}}var zd={exports:{}};zd.exports=function(){function i(u,p,m,v,x){for(;v>m;){if(v-m>600){var T=v-m+1,S=p-m+1,A=Math.log(T),I=.5*Math.exp(2*A/3),z=.5*Math.sqrt(A*I*(T-I)/T)*(S-T/2<0?-1:1);i(u,p,Math.max(m,Math.floor(p-S*I/T+z)),Math.min(v,Math.floor(p+(T-S)*I/T+z)),x)}var V=u[p],Y=m,X=v;for(o(u,m,p),x(u[v],V)>0&&o(u,m,v);Y<X;){for(o(u,Y,X),Y++,X--;x(u[Y],V)<0;)Y++;for(;x(u[X],V)>0;)X--}x(u[m],V)===0?o(u,m,X):o(u,++X,v),X<=p&&(m=X+1),p<=X&&(v=X-1)}}function o(u,p,m){var v=u[p];u[p]=u[m],u[m]=v}function s(u,p){return u<p?-1:u>p?1:0}return function(u,p,m,v,x){i(u,p,m||0,v||u.length-1,x||s)}}();var Ps=Q(zd.exports);function Oc(i){let o=0;for(let s,u,p=0,m=i.length,v=m-1;p<m;v=p++)s=i[p],u=i[v],o+=(u.x-s.x)*(s.y+u.y);return o}function hs(i,o){i[0]=Math.min(i[0],o[0]),i[1]=Math.min(i[1],o[1]),i[2]=Math.max(i[2],o[0]),i[3]=Math.max(i[3],o[1])}function La(i,o){return!(i[0]<=o[0]||i[2]>=o[2]||i[1]<=o[1]||i[3]>=o[3])}function Du(i,o,s){const u=i[0]-o[0],p=i[1]-o[1],m=i[0]-s[0],v=i[1]-s[1];return u*v-m*p==0&&u*m<=0&&p*v<=0}function Lc(i,o,s=!1){let u=!1;for(let x=0,T=o.length;x<T;x++){const S=o[x];for(let A=0,I=S.length,z=I-1;A<I;z=A++){const V=S[z],Y=S[A];if(Du(i,V,Y))return s;(m=V)[1]>(p=i)[1]!=(v=Y)[1]>p[1]&&p[0]<(v[0]-m[0])*(p[1]-m[1])/(v[1]-m[1])+m[0]&&(u=!u)}}var p,m,v;return u}function Vl(i,o,s,u){const p=u[0]-s[0],m=u[1]-s[1],v=(i[0]-s[0])*m-p*(i[1]-s[1]),x=(o[0]-s[0])*m-p*(o[1]-s[1]);return v>0&&x<0||v<0&&x>0}function fs(i,o,s,u){return(p=[u[0]-s[0],u[1]-s[1]])[0]*(m=[o[0]-i[0],o[1]-i[1]])[1]-p[1]*m[0]!=0&&!(!Vl(i,o,s,u)||!Vl(s,u,i,o));var p,m}const rl=8192;function Na(i,o){const s=(180+i[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,p=Math.pow(2,o.z);return[Math.round(s*p*rl),Math.round(u*p*rl)]}function _m(i,o){for(let s=0;s<o.length;s++)if(Lc(i,o[s]))return!0;return!1}function Os(i,o,s){for(const u of s)for(let p=0,m=u.length,v=m-1;p<m;v=p++)if(fs(i,o,u[v],u[p]))return!0;return!1}function fa(i,o){for(let s=0;s<i.length;++s)if(!Lc(i[s],o))return!1;for(let s=0;s<i.length-1;++s)if(Os(i[s],i[s+1],o))return!1;return!0}function xm(i,o){for(let s=0;s<o.length;s++)if(fa(i,o[s]))return!0;return!1}function wm(i,o,s){const u=[];for(let p=0;p<i.length;p++){const m=[];for(let v=0;v<i[p].length;v++){const x=Na(i[p][v],s);hs(o,x),m.push(x)}u.push(m)}return u}function Nc(i,o,s){const u=[];for(let p=0;p<i.length;p++){const m=wm(i[p],o,s);u.push(m)}return u}function Bd(i,o,s,u){if(i[0]<s[0]||i[0]>s[2]){const p=.5*u;let m=i[0]-s[0]>p?-u:s[0]-i[0]>p?u:0;m===0&&(m=i[0]-s[2]>p?-u:s[2]-i[0]>p?u:0),i[0]+=m}hs(o,i)}function zc(i,o,s,u){const p=Math.pow(2,u.z)*rl,m=[u.x*rl,u.y*rl],v=[];if(!i)return v;for(const x of i)for(const T of x){const S=[T.x+m[0],T.y+m[1]];Bd(S,o,s,p),v.push(S)}return v}function Em(i,o,s,u){const p=Math.pow(2,u.z)*rl,m=[u.x*rl,u.y*rl],v=[];if(!i)return v;for(const T of i){const S=[];for(const A of T){const I=[A.x+m[0],A.y+m[1]];hs(o,I),S.push(I)}v.push(S)}if(o[2]-o[0]<=p/2){(x=o)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(const T of v)for(const S of T)Bd(S,o,s,p)}var x;return v}class Bc{constructor(o,s){this.type=$r,this.geojson=o,this.geometries=s}static parse(o,s){if(o.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Za(o[1])){const u=o[1];if(u.type==="FeatureCollection")for(let p=0;p<u.features.length;++p){const m=u.features[p].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Bc(u,u.features[p].geometry)}else if(u.type==="Feature"){const p=u.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Bc(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new Bc(u,u)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(s,u){const p=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],v=s.canonicalID();if(!v)return!1;if(u.type==="Polygon"){const x=wm(u.coordinates,m,v),T=zc(s.geometry(),p,m,v);if(!La(p,m))return!1;for(const S of T)if(!Lc(S,x))return!1}if(u.type==="MultiPolygon"){const x=Nc(u.coordinates,m,v),T=zc(s.geometry(),p,m,v);if(!La(p,m))return!1;for(const S of T)if(!_m(S,x))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(s,u){const p=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],v=s.canonicalID();if(!v)return!1;if(u.type==="Polygon"){const x=wm(u.coordinates,m,v),T=Em(s.geometry(),p,m,v);if(!La(p,m))return!1;for(const S of T)if(!fa(S,x))return!1}if(u.type==="MultiPolygon"){const x=Nc(u.coordinates,m,v),T=Em(s.geometry(),p,m,v);if(!La(p,m))return!1;for(const S of T)if(!xm(S,x))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Fd=Bc,Ru={exports:{}};Ru.exports=function(){var i={kilometers:1,miles:.621371192237334,nauticalmiles:.5399568034557235,meters:1e3,metres:1e3,yards:1093.6132983377079,feet:3280.839895013123,inches:39370.078740157485},o=1/298.257223563,s=o*(2-o),u=Math.PI/180,p=function(S,A){if(S===void 0)throw new Error("No latitude given.");if(A&&!i[A])throw new Error("Unknown unit "+A+". Use one of: "+Object.keys(i).join(", "));var I=6378.137*u*(A?i[A]:1),z=Math.cos(S*u),V=1/(1-s*(1-z*z)),Y=Math.sqrt(V);this.kx=I*Y*z,this.ky=I*Y*V*(1-s)},m={units:{configurable:!0}};function v(S,A){return S[0]===A[0]&&S[1]===A[1]}function x(S,A,I){var z=T(A[0]-S[0]);return[S[0]+z*I,S[1]+(A[1]-S[1])*I]}function T(S){for(;S<-180;)S+=360;for(;S>180;)S-=360;return S}return p.fromTile=function(S,A,I){var z=Math.PI*(1-2*(S+.5)/Math.pow(2,A)),V=Math.atan(.5*(Math.exp(z)-Math.exp(-z)))/u;return new p(V,I)},m.units.get=function(){return i},p.prototype.distance=function(S,A){var I=T(S[0]-A[0])*this.kx,z=(S[1]-A[1])*this.ky;return Math.sqrt(I*I+z*z)},p.prototype.bearing=function(S,A){var I=T(A[0]-S[0])*this.kx;return Math.atan2(I,(A[1]-S[1])*this.ky)/u},p.prototype.destination=function(S,A,I){var z=I*u;return this.offset(S,Math.sin(z)*A,Math.cos(z)*A)},p.prototype.offset=function(S,A,I){return[S[0]+A/this.kx,S[1]+I/this.ky]},p.prototype.lineDistance=function(S){for(var A=0,I=0;I<S.length-1;I++)A+=this.distance(S[I],S[I+1]);return A},p.prototype.area=function(S){for(var A=0,I=0;I<S.length;I++)for(var z=S[I],V=0,Y=z.length,X=Y-1;V<Y;X=V++)A+=T(z[V][0]-z[X][0])*(z[V][1]+z[X][1])*(I?-1:1);return Math.abs(A)/2*this.kx*this.ky},p.prototype.along=function(S,A){var I=0;if(A<=0)return S[0];for(var z=0;z<S.length-1;z++){var V=S[z],Y=S[z+1],X=this.distance(V,Y);if((I+=X)>A)return x(V,Y,(A-(I-X))/X)}return S[S.length-1]},p.prototype.pointToSegmentDistance=function(S,A,I){var z=A[0],V=A[1],Y=T(I[0]-z)*this.kx,X=(I[1]-V)*this.ky,ne=0;return Y===0&&X===0||((ne=(T(S[0]-z)*this.kx*Y+(S[1]-V)*this.ky*X)/(Y*Y+X*X))>1?(z=I[0],V=I[1]):ne>0&&(z+=Y/this.kx*ne,V+=X/this.ky*ne)),Y=T(S[0]-z)*this.kx,X=(S[1]-V)*this.ky,Math.sqrt(Y*Y+X*X)},p.prototype.pointOnLine=function(S,A){for(var I,z,V,Y,X=1/0,ne=0;ne<S.length-1;ne++){var ae=S[ne][0],ye=S[ne][1],xe=T(S[ne+1][0]-ae)*this.kx,_e=(S[ne+1][1]-ye)*this.ky,Ie=0;xe===0&&_e===0||((Ie=(T(A[0]-ae)*this.kx*xe+(A[1]-ye)*this.ky*_e)/(xe*xe+_e*_e))>1?(ae=S[ne+1][0],ye=S[ne+1][1]):Ie>0&&(ae+=xe/this.kx*Ie,ye+=_e/this.ky*Ie));var Me=(xe=T(A[0]-ae)*this.kx)*xe+(_e=(A[1]-ye)*this.ky)*_e;Me<X&&(X=Me,I=ae,z=ye,V=ne,Y=Ie)}return{point:[I,z],index:V,t:Math.max(0,Math.min(1,Y))}},p.prototype.lineSlice=function(S,A,I){var z=this.pointOnLine(I,S),V=this.pointOnLine(I,A);if(z.index>V.index||z.index===V.index&&z.t>V.t){var Y=z;z=V,V=Y}var X=[z.point],ne=z.index+1,ae=V.index;!v(I[ne],X[0])&&ne<=ae&&X.push(I[ne]);for(var ye=ne+1;ye<=ae;ye++)X.push(I[ye]);return v(I[ae],V.point)||X.push(V.point),X},p.prototype.lineSliceAlong=function(S,A,I){for(var z=0,V=[],Y=0;Y<I.length-1;Y++){var X=I[Y],ne=I[Y+1],ae=this.distance(X,ne);if((z+=ae)>S&&V.length===0&&V.push(x(X,ne,(S-(z-ae))/ae)),z>=A)return V.push(x(X,ne,(A-(z-ae))/ae)),V;z>S&&V.push(ne)}return V},p.prototype.bufferPoint=function(S,A){var I=A/this.ky,z=A/this.kx;return[S[0]-z,S[1]-I,S[0]+z,S[1]+I]},p.prototype.bufferBBox=function(S,A){var I=A/this.ky,z=A/this.kx;return[S[0]-z,S[1]-I,S[2]+z,S[3]+I]},p.prototype.insideBBox=function(S,A){return T(S[0]-A[0])>=0&&T(S[0]-A[2])<=0&&S[1]>=A[1]&&S[1]<=A[3]},Object.defineProperties(p,m),p}();var Hl=Q(Ru.exports),Tm={exports:{}};Tm.exports=function(){var i=function(s,u){if(s===void 0&&(s=[]),u===void 0&&(u=o),this.data=s,this.length=this.data.length,this.compare=u,this.length>0)for(var p=(this.length>>1)-1;p>=0;p--)this._down(p)};function o(s,u){return s<u?-1:s>u?1:0}return i.prototype.push=function(s){this.data.push(s),this.length++,this._up(this.length-1)},i.prototype.pop=function(){if(this.length!==0){var s=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),s}},i.prototype.peek=function(){return this.data[0]},i.prototype._up=function(s){for(var u=this.data,p=this.compare,m=u[s];s>0;){var v=s-1>>1,x=u[v];if(p(m,x)>=0)break;u[s]=x,s=v}u[s]=m},i.prototype._down=function(s){for(var u=this.data,p=this.compare,m=this.length>>1,v=u[s];s<m;){var x=1+(s<<1),T=u[x],S=x+1;if(S<this.length&&p(u[S],T)<0&&(x=S,T=u[S]),p(T,v)>=0)break;u[s]=T,s=x}u[s]=v},i}();var Xa=Q(Tm.exports),Xt=8192;function ol(i,o){return o.dist-i.dist}const Sm=100,jd=50;function yf(i){const o=[1/0,1/0,-1/0,-1/0];if(o.length!==i.length)return!1;for(let s=0;s<o.length;s++)if(o[s]!==i[s])return!1;return!0}function Wl(i){return i[1]-i[0]+1}function za(i,o){const s=i[1]>=i[0]&&i[1]<o;return s||console.warn("Distance Expression: Index is out of range"),s}function Iu(i,o){if(i[0]>i[1])return[null,null];const s=Wl(i);if(o){if(s===2)return[i,null];const u=Math.floor(s/2);return[[i[0],i[0]+u],[i[0]+u,i[1]]]}{if(s===1)return[i,null];const u=Math.floor(s/2)-1;return[[i[0],i[0]+u],[i[0]+u+1,i[1]]]}}function Fc(i,o){const s=[1/0,1/0,-1/0,-1/0];if(!za(o,i.length))return s;for(let u=o[0];u<=o[1];++u)hs(s,i[u]);return s}function Pu(i){const o=[1/0,1/0,-1/0,-1/0];for(let s=0;s<i.length;++s)for(let u=0;u<i[s].length;++u)hs(o,i[s][u]);return o}function jc(i,o,s){if(yf(i)||yf(o))return NaN;let u=0,p=0;return i[2]<o[0]&&(u=o[0]-i[2]),i[0]>o[2]&&(u=i[0]-o[2]),i[1]>o[3]&&(p=i[1]-o[3]),i[3]<o[1]&&(p=o[1]-i[3]),s.distance([0,0],[u,p])}function Ou(i){return 360*i-180}function Cv(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}function $c(i,o){const s=Math.pow(2,o.z),u=(i.y/Xt+o.y)/s;return[Ou((i.x/Xt+o.x)/s),Cv(u)]}function Cm(i,o){const s=[];for(let u=0;u<i.length;++u)s.push($c(i[u],o));return s}function bf(i,o,s){const u=s.pointOnLine(o,i).point;return s.distance(i,u)}function z0(i,o,s,u,p){const m=s.slice(u[0],u[1]+1);let v=1/0;for(let x=o[0];x<=o[1];++x)if((v=Math.min(v,bf(i[x],m,p)))===0)return 0;return v}function km(i,o,s,u,p){const m=Math.min(p.pointToSegmentDistance(i,s,u),p.pointToSegmentDistance(o,s,u)),v=Math.min(p.pointToSegmentDistance(s,i,o),p.pointToSegmentDistance(u,i,o));return Math.min(m,v)}function Am(i,o,s,u,p){if(!za(o,i.length)||!za(u,s.length))return NaN;let m=1/0;for(let v=o[0];v<o[1];++v)for(let x=u[0];x<u[1];++x){if(fs(i[v],i[v+1],s[x],s[x+1]))return 0;m=Math.min(m,km(i[v],i[v+1],s[x],s[x+1],p))}return m}function B0(i,o,s,u,p){if(!za(o,i.length)||!za(u,s.length))return NaN;let m=1/0;for(let v=o[0];v<=o[1];++v)for(let x=u[0];x<=u[1];++x)if((m=Math.min(m,p.distance(i[v],s[x])))===0)return m;return m}function $d(i,o,s){if(Lc(i,o,!0))return 0;let u=1/0;for(const p of o){const m=p.length;if(m<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(p[0]!==p[m-1]&&(u=Math.min(u,s.pointToSegmentDistance(i,p[m-1],p[0])))===0||(u=Math.min(u,bf(i,p,s)))===0)return u}return u}function vf(i,o,s,u){if(!za(o,i.length))return NaN;for(let m=o[0];m<=o[1];++m)if(Lc(i[m],s,!0))return 0;let p=1/0;for(let m=o[0];m<o[1];++m)for(const v of s)for(let x=0,T=v.length,S=T-1;x<T;S=x++){if(fs(i[m],i[m+1],v[S],v[x]))return 0;p=Math.min(p,km(i[m],i[m+1],v[S],v[x],u))}return p}function Ud(i,o){for(const s of i)for(let u=0;u<=s.length-1;++u)if(Lc(s[u],o,!0))return!0;return!1}function F0(i,o,s,u=1/0){const p=Pu(i),m=Pu(o);if(u!==1/0&&jc(p,m,s)>=u)return u;if(La(p,m)){if(Ud(i,o))return 0}else if(Ud(o,i))return 0;let v=u;for(const x of i)for(let T=0,S=x.length,A=S-1;T<S;A=T++)for(const I of o)for(let z=0,V=I.length,Y=V-1;z<V;Y=z++){if(fs(x[A],x[T],I[Y],I[z]))return 0;v=Math.min(v,km(x[A],x[T],I[Y],I[z],s))}return v}function _f(i,o,s,u,p,m,v){if(m===null||v===null)return;const x=jc(Fc(u,m),Fc(p,v),s);x<o&&i.push({dist:x,range1:m,range2:v})}function Mm(i,o,s,u,p=1/0){let m=Math.min(u.distance(i[0],s[0][0]),p);if(m===0)return m;const v=new Xa([{dist:0,range1:[0,i.length-1],range2:[0,0]}],ol),x=o?jd:Sm,T=Pu(s);for(;v.length;){const S=v.pop();if(S.dist>=m)continue;const A=S.range1;if(Wl(A)<=x){if(!za(A,i.length))return NaN;if(o){const I=vf(i,A,s,u);if((m=Math.min(m,I))===0)return m}else for(let I=A[0];I<=A[1];++I){const z=$d(i[I],s,u);if((m=Math.min(m,z))===0)return m}}else{const I=Iu(A,o);if(I[0]!==null){const z=jc(Fc(i,I[0]),T,u);z<m&&v.push({dist:z,range1:I[0],range2:[0,0]})}if(I[1]!==null){const z=jc(Fc(i,I[1]),T,u);z<m&&v.push({dist:z,range1:I[1],range2:[0,0]})}}}return m}function Dm(i,o,s,u,p,m=1/0){let v=Math.min(m,p.distance(i[0],s[0]));if(v===0)return v;const x=new Xa([{dist:0,range1:[0,i.length-1],range2:[0,s.length-1]}],ol),T=o?jd:Sm,S=u?jd:Sm;for(;x.length;){const A=x.pop();if(A.dist>=v)continue;const I=A.range1,z=A.range2;if(Wl(I)<=T&&Wl(z)<=S){if(!za(I,i.length)||!za(z,s.length))return NaN;if(o&&u?v=Math.min(v,Am(i,I,s,z,p)):o||u?o&&!u?v=Math.min(v,z0(s,z,i,I,p)):!o&&u&&(v=Math.min(v,z0(i,I,s,z,p))):v=Math.min(v,B0(i,I,s,z,p)),v===0)return v}else{const V=Iu(I,o),Y=Iu(z,u);_f(x,v,p,i,s,V[0],Y[0]),_f(x,v,p,i,s,V[0],Y[1]),_f(x,v,p,i,s,V[1],Y[0]),_f(x,v,p,i,s,V[1],Y[1])}}return v}function Yl(i,o,s,u,p=1/0){let m=p;const v=Fc(i,[0,i.length-1]);for(const x of s)if(!(m!==1/0&&jc(v,Fc(x,[0,x.length-1]),u)>=m)&&(m=Math.min(m,Dm(i,o,x,!0,u,m)),m===0))return m;return m}function xf(i,o,s,u,p=1/0){let m=p;const v=Fc(i,[0,i.length-1]);for(const x of s){if(m!==1/0&&jc(v,Pu(x),u)>=m)continue;const T=Mm(i,o,x,u,m);if(isNaN(T))return T;if((m=Math.min(m,T))===0)return m}return m}function Rm(i){return i==="Point"||i==="MultiPoint"||i==="LineString"||i==="MultiLineString"||i==="Polygon"||i==="MultiPolygon"}class Uc{constructor(o,s){this.type=Qt,this.geojson=o,this.geometries=s}static parse(o,s){if(o.length!==2)return s.error(`'distance' expression requires either one argument, but found ' ${o.length-1} instead.`);if(Za(o[1])){const u=o[1];if(u.type==="FeatureCollection"){for(let p=0;p<u.features.length;++p)if(Rm(u.features[p].geometry.type))return new Uc(u,u.features[p].geometry)}else if(u.type==="Feature"){if(Rm(u.geometry.type))return new Uc(u,u.geometry)}else if(Rm(u.type))return new Uc(u,u)}return s.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(o){const s=o.geometry(),u=o.canonicalID();if(s!=null&&u!=null){if(o.geometryType()==="Point")return function(p,m,v){const x=[];for(const S of p)for(const A of S)x.push($c(A,m));const T=new Hl(x[0][1],"meters");return v.type==="Point"||v.type==="MultiPoint"||v.type==="LineString"?Dm(x,!1,v.type==="Point"?[v.coordinates]:v.coordinates,v.type==="LineString",T):v.type==="MultiLineString"?Yl(x,!1,v.coordinates,T):v.type==="Polygon"||v.type==="MultiPolygon"?xf(x,!1,v.type==="Polygon"?[v.coordinates]:v.coordinates,T):null}(s,u,this.geometries);if(o.geometryType()==="LineString")return function(p,m,v){const x=[];for(const S of p){const A=[];for(const I of S)A.push($c(I,m));x.push(A)}const T=new Hl(x[0][0][1],"meters");if(v.type==="Point"||v.type==="MultiPoint"||v.type==="LineString")return Yl(v.type==="Point"?[v.coordinates]:v.coordinates,v.type==="LineString",x,T);if(v.type==="MultiLineString"){let S=1/0;for(let A=0;A<v.coordinates.length;A++){const I=Yl(v.coordinates[A],!0,x,T,S);if(isNaN(I))return I;if((S=Math.min(S,I))===0)return S}return S}if(v.type==="Polygon"||v.type==="MultiPolygon"){let S=1/0;for(let A=0;A<x.length;A++){const I=xf(x[A],!0,v.type==="Polygon"?[v.coordinates]:v.coordinates,T,S);if(isNaN(I))return I;if((S=Math.min(S,I))===0)return S}return S}return null}(s,u,this.geometries);if(o.geometryType()==="Polygon")return function(p,m,v){const x=[];for(const S of function(A,I){const z=A.length;if(z<=1)return[A];const V=[];let Y,X;for(let ne=0;ne<z;ne++){const ae=Oc(A[ne]);ae!==0&&(A[ne].area=Math.abs(ae),X===void 0&&(X=ae<0),X===ae<0?(Y&&V.push(Y),Y=[A[ne]]):Y.push(A[ne]))}return Y&&V.push(Y),V}(p)){const A=[];for(let I=0;I<S.length;++I)A.push(Cm(S[I],m));x.push(A)}const T=new Hl(x[0][0][0][1],"meters");if(v.type==="Point"||v.type==="MultiPoint"||v.type==="LineString")return xf(v.type==="Point"?[v.coordinates]:v.coordinates,v.type==="LineString",x,T);if(v.type==="MultiLineString"){let S=1/0;for(let A=0;A<v.coordinates.length;A++){const I=xf(v.coordinates[A],!0,x,T,S);if(isNaN(I))return I;if((S=Math.min(S,I))===0)return S}return S}return v.type==="Polygon"||v.type==="MultiPolygon"?function(S,A,I){let z=1/0;for(const V of S)for(const Y of A){const X=F0(V,Y,I,z);if(isNaN(X))return X;if((z=Math.min(z,X))===0)return z}return z}(v.type==="Polygon"?[v.coordinates]:v.coordinates,x,T):null}(s,u,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}var Vd=Uc;function Lu(i,o){switch(i){case"string":return wa(o);case"number":return+o;case"boolean":return!!o;case"color":return So.parse(o);case"formatted":return qo.fromString(wa(o));case"resolvedImage":return Rn.fromString(wa(o))}return o}function wf(i,o,s,u){return u!==void 0&&(i=u*Math.round(i/u)),o!==void 0&&i<o&&(i=o),s!==void 0&&i>s&&(i=s),i}class Hd{constructor(o,s,u){this.type=o,this.key=s,this.scope=u}static parse(o,s){let u=s.expectedType;if(u==null&&(u=kr),o.length<2||o.length>3)return s.error("Invalid number of arguments for 'config' expression.");const p=s.parse(o[1],1);if(!(p instanceof Rs))return s.error("Key name of 'config' expression must be a string literal.");if(o.length>=3){const m=s.parse(o[2],2);return m instanceof Rs?new Hd(u,wa(p.value),wa(m.value)):s.error("Scope of 'config' expression must be a string literal.")}return new Hd(u,wa(p.value))}evaluate(o){const s=[this.key,this.scope,o.scope].filter(Boolean).join(""),u=o.getConfig(s);if(!u)return null;const{type:p,value:m,values:v,minValue:x,maxValue:T,stepValue:S}=u,A=u.default.evaluate(o);let I=A;if(m){const z=o.scope;o.scope=(z||"").split("").slice(1).join(""),I=m.evaluate(o),o.scope=z}return p&&(I=Lu(p,I)),I===void 0||x===void 0&&T===void 0&&S===void 0||(typeof I=="number"?I=wf(I,x,T,S):Array.isArray(I)&&(I=I.map(z=>typeof z=="number"?wf(z,x,T,S):z))),m!==void 0&&I!==void 0&&v&&!v.includes(I)&&(I=A,p&&(I=Lu(p,I))),(p&&p!==this.type||I!==void 0&&Zo(I)!==this.type)&&(I=Lu(this.type.kind,I)),I}eachChild(){}outputDefined(){return!1}serialize(){const o=["config",this.key];return this.scope&&o.concat(this.key),o}}var Vc=Hd;function Nu(i){if(i instanceof xr&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof Fd||i instanceof Vd)return!1;let o=!0;return i.eachChild(s=>{o&&!Nu(s)&&(o=!1)}),o}function Wd(i){if(i instanceof xr&&i.name==="feature-state")return!1;let o=!0;return i.eachChild(s=>{o&&!Wd(s)&&(o=!1)}),o}function zu(i){if(i instanceof Vc)return!1;let o=!0;return i.eachChild(s=>{o&&!zu(s)&&(o=!1)}),o}function Pi(i,o){if(i instanceof xr&&o.indexOf(i.name)>=0)return!1;let s=!0;return i.eachChild(u=>{s&&!Pi(u,o)&&(s=!1)}),s}class Ls{constructor(o,s){this.type=s.type,this.name=o,this.boundExpression=s}static parse(o,s){if(o.length!==2||typeof o[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const u=o[1];return s.scope.has(u)?new Ls(u,s.scope.get(u)):s.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var pa=Ls;class Im{constructor(o,s=[],u,p=new Cu,m=[],v,x){this.registry=o,this.path=s,this.key=s.map(T=>`[${T}]`).join(""),this.scope=p,this.errors=m,this.expectedType=u,this._scope=v,this.options=x}parse(o,s,u,p,m={}){return s||u?this.concat(s,u,p)._parse(o,m):this._parse(o,m)}_parse(o,s){function u(p,m,v){return v==="assert"?new Is(m,[p]):v==="coerce"?new Ri(m,[p]):p}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=typeof o[0]=="string"?this.registry[o[0]]:void 0;if(p){let m=p.parse(o,this);if(!m)return null;if(this.expectedType){const v=this.expectedType,x=m.type;if(v.kind!=="string"&&v.kind!=="number"&&v.kind!=="boolean"&&v.kind!=="object"&&v.kind!=="array"||x.kind!=="value")if(v.kind!=="color"&&v.kind!=="formatted"&&v.kind!=="resolvedImage"||x.kind!=="value"&&x.kind!=="string"){if(this.checkSubtype(v,x))return null}else m=u(m,v,s.typeAnnotation||"coerce");else m=u(m,v,s.typeAnnotation||"assert")}if(!(m instanceof Rs)&&m.type.kind!=="resolvedImage"&&Om(m)){const v=new Ul(this._scope,this.options);try{m=new Rs(m.type,m.evaluate(v))}catch(x){return this.error(x.message),null}}return m}return Ri.parse(["to-array",o],this)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,s,u){const p=typeof o=="number"?this.path.concat(o):this.path,m=u?this.scope.concat(u):this.scope;return new Im(this.registry,p,s||null,m,this.errors,this._scope,this.options)}error(o,...s){const u=`${this.key}${s.map(p=>`[${p}]`).join("")}`;this.errors.push(new Ms(u,o))}checkSubtype(o,s){const u=vi(o,s);return u&&this.error(u),u}}var Pm=Im;function Om(i){if(i instanceof pa)return Om(i.boundExpression);if(i instanceof xr&&i.name==="error"||i instanceof Nd||i instanceof Fd||i instanceof Vd||i instanceof Vc)return!1;const o=i instanceof Ri||i instanceof Is;let s=!0;return i.eachChild(u=>{s=o?s&&Om(u):s&&u instanceof Rs}),!!s&&Nu(i)&&Pi(i,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function Hc(i,o){const s=i.length-1;let u,p,m=0,v=s,x=0;for(;m<=v;)if(x=Math.floor((m+v)/2),u=i[x],p=i[x+1],u<=o){if(x===s||o<p)return x;m=x+1}else{if(!(u>o))throw new Ko("Input is not a number.");v=x-1}return 0}class Ef{constructor(o,s,u){this.type=o,this.input=s,this.labels=[],this.outputs=[];for(const[p,m]of u)this.labels.push(p),this.outputs.push(m)}static parse(o,s){if(o.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return s.error("Expected an even number of arguments.");const u=s.parse(o[1],1,Qt);if(!u)return null;const p=[];let m=null;s.expectedType&&s.expectedType.kind!=="value"&&(m=s.expectedType);for(let v=1;v<o.length;v+=2){const x=v===1?-1/0:o[v],T=o[v+1],S=v,A=v+1;if(typeof x!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',S);if(p.length&&p[p.length-1][0]>=x)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',S);const I=s.parse(T,A,m);if(!I)return null;m=m||I.type,p.push([x,I])}return new Ef(m,u,p)}evaluate(o){const s=this.labels,u=this.outputs;if(s.length===1)return u[0].evaluate(o);const p=this.input.evaluate(o);if(p<=s[0])return u[0].evaluate(o);const m=s.length;return p>=s[m-1]?u[m-1].evaluate(o):u[Hc(s,p)].evaluate(o)}eachChild(o){o(this.input);for(const s of this.outputs)o(s)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){const o=["step",this.input.serialize()];for(let s=0;s<this.labels.length;s++)s>0&&o.push(this.labels[s]),o.push(this.outputs[s].serialize());return o}}var Yd=Ef;const j0=.95047,Gl=1.08883,$0=4/29,Bu=6/29,Tf=3*Bu*Bu,Lm=Bu*Bu*Bu,Sf=Math.PI/180,ps=180/Math.PI;function Cf(i){return i>Lm?Math.pow(i,1/3):i/Tf+$0}function kf(i){return i>Bu?i*i*i:Tf*(i-$0)}function Af(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function Fu(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Mf(i){const o=Fu(i.r),s=Fu(i.g),u=Fu(i.b),p=Cf((.4124564*o+.3575761*s+.1804375*u)/j0),m=Cf((.2126729*o+.7151522*s+.072175*u)/1);return{l:116*m-16,a:500*(p-m),b:200*(m-Cf((.0193339*o+.119192*s+.9503041*u)/Gl)),alpha:i.a}}function Df(i){let o=(i.l+16)/116,s=isNaN(i.a)?o:o+i.a/500,u=isNaN(i.b)?o:o-i.b/200;return o=1*kf(o),s=j0*kf(s),u=Gl*kf(u),new So(Af(3.2404542*s-1.5371385*o-.4985314*u),Af(-.969266*s+1.8760108*o+.041556*u),Af(.0556434*s-.2040259*o+1.0572252*u),i.alpha)}function kv(i,o,s){const u=o-i;return i+s*(u>180||u<-180?u-360*Math.round(u/360):u)}const Qa={forward:Mf,reverse:Df,interpolate:function(i,o,s){return{l:yr(i.l,o.l,s),a:yr(i.a,o.a,s),b:yr(i.b,o.b,s),alpha:yr(i.alpha,o.alpha,s)}}},ql={forward:function(i){const{l:o,a:s,b:u}=Mf(i),p=Math.atan2(u,s)*ps;return{h:p<0?p+360:p,c:Math.sqrt(s*s+u*u),l:o,alpha:i.a}},reverse:function(i){const o=i.h*Sf,s=i.c;return Df({l:i.l,a:Math.cos(o)*s,b:Math.sin(o)*s,alpha:i.alpha})},interpolate:function(i,o,s){return{h:kv(i.h,o.h,s),c:yr(i.c,o.c,s),l:yr(i.l,o.l,s),alpha:yr(i.alpha,o.alpha,s)}}};var Nm=Object.freeze({__proto__:null,hcl:ql,lab:Qa});class ju{constructor(o,s,u,p,m){this.type=o,this.operator=s,this.interpolation=u,this.input=p,this.labels=[],this.outputs=[];for(const[v,x]of m)this.labels.push(v),this.outputs.push(x)}static interpolationFactor(o,s,u,p){let m=0;if(o.name==="exponential")m=$u(s,o.base,u,p);else if(o.name==="linear")m=$u(s,1,u,p);else if(o.name==="cubic-bezier"){const v=o.controlPoints;m=new ue(v[0],v[1],v[2],v[3]).solve($u(s,1,u,p))}return m}static parse(o,s){let[u,p,m,...v]=o;if(!Array.isArray(p)||p.length===0)return s.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const S=p[1];if(typeof S!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:S}}else{if(p[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const S=p.slice(1);if(S.length!==4||S.some(A=>typeof A!="number"||A<0||A>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:S}}}if(o.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(m=s.parse(m,2,Qt),!m)return null;const x=[];let T=null;u==="interpolate-hcl"||u==="interpolate-lab"?T=Ga:s.expectedType&&s.expectedType.kind!=="value"&&(T=s.expectedType);for(let S=0;S<v.length;S+=2){const A=v[S],I=v[S+1],z=S+3,V=S+4;if(typeof A!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(x.length&&x[x.length-1][0]>=A)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',z);const Y=s.parse(I,V,T);if(!Y)return null;T=T||Y.type,x.push([A,Y])}return T.kind==="number"||T.kind==="color"||T.kind==="array"&&T.itemType.kind==="number"&&typeof T.N=="number"?new ju(T,u,p,m,x):s.error(`Type ${Kr(T)} is not interpolatable.`)}evaluate(o){const s=this.labels,u=this.outputs;if(s.length===1)return u[0].evaluate(o);const p=this.input.evaluate(o);if(p<=s[0])return u[0].evaluate(o);const m=s.length;if(p>=s[m-1])return u[m-1].evaluate(o);const v=Hc(s,p),x=ju.interpolationFactor(this.interpolation,p,s[v],s[v+1]),T=u[v].evaluate(o),S=u[v+1].evaluate(o);return this.operator==="interpolate"?hf[this.type.kind.toLowerCase()](T,S,x):this.operator==="interpolate-hcl"?ql.reverse(ql.interpolate(ql.forward(T),ql.forward(S),x)):Qa.reverse(Qa.interpolate(Qa.forward(T),Qa.forward(S),x))}eachChild(o){o(this.input);for(const s of this.outputs)o(s)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){let o;o=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const s=[this.operator,o,this.input.serialize()];for(let u=0;u<this.labels.length;u++)s.push(this.labels[u],this.outputs[u].serialize());return s}}function $u(i,o,s,u){const p=u-s,m=i-s;return p===0?0:o===1?m/p:(Math.pow(o,m)-1)/(Math.pow(o,p)-1)}var Ea=ju;class Uu{constructor(o,s){this.type=o,this.args=s}static parse(o,s){if(o.length<2)return s.error("Expectected at least one argument.");let u=null;const p=s.expectedType;p&&p.kind!=="value"&&(u=p);const m=[];for(const x of o.slice(1)){const T=s.parse(x,1+m.length,u,void 0,{typeAnnotation:"omit"});if(!T)return null;u=u||T.type,m.push(T)}const v=p&&m.some(x=>vi(p,x.type));return new Uu(v?kr:u,m)}evaluate(o){let s,u=null,p=0;for(const m of this.args){if(p++,u=m.evaluate(o),u&&u instanceof Rn&&!u.available&&(s||(s=u),u=null,p===this.args.length))return s;if(u!==null)break}return u}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=["coalesce"];return this.eachChild(s=>{o.push(s.serialize())}),o}}var zm=Uu;class Rf{constructor(o,s){this.type=s.type,this.bindings=[].concat(o),this.result=s}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const s of this.bindings)o(s[1]);o(this.result)}static parse(o,s){if(o.length<4)return s.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const u=[];for(let m=1;m<o.length-1;m+=2){const v=o[m];if(typeof v!="string")return s.error(`Expected string, but found ${typeof v} instead.`,m);if(/[^a-zA-Z0-9_]/.test(v))return s.error("Variable names must contain only alphanumeric characters or '_'.",m);const x=s.parse(o[m+1],m+1);if(!x)return null;u.push([v,x])}const p=s.parse(o[o.length-1],o.length-1,s.expectedType,u);return p?new Rf(u,p):null}outputDefined(){return this.result.outputDefined()}serialize(){const o=["let"];for(const[s,u]of this.bindings)o.push(s,u.serialize());return o.push(this.result.serialize()),o}}var Bm=Rf;class Zl{constructor(o,s,u){this.type=o,this.index=s,this.input=u}static parse(o,s){if(o.length!==3)return s.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const u=s.parse(o[1],1,Qt),p=s.parse(o[2],2,bi(s.expectedType||kr));return u&&p?new Zl(p.type.itemType,u,p):null}evaluate(o){const s=this.index.evaluate(o),u=this.input.evaluate(o);if(s<0)throw new Ko(`Array index out of bounds: ${s} < 0.`);if(s>=u.length)throw new Ko(`Array index out of bounds: ${s} > ${u.length-1}.`);if(s!==Math.floor(s))throw new Ko(`Array index must be an integer, but found ${s} instead.`);return u[s]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Tr=Zl;class If{constructor(o,s){this.type=$r,this.needle=o,this.haystack=s}static parse(o,s){if(o.length!==3)return s.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const u=s.parse(o[1],1,kr),p=s.parse(o[2],2,kr);return u&&p?Dn(u.type,[$r,jr,Qt,nl,kr])?new If(u,p):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Kr(u.type)} instead`):null}evaluate(o){const s=this.needle.evaluate(o),u=this.haystack.evaluate(o);if(u==null)return!1;if(!ds(s,["boolean","string","number","null"]))throw new Ko(`Expected first argument to be of type boolean, string, number or null, but found ${Kr(Zo(s))} instead.`);if(!ds(u,["string","array"]))throw new Ko(`Expected second argument to be of type array or string, but found ${Kr(Zo(u))} instead.`);return u.indexOf(s)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Av=If;class il{constructor(o,s,u){this.type=Qt,this.needle=o,this.haystack=s,this.fromIndex=u}static parse(o,s){if(o.length<=2||o.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const u=s.parse(o[1],1,kr),p=s.parse(o[2],2,kr);if(!u||!p)return null;if(!Dn(u.type,[$r,jr,Qt,nl,kr]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Kr(u.type)} instead`);if(o.length===4){const m=s.parse(o[3],3,Qt);return m?new il(u,p,m):null}return new il(u,p)}evaluate(o){const s=this.needle.evaluate(o),u=this.haystack.evaluate(o);if(!ds(s,["boolean","string","number","null"]))throw new Ko(`Expected first argument to be of type boolean, string, number or null, but found ${Kr(Zo(s))} instead.`);if(!ds(u,["string","array"]))throw new Ko(`Expected second argument to be of type array or string, but found ${Kr(Zo(u))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(o);return u.indexOf(s,p)}return u.indexOf(s)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var U0=il;class Fm{constructor(o,s,u,p,m,v){this.inputType=o,this.type=s,this.input=u,this.cases=p,this.outputs=m,this.otherwise=v}static parse(o,s){if(o.length<5)return s.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return s.error("Expected an even number of arguments.");let u,p;s.expectedType&&s.expectedType.kind!=="value"&&(p=s.expectedType);const m={},v=[];for(let S=2;S<o.length-1;S+=2){let A=o[S];const I=o[S+1];Array.isArray(A)||(A=[A]);const z=s.concat(S);if(A.length===0)return z.error("Expected at least one branch label.");for(const Y of A){if(typeof Y!="number"&&typeof Y!="string")return z.error("Branch labels must be numbers or strings.");if(typeof Y=="number"&&Math.abs(Y)>Number.MAX_SAFE_INTEGER)return z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Y=="number"&&Math.floor(Y)!==Y)return z.error("Numeric branch labels must be integer values.");if(u){if(z.checkSubtype(u,Zo(Y)))return null}else u=Zo(Y);if(m[String(Y)]!==void 0)return z.error("Branch labels must be unique.");m[String(Y)]=v.length}const V=s.parse(I,S,p);if(!V)return null;p=p||V.type,v.push(V)}const x=s.parse(o[1],1,kr);if(!x)return null;const T=s.parse(o[o.length-1],o.length-1,p);return T?x.type.kind!=="value"&&s.concat(1).checkSubtype(u,x.type)?null:new Fm(u,p,x,m,v,T):null}evaluate(o){const s=this.input.evaluate(o);return(Zo(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["match",this.input.serialize()],s=Object.keys(this.cases).sort(),u=[],p={};for(const v of s){const x=p[this.cases[v]];x===void 0?(p[this.cases[v]]=u.length,u.push([this.cases[v],[v]])):u[x][1].push(v)}const m=v=>this.inputType.kind==="number"?Number(v):v;for(const[v,x]of u)o.push(x.length===1?m(x[0]):x.map(m)),o.push(this.outputs[v].serialize());return o.push(this.otherwise.serialize()),o}}var V0=Fm;class Pf{constructor(o,s,u){this.type=o,this.branches=s,this.otherwise=u}static parse(o,s){if(o.length<4)return s.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return s.error("Expected an odd number of arguments.");let u;s.expectedType&&s.expectedType.kind!=="value"&&(u=s.expectedType);const p=[];for(let v=1;v<o.length-1;v+=2){const x=s.parse(o[v],v,$r);if(!x)return null;const T=s.parse(o[v+1],v+1,u);if(!T)return null;p.push([x,T]),u=u||T.type}const m=s.parse(o[o.length-1],o.length-1,u);return m?new Pf(u,p,m):null}evaluate(o){for(const[s,u]of this.branches)if(s.evaluate(o))return u.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[s,u]of this.branches)o(s),o(u);o(this.otherwise)}outputDefined(){return this.branches.every(([o,s])=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["case"];return this.eachChild(s=>{o.push(s.serialize())}),o}}var H0=Pf;class ms{constructor(o,s,u,p){this.type=o,this.input=s,this.beginIndex=u,this.endIndex=p}static parse(o,s){if(o.length<=2||o.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const u=s.parse(o[1],1,kr),p=s.parse(o[2],2,Qt);if(!u||!p)return null;if(!Dn(u.type,[bi(kr),jr,kr]))return s.error(`Expected first argument to be of type array or string, but found ${Kr(u.type)} instead`);if(o.length===4){const m=s.parse(o[3],3,Qt);return m?new ms(u.type,u,p,m):null}return new ms(u.type,u,p)}evaluate(o){const s=this.input.evaluate(o),u=this.beginIndex.evaluate(o);if(!ds(s,["string","array"]))throw new Ko(`Expected first argument to be of type array or string, but found ${Kr(Zo(s))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(o);return s.slice(u,p)}return s.slice(u)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Vu=ms;function Hu(i,o){return i==="=="||i==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function jm(i,o,s,u){return u.compare(o,s)===0}function Wu(i,o,s){const u=i!=="=="&&i!=="!=";return class eW{constructor(m,v,x){this.type=$r,this.lhs=m,this.rhs=v,this.collator=x,this.hasUntypedArgument=m.type.kind==="value"||v.type.kind==="value"}static parse(m,v){if(m.length!==3&&m.length!==4)return v.error("Expected two or three arguments.");const x=m[0];let T=v.parse(m[1],1,kr);if(!T)return null;if(!Hu(x,T.type))return v.concat(1).error(`"${x}" comparisons are not supported for type '${Kr(T.type)}'.`);let S=v.parse(m[2],2,kr);if(!S)return null;if(!Hu(x,S.type))return v.concat(2).error(`"${x}" comparisons are not supported for type '${Kr(S.type)}'.`);if(T.type.kind!==S.type.kind&&T.type.kind!=="value"&&S.type.kind!=="value")return v.error(`Cannot compare types '${Kr(T.type)}' and '${Kr(S.type)}'.`);u&&(T.type.kind==="value"&&S.type.kind!=="value"?T=new Is(S.type,[T]):T.type.kind!=="value"&&S.type.kind==="value"&&(S=new Is(T.type,[S])));let A=null;if(m.length===4){if(T.type.kind!=="string"&&S.type.kind!=="string"&&T.type.kind!=="value"&&S.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(A=v.parse(m[3],3,Au),!A)return null}return new eW(T,S,A)}evaluate(m){const v=this.lhs.evaluate(m),x=this.rhs.evaluate(m);if(u&&this.hasUntypedArgument){const T=Zo(v),S=Zo(x);if(T.kind!==S.kind||T.kind!=="string"&&T.kind!=="number")throw new Ko(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${T.kind}, ${S.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const T=Zo(v),S=Zo(x);if(T.kind!=="string"||S.kind!=="string")return o(m,v,x)}return this.collator?s(m,v,x,this.collator.evaluate(m)):o(m,v,x)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[i];return this.eachChild(v=>{m.push(v.serialize())}),m}}}const $m=Wu("==",function(i,o,s){return o===s},jm),Um=Wu("!=",function(i,o,s){return o!==s},function(i,o,s,u){return!jm(0,o,s,u)}),Mv=Wu("<",function(i,o,s){return o<s},function(i,o,s,u){return u.compare(o,s)<0}),Dv=Wu(">",function(i,o,s){return o>s},function(i,o,s,u){return u.compare(o,s)>0}),W0=Wu("<=",function(i,o,s){return o<=s},function(i,o,s,u){return u.compare(o,s)<=0}),Rv=Wu(">=",function(i,o,s){return o>=s},function(i,o,s,u){return u.compare(o,s)>=0});class Vm{constructor(o,s,u,p,m,v){this.type=jr,this.number=o,this.locale=s,this.currency=u,this.unit=p,this.minFractionDigits=m,this.maxFractionDigits=v}static parse(o,s){if(o.length!==3)return s.error("Expected two arguments.");const u=s.parse(o[1],1,Qt);if(!u)return null;const p=o[2];if(typeof p!="object"||Array.isArray(p))return s.error("NumberFormat options argument must be an object.");let m=null;if(p.locale&&(m=s.parse(p.locale,1,jr),!m))return null;let v=null;if(p.currency&&(v=s.parse(p.currency,1,jr),!v))return null;let x=null;if(p.unit&&(x=s.parse(p.unit,1,jr),!x))return null;let T=null;if(p["min-fraction-digits"]&&(T=s.parse(p["min-fraction-digits"],1,Qt),!T))return null;let S=null;return p["max-fraction-digits"]&&(S=s.parse(p["max-fraction-digits"],1,Qt),!S)?null:new Vm(u,m,v,x,T,S)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(o):void 0,unit:this.unit?this.unit.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.unit&&o(this.unit),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.unit&&(o.unit=this.unit.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]}}class Hm{constructor(o){this.type=Qt,this.input=o}static parse(o,s){if(o.length!==2)return s.error(`Expected 1 argument, but found ${o.length-1} instead.`);const u=s.parse(o[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${Kr(u.type)} instead.`):new Hm(u):null}evaluate(o){const s=this.input.evaluate(o);if(typeof s=="string"||Array.isArray(s))return s.length;throw new Ko(`Expected value to be of type string or array, but found ${Kr(Zo(s))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){const o=["length"];return this.eachChild(s=>{o.push(s.serialize())}),o}}function Y0(i){return function(){i=1831565813+(i|=0)|0;let o=Math.imul(i^i>>>15,1|i);return o=o+Math.imul(o^o>>>7,61|o)^o,((o^o>>>14)>>>0)/4294967296}}const Wm={"==":$m,"!=":Um,">":Dv,"<":Mv,">=":Rv,"<=":W0,array:Is,at:Tr,boolean:Is,case:H0,coalesce:zm,collator:Nd,format:Ic,image:$l,in:Av,"index-of":U0,interpolate:Ea,"interpolate-hcl":Ea,"interpolate-lab":Ea,length:Hm,let:Bm,literal:Rs,match:V0,number:Is,"number-format":Vm,object:Is,slice:Vu,step:Yd,string:Is,"to-boolean":Ri,"to-color":Ri,"to-number":Ri,"to-string":Ri,var:pa,within:Fd,distance:Vd,config:Vc};function Ym(i,[o,s,u,p]){o=o.evaluate(i),s=s.evaluate(i),u=u.evaluate(i);const m=p?p.evaluate(i):1,v=ff(o,s,u,m);if(v)throw new Ko(v);return new So(o/255*m,s/255*m,u/255*m,m)}function Ja(i,[o,s,u,p]){o=o.evaluate(i),s=s.evaluate(i),u=u.evaluate(i);const m=p?p.evaluate(i):1,v=function(S,A,I,z){return typeof S=="number"&&S>=0&&S<=360?typeof A=="number"&&A>=0&&A<=100&&typeof I=="number"&&I>=0&&I<=100?z===void 0||typeof z=="number"&&z>=0&&z<=1?null:`Invalid hsla value [${[S,A,I,z].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof z=="number"?[S,A,I,z]:[S,A,I]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof z=="number"?[S,A,I,z]:[S,A,I]).join(", ")}]: 'h' must be between 0 and 360.`}(o,s,u,m);if(v)throw new Ko(v);const x=`hsla(${o}, ${s}%, ${u}%, ${m})`,T=So.parse(x);if(!T)throw new Ko(`Failed to parse HSLA color: ${x}`);return T}function Of(i,o){return i in o}function Gm(i,o){const s=o[i];return s===void 0?null:s}function Kl(i){return{type:i}}xr.register(Wm,{error:[{kind:"error"},[jr],(i,[o])=>{throw new Ko(o.evaluate(i))}],typeof:[jr,[kr],(i,[o])=>Kr(Zo(o.evaluate(i)))],"to-rgba":[bi(Qt,4),[Ga],(i,[o])=>o.evaluate(i).toArray()],rgb:[Ga,[Qt,Qt,Qt],Ym],rgba:[Ga,[Qt,Qt,Qt,Qt],Ym],hsl:[Ga,[Qt,Qt,Qt],Ja],hsla:[Ga,[Qt,Qt,Qt,Qt],Ja],has:{type:$r,overloads:[[[jr],(i,[o])=>Of(o.evaluate(i),i.properties())],[[jr,ku],(i,[o,s])=>Of(o.evaluate(i),s.evaluate(i))]]},get:{type:kr,overloads:[[[jr],(i,[o])=>Gm(o.evaluate(i),i.properties())],[[jr,ku],(i,[o,s])=>Gm(o.evaluate(i),s.evaluate(i))]]},"feature-state":[kr,[jr],(i,[o])=>Gm(o.evaluate(i),i.featureState||{})],properties:[ku,[],i=>i.properties()],"geometry-type":[jr,[],i=>i.geometryType()],id:[kr,[],i=>i.id()],zoom:[Qt,[],i=>i.globals.zoom],pitch:[Qt,[],i=>i.globals.pitch||0],"distance-from-center":[Qt,[],i=>i.distanceFromCenter()],"measure-light":[Qt,[jr],(i,[o])=>i.measureLight(o.evaluate(i))],"heatmap-density":[Qt,[],i=>i.globals.heatmapDensity||0],"line-progress":[Qt,[],i=>i.globals.lineProgress||0],"raster-value":[Qt,[],i=>i.globals.rasterValue||0],"raster-particle-speed":[Qt,[],i=>i.globals.rasterParticleSpeed||0],"sky-radial-progress":[Qt,[],i=>i.globals.skyRadialProgress||0],accumulated:[kr,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[Qt,Kl(Qt),(i,o)=>{let s=0;for(const u of o)s+=u.evaluate(i);return s}],"*":[Qt,Kl(Qt),(i,o)=>{let s=1;for(const u of o)s*=u.evaluate(i);return s}],"-":{type:Qt,overloads:[[[Qt,Qt],(i,[o,s])=>o.evaluate(i)-s.evaluate(i)],[[Qt],(i,[o])=>-o.evaluate(i)]]},"/":[Qt,[Qt,Qt],(i,[o,s])=>o.evaluate(i)/s.evaluate(i)],"%":[Qt,[Qt,Qt],(i,[o,s])=>o.evaluate(i)%s.evaluate(i)],ln2:[Qt,[],()=>Math.LN2],pi:[Qt,[],()=>Math.PI],e:[Qt,[],()=>Math.E],"^":[Qt,[Qt,Qt],(i,[o,s])=>Math.pow(o.evaluate(i),s.evaluate(i))],sqrt:[Qt,[Qt],(i,[o])=>Math.sqrt(o.evaluate(i))],log10:[Qt,[Qt],(i,[o])=>Math.log(o.evaluate(i))/Math.LN10],ln:[Qt,[Qt],(i,[o])=>Math.log(o.evaluate(i))],log2:[Qt,[Qt],(i,[o])=>Math.log(o.evaluate(i))/Math.LN2],sin:[Qt,[Qt],(i,[o])=>Math.sin(o.evaluate(i))],cos:[Qt,[Qt],(i,[o])=>Math.cos(o.evaluate(i))],tan:[Qt,[Qt],(i,[o])=>Math.tan(o.evaluate(i))],asin:[Qt,[Qt],(i,[o])=>Math.asin(o.evaluate(i))],acos:[Qt,[Qt],(i,[o])=>Math.acos(o.evaluate(i))],atan:[Qt,[Qt],(i,[o])=>Math.atan(o.evaluate(i))],min:[Qt,Kl(Qt),(i,o)=>Math.min(...o.map(s=>s.evaluate(i)))],max:[Qt,Kl(Qt),(i,o)=>Math.max(...o.map(s=>s.evaluate(i)))],abs:[Qt,[Qt],(i,[o])=>Math.abs(o.evaluate(i))],round:[Qt,[Qt],(i,[o])=>{const s=o.evaluate(i);return s<0?-Math.round(-s):Math.round(s)}],floor:[Qt,[Qt],(i,[o])=>Math.floor(o.evaluate(i))],ceil:[Qt,[Qt],(i,[o])=>Math.ceil(o.evaluate(i))],"filter-==":[$r,[jr,kr],(i,[o,s])=>i.properties()[o.value]===s.value],"filter-id-==":[$r,[kr],(i,[o])=>i.id()===o.value],"filter-type-==":[$r,[jr],(i,[o])=>i.geometryType()===o.value],"filter-<":[$r,[jr,kr],(i,[o,s])=>{const u=i.properties()[o.value],p=s.value;return typeof u==typeof p&&u<p}],"filter-id-<":[$r,[kr],(i,[o])=>{const s=i.id(),u=o.value;return typeof s==typeof u&&s<u}],"filter->":[$r,[jr,kr],(i,[o,s])=>{const u=i.properties()[o.value],p=s.value;return typeof u==typeof p&&u>p}],"filter-id->":[$r,[kr],(i,[o])=>{const s=i.id(),u=o.value;return typeof s==typeof u&&s>u}],"filter-<=":[$r,[jr,kr],(i,[o,s])=>{const u=i.properties()[o.value],p=s.value;return typeof u==typeof p&&u<=p}],"filter-id-<=":[$r,[kr],(i,[o])=>{const s=i.id(),u=o.value;return typeof s==typeof u&&s<=u}],"filter->=":[$r,[jr,kr],(i,[o,s])=>{const u=i.properties()[o.value],p=s.value;return typeof u==typeof p&&u>=p}],"filter-id->=":[$r,[kr],(i,[o])=>{const s=i.id(),u=o.value;return typeof s==typeof u&&s>=u}],"filter-has":[$r,[kr],(i,[o])=>o.value in i.properties()],"filter-has-id":[$r,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[$r,[bi(jr)],(i,[o])=>o.value.indexOf(i.geometryType())>=0],"filter-id-in":[$r,[bi(kr)],(i,[o])=>o.value.indexOf(i.id())>=0],"filter-in-small":[$r,[jr,bi(kr)],(i,[o,s])=>s.value.indexOf(i.properties()[o.value])>=0],"filter-in-large":[$r,[jr,bi(kr)],(i,[o,s])=>function(u,p,m,v){for(;m<=v;){const x=m+v>>1;if(p[x]===u)return!0;p[x]>u?v=x-1:m=x+1}return!1}(i.properties()[o.value],s.value,0,s.value.length-1)],all:{type:$r,overloads:[[[$r,$r],(i,[o,s])=>o.evaluate(i)&&s.evaluate(i)],[Kl($r),(i,o)=>{for(const s of o)if(!s.evaluate(i))return!1;return!0}]]},any:{type:$r,overloads:[[[$r,$r],(i,[o,s])=>o.evaluate(i)||s.evaluate(i)],[Kl($r),(i,o)=>{for(const s of o)if(s.evaluate(i))return!0;return!1}]]},"!":[$r,[$r],(i,[o])=>!o.evaluate(i)],"is-supported-script":[$r,[jr],(i,[o])=>{const s=i.globals&&i.globals.isSupportedScript;return!s||s(o.evaluate(i))}],upcase:[jr,[jr],(i,[o])=>o.evaluate(i).toUpperCase()],downcase:[jr,[jr],(i,[o])=>o.evaluate(i).toLowerCase()],concat:[jr,Kl(kr),(i,o)=>o.map(s=>wa(s.evaluate(i))).join("")],"resolved-locale":[jr,[Au],(i,[o])=>o.evaluate(i).resolvedLocale()],random:[Qt,[Qt,Qt,kr],(i,o)=>{const[s,u,p]=o.map(v=>v.evaluate(i));if(s>u||s===u)return s;let m;if(typeof p=="string")m=function(v){let x=0;if(v.length===0)return x;for(let T=0;T<v.length;T++)x=(x<<5)-x+v.charCodeAt(T),x|=0;return x}(p);else{if(typeof p!="number")throw new Ko(`Invalid seed input: ${p}`);m=p}return s+Y0(m)()*(u-s)}]});var Wc=Wm;function qm(i){return{result:"success",value:i}}function Yc(i){return{result:"error",value:i}}function Zm(i,o){return!!i&&!!i.parameters&&i.parameters.indexOf(o)>-1}function Lf(i){return i["property-type"]==="data-driven"}function G0(i){return Zm(i.expression,"measure-light")}function Gd(i){return Zm(i.expression,"zoom")}function Km(i){return!!i.expression&&i.expression.interpolated}function Nf(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function q0(i){return i}function Xm(i,o){const s=o.type==="color",u=i.stops&&typeof i.stops[0][0]=="object",p=u||!(u||i.property!==void 0),m=i.type||(Km(o)?"exponential":"interval");if(s&&((i=vm({},i)).stops&&(i.stops=i.stops.map(S=>[S[0],So.parse(S[1])])),i.default=So.parse(i.default?i.default:o.default)),i.colorSpace&&i.colorSpace!=="rgb"&&!Nm[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let v,x,T;if(m==="exponential")v=Qm;else if(m==="interval")v=Pv;else if(m==="categorical"){v=Iv,x=Object.create(null);for(const S of i.stops)x[S[0]]=S[1];T=typeof i.stops[0][0]}else{if(m!=="identity")throw new Error(`Unknown function type "${m}"`);v=Jm}if(u){const S={},A=[];for(let V=0;V<i.stops.length;V++){const Y=i.stops[V],X=Y[0].zoom;S[X]===void 0&&(S[X]={zoom:X,type:i.type,property:i.property,default:i.default,stops:[]},A.push(X)),S[X].stops.push([Y[0].value,Y[1]])}const I=[];for(const V of A)I.push([S[V].zoom,Xm(S[V],o)]);const z={name:"linear"};return{kind:"composite",interpolationType:z,interpolationFactor:Ea.interpolationFactor.bind(void 0,z),zoomStops:I.map(V=>V[0]),evaluate:({zoom:V},Y)=>Qm({stops:I,base:i.base},o,V).evaluate(V,Y)}}if(p){const S=m==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:S,interpolationFactor:Ea.interpolationFactor.bind(void 0,S),zoomStops:i.stops.map(A=>A[0]),evaluate:({zoom:A})=>v(i,o,A,x,T)}}return{kind:"source",evaluate(S,A){const I=A&&A.properties?A.properties[i.property]:void 0;return I===void 0?Yu(i.default,o.default):v(i,o,I,x,T)}}}function Yu(i,o,s){return i!==void 0?i:o!==void 0?o:s!==void 0?s:void 0}function Iv(i,o,s,u,p){return Yu(typeof s===p?u[s]:void 0,i.default,o.default)}function Pv(i,o,s){if(Pc(s)!=="number")return Yu(i.default,o.default);const u=i.stops.length;if(u===1||s<=i.stops[0][0])return i.stops[0][1];if(s>=i.stops[u-1][0])return i.stops[u-1][1];const p=Hc(i.stops.map(m=>m[0]),s);return i.stops[p][1]}function Qm(i,o,s){const u=i.base!==void 0?i.base:1;if(Pc(s)!=="number")return Yu(i.default,o.default);const p=i.stops.length;if(p===1||s<=i.stops[0][0])return i.stops[0][1];if(s>=i.stops[p-1][0])return i.stops[p-1][1];const m=Hc(i.stops.map(A=>A[0]),s),v=function(A,I,z,V){const Y=V-z,X=A-z;return Y===0?0:I===1?X/Y:(Math.pow(I,X)-1)/(Math.pow(I,Y)-1)}(s,u,i.stops[m][0],i.stops[m+1][0]),x=i.stops[m][1],T=i.stops[m+1][1];let S=hf[o.type]||q0;if(i.colorSpace&&i.colorSpace!=="rgb"){const A=Nm[i.colorSpace];S=(I,z)=>A.reverse(A.interpolate(A.forward(I),A.forward(z),v))}return typeof x.evaluate=="function"?{evaluate(...A){const I=x.evaluate.apply(void 0,A),z=T.evaluate.apply(void 0,A);if(I!==void 0&&z!==void 0)return S(I,z,v)}}:S(x,T,v)}function Jm(i,o,s){return o.type==="color"?s=So.parse(s):o.type==="formatted"?s=qo.fromString(s.toString()):o.type==="resolvedImage"?s=Rn.fromString(s.toString()):Pc(s)===o.type||o.type==="enum"&&o.values[s]||(s=void 0),Yu(s,i.default,o.default)}class qd{constructor(o,s,u,p){this.expression=o,this._warningHistory={},this._evaluator=new Ul(u,p),this._defaultValue=s?function(m){return m.type==="color"&&(Nf(m.default)||Array.isArray(m.default))?new So(0,0,0,0):m.type==="color"?So.parse(m.default)||null:m.default===void 0?null:m.default}(s):null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(o,s,u,p,m,v,x,T){return this._evaluator.globals=o,this._evaluator.feature=s,this._evaluator.featureState=u,this._evaluator.canonical=p||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=v,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=T||null,this.expression.evaluate(this._evaluator)}evaluate(o,s,u,p,m,v,x,T){this._evaluator.globals=o,this._evaluator.feature=s||null,this._evaluator.featureState=u||null,this._evaluator.canonical=p||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=v||null,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=T||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new Ko(`Expected value to be one of ${Object.keys(this._enumValues).map(A=>JSON.stringify(A)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function Xl(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in Wc}function Zd(i,o,s,u){const p=new Pm(Wc,[],o?function(v){const x={color:Ga,string:jr,number:Qt,enum:jr,boolean:$r,formatted:Mu,resolvedImage:Od};return v.type==="array"?bi(x[v.value]||kr,v.length):x[v.type]}(o):void 0,void 0,void 0,s,u),m=p.parse(i,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?qm(new qd(m,o,s,u)):Yc(p.errors)}class Kd{constructor(o,s,u){this.kind=o,this._styleExpression=s,this.isLightConstant=u,this.isStateDependent=o!=="constant"&&!Wd(s.expression),this.isConfigDependent=!zu(s.expression)}evaluateWithoutErrorHandling(o,s,u,p,m,v){return this._styleExpression.evaluateWithoutErrorHandling(o,s,u,p,m,v)}evaluate(o,s,u,p,m,v){return this._styleExpression.evaluate(o,s,u,p,m,v)}}class Xd{constructor(o,s,u,p,m){this.kind=o,this.zoomStops=u,this._styleExpression=s,this.isStateDependent=o!=="camera"&&!Wd(s.expression),this.isLightConstant=m,this.isConfigDependent=!zu(s.expression),this.interpolationType=p}evaluateWithoutErrorHandling(o,s,u,p,m,v){return this._styleExpression.evaluateWithoutErrorHandling(o,s,u,p,m,v)}evaluate(o,s,u,p,m,v){return this._styleExpression.evaluate(o,s,u,p,m,v)}interpolationFactor(o,s,u){return this.interpolationType?Ea.interpolationFactor(this.interpolationType,o,s,u):0}}function eg(i,o,s,u){if((i=Zd(i,o,s,u)).result==="error")return i;const p=i.value.expression,m=Nu(p);if(!m&&!Lf(o))return Yc([new Ms("","data expressions not supported")]);const v=Pi(p,["zoom","pitch","distance-from-center"]);if(!v&&!Gd(o))return Yc([new Ms("","zoom expressions not supported")]);const x=Pi(p,["measure-light"]);if(!x&&!G0(o))return Yc([new Ms("","measure-light expression not supported")]);const T=o.expression&&o.expression.relaxZoomRestriction,S=Qd(p);return S||v||T?S instanceof Ms?Yc([S]):S instanceof Ea&&!Km(o)?Yc([new Ms("",'"interpolate" expressions cannot be used with this property')]):qm(S?new Xd(m?"camera":"composite",i.value,S.labels,S instanceof Ea?S.interpolation:void 0,x):new Kd(m?"constant":"source",i.value,x)):Yc([new Ms("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class ta{constructor(o,s){this._parameters=o,this._specification=s,vm(this,Xm(this._parameters,this._specification))}static deserialize(o){return new ta(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Qd(i){let o=null;if(i instanceof Bm)o=Qd(i.result);else if(i instanceof zm){for(const s of i.args)if(o=Qd(s),o)break}else(i instanceof Yd||i instanceof Ea)&&i.input instanceof xr&&i.input.name==="zoom"&&(o=i);return o instanceof Ms||i.eachChild(s=>{const u=Qd(s);u instanceof Ms?o=u:o&&u&&o!==u&&(o=new Ms("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}var Ov=ys,gs=3;function ys(i,o,s){var u=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;var p=new Int32Array(this.arrayBuffer);i=p[0],this.d=(o=p[1])+2*(s=p[2]);for(var m=0;m<this.d*this.d;m++){var v=p[gs+m],x=p[gs+m+1];u.push(v===x?null:p.subarray(v,x))}var T=p[gs+u.length+1];this.keys=p.subarray(p[gs+u.length],T),this.bboxes=p.subarray(T),this.insert=this._insertReadonly}else{this.d=o+2*s;for(var S=0;S<this.d*this.d;S++)u.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=i,this.padding=s,this.scale=o/i,this.uid=0;var A=s/o*i;this.min=-A,this.max=i+A}ys.prototype.insert=function(i,o,s,u,p){this._forEachCell(o,s,u,p,this._insertCell,this.uid++),this.keys.push(i),this.bboxes.push(o),this.bboxes.push(s),this.bboxes.push(u),this.bboxes.push(p)},ys.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ys.prototype._insertCell=function(i,o,s,u,p,m){this.cells[p].push(m)},ys.prototype.query=function(i,o,s,u,p){var m=this.min,v=this.max;if(i<=m&&o<=m&&v<=s&&v<=u&&!p)return Array.prototype.slice.call(this.keys);var x=[];return this._forEachCell(i,o,s,u,this._queryCell,x,{},p),x},ys.prototype._queryCell=function(i,o,s,u,p,m,v,x){var T=this.cells[p];if(T!==null)for(var S=this.keys,A=this.bboxes,I=0;I<T.length;I++){var z=T[I];if(v[z]===void 0){var V=4*z;(x?x(A[V+0],A[V+1],A[V+2],A[V+3]):i<=A[V+2]&&o<=A[V+3]&&s>=A[V+0]&&u>=A[V+1])?(v[z]=!0,m.push(S[z])):v[z]=!1}}},ys.prototype._forEachCell=function(i,o,s,u,p,m,v,x){for(var T=this._convertToCellCoord(i),S=this._convertToCellCoord(o),A=this._convertToCellCoord(s),I=this._convertToCellCoord(u),z=T;z<=A;z++)for(var V=S;V<=I;V++){var Y=this.d*V+z;if((!x||x(this._convertFromCellCoord(z),this._convertFromCellCoord(V),this._convertFromCellCoord(z+1),this._convertFromCellCoord(V+1)))&&p.call(this,i,o,s,u,Y,m,v,x))return}},ys.prototype._convertFromCellCoord=function(i){return(i-this.padding)/this.scale},ys.prototype._convertToCellCoord=function(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))},ys.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var i=this.cells,o=gs+this.cells.length+1+1,s=0,u=0;u<this.cells.length;u++)s+=this.cells[u].length;var p=new Int32Array(o+s+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;for(var m=o,v=0;v<i.length;v++){var x=i[v];p[gs+v]=m,p.set(x,m),m+=x.length}return p[gs+i.length]=m,p.set(this.keys,m),p[gs+i.length+1]=m+=this.keys.length,p.set(this.bboxes,m),m+=this.bboxes.length,p.buffer};var Ns=Q(Ov);const Gu={};function rn(i,o,s={}){Object.defineProperty(i,"_classRegistryKey",{value:o,writeable:!1}),Gu[o]={klass:i,omit:s.omit||[]}}rn(Object,"Object"),Ns.serialize=function(i,o){const s=i.toArrayBuffer();return o&&o.add(s),{buffer:s}},Ns.deserialize=function(i){return new Ns(i.buffer)},Object.defineProperty(Ns,"name",{value:"Grid"}),rn(Ns,"Grid"),rn(So,"Color"),rn(Error,"Error"),rn(qo,"Formatted"),rn(qa,"FormattedSection"),rn(mn,"AJAXError"),rn(Rn,"ResolvedImage"),rn(ta,"StylePropertyFunction"),rn(qd,"StyleExpression",{omit:["_evaluator"]}),rn(Xd,"ZoomDependentExpression"),rn(Kd,"ZoomConstantExpression"),rn(xr,"CompoundExpression",{omit:["_evaluate"]});for(const i in Wc)Gu[Wc[i]._classRegistryKey]||rn(Wc[i],`Expression${i}`);function Z0(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function zf(i){return self.ImageBitmap&&i instanceof ImageBitmap}function Ql(i,o){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp)return i;if(Z0(i)||zf(i))return o&&o.add(i),i;if(ArrayBuffer.isView(i)){const s=i;return o&&o.add(s.buffer),s}if(i instanceof ImageData)return o&&o.add(i.data.buffer),i;if(Array.isArray(i)){const s=[];for(const u of i)s.push(Ql(u,o));return s}if(i instanceof Map){const s={$name:"Map"};for(const[u,p]of i.entries())s[u]=Ql(p);return s}if(typeof i=="object"){const s=i.constructor,u=s._classRegistryKey;if(!u)throw new Error(`can't serialize object of unregistered class ${u}`);const p=s.serialize?s.serialize(i,o):{};if(!s.serialize){for(const m in i)i.hasOwnProperty(m)&&(Gu[u].omit.indexOf(m)>=0||(p[m]=Ql(i[m],o)));i instanceof Error&&(p.message=i.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(p.$name=u),p}throw new Error("can't serialize object of type "+typeof i)}function Gc(i){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||Z0(i)||zf(i)||ArrayBuffer.isView(i)||i instanceof ImageData)return i;if(Array.isArray(i))return i.map(Gc);if(typeof i=="object"){const o=i.$name||"Object";if(o==="Map"){const p=new Map;for(const m of Object.keys(i))m!=="$name"&&p.set(m,Gc(i[m]));return p}const{klass:s}=Gu[o];if(!s)throw new Error(`can't deserialize unregistered class ${o}`);if(s.deserialize)return s.deserialize(i);const u=Object.create(s.prototype);for(const p of Object.keys(i))p!=="$name"&&(u[p]=Gc(i[p]));return u}throw new Error("can't deserialize object of type "+typeof i)}const un={"Latin-1 Supplement":i=>i>=128&&i<=255,Arabic:i=>i>=1536&&i<=1791,"Arabic Supplement":i=>i>=1872&&i<=1919,"Arabic Extended-A":i=>i>=2208&&i<=2303,"Hangul Jamo":i=>i>=4352&&i<=4607,"Unified Canadian Aboriginal Syllabics":i=>i>=5120&&i<=5759,Khmer:i=>i>=6016&&i<=6143,"Unified Canadian Aboriginal Syllabics Extended":i=>i>=6320&&i<=6399,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"CJK Radicals Supplement":i=>i>=11904&&i<=12031,"Kangxi Radicals":i=>i>=12032&&i<=12255,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Hiragana:i=>i>=12352&&i<=12447,Katakana:i=>i>=12448&&i<=12543,Bopomofo:i=>i>=12544&&i<=12591,"Hangul Compatibility Jamo":i=>i>=12592&&i<=12687,Kanbun:i=>i>=12688&&i<=12703,"Bopomofo Extended":i=>i>=12704&&i<=12735,"CJK Strokes":i=>i>=12736&&i<=12783,"Katakana Phonetic Extensions":i=>i>=12784&&i<=12799,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"CJK Unified Ideographs Extension A":i=>i>=13312&&i<=19903,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"CJK Unified Ideographs":i=>i>=19968&&i<=40959,"Yi Syllables":i=>i>=40960&&i<=42127,"Yi Radicals":i=>i>=42128&&i<=42191,"Hangul Jamo Extended-A":i=>i>=43360&&i<=43391,"Hangul Syllables":i=>i>=44032&&i<=55215,"Hangul Jamo Extended-B":i=>i>=55216&&i<=55295,"Private Use Area":i=>i>=57344&&i<=63743,"CJK Compatibility Ideographs":i=>i>=63744&&i<=64255,"Arabic Presentation Forms-A":i=>i>=64336&&i<=65023,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Arabic Presentation Forms-B":i=>i>=65136&&i<=65279,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519,"CJK Unified Ideographs Extension B":i=>i>=131072&&i<=173791};function al(i){for(const o of i)if(Jd(o.charCodeAt(0)))return!0;return!1}function Lv(i){for(const o of i)if(!K0(o.charCodeAt(0)))return!1;return!0}function K0(i){return!(un.Arabic(i)||un["Arabic Supplement"](i)||un["Arabic Extended-A"](i)||un["Arabic Presentation Forms-A"](i)||un["Arabic Presentation Forms-B"](i))}function Jd(i){return!(i!==746&&i!==747&&(i<4352||!(un["Bopomofo Extended"](i)||un.Bopomofo(i)||un["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||un["CJK Compatibility Ideographs"](i)||un["CJK Compatibility"](i)||un["CJK Radicals Supplement"](i)||un["CJK Strokes"](i)||!(!un["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||un["CJK Unified Ideographs Extension A"](i)||un["CJK Unified Ideographs"](i)||un["Enclosed CJK Letters and Months"](i)||un["Hangul Compatibility Jamo"](i)||un["Hangul Jamo Extended-A"](i)||un["Hangul Jamo Extended-B"](i)||un["Hangul Jamo"](i)||un["Hangul Syllables"](i)||un.Hiragana(i)||un["Ideographic Description Characters"](i)||un.Kanbun(i)||un["Kangxi Radicals"](i)||un["Katakana Phonetic Extensions"](i)||un.Katakana(i)&&i!==12540||!(!un["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!un["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||un["Unified Canadian Aboriginal Syllabics"](i)||un["Unified Canadian Aboriginal Syllabics Extended"](i)||un["Vertical Forms"](i)||un["Yijing Hexagram Symbols"](i)||un["Yi Syllables"](i)||un["Yi Radicals"](i))))}function X0(i){return!(Jd(i)||function(o){return!!(un["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||un["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||un["Letterlike Symbols"](o)||un["Number Forms"](o)||un["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||un["Control Pictures"](o)&&o!==9251||un["Optical Character Recognition"](o)||un["Enclosed Alphanumerics"](o)||un["Geometric Shapes"](o)||un["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||un["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||un["CJK Symbols and Punctuation"](o)||un.Katakana(o)||un["Private Use Area"](o)||un["CJK Compatibility Forms"](o)||un["Small Form Variants"](o)||un["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)}(i))}function Q0(i){return i>=1424&&i<=2303||un["Arabic Presentation Forms-A"](i)||un["Arabic Presentation Forms-B"](i)}function J0(i,o){return!(!o&&Q0(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||un.Khmer(i))}function tg(i){for(const o of i)if(Q0(o.charCodeAt(0)))return!0;return!1}const ng="deferred",rg="loading",sl="loaded";let og=null,Ba="unavailable",na=null;const ig=function(i){i&&typeof i=="string"&&i.indexOf("NetworkError")>-1&&(Ba="error"),og&&og(i)};function ag(){sg.fire(new Rc("pluginStateChange",{pluginStatus:Ba,pluginURL:na}))}const sg=new Su,ll=function(){return Ba},Bf=function(){if(Ba!==ng||!na)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ba=rg,ag(),na&&Je({url:na},i=>{i?ig(i):(Ba=sl,ag())})},Ta={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ba===sl||Ta.applyArabicShaping!=null,isLoading:()=>Ba===rg,setState(i){Ba=i.pluginStatus,na=i.pluginURL},isParsed:()=>Ta.applyArabicShaping!=null&&Ta.processBidirectionalText!=null&&Ta.processStyledBidirectionalText!=null,getPluginURL:()=>na};class xo{constructor(o,s){this.zoom=o,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.transition=s.transition,this.pitch=s.pitch,this.brightness=s.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(o){return function(s,u){for(const p of s)if(!J0(p.charCodeAt(0),u))return!1;return!0}(o,Ta.isLoaded())}}class eh{constructor(o,s,u,p){this.property=o,this.value=s,this.expression=function(m,v,x,T){if(Nf(m))return new ta(m,v);if(Xl(m)||Array.isArray(m)&&m.length>0){const S=eg(m,v,x,T);if(S.result==="error")throw new Error(S.value.map(A=>`${A.key}: ${A.message}`).join(", "));return S.value}{let S=m;return typeof m=="string"&&v.type==="color"&&(S=So.parse(m)),{kind:"constant",isConfigDependent:!1,evaluate:()=>S}}}(s===void 0?o.specification.default:s,o.specification,u,p)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,s,u){return this.property.possiblyEvaluate(this,o,s,u)}}class lg{constructor(o,s,u){this.property=o,this.value=new eh(o,void 0,s,u)}transitioned(o,s){return new cg(this.property,this.value,s,Nt({},o.transition,this.transition),o.now)}untransitioned(){return new cg(this.property,this.value,null,{},0)}}class cl{constructor(o,s,u){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues),this._scope=s,this._options=u,this.isConfigDependent=!1}getValue(o){return bn(this._values[o].value.value)}setValue(o,s){this._values.hasOwnProperty(o)||(this._values[o]=new lg(this._values[o].property,this._scope,this._options)),this._values[o].value=new eh(this._values[o].property,s===null?void 0:bn(s),this._scope,this._options),this.isConfigDependent=this.isConfigDependent||this._values[o].value.expression.isConfigDependent}setTransitionOrValue(o,s){s&&(this._options=s);const u=this._properties.properties;if(o)for(const p in o){const m=o[p];if(Pn(p,"-transition")){const v=p.slice(0,-11);u[v]&&this.setTransition(v,m)}else u[p]&&this.setValue(p,m)}}getTransition(o){return bn(this._values[o].transition)}setTransition(o,s){this._values.hasOwnProperty(o)||(this._values[o]=new lg(this._values[o].property)),this._values[o].transition=bn(s)||void 0}serialize(){const o={};for(const s of Object.keys(this._values)){const u=this.getValue(s);u!==void 0&&(o[s]=u);const p=this.getTransition(s);p!==void 0&&(o[`${s}-transition`]=p)}return o}transitioned(o,s){const u=new Jl(this._properties);for(const p of Object.keys(this._values))u._values[p]=this._values[p].transitioned(o,s._values[p]);return u}untransitioned(){const o=new Jl(this._properties);for(const s of Object.keys(this._values))o._values[s]=this._values[s].untransitioned();return o}}class cg{constructor(o,s,u,p,m){const v=p.delay||0,x=p.duration||0;m=m||0,this.property=o,this.value=s,this.begin=m+v,this.end=this.begin+x,o.specification.transition&&(p.delay||p.duration)&&(this.prior=u)}possiblyEvaluate(o,s,u){const p=o.now||0,m=this.value.possiblyEvaluate(o,s,u),v=this.prior;if(v){if(p>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(p<this.begin)return v.possiblyEvaluate(o,s,u);{const x=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(o,s,u),m,ze(x))}}return m}}class Jl{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,s,u){const p=new th(this._properties);for(const m of Object.keys(this._values))p._values[m]=this._values[m].possiblyEvaluate(o,s,u);return p}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class ey{constructor(o,s,u){this._properties=o,this._values=Object.create(o.defaultPropertyValues),this._scope=s,this._options=u,this.isConfigDependent=!1}getValue(o){return bn(this._values[o].value)}setValue(o,s){this._values[o]=new eh(this._values[o].property,s===null?void 0:bn(s),this._scope,this._options),this.isConfigDependent=this.isConfigDependent||this._values[o].expression.isConfigDependent}serialize(){const o={};for(const s of Object.keys(this._values)){const u=this.getValue(s);u!==void 0&&(o[s]=u)}return o}possiblyEvaluate(o,s,u){const p=new th(this._properties);for(const m of Object.keys(this._values))p._values[m]=this._values[m].possiblyEvaluate(o,s,u);return p}}class qu{constructor(o,s,u){this.property=o,this.value=s,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,s,u,p){return this.property.evaluate(this.value,this.parameters,o,s,u,p)}}class th{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class $t{constructor(o){this.specification=o}possiblyEvaluate(o,s){return o.expression.evaluate(s)}interpolate(o,s,u){const p=hf[this.specification.type];return p?p(o,s,u):o}}class Cn{constructor(o,s){this.specification=o,this.overrides=s}possiblyEvaluate(o,s,u,p){return new qu(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(s,null,{},u,p)}:o.expression,s)}interpolate(o,s,u){if(o.value.kind!=="constant"||s.value.kind!=="constant")return o;if(o.value.value===void 0||s.value.value===void 0)return new qu(this,{kind:"constant",value:void 0},o.parameters);const p=hf[this.specification.type];return p?new qu(this,{kind:"constant",value:p(o.value.value,s.value.value,u)},o.parameters):o}evaluate(o,s,u,p,m,v){return o.kind==="constant"?o.value:o.evaluate(s,u,p,m,v)}}class qc{constructor(o){this.specification=o}possiblyEvaluate(o,s,u,p){return!!o.expression.evaluate(s,null,{},u,p)}interpolate(){return!1}}class wo{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const s=new xo(0,{});for(const u in o){const p=o[u];p.specification.overridable&&this.overridableProperties.push(u);const m=this.defaultPropertyValues[u]=new eh(p,void 0),v=this.defaultTransitionablePropertyValues[u]=new lg(p);this.defaultTransitioningPropertyValues[u]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=m.possiblyEvaluate(s)}}}function Fa(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function Ff(i){if(Array.isArray(i))return i.map(Ff);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const o={};for(const s in i)o[s]=Ff(i[s]);return o}return Fa(i)}rn(Cn,"DataDrivenProperty"),rn($t,"DataConstantProperty"),rn(qc,"ColorRampProperty");var et=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"camera":{"type":"camera"},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"expression":{},"property-type":"data-constant"},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{},"hillshade":{},"model":{},"background":{},"sky":{},"slot":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"expression":{},"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"expression":{},"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ug(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const o of i.slice(1))if(!ug(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}function ja(i,o="fill"){if(i==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};ug(i)||(i=nh(i));const s=i;let u=!0;try{u=function(S){if(!Zu(S))return S;let A=Ff(S);return dg(A),A=ty(A),A}(s)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(s,null,2)}
        `)}const p=et[`filter_${o}`],m=Zd(u,p);let v=null;if(m.result==="error")throw new Error(m.value.map(S=>`${S.key}: ${S.message}`).join(", "));v=(S,A,I)=>m.value.evaluate(S,A,{},I);let x=null,T=null;if(u!==s){const S=Zd(s,p);if(S.result==="error")throw new Error(S.value.map(A=>`${A.key}: ${A.message}`).join(", "));x=(A,I,z,V,Y)=>S.value.evaluate(A,I,{},z,void 0,void 0,V,Y),T=!Nu(S.value.expression)}return{filter:v,dynamicFilter:x||void 0,needGeometry:ny(u),needFeature:!!T}}function ty(i){if(!Array.isArray(i))return i;const o=function(s){if(Nv.has(s[0])){for(let u=1;u<s.length;u++)if(Zu(s[u]))return!0}return s}(i);return o===!0?o:o.map(s=>ty(s))}function dg(i){let o=!1;const s=[];if(i[0]==="case"){for(let u=1;u<i.length-1;u+=2)o=o||Zu(i[u]),s.push(i[u+1]);s.push(i[i.length-1])}else if(i[0]==="match"){o=o||Zu(i[1]);for(let u=2;u<i.length-1;u+=2)s.push(i[u+1]);s.push(i[i.length-1])}else if(i[0]==="step"){o=o||Zu(i[1]);for(let u=1;u<i.length-1;u+=2)s.push(i[u+1])}o&&(i.length=0,i.push("any",...s));for(let u=1;u<i.length;u++)dg(i[u])}function Zu(i){if(!Array.isArray(i))return!1;if((o=i[0])==="pitch"||o==="distance-from-center")return!0;var o;for(let s=1;s<i.length;s++)if(Zu(i[s]))return!0;return!1}const Nv=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function zv(i,o){return i<o?-1:i>o?1:0}function ny(i){if(!Array.isArray(i))return!1;if(i[0]==="within"||i[0]==="distance")return!0;for(let o=1;o<i.length;o++)if(ny(i[o]))return!0;return!1}function nh(i){if(!i)return!0;const o=i[0];return i.length<=1?o!=="any":o==="=="?rh(i[1],i[2],"=="):o==="!="?oh(rh(i[1],i[2],"==")):o==="<"||o===">"||o==="<="||o===">="?rh(i[1],i[2],o):o==="any"?(s=i.slice(1),["any"].concat(s.map(nh))):o==="all"?["all"].concat(i.slice(1).map(nh)):o==="none"?["all"].concat(i.slice(1).map(nh).map(oh)):o==="in"?hg(i[1],i.slice(2)):o==="!in"?oh(hg(i[1],i.slice(2))):o==="has"?jf(i[1]):o!=="!has"||oh(jf(i[1]));var s}function rh(i,o,s){switch(i){case"$type":return[`filter-type-${s}`,o];case"$id":return[`filter-id-${s}`,o];default:return[`filter-${s}`,i,o]}}function hg(i,o){if(o.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(s=>typeof s!=typeof o[0])?["filter-in-large",i,["literal",o.sort(zv)]]:["filter-in-small",i,["literal",o]]}}function jf(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function oh(i){return["!",i]}const Zc="";function fg(i,o){return o?`${i}${Zc}${o}`:i}const Ku="-transition";class ma extends Su{constructor(o,s,u,p){if(super(),this.id=o.id,this.fqid=fg(this.id,u),this.type=o.type,this.scope=u,this.options=p,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.isConfigDependent=!1,o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&o.type!=="sky"&&o.type!=="slot"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),o.slot&&(this.slot=o.slot),s.layout&&(this._unevaluatedLayout=new ey(s.layout,this.scope,p),this.isConfigDependent=this.isConfigDependent||this._unevaluatedLayout.isConfigDependent),s.paint)){this._transitionablePaint=new cl(s.paint,this.scope,p);for(const m in o.paint)this.setPaintProperty(m,o.paint[m]);for(const m in o.layout)this.setLayoutProperty(m,o.layout[m]);this.isConfigDependent=this.isConfigDependent||this._transitionablePaint.isConfigDependent,this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new th(s.paint)}}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,s){if(this.type==="custom"&&o==="visibility")return void(this.visibility=s);const u=this._unevaluatedLayout;u._properties.properties[o]&&(u.setValue(o,s),this.isConfigDependent=this.isConfigDependent||u.isConfigDependent,o==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0})}getPaintProperty(o){return Pn(o,Ku)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,s){const u=this._transitionablePaint,p=u._properties.properties;if(Pn(o,Ku)){const I=o.slice(0,-11);return p[I]&&u.setTransition(I,s||void 0),!1}if(!p[o])return!1;const m=u._values[o],v=m.value.isDataDriven(),x=m.value;u.setValue(o,s),this.isConfigDependent=this.isConfigDependent||u.isConfigDependent,this._handleSpecialPaintPropertyUpdate(o);const T=u._values[o].value,S=T.isDataDriven(),A=Pn(o,"pattern")||o==="line-dasharray";return S||v||A||this._handleOverridablePaintPropertyUpdate(o,x,T)}_handleSpecialPaintPropertyUpdate(o){}getProgramIds(){return null}getDefaultProgramParams(o,s){return null}_handleOverridablePaintPropertyUpdate(o,s,u){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,s){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,s)}serialize(){return En({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(o,s)=>!(o===void 0||s==="layout"&&!Object.keys(o).length||s==="paint"&&!Object.keys(o).length))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const o in this.paint._values){const s=this.paint.get(o);if(s instanceof qu&&Lf(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=ja(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(o){this._stats&&(o.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}}const ih={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Xu{constructor(o,s){this._structArray=o,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class yo{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,s){return o._trim(),s&&(o.isTransferred=!0,s.add(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const s=Object.create(this.prototype);return s.arrayBuffer=o.arrayBuffer,s.length=o.length,s.capacity=o.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...o){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...o){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Yr(i,o=1){let s=0,u=0;return{members:i.map(p=>{const m=ih[p.type].BYTES_PER_ELEMENT,v=s=ah(s,Math.max(o,m)),x=p.components||1;return u=Math.max(u,m),s+=m*x,{name:p.name,type:p.type,components:x,offset:v}}),size:ah(s,Math.max(u,o)),alignment:o}}function ah(i,o){return Math.ceil(i/o)*o}class bs extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,s){const u=this.length;return this.resize(u+1),this.emplace(u,o,s)}emplace(o,s,u){const p=2*o;return this.int16[p+0]=s,this.int16[p+1]=u,o}}bs.prototype.bytesPerElement=4,rn(bs,"StructArrayLayout2i4");class ga extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,s,u){const p=this.length;return this.resize(p+1),this.emplace(p,o,s,u)}emplace(o,s,u,p){const m=3*o;return this.int16[m+0]=s,this.int16[m+1]=u,this.int16[m+2]=p,o}}ga.prototype.bytesPerElement=6,rn(ga,"StructArrayLayout3i6");class ul extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,s,u,p){const m=this.length;return this.resize(m+1),this.emplace(m,o,s,u,p)}emplace(o,s,u,p,m){const v=4*o;return this.int16[v+0]=s,this.int16[v+1]=u,this.int16[v+2]=p,this.int16[v+3]=m,o}}ul.prototype.bytesPerElement=8,rn(ul,"StructArrayLayout4i8");class pg extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,s,u,p,m){const v=this.length;return this.resize(v+1),this.emplace(v,o,s,u,p,m)}emplace(o,s,u,p,m,v){const x=5*o;return this.int16[x+0]=s,this.int16[x+1]=u,this.int16[x+2]=p,this.int16[x+3]=m,this.int16[x+4]=v,o}}pg.prototype.bytesPerElement=10,rn(pg,"StructArrayLayout5i10");class mg extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,s,u,p,m,v,x){const T=this.length;return this.resize(T+1),this.emplace(T,o,s,u,p,m,v,x)}emplace(o,s,u,p,m,v,x,T){const S=6*o,A=12*o,I=3*o;return this.int16[S+0]=s,this.int16[S+1]=u,this.uint8[A+4]=p,this.uint8[A+5]=m,this.uint8[A+6]=v,this.uint8[A+7]=x,this.float32[I+2]=T,o}}mg.prototype.bytesPerElement=12,rn(mg,"StructArrayLayout2i4ub1f12");class ec extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,s,u,p){const m=this.length;return this.resize(m+1),this.emplace(m,o,s,u,p)}emplace(o,s,u,p,m){const v=4*o;return this.float32[v+0]=s,this.float32[v+1]=u,this.float32[v+2]=p,this.float32[v+3]=m,o}}ec.prototype.bytesPerElement=16,rn(ec,"StructArrayLayout4f16");class tc extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,s,u,p,m){const v=this.length;return this.resize(v+1),this.emplace(v,o,s,u,p,m)}emplace(o,s,u,p,m,v){const x=6*o,T=3*o;return this.uint16[x+0]=s,this.uint16[x+1]=u,this.uint16[x+2]=p,this.uint16[x+3]=m,this.float32[T+2]=v,o}}tc.prototype.bytesPerElement=12,rn(tc,"StructArrayLayout4ui1f12");class Qu extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,s,u,p){const m=this.length;return this.resize(m+1),this.emplace(m,o,s,u,p)}emplace(o,s,u,p,m){const v=4*o;return this.uint16[v+0]=s,this.uint16[v+1]=u,this.uint16[v+2]=p,this.uint16[v+3]=m,o}}Qu.prototype.bytesPerElement=8,rn(Qu,"StructArrayLayout4ui8");class $f extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,s,u,p,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,o,s,u,p,m,v)}emplace(o,s,u,p,m,v,x){const T=6*o;return this.int16[T+0]=s,this.int16[T+1]=u,this.int16[T+2]=p,this.int16[T+3]=m,this.int16[T+4]=v,this.int16[T+5]=x,o}}$f.prototype.bytesPerElement=12,rn($f,"StructArrayLayout6i12");class sh extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,s,u,p,m,v,x,T,S,A,I,z){const V=this.length;return this.resize(V+1),this.emplace(V,o,s,u,p,m,v,x,T,S,A,I,z)}emplace(o,s,u,p,m,v,x,T,S,A,I,z,V){const Y=12*o;return this.int16[Y+0]=s,this.int16[Y+1]=u,this.int16[Y+2]=p,this.int16[Y+3]=m,this.uint16[Y+4]=v,this.uint16[Y+5]=x,this.uint16[Y+6]=T,this.uint16[Y+7]=S,this.int16[Y+8]=A,this.int16[Y+9]=I,this.int16[Y+10]=z,this.int16[Y+11]=V,o}}sh.prototype.bytesPerElement=24,rn(sh,"StructArrayLayout4i4ui4i24");class gg extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,s,u,p,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,o,s,u,p,m,v)}emplace(o,s,u,p,m,v,x){const T=10*o,S=5*o;return this.int16[T+0]=s,this.int16[T+1]=u,this.int16[T+2]=p,this.float32[S+2]=m,this.float32[S+3]=v,this.float32[S+4]=x,o}}gg.prototype.bytesPerElement=20,rn(gg,"StructArrayLayout3i3f20");class yg extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const s=this.length;return this.resize(s+1),this.emplace(s,o)}emplace(o,s){return this.uint32[1*o+0]=s,o}}yg.prototype.bytesPerElement=4,rn(yg,"StructArrayLayout1ul4");class ra extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,s){const u=this.length;return this.resize(u+1),this.emplace(u,o,s)}emplace(o,s,u){const p=2*o;return this.uint16[p+0]=s,this.uint16[p+1]=u,o}}ra.prototype.bytesPerElement=4,rn(ra,"StructArrayLayout2ui4");class bg extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,s,u,p,m,v,x,T,S,A,I,z,V){const Y=this.length;return this.resize(Y+1),this.emplace(Y,o,s,u,p,m,v,x,T,S,A,I,z,V)}emplace(o,s,u,p,m,v,x,T,S,A,I,z,V,Y){const X=20*o,ne=10*o;return this.int16[X+0]=s,this.int16[X+1]=u,this.int16[X+2]=p,this.int16[X+3]=m,this.int16[X+4]=v,this.float32[ne+3]=x,this.float32[ne+4]=T,this.float32[ne+5]=S,this.float32[ne+6]=A,this.int16[X+14]=I,this.uint32[ne+8]=z,this.uint16[X+18]=V,this.uint16[X+19]=Y,o}}bg.prototype.bytesPerElement=40,rn(bg,"StructArrayLayout5i4f1i1ul2ui40");class lh extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,s,u,p,m,v,x){const T=this.length;return this.resize(T+1),this.emplace(T,o,s,u,p,m,v,x)}emplace(o,s,u,p,m,v,x,T){const S=8*o;return this.int16[S+0]=s,this.int16[S+1]=u,this.int16[S+2]=p,this.int16[S+4]=m,this.int16[S+5]=v,this.int16[S+6]=x,this.int16[S+7]=T,o}}lh.prototype.bytesPerElement=16,rn(lh,"StructArrayLayout3i2i2i16");class Uf extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,s,u,p,m){const v=this.length;return this.resize(v+1),this.emplace(v,o,s,u,p,m)}emplace(o,s,u,p,m,v){const x=4*o,T=8*o;return this.float32[x+0]=s,this.float32[x+1]=u,this.float32[x+2]=p,this.int16[T+6]=m,this.int16[T+7]=v,o}}Uf.prototype.bytesPerElement=16,rn(Uf,"StructArrayLayout2f1f2i16");class vg extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,s,u,p){const m=this.length;return this.resize(m+1),this.emplace(m,o,s,u,p)}emplace(o,s,u,p,m){const v=12*o,x=3*o;return this.uint8[v+0]=s,this.uint8[v+1]=u,this.float32[x+1]=p,this.float32[x+2]=m,o}}vg.prototype.bytesPerElement=12,rn(vg,"StructArrayLayout2ub2f12");class ci extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,s,u){const p=this.length;return this.resize(p+1),this.emplace(p,o,s,u)}emplace(o,s,u,p){const m=3*o;return this.uint16[m+0]=s,this.uint16[m+1]=u,this.uint16[m+2]=p,o}}ci.prototype.bytesPerElement=6,rn(ci,"StructArrayLayout3ui6");class dl extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,s,u,p,m,v,x,T,S,A,I,z,V,Y,X,ne,ae,ye,xe,_e,Ie){const Me=this.length;return this.resize(Me+1),this.emplace(Me,o,s,u,p,m,v,x,T,S,A,I,z,V,Y,X,ne,ae,ye,xe,_e,Ie)}emplace(o,s,u,p,m,v,x,T,S,A,I,z,V,Y,X,ne,ae,ye,xe,_e,Ie,Me){const $e=30*o,We=15*o,qe=60*o;return this.int16[$e+0]=s,this.int16[$e+1]=u,this.int16[$e+2]=p,this.float32[We+2]=m,this.float32[We+3]=v,this.uint16[$e+8]=x,this.uint16[$e+9]=T,this.uint32[We+5]=S,this.uint32[We+6]=A,this.uint32[We+7]=I,this.uint16[$e+16]=z,this.uint16[$e+17]=V,this.uint16[$e+18]=Y,this.float32[We+10]=X,this.float32[We+11]=ne,this.uint8[qe+48]=ae,this.uint8[qe+49]=ye,this.uint8[qe+50]=xe,this.uint32[We+13]=_e,this.int16[$e+28]=Ie,this.uint8[qe+58]=Me,o}}dl.prototype.bytesPerElement=60,rn(dl,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Vf extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,s,u,p,m,v,x,T,S,A,I,z,V,Y,X,ne,ae,ye,xe,_e,Ie,Me,$e,We,qe,rt,Xe,mt,St,ht,wt,lt){const xt=this.length;return this.resize(xt+1),this.emplace(xt,o,s,u,p,m,v,x,T,S,A,I,z,V,Y,X,ne,ae,ye,xe,_e,Ie,Me,$e,We,qe,rt,Xe,mt,St,ht,wt,lt)}emplace(o,s,u,p,m,v,x,T,S,A,I,z,V,Y,X,ne,ae,ye,xe,_e,Ie,Me,$e,We,qe,rt,Xe,mt,St,ht,wt,lt,xt){const Gt=20*o,At=40*o,dn=80*o;return this.float32[Gt+0]=s,this.float32[Gt+1]=u,this.int16[At+4]=p,this.int16[At+5]=m,this.int16[At+6]=v,this.int16[At+7]=x,this.int16[At+8]=T,this.int16[At+9]=S,this.int16[At+10]=A,this.int16[At+11]=I,this.int16[At+12]=z,this.uint16[At+13]=V,this.uint16[At+14]=Y,this.uint16[At+15]=X,this.uint16[At+16]=ne,this.uint16[At+17]=ae,this.uint16[At+18]=ye,this.uint16[At+19]=xe,this.uint16[At+20]=_e,this.uint16[At+21]=Ie,this.uint16[At+22]=Me,this.uint16[At+23]=$e,this.uint16[At+24]=We,this.uint16[At+25]=qe,this.uint16[At+26]=rt,this.uint16[At+27]=Xe,this.uint32[Gt+14]=mt,this.float32[Gt+15]=St,this.float32[Gt+16]=ht,this.float32[Gt+17]=wt,this.float32[Gt+18]=lt,this.uint8[dn+76]=xt,o}}Vf.prototype.bytesPerElement=80,rn(Vf,"StructArrayLayout2f9i15ui1ul4f1ub80");class Hf extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const s=this.length;return this.resize(s+1),this.emplace(s,o)}emplace(o,s){return this.float32[1*o+0]=s,o}}Hf.prototype.bytesPerElement=4,rn(Hf,"StructArrayLayout1f4");class zs extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,s,u,p,m){const v=this.length;return this.resize(v+1),this.emplace(v,o,s,u,p,m)}emplace(o,s,u,p,m,v){const x=5*o;return this.float32[x+0]=s,this.float32[x+1]=u,this.float32[x+2]=p,this.float32[x+3]=m,this.float32[x+4]=v,o}}zs.prototype.bytesPerElement=20,rn(zs,"StructArrayLayout5f20");class _g extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,s,u,p,m,v,x){const T=this.length;return this.resize(T+1),this.emplace(T,o,s,u,p,m,v,x)}emplace(o,s,u,p,m,v,x,T){const S=7*o;return this.float32[S+0]=s,this.float32[S+1]=u,this.float32[S+2]=p,this.float32[S+3]=m,this.float32[S+4]=v,this.float32[S+5]=x,this.float32[S+6]=T,o}}_g.prototype.bytesPerElement=28,rn(_g,"StructArrayLayout7f28");class ch extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,s,u,p){const m=this.length;return this.resize(m+1),this.emplace(m,o,s,u,p)}emplace(o,s,u,p,m){const v=6*o;return this.uint32[3*o+0]=s,this.uint16[v+2]=u,this.uint16[v+3]=p,this.uint16[v+4]=m,o}}ch.prototype.bytesPerElement=12,rn(ch,"StructArrayLayout1ul3ui12");class Wf extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const s=this.length;return this.resize(s+1),this.emplace(s,o)}emplace(o,s){return this.uint16[1*o+0]=s,o}}Wf.prototype.bytesPerElement=2,rn(Wf,"StructArrayLayout1ui2");class Kc extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,s,u){const p=this.length;return this.resize(p+1),this.emplace(p,o,s,u)}emplace(o,s,u,p){const m=3*o;return this.float32[m+0]=s,this.float32[m+1]=u,this.float32[m+2]=p,o}}Kc.prototype.bytesPerElement=12,rn(Kc,"StructArrayLayout3f12");class uh extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,s){const u=this.length;return this.resize(u+1),this.emplace(u,o,s)}emplace(o,s,u){const p=2*o;return this.float32[p+0]=s,this.float32[p+1]=u,o}}uh.prototype.bytesPerElement=8,rn(uh,"StructArrayLayout2f8");class nc extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,s,u,p,m,v,x,T,S,A,I,z,V,Y,X,ne){const ae=this.length;return this.resize(ae+1),this.emplace(ae,o,s,u,p,m,v,x,T,S,A,I,z,V,Y,X,ne)}emplace(o,s,u,p,m,v,x,T,S,A,I,z,V,Y,X,ne,ae){const ye=16*o;return this.float32[ye+0]=s,this.float32[ye+1]=u,this.float32[ye+2]=p,this.float32[ye+3]=m,this.float32[ye+4]=v,this.float32[ye+5]=x,this.float32[ye+6]=T,this.float32[ye+7]=S,this.float32[ye+8]=A,this.float32[ye+9]=I,this.float32[ye+10]=z,this.float32[ye+11]=V,this.float32[ye+12]=Y,this.float32[ye+13]=X,this.float32[ye+14]=ne,this.float32[ye+15]=ae,o}}nc.prototype.bytesPerElement=64,rn(nc,"StructArrayLayout16f64");class dh extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,s,u,p,m,v,x){const T=this.length;return this.resize(T+1),this.emplace(T,o,s,u,p,m,v,x)}emplace(o,s,u,p,m,v,x,T){const S=10*o,A=5*o;return this.uint16[S+0]=s,this.uint16[S+1]=u,this.uint16[S+2]=p,this.uint16[S+3]=m,this.float32[A+2]=v,this.float32[A+3]=x,this.float32[A+4]=T,o}}dh.prototype.bytesPerElement=20,rn(dh,"StructArrayLayout4ui3f20");class hh extends yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(o){const s=this.length;return this.resize(s+1),this.emplace(s,o)}emplace(o,s){return this.uint8[1*o+0]=s,o}}hh.prototype.bytesPerElement=1,rn(hh,"StructArrayLayout1ub1");class ry extends Xu{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}ry.prototype.size=40;class xg extends bg{get(o){return new ry(this,o)}}rn(xg,"CollisionBoxArray");class Bv extends Xu{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(o){this._structArray.uint8[this._pos1+49]=o}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(o){this._structArray.uint8[this._pos1+50]=o}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(o){this._structArray.uint32[this._pos4+13]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(o){this._structArray.uint8[this._pos1+58]=o}}Bv.prototype.size=60;class Fv extends dl{get(o){return new Bv(this,o)}}rn(Fv,"PlacedSymbolArray");class oy extends Xu{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(o){this._structArray.uint32[this._pos4+14]=o}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(o){this._structArray.float32[this._pos4+18]=o}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}}oy.prototype.size=80;class iy extends Vf{get(o){return new oy(this,o)}}rn(iy,"SymbolInstanceArray");class ay extends Hf{getoffsetX(o){return this.float32[1*o+0]}}rn(ay,"GlyphOffsetArray");class fh extends bs{getx(o){return this.int16[2*o+0]}gety(o){return this.int16[2*o+1]}}rn(fh,"SymbolLineVertexArray");class sy extends Xu{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}sy.prototype.size=12;class Ju extends ch{get(o){return new sy(this,o)}}rn(Ju,"FeatureIndexArray");class ph extends ra{geta_centroid_pos0(o){return this.uint16[2*o+0]}geta_centroid_pos1(o){return this.uint16[2*o+1]}}rn(ph,"FillExtrusionCentroidArray");const Xx=Yr([{name:"a_pos",components:2,type:"Int16"}],4),rc=Yr([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Po{constructor(o=[]){this.segments=o}_prepareSegment(o,s,u,p){let m=this.segments[this.segments.length-1];return o>Po.MAX_VERTEX_ARRAY_LENGTH&&On(`Max vertices per segment is ${Po.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!m||m.vertexLength+o>Po.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==p)&&(m={vertexOffset:s,primitiveOffset:u,vertexLength:0,primitiveLength:0},p!==void 0&&(m.sortKey=p),this.segments.push(m)),m}prepareSegment(o,s,u,p){return this._prepareSegment(o,s.length,u.length,p)}get(){return this.segments}destroy(){for(const o of this.segments)for(const s in o.vaos)o.vaos[s].destroy()}static simpleSegment(o,s,u,p){return new Po([{vertexOffset:o,primitiveOffset:s,vertexLength:u,primitiveLength:p,vaos:{},sortKey:0}])}}function wg(i,o){return 256*(i=Re(Math.floor(i),0,255))+Re(Math.floor(o),0,255)}Po.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,rn(Po,"SegmentVector");const ly=Yr([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),cy=Yr([{name:"a_dash",components:4,type:"Uint16"}]);var mh={exports:{}},Yf={exports:{}};(function(i){i.exports=function(o,s){var u,p,m,v,x,T,S,A;for(p=o.length-(u=3&o.length),m=s,x=3432918353,T=461845907,A=0;A<p;)S=255&o.charCodeAt(A)|(255&o.charCodeAt(++A))<<8|(255&o.charCodeAt(++A))<<16|(255&o.charCodeAt(++A))<<24,++A,m=27492+(65535&(v=5*(65535&(m=(m^=S=(65535&(S=(S=(65535&S)*x+(((S>>>16)*x&65535)<<16)&4294967295)<<15|S>>>17))*T+(((S>>>16)*T&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(S=0,u){case 3:S^=(255&o.charCodeAt(A+2))<<16;case 2:S^=(255&o.charCodeAt(A+1))<<8;case 1:m^=S=(65535&(S=(S=(65535&(S^=255&o.charCodeAt(A)))*x+(((S>>>16)*x&65535)<<16)&4294967295)<<15|S>>>17))*T+(((S>>>16)*T&65535)<<16)&4294967295}return m^=o.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0}})(Yf);var Eg=Yf.exports,uy={exports:{}};(function(i){i.exports=function(o,s){for(var u,p=o.length,m=s^p,v=0;p>=4;)u=1540483477*(65535&(u=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(u>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),p-=4,++v;switch(p){case 3:m^=(255&o.charCodeAt(v+2))<<16;case 2:m^=(255&o.charCodeAt(v+1))<<8;case 1:m=1540483477*(65535&(m^=255&o.charCodeAt(v)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0}})(uy);var Tg=Eg,dy=uy.exports;mh.exports=Tg,mh.exports.murmur3=Tg,mh.exports.murmur2=dy;var Gf=Q(mh.exports);class Xc{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(o,s,u,p){this.ids.push(Sg(o)),this.positions.push(s,u,p)}eachPosition(o,s){const u=Sg(o);let p=0,m=this.ids.length-1;for(;p<m;){const v=p+m>>1;this.ids[v]>=u?m=v:p=v+1}for(;this.ids[p]===u;)s(this.positions[3*p],this.positions[3*p+1],this.positions[3*p+2]),p++}static serialize(o,s){const u=new Float64Array(o.ids),p=new Uint32Array(o.positions);return hl(u,p,0,u.length-1),s&&(s.add(u.buffer),s.add(p.buffer)),{ids:u,positions:p}}static deserialize(o){const s=new Xc;let u;s.ids=o.ids,s.positions=o.positions;for(const p of s.ids)p!==u&&s.uniqueIds.push(p),u=p;return s.indexed=!0,s}}function Sg(i){const o=+i;return!isNaN(o)&&Number.MIN_SAFE_INTEGER<=o&&o<=Number.MAX_SAFE_INTEGER?o:Gf(String(i))}function hl(i,o,s,u){for(;s<u;){const p=i[s+u>>1];let m=s-1,v=u+1;for(;;){do m++;while(i[m]<p);do v--;while(i[v]>p);if(m>=v)break;gh(i,m,v),gh(o,3*m,3*v),gh(o,3*m+1,3*v+1),gh(o,3*m+2,3*v+2)}v-s<u-v?(hl(i,o,s,v),s=v+1):(hl(i,o,v+1,u),u=v)}}function gh(i,o,s){const u=i[o];i[o]=i[s],i[s]=u}rn(Xc,"FeaturePositionMap");class vs{constructor(o){this.gl=o.gl,this.initialized=!1}fetchUniformLocation(o,s){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(o,s),this.initialized=!0),!!this.location}}class qf extends vs{constructor(o){super(o),this.current=0}set(o,s,u){this.fetchUniformLocation(o,s)&&this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}}class $i extends vs{constructor(o){super(o),this.current=0}set(o,s,u){this.fetchUniformLocation(o,s)&&this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class oc extends vs{constructor(o){super(o),this.current=[0,0]}set(o,s,u){this.fetchUniformLocation(o,s)&&(u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1])))}}class Zf extends vs{constructor(o){super(o),this.current=[0,0,0]}set(o,s,u){this.fetchUniformLocation(o,s)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2])))}}class g extends vs{constructor(o){super(o),this.current=[0,0,0,0]}set(o,s,u){this.fetchUniformLocation(o,s)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3])))}}class c extends vs{constructor(o){super(o),this.current=So.transparent}set(o,s,u){this.fetchUniformLocation(o,s)&&(u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a)))}}const h=new Float32Array(16);class b extends vs{constructor(o){super(o),this.current=h}set(o,s,u){if(this.fetchUniformLocation(o,s)){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let p=1;p<16;p++)if(u[p]!==this.current[p]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}}}const _=new Float32Array(9),w=new Float32Array(4);class k extends vs{constructor(o){super(o),this.current=w}set(o,s,u){if(this.fetchUniformLocation(o,s)){for(let p=0;p<4;p++)if(u[p]!==this.current[p]){this.current=u,this.gl.uniformMatrix2fv(this.location,!1,u);break}}}}function D(i){return[wg(255*i.r,255*i.g),wg(255*i.b,255*i.a)]}class L{constructor(o,s,u){this.value=o,this.uniformNames=s.map(p=>`u_${p}`),this.type=u}setUniform(o,s,u,p,m){s.set(o,m,p.constantOr(this.value))}getBinding(o,s){return this.type==="color"?new c(o):new $i(o)}}class B{constructor(o,s){this.uniformNames=s.map(u=>`u_${u}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(o){this.pixelRatio=o.pixelRatio||1,this.pattern=o.tl.concat(o.br)}setUniform(o,s,u,p,m){const v=m==="u_pattern"||m==="u_dash"?this.pattern:m==="u_pixel_ratio"?this.pixelRatio:null;v&&s.set(o,m,v)}getBinding(o,s){return s==="u_pattern"||s==="u_dash"?new g(o):new $i(o)}}class U{constructor(o,s,u,p){this.expression=o,this.type=u,this.maxValue=0,this.paintVertexAttributes=s.map(m=>({name:`a_${m}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(o,s,u,p,m,v,x){const T=this.paintVertexArray.length,S=this.expression.evaluate(new xo(0,{brightness:v}),s,{},m,p,x);this.paintVertexArray.resize(o),this._setPaintValue(T,o,S)}updatePaintArray(o,s,u,p,m,v,x){const T=this.expression.evaluate({zoom:0,brightness:x},u,p,void 0,m);this._setPaintValue(o,s,T)}_setPaintValue(o,s,u){if(this.type==="color"){const p=D(u);for(let m=o;m<s;m++)this.paintVertexArray.emplace(m,p[0],p[1])}else{for(let p=o;p<s;p++)this.paintVertexArray.emplace(p,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class W{constructor(o,s,u,p,m,v){this.expression=o,this.uniformNames=s.map(x=>`u_${x}_t`),this.type=u,this.useIntegerZoom=p,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=s.map(x=>({name:`a_${x}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new v}populatePaintArray(o,s,u,p,m,v,x){const T=this.expression.evaluate(new xo(this.zoom,{brightness:v}),s,{},m,p,x),S=this.expression.evaluate(new xo(this.zoom+1,{brightness:v}),s,{},m,p,x),A=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(A,o,T,S)}updatePaintArray(o,s,u,p,m,v,x){const T=this.expression.evaluate({zoom:this.zoom,brightness:x},u,p,void 0,m),S=this.expression.evaluate({zoom:this.zoom+1,brightness:x},u,p,void 0,m);this._setPaintValue(o,s,T,S)}_setPaintValue(o,s,u,p){if(this.type==="color"){const m=D(u),v=D(p);for(let x=o;x<s;x++)this.paintVertexArray.emplace(x,m[0],m[1],v[0],v[1])}else{for(let m=o;m<s;m++)this.paintVertexArray.emplace(m,u,p);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(p))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,s,u,p,m){const v=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,x=Re(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);s.set(o,m,x)}getBinding(o,s){return new $i(o)}}class J{constructor(o,s,u,p,m){this.expression=o,this.layerId=m,this.paintVertexAttributes=(u==="array"?cy:ly).members;for(let v=0;v<s.length;++v);this.paintVertexArray=new p}populatePaintArray(o,s,u){const p=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValues(p,o,s.patterns&&s.patterns[this.layerId],u)}updatePaintArray(o,s,u,p,m,v,x){this._setPaintValues(o,s,u.patterns&&u.patterns[this.layerId],v)}_setPaintValues(o,s,u,p){if(!p||!u)return;const m=p[u];if(!m)return;const{tl:v,br:x,pixelRatio:T}=m;for(let S=o;S<s;S++)this.paintVertexArray.emplace(S,v[0],v[1],x[0],x[1],T)}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ee{constructor(o,s,u=()=>!0){this.binders={},this._buffers=[];const p=[];for(const m in o.paint._values){const v=o.paint.get(m);if(!u(m)||!(v instanceof qu&&Lf(v.property.specification)))continue;const x=de(m,o.type),T=v.value,S=v.property.specification.type,A=!!v.property.useIntegerZoom,I=m==="line-dasharray"||m.endsWith("pattern"),z=m==="line-dasharray"&&o.layout.get("line-cap").value.kind!=="constant";if(T.kind!=="constant"||z)if(T.kind==="source"||z||I){const V=Te(m,S,"source");this.binders[m]=I?new J(T,x,S,V,o.id):new U(T,x,S,V),p.push(`/a_${m}`)}else{const V=Te(m,S,"composite");this.binders[m]=new W(T,x,S,A,s,V),p.push(`/z_${m}`)}else this.binders[m]=I?new B(T.value,x):new L(T.value,x,S),p.push(`/u_${m}`)}this.cacheKey=p.sort().join("")}getMaxValue(o){const s=this.binders[o];return s instanceof U||s instanceof W?s.maxValue:0}populatePaintArrays(o,s,u,p,m,v,x){for(const T in this.binders){const S=this.binders[T];(S instanceof U||S instanceof W||S instanceof J)&&S.populatePaintArray(o,s,u,p,m,v,x)}}setConstantPatternPositions(o){for(const s in this.binders){const u=this.binders[s];u instanceof B&&u.setConstantPatternPositions(o)}}updatePaintArrays(o,s,u,p,m,v,x,T){let S=!1;const A=Object.keys(o),I=A.length!==0,z=I?A:s.uniqueIds;for(const V in this.binders){const Y=this.binders[V];if((Y instanceof U||Y instanceof W||Y instanceof J)&&(Y.expression.isStateDependent===!0||Y.expression.isLightConstant===!1)){const X=m.paint.get(V);Y.expression=X.value;for(const ne of z){const ae=o[ne.toString()];s.eachPosition(ne,(ye,xe,_e)=>{const Ie=p.feature(ye);Y.updatePaintArray(xe,_e,Ie,ae,v,x,T)})}if(!I)for(const ne of u.uniqueIds){const ae=o[ne.toString()];u.eachPosition(ne,(ye,xe,_e)=>{const Ie=p.feature(ye);Y.updatePaintArray(xe,_e,Ie,ae,v,x,T)})}S=!0}}return S}defines(){const o=[];for(const s in this.binders){const u=this.binders[s];(u instanceof L||u instanceof B)&&o.push(...u.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return o}getBinderAttributes(){const o=[];for(const s in this.binders){const u=this.binders[s];if(u instanceof U||u instanceof W||u instanceof J)for(let p=0;p<u.paintVertexAttributes.length;p++)o.push(u.paintVertexAttributes[p].name)}return o}getBinderUniforms(){const o=[];for(const s in this.binders){const u=this.binders[s];if(u instanceof L||u instanceof B||u instanceof W)for(const p of u.uniformNames)o.push(p)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o){const s=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof L||p instanceof B||p instanceof W)for(const m of p.uniformNames)s.push({name:m,property:u,binding:p.getBinding(o,m)})}return s}setUniforms(o,s,u,p,m){for(const{name:v,property:x,binding:T}of u)this.binders[x].setUniform(o,T,m,p.get(x),v)}updatePaintBuffers(){this._buffers=[];for(const o in this.binders){const s=this.binders[o];(s instanceof U||s instanceof W||s instanceof J)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}}upload(o){for(const s in this.binders){const u=this.binders[s];(u instanceof U||u instanceof W||u instanceof J)&&u.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const s=this.binders[o];(s instanceof U||s instanceof W||s instanceof J)&&s.destroy()}}}class ce{constructor(o,s,u=()=>!0){this.programConfigurations={};for(const p of o)this.programConfigurations[p.id]=new ee(p,s,u);this.needsUpload=!1,this._featureMap=new Xc,this._featureMapWithoutIds=new Xc,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(o,s,u,p,m,v,x,T){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(o,s,p,m,v,x,T);s.id!==void 0?this._featureMap.add(s.id,u,this._bufferOffset,o):(this._featureMapWithoutIds.add(this._idlessCounter,u,this._bufferOffset,o),this._idlessCounter+=1),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,s,u,p,m,v){for(const x of u)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(o,this._featureMap,this._featureMapWithoutIds,s,x,p,m,v||0)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}const se={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function de(i,o){return se[i]||[i.replace(`${o}-`,"").replace(/-/g,"_")]}const oe={"line-pattern":{source:tc,composite:tc},"fill-pattern":{source:tc,composite:tc},"fill-extrusion-pattern":{source:tc,composite:tc},"line-dasharray":{source:Qu,composite:Qu}},fe={color:{source:uh,composite:ec},number:{source:Hf,composite:uh}};function Te(i,o,s){const u=oe[i];return u&&u[s]||fe[o][s]}rn(L,"ConstantBinder"),rn(B,"PatternConstantBinder"),rn(U,"SourceExpressionBinder"),rn(J,"PatternCompositeBinder"),rn(W,"CompositeExpressionBinder"),rn(ee,"ProgramConfiguration",{omit:["_buffers"]}),rn(ce,"ProgramConfigurationSet");const be=Xt/Math.PI/2,Ee=5,he=6,Ce=16383,Ne=64,Fe=[Ne,32,16],G=-be,R=be;function H(i,o,s,u=be){return s=Be(s),[i*Math.sin(s)*u,-o*u,i*Math.cos(s)*u]}function le(i,o,s){return H(Math.cos(Be(i)),Math.sin(Be(i)),o,s)}const ge=63710088e-1,Oe=2*Math.PI*ge;class Se{constructor(o,s){if(isNaN(o)||isNaN(s))throw new Error(`Invalid LngLat object: (${o}, ${s})`);if(this.lng=+o,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Se(Lt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const s=Math.PI/180,u=this.lat*s,p=o.lat*s,m=Math.sin(u)*Math.sin(p)+Math.cos(u)*Math.cos(p)*Math.cos((o.lng-this.lng)*s);return ge*Math.acos(Math.min(m,1))}toBounds(o=0){const s=360*o/40075017,u=s/Math.cos(Math.PI/180*this.lat);return new Le({lng:this.lng-u,lat:this.lat-s},{lng:this.lng+u,lat:this.lat+s})}toEcef(o){return le(this.lat,this.lng,be+o*be/ge)}static convert(o){if(o instanceof Se)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new Se(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new Se(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Le{constructor(o,s){o&&(s?this.setSouthWest(o).setNorthEast(s):o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))}setNorthEast(o){return this._ne=o instanceof Se?new Se(o.lng,o.lat):Se.convert(o),this}setSouthWest(o){return this._sw=o instanceof Se?new Se(o.lng,o.lat):Se.convert(o),this}extend(o){const s=this._sw,u=this._ne;let p,m;if(o instanceof Se)p=o,m=o;else{if(!(o instanceof Le))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(Le.convert(o)):this.extend(Se.convert(o)):typeof o=="object"&&o!==null&&o.hasOwnProperty("lat")&&(o.hasOwnProperty("lon")||o.hasOwnProperty("lng"))?this.extend(Se.convert(o)):this;if(p=o._sw,m=o._ne,!p||!m)return this}return s||u?(s.lng=Math.min(p.lng,s.lng),s.lat=Math.min(p.lat,s.lat),u.lng=Math.max(m.lng,u.lng),u.lat=Math.max(m.lat,u.lat)):(this._sw=new Se(p.lng,p.lat),this._ne=new Se(m.lng,m.lat)),this}getCenter(){return new Se((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Se(this.getWest(),this.getNorth())}getSouthEast(){return new Se(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:s,lat:u}=Se.convert(o);let p=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&p}static convert(o){return!o||o instanceof Le?o:new Le(o)}}var ke={};(function(i,o){(function(s){function u(m,v,x){var T=p(256*m,256*(v=Math.pow(2,x)-v-1),x),S=p(256*(m+1),256*(v+1),x);return T[0]+","+T[1]+","+S[0]+","+S[1]}function p(m,v,x){var T=2*Math.PI*6378137/256/Math.pow(2,x);return[m*T-2*Math.PI*6378137/2,v*T-2*Math.PI*6378137/2]}s.getURL=function(m,v,x,T,S,A){return A=A||{},m+"?"+["bbox="+u(x,T,S),"format="+(A.format||"image/png"),"service="+(A.service||"WMS"),"version="+(A.version||"1.1.1"),"request="+(A.request||"GetMap"),"srs="+(A.srs||"EPSG:3857"),"width="+(A.width||256),"height="+(A.height||256),"layers="+v].join("&")},s.getTileBBox=u,s.getMercCoords=p,Object.defineProperty(s,"__esModule",{value:!0})})(o)})(0,ke);var Ve=ke;class Ye{constructor(o,s,u){this.z=o,this.x=s,this.y=u,this.key=vt(0,o,o,s,u)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,s){const u=Ve.getTileBBox(this.x,this.y,this.z),p=function(m,v,x){let T,S="";for(let A=m;A>0;A--)T=1<<A-1,S+=(v&T?1:0)+(x&T?2:0);return S}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(s==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",p).replace("{bbox-epsg-3857}",u)}toString(){return`${this.z}/${this.x}/${this.y}`}}class gt{constructor(o,s){this.wrap=o,this.canonical=s,this.key=vt(o,s.z,s.z,s.x,s.y)}}class yt{constructor(o,s,u,p,m){this.overscaledZ=o,this.wrap=s,this.canonical=new Ye(u,+p,+m),this.key=s===0&&o===u?this.canonical.key:vt(s,o,u,p,m)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){const s=this.canonical.z-o;return o>this.canonical.z?new yt(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new yt(o,this.wrap,o,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(o,s=!0){if(this.overscaledZ===o&&s)return this.key;if(o>this.canonical.z)return vt(this.wrap*+s,o,this.canonical.z,this.canonical.x,this.canonical.y);{const u=this.canonical.z-o;return vt(this.wrap*+s,o,o,this.canonical.x>>u,this.canonical.y>>u)}}isChildOf(o){if(o.wrap!==this.wrap)return!1;const s=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.z<this.canonical.z&&o.canonical.x===this.canonical.x>>s&&o.canonical.y===this.canonical.y>>s}children(o){if(this.overscaledZ>=o)return[new yt(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,u=2*this.canonical.x,p=2*this.canonical.y;return[new yt(s,this.wrap,s,u,p),new yt(s,this.wrap,s,u+1,p),new yt(s,this.wrap,s,u,p+1),new yt(s,this.wrap,s,u+1,p+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new yt(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new yt(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new gt(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function vt(i,o,s,u,p){const m=1<<Math.min(s,22);let v=m*(p%m)+u%m;return i&&s<22&&(v+=m*m*((i<0?-2*i-1:2*i)%(1<<2*(22-s)))),16*(32*v+s)+(o-s)}const Wt=[i=>{let o=i.canonical.x-1,s=i.wrap;return o<0&&(o=(1<<i.canonical.z)-1,s--),new yt(i.overscaledZ,s,i.canonical.z,o,i.canonical.y)},i=>{let o=i.canonical.x+1,s=i.wrap;return o===1<<i.canonical.z&&(o=0,s++),new yt(i.overscaledZ,s,i.canonical.z,o,i.canonical.y)},i=>new yt(i.overscaledZ,i.wrap,i.canonical.z,i.canonical.x,(i.canonical.y===0?1<<i.canonical.z:i.canonical.y)-1),i=>new yt(i.overscaledZ,i.wrap,i.canonical.z,i.canonical.x,i.canonical.y===(1<<i.canonical.z)-1?0:i.canonical.y+1)];rn(Ye,"CanonicalTileID"),rn(yt,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const Vt=0,Ht=25.5;function Zt(i){return Oe*Math.cos(i*Math.PI/180)}function In(i){return(180+i)/360}function xn(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function on(i,o){return i/Zt(o)}function yn(i){return 360*i-180}function Ln(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}function lr(i,o){return i*Zt(Ln(o))}const jn=85.051129;function Dr(i){return Math.cos(Be(Re(i,-jn,jn)))}function zn(i,o){const s=Re(o,Vt,Ht),u=Math.pow(2,s);return Dr(i)*Oe/(512*u)}function Qn(i){return 1/Math.cos(i*Math.PI/180)}function qn(i,o=0){const s=Math.exp(Math.PI*(1-(i.y+o/Xt)/(1<<i.z)*2));return 80150034*s/(s*s+1)/Xt/(1<<i.z)}class Jn{constructor(o,s,u=0){this.x=+o,this.y=+s,this.z=+u}static fromLngLat(o,s=0){const u=Se.convert(o);return new Jn(In(u.lng),xn(u.lat),on(s,u.lat))}toLngLat(){return new Se(yn(this.x),Ln(this.y))}toAltitude(){return lr(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Oe*Qn(Ln(this.y))}}function Xr(i,o,s,u,p,m,v,x,T){const S=(o+u)/2,A=(s+p)/2,I=new ve(S,A);x(I),function(z,V,Y,X,ne,ae){const ye=Y-ne,xe=X-ae;return Math.abs((X-V)*ye-(Y-z)*xe)/Math.hypot(ye,xe)}(I.x,I.y,m.x,m.y,v.x,v.y)>=T?(Xr(i,o,s,S,A,m,I,x,T),Xr(i,S,A,u,p,I,v,x,T)):i.push(v)}function br(i,o,s){let u=i[0],p=u.x,m=u.y;o(u);const v=[u];for(let x=1;x<i.length;x++){const T=i[x],{x:S,y:A}=T;o(T),Xr(v,p,m,S,A,u,T,o,s),p=S,m=A,u=T}return v}function uo(i,o,s,u){if(u(o,s)){const p=o.add(s)._mult(.5);uo(i,o,p,u),uo(i,p,s,u)}else i.push(s)}function Eo(i,o){let s=i[0];const u=[s];for(let p=1;p<i.length;p++){const m=i[p];uo(u,s,m,o),s=m}return u}const Ui=Math.pow(2,14)-1,oa=-Ui-1;function Vi(i,o){const s=Math.round(i.x*o),u=Math.round(i.y*o);return i.x=Re(s,oa,Ui),i.y=Re(u,oa,Ui),(s<i.x||s>i.x+1||u<i.y||u>i.y+1)&&On("Geometry exceeds allowed extent, reduce your vector tile buffer size"),i}function Qo(i,o,s){const u=i.loadGeometry(),p=i.extent,m=Xt/p;if(o&&s&&s.projection.isReprojectedInTileSpace){const v=1<<o.z,{scale:x,x:T,y:S,projection:A}=s,I=z=>{const V=yn((o.x+z.x/p)/v),Y=Ln((o.y+z.y/p)/v),X=A.project(V,Y);z.x=(X.x*x-T)*p,z.y=(X.y*x-S)*p};for(let z=0;z<u.length;z++)if(i.type!==1)u[z]=br(u[z],I,1);else{const V=[];for(const Y of u[z])Y.x<0||Y.x>=p||Y.y<0||Y.y>=p||(I(Y),V.push(Y));u[z]=V}}for(const v of u)for(const x of v)Vi(x,m);return u}function Oo(i,o){return{type:i.type,id:i.id,properties:i.properties,geometry:o?Qo(i):[]}}function _i(i,o,s,u,p){i.emplaceBack(2*o+(u+1)/2,2*s+(p+1)/2)}function ui(i,o,s){i.emplaceBack(o.x,o.y,o.z,s[0]*16384,s[1]*16384,s[2]*16384)}class ri{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=o.index,this.hasPattern=!1,this.projection=o.projection,this.layoutVertexArray=new bs,this.indexArray=new ci,this.segments=new Po,this.programConfigurations=new ce(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(o,s,u,p){const m=this.layers[0],v=[];let x=null;m.type==="circle"&&(x=m.layout.get("circle-sort-key"));for(const{feature:S,id:A,index:I,sourceLayerIndex:z}of o){const V=this.layers[0]._featureFilter.needGeometry,Y=Oo(S,V);if(!this.layers[0]._featureFilter.filter(new xo(this.zoom),Y,u))continue;const X=x?x.evaluate(Y,{},u):void 0,ne={id:A,properties:S.properties,type:S.type,sourceLayerIndex:z,index:I,geometry:V?Y.geometry:Qo(S,u,p),patterns:{},sortKey:X};v.push(ne)}x&&v.sort((S,A)=>S.sortKey-A.sortKey);let T=null;p.projection.name==="globe"&&(this.globeExtVertexArray=new $f,T=p.projection);for(const S of v){const{geometry:A,index:I,sourceLayerIndex:z}=S,V=o[I].feature;this.addFeature(S,A,I,s.availableImages,u,T,s.brightness),s.featureIndex.insert(V,A,I,z,this.index)}}update(o,s,u,p,m){const v=Object.keys(o).length!==0;v&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(o,s,v?this.stateDependentLayers:this.layers,u,p,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Xx.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,rc.members))),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(o,s,u,p,m,v,x){for(const T of s)for(const S of T){const A=S.x,I=S.y;if(A<0||A>=Xt||I<0||I>=Xt)continue;if(v){const Y=v.projectTilePoint(A,I,m),X=v.upVector(m,A,I),ne=this.globeExtVertexArray;ui(ne,Y,X),ui(ne,Y,X),ui(ne,Y,X),ui(ne,Y,X)}const z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),V=z.vertexLength;_i(this.layoutVertexArray,A,I,-1,-1),_i(this.layoutVertexArray,A,I,1,-1),_i(this.layoutVertexArray,A,I,1,1),_i(this.layoutVertexArray,A,I,-1,1),this.indexArray.emplaceBack(V,V+1,V+2),this.indexArray.emplaceBack(V,V+2,V+3),z.vertexLength+=4,z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,u,{},p,m,x)}}function Sa(i,o){for(let s=0;s<i.length;s++)if(fl(o,i[s]))return!0;for(let s=0;s<o.length;s++)if(fl(i,o[s]))return!0;return!!yh(i,o)}function _s(i,o,s){return!!fl(i,o)||!!vh(o,i,s)}function $a(i,o){if(i.length===1)return Kf(o,i[0]);for(let s=0;s<o.length;s++){const u=o[s];for(let p=0;p<u.length;p++)if(fl(i,u[p]))return!0}for(let s=0;s<i.length;s++)if(Kf(o,i[s]))return!0;for(let s=0;s<o.length;s++)if(yh(i,o[s]))return!0;return!1}function Qc(i,o,s){if(i.length>1){if(yh(i,o))return!0;for(let u=0;u<o.length;u++)if(vh(o[u],i,s))return!0}for(let u=0;u<i.length;u++)if(vh(i[u],o,s))return!0;return!1}function yh(i,o){if(i.length===0||o.length===0)return!1;for(let s=0;s<i.length-1;s++){const u=i[s],p=i[s+1];for(let m=0;m<o.length-1;m++)if(bh(u,p,o[m],o[m+1]))return!0}return!1}function bh(i,o,s,u){return an(i,s,u)!==an(o,s,u)&&an(i,o,s)!==an(i,o,u)}function vh(i,o,s){const u=s*s;if(o.length===1)return i.distSqr(o[0])<u;for(let p=1;p<o.length;p++)if(Jc(i,o[p-1],o[p])<u)return!0;return!1}function Jc(i,o,s){const u=o.distSqr(s);if(u===0)return i.distSqr(o);const p=((i.x-o.x)*(s.x-o.x)+(i.y-o.y)*(s.y-o.y))/u;return i.distSqr(p<0?o:p>1?s:s.sub(o)._mult(p)._add(o))}function Kf(i,o){let s,u,p,m=!1;for(let v=0;v<i.length;v++){s=i[v];for(let x=0,T=s.length-1;x<s.length;T=x++)u=s[x],p=s[T],u.y>o.y!=p.y>o.y&&o.x<(p.x-u.x)*(o.y-u.y)/(p.y-u.y)+u.x&&(m=!m)}return m}function fl(i,o){let s=!1;for(let u=0,p=i.length-1;u<i.length;p=u++){const m=i[u],v=i[p];m.y>o.y!=v.y>o.y&&o.x<(v.x-m.x)*(o.y-m.y)/(v.y-m.y)+m.x&&(s=!s)}return s}function jv(i,o,s,u,p){for(const v of i)if(o<=v.x&&s<=v.y&&u>=v.x&&p>=v.y)return!0;const m=[new ve(o,s),new ve(o,p),new ve(u,p),new ve(u,s)];if(i.length>2){for(const v of m)if(fl(i,v))return!0}for(let v=0;v<i.length-1;v++)if(Qx(i[v],i[v+1],m))return!0;return!1}function Qx(i,o,s){const u=s[0],p=s[2];if(i.x<u.x&&o.x<u.x||i.x>p.x&&o.x>p.x||i.y<u.y&&o.y<u.y||i.y>p.y&&o.y>p.y)return!1;const m=an(i,o,s[0]);return m!==an(i,o,s[1])||m!==an(i,o,s[2])||m!==an(i,o,s[3])}function Xf(i,o,s,u,p,m){let v=o.y-i.y,x=i.x-o.x;if(m=m||0){const T=v*v+x*x;if(T===0)return!0;const S=Math.sqrt(T);v/=S,x/=S}return!((s.x-i.x)*v+(s.y-i.y)*x-m<0||(u.x-i.x)*v+(u.y-i.y)*x-m<0||(p.x-i.x)*v+(p.y-i.y)*x-m<0)}function $v(i,o,s,u,p,m,v){return!(Xf(i,o,u,p,m,v)||Xf(o,s,u,p,m,v)||Xf(s,i,u,p,m,v)||Xf(u,p,i,o,s,v)||Xf(p,m,i,o,s,v)||Xf(m,u,i,o,s,v))}function Bs(i,o,s){const u=o.paint.get(i).value;return u.kind==="constant"?u.value:s.programConfigurations.get(o.id).getMaxValue(i)}function _h(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Uv(i,o,s,u,p){if(!o[0]&&!o[1])return i;const m=ve.convert(o)._mult(p);s==="viewport"&&m._rotate(-u);const v=[];for(let x=0;x<i.length;x++)v.push(i[x].sub(m));return v}function Vv(i,o,s,u){const p=ve.convert(i)._mult(u);return o==="viewport"&&p._rotate(-s),p}rn(ri,"CircleBucket",{omit:["layers"]});const Hv=new wo({"circle-sort-key":new Cn(et.layout_circle["circle-sort-key"]),visibility:new $t(et.layout_circle.visibility)});var Jx={paint:new wo({"circle-radius":new Cn(et.paint_circle["circle-radius"]),"circle-color":new Cn(et.paint_circle["circle-color"]),"circle-blur":new Cn(et.paint_circle["circle-blur"]),"circle-opacity":new Cn(et.paint_circle["circle-opacity"]),"circle-translate":new $t(et.paint_circle["circle-translate"]),"circle-translate-anchor":new $t(et.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new $t(et.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new $t(et.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Cn(et.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Cn(et.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Cn(et.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new $t(et.paint_circle["circle-emissive-strength"])}),layout:Hv},di={},hi={};Object.defineProperty(hi,"__esModule",{value:!0}),hi.setMatrixArrayType=function(i){hi.ARRAY_TYPE=cP=i},hi.toRadian=function(i){return i*Vq},hi.equals=function(i,o){return Math.abs(i-o)<=Wv*Math.max(1,Math.abs(i),Math.abs(o))},hi.RANDOM=hi.ARRAY_TYPE=hi.EPSILON=void 0;var Wv=1e-6;hi.EPSILON=Wv;var cP=typeof Float32Array<"u"?Float32Array:Array;hi.ARRAY_TYPE=cP;var Uq=Math.random;hi.RANDOM=Uq;var Vq=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var i=0,o=arguments.length;o--;)i+=arguments[o]*arguments[o];return Math.sqrt(i)});var Lo={};function Dk(i){return Dk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Dk(i)}Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.create=function(){var i=new Qf.ARRAY_TYPE(4);return Qf.ARRAY_TYPE!=Float32Array&&(i[1]=0,i[2]=0),i[0]=1,i[3]=1,i},Lo.clone=function(i){var o=new Qf.ARRAY_TYPE(4);return o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o},Lo.copy=function(i,o){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i},Lo.identity=function(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=1,i},Lo.fromValues=function(i,o,s,u){var p=new Qf.ARRAY_TYPE(4);return p[0]=i,p[1]=o,p[2]=s,p[3]=u,p},Lo.set=function(i,o,s,u,p){return i[0]=o,i[1]=s,i[2]=u,i[3]=p,i},Lo.transpose=function(i,o){if(i===o){var s=o[1];i[1]=o[2],i[2]=s}else i[0]=o[0],i[1]=o[2],i[2]=o[1],i[3]=o[3];return i},Lo.invert=function(i,o){var s=o[0],u=o[1],p=o[2],m=o[3],v=s*m-p*u;return v?(i[0]=m*(v=1/v),i[1]=-u*v,i[2]=-p*v,i[3]=s*v,i):null},Lo.adjoint=function(i,o){var s=o[0];return i[0]=o[3],i[1]=-o[1],i[2]=-o[2],i[3]=s,i},Lo.determinant=function(i){return i[0]*i[3]-i[2]*i[1]},Lo.multiply=dP,Lo.rotate=function(i,o,s){var u=o[0],p=o[1],m=o[2],v=o[3],x=Math.sin(s),T=Math.cos(s);return i[0]=u*T+m*x,i[1]=p*T+v*x,i[2]=u*-x+m*T,i[3]=p*-x+v*T,i},Lo.scale=function(i,o,s){var u=o[1],p=o[2],m=o[3],v=s[0],x=s[1];return i[0]=o[0]*v,i[1]=u*v,i[2]=p*x,i[3]=m*x,i},Lo.fromRotation=function(i,o){var s=Math.sin(o),u=Math.cos(o);return i[0]=u,i[1]=s,i[2]=-s,i[3]=u,i},Lo.fromScaling=function(i,o){return i[0]=o[0],i[1]=0,i[2]=0,i[3]=o[1],i},Lo.str=function(i){return"mat2("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")"},Lo.frob=function(i){return Math.hypot(i[0],i[1],i[2],i[3])},Lo.LDU=function(i,o,s,u){return i[2]=u[2]/u[0],s[0]=u[0],s[1]=u[1],s[3]=u[3]-i[2]*s[1],[i,o,s]},Lo.add=function(i,o,s){return i[0]=o[0]+s[0],i[1]=o[1]+s[1],i[2]=o[2]+s[2],i[3]=o[3]+s[3],i},Lo.subtract=hP,Lo.exactEquals=function(i,o){return i[0]===o[0]&&i[1]===o[1]&&i[2]===o[2]&&i[3]===o[3]},Lo.equals=function(i,o){var s=i[0],u=i[1],p=i[2],m=i[3],v=o[0],x=o[1],T=o[2],S=o[3];return Math.abs(s-v)<=Qf.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-x)<=Qf.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(p-T)<=Qf.EPSILON*Math.max(1,Math.abs(p),Math.abs(T))&&Math.abs(m-S)<=Qf.EPSILON*Math.max(1,Math.abs(m),Math.abs(S))},Lo.multiplyScalar=function(i,o,s){return i[0]=o[0]*s,i[1]=o[1]*s,i[2]=o[2]*s,i[3]=o[3]*s,i},Lo.multiplyScalarAndAdd=function(i,o,s,u){return i[0]=o[0]+s[0]*u,i[1]=o[1]+s[1]*u,i[2]=o[2]+s[2]*u,i[3]=o[3]+s[3]*u,i},Lo.sub=Lo.mul=void 0;var Qf=function(i,o){if(i&&i.__esModule)return i;if(i===null||Dk(i)!=="object"&&typeof i!="function")return{default:i};var s=uP(void 0);if(s&&s.has(i))return s.get(i);var u={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in i)if(m!=="default"&&Object.prototype.hasOwnProperty.call(i,m)){var v=p?Object.getOwnPropertyDescriptor(i,m):null;v&&(v.get||v.set)?Object.defineProperty(u,m,v):u[m]=i[m]}return u.default=i,s&&s.set(i,u),u}(hi);function uP(i){if(typeof WeakMap!="function")return null;var o=new WeakMap,s=new WeakMap;return(uP=function(u){return u?s:o})(i)}function dP(i,o,s){var u=o[0],p=o[1],m=o[2],v=o[3],x=s[0],T=s[1],S=s[2],A=s[3];return i[0]=u*x+m*T,i[1]=p*x+v*T,i[2]=u*S+m*A,i[3]=p*S+v*A,i}function hP(i,o,s){return i[0]=o[0]-s[0],i[1]=o[1]-s[1],i[2]=o[2]-s[2],i[3]=o[3]-s[3],i}Lo.mul=dP,Lo.sub=hP;var zo={};function Rk(i){return Rk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Rk(i)}Object.defineProperty(zo,"__esModule",{value:!0}),zo.create=function(){var i=new ed.ARRAY_TYPE(6);return ed.ARRAY_TYPE!=Float32Array&&(i[1]=0,i[2]=0,i[4]=0,i[5]=0),i[0]=1,i[3]=1,i},zo.clone=function(i){var o=new ed.ARRAY_TYPE(6);return o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[4]=i[4],o[5]=i[5],o},zo.copy=function(i,o){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[4]=o[4],i[5]=o[5],i},zo.identity=function(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=1,i[4]=0,i[5]=0,i},zo.fromValues=function(i,o,s,u,p,m){var v=new ed.ARRAY_TYPE(6);return v[0]=i,v[1]=o,v[2]=s,v[3]=u,v[4]=p,v[5]=m,v},zo.set=function(i,o,s,u,p,m,v){return i[0]=o,i[1]=s,i[2]=u,i[3]=p,i[4]=m,i[5]=v,i},zo.invert=function(i,o){var s=o[0],u=o[1],p=o[2],m=o[3],v=o[4],x=o[5],T=s*m-u*p;return T?(i[0]=m*(T=1/T),i[1]=-u*T,i[2]=-p*T,i[3]=s*T,i[4]=(p*x-m*v)*T,i[5]=(u*v-s*x)*T,i):null},zo.determinant=function(i){return i[0]*i[3]-i[1]*i[2]},zo.multiply=pP,zo.rotate=function(i,o,s){var u=o[0],p=o[1],m=o[2],v=o[3],x=o[4],T=o[5],S=Math.sin(s),A=Math.cos(s);return i[0]=u*A+m*S,i[1]=p*A+v*S,i[2]=u*-S+m*A,i[3]=p*-S+v*A,i[4]=x,i[5]=T,i},zo.scale=function(i,o,s){var u=o[1],p=o[2],m=o[3],v=o[4],x=o[5],T=s[0],S=s[1];return i[0]=o[0]*T,i[1]=u*T,i[2]=p*S,i[3]=m*S,i[4]=v,i[5]=x,i},zo.translate=function(i,o,s){var u=o[0],p=o[1],m=o[2],v=o[3],x=o[4],T=o[5],S=s[0],A=s[1];return i[0]=u,i[1]=p,i[2]=m,i[3]=v,i[4]=u*S+m*A+x,i[5]=p*S+v*A+T,i},zo.fromRotation=function(i,o){var s=Math.sin(o),u=Math.cos(o);return i[0]=u,i[1]=s,i[2]=-s,i[3]=u,i[4]=0,i[5]=0,i},zo.fromScaling=function(i,o){return i[0]=o[0],i[1]=0,i[2]=0,i[3]=o[1],i[4]=0,i[5]=0,i},zo.fromTranslation=function(i,o){return i[0]=1,i[1]=0,i[2]=0,i[3]=1,i[4]=o[0],i[5]=o[1],i},zo.str=function(i){return"mat2d("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+", "+i[4]+", "+i[5]+")"},zo.frob=function(i){return Math.hypot(i[0],i[1],i[2],i[3],i[4],i[5],1)},zo.add=function(i,o,s){return i[0]=o[0]+s[0],i[1]=o[1]+s[1],i[2]=o[2]+s[2],i[3]=o[3]+s[3],i[4]=o[4]+s[4],i[5]=o[5]+s[5],i},zo.subtract=mP,zo.multiplyScalar=function(i,o,s){return i[0]=o[0]*s,i[1]=o[1]*s,i[2]=o[2]*s,i[3]=o[3]*s,i[4]=o[4]*s,i[5]=o[5]*s,i},zo.multiplyScalarAndAdd=function(i,o,s,u){return i[0]=o[0]+s[0]*u,i[1]=o[1]+s[1]*u,i[2]=o[2]+s[2]*u,i[3]=o[3]+s[3]*u,i[4]=o[4]+s[4]*u,i[5]=o[5]+s[5]*u,i},zo.exactEquals=function(i,o){return i[0]===o[0]&&i[1]===o[1]&&i[2]===o[2]&&i[3]===o[3]&&i[4]===o[4]&&i[5]===o[5]},zo.equals=function(i,o){var s=i[0],u=i[1],p=i[2],m=i[3],v=i[4],x=i[5],T=o[0],S=o[1],A=o[2],I=o[3],z=o[4],V=o[5];return Math.abs(s-T)<=ed.EPSILON*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(u-S)<=ed.EPSILON*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(p-A)<=ed.EPSILON*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(m-I)<=ed.EPSILON*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(v-z)<=ed.EPSILON*Math.max(1,Math.abs(v),Math.abs(z))&&Math.abs(x-V)<=ed.EPSILON*Math.max(1,Math.abs(x),Math.abs(V))},zo.sub=zo.mul=void 0;var ed=function(i,o){if(i&&i.__esModule)return i;if(i===null||Rk(i)!=="object"&&typeof i!="function")return{default:i};var s=fP(void 0);if(s&&s.has(i))return s.get(i);var u={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in i)if(m!=="default"&&Object.prototype.hasOwnProperty.call(i,m)){var v=p?Object.getOwnPropertyDescriptor(i,m):null;v&&(v.get||v.set)?Object.defineProperty(u,m,v):u[m]=i[m]}return u.default=i,s&&s.set(i,u),u}(hi);function fP(i){if(typeof WeakMap!="function")return null;var o=new WeakMap,s=new WeakMap;return(fP=function(u){return u?s:o})(i)}function pP(i,o,s){var u=o[0],p=o[1],m=o[2],v=o[3],x=o[4],T=o[5],S=s[0],A=s[1],I=s[2],z=s[3],V=s[4],Y=s[5];return i[0]=u*S+m*A,i[1]=p*S+v*A,i[2]=u*I+m*z,i[3]=p*I+v*z,i[4]=u*V+m*Y+x,i[5]=p*V+v*Y+T,i}function mP(i,o,s){return i[0]=o[0]-s[0],i[1]=o[1]-s[1],i[2]=o[2]-s[2],i[3]=o[3]-s[3],i[4]=o[4]-s[4],i[5]=o[5]-s[5],i}zo.mul=pP,zo.sub=mP;var so={};function Ik(i){return Ik=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ik(i)}Object.defineProperty(so,"__esModule",{value:!0}),so.create=function(){var i=new pl.ARRAY_TYPE(9);return pl.ARRAY_TYPE!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[5]=0,i[6]=0,i[7]=0),i[0]=1,i[4]=1,i[8]=1,i},so.fromMat4=function(i,o){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[4],i[4]=o[5],i[5]=o[6],i[6]=o[8],i[7]=o[9],i[8]=o[10],i},so.clone=function(i){var o=new pl.ARRAY_TYPE(9);return o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[4]=i[4],o[5]=i[5],o[6]=i[6],o[7]=i[7],o[8]=i[8],o},so.copy=function(i,o){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i[8]=o[8],i},so.fromValues=function(i,o,s,u,p,m,v,x,T){var S=new pl.ARRAY_TYPE(9);return S[0]=i,S[1]=o,S[2]=s,S[3]=u,S[4]=p,S[5]=m,S[6]=v,S[7]=x,S[8]=T,S},so.set=function(i,o,s,u,p,m,v,x,T,S){return i[0]=o,i[1]=s,i[2]=u,i[3]=p,i[4]=m,i[5]=v,i[6]=x,i[7]=T,i[8]=S,i},so.identity=function(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=1,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},so.transpose=function(i,o){if(i===o){var s=o[1],u=o[2],p=o[5];i[1]=o[3],i[2]=o[6],i[3]=s,i[5]=o[7],i[6]=u,i[7]=p}else i[0]=o[0],i[1]=o[3],i[2]=o[6],i[3]=o[1],i[4]=o[4],i[5]=o[7],i[6]=o[2],i[7]=o[5],i[8]=o[8];return i},so.invert=function(i,o){var s=o[0],u=o[1],p=o[2],m=o[3],v=o[4],x=o[5],T=o[6],S=o[7],A=o[8],I=A*v-x*S,z=-A*m+x*T,V=S*m-v*T,Y=s*I+u*z+p*V;return Y?(i[0]=I*(Y=1/Y),i[1]=(-A*u+p*S)*Y,i[2]=(x*u-p*v)*Y,i[3]=z*Y,i[4]=(A*s-p*T)*Y,i[5]=(-x*s+p*m)*Y,i[6]=V*Y,i[7]=(-S*s+u*T)*Y,i[8]=(v*s-u*m)*Y,i):null},so.adjoint=function(i,o){var s=o[0],u=o[1],p=o[2],m=o[3],v=o[4],x=o[5],T=o[6],S=o[7],A=o[8];return i[0]=v*A-x*S,i[1]=p*S-u*A,i[2]=u*x-p*v,i[3]=x*T-m*A,i[4]=s*A-p*T,i[5]=p*m-s*x,i[6]=m*S-v*T,i[7]=u*T-s*S,i[8]=s*v-u*m,i},so.determinant=function(i){var o=i[3],s=i[4],u=i[5],p=i[6],m=i[7],v=i[8];return i[0]*(v*s-u*m)+i[1]*(-v*o+u*p)+i[2]*(m*o-s*p)},so.multiply=yP,so.translate=function(i,o,s){var u=o[0],p=o[1],m=o[2],v=o[3],x=o[4],T=o[5],S=o[6],A=o[7],I=o[8],z=s[0],V=s[1];return i[0]=u,i[1]=p,i[2]=m,i[3]=v,i[4]=x,i[5]=T,i[6]=z*u+V*v+S,i[7]=z*p+V*x+A,i[8]=z*m+V*T+I,i},so.rotate=function(i,o,s){var u=o[0],p=o[1],m=o[2],v=o[3],x=o[4],T=o[5],S=o[6],A=o[7],I=o[8],z=Math.sin(s),V=Math.cos(s);return i[0]=V*u+z*v,i[1]=V*p+z*x,i[2]=V*m+z*T,i[3]=V*v-z*u,i[4]=V*x-z*p,i[5]=V*T-z*m,i[6]=S,i[7]=A,i[8]=I,i},so.scale=function(i,o,s){var u=s[0],p=s[1];return i[0]=u*o[0],i[1]=u*o[1],i[2]=u*o[2],i[3]=p*o[3],i[4]=p*o[4],i[5]=p*o[5],i[6]=o[6],i[7]=o[7],i[8]=o[8],i},so.fromTranslation=function(i,o){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=1,i[5]=0,i[6]=o[0],i[7]=o[1],i[8]=1,i},so.fromRotation=function(i,o){var s=Math.sin(o),u=Math.cos(o);return i[0]=u,i[1]=s,i[2]=0,i[3]=-s,i[4]=u,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},so.fromScaling=function(i,o){return i[0]=o[0],i[1]=0,i[2]=0,i[3]=0,i[4]=o[1],i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},so.fromMat2d=function(i,o){return i[0]=o[0],i[1]=o[1],i[2]=0,i[3]=o[2],i[4]=o[3],i[5]=0,i[6]=o[4],i[7]=o[5],i[8]=1,i},so.fromQuat=function(i,o){var s=o[0],u=o[1],p=o[2],m=o[3],v=s+s,x=u+u,T=p+p,S=s*v,A=u*v,I=u*x,z=p*v,V=p*x,Y=p*T,X=m*v,ne=m*x,ae=m*T;return i[0]=1-I-Y,i[3]=A-ae,i[6]=z+ne,i[1]=A+ae,i[4]=1-S-Y,i[7]=V-X,i[2]=z-ne,i[5]=V+X,i[8]=1-S-I,i},so.normalFromMat4=function(i,o){var s=o[0],u=o[1],p=o[2],m=o[3],v=o[4],x=o[5],T=o[6],S=o[7],A=o[8],I=o[9],z=o[10],V=o[11],Y=o[12],X=o[13],ne=o[14],ae=o[15],ye=s*x-u*v,xe=s*T-p*v,_e=s*S-m*v,Ie=u*T-p*x,Me=u*S-m*x,$e=p*S-m*T,We=A*X-I*Y,qe=A*ne-z*Y,rt=A*ae-V*Y,Xe=I*ne-z*X,mt=I*ae-V*X,St=z*ae-V*ne,ht=ye*St-xe*mt+_e*Xe+Ie*rt-Me*qe+$e*We;return ht?(i[0]=(x*St-T*mt+S*Xe)*(ht=1/ht),i[1]=(T*rt-v*St-S*qe)*ht,i[2]=(v*mt-x*rt+S*We)*ht,i[3]=(p*mt-u*St-m*Xe)*ht,i[4]=(s*St-p*rt+m*qe)*ht,i[5]=(u*rt-s*mt-m*We)*ht,i[6]=(X*$e-ne*Me+ae*Ie)*ht,i[7]=(ne*_e-Y*$e-ae*xe)*ht,i[8]=(Y*Me-X*_e+ae*ye)*ht,i):null},so.projection=function(i,o,s){return i[0]=2/o,i[1]=0,i[2]=0,i[3]=0,i[4]=-2/s,i[5]=0,i[6]=-1,i[7]=1,i[8]=1,i},so.str=function(i){return"mat3("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+", "+i[4]+", "+i[5]+", "+i[6]+", "+i[7]+", "+i[8]+")"},so.frob=function(i){return Math.hypot(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8])},so.add=function(i,o,s){return i[0]=o[0]+s[0],i[1]=o[1]+s[1],i[2]=o[2]+s[2],i[3]=o[3]+s[3],i[4]=o[4]+s[4],i[5]=o[5]+s[5],i[6]=o[6]+s[6],i[7]=o[7]+s[7],i[8]=o[8]+s[8],i},so.subtract=bP,so.multiplyScalar=function(i,o,s){return i[0]=o[0]*s,i[1]=o[1]*s,i[2]=o[2]*s,i[3]=o[3]*s,i[4]=o[4]*s,i[5]=o[5]*s,i[6]=o[6]*s,i[7]=o[7]*s,i[8]=o[8]*s,i},so.multiplyScalarAndAdd=function(i,o,s,u){return i[0]=o[0]+s[0]*u,i[1]=o[1]+s[1]*u,i[2]=o[2]+s[2]*u,i[3]=o[3]+s[3]*u,i[4]=o[4]+s[4]*u,i[5]=o[5]+s[5]*u,i[6]=o[6]+s[6]*u,i[7]=o[7]+s[7]*u,i[8]=o[8]+s[8]*u,i},so.exactEquals=function(i,o){return i[0]===o[0]&&i[1]===o[1]&&i[2]===o[2]&&i[3]===o[3]&&i[4]===o[4]&&i[5]===o[5]&&i[6]===o[6]&&i[7]===o[7]&&i[8]===o[8]},so.equals=function(i,o){var s=i[0],u=i[1],p=i[2],m=i[3],v=i[4],x=i[5],T=i[6],S=i[7],A=i[8],I=o[0],z=o[1],V=o[2],Y=o[3],X=o[4],ne=o[5],ae=o[6],ye=o[7],xe=o[8];return Math.abs(s-I)<=pl.EPSILON*Math.max(1,Math.abs(s),Math.abs(I))&&Math.abs(u-z)<=pl.EPSILON*Math.max(1,Math.abs(u),Math.abs(z))&&Math.abs(p-V)<=pl.EPSILON*Math.max(1,Math.abs(p),Math.abs(V))&&Math.abs(m-Y)<=pl.EPSILON*Math.max(1,Math.abs(m),Math.abs(Y))&&Math.abs(v-X)<=pl.EPSILON*Math.max(1,Math.abs(v),Math.abs(X))&&Math.abs(x-ne)<=pl.EPSILON*Math.max(1,Math.abs(x),Math.abs(ne))&&Math.abs(T-ae)<=pl.EPSILON*Math.max(1,Math.abs(T),Math.abs(ae))&&Math.abs(S-ye)<=pl.EPSILON*Math.max(1,Math.abs(S),Math.abs(ye))&&Math.abs(A-xe)<=pl.EPSILON*Math.max(1,Math.abs(A),Math.abs(xe))},so.sub=so.mul=void 0;var pl=function(i,o){if(i&&i.__esModule)return i;if(i===null||Ik(i)!=="object"&&typeof i!="function")return{default:i};var s=gP(void 0);if(s&&s.has(i))return s.get(i);var u={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in i)if(m!=="default"&&Object.prototype.hasOwnProperty.call(i,m)){var v=p?Object.getOwnPropertyDescriptor(i,m):null;v&&(v.get||v.set)?Object.defineProperty(u,m,v):u[m]=i[m]}return u.default=i,s&&s.set(i,u),u}(hi);function gP(i){if(typeof WeakMap!="function")return null;var o=new WeakMap,s=new WeakMap;return(gP=function(u){return u?s:o})(i)}function yP(i,o,s){var u=o[0],p=o[1],m=o[2],v=o[3],x=o[4],T=o[5],S=o[6],A=o[7],I=o[8],z=s[0],V=s[1],Y=s[2],X=s[3],ne=s[4],ae=s[5],ye=s[6],xe=s[7],_e=s[8];return i[0]=z*u+V*v+Y*S,i[1]=z*p+V*x+Y*A,i[2]=z*m+V*T+Y*I,i[3]=X*u+ne*v+ae*S,i[4]=X*p+ne*x+ae*A,i[5]=X*m+ne*T+ae*I,i[6]=ye*u+xe*v+_e*S,i[7]=ye*p+xe*x+_e*A,i[8]=ye*m+xe*T+_e*I,i}function bP(i,o,s){return i[0]=o[0]-s[0],i[1]=o[1]-s[1],i[2]=o[2]-s[2],i[3]=o[3]-s[3],i[4]=o[4]-s[4],i[5]=o[5]-s[5],i[6]=o[6]-s[6],i[7]=o[7]-s[7],i[8]=o[8]-s[8],i}so.mul=yP,so.sub=bP;var dr={};function Pk(i){return Pk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Pk(i)}Object.defineProperty(dr,"__esModule",{value:!0}),dr.create=function(){var i=new Xo.ARRAY_TYPE(16);return Xo.ARRAY_TYPE!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},dr.clone=function(i){var o=new Xo.ARRAY_TYPE(16);return o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[4]=i[4],o[5]=i[5],o[6]=i[6],o[7]=i[7],o[8]=i[8],o[9]=i[9],o[10]=i[10],o[11]=i[11],o[12]=i[12],o[13]=i[13],o[14]=i[14],o[15]=i[15],o},dr.copy=function(i,o){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i[8]=o[8],i[9]=o[9],i[10]=o[10],i[11]=o[11],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15],i},dr.fromValues=function(i,o,s,u,p,m,v,x,T,S,A,I,z,V,Y,X){var ne=new Xo.ARRAY_TYPE(16);return ne[0]=i,ne[1]=o,ne[2]=s,ne[3]=u,ne[4]=p,ne[5]=m,ne[6]=v,ne[7]=x,ne[8]=T,ne[9]=S,ne[10]=A,ne[11]=I,ne[12]=z,ne[13]=V,ne[14]=Y,ne[15]=X,ne},dr.set=function(i,o,s,u,p,m,v,x,T,S,A,I,z,V,Y,X,ne){return i[0]=o,i[1]=s,i[2]=u,i[3]=p,i[4]=m,i[5]=v,i[6]=x,i[7]=T,i[8]=S,i[9]=A,i[10]=I,i[11]=z,i[12]=V,i[13]=Y,i[14]=X,i[15]=ne,i},dr.identity=_P,dr.transpose=function(i,o){if(i===o){var s=o[1],u=o[2],p=o[3],m=o[6],v=o[7],x=o[11];i[1]=o[4],i[2]=o[8],i[3]=o[12],i[4]=s,i[6]=o[9],i[7]=o[13],i[8]=u,i[9]=m,i[11]=o[14],i[12]=p,i[13]=v,i[14]=x}else i[0]=o[0],i[1]=o[4],i[2]=o[8],i[3]=o[12],i[4]=o[1],i[5]=o[5],i[6]=o[9],i[7]=o[13],i[8]=o[2],i[9]=o[6],i[10]=o[10],i[11]=o[14],i[12]=o[3],i[13]=o[7],i[14]=o[11],i[15]=o[15];return i},dr.invert=function(i,o){var s=o[0],u=o[1],p=o[2],m=o[3],v=o[4],x=o[5],T=o[6],S=o[7],A=o[8],I=o[9],z=o[10],V=o[11],Y=o[12],X=o[13],ne=o[14],ae=o[15],ye=s*x-u*v,xe=s*T-p*v,_e=s*S-m*v,Ie=u*T-p*x,Me=u*S-m*x,$e=p*S-m*T,We=A*X-I*Y,qe=A*ne-z*Y,rt=A*ae-V*Y,Xe=I*ne-z*X,mt=I*ae-V*X,St=z*ae-V*ne,ht=ye*St-xe*mt+_e*Xe+Ie*rt-Me*qe+$e*We;return ht?(i[0]=(x*St-T*mt+S*Xe)*(ht=1/ht),i[1]=(p*mt-u*St-m*Xe)*ht,i[2]=(X*$e-ne*Me+ae*Ie)*ht,i[3]=(z*Me-I*$e-V*Ie)*ht,i[4]=(T*rt-v*St-S*qe)*ht,i[5]=(s*St-p*rt+m*qe)*ht,i[6]=(ne*_e-Y*$e-ae*xe)*ht,i[7]=(A*$e-z*_e+V*xe)*ht,i[8]=(v*mt-x*rt+S*We)*ht,i[9]=(u*rt-s*mt-m*We)*ht,i[10]=(Y*Me-X*_e+ae*ye)*ht,i[11]=(I*_e-A*Me-V*ye)*ht,i[12]=(x*qe-v*Xe-T*We)*ht,i[13]=(s*Xe-u*qe+p*We)*ht,i[14]=(X*xe-Y*Ie-ne*ye)*ht,i[15]=(A*Ie-I*xe+z*ye)*ht,i):null},dr.adjoint=function(i,o){var s=o[0],u=o[1],p=o[2],m=o[3],v=o[4],x=o[5],T=o[6],S=o[7],A=o[8],I=o[9],z=o[10],V=o[11],Y=o[12],X=o[13],ne=o[14],ae=o[15];return i[0]=x*(z*ae-V*ne)-I*(T*ae-S*ne)+X*(T*V-S*z),i[1]=-(u*(z*ae-V*ne)-I*(p*ae-m*ne)+X*(p*V-m*z)),i[2]=u*(T*ae-S*ne)-x*(p*ae-m*ne)+X*(p*S-m*T),i[3]=-(u*(T*V-S*z)-x*(p*V-m*z)+I*(p*S-m*T)),i[4]=-(v*(z*ae-V*ne)-A*(T*ae-S*ne)+Y*(T*V-S*z)),i[5]=s*(z*ae-V*ne)-A*(p*ae-m*ne)+Y*(p*V-m*z),i[6]=-(s*(T*ae-S*ne)-v*(p*ae-m*ne)+Y*(p*S-m*T)),i[7]=s*(T*V-S*z)-v*(p*V-m*z)+A*(p*S-m*T),i[8]=v*(I*ae-V*X)-A*(x*ae-S*X)+Y*(x*V-S*I),i[9]=-(s*(I*ae-V*X)-A*(u*ae-m*X)+Y*(u*V-m*I)),i[10]=s*(x*ae-S*X)-v*(u*ae-m*X)+Y*(u*S-m*x),i[11]=-(s*(x*V-S*I)-v*(u*V-m*I)+A*(u*S-m*x)),i[12]=-(v*(I*ne-z*X)-A*(x*ne-T*X)+Y*(x*z-T*I)),i[13]=s*(I*ne-z*X)-A*(u*ne-p*X)+Y*(u*z-p*I),i[14]=-(s*(x*ne-T*X)-v*(u*ne-p*X)+Y*(u*T-p*x)),i[15]=s*(x*z-T*I)-v*(u*z-p*I)+A*(u*T-p*x),i},dr.determinant=function(i){var o=i[0],s=i[1],u=i[2],p=i[3],m=i[4],v=i[5],x=i[6],T=i[7],S=i[8],A=i[9],I=i[10],z=i[11],V=i[12],Y=i[13],X=i[14],ne=i[15];return(o*v-s*m)*(I*ne-z*X)-(o*x-u*m)*(A*ne-z*Y)+(o*T-p*m)*(A*X-I*Y)+(s*x-u*v)*(S*ne-z*V)-(s*T-p*v)*(S*X-I*V)+(u*T-p*x)*(S*Y-A*V)},dr.multiply=xP,dr.translate=function(i,o,s){var u,p,m,v,x,T,S,A,I,z,V,Y,X=s[0],ne=s[1],ae=s[2];return o===i?(i[12]=o[0]*X+o[4]*ne+o[8]*ae+o[12],i[13]=o[1]*X+o[5]*ne+o[9]*ae+o[13],i[14]=o[2]*X+o[6]*ne+o[10]*ae+o[14],i[15]=o[3]*X+o[7]*ne+o[11]*ae+o[15]):(p=o[1],m=o[2],v=o[3],x=o[4],T=o[5],S=o[6],A=o[7],I=o[8],z=o[9],V=o[10],Y=o[11],i[0]=u=o[0],i[1]=p,i[2]=m,i[3]=v,i[4]=x,i[5]=T,i[6]=S,i[7]=A,i[8]=I,i[9]=z,i[10]=V,i[11]=Y,i[12]=u*X+x*ne+I*ae+o[12],i[13]=p*X+T*ne+z*ae+o[13],i[14]=m*X+S*ne+V*ae+o[14],i[15]=v*X+A*ne+Y*ae+o[15]),i},dr.scale=function(i,o,s){var u=s[0],p=s[1],m=s[2];return i[0]=o[0]*u,i[1]=o[1]*u,i[2]=o[2]*u,i[3]=o[3]*u,i[4]=o[4]*p,i[5]=o[5]*p,i[6]=o[6]*p,i[7]=o[7]*p,i[8]=o[8]*m,i[9]=o[9]*m,i[10]=o[10]*m,i[11]=o[11]*m,i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15],i},dr.rotate=function(i,o,s,u){var p,m,v,x,T,S,A,I,z,V,Y,X,ne,ae,ye,xe,_e,Ie,Me,$e,We,qe,rt,Xe,mt=u[0],St=u[1],ht=u[2],wt=Math.hypot(mt,St,ht);return wt<Xo.EPSILON?null:(mt*=wt=1/wt,St*=wt,ht*=wt,p=Math.sin(s),m=Math.cos(s),T=o[1],S=o[2],A=o[3],z=o[5],V=o[6],Y=o[7],ne=o[9],ae=o[10],ye=o[11],xe=mt*mt*(v=1-m)+m,Me=mt*St*v-ht*p,$e=St*St*v+m,We=ht*St*v+mt*p,qe=mt*ht*v+St*p,rt=St*ht*v-mt*p,Xe=ht*ht*v+m,i[0]=(x=o[0])*xe+(I=o[4])*(_e=St*mt*v+ht*p)+(X=o[8])*(Ie=ht*mt*v-St*p),i[1]=T*xe+z*_e+ne*Ie,i[2]=S*xe+V*_e+ae*Ie,i[3]=A*xe+Y*_e+ye*Ie,i[4]=x*Me+I*$e+X*We,i[5]=T*Me+z*$e+ne*We,i[6]=S*Me+V*$e+ae*We,i[7]=A*Me+Y*$e+ye*We,i[8]=x*qe+I*rt+X*Xe,i[9]=T*qe+z*rt+ne*Xe,i[10]=S*qe+V*rt+ae*Xe,i[11]=A*qe+Y*rt+ye*Xe,o!==i&&(i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i)},dr.rotateX=function(i,o,s){var u=Math.sin(s),p=Math.cos(s),m=o[4],v=o[5],x=o[6],T=o[7],S=o[8],A=o[9],I=o[10],z=o[11];return o!==i&&(i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i[4]=m*p+S*u,i[5]=v*p+A*u,i[6]=x*p+I*u,i[7]=T*p+z*u,i[8]=S*p-m*u,i[9]=A*p-v*u,i[10]=I*p-x*u,i[11]=z*p-T*u,i},dr.rotateY=function(i,o,s){var u=Math.sin(s),p=Math.cos(s),m=o[0],v=o[1],x=o[2],T=o[3],S=o[8],A=o[9],I=o[10],z=o[11];return o!==i&&(i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i[0]=m*p-S*u,i[1]=v*p-A*u,i[2]=x*p-I*u,i[3]=T*p-z*u,i[8]=m*u+S*p,i[9]=v*u+A*p,i[10]=x*u+I*p,i[11]=T*u+z*p,i},dr.rotateZ=function(i,o,s){var u=Math.sin(s),p=Math.cos(s),m=o[0],v=o[1],x=o[2],T=o[3],S=o[4],A=o[5],I=o[6],z=o[7];return o!==i&&(i[8]=o[8],i[9]=o[9],i[10]=o[10],i[11]=o[11],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i[0]=m*p+S*u,i[1]=v*p+A*u,i[2]=x*p+I*u,i[3]=T*p+z*u,i[4]=S*p-m*u,i[5]=A*p-v*u,i[6]=I*p-x*u,i[7]=z*p-T*u,i},dr.fromTranslation=function(i,o){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=o[0],i[13]=o[1],i[14]=o[2],i[15]=1,i},dr.fromScaling=function(i,o){return i[0]=o[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=o[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},dr.fromRotation=function(i,o,s){var u,p,m,v=s[0],x=s[1],T=s[2],S=Math.hypot(v,x,T);return S<Xo.EPSILON?null:(v*=S=1/S,x*=S,T*=S,u=Math.sin(o),p=Math.cos(o),i[0]=v*v*(m=1-p)+p,i[1]=x*v*m+T*u,i[2]=T*v*m-x*u,i[3]=0,i[4]=v*x*m-T*u,i[5]=x*x*m+p,i[6]=T*x*m+v*u,i[7]=0,i[8]=v*T*m+x*u,i[9]=x*T*m-v*u,i[10]=T*T*m+p,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i)},dr.fromXRotation=function(i,o){var s=Math.sin(o),u=Math.cos(o);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=u,i[6]=s,i[7]=0,i[8]=0,i[9]=-s,i[10]=u,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},dr.fromYRotation=function(i,o){var s=Math.sin(o),u=Math.cos(o);return i[0]=u,i[1]=0,i[2]=-s,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=s,i[9]=0,i[10]=u,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},dr.fromZRotation=function(i,o){var s=Math.sin(o),u=Math.cos(o);return i[0]=u,i[1]=s,i[2]=0,i[3]=0,i[4]=-s,i[5]=u,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},dr.fromRotationTranslation=wP,dr.fromQuat2=function(i,o){var s=new Xo.ARRAY_TYPE(3),u=-o[0],p=-o[1],m=-o[2],v=o[3],x=o[4],T=o[5],S=o[6],A=o[7],I=u*u+p*p+m*m+v*v;return I>0?(s[0]=2*(x*v+A*u+T*m-S*p)/I,s[1]=2*(T*v+A*p+S*u-x*m)/I,s[2]=2*(S*v+A*m+x*p-T*u)/I):(s[0]=2*(x*v+A*u+T*m-S*p),s[1]=2*(T*v+A*p+S*u-x*m),s[2]=2*(S*v+A*m+x*p-T*u)),wP(i,o,s),i},dr.getTranslation=function(i,o){return i[0]=o[12],i[1]=o[13],i[2]=o[14],i},dr.getScaling=EP,dr.getRotation=function(i,o){var s=new Xo.ARRAY_TYPE(3);EP(s,o);var u=1/s[0],p=1/s[1],m=1/s[2],v=o[0]*u,x=o[1]*p,T=o[2]*m,S=o[4]*u,A=o[5]*p,I=o[6]*m,z=o[8]*u,V=o[9]*p,Y=o[10]*m,X=v+A+Y,ne=0;return X>0?(ne=2*Math.sqrt(X+1),i[3]=.25*ne,i[0]=(I-V)/ne,i[1]=(z-T)/ne,i[2]=(x-S)/ne):v>A&&v>Y?(ne=2*Math.sqrt(1+v-A-Y),i[3]=(I-V)/ne,i[0]=.25*ne,i[1]=(x+S)/ne,i[2]=(z+T)/ne):A>Y?(ne=2*Math.sqrt(1+A-v-Y),i[3]=(z-T)/ne,i[0]=(x+S)/ne,i[1]=.25*ne,i[2]=(I+V)/ne):(ne=2*Math.sqrt(1+Y-v-A),i[3]=(x-S)/ne,i[0]=(z+T)/ne,i[1]=(I+V)/ne,i[2]=.25*ne),i},dr.fromRotationTranslationScale=function(i,o,s,u){var p=o[0],m=o[1],v=o[2],x=o[3],T=p+p,S=m+m,A=v+v,I=p*T,z=p*S,V=p*A,Y=m*S,X=m*A,ne=v*A,ae=x*T,ye=x*S,xe=x*A,_e=u[0],Ie=u[1],Me=u[2];return i[0]=(1-(Y+ne))*_e,i[1]=(z+xe)*_e,i[2]=(V-ye)*_e,i[3]=0,i[4]=(z-xe)*Ie,i[5]=(1-(I+ne))*Ie,i[6]=(X+ae)*Ie,i[7]=0,i[8]=(V+ye)*Me,i[9]=(X-ae)*Me,i[10]=(1-(I+Y))*Me,i[11]=0,i[12]=s[0],i[13]=s[1],i[14]=s[2],i[15]=1,i},dr.fromRotationTranslationScaleOrigin=function(i,o,s,u,p){var m=o[0],v=o[1],x=o[2],T=o[3],S=m+m,A=v+v,I=x+x,z=m*S,V=m*A,Y=m*I,X=v*A,ne=v*I,ae=x*I,ye=T*S,xe=T*A,_e=T*I,Ie=u[0],Me=u[1],$e=u[2],We=p[0],qe=p[1],rt=p[2],Xe=(1-(X+ae))*Ie,mt=(V+_e)*Ie,St=(Y-xe)*Ie,ht=(V-_e)*Me,wt=(1-(z+ae))*Me,lt=(ne+ye)*Me,xt=(Y+xe)*$e,Gt=(ne-ye)*$e,At=(1-(z+X))*$e;return i[0]=Xe,i[1]=mt,i[2]=St,i[3]=0,i[4]=ht,i[5]=wt,i[6]=lt,i[7]=0,i[8]=xt,i[9]=Gt,i[10]=At,i[11]=0,i[12]=s[0]+We-(Xe*We+ht*qe+xt*rt),i[13]=s[1]+qe-(mt*We+wt*qe+Gt*rt),i[14]=s[2]+rt-(St*We+lt*qe+At*rt),i[15]=1,i},dr.fromQuat=function(i,o){var s=o[0],u=o[1],p=o[2],m=o[3],v=s+s,x=u+u,T=p+p,S=s*v,A=u*v,I=u*x,z=p*v,V=p*x,Y=p*T,X=m*v,ne=m*x,ae=m*T;return i[0]=1-I-Y,i[1]=A+ae,i[2]=z-ne,i[3]=0,i[4]=A-ae,i[5]=1-S-Y,i[6]=V+X,i[7]=0,i[8]=z+ne,i[9]=V-X,i[10]=1-S-I,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},dr.frustum=function(i,o,s,u,p,m,v){var x=1/(s-o),T=1/(p-u),S=1/(m-v);return i[0]=2*m*x,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*m*T,i[6]=0,i[7]=0,i[8]=(s+o)*x,i[9]=(p+u)*T,i[10]=(v+m)*S,i[11]=-1,i[12]=0,i[13]=0,i[14]=v*m*2*S,i[15]=0,i},dr.perspectiveNO=TP,dr.perspectiveZO=function(i,o,s,u,p){var m,v=1/Math.tan(o/2);return i[0]=v/s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=v,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,p!=null&&p!==1/0?(i[10]=p*(m=1/(u-p)),i[14]=p*u*m):(i[10]=-1,i[14]=-u),i},dr.perspectiveFromFieldOfView=function(i,o,s,u){var p=Math.tan(o.upDegrees*Math.PI/180),m=Math.tan(o.downDegrees*Math.PI/180),v=Math.tan(o.leftDegrees*Math.PI/180),x=Math.tan(o.rightDegrees*Math.PI/180),T=2/(v+x),S=2/(p+m);return i[0]=T,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=S,i[6]=0,i[7]=0,i[8]=-(v-x)*T*.5,i[9]=(p-m)*S*.5,i[10]=u/(s-u),i[11]=-1,i[12]=0,i[13]=0,i[14]=u*s/(s-u),i[15]=0,i},dr.orthoNO=SP,dr.orthoZO=function(i,o,s,u,p,m,v){var x=1/(o-s),T=1/(u-p),S=1/(m-v);return i[0]=-2*x,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*T,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=S,i[11]=0,i[12]=(o+s)*x,i[13]=(p+u)*T,i[14]=m*S,i[15]=1,i},dr.lookAt=function(i,o,s,u){var p,m,v,x,T,S,A,I,z,V,Y=o[0],X=o[1],ne=o[2],ae=u[0],ye=u[1],xe=u[2],_e=s[0],Ie=s[1],Me=s[2];return Math.abs(Y-_e)<Xo.EPSILON&&Math.abs(X-Ie)<Xo.EPSILON&&Math.abs(ne-Me)<Xo.EPSILON?_P(i):(A=Y-_e,I=X-Ie,z=ne-Me,p=ye*(z*=V=1/Math.hypot(A,I,z))-xe*(I*=V),m=xe*(A*=V)-ae*z,v=ae*I-ye*A,(V=Math.hypot(p,m,v))?(p*=V=1/V,m*=V,v*=V):(p=0,m=0,v=0),x=I*v-z*m,T=z*p-A*v,S=A*m-I*p,(V=Math.hypot(x,T,S))?(x*=V=1/V,T*=V,S*=V):(x=0,T=0,S=0),i[0]=p,i[1]=x,i[2]=A,i[3]=0,i[4]=m,i[5]=T,i[6]=I,i[7]=0,i[8]=v,i[9]=S,i[10]=z,i[11]=0,i[12]=-(p*Y+m*X+v*ne),i[13]=-(x*Y+T*X+S*ne),i[14]=-(A*Y+I*X+z*ne),i[15]=1,i)},dr.targetTo=function(i,o,s,u){var p=o[0],m=o[1],v=o[2],x=u[0],T=u[1],S=u[2],A=p-s[0],I=m-s[1],z=v-s[2],V=A*A+I*I+z*z;V>0&&(A*=V=1/Math.sqrt(V),I*=V,z*=V);var Y=T*z-S*I,X=S*A-x*z,ne=x*I-T*A;return(V=Y*Y+X*X+ne*ne)>0&&(Y*=V=1/Math.sqrt(V),X*=V,ne*=V),i[0]=Y,i[1]=X,i[2]=ne,i[3]=0,i[4]=I*ne-z*X,i[5]=z*Y-A*ne,i[6]=A*X-I*Y,i[7]=0,i[8]=A,i[9]=I,i[10]=z,i[11]=0,i[12]=p,i[13]=m,i[14]=v,i[15]=1,i},dr.str=function(i){return"mat4("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+", "+i[4]+", "+i[5]+", "+i[6]+", "+i[7]+", "+i[8]+", "+i[9]+", "+i[10]+", "+i[11]+", "+i[12]+", "+i[13]+", "+i[14]+", "+i[15]+")"},dr.frob=function(i){return Math.hypot(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15])},dr.add=function(i,o,s){return i[0]=o[0]+s[0],i[1]=o[1]+s[1],i[2]=o[2]+s[2],i[3]=o[3]+s[3],i[4]=o[4]+s[4],i[5]=o[5]+s[5],i[6]=o[6]+s[6],i[7]=o[7]+s[7],i[8]=o[8]+s[8],i[9]=o[9]+s[9],i[10]=o[10]+s[10],i[11]=o[11]+s[11],i[12]=o[12]+s[12],i[13]=o[13]+s[13],i[14]=o[14]+s[14],i[15]=o[15]+s[15],i},dr.subtract=CP,dr.multiplyScalar=function(i,o,s){return i[0]=o[0]*s,i[1]=o[1]*s,i[2]=o[2]*s,i[3]=o[3]*s,i[4]=o[4]*s,i[5]=o[5]*s,i[6]=o[6]*s,i[7]=o[7]*s,i[8]=o[8]*s,i[9]=o[9]*s,i[10]=o[10]*s,i[11]=o[11]*s,i[12]=o[12]*s,i[13]=o[13]*s,i[14]=o[14]*s,i[15]=o[15]*s,i},dr.multiplyScalarAndAdd=function(i,o,s,u){return i[0]=o[0]+s[0]*u,i[1]=o[1]+s[1]*u,i[2]=o[2]+s[2]*u,i[3]=o[3]+s[3]*u,i[4]=o[4]+s[4]*u,i[5]=o[5]+s[5]*u,i[6]=o[6]+s[6]*u,i[7]=o[7]+s[7]*u,i[8]=o[8]+s[8]*u,i[9]=o[9]+s[9]*u,i[10]=o[10]+s[10]*u,i[11]=o[11]+s[11]*u,i[12]=o[12]+s[12]*u,i[13]=o[13]+s[13]*u,i[14]=o[14]+s[14]*u,i[15]=o[15]+s[15]*u,i},dr.exactEquals=function(i,o){return i[0]===o[0]&&i[1]===o[1]&&i[2]===o[2]&&i[3]===o[3]&&i[4]===o[4]&&i[5]===o[5]&&i[6]===o[6]&&i[7]===o[7]&&i[8]===o[8]&&i[9]===o[9]&&i[10]===o[10]&&i[11]===o[11]&&i[12]===o[12]&&i[13]===o[13]&&i[14]===o[14]&&i[15]===o[15]},dr.equals=function(i,o){var s=i[0],u=i[1],p=i[2],m=i[3],v=i[4],x=i[5],T=i[6],S=i[7],A=i[8],I=i[9],z=i[10],V=i[11],Y=i[12],X=i[13],ne=i[14],ae=i[15],ye=o[0],xe=o[1],_e=o[2],Ie=o[3],Me=o[4],$e=o[5],We=o[6],qe=o[7],rt=o[8],Xe=o[9],mt=o[10],St=o[11],ht=o[12],wt=o[13],lt=o[14],xt=o[15];return Math.abs(s-ye)<=Xo.EPSILON*Math.max(1,Math.abs(s),Math.abs(ye))&&Math.abs(u-xe)<=Xo.EPSILON*Math.max(1,Math.abs(u),Math.abs(xe))&&Math.abs(p-_e)<=Xo.EPSILON*Math.max(1,Math.abs(p),Math.abs(_e))&&Math.abs(m-Ie)<=Xo.EPSILON*Math.max(1,Math.abs(m),Math.abs(Ie))&&Math.abs(v-Me)<=Xo.EPSILON*Math.max(1,Math.abs(v),Math.abs(Me))&&Math.abs(x-$e)<=Xo.EPSILON*Math.max(1,Math.abs(x),Math.abs($e))&&Math.abs(T-We)<=Xo.EPSILON*Math.max(1,Math.abs(T),Math.abs(We))&&Math.abs(S-qe)<=Xo.EPSILON*Math.max(1,Math.abs(S),Math.abs(qe))&&Math.abs(A-rt)<=Xo.EPSILON*Math.max(1,Math.abs(A),Math.abs(rt))&&Math.abs(I-Xe)<=Xo.EPSILON*Math.max(1,Math.abs(I),Math.abs(Xe))&&Math.abs(z-mt)<=Xo.EPSILON*Math.max(1,Math.abs(z),Math.abs(mt))&&Math.abs(V-St)<=Xo.EPSILON*Math.max(1,Math.abs(V),Math.abs(St))&&Math.abs(Y-ht)<=Xo.EPSILON*Math.max(1,Math.abs(Y),Math.abs(ht))&&Math.abs(X-wt)<=Xo.EPSILON*Math.max(1,Math.abs(X),Math.abs(wt))&&Math.abs(ne-lt)<=Xo.EPSILON*Math.max(1,Math.abs(ne),Math.abs(lt))&&Math.abs(ae-xt)<=Xo.EPSILON*Math.max(1,Math.abs(ae),Math.abs(xt))},dr.sub=dr.mul=dr.ortho=dr.perspective=void 0;var Xo=function(i,o){if(i&&i.__esModule)return i;if(i===null||Pk(i)!=="object"&&typeof i!="function")return{default:i};var s=vP(void 0);if(s&&s.has(i))return s.get(i);var u={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in i)if(m!=="default"&&Object.prototype.hasOwnProperty.call(i,m)){var v=p?Object.getOwnPropertyDescriptor(i,m):null;v&&(v.get||v.set)?Object.defineProperty(u,m,v):u[m]=i[m]}return u.default=i,s&&s.set(i,u),u}(hi);function vP(i){if(typeof WeakMap!="function")return null;var o=new WeakMap,s=new WeakMap;return(vP=function(u){return u?s:o})(i)}function _P(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function xP(i,o,s){var u=o[0],p=o[1],m=o[2],v=o[3],x=o[4],T=o[5],S=o[6],A=o[7],I=o[8],z=o[9],V=o[10],Y=o[11],X=o[12],ne=o[13],ae=o[14],ye=o[15],xe=s[0],_e=s[1],Ie=s[2],Me=s[3];return i[0]=xe*u+_e*x+Ie*I+Me*X,i[1]=xe*p+_e*T+Ie*z+Me*ne,i[2]=xe*m+_e*S+Ie*V+Me*ae,i[3]=xe*v+_e*A+Ie*Y+Me*ye,i[4]=(xe=s[4])*u+(_e=s[5])*x+(Ie=s[6])*I+(Me=s[7])*X,i[5]=xe*p+_e*T+Ie*z+Me*ne,i[6]=xe*m+_e*S+Ie*V+Me*ae,i[7]=xe*v+_e*A+Ie*Y+Me*ye,i[8]=(xe=s[8])*u+(_e=s[9])*x+(Ie=s[10])*I+(Me=s[11])*X,i[9]=xe*p+_e*T+Ie*z+Me*ne,i[10]=xe*m+_e*S+Ie*V+Me*ae,i[11]=xe*v+_e*A+Ie*Y+Me*ye,i[12]=(xe=s[12])*u+(_e=s[13])*x+(Ie=s[14])*I+(Me=s[15])*X,i[13]=xe*p+_e*T+Ie*z+Me*ne,i[14]=xe*m+_e*S+Ie*V+Me*ae,i[15]=xe*v+_e*A+Ie*Y+Me*ye,i}function wP(i,o,s){var u=o[0],p=o[1],m=o[2],v=o[3],x=u+u,T=p+p,S=m+m,A=u*x,I=u*T,z=u*S,V=p*T,Y=p*S,X=m*S,ne=v*x,ae=v*T,ye=v*S;return i[0]=1-(V+X),i[1]=I+ye,i[2]=z-ae,i[3]=0,i[4]=I-ye,i[5]=1-(A+X),i[6]=Y+ne,i[7]=0,i[8]=z+ae,i[9]=Y-ne,i[10]=1-(A+V),i[11]=0,i[12]=s[0],i[13]=s[1],i[14]=s[2],i[15]=1,i}function EP(i,o){var s=o[4],u=o[5],p=o[6],m=o[8],v=o[9],x=o[10];return i[0]=Math.hypot(o[0],o[1],o[2]),i[1]=Math.hypot(s,u,p),i[2]=Math.hypot(m,v,x),i}function TP(i,o,s,u,p){var m,v=1/Math.tan(o/2);return i[0]=v/s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=v,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,p!=null&&p!==1/0?(i[10]=(p+u)*(m=1/(u-p)),i[14]=2*p*u*m):(i[10]=-1,i[14]=-2*u),i}function SP(i,o,s,u,p,m,v){var x=1/(o-s),T=1/(u-p),S=1/(m-v);return i[0]=-2*x,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*T,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*S,i[11]=0,i[12]=(o+s)*x,i[13]=(p+u)*T,i[14]=(v+m)*S,i[15]=1,i}function CP(i,o,s){return i[0]=o[0]-s[0],i[1]=o[1]-s[1],i[2]=o[2]-s[2],i[3]=o[3]-s[3],i[4]=o[4]-s[4],i[5]=o[5]-s[5],i[6]=o[6]-s[6],i[7]=o[7]-s[7],i[8]=o[8]-s[8],i[9]=o[9]-s[9],i[10]=o[10]-s[10],i[11]=o[11]-s[11],i[12]=o[12]-s[12],i[13]=o[13]-s[13],i[14]=o[14]-s[14],i[15]=o[15]-s[15],i}dr.perspective=TP,dr.ortho=SP,dr.mul=xP,dr.sub=CP;var ir={},cr={};function Ok(i){return Ok=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ok(i)}Object.defineProperty(cr,"__esModule",{value:!0}),cr.create=AP,cr.clone=function(i){var o=new xh.ARRAY_TYPE(3);return o[0]=i[0],o[1]=i[1],o[2]=i[2],o},cr.length=MP,cr.fromValues=function(i,o,s){var u=new xh.ARRAY_TYPE(3);return u[0]=i,u[1]=o,u[2]=s,u},cr.copy=function(i,o){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i},cr.set=function(i,o,s,u){return i[0]=o,i[1]=s,i[2]=u,i},cr.add=function(i,o,s){return i[0]=o[0]+s[0],i[1]=o[1]+s[1],i[2]=o[2]+s[2],i},cr.subtract=DP,cr.multiply=RP,cr.divide=IP,cr.ceil=function(i,o){return i[0]=Math.ceil(o[0]),i[1]=Math.ceil(o[1]),i[2]=Math.ceil(o[2]),i},cr.floor=function(i,o){return i[0]=Math.floor(o[0]),i[1]=Math.floor(o[1]),i[2]=Math.floor(o[2]),i},cr.min=function(i,o,s){return i[0]=Math.min(o[0],s[0]),i[1]=Math.min(o[1],s[1]),i[2]=Math.min(o[2],s[2]),i},cr.max=function(i,o,s){return i[0]=Math.max(o[0],s[0]),i[1]=Math.max(o[1],s[1]),i[2]=Math.max(o[2],s[2]),i},cr.round=function(i,o){return i[0]=Math.round(o[0]),i[1]=Math.round(o[1]),i[2]=Math.round(o[2]),i},cr.scale=function(i,o,s){return i[0]=o[0]*s,i[1]=o[1]*s,i[2]=o[2]*s,i},cr.scaleAndAdd=function(i,o,s,u){return i[0]=o[0]+s[0]*u,i[1]=o[1]+s[1]*u,i[2]=o[2]+s[2]*u,i},cr.distance=PP,cr.squaredDistance=OP,cr.squaredLength=LP,cr.negate=function(i,o){return i[0]=-o[0],i[1]=-o[1],i[2]=-o[2],i},cr.inverse=function(i,o){return i[0]=1/o[0],i[1]=1/o[1],i[2]=1/o[2],i},cr.normalize=function(i,o){var s=o[0],u=o[1],p=o[2],m=s*s+u*u+p*p;return m>0&&(m=1/Math.sqrt(m)),i[0]=o[0]*m,i[1]=o[1]*m,i[2]=o[2]*m,i},cr.dot=NP,cr.cross=function(i,o,s){var u=o[0],p=o[1],m=o[2],v=s[0],x=s[1],T=s[2];return i[0]=p*T-m*x,i[1]=m*v-u*T,i[2]=u*x-p*v,i},cr.lerp=function(i,o,s,u){var p=o[0],m=o[1],v=o[2];return i[0]=p+u*(s[0]-p),i[1]=m+u*(s[1]-m),i[2]=v+u*(s[2]-v),i},cr.hermite=function(i,o,s,u,p,m){var v=m*m,x=v*(2*m-3)+1,T=v*(m-2)+m,S=v*(m-1),A=v*(3-2*m);return i[0]=o[0]*x+s[0]*T+u[0]*S+p[0]*A,i[1]=o[1]*x+s[1]*T+u[1]*S+p[1]*A,i[2]=o[2]*x+s[2]*T+u[2]*S+p[2]*A,i},cr.bezier=function(i,o,s,u,p,m){var v=1-m,x=v*v,T=m*m,S=x*v,A=3*m*x,I=3*T*v,z=T*m;return i[0]=o[0]*S+s[0]*A+u[0]*I+p[0]*z,i[1]=o[1]*S+s[1]*A+u[1]*I+p[1]*z,i[2]=o[2]*S+s[2]*A+u[2]*I+p[2]*z,i},cr.random=function(i,o){o=o||1;var s=2*xh.RANDOM()*Math.PI,u=2*xh.RANDOM()-1,p=Math.sqrt(1-u*u)*o;return i[0]=Math.cos(s)*p,i[1]=Math.sin(s)*p,i[2]=u*o,i},cr.transformMat4=function(i,o,s){var u=o[0],p=o[1],m=o[2],v=s[3]*u+s[7]*p+s[11]*m+s[15];return i[0]=(s[0]*u+s[4]*p+s[8]*m+s[12])/(v=v||1),i[1]=(s[1]*u+s[5]*p+s[9]*m+s[13])/v,i[2]=(s[2]*u+s[6]*p+s[10]*m+s[14])/v,i},cr.transformMat3=function(i,o,s){var u=o[0],p=o[1],m=o[2];return i[0]=u*s[0]+p*s[3]+m*s[6],i[1]=u*s[1]+p*s[4]+m*s[7],i[2]=u*s[2]+p*s[5]+m*s[8],i},cr.transformQuat=function(i,o,s){var u=s[0],p=s[1],m=s[2],v=o[0],x=o[1],T=o[2],S=p*T-m*x,A=m*v-u*T,I=u*x-p*v,z=p*I-m*A,V=m*S-u*I,Y=u*A-p*S,X=2*s[3];return A*=X,I*=X,V*=2,Y*=2,i[0]=v+(S*=X)+(z*=2),i[1]=x+A+V,i[2]=T+I+Y,i},cr.rotateX=function(i,o,s,u){var p=[],m=[];return p[0]=o[0]-s[0],p[1]=o[1]-s[1],p[2]=o[2]-s[2],m[0]=p[0],m[1]=p[1]*Math.cos(u)-p[2]*Math.sin(u),m[2]=p[1]*Math.sin(u)+p[2]*Math.cos(u),i[0]=m[0]+s[0],i[1]=m[1]+s[1],i[2]=m[2]+s[2],i},cr.rotateY=function(i,o,s,u){var p=[],m=[];return p[0]=o[0]-s[0],p[1]=o[1]-s[1],p[2]=o[2]-s[2],m[0]=p[2]*Math.sin(u)+p[0]*Math.cos(u),m[1]=p[1],m[2]=p[2]*Math.cos(u)-p[0]*Math.sin(u),i[0]=m[0]+s[0],i[1]=m[1]+s[1],i[2]=m[2]+s[2],i},cr.rotateZ=function(i,o,s,u){var p=[],m=[];return p[0]=o[0]-s[0],p[1]=o[1]-s[1],p[2]=o[2]-s[2],m[0]=p[0]*Math.cos(u)-p[1]*Math.sin(u),m[1]=p[0]*Math.sin(u)+p[1]*Math.cos(u),m[2]=p[2],i[0]=m[0]+s[0],i[1]=m[1]+s[1],i[2]=m[2]+s[2],i},cr.angle=function(i,o){var s=i[0],u=i[1],p=i[2],m=o[0],v=o[1],x=o[2],T=Math.sqrt(s*s+u*u+p*p)*Math.sqrt(m*m+v*v+x*x),S=T&&NP(i,o)/T;return Math.acos(Math.min(Math.max(S,-1),1))},cr.zero=function(i){return i[0]=0,i[1]=0,i[2]=0,i},cr.str=function(i){return"vec3("+i[0]+", "+i[1]+", "+i[2]+")"},cr.exactEquals=function(i,o){return i[0]===o[0]&&i[1]===o[1]&&i[2]===o[2]},cr.equals=function(i,o){var s=i[0],u=i[1],p=i[2],m=o[0],v=o[1],x=o[2];return Math.abs(s-m)<=xh.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(u-v)<=xh.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(p-x)<=xh.EPSILON*Math.max(1,Math.abs(p),Math.abs(x))},cr.forEach=cr.sqrLen=cr.len=cr.sqrDist=cr.dist=cr.div=cr.mul=cr.sub=void 0;var xh=function(i,o){if(i&&i.__esModule)return i;if(i===null||Ok(i)!=="object"&&typeof i!="function")return{default:i};var s=kP(void 0);if(s&&s.has(i))return s.get(i);var u={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in i)if(m!=="default"&&Object.prototype.hasOwnProperty.call(i,m)){var v=p?Object.getOwnPropertyDescriptor(i,m):null;v&&(v.get||v.set)?Object.defineProperty(u,m,v):u[m]=i[m]}return u.default=i,s&&s.set(i,u),u}(hi);function kP(i){if(typeof WeakMap!="function")return null;var o=new WeakMap,s=new WeakMap;return(kP=function(u){return u?s:o})(i)}function AP(){var i=new xh.ARRAY_TYPE(3);return xh.ARRAY_TYPE!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i}function MP(i){return Math.hypot(i[0],i[1],i[2])}function DP(i,o,s){return i[0]=o[0]-s[0],i[1]=o[1]-s[1],i[2]=o[2]-s[2],i}function RP(i,o,s){return i[0]=o[0]*s[0],i[1]=o[1]*s[1],i[2]=o[2]*s[2],i}function IP(i,o,s){return i[0]=o[0]/s[0],i[1]=o[1]/s[1],i[2]=o[2]/s[2],i}function PP(i,o){return Math.hypot(o[0]-i[0],o[1]-i[1],o[2]-i[2])}function OP(i,o){var s=o[0]-i[0],u=o[1]-i[1],p=o[2]-i[2];return s*s+u*u+p*p}function LP(i){var o=i[0],s=i[1],u=i[2];return o*o+s*s+u*u}function NP(i,o){return i[0]*o[0]+i[1]*o[1]+i[2]*o[2]}cr.sub=DP,cr.mul=RP,cr.div=IP,cr.dist=PP,cr.sqrDist=OP,cr.len=MP,cr.sqrLen=LP;var wh,Hq=(wh=AP(),function(i,o,s,u,p,m){var v,x;for(o||(o=3),s||(s=0),x=u?Math.min(u*o+s,i.length):i.length,v=s;v<x;v+=o)wh[0]=i[v],wh[1]=i[v+1],wh[2]=i[v+2],p(wh,wh,m),i[v]=wh[0],i[v+1]=wh[1],i[v+2]=wh[2];return i});cr.forEach=Hq;var wr={};function Lk(i){return Lk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Lk(i)}Object.defineProperty(wr,"__esModule",{value:!0}),wr.create=BP,wr.clone=function(i){var o=new ic.ARRAY_TYPE(4);return o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o},wr.fromValues=function(i,o,s,u){var p=new ic.ARRAY_TYPE(4);return p[0]=i,p[1]=o,p[2]=s,p[3]=u,p},wr.copy=function(i,o){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i},wr.set=function(i,o,s,u,p){return i[0]=o,i[1]=s,i[2]=u,i[3]=p,i},wr.add=function(i,o,s){return i[0]=o[0]+s[0],i[1]=o[1]+s[1],i[2]=o[2]+s[2],i[3]=o[3]+s[3],i},wr.subtract=FP,wr.multiply=jP,wr.divide=$P,wr.ceil=function(i,o){return i[0]=Math.ceil(o[0]),i[1]=Math.ceil(o[1]),i[2]=Math.ceil(o[2]),i[3]=Math.ceil(o[3]),i},wr.floor=function(i,o){return i[0]=Math.floor(o[0]),i[1]=Math.floor(o[1]),i[2]=Math.floor(o[2]),i[3]=Math.floor(o[3]),i},wr.min=function(i,o,s){return i[0]=Math.min(o[0],s[0]),i[1]=Math.min(o[1],s[1]),i[2]=Math.min(o[2],s[2]),i[3]=Math.min(o[3],s[3]),i},wr.max=function(i,o,s){return i[0]=Math.max(o[0],s[0]),i[1]=Math.max(o[1],s[1]),i[2]=Math.max(o[2],s[2]),i[3]=Math.max(o[3],s[3]),i},wr.round=function(i,o){return i[0]=Math.round(o[0]),i[1]=Math.round(o[1]),i[2]=Math.round(o[2]),i[3]=Math.round(o[3]),i},wr.scale=function(i,o,s){return i[0]=o[0]*s,i[1]=o[1]*s,i[2]=o[2]*s,i[3]=o[3]*s,i},wr.scaleAndAdd=function(i,o,s,u){return i[0]=o[0]+s[0]*u,i[1]=o[1]+s[1]*u,i[2]=o[2]+s[2]*u,i[3]=o[3]+s[3]*u,i},wr.distance=UP,wr.squaredDistance=VP,wr.length=HP,wr.squaredLength=WP,wr.negate=function(i,o){return i[0]=-o[0],i[1]=-o[1],i[2]=-o[2],i[3]=-o[3],i},wr.inverse=function(i,o){return i[0]=1/o[0],i[1]=1/o[1],i[2]=1/o[2],i[3]=1/o[3],i},wr.normalize=function(i,o){var s=o[0],u=o[1],p=o[2],m=o[3],v=s*s+u*u+p*p+m*m;return v>0&&(v=1/Math.sqrt(v)),i[0]=s*v,i[1]=u*v,i[2]=p*v,i[3]=m*v,i},wr.dot=function(i,o){return i[0]*o[0]+i[1]*o[1]+i[2]*o[2]+i[3]*o[3]},wr.cross=function(i,o,s,u){var p=s[0]*u[1]-s[1]*u[0],m=s[0]*u[2]-s[2]*u[0],v=s[0]*u[3]-s[3]*u[0],x=s[1]*u[2]-s[2]*u[1],T=s[1]*u[3]-s[3]*u[1],S=s[2]*u[3]-s[3]*u[2],A=o[0],I=o[1],z=o[2],V=o[3];return i[0]=I*S-z*T+V*x,i[1]=-A*S+z*v-V*m,i[2]=A*T-I*v+V*p,i[3]=-A*x+I*m-z*p,i},wr.lerp=function(i,o,s,u){var p=o[0],m=o[1],v=o[2],x=o[3];return i[0]=p+u*(s[0]-p),i[1]=m+u*(s[1]-m),i[2]=v+u*(s[2]-v),i[3]=x+u*(s[3]-x),i},wr.random=function(i,o){var s,u,p,m,v,x;o=o||1;do v=(s=2*ic.RANDOM()-1)*s+(u=2*ic.RANDOM()-1)*u;while(v>=1);do x=(p=2*ic.RANDOM()-1)*p+(m=2*ic.RANDOM()-1)*m;while(x>=1);var T=Math.sqrt((1-v)/x);return i[0]=o*s,i[1]=o*u,i[2]=o*p*T,i[3]=o*m*T,i},wr.transformMat4=function(i,o,s){var u=o[0],p=o[1],m=o[2],v=o[3];return i[0]=s[0]*u+s[4]*p+s[8]*m+s[12]*v,i[1]=s[1]*u+s[5]*p+s[9]*m+s[13]*v,i[2]=s[2]*u+s[6]*p+s[10]*m+s[14]*v,i[3]=s[3]*u+s[7]*p+s[11]*m+s[15]*v,i},wr.transformQuat=function(i,o,s){var u=o[0],p=o[1],m=o[2],v=s[0],x=s[1],T=s[2],S=s[3],A=S*u+x*m-T*p,I=S*p+T*u-v*m,z=S*m+v*p-x*u,V=-v*u-x*p-T*m;return i[0]=A*S+V*-v+I*-T-z*-x,i[1]=I*S+V*-x+z*-v-A*-T,i[2]=z*S+V*-T+A*-x-I*-v,i[3]=o[3],i},wr.zero=function(i){return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i},wr.str=function(i){return"vec4("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")"},wr.exactEquals=function(i,o){return i[0]===o[0]&&i[1]===o[1]&&i[2]===o[2]&&i[3]===o[3]},wr.equals=function(i,o){var s=i[0],u=i[1],p=i[2],m=i[3],v=o[0],x=o[1],T=o[2],S=o[3];return Math.abs(s-v)<=ic.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-x)<=ic.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(p-T)<=ic.EPSILON*Math.max(1,Math.abs(p),Math.abs(T))&&Math.abs(m-S)<=ic.EPSILON*Math.max(1,Math.abs(m),Math.abs(S))},wr.forEach=wr.sqrLen=wr.len=wr.sqrDist=wr.dist=wr.div=wr.mul=wr.sub=void 0;var ic=function(i,o){if(i&&i.__esModule)return i;if(i===null||Lk(i)!=="object"&&typeof i!="function")return{default:i};var s=zP(void 0);if(s&&s.has(i))return s.get(i);var u={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in i)if(m!=="default"&&Object.prototype.hasOwnProperty.call(i,m)){var v=p?Object.getOwnPropertyDescriptor(i,m):null;v&&(v.get||v.set)?Object.defineProperty(u,m,v):u[m]=i[m]}return u.default=i,s&&s.set(i,u),u}(hi);function zP(i){if(typeof WeakMap!="function")return null;var o=new WeakMap,s=new WeakMap;return(zP=function(u){return u?s:o})(i)}function BP(){var i=new ic.ARRAY_TYPE(4);return ic.ARRAY_TYPE!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0,i[3]=0),i}function FP(i,o,s){return i[0]=o[0]-s[0],i[1]=o[1]-s[1],i[2]=o[2]-s[2],i[3]=o[3]-s[3],i}function jP(i,o,s){return i[0]=o[0]*s[0],i[1]=o[1]*s[1],i[2]=o[2]*s[2],i[3]=o[3]*s[3],i}function $P(i,o,s){return i[0]=o[0]/s[0],i[1]=o[1]/s[1],i[2]=o[2]/s[2],i[3]=o[3]/s[3],i}function UP(i,o){return Math.hypot(o[0]-i[0],o[1]-i[1],o[2]-i[2],o[3]-i[3])}function VP(i,o){var s=o[0]-i[0],u=o[1]-i[1],p=o[2]-i[2],m=o[3]-i[3];return s*s+u*u+p*p+m*m}function HP(i){return Math.hypot(i[0],i[1],i[2],i[3])}function WP(i){var o=i[0],s=i[1],u=i[2],p=i[3];return o*o+s*s+u*u+p*p}wr.sub=FP,wr.mul=jP,wr.div=$P,wr.dist=UP,wr.sqrDist=VP,wr.len=HP,wr.sqrLen=WP;var Wq=function(){var i=BP();return function(o,s,u,p,m,v){var x,T;for(s||(s=4),u||(u=0),T=p?Math.min(p*s+u,o.length):o.length,x=u;x<T;x+=s)i[0]=o[x],i[1]=o[x+1],i[2]=o[x+2],i[3]=o[x+3],m(i,i,v),o[x]=i[0],o[x+1]=i[1],o[x+2]=i[2],o[x+3]=i[3];return o}}();function Nk(i){return Nk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Nk(i)}wr.forEach=Wq,Object.defineProperty(ir,"__esModule",{value:!0}),ir.create=zk,ir.identity=function(i){return i[0]=0,i[1]=0,i[2]=0,i[3]=1,i},ir.setAxisAngle=GP,ir.getAxisAngle=function(i,o){var s=2*Math.acos(o[3]),u=Math.sin(s/2);return u>Cg.EPSILON?(i[0]=o[0]/u,i[1]=o[1]/u,i[2]=o[2]/u):(i[0]=1,i[1]=0,i[2]=0),s},ir.getAngle=function(i,o){var s=JP(i,o);return Math.acos(2*s*s-1)},ir.multiply=qP,ir.rotateX=function(i,o,s){s*=.5;var u=o[0],p=o[1],m=o[2],v=o[3],x=Math.sin(s),T=Math.cos(s);return i[0]=u*T+v*x,i[1]=p*T+m*x,i[2]=m*T-p*x,i[3]=v*T-u*x,i},ir.rotateY=function(i,o,s){s*=.5;var u=o[0],p=o[1],m=o[2],v=o[3],x=Math.sin(s),T=Math.cos(s);return i[0]=u*T-m*x,i[1]=p*T+v*x,i[2]=m*T+u*x,i[3]=v*T-p*x,i},ir.rotateZ=function(i,o,s){s*=.5;var u=o[0],p=o[1],m=o[2],v=o[3],x=Math.sin(s),T=Math.cos(s);return i[0]=u*T+p*x,i[1]=p*T-u*x,i[2]=m*T+v*x,i[3]=v*T-m*x,i},ir.calculateW=function(i,o){var s=o[0],u=o[1],p=o[2];return i[0]=s,i[1]=u,i[2]=p,i[3]=Math.sqrt(Math.abs(1-s*s-u*u-p*p)),i},ir.exp=ZP,ir.ln=KP,ir.pow=function(i,o,s){return KP(i,o),QP(i,i,s),ZP(i,i),i},ir.slerp=tw,ir.random=function(i){var o=Cg.RANDOM(),s=Cg.RANDOM(),u=Cg.RANDOM(),p=Math.sqrt(1-o),m=Math.sqrt(o);return i[0]=p*Math.sin(2*Math.PI*s),i[1]=p*Math.cos(2*Math.PI*s),i[2]=m*Math.sin(2*Math.PI*u),i[3]=m*Math.cos(2*Math.PI*u),i},ir.invert=function(i,o){var s=o[0],u=o[1],p=o[2],m=o[3],v=s*s+u*u+p*p+m*m,x=v?1/v:0;return i[0]=-s*x,i[1]=-u*x,i[2]=-p*x,i[3]=m*x,i},ir.conjugate=function(i,o){return i[0]=-o[0],i[1]=-o[1],i[2]=-o[2],i[3]=o[3],i},ir.fromMat3=XP,ir.fromEuler=function(i,o,s,u){var p=.5*Math.PI/180;o*=p,s*=p,u*=p;var m=Math.sin(o),v=Math.cos(o),x=Math.sin(s),T=Math.cos(s),S=Math.sin(u),A=Math.cos(u);return i[0]=m*T*A-v*x*S,i[1]=v*x*A+m*T*S,i[2]=v*T*S-m*x*A,i[3]=v*T*A+m*x*S,i},ir.str=function(i){return"quat("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")"},ir.setAxes=ir.sqlerp=ir.rotationTo=ir.equals=ir.exactEquals=ir.normalize=ir.sqrLen=ir.squaredLength=ir.len=ir.length=ir.lerp=ir.dot=ir.scale=ir.mul=ir.add=ir.set=ir.copy=ir.fromValues=ir.clone=void 0;var Cg=ew(hi),Yq=ew(so),Eh=ew(cr),ml=ew(wr);function YP(i){if(typeof WeakMap!="function")return null;var o=new WeakMap,s=new WeakMap;return(YP=function(u){return u?s:o})(i)}function ew(i,o){if(!o&&i&&i.__esModule)return i;if(i===null||Nk(i)!=="object"&&typeof i!="function")return{default:i};var s=YP(o);if(s&&s.has(i))return s.get(i);var u={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in i)if(m!=="default"&&Object.prototype.hasOwnProperty.call(i,m)){var v=p?Object.getOwnPropertyDescriptor(i,m):null;v&&(v.get||v.set)?Object.defineProperty(u,m,v):u[m]=i[m]}return u.default=i,s&&s.set(i,u),u}function zk(){var i=new Cg.ARRAY_TYPE(4);return Cg.ARRAY_TYPE!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i[3]=1,i}function GP(i,o,s){s*=.5;var u=Math.sin(s);return i[0]=u*o[0],i[1]=u*o[1],i[2]=u*o[2],i[3]=Math.cos(s),i}function qP(i,o,s){var u=o[0],p=o[1],m=o[2],v=o[3],x=s[0],T=s[1],S=s[2],A=s[3];return i[0]=u*A+v*x+p*S-m*T,i[1]=p*A+v*T+m*x-u*S,i[2]=m*A+v*S+u*T-p*x,i[3]=v*A-u*x-p*T-m*S,i}function ZP(i,o){var s=o[0],u=o[1],p=o[2],m=o[3],v=Math.sqrt(s*s+u*u+p*p),x=Math.exp(m),T=v>0?x*Math.sin(v)/v:0;return i[0]=s*T,i[1]=u*T,i[2]=p*T,i[3]=x*Math.cos(v),i}function KP(i,o){var s=o[0],u=o[1],p=o[2],m=o[3],v=Math.sqrt(s*s+u*u+p*p),x=v>0?Math.atan2(v,m)/v:0;return i[0]=s*x,i[1]=u*x,i[2]=p*x,i[3]=.5*Math.log(s*s+u*u+p*p+m*m),i}function tw(i,o,s,u){var p,m,v,x,T,S=o[0],A=o[1],I=o[2],z=o[3],V=s[0],Y=s[1],X=s[2],ne=s[3];return(m=S*V+A*Y+I*X+z*ne)<0&&(m=-m,V=-V,Y=-Y,X=-X,ne=-ne),1-m>Cg.EPSILON?(p=Math.acos(m),v=Math.sin(p),x=Math.sin((1-u)*p)/v,T=Math.sin(u*p)/v):(x=1-u,T=u),i[0]=x*S+T*V,i[1]=x*A+T*Y,i[2]=x*I+T*X,i[3]=x*z+T*ne,i}function XP(i,o){var s,u=o[0]+o[4]+o[8];if(u>0)s=Math.sqrt(u+1),i[3]=.5*s,i[0]=(o[5]-o[7])*(s=.5/s),i[1]=(o[6]-o[2])*s,i[2]=(o[1]-o[3])*s;else{var p=0;o[4]>o[0]&&(p=1),o[8]>o[3*p+p]&&(p=2);var m=(p+1)%3,v=(p+2)%3;s=Math.sqrt(o[3*p+p]-o[3*m+m]-o[3*v+v]+1),i[p]=.5*s,i[3]=(o[3*m+v]-o[3*v+m])*(s=.5/s),i[m]=(o[3*m+p]+o[3*p+m])*s,i[v]=(o[3*v+p]+o[3*p+v])*s}return i}ir.clone=ml.clone,ir.fromValues=ml.fromValues,ir.copy=ml.copy,ir.set=ml.set,ir.add=ml.add,ir.mul=qP;var QP=ml.scale;ir.scale=QP;var JP=ml.dot;ir.dot=JP,ir.lerp=ml.lerp;var eO=ml.length;ir.length=eO,ir.len=eO;var tO=ml.squaredLength;ir.squaredLength=tO,ir.sqrLen=tO;var Bk=ml.normalize;ir.normalize=Bk,ir.exactEquals=ml.exactEquals,ir.equals=ml.equals;var eu,nO,rO,Gq=(eu=Eh.create(),nO=Eh.fromValues(1,0,0),rO=Eh.fromValues(0,1,0),function(i,o,s){var u=Eh.dot(o,s);return u<-.999999?(Eh.cross(eu,nO,o),Eh.len(eu)<1e-6&&Eh.cross(eu,rO,o),Eh.normalize(eu,eu),GP(i,eu,Math.PI),i):u>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(Eh.cross(eu,o,s),i[0]=eu[0],i[1]=eu[1],i[2]=eu[2],i[3]=1+u,Bk(i,i))});ir.rotationTo=Gq;var Fk,jk,qq=(Fk=zk(),jk=zk(),function(i,o,s,u,p,m){return tw(Fk,o,p,m),tw(jk,s,u,m),tw(i,Fk,jk,2*m*(1-m)),i});ir.sqlerp=qq;var tu,Zq=(tu=Yq.create(),function(i,o,s,u){return tu[0]=s[0],tu[3]=s[1],tu[6]=s[2],tu[1]=u[0],tu[4]=u[1],tu[7]=u[2],tu[2]=-o[0],tu[5]=-o[1],tu[8]=-o[2],Bk(i,XP(i,tu))});ir.setAxes=Zq;var Rr={};function $k(i){return $k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},$k(i)}Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.create=function(){var i=new xs.ARRAY_TYPE(8);return xs.ARRAY_TYPE!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0,i[4]=0,i[5]=0,i[6]=0,i[7]=0),i[3]=1,i},Rr.clone=function(i){var o=new xs.ARRAY_TYPE(8);return o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[4]=i[4],o[5]=i[5],o[6]=i[6],o[7]=i[7],o},Rr.fromValues=function(i,o,s,u,p,m,v,x){var T=new xs.ARRAY_TYPE(8);return T[0]=i,T[1]=o,T[2]=s,T[3]=u,T[4]=p,T[5]=m,T[6]=v,T[7]=x,T},Rr.fromRotationTranslationValues=function(i,o,s,u,p,m,v){var x=new xs.ARRAY_TYPE(8);x[0]=i,x[1]=o,x[2]=s,x[3]=u;var T=.5*p,S=.5*m,A=.5*v;return x[4]=T*u+S*s-A*o,x[5]=S*u+A*i-T*s,x[6]=A*u+T*o-S*i,x[7]=-T*i-S*o-A*s,x},Rr.fromRotationTranslation=aO,Rr.fromTranslation=function(i,o){return i[0]=0,i[1]=0,i[2]=0,i[3]=1,i[4]=.5*o[0],i[5]=.5*o[1],i[6]=.5*o[2],i[7]=0,i},Rr.fromRotation=function(i,o){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[4]=0,i[5]=0,i[6]=0,i[7]=0,i},Rr.fromMat4=function(i,o){var s=Th.create();oO.getRotation(s,o);var u=new xs.ARRAY_TYPE(3);return oO.getTranslation(u,o),aO(i,s,u),i},Rr.copy=sO,Rr.identity=function(i){return i[0]=0,i[1]=0,i[2]=0,i[3]=1,i[4]=0,i[5]=0,i[6]=0,i[7]=0,i},Rr.set=function(i,o,s,u,p,m,v,x,T){return i[0]=o,i[1]=s,i[2]=u,i[3]=p,i[4]=m,i[5]=v,i[6]=x,i[7]=T,i},Rr.getDual=function(i,o){return i[0]=o[4],i[1]=o[5],i[2]=o[6],i[3]=o[7],i},Rr.setDual=function(i,o){return i[4]=o[0],i[5]=o[1],i[6]=o[2],i[7]=o[3],i},Rr.getTranslation=function(i,o){var s=o[4],u=o[5],p=o[6],m=o[7],v=-o[0],x=-o[1],T=-o[2],S=o[3];return i[0]=2*(s*S+m*v+u*T-p*x),i[1]=2*(u*S+m*x+p*v-s*T),i[2]=2*(p*S+m*T+s*x-u*v),i},Rr.translate=function(i,o,s){var u=o[0],p=o[1],m=o[2],v=o[3],x=.5*s[0],T=.5*s[1],S=.5*s[2],A=o[4],I=o[5],z=o[6],V=o[7];return i[0]=u,i[1]=p,i[2]=m,i[3]=v,i[4]=v*x+p*S-m*T+A,i[5]=v*T+m*x-u*S+I,i[6]=v*S+u*T-p*x+z,i[7]=-u*x-p*T-m*S+V,i},Rr.rotateX=function(i,o,s){var u=-o[0],p=-o[1],m=-o[2],v=o[3],x=o[4],T=o[5],S=o[6],A=o[7],I=x*v+A*u+T*m-S*p,z=T*v+A*p+S*u-x*m,V=S*v+A*m+x*p-T*u,Y=A*v-x*u-T*p-S*m;return Th.rotateX(i,o,s),i[4]=I*(v=i[3])+Y*(u=i[0])+z*(m=i[2])-V*(p=i[1]),i[5]=z*v+Y*p+V*u-I*m,i[6]=V*v+Y*m+I*p-z*u,i[7]=Y*v-I*u-z*p-V*m,i},Rr.rotateY=function(i,o,s){var u=-o[0],p=-o[1],m=-o[2],v=o[3],x=o[4],T=o[5],S=o[6],A=o[7],I=x*v+A*u+T*m-S*p,z=T*v+A*p+S*u-x*m,V=S*v+A*m+x*p-T*u,Y=A*v-x*u-T*p-S*m;return Th.rotateY(i,o,s),i[4]=I*(v=i[3])+Y*(u=i[0])+z*(m=i[2])-V*(p=i[1]),i[5]=z*v+Y*p+V*u-I*m,i[6]=V*v+Y*m+I*p-z*u,i[7]=Y*v-I*u-z*p-V*m,i},Rr.rotateZ=function(i,o,s){var u=-o[0],p=-o[1],m=-o[2],v=o[3],x=o[4],T=o[5],S=o[6],A=o[7],I=x*v+A*u+T*m-S*p,z=T*v+A*p+S*u-x*m,V=S*v+A*m+x*p-T*u,Y=A*v-x*u-T*p-S*m;return Th.rotateZ(i,o,s),i[4]=I*(v=i[3])+Y*(u=i[0])+z*(m=i[2])-V*(p=i[1]),i[5]=z*v+Y*p+V*u-I*m,i[6]=V*v+Y*m+I*p-z*u,i[7]=Y*v-I*u-z*p-V*m,i},Rr.rotateByQuatAppend=function(i,o,s){var u=s[0],p=s[1],m=s[2],v=s[3],x=o[0],T=o[1],S=o[2],A=o[3];return i[0]=x*v+A*u+T*m-S*p,i[1]=T*v+A*p+S*u-x*m,i[2]=S*v+A*m+x*p-T*u,i[3]=A*v-x*u-T*p-S*m,i[4]=(x=o[4])*v+(A=o[7])*u+(T=o[5])*m-(S=o[6])*p,i[5]=T*v+A*p+S*u-x*m,i[6]=S*v+A*m+x*p-T*u,i[7]=A*v-x*u-T*p-S*m,i},Rr.rotateByQuatPrepend=function(i,o,s){var u=o[0],p=o[1],m=o[2],v=o[3],x=s[0],T=s[1],S=s[2],A=s[3];return i[0]=u*A+v*x+p*S-m*T,i[1]=p*A+v*T+m*x-u*S,i[2]=m*A+v*S+u*T-p*x,i[3]=v*A-u*x-p*T-m*S,i[4]=u*(A=s[7])+v*(x=s[4])+p*(S=s[6])-m*(T=s[5]),i[5]=p*A+v*T+m*x-u*S,i[6]=m*A+v*S+u*T-p*x,i[7]=v*A-u*x-p*T-m*S,i},Rr.rotateAroundAxis=function(i,o,s,u){if(Math.abs(u)<xs.EPSILON)return sO(i,o);var p=Math.hypot(s[0],s[1],s[2]);u*=.5;var m=Math.sin(u),v=m*s[0]/p,x=m*s[1]/p,T=m*s[2]/p,S=Math.cos(u),A=o[0],I=o[1],z=o[2],V=o[3];i[0]=A*S+V*v+I*T-z*x,i[1]=I*S+V*x+z*v-A*T,i[2]=z*S+V*T+A*x-I*v,i[3]=V*S-A*v-I*x-z*T;var Y=o[4],X=o[5],ne=o[6],ae=o[7];return i[4]=Y*S+ae*v+X*T-ne*x,i[5]=X*S+ae*x+ne*v-Y*T,i[6]=ne*S+ae*T+Y*x-X*v,i[7]=ae*S-Y*v-X*x-ne*T,i},Rr.add=function(i,o,s){return i[0]=o[0]+s[0],i[1]=o[1]+s[1],i[2]=o[2]+s[2],i[3]=o[3]+s[3],i[4]=o[4]+s[4],i[5]=o[5]+s[5],i[6]=o[6]+s[6],i[7]=o[7]+s[7],i},Rr.multiply=lO,Rr.scale=function(i,o,s){return i[0]=o[0]*s,i[1]=o[1]*s,i[2]=o[2]*s,i[3]=o[3]*s,i[4]=o[4]*s,i[5]=o[5]*s,i[6]=o[6]*s,i[7]=o[7]*s,i},Rr.lerp=function(i,o,s,u){var p=1-u;return cO(o,s)<0&&(u=-u),i[0]=o[0]*p+s[0]*u,i[1]=o[1]*p+s[1]*u,i[2]=o[2]*p+s[2]*u,i[3]=o[3]*p+s[3]*u,i[4]=o[4]*p+s[4]*u,i[5]=o[5]*p+s[5]*u,i[6]=o[6]*p+s[6]*u,i[7]=o[7]*p+s[7]*u,i},Rr.invert=function(i,o){var s=nw(o);return i[0]=-o[0]/s,i[1]=-o[1]/s,i[2]=-o[2]/s,i[3]=o[3]/s,i[4]=-o[4]/s,i[5]=-o[5]/s,i[6]=-o[6]/s,i[7]=o[7]/s,i},Rr.conjugate=function(i,o){return i[0]=-o[0],i[1]=-o[1],i[2]=-o[2],i[3]=o[3],i[4]=-o[4],i[5]=-o[5],i[6]=-o[6],i[7]=o[7],i},Rr.normalize=function(i,o){var s=nw(o);if(s>0){s=Math.sqrt(s);var u=o[0]/s,p=o[1]/s,m=o[2]/s,v=o[3]/s,x=o[4],T=o[5],S=o[6],A=o[7],I=u*x+p*T+m*S+v*A;i[0]=u,i[1]=p,i[2]=m,i[3]=v,i[4]=(x-u*I)/s,i[5]=(T-p*I)/s,i[6]=(S-m*I)/s,i[7]=(A-v*I)/s}return i},Rr.str=function(i){return"quat2("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+", "+i[4]+", "+i[5]+", "+i[6]+", "+i[7]+")"},Rr.exactEquals=function(i,o){return i[0]===o[0]&&i[1]===o[1]&&i[2]===o[2]&&i[3]===o[3]&&i[4]===o[4]&&i[5]===o[5]&&i[6]===o[6]&&i[7]===o[7]},Rr.equals=function(i,o){var s=i[0],u=i[1],p=i[2],m=i[3],v=i[4],x=i[5],T=i[6],S=i[7],A=o[0],I=o[1],z=o[2],V=o[3],Y=o[4],X=o[5],ne=o[6],ae=o[7];return Math.abs(s-A)<=xs.EPSILON*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(u-I)<=xs.EPSILON*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(p-z)<=xs.EPSILON*Math.max(1,Math.abs(p),Math.abs(z))&&Math.abs(m-V)<=xs.EPSILON*Math.max(1,Math.abs(m),Math.abs(V))&&Math.abs(v-Y)<=xs.EPSILON*Math.max(1,Math.abs(v),Math.abs(Y))&&Math.abs(x-X)<=xs.EPSILON*Math.max(1,Math.abs(x),Math.abs(X))&&Math.abs(T-ne)<=xs.EPSILON*Math.max(1,Math.abs(T),Math.abs(ne))&&Math.abs(S-ae)<=xs.EPSILON*Math.max(1,Math.abs(S),Math.abs(ae))},Rr.sqrLen=Rr.squaredLength=Rr.len=Rr.length=Rr.dot=Rr.mul=Rr.setReal=Rr.getReal=void 0;var xs=Uk(hi),Th=Uk(ir),oO=Uk(dr);function iO(i){if(typeof WeakMap!="function")return null;var o=new WeakMap,s=new WeakMap;return(iO=function(u){return u?s:o})(i)}function Uk(i,o){if(!o&&i&&i.__esModule)return i;if(i===null||$k(i)!=="object"&&typeof i!="function")return{default:i};var s=iO(o);if(s&&s.has(i))return s.get(i);var u={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in i)if(m!=="default"&&Object.prototype.hasOwnProperty.call(i,m)){var v=p?Object.getOwnPropertyDescriptor(i,m):null;v&&(v.get||v.set)?Object.defineProperty(u,m,v):u[m]=i[m]}return u.default=i,s&&s.set(i,u),u}function aO(i,o,s){var u=.5*s[0],p=.5*s[1],m=.5*s[2],v=o[0],x=o[1],T=o[2],S=o[3];return i[0]=v,i[1]=x,i[2]=T,i[3]=S,i[4]=u*S+p*T-m*x,i[5]=p*S+m*v-u*T,i[6]=m*S+u*x-p*v,i[7]=-u*v-p*x-m*T,i}function sO(i,o){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i}function lO(i,o,s){var u=o[0],p=o[1],m=o[2],v=o[3],x=s[4],T=s[5],S=s[6],A=s[7],I=o[4],z=o[5],V=o[6],Y=o[7],X=s[0],ne=s[1],ae=s[2],ye=s[3];return i[0]=u*ye+v*X+p*ae-m*ne,i[1]=p*ye+v*ne+m*X-u*ae,i[2]=m*ye+v*ae+u*ne-p*X,i[3]=v*ye-u*X-p*ne-m*ae,i[4]=u*A+v*x+p*S-m*T+I*ye+Y*X+z*ae-V*ne,i[5]=p*A+v*T+m*x-u*S+z*ye+Y*ne+V*X-I*ae,i[6]=m*A+v*S+u*T-p*x+V*ye+Y*ae+I*ne-z*X,i[7]=v*A-u*x-p*T-m*S+Y*ye-I*X-z*ne-V*ae,i}Rr.getReal=Th.copy,Rr.setReal=Th.copy,Rr.mul=lO;var cO=Th.dot;Rr.dot=cO;var uO=Th.length;Rr.length=uO,Rr.len=uO;var nw=Th.squaredLength;Rr.squaredLength=nw,Rr.sqrLen=nw;var gr={};function Vk(i){return Vk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Vk(i)}Object.defineProperty(gr,"__esModule",{value:!0}),gr.create=hO,gr.clone=function(i){var o=new kg.ARRAY_TYPE(2);return o[0]=i[0],o[1]=i[1],o},gr.fromValues=function(i,o){var s=new kg.ARRAY_TYPE(2);return s[0]=i,s[1]=o,s},gr.copy=function(i,o){return i[0]=o[0],i[1]=o[1],i},gr.set=function(i,o,s){return i[0]=o,i[1]=s,i},gr.add=function(i,o,s){return i[0]=o[0]+s[0],i[1]=o[1]+s[1],i},gr.subtract=fO,gr.multiply=pO,gr.divide=mO,gr.ceil=function(i,o){return i[0]=Math.ceil(o[0]),i[1]=Math.ceil(o[1]),i},gr.floor=function(i,o){return i[0]=Math.floor(o[0]),i[1]=Math.floor(o[1]),i},gr.min=function(i,o,s){return i[0]=Math.min(o[0],s[0]),i[1]=Math.min(o[1],s[1]),i},gr.max=function(i,o,s){return i[0]=Math.max(o[0],s[0]),i[1]=Math.max(o[1],s[1]),i},gr.round=function(i,o){return i[0]=Math.round(o[0]),i[1]=Math.round(o[1]),i},gr.scale=function(i,o,s){return i[0]=o[0]*s,i[1]=o[1]*s,i},gr.scaleAndAdd=function(i,o,s,u){return i[0]=o[0]+s[0]*u,i[1]=o[1]+s[1]*u,i},gr.distance=gO,gr.squaredDistance=yO,gr.length=bO,gr.squaredLength=vO,gr.negate=function(i,o){return i[0]=-o[0],i[1]=-o[1],i},gr.inverse=function(i,o){return i[0]=1/o[0],i[1]=1/o[1],i},gr.normalize=function(i,o){var s=o[0],u=o[1],p=s*s+u*u;return p>0&&(p=1/Math.sqrt(p)),i[0]=o[0]*p,i[1]=o[1]*p,i},gr.dot=function(i,o){return i[0]*o[0]+i[1]*o[1]},gr.cross=function(i,o,s){var u=o[0]*s[1]-o[1]*s[0];return i[0]=i[1]=0,i[2]=u,i},gr.lerp=function(i,o,s,u){var p=o[0],m=o[1];return i[0]=p+u*(s[0]-p),i[1]=m+u*(s[1]-m),i},gr.random=function(i,o){o=o||1;var s=2*kg.RANDOM()*Math.PI;return i[0]=Math.cos(s)*o,i[1]=Math.sin(s)*o,i},gr.transformMat2=function(i,o,s){var u=o[0],p=o[1];return i[0]=s[0]*u+s[2]*p,i[1]=s[1]*u+s[3]*p,i},gr.transformMat2d=function(i,o,s){var u=o[0],p=o[1];return i[0]=s[0]*u+s[2]*p+s[4],i[1]=s[1]*u+s[3]*p+s[5],i},gr.transformMat3=function(i,o,s){var u=o[0],p=o[1];return i[0]=s[0]*u+s[3]*p+s[6],i[1]=s[1]*u+s[4]*p+s[7],i},gr.transformMat4=function(i,o,s){var u=o[0],p=o[1];return i[0]=s[0]*u+s[4]*p+s[12],i[1]=s[1]*u+s[5]*p+s[13],i},gr.rotate=function(i,o,s,u){var p=o[0]-s[0],m=o[1]-s[1],v=Math.sin(u),x=Math.cos(u);return i[0]=p*x-m*v+s[0],i[1]=p*v+m*x+s[1],i},gr.angle=function(i,o){var s=i[0],u=i[1],p=o[0],m=o[1],v=Math.sqrt(s*s+u*u)*Math.sqrt(p*p+m*m);return Math.acos(Math.min(Math.max(v&&(s*p+u*m)/v,-1),1))},gr.zero=function(i){return i[0]=0,i[1]=0,i},gr.str=function(i){return"vec2("+i[0]+", "+i[1]+")"},gr.exactEquals=function(i,o){return i[0]===o[0]&&i[1]===o[1]},gr.equals=function(i,o){var s=i[0],u=i[1],p=o[0],m=o[1];return Math.abs(s-p)<=kg.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(u-m)<=kg.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))},gr.forEach=gr.sqrLen=gr.sqrDist=gr.dist=gr.div=gr.mul=gr.sub=gr.len=void 0;var kg=function(i,o){if(i&&i.__esModule)return i;if(i===null||Vk(i)!=="object"&&typeof i!="function")return{default:i};var s=dO(void 0);if(s&&s.has(i))return s.get(i);var u={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in i)if(m!=="default"&&Object.prototype.hasOwnProperty.call(i,m)){var v=p?Object.getOwnPropertyDescriptor(i,m):null;v&&(v.get||v.set)?Object.defineProperty(u,m,v):u[m]=i[m]}return u.default=i,s&&s.set(i,u),u}(hi);function dO(i){if(typeof WeakMap!="function")return null;var o=new WeakMap,s=new WeakMap;return(dO=function(u){return u?s:o})(i)}function hO(){var i=new kg.ARRAY_TYPE(2);return kg.ARRAY_TYPE!=Float32Array&&(i[0]=0,i[1]=0),i}function fO(i,o,s){return i[0]=o[0]-s[0],i[1]=o[1]-s[1],i}function pO(i,o,s){return i[0]=o[0]*s[0],i[1]=o[1]*s[1],i}function mO(i,o,s){return i[0]=o[0]/s[0],i[1]=o[1]/s[1],i}function gO(i,o){return Math.hypot(o[0]-i[0],o[1]-i[1])}function yO(i,o){var s=o[0]-i[0],u=o[1]-i[1];return s*s+u*u}function bO(i){return Math.hypot(i[0],i[1])}function vO(i){var o=i[0],s=i[1];return o*o+s*s}gr.len=bO,gr.sub=fO,gr.mul=pO,gr.div=mO,gr.dist=gO,gr.sqrDist=yO,gr.sqrLen=vO;var Kq=function(){var i=hO();return function(o,s,u,p,m,v){var x,T;for(s||(s=2),u||(u=0),T=p?Math.min(p*s+u,o.length):o.length,x=u;x<T;x+=s)i[0]=o[x],i[1]=o[x+1],m(i,i,v),o[x]=i[0],o[x+1]=i[1];return o}}();function Hk(i){return Hk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Hk(i)}gr.forEach=Kq,Object.defineProperty(di,"__esModule",{value:!0}),a.a7=di.vec4=a.N=di.vec3=di.vec2=di.quat2=a.bi=di.quat=a.a6=di.mat4=a.co=di.mat3=di.mat2d=a.b4=di.mat2=di.glMatrix=void 0;var Xq=td(hi);di.glMatrix=Xq;var Qq=td(Lo);a.b4=di.mat2=Qq;var Jq=td(zo);di.mat2d=Jq;var eZ=td(so);a.co=di.mat3=eZ;var tZ=td(dr);a.a6=di.mat4=tZ;var nZ=td(ir);a.bi=di.quat=nZ;var rZ=td(Rr);di.quat2=rZ;var oZ=td(gr);di.vec2=oZ;var iZ=td(cr);a.N=di.vec3=iZ;var aZ=td(wr);function _O(i){if(typeof WeakMap!="function")return null;var o=new WeakMap,s=new WeakMap;return(_O=function(u){return u?s:o})(i)}function td(i,o){if(!o&&i&&i.__esModule)return i;if(i===null||Hk(i)!=="object"&&typeof i!="function")return{default:i};var s=_O(o);if(s&&s.has(i))return s.get(i);var u={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in i)if(m!=="default"&&Object.prototype.hasOwnProperty.call(i,m)){var v=p?Object.getOwnPropertyDescriptor(i,m):null;v&&(v.get||v.set)?Object.defineProperty(u,m,v):u[m]=i[m]}return u.default=i,s&&s.set(i,u),u}a.a7=di.vec4=aZ;class Wk{constructor(o,s){this.pos=o,this.dir=s}intersectsPlane(o,s,u){const p=a.N.dot(s,this.dir);if(Math.abs(p)<1e-6)return!1;const m=((o[0]-this.pos[0])*s[0]+(o[1]-this.pos[1])*s[1]+(o[2]-this.pos[2])*s[2])/p;return u[0]=this.pos[0]+this.dir[0]*m,u[1]=this.pos[1]+this.dir[1]*m,u[2]=this.pos[2]+this.dir[2]*m,!0}closestPointOnSphere(o,s,u){if(a.N.equals(this.pos,o)||s===0)return u[0]=u[1]=u[2]=0,!1;const[p,m,v]=this.dir,x=this.pos[0]-o[0],T=this.pos[1]-o[1],S=this.pos[2]-o[2],A=p*p+m*m+v*v,I=2*(x*p+T*m+S*v),z=I*I-4*A*(x*x+T*T+S*S-s*s);if(z<0){const V=Math.max(-I/2,0),Y=x+p*V,X=T+m*V,ne=S+v*V,ae=Math.hypot(Y,X,ne);return u[0]=Y*s/ae,u[1]=X*s/ae,u[2]=ne*s/ae,!1}{const V=(-I-Math.sqrt(z))/(2*A);if(V<0){const Y=Math.hypot(x,T,S);return u[0]=x*s/Y,u[1]=T*s/Y,u[2]=S*s/Y,!1}return u[0]=x+p*V,u[1]=T+m*V,u[2]=S+v*V,!0}}}class Yk{constructor(o,s,u,p,m){this.TL=o,this.TR=s,this.BR=u,this.BL=p,this.horizon=m}static fromInvProjectionMatrix(o,s,u){const p=[-1,1,1],m=[1,1,1],v=[1,-1,1],x=[-1,-1,1],T=a.N.transformMat4(p,p,o),S=a.N.transformMat4(m,m,o),A=a.N.transformMat4(v,v,o),I=a.N.transformMat4(x,x,o);return new Yk(T,S,A,I,s/u)}}function Yv(i,o,s){let u=1/0,p=-1/0;const m=[];for(const v of i){a.N.sub(m,v,o);const x=a.N.dot(m,s);u=Math.min(u,x),p=Math.max(p,x)}return[u,p]}function xO(i,o){let s=!0;for(let u=0;u<i.planes.length;u++){const p=i.planes[u];let m=0;for(let v=0;v<o.length;v++)m+=a.N.dot(p,o[v])+p[3]>=0;if(m===0)return 0;m!==o.length&&(s=!1)}return s?2:1}function wO(i,o){for(const s of i.projections){const u=Yv(o,i.points[0],s.axis);if(s.projection[1]<u[0]||s.projection[0]>u[1])return 0}return 1}function EO(i,o){let s=0;const u=[0,0,0,0];for(let p=0;p<i.length;p++)u[0]=i[p][0],u[1]=i[p][1],u[2]=i[p][2],u[3]=1,a.a7.dot(u,o)>=0&&s++;return s}class Gk{constructor(o,s){this.points=o||new Array(8).fill([0,0,0]),this.planes=s||new Array(6).fill([0,0,0,0]),this.bounds=Bo.fromPoints(this.points),this.projections=[],this.frustumEdges=[a.N.sub([],this.points[2],this.points[3]),a.N.sub([],this.points[0],this.points[3]),a.N.sub([],this.points[4],this.points[0]),a.N.sub([],this.points[5],this.points[1]),a.N.sub([],this.points[6],this.points[2]),a.N.sub([],this.points[7],this.points[3])];for(const u of this.frustumEdges){const p=[0,-u[2],u[1]],m=[u[2],0,-u[0]];this.projections.push({axis:p,projection:Yv(this.points,this.points[0],p)}),this.projections.push({axis:m,projection:Yv(this.points,this.points[0],m)})}}static fromInvProjectionMatrix(o,s,u,p){const m=Math.pow(2,u),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(S=>{const A=a.a7.transformMat4([],S,o),I=1/A[3]/s*m;return a.a7.mul(A,A,[I,I,p?1/A[3]:I,I])}),x=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(S=>{const A=a.N.sub([],v[S[0]],v[S[1]]),I=a.N.sub([],v[S[2]],v[S[1]]),z=a.N.normalize([],a.N.cross([],A,I)),V=-a.N.dot(z,v[S[1]]);return z.concat(V)}),T=[];for(let S=0;S<v.length;S++)T.push([v[S][0],v[S][1],v[S][2]]);return new Gk(T,x)}intersectsPrecise(o,s,u){for(let p=0;p<s.length;p++)if(!EO(o,s[p]))return 0;for(let p=0;p<this.planes.length;p++)if(!EO(o,this.planes[p]))return 0;for(const p of u)for(const m of this.frustumEdges){const v=a.N.cross([],p,m),x=a.N.length(v);if(x===0)continue;a.N.scale(v,v,1/x);const T=Yv(this.points,this.points[0],v),S=Yv(o,this.points[0],v);if(T[0]>S[1]||S[0]>T[1])return 0}return 1}}class Bo{static fromPoints(o){const s=[1/0,1/0,1/0],u=[-1/0,-1/0,-1/0];for(const p of o)a.N.min(s,s,p),a.N.max(u,u,p);return new Bo(s,u)}static fromTileIdAndHeight(o,s,u){const p=1<<o.canonical.z,m=o.canonical.x,v=o.canonical.y;return new Bo([m/p,v/p,s],[(m+1)/p,(v+1)/p,u])}static applyTransform(o,s){const u=o.getCorners();for(let p=0;p<u.length;++p)a.N.transformMat4(u[p],u[p],s);return Bo.fromPoints(u)}static projectAabbCorners(o,s){const u=o.getCorners();for(let p=0;p<u.length;++p)a.N.transformMat4(u[p],u[p],s);return u}constructor(o,s){this.min=o,this.max=s,this.center=a.N.scale([],a.N.add([],this.min,this.max),.5)}quadrant(o){const s=[o%2==0,o<2],u=a.N.clone(this.min),p=a.N.clone(this.max);for(let m=0;m<s.length;m++)u[m]=s[m]?this.min[m]:this.center[m],p[m]=s[m]?this.center[m]:this.max[m];return p[2]=this.max[2],new Bo(u,p)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}distanceZ(o){return Math.max(Math.min(this.max[2],o[2]),this.min[2])-o[2]}getCorners(){const o=this.min,s=this.max;return[[o[0],o[1],o[2]],[s[0],o[1],o[2]],[s[0],s[1],o[2]],[o[0],s[1],o[2]],[o[0],o[1],s[2]],[s[0],o[1],s[2]],[s[0],s[1],s[2]],[o[0],s[1],s[2]]]}intersects(o){return this.intersectsAabb(o.bounds)?xO(o,this.getCorners()):0}intersectsFlat(o){return this.intersectsAabb(o.bounds)?xO(o,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(o,s){return s||this.intersects(o)?wO(o,this.getCorners()):0}intersectsPreciseFlat(o,s){return s||this.intersectsFlat(o)?wO(o,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(o){for(let s=0;s<3;++s)if(this.min[s]>o.max[s]||o.min[s]>this.max[s])return!1;return!0}intersectsAabbXY(o){return!(this.min[0]>o.max[0]||o.min[0]>this.max[0]||this.min[1]>o.max[1]||o.min[1]>this.max[1])}encapsulate(o){for(let s=0;s<3;s++)this.min[s]=Math.min(this.min[s],o.min[s]),this.max[s]=Math.max(this.max[s],o.max[s])}encapsulatePoint(o){for(let s=0;s<3;s++)this.min[s]=Math.min(this.min[s],o[s]),this.max[s]=Math.max(this.max[s],o[s])}closestPoint(o){return[Math.max(Math.min(this.max[0],o[0]),this.min[0]),Math.max(Math.min(this.max[1],o[1]),this.min[1]),Math.max(Math.min(this.max[2],o[2]),this.min[2])]}}rn(Bo,"Aabb");const sZ=Yr([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:rw}=sZ,lZ=Yr([{name:"a_pos_3",components:3,type:"Int16"}]);var TO=Yr([{name:"a_pos",type:"Int16",components:2}]);function ow(i){return i*be/ge}const cZ=[new Bo([G,G,G],[R,R,R]),new Bo([G,G,G],[0,0,R]),new Bo([0,G,G],[R,0,R]),new Bo([G,0,G],[0,R,R]),new Bo([0,0,G],[R,R,R])];function SO(i,o,s,u=!0){const p=a.N.scale([],i._camera.position,i.worldSize),m=[o,s,1,1];a.a7.transformMat4(m,m,i.pixelMatrixInverse),a.a7.scale(m,m,1/m[3]);const v=a.N.sub([],m,p),x=a.N.normalize([],v),T=i.globeMatrix,S=[T[12],T[13],T[14]],A=a.N.sub([],S,p),I=a.N.length(A),z=a.N.normalize([],A),V=i.worldSize/(2*Math.PI),Y=a.N.dot(z,x),X=Math.asin(V/I);if(X<Math.acos(Y)){if(!u)return null;const Xe=[],mt=[];a.N.scale(Xe,x,I/Y),a.N.normalize(mt,a.N.sub(mt,Xe,A)),a.N.normalize(x,a.N.add(x,A,a.N.scale(x,mt,Math.tan(X)*I)))}const ne=[];new Wk(p,x).closestPointOnSphere(S,V,ne);const ae=a.N.normalize([],we(T,0)),ye=a.N.normalize([],we(T,1)),xe=a.N.normalize([],we(T,2)),_e=a.N.dot(ae,ne),Ie=a.N.dot(ye,ne),Me=a.N.dot(xe,ne),$e=Ue(Math.asin(-Ie/V));let We=Ue(Math.atan2(_e,Me));We=i.center.lng+function(Xe,mt){const St=(mt-Xe+180)%360-180;return St<-180?St+360:St}(i.center.lng,We);const qe=In(We),rt=Re(xn($e),0,1);return new Jn(qe,rt)}class uZ{constructor(o,s,u){this.a=a.N.sub([],o,u),this.b=a.N.sub([],s,u),this.center=u;const p=a.N.normalize([],this.a),m=a.N.normalize([],this.b);this.angle=Math.acos(a.N.dot(p,m))}}function qk(i,o){if(i.angle===0)return null;let s;return s=i.a[o]===0?1/i.angle*.5*Math.PI:1/i.angle*Math.atan(i.b[o]/i.a[o]/Math.sin(i.angle)-1/Math.tan(i.angle)),s<0||s>1?null:function(u,p,m,v){const x=Math.sin(m);return u*(Math.sin((1-v)*m)/x)+p*(Math.sin(v*m)/x)}(i.a[o],i.b[o],i.angle,Re(s,0,1))+i.center[o]}function nd(i){if(i.z<=1)return cZ[i.z+2*i.y+i.x];const o=Zk(iw(i));return Bo.fromPoints(o)}function Sh(i,o,s){return a.N.scale(i,i,1-s),a.N.scaleAndAdd(i,i,o,s)}function CO(i,o,s){for(const u of i)a.N.transformMat4(u,u,o),a.N.scale(u,u,s)}function kO(i,o,s,u){const p=o/i.worldSize,m=i.globeMatrix;if(s.z<=1){const qe=nd(s).getCorners();return CO(qe,m,p),Bo.fromPoints(qe)}const v=iw(s,u),x=Zk(v,be+ow(i._tileCoverLift));CO(x,m,p);const T=Number.MAX_VALUE,S=[-T,-T,-T],A=[T,T,T];if(v.contains(i.center)){for(const Xe of x)a.N.min(A,A,Xe),a.N.max(S,S,Xe);S[2]=0;const qe=i.point,rt=[qe.x*p,qe.y*p,0];return a.N.min(A,A,rt),a.N.max(S,S,rt),new Bo(A,S)}if(i._tileCoverLift>0){for(const qe of x)a.N.min(A,A,qe),a.N.max(S,S,qe);return new Bo(A,S)}const I=[m[12]*p,m[13]*p,m[14]*p],z=v.getCenter(),V=Re(i.center.lat,-jn,jn),Y=Re(z.lat,-jn,jn),X=In(i.center.lng),ne=xn(V);let ae=X-In(z.lng);const ye=ne-xn(Y);ae>.5?ae-=1:ae<-.5&&(ae+=1);let xe=0;if(Math.abs(ae)>Math.abs(ye))xe=ae>=0?1:3;else{xe=ye>=0?0:2;const qe=[m[4]*p,m[5]*p,m[6]*p],rt=-Math.sin(Be(ye>=0?v.getSouth():v.getNorth()))*be;a.N.scaleAndAdd(I,I,qe,rt)}const _e=x[xe],Ie=x[(xe+1)%4],Me=new uZ(_e,Ie,I),$e=[qk(Me,0)||_e[0],qk(Me,1)||_e[1],qk(Me,2)||_e[2]],We=Jf(i.zoom);if(We>0){const qe=function({x:Xe,y:mt,z:St},ht,wt,lt,xt){const Gt=1/(1<<St);let At=Xe*Gt,dn=At+Gt,Jt=mt*Gt,It=Jt+Gt,Bn=0;const wn=(At+dn)/2-lt;return wn>.5?Bn=-1:wn<-.5&&(Bn=1),At=((At+Bn)*ht-(lt*=ht))*wt+lt,dn=((dn+Bn)*ht-lt)*wt+lt,Jt=(Jt*ht-(xt*=ht))*wt+xt,It=(It*ht-xt)*wt+xt,[[At,It,0],[dn,It,0],[dn,Jt,0],[At,Jt,0]]}(s,o,i._pixelsPerMercatorPixel,X,ne);for(let Xe=0;Xe<x.length;Xe++)Sh(x[Xe],qe[Xe],We);const rt=a.N.add([],qe[xe],qe[(xe+1)%4]);a.N.scale(rt,rt,.5),Sh($e,rt,We)}for(const qe of x)a.N.min(A,A,qe),a.N.max(S,S,qe);return A[2]=Math.min(_e[2],Ie[2]),a.N.min(A,A,$e),a.N.max(S,S,$e),new Bo(A,S)}function iw({x:i,y:o,z:s},u=!1){const p=1/(1<<s),m=new Se(yn(i*p),o===(1<<s)-1&&u?-90:Ln((o+1)*p)),v=new Se(yn((i+1)*p),o===0&&u?90:Ln(o*p));return new Le(m,v)}function Zk(i,o=be){const s=Be(i.getNorth()),u=Be(i.getSouth()),p=Math.cos(s),m=Math.cos(u),v=Math.sin(s),x=Math.sin(u),T=i.getWest(),S=i.getEast();return[H(m,x,T,o),H(m,x,S,o),H(p,v,S,o),H(p,v,T,o)]}function Gv(i,o,s,u){const p=1<<s.z,m=(i/Xt+s.x)/p;return le(Ln((o/Xt+s.y)/p),yn(m),u)}function aw({min:i,max:o}){return Ce/Math.max(o[0]-i[0],o[1]-i[1],o[2]-i[2])}const AO=new Float64Array(16);function sw(i){const o=aw(i),s=a.a6.fromScaling(AO,[o,o,o]);return a.a6.translate(s,s,a.N.negate([],i.min))}function Kk(i){const o=a.a6.fromTranslation(AO,i.min),s=1/aw(i);return a.a6.scale(o,o,[s,s,s])}function Xk(i){const o=Xt/(2*Math.PI);return i/(2*Math.PI)/o}function MO(i,o){return Xt/(512*Math.pow(2,i))*aw(nd(o))}function DO(i,o,s,u,p){const m=Xk(s),v=[i,o,-s/(2*Math.PI)],x=a.a6.identity(new Float64Array(16));return a.a6.translate(x,x,v),a.a6.scale(x,x,[m,m,m]),a.a6.rotateX(x,x,Be(-p)),a.a6.rotateY(x,x,Be(-u)),x}function Jf(i){return bt(Ee,he,i)}function RO(i,o){const s=le(o.lat,o.lng),u=function(m){const v=le(m._center.lat,m._center.lng),x=a.N.fromValues(0,1,0);let T=a.N.cross([],x,v);const S=a.a6.fromRotation([],-m.angle,v);T=a.N.transformMat4(T,T,S),a.a6.fromRotation(S,-m._pitch,T);const A=a.N.normalize([],v);return a.N.scale(A,A,ow(m.cameraToCenterDistance/m.pixelsPerMeter)),a.N.transformMat4(A,A,S),a.N.add([],v,A)}(i),p=a.N.subtract([],u,s);return a.N.angle(p,s)}function Qk(i,o){return RO(i,o)>Math.PI/2*1.01}const IO=Be(85),dZ=Math.cos(IO),hZ=Math.sin(IO),fZ=a.a6.create(),PO=i=>{const o=[];return i.paint.get("circle-pitch-alignment")==="map"&&o.push("PITCH_WITH_MAP"),i.paint.get("circle-pitch-scale")==="map"&&o.push("SCALE_WITH_MAP"),o};function OO(i,o,s,u,p,m,v,x,T){if(m&&i.queryGeometry.isAboveHorizon)return!1;m&&(T*=i.pixelToTileUnitsFactor);const S=i.tileID.canonical,A=s.projection.upVectorScale(S,s.center.lat,s.worldSize).metersToTile;for(const I of o)for(const z of I){const V=z.add(x),Y=p&&s.elevation?s.elevation.exaggeration()*p.getElevationAt(V.x,V.y,!0):0,X=s.projection.projectTilePoint(V.x,V.y,S);if(Y>0){const xe=s.projection.upVector(S,V.x,V.y);X.x+=xe[0]*A*Y,X.y+=xe[1]*A*Y,X.z+=xe[2]*A*Y}const ne=m?V:pZ(X.x,X.y,X.z,u),ae=m?i.tilespaceRays.map(xe=>gZ(xe,Y)):i.queryGeometry.screenGeometry,ye=a.a7.transformMat4([],[X.x,X.y,X.z,1],u);if(!v&&m?T*=ye[3]/s.cameraToCenterDistance:v&&!m&&(T*=s.cameraToCenterDistance/ye[3]),m){const xe=Ln((z.y/Xt+S.y)/(1<<S.z));T/=s.projection.pixelsPerMeter(xe,1)/on(1,xe)}if(_s(ae,ne,T))return!0}return!1}function pZ(i,o,s,u){const p=a.a7.transformMat4([],[i,o,s,1],u);return new ve(p[0]/p[3],p[1]/p[3])}const LO=a.N.fromValues(0,0,0),mZ=a.N.fromValues(0,0,1);function gZ(i,o){const s=a.N.create();return LO[2]=o,i.intersectsPlane(LO,mZ,s),new ve(s[0],s[1])}class NO extends ri{}function zO(i,{width:o,height:s},u,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==o*s*u)throw new RangeError("mismatched image size")}else p=new Uint8Array(o*s*u);return i.width=o,i.height=s,i.data=p,i}function BO(i,o,s){const{width:u,height:p}=o;u===i.width&&p===i.height||(Jk(i,o,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,u),height:Math.min(i.height,p)},s),i.width=u,i.height=p,i.data=o.data)}function Jk(i,o,s,u,p,m,v){if(p.width===0||p.height===0)return o;if(p.width>i.width||p.height>i.height||s.x>i.width-p.width||s.y>i.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>o.width||p.height>o.height||u.x>o.width-p.width||u.y>o.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const x=i.data,T=o.data,S=m===4&&v;for(let A=0;A<p.height;A++){const I=((s.y+A)*i.width+s.x)*m,z=((u.y+A)*o.width+u.x)*m;if(S)for(let V=0;V<p.width;V++){const Y=I+V*m+3,X=z+V*m;T[X+0]=255,T[X+1]=255,T[X+2]=255,T[X+3]=x[Y]}else for(let V=0;V<p.width*m;V++)T[z+V]=x[I+V]}return o}rn(NO,"HeatmapBucket",{omit:["layers"]});class ep{constructor(o,s){zO(this,o,1,s)}resize(o){BO(this,new ep(o),1)}clone(){return new ep({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,s,u,p,m){Jk(o,s,u,p,m,1)}}class gl{constructor(o,s){zO(this,o,4,s)}resize(o){BO(this,new gl(o),4)}replace(o,s){s?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new gl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,s,u,p,m,v){Jk(o,s,u,p,m,4,v)}}class FO{constructor(o,s){this.width=o.width,this.height=o.height,this.data=s instanceof Uint8Array?new Float32Array(s.buffer):s}}rn(ep,"AlphaImage"),rn(gl,"RGBAImage");const yZ=new wo({visibility:new $t(et.layout_heatmap.visibility)});var bZ={paint:new wo({"heatmap-radius":new Cn(et.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Cn(et.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new $t(et.paint_heatmap["heatmap-intensity"]),"heatmap-color":new qc(et.paint_heatmap["heatmap-color"]),"heatmap-opacity":new $t(et.paint_heatmap["heatmap-opacity"])}),layout:yZ};function qv(i){const o={},s=i.resolution||256,u=i.clips?i.clips.length:1,p=i.image||new gl({width:s,height:u}),m=(v,x,T)=>{o[i.evaluationKey]=T;const S=i.expression.evaluate(o);S&&(p.data[v+x+0]=Math.floor(255*S.r/S.a),p.data[v+x+1]=Math.floor(255*S.g/S.a),p.data[v+x+2]=Math.floor(255*S.b/S.a),p.data[v+x+3]=Math.floor(255*S.a))};if(i.clips)for(let v=0,x=0;v<u;++v,x+=4*s)for(let T=0,S=0;T<s;T++,S+=4){const A=T/(s-1),{start:I,end:z}=i.clips[v];m(x,S,I*(1-A)+z*A)}else for(let v=0,x=0;v<s;v++,x+=4)m(0,x,v/(s-1));return p}const vZ=new wo({visibility:new $t(et.layout_hillshade.visibility)});var _Z={paint:new wo({"hillshade-illumination-direction":new $t(et.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new $t(et.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new $t(et.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new $t(et.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new $t(et.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new $t(et.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new $t(et.paint_hillshade["hillshade-emissive-strength"])}),layout:vZ};const xZ=Yr([{name:"a_pos",components:2,type:"Int16"}],4),{members:wZ}=xZ;var eA={exports:{}};function lw(i,o,s){s=s||2;var u,p,m,v,x,T,S,A=o&&o.length,I=A?o[0]*s:i.length,z=jO(i,0,I,s,!0),V=[];if(!z||z.next===z.prev)return V;if(A&&(z=function(X,ne,ae,ye){var xe,_e,Ie,Me=[];for(xe=0,_e=ne.length;xe<_e;xe++)(Ie=jO(X,ne[xe]*ye,xe<_e-1?ne[xe+1]*ye:X.length,ye,!1))===Ie.next&&(Ie.steiner=!0),Me.push(DZ(Ie));for(Me.sort(kZ),xe=0;xe<Me.length;xe++)ae=AZ(Me[xe],ae);return ae}(i,o,z,s)),i.length>80*s){u=m=i[0],p=v=i[1];for(var Y=s;Y<I;Y+=s)(x=i[Y])<u&&(u=x),(T=i[Y+1])<p&&(p=T),x>m&&(m=x),T>v&&(v=T);S=(S=Math.max(m-u,v-p))!==0?32767/S:0}return Zv(z,V,s,u,p,S,0),V}function jO(i,o,s,u,p){var m,v;if(p===rA(i,o,s,u)>0)for(m=o;m<s;m+=u)v=VO(m,i[m],i[m+1],v);else for(m=s-u;m>=o;m-=u)v=VO(m,i[m],i[m+1],v);return v&&cw(v,v.next)&&(Xv(v),v=v.next),v}function Ag(i,o){if(!i)return i;o||(o=i);var s,u=i;do if(s=!1,u.steiner||!cw(u,u.next)&&xi(u.prev,u,u.next)!==0)u=u.next;else{if(Xv(u),(u=o=u.prev)===u.next)break;s=!0}while(s||u!==o);return o}function Zv(i,o,s,u,p,m,v){if(i){!v&&m&&function(A,I,z,V){var Y=A;do Y.z===0&&(Y.z=tA(Y.x,Y.y,I,z,V)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==A);Y.prevZ.nextZ=null,Y.prevZ=null,function(X){var ne,ae,ye,xe,_e,Ie,Me,$e,We=1;do{for(ae=X,X=null,_e=null,Ie=0;ae;){for(Ie++,ye=ae,Me=0,ne=0;ne<We&&(Me++,ye=ye.nextZ);ne++);for($e=We;Me>0||$e>0&&ye;)Me!==0&&($e===0||!ye||ae.z<=ye.z)?(xe=ae,ae=ae.nextZ,Me--):(xe=ye,ye=ye.nextZ,$e--),_e?_e.nextZ=xe:X=xe,xe.prevZ=_e,_e=xe;ae=ye}_e.nextZ=null,We*=2}while(Ie>1)}(Y)}(i,u,p,m);for(var x,T,S=i;i.prev!==i.next;)if(x=i.prev,T=i.next,m?TZ(i,u,p,m):EZ(i))o.push(x.i/s|0),o.push(i.i/s|0),o.push(T.i/s|0),Xv(i),i=T.next,S=T.next;else if((i=T)===S){v?v===1?Zv(i=SZ(Ag(i),o,s),o,s,u,p,m,2):v===2&&CZ(i,o,s,u,p,m):Zv(Ag(i),o,s,u,p,m,1);break}}}function EZ(i){var o=i.prev,s=i,u=i.next;if(xi(o,s,u)>=0)return!1;for(var p=o.x,m=s.x,v=u.x,x=o.y,T=s.y,S=u.y,A=p<m?p<v?p:v:m<v?m:v,I=x<T?x<S?x:S:T<S?T:S,z=p>m?p>v?p:v:m>v?m:v,V=x>T?x>S?x:S:T>S?T:S,Y=u.next;Y!==o;){if(Y.x>=A&&Y.x<=z&&Y.y>=I&&Y.y<=V&&hy(p,x,m,T,v,S,Y.x,Y.y)&&xi(Y.prev,Y,Y.next)>=0)return!1;Y=Y.next}return!0}function TZ(i,o,s,u){var p=i.prev,m=i,v=i.next;if(xi(p,m,v)>=0)return!1;for(var x=p.x,T=m.x,S=v.x,A=p.y,I=m.y,z=v.y,V=x<T?x<S?x:S:T<S?T:S,Y=A<I?A<z?A:z:I<z?I:z,X=x>T?x>S?x:S:T>S?T:S,ne=A>I?A>z?A:z:I>z?I:z,ae=tA(V,Y,o,s,u),ye=tA(X,ne,o,s,u),xe=i.prevZ,_e=i.nextZ;xe&&xe.z>=ae&&_e&&_e.z<=ye;){if(xe.x>=V&&xe.x<=X&&xe.y>=Y&&xe.y<=ne&&xe!==p&&xe!==v&&hy(x,A,T,I,S,z,xe.x,xe.y)&&xi(xe.prev,xe,xe.next)>=0||(xe=xe.prevZ,_e.x>=V&&_e.x<=X&&_e.y>=Y&&_e.y<=ne&&_e!==p&&_e!==v&&hy(x,A,T,I,S,z,_e.x,_e.y)&&xi(_e.prev,_e,_e.next)>=0))return!1;_e=_e.nextZ}for(;xe&&xe.z>=ae;){if(xe.x>=V&&xe.x<=X&&xe.y>=Y&&xe.y<=ne&&xe!==p&&xe!==v&&hy(x,A,T,I,S,z,xe.x,xe.y)&&xi(xe.prev,xe,xe.next)>=0)return!1;xe=xe.prevZ}for(;_e&&_e.z<=ye;){if(_e.x>=V&&_e.x<=X&&_e.y>=Y&&_e.y<=ne&&_e!==p&&_e!==v&&hy(x,A,T,I,S,z,_e.x,_e.y)&&xi(_e.prev,_e,_e.next)>=0)return!1;_e=_e.nextZ}return!0}function SZ(i,o,s){var u=i;do{var p=u.prev,m=u.next.next;!cw(p,m)&&$O(p,u,u.next,m)&&Kv(p,m)&&Kv(m,p)&&(o.push(p.i/s|0),o.push(u.i/s|0),o.push(m.i/s|0),Xv(u),Xv(u.next),u=i=m),u=u.next}while(u!==i);return Ag(u)}function CZ(i,o,s,u,p,m){var v=i;do{for(var x=v.next.next;x!==v.prev;){if(v.i!==x.i&&RZ(v,x)){var T=UO(v,x);return v=Ag(v,v.next),T=Ag(T,T.next),Zv(v,o,s,u,p,m,0),void Zv(T,o,s,u,p,m,0)}x=x.next}v=v.next}while(v!==i)}function kZ(i,o){return i.x-o.x}function AZ(i,o){var s=function(p,m){var v,x=m,T=p.x,S=p.y,A=-1/0;do{if(S<=x.y&&S>=x.next.y&&x.next.y!==x.y){var I=x.x+(S-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(I<=T&&I>A&&(A=I,v=x.x<x.next.x?x:x.next,I===T))return v}x=x.next}while(x!==m);if(!v)return null;var z,V=v,Y=v.x,X=v.y,ne=1/0;x=v;do T>=x.x&&x.x>=Y&&T!==x.x&&hy(S<X?T:A,S,Y,X,S<X?A:T,S,x.x,x.y)&&(z=Math.abs(S-x.y)/(T-x.x),Kv(x,p)&&(z<ne||z===ne&&(x.x>v.x||x.x===v.x&&MZ(v,x)))&&(v=x,ne=z)),x=x.next;while(x!==V);return v}(i,o);if(!s)return o;var u=UO(s,i);return Ag(u,u.next),Ag(s,s.next)}function MZ(i,o){return xi(i.prev,i,o.prev)<0&&xi(o.next,i,i.next)<0}function tA(i,o,s,u,p){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-s)*p|0)|i<<8))|i<<4))|i<<2))|i<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-u)*p|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function DZ(i){var o=i,s=i;do(o.x<s.x||o.x===s.x&&o.y<s.y)&&(s=o),o=o.next;while(o!==i);return s}function hy(i,o,s,u,p,m,v,x){return(p-v)*(o-x)>=(i-v)*(m-x)&&(i-v)*(u-x)>=(s-v)*(o-x)&&(s-v)*(m-x)>=(p-v)*(u-x)}function RZ(i,o){return i.next.i!==o.i&&i.prev.i!==o.i&&!function(s,u){var p=s;do{if(p.i!==s.i&&p.next.i!==s.i&&p.i!==u.i&&p.next.i!==u.i&&$O(p,p.next,s,u))return!0;p=p.next}while(p!==s);return!1}(i,o)&&(Kv(i,o)&&Kv(o,i)&&function(s,u){var p=s,m=!1,v=(s.x+u.x)/2,x=(s.y+u.y)/2;do p.y>x!=p.next.y>x&&p.next.y!==p.y&&v<(p.next.x-p.x)*(x-p.y)/(p.next.y-p.y)+p.x&&(m=!m),p=p.next;while(p!==s);return m}(i,o)&&(xi(i.prev,i,o.prev)||xi(i,o.prev,o))||cw(i,o)&&xi(i.prev,i,i.next)>0&&xi(o.prev,o,o.next)>0)}function xi(i,o,s){return(o.y-i.y)*(s.x-o.x)-(o.x-i.x)*(s.y-o.y)}function cw(i,o){return i.x===o.x&&i.y===o.y}function $O(i,o,s,u){var p=dw(xi(i,o,s)),m=dw(xi(i,o,u)),v=dw(xi(s,u,i)),x=dw(xi(s,u,o));return p!==m&&v!==x||!(p!==0||!uw(i,s,o))||!(m!==0||!uw(i,u,o))||!(v!==0||!uw(s,i,u))||!(x!==0||!uw(s,o,u))}function uw(i,o,s){return o.x<=Math.max(i.x,s.x)&&o.x>=Math.min(i.x,s.x)&&o.y<=Math.max(i.y,s.y)&&o.y>=Math.min(i.y,s.y)}function dw(i){return i>0?1:i<0?-1:0}function Kv(i,o){return xi(i.prev,i,i.next)<0?xi(i,o,i.next)>=0&&xi(i,i.prev,o)>=0:xi(i,o,i.prev)<0||xi(i,i.next,o)<0}function UO(i,o){var s=new nA(i.i,i.x,i.y),u=new nA(o.i,o.x,o.y),p=i.next,m=o.prev;return i.next=o,o.prev=i,s.next=p,p.prev=s,u.next=s,s.prev=u,m.next=u,u.prev=m,u}function VO(i,o,s,u){var p=new nA(i,o,s);return u?(p.next=u.next,p.prev=u,u.next.prev=p,u.next=p):(p.prev=p,p.next=p),p}function Xv(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function nA(i,o,s){this.i=i,this.x=o,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function rA(i,o,s,u){for(var p=0,m=o,v=s-u;m<s;m+=u)p+=(i[v]-i[m])*(i[m+1]+i[v+1]),v=m;return p}eA.exports=lw,eA.exports.default=lw,lw.deviation=function(i,o,s,u){var p=o&&o.length,m=Math.abs(rA(i,0,p?o[0]*s:i.length,s));if(p)for(var v=0,x=o.length;v<x;v++)m-=Math.abs(rA(i,o[v]*s,v<x-1?o[v+1]*s:i.length,s));var T=0;for(v=0;v<u.length;v+=3){var S=u[v]*s,A=u[v+1]*s,I=u[v+2]*s;T+=Math.abs((i[S]-i[I])*(i[A+1]-i[S+1])-(i[S]-i[A])*(i[I+1]-i[S+1]))}return m===0&&T===0?0:Math.abs((T-m)/m)},lw.flatten=function(i){for(var o=i[0][0].length,s={vertices:[],holes:[],dimensions:o},u=0,p=0;p<i.length;p++){for(var m=0;m<i[p].length;m++)for(var v=0;v<o;v++)s.vertices.push(i[p][m][v]);p>0&&s.holes.push(u+=i[p-1].length)}return s};var hw=Q(eA.exports);function oA(i,o){const s=i.length;if(s<=1)return[i];const u=[];let p,m;for(let v=0;v<s;v++){const x=qr(i[v]);x!==0&&(i[v].area=Math.abs(x),m===void 0&&(m=x<0),m===x<0?(p&&u.push(p),p=[i[v]]):p.push(i[v]))}if(p&&u.push(p),o>1)for(let v=0;v<u.length;v++)u[v].length<=o||(Ps(u[v],o,1,u[v].length-1,IZ),u[v]=u[v].slice(0,o));return u}function IZ(i,o){return o.area-i.area}function iA(i,o,s){const u=s.patternDependencies;let p=!1;for(const m of o){const v=m.paint.get(`${i}-pattern`);v.isConstant()||(p=!0);const x=v.constantOr(null);x&&(p=!0,u[x]=!0)}return p}function aA(i,o,s,u,p){const m=p.patternDependencies;for(const v of o){const x=v.paint.get(`${i}-pattern`).value;if(x.kind!=="constant"){let T=x.evaluate({zoom:u},s,{},p.availableImages);T=T&&T.name?T.name:T,m[T]=!0,s.patterns[v.id]=T}}return s}class sA{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new bs,this.indexArray=new ci,this.indexArray2=new ra,this.programConfigurations=new ce(o.layers,o.zoom),this.segments=new Po,this.segments2=new Po,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.projection=o.projection}populate(o,s,u,p){this.hasPattern=iA("fill",this.layers,s);const m=this.layers[0].layout.get("fill-sort-key"),v=[];for(const{feature:x,id:T,index:S,sourceLayerIndex:A}of o){const I=this.layers[0]._featureFilter.needGeometry,z=Oo(x,I);if(!this.layers[0]._featureFilter.filter(new xo(this.zoom),z,u))continue;const V=m?m.evaluate(z,{},u,s.availableImages):void 0,Y={id:T,properties:x.properties,type:x.type,sourceLayerIndex:A,index:S,geometry:I?z.geometry:Qo(x,u,p),patterns:{},sortKey:V};v.push(Y)}m&&v.sort((x,T)=>x.sortKey-T.sortKey);for(const x of v){const{geometry:T,index:S,sourceLayerIndex:A}=x;if(this.hasPattern){const I=aA("fill",this.layers,x,this.zoom,s);this.patternFeatures.push(I)}else this.addFeature(x,T,S,u,{},s.availableImages,s.brightness);s.featureIndex.insert(o[S].feature,T,S,A,this.index)}}update(o,s,u,p,m){const v=Object.keys(o).length!==0;v&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(o,s,v?this.stateDependentLayers:this.layers,u,p,m)}addFeatures(o,s,u,p,m,v){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,s,u,p,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,wZ),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,s,u,p,m,v=[],x){for(const T of oA(s,500)){let S=0;for(const X of T)S+=X.length;const A=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),I=A.vertexLength,z=[],V=[];for(const X of T){if(X.length===0)continue;X!==T[0]&&V.push(z.length/2);const ne=this.segments2.prepareSegment(X.length,this.layoutVertexArray,this.indexArray2),ae=ne.vertexLength;this.layoutVertexArray.emplaceBack(X[0].x,X[0].y),this.indexArray2.emplaceBack(ae+X.length-1,ae),z.push(X[0].x),z.push(X[0].y);for(let ye=1;ye<X.length;ye++)this.layoutVertexArray.emplaceBack(X[ye].x,X[ye].y),this.indexArray2.emplaceBack(ae+ye-1,ae+ye),z.push(X[ye].x),z.push(X[ye].y);ne.vertexLength+=X.length,ne.primitiveLength+=X.length}const Y=hw(z,V);for(let X=0;X<Y.length;X+=3)this.indexArray.emplaceBack(I+Y[X],I+Y[X+1],I+Y[X+2]);A.vertexLength+=S,A.primitiveLength+=Y.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,u,m,v,p,x)}}rn(sA,"FillBucket",{omit:["layers","patternFeatures"]});const PZ=new wo({"fill-sort-key":new Cn(et.layout_fill["fill-sort-key"]),visibility:new $t(et.layout_fill.visibility)});var OZ={paint:new wo({"fill-antialias":new $t(et.paint_fill["fill-antialias"]),"fill-opacity":new Cn(et.paint_fill["fill-opacity"]),"fill-color":new Cn(et.paint_fill["fill-color"]),"fill-outline-color":new Cn(et.paint_fill["fill-outline-color"]),"fill-translate":new $t(et.paint_fill["fill-translate"]),"fill-translate-anchor":new $t(et.paint_fill["fill-translate-anchor"]),"fill-pattern":new Cn(et.paint_fill["fill-pattern"]),"fill-emissive-strength":new $t(et.paint_fill["fill-emissive-strength"])}),layout:PZ};const LZ=Yr([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),NZ=Yr([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),zZ=Yr([{name:"a_centroid_pos",components:2,type:"Uint16"}]),BZ=Yr([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),FZ=Yr([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:jZ}=LZ;var fw={},$Z=re,HO=fy;function fy(i,o,s,u,p){this.properties={},this.extent=s,this.type=0,this._pbf=i,this._geometry=-1,this._keys=u,this._values=p,i.readFields(UZ,this,o)}function UZ(i,o,s){i==1?o.id=s.readVarint():i==2?function(u,p){for(var m=u.readVarint()+u.pos;u.pos<m;){var v=p._keys[u.readVarint()],x=p._values[u.readVarint()];p.properties[v]=x}}(s,o):i==3?o.type=s.readVarint():i==4&&(o._geometry=s.pos)}function VZ(i){for(var o,s,u=0,p=0,m=i.length,v=m-1;p<m;v=p++)u+=((s=i[v]).x-(o=i[p]).x)*(o.y+s.y);return u}fy.types=["Unknown","Point","LineString","Polygon"],fy.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var o,s=i.readVarint()+i.pos,u=1,p=0,m=0,v=0,x=[];i.pos<s;){if(p<=0){var T=i.readVarint();u=7&T,p=T>>3}if(p--,u===1||u===2)m+=i.readSVarint(),v+=i.readSVarint(),u===1&&(o&&x.push(o),o=[]),o.push(new $Z(m,v));else{if(u!==7)throw new Error("unknown command "+u);o&&o.push(o[0].clone())}}return o&&x.push(o),x},fy.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var o=i.readVarint()+i.pos,s=1,u=0,p=0,m=0,v=1/0,x=-1/0,T=1/0,S=-1/0;i.pos<o;){if(u<=0){var A=i.readVarint();s=7&A,u=A>>3}if(u--,s===1||s===2)(p+=i.readSVarint())<v&&(v=p),p>x&&(x=p),(m+=i.readSVarint())<T&&(T=m),m>S&&(S=m);else if(s!==7)throw new Error("unknown command "+s)}return[v,T,x,S]},fy.prototype.toGeoJSON=function(i,o,s){var u,p,m=this.extent*Math.pow(2,s),v=this.extent*i,x=this.extent*o,T=this.loadGeometry(),S=fy.types[this.type];function A(V){for(var Y=0;Y<V.length;Y++){var X=V[Y];V[Y]=[360*(X.x+v)/m-180,360/Math.PI*Math.atan(Math.exp((180-360*(X.y+x)/m)*Math.PI/180))-90]}}switch(this.type){case 1:var I=[];for(u=0;u<T.length;u++)I[u]=T[u][0];A(T=I);break;case 2:for(u=0;u<T.length;u++)A(T[u]);break;case 3:for(T=function(V){var Y=V.length;if(Y<=1)return[V];for(var X,ne,ae=[],ye=0;ye<Y;ye++){var xe=VZ(V[ye]);xe!==0&&(ne===void 0&&(ne=xe<0),ne===xe<0?(X&&ae.push(X),X=[V[ye]]):X.push(V[ye]))}return X&&ae.push(X),ae}(T),u=0;u<T.length;u++)for(p=0;p<T[u].length;p++)A(T[u][p])}T.length===1?T=T[0]:S="Multi"+S;var z={type:"Feature",geometry:{type:S,coordinates:T},properties:this.properties};return"id"in this&&(z.id=this.id),z};var HZ=HO,WO=YO;function YO(i,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(WZ,this,o),this.length=this._features.length}function WZ(i,o,s){i===15?o.version=s.readVarint():i===1?o.name=s.readString():i===5?o.extent=s.readVarint():i===2?o._features.push(s.pos):i===3?o._keys.push(s.readString()):i===4&&o._values.push(function(u){for(var p=null,m=u.readVarint()+u.pos;u.pos<m;){var v=u.readVarint()>>3;p=v===1?u.readString():v===2?u.readFloat():v===3?u.readDouble():v===4?u.readVarint64():v===5?u.readVarint():v===6?u.readSVarint():v===7?u.readBoolean():null}return p}(s))}YO.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var o=this._pbf.readVarint()+this._pbf.pos;return new HZ(this._pbf,o,this.extent,this._keys,this._values)};var YZ=WO;function GZ(i,o,s){if(i===3){var u=new YZ(s,s.readVarint()+s.pos);u.length&&(o[u.name]=u)}}var lA=fw.VectorTile=function(i,o){this.layers=i.readFields(GZ,{},o)},pw=fw.VectorTileFeature=HO;function mw(i,o,s,u){const p=[],m=u===0?(v,x,T,S,A,I)=>{v.push(new ve(I,T+(I-x)/(S-x)*(A-T)))}:(v,x,T,S,A,I)=>{v.push(new ve(x+(I-T)/(A-T)*(S-x),I))};for(const v of i){const x=[];for(const T of v){if(T.length<=2)continue;const S=[];for(let z=0;z<T.length-1;z++){const V=T[z].x,Y=T[z].y,X=T[z+1].x,ne=T[z+1].y,ae=u===0?V:Y,ye=u===0?X:ne;ae<o?ye>o&&m(S,V,Y,X,ne,o):ae>s?ye<s&&m(S,V,Y,X,ne,s):S.push(T[z]),ye<o&&ae>=o&&m(S,V,Y,X,ne,o),ye>s&&ae<=s&&m(S,V,Y,X,ne,s)}let A=T[T.length-1];const I=u===0?A.x:A.y;I>=o&&I<=s&&S.push(A),S.length&&(A=S[S.length-1],S[0].x===A.x&&S[0].y===A.y||S.push(S[0]),x.push(S))}x.length&&p.push(x)}return p}function gw(i,o){return i.x-o.x||i.y-o.y}function GO(i,o){return gw(i.min,o.min)===0&&gw(i.max,o.max)===0}function qO(i,o){return!(i.min.x>o.max.x||i.max.x<o.min.x||i.min.y>o.max.y||i.max.y<o.min.y)}function ZO(i,o,s){const u=1/Xt,p=1/(1<<s.canonical.z),m=(o.x*u+s.canonical.x)*p+s.wrap,v=(o.y*u+s.canonical.y)*p;return{min:new ve((i.x*u+s.canonical.x)*p+s.wrap,(i.y*u+s.canonical.y)*p),max:new ve(m,v)}}function qZ(i,o,s){const u=1<<s.canonical.z,p=((o.x-s.wrap)*u-s.canonical.x)*Xt,m=(o.y*u-s.canonical.y)*Xt;return{min:new ve(((i.x-s.wrap)*u-s.canonical.x)*Xt,(i.y*u-s.canonical.y)*Xt),max:new ve(p,m)}}function KO(i,o,s,u,p,m,v){const x=i.indices,T=i.vertices,S=[];for(let A=u;A<u+p;A+=3){const I=o[s[A+0]+m],z=o[s[A+1]+m],V=o[s[A+2]+m],Y=Math.min(I.x,z.x,V.x),X=Math.max(I.x,z.x,V.x),ne=Math.min(I.y,z.y,V.y),ae=Math.max(I.y,z.y,V.y);S.length=0,i.grid.query(new ve(Y,ne),new ve(X,ae),S);for(let ye=0;ye<S.length;ye++){const xe=S[ye];if($v(T[x[3*xe+0]],T[x[3*xe+1]],T[x[3*xe+2]],I,z,V,v))return!0}}return!1}function XO(i,o,s,u){if(!i||!s)return!1;let p=i.vertices;if(!o.canonical.equals(u.canonical)||o.wrap!==u.wrap){if(s.vertices.length<i.vertices.length)return XO(s,u,i,o);const m=o.canonical,v=u.canonical,x=Math.pow(2,v.z-m.z);p=i.vertices.map(T=>new ve(T.x*m.x*Xt*x-v.x*Xt,T.y*m.y*Xt*x-v.y*Xt))}return KO(s,p,i.indices,0,i.indices.length,0,0)}fw.VectorTileLayer=WO;class QO{constructor(o){this.size=o,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(o,s){const u=this.toIdx(o,s);return{min:this.minimums[u],max:this.maximums[u]}}isLeaf(o,s){return this.leaves[this.toIdx(o,s)]}toIdx(o,s){return s*this.size+o}}function JO(i,o,s,u){let p=0,m=Number.MAX_VALUE;for(let v=0;v<3;v++)if(Math.abs(u[v])<1e-15){if(s[v]<i[v]||s[v]>o[v])return null}else{const x=1/u[v];let T=(i[v]-s[v])*x,S=(o[v]-s[v])*x;if(T>S){const A=T;T=S,S=A}if(T>p&&(p=T),S<m&&(m=S),p>m)return null}return p}function eL(i,o,s,u,p,m,v,x,T,S,A){const I=u-i,z=p-o,V=m-s,Y=v-i,X=x-o,ne=T-s,ae=A[1]*ne-A[2]*X,ye=A[2]*Y-A[0]*ne,xe=A[0]*X-A[1]*Y,_e=I*ae+z*ye+V*xe;if(Math.abs(_e)<1e-15)return null;const Ie=1/_e,Me=S[0]-i,$e=S[1]-o,We=S[2]-s,qe=(Me*ae+$e*ye+We*xe)*Ie;if(qe<0||qe>1)return null;const rt=$e*V-We*z,Xe=We*I-Me*V,mt=Me*z-$e*I,St=(A[0]*rt+A[1]*Xe+A[2]*mt)*Ie;return St<0||qe+St>1?null:(Y*rt+X*Xe+ne*mt)*Ie}function tL(i,o,s){return(i-o)/(s-o)}function nL(i,o,s,u,p,m,v,x,T){const S=1<<s,A=m-u,I=v-p,z=(i+1)/S*A+u,V=(o+0)/S*I+p,Y=(o+1)/S*I+p;x[0]=(i+0)/S*A+u,x[1]=V,T[0]=z,T[1]=Y}class rL{constructor(o){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=o,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const s=function(m){const v=Math.ceil(Math.log2(m.dim/8)),x=[];let T=Math.ceil(Math.pow(2,v));const S=1/T,A=(V,Y,X,ne,ae)=>{const ye=ne?1:0,xe=(V+1)*X-ye,_e=Y*X,Ie=(Y+1)*X-ye;ae[0]=V*X,ae[1]=_e,ae[2]=xe,ae[3]=Ie};let I=new QO(T);const z=[];for(let V=0;V<T*T;V++){A(V%T,Math.floor(V/T),S,!1,z);const Y=tp(z[0],z[1],m),X=tp(z[2],z[1],m),ne=tp(z[2],z[3],m),ae=tp(z[0],z[3],m);I.minimums.push(Math.min(Y,X,ne,ae)),I.maximums.push(Math.max(Y,X,ne,ae)),I.leaves.push(1)}for(x.push(I),T/=2;T>=1;T/=2){const V=x[x.length-1];I=new QO(T);for(let Y=0;Y<T*T;Y++){A(Y%T,Math.floor(Y/T),2,!0,z);const X=V.getElevation(z[0],z[1]),ne=V.getElevation(z[2],z[1]),ae=V.getElevation(z[2],z[3]),ye=V.getElevation(z[0],z[3]),xe=V.isLeaf(z[0],z[1]),_e=V.isLeaf(z[2],z[1]),Ie=V.isLeaf(z[2],z[3]),Me=V.isLeaf(z[0],z[3]),$e=Math.min(X.min,ne.min,ae.min,ye.min),We=Math.max(X.max,ne.max,ae.max,ye.max),qe=xe&&_e&&Ie&&Me;I.maximums.push(We),I.minimums.push($e),I.leaves.push(We-$e<=5&&qe?1:0)}x.push(I)}return x}(this.dem),u=s.length-1,p=s[u];this._addNode(p.minimums[0],p.maximums[0],p.leaves[0]),this._construct(s,0,0,u,0)}raycastRoot(o,s,u,p,m,v,x=1){return JO([o,s,-100],[u,p,this.maximums[0]*x],m,v)}raycast(o,s,u,p,m,v,x=1){if(!this.nodeCount)return null;const T=this.raycastRoot(o,s,u,p,m,v,x);if(T==null)return null;const S=[],A=[],I=[],z=[],V=[{idx:0,t:T,nodex:0,nodey:0,depth:0}];for(;V.length>0;){const{idx:Y,t:X,nodex:ne,nodey:ae,depth:ye}=V.pop();if(this.leaves[Y]){nL(ne,ae,ye,o,s,u,p,I,z);const _e=1<<ye,Ie=(ne+0)/_e,Me=(ne+1)/_e,$e=(ae+0)/_e,We=(ae+1)/_e,qe=tp(Ie,$e,this.dem)*x,rt=tp(Me,$e,this.dem)*x,Xe=tp(Me,We,this.dem)*x,mt=tp(Ie,We,this.dem)*x,St=eL(I[0],I[1],qe,z[0],I[1],rt,z[0],z[1],Xe,m,v),ht=eL(z[0],z[1],Xe,I[0],z[1],mt,I[0],I[1],qe,m,v),wt=Math.min(St!==null?St:Number.MAX_VALUE,ht!==null?ht:Number.MAX_VALUE);if(wt!==Number.MAX_VALUE)return wt;{const lt=a.N.scaleAndAdd([],m,v,X);if(oL(qe,rt,mt,Xe,tL(lt[0],I[0],z[0]),tL(lt[1],I[1],z[1]))>=lt[2])return X}continue}let xe=0;for(let _e=0;_e<this._siblingOffset.length;_e++){nL((ne<<1)+this._siblingOffset[_e][0],(ae<<1)+this._siblingOffset[_e][1],ye+1,o,s,u,p,I,z),I[2]=-100,z[2]=this.maximums[this.childOffsets[Y]+_e]*x;const Ie=JO(I,z,m,v);if(Ie!=null){const Me=Ie;S[_e]=Me;let $e=!1;for(let We=0;We<xe&&!$e;We++)Me>=S[A[We]]&&(A.splice(We,0,_e),$e=!0);$e||(A[xe]=_e),xe++}}for(let _e=0;_e<xe;_e++){const Ie=A[_e];V.push({idx:this.childOffsets[Y]+Ie,t:S[Ie],nodex:(ne<<1)+this._siblingOffset[Ie][0],nodey:(ae<<1)+this._siblingOffset[Ie][1],depth:ye+1})}}return null}_addNode(o,s,u){return this.minimums.push(o),this.maximums.push(s),this.leaves.push(u),this.childOffsets.push(0),this.nodeCount++}_construct(o,s,u,p,m){if(o[p].isLeaf(s,u)===1)return;this.childOffsets[m]||(this.childOffsets[m]=this.nodeCount);const v=p-1,x=o[v];let T=0,S=0;for(let A=0;A<this._siblingOffset.length;A++){const I=2*s+this._siblingOffset[A][0],z=2*u+this._siblingOffset[A][1],V=x.getElevation(I,z),Y=x.isLeaf(I,z),X=this._addNode(V.min,V.max,Y);Y&&(T|=1<<A),S||(S=X)}for(let A=0;A<this._siblingOffset.length;A++)T&1<<A||this._construct(o,2*s+this._siblingOffset[A][0],2*u+this._siblingOffset[A][1],v,S+A)}}function oL(i,o,s,u,p,m){return yr(yr(i,s,m),yr(o,u,m),p)}function tp(i,o,s){const u=s.dim,p=Re(i*u-.5,0,u-1),m=Re(o*u-.5,0,u-1),v=Math.floor(p),x=Math.floor(m),T=Math.min(v+1,u-1),S=Math.min(x+1,u-1);return oL(s.get(v,x),s.get(T,x),s.get(v,S),s.get(T,S),p-v,m-x)}const ZZ={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function KZ(i,o,s){return(256*i*256+256*o+s)/10-1e4}function XZ(i,o,s){return 256*i+o+s/256-32768}class yw{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(o,s,u,p=!1){if(this.uid=o,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(u&&u!=="mapbox"&&u!=="terrarium")return On(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const m=this.dim=s.height-2,v=new Uint32Array(s.data.buffer);if(this.pixels=new Uint8Array(s.data.buffer),this.floatView=new Float32Array(s.data.buffer),this.borderReady=p,this._modifiedForSources={},!p){for(let T=0;T<m;T++)v[this._idx(-1,T)]=v[this._idx(0,T)],v[this._idx(m,T)]=v[this._idx(m-1,T)],v[this._idx(T,-1)]=v[this._idx(T,0)],v[this._idx(T,m)]=v[this._idx(T,m-1)];v[this._idx(-1,-1)]=v[this._idx(0,0)],v[this._idx(m,-1)]=v[this._idx(m-1,0)],v[this._idx(-1,m)]=v[this._idx(0,m-1)],v[this._idx(m,m)]=v[this._idx(m-1,m-1)]}const x=u==="terrarium"?XZ:KZ;for(let T=0;T<v.length;++T){const S=4*T;this.floatView[T]=x(this.pixels[S],this.pixels[S+1],this.pixels[S+2])}this._timestamp=it.now()}_buildQuadTree(){this._tree=new rL(this)}get(o,s,u=!1){u&&(o=Re(o,-1,this.dim),s=Re(s,-1,this.dim));const p=this._idx(o,s);return this.floatView[p]}set(o,s,u){const p=this._idx(o,s),m=this.floatView[p];return this.floatView[p]=u,u-m}static getUnpackVector(o){return ZZ[o]}_idx(o,s){if(o<-1||o>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(o+1)}static pack(o,s){const u=[0,0,0,0],p=yw.getUnpackVector(s);let m=Math.floor((o+p[3])/p[2]);return u[2]=m%256,m=Math.floor(m/256),u[1]=m%256,m=Math.floor(m/256),u[0]=m,u}getPixels(){return new FO({width:this.stride,height:this.stride},this.pixels)}backfillBorder(o,s,u){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let p=s*this.dim,m=s*this.dim+this.dim,v=u*this.dim,x=u*this.dim+this.dim;switch(s){case-1:p=m-1;break;case 1:m=p+1}switch(u){case-1:v=x-1;break;case 1:x=v+1}const T=-s*this.dim,S=-u*this.dim;for(let A=v;A<x;A++)for(let I=p;I<m;I++){const z=4*this._idx(I,A),V=4*this._idx(I+T,A+S);this.pixels[z+0]=o.pixels[V+0],this.pixels[z+1]=o.pixels[V+1],this.pixels[z+2]=o.pixels[V+2],this.pixels[z+3]=o.pixels[V+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}rn(yw,"DEMData"),rn(rL,"DemMinMaxQuadTree",{omit:["dem"]});class py{constructor(o,s,u){this._demTile=o,this._dem=this._demTile.dem,this._scale=s,this._offset=u}static create(o,s,u){const p=u||o.findDEMTileFor(s);if(!p||!p.dem)return;const m=p.dem,v=p.tileID,x=1<<s.canonical.z-v.canonical.z;return new py(p,m.dim/Xt/x,[(s.canonical.x/x-v.canonical.x)*m.dim,(s.canonical.y/x-v.canonical.y)*m.dim])}tileCoordToPixel(o,s){const u=s*this._scale+this._offset[1],p=Math.floor(o*this._scale+this._offset[0]),m=Math.floor(u);return new ve(p,m)}getElevationAt(o,s,u,p){const m=o*this._scale+this._offset[0],v=s*this._scale+this._offset[1],x=Math.floor(m),T=Math.floor(v),S=this._dem;return p=!!p,u?yr(yr(S.get(x,T,p),S.get(x,T+1,p),v-T),yr(S.get(x+1,T,p),S.get(x+1,T+1,p),v-T),m-x):S.get(x,T,p)}getElevationAtPixel(o,s,u){return this._dem.get(o,s,!!u)}getMeterToDEM(o){return(1<<this._demTile.tileID.canonical.z)*on(1,o)*this._dem.stride}}const QZ=pw.types,JZ=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius"],eK=["fill-extrusion-flood-light-ground-radius"],tK=Math.pow(2,13),nK=Math.pow(2,15)-1,iL=new ve(0,1),np=2147483648;function Qv(i,o,s,u,p,m,v,x){i.emplaceBack((o<<1)+v,(s<<1)+m,(Math.floor(u*tK)<<1)+p,Math.round(x))}function bw(i,o,s,u,p,m){i.emplaceBack(o.x,o.y,(s.x<<1)+u,(s.y<<1)+p,m)}function Jv(i,o,s){i.emplaceBack(o.x,o.y,o.z,s[0]*16384,s[1]*16384,s[2]*16384)}class aL{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class sL{constructor(){this.centroidXY=new ve(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new ve(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new ve(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new ve(this.max.x-this.min.x,this.max.y-this.min.y)}}class lL{constructor(){this.acc=new ve(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(o,s){o.min.x===Number.MAX_VALUE&&(o.min.x=o.max.x=s.x,o.min.y=o.max.y=s.y)}appendEdge(o,s,u){this.accCount++,this.acc._add(s);let p=!!this.borders;s.x<o.min.x?(o.min.x=s.x,p=!0):s.x>o.max.x&&(o.max.x=s.x,p=!0),s.y<o.min.y?(o.min.y=s.y,p=!0):s.y>o.max.y&&(o.max.y=s.y,p=!0),((s.x===0||s.x===Xt)&&s.x===u.x)!=((s.y===0||s.y===Xt)&&s.y===u.y)&&this.processBorderOverlap(s,u),p&&this.checkBorderIntersection(s,u)}checkBorderIntersection(o,s){s.x<0!=o.x<0&&this.addBorderIntersection(0,yr(s.y,o.y,(0-s.x)/(o.x-s.x))),s.x>Xt!=o.x>Xt&&this.addBorderIntersection(1,yr(s.y,o.y,(Xt-s.x)/(o.x-s.x))),s.y<0!=o.y<0&&this.addBorderIntersection(2,yr(s.x,o.x,(0-s.y)/(o.y-s.y))),s.y>Xt!=o.y>Xt&&this.addBorderIntersection(3,yr(s.x,o.x,(Xt-s.y)/(o.y-s.y)))}addBorderIntersection(o,s){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const u=this.borders[o];s<u[0]&&(u[0]=s),s>u[1]&&(u[1]=s)}processBorderOverlap(o,s){if(o.x===s.x){if(o.y===s.y)return;const u=o.x===0?0:1;this.addBorderIntersection(u,s.y),this.addBorderIntersection(u,o.y)}else{const u=o.y===0?2:3;this.addBorderIntersection(u,s.x),this.addBorderIntersection(u,o.x)}}centroid(){return this.accCount===0?new ve(0,0):new ve(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((o,s)=>o+ +(s[0]!==Number.MAX_VALUE),0):0}}function cL(i,o){const s=i.add(o)._unit(),u=Re(i.x*s.x+i.y*s.y,-1,1);var p,m,v;return p=Math.acos(u),Math.min(4,Math.max(-4,Math.tan(p)))/4*nK*((m=i).x*(v=o).y-m.y*v.x<0?-1:1)}const rK=[i=>i.x<0,i=>i.x>Xt,i=>i.y<0,i=>i.y>Xt];function oK(i,o,s,u){const p=[4];if(u===0)return p;s._mult(u);const m=i.sub(s),v=o.sub(s),x=[i,o,m,v];for(let T=0;T<4;T++)for(const S of x)if(rK[T](S)){p.push(T);break}return p}class uL{constructor(o){this.vertexArray=new pg,this.indexArray=new ci,this.programConfigurations=new ce(o.layers,o.zoom,s=>eK.includes(s)),this._segments=new Po,this.hiddenByLandmarkVertexArray=new hh,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new Po}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(o,s,u,p=!1){const m=o.length;if(m>2){let v=Math.max(0,this._segments.get().length-1);const x=this._segments._prepareSegment(4*m,this.vertexArray.length,2*this._segmentToGroundQuads[v].length);let T;v!==this._segments.get().length-1&&(v++,this._segmentToGroundQuads[v]=[],this._segmentToRegionTriCounts[v]=[0,0,0,0,0]);{const S=o[0],A=o[1];T=cL(S.sub(o[m-1])._perp()._unit(),A.sub(S)._perp()._unit())}for(let S=0;S<m;S++){const A=S===m-1?0:S+1,I=o[S],z=o[A],V=o[A===m-1?0:A+1],Y=z.sub(I)._perp()._unit(),X=cL(Y,V.sub(z)._perp()._unit()),ne=T,ae=X;if(cA(I,z,s)||p&&fL(I,s)&&fL(z,s)){T=X;continue}const ye=x.vertexLength;bw(this.vertexArray,I,z,1,1,ne),bw(this.vertexArray,I,z,1,0,ne),bw(this.vertexArray,I,z,0,1,ae),bw(this.vertexArray,I,z,0,0,ae),x.vertexLength+=4;const xe=oK(I,z,Y,u);for(const _e of xe)this._segmentToGroundQuads[v].push({id:ye,region:_e}),this._segmentToRegionTriCounts[v][_e]+=2,x.primitiveLength+=2;T=X}}}prepareBorderSegments(){if(!this.hasData())return;const o=this._segments.get(),s=o.length;for(let u=0;u<s;u++)this._segmentToGroundQuads[u].sort((p,m)=>p.region-m.region);for(let u=0;u<s;u++){const p=this._segmentToGroundQuads[u],m=o[u],v=this._segmentToRegionTriCounts[u];v.reduce((T,S)=>T+S,0);let x=0;for(let T=0;T<=4;T++){const S=v[T];if(S!==0){let A=this.regionSegments[T];A||(A=this.regionSegments[T]=new Po);const I={vertexOffset:m.vertexOffset,primitiveOffset:m.primitiveOffset+x,vertexLength:m.vertexLength,primitiveLength:S};A.get().push(I)}x+=S}for(let T=0;T<p.length;T++){const S=p[T].id;this.indexArray.emplaceBack(S,S+1,S+3),this.indexArray.emplaceBack(S,S+3,S+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(o,s,u,p,m,v){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,o,s,u,p,m,v)}upload(o){this.hasData()&&(this.vertexBuffer=o.createVertexBuffer(this.vertexArray,NZ.members),this.indexBuffer=o.createIndexBuffer(this.indexArray))}uploadPaintProperties(o){this.hasData()&&this.programConfigurations.upload(o)}update(o,s,u,p,m,v){this.hasData()&&this.programConfigurations.updatePaintArrays(o,s,u,p,m,v)}updateHiddenByLandmark(o){if(!this.hasData())return;const s=o.groundVertexCount+o.groundVertexArrayOffset;if(o.groundVertexCount===0)return;const u=o.flags&np?1:0;for(let p=o.groundVertexArrayOffset;p<s;++p)this.hiddenByLandmarkVertexArray.emplace(p,u);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(o){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=o.createVertexBuffer(this.hiddenByLandmarkVertexArray,BZ.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let o=0;o<=4;o++){const s=this.regionSegments[o];s&&s.destroy()}}}}class vw{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=o.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=o.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new ci,this.footprintVertices=new bs,this.footprintSegments=[],this.layoutVertexArray=new ul,this.centroidVertexArray=new ph,this.indexArray=new ci,this.programConfigurations=new ce(o.layers,o.zoom,s=>JZ.includes(s)),this.segments=new Po,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.groundEffect=new uL(o),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}populate(o,s,u,p){this.features=[],this.hasPattern=iA("fill-extrusion",this.layers,s),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=qn(u),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:m,id:v,index:x,sourceLayerIndex:T}of o){const S=this.layers[0]._featureFilter.needGeometry,A=Oo(m,S);if(!this.layers[0]._featureFilter.filter(new xo(this.zoom),A,u))continue;const I={id:v,sourceLayerIndex:T,index:x,geometry:S?A.geometry:Qo(m,u,p),properties:m.properties,type:m.type,patterns:{}},z=this.layoutVertexArray.length;this.hasPattern?this.features.push(aA("fill-extrusion",this.layers,I,this.zoom,s)):this.addFeature(I,I.geometry,x,u,{},s.availableImages,p,s.brightness),s.featureIndex.insert(m,I.geometry,x,T,this.index,z)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(o,s,u,p,m,v){for(const x of this.features){const{geometry:T}=x;this.addFeature(x,T,x.index,s,u,p,m,v)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(o,s,u,p,m){const v=Object.keys(o).length!==0;if(v&&!this.stateDependentLayers.length)return;const x=v?this.stateDependentLayers:this.layers;this.programConfigurations.updatePaintArrays(o,s,x,u,p,m),this.groundEffect.update(o,s,x,u,p,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,jZ),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=o.createVertexBuffer(this.layoutVertexExtArray,FZ.members,!0)),this.groundEffect.upload(o)),this.groundEffect.uploadPaintProperties(o),this.programConfigurations.upload(o),this.uploaded=!0}uploadCentroid(o){this.groundEffect.uploadHiddenByLandmark(o),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,zZ.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,s,u,p,m,v,x,T){const S=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(o,{})/this.tileToMeter,A=[new ve(0,0),new ve(Xt,Xt)],I=x.projection,z=I.name==="globe",V=QZ[o.type]==="Polygon",Y=new lL;Y.centroidDataIndex=this.centroidData.length;const X=new sL,ne=this.layers[0].paint.get("fill-extrusion-base").evaluate(o,{},p)<=0,ae=this.layers[0].paint.get("fill-extrusion-height").evaluate(o,{},p);X.height=ae,X.vertexArrayOffset=this.layoutVertexArray.length,X.groundVertexArrayOffset=this.groundEffect.vertexArray.length,z&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new $f);const ye=oA(s,500);for(let We=ye.length-1;We>=0;We--){const qe=ye[We];(qe.length===0||(xe=qe[0]).every(rt=>rt.x<=0)||xe.every(rt=>rt.x>=Xt)||xe.every(rt=>rt.y<=0)||xe.every(rt=>rt.y>=Xt))&&ye.splice(We,1)}var xe;let _e;if(z)_e=yL(ye,A,p);else{_e=[];for(const We of ye)_e.push({polygon:We,bounds:A})}const Ie=V?this.edgeRadius:0,Me=Ie>0&&this.zoom<17,$e=(We,qe)=>{if(We.length===0)return!1;const rt=We[We.length-1];return qe.x===rt.x&&qe.y===rt.y};for(const{polygon:We,bounds:qe}of _e){let rt=0,Xe=0;for(const wt of We)V&&!wt[0].equals(wt[wt.length-1])&&wt.push(wt[0]),Xe+=V?wt.length-1:wt.length;const mt=this.segments.prepareSegment((V?5:4)*Xe,this.layoutVertexArray,this.indexArray);X.footprintSegIdx<0&&(X.footprintSegIdx=this.footprintSegments.length),X.polygonSegIdx<0&&(X.polygonSegIdx=this.polygonSegments.length);const St={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},ht=new aL;if(ht.vertexOffset=this.footprintVertices.length,ht.indexOffset=3*this.footprintIndices.length,ht.ringIndices=[],V){const wt=[],lt=[];rt=mt.vertexLength;for(let Gt=0;Gt<We.length;Gt++){const At=We[Gt];At.length&&Gt!==0&&lt.push(wt.length/2);const dn=[];let Jt,It;Jt=At[1].sub(At[0])._perp()._unit(),ht.ringIndices.push(At.length-1);for(let Bn=1;Bn<At.length;Bn++){const wn=At[Bn],ln=At[Bn===At.length-1?1:Bn+1],Pt=wn.clone();if(Ie){It=ln.sub(wn)._perp()._unit();const Nn=Jt.add(It)._unit(),hr=Ie*Math.min(4,1/(Jt.x*Nn.x+Jt.y*Nn.y));Pt.x+=hr*Nn.x,Pt.y+=hr*Nn.y,Pt.x=Math.round(Pt.x),Pt.y=Math.round(Pt.y),Jt=It}!ne||Ie!==0&&!Me||$e(dn,Pt)||dn.push(Pt),Qv(this.layoutVertexArray,Pt.x,Pt.y,0,0,1,1,0),mt.vertexLength++,this.footprintVertices.emplaceBack(wn.x,wn.y),wt.push(wn.x,wn.y),z&&Jv(this.layoutVertexExtArray,I.projectTilePoint(Pt.x,Pt.y,p),I.upVector(p,Pt.x,Pt.y))}ne&&(Ie===0||Me)&&(dn.length!==0&&$e(dn,dn[0])&&dn.pop(),this.groundEffect.addData(dn,qe,S))}const xt=hw(wt,lt);for(let Gt=0;Gt<xt.length;Gt+=3)this.footprintIndices.emplaceBack(ht.vertexOffset+xt[Gt+0],ht.vertexOffset+xt[Gt+1],ht.vertexOffset+xt[Gt+2]),this.indexArray.emplaceBack(rt+xt[Gt],rt+xt[Gt+2],rt+xt[Gt+1]),mt.primitiveLength++;ht.indexCount+=xt.length,ht.vertexCount+=this.footprintVertices.length-ht.vertexOffset}for(let wt=0;wt<We.length;wt++){const lt=We[wt];Y.startRing(X,lt[0]);let xt=lt.length>4&&pL(lt[lt.length-2],lt[0],lt[1]),Gt=Ie?iK(lt[lt.length-2],lt[0],lt[1],Ie):0;const At=[];let dn,Jt,It;Jt=lt[1].sub(lt[0])._perp()._unit();let Bn=!0;for(let wn=1,ln=0;wn<lt.length;wn++){let Pt=lt[wn-1],Nn=lt[wn];const hr=lt[wn===lt.length-1?1:wn+1];if(Y.appendEdge(X,Nn,Pt),cA(Nn,Pt,qe)){Ie&&(Jt=hr.sub(Nn)._perp()._unit(),Bn=!Bn);continue}const $n=Nn.sub(Pt)._perp(),fr=$n.x/(Math.abs($n.x)+Math.abs($n.y)),Kn=$n.y>0?1:0,Sr=Pt.dist(Nn);if(ln+Sr>32768&&(ln=0),Ie){It=hr.sub(Nn)._perp()._unit();let Ur=hL(Pt,Nn,hr,dL(Jt,It),Ie);isNaN(Ur)&&(Ur=0);const Gr=Nn.sub(Pt)._unit();Pt=Pt.add(Gr.mult(Gt))._round(),Nn=Nn.add(Gr.mult(-Ur))._round(),Gt=Ur,Jt=It,ne&&this.zoom>=17&&($e(At,Pt)||At.push(Pt),$e(At,Nn)||At.push(Nn))}const or=mt.vertexLength,lo=lt.length>4&&pL(Pt,Nn,hr);let zr=mL(ln,xt,Bn);if(Qv(this.layoutVertexArray,Pt.x,Pt.y,fr,Kn,0,0,zr),Qv(this.layoutVertexArray,Pt.x,Pt.y,fr,Kn,0,1,zr),ln+=Sr,zr=mL(ln,lo,!Bn),xt=lo,Qv(this.layoutVertexArray,Nn.x,Nn.y,fr,Kn,0,0,zr),Qv(this.layoutVertexArray,Nn.x,Nn.y,fr,Kn,0,1,zr),mt.vertexLength+=4,this.indexArray.emplaceBack(or+0,or+1,or+2),this.indexArray.emplaceBack(or+1,or+3,or+2),mt.primitiveLength+=2,Ie){const Ur=rt+(wn===1?lt.length-2:wn-2),Gr=wn===1?rt:Ur+1;if(this.indexArray.emplaceBack(or+1,Ur,or+3),this.indexArray.emplaceBack(Ur,Gr,or+3),mt.primitiveLength+=2,dn===void 0&&(dn=or),!cA(hr,lt[wn],qe)){const Br=wn===lt.length-1?dn:mt.vertexLength;this.indexArray.emplaceBack(or+2,or+3,Br),this.indexArray.emplaceBack(or+3,Br+1,Br),this.indexArray.emplaceBack(or+3,Gr,Br+1),mt.primitiveLength+=3}Bn=!Bn}if(z){const Ur=this.layoutVertexExtArray,Gr=I.projectTilePoint(Pt.x,Pt.y,p),Br=I.projectTilePoint(Nn.x,Nn.y,p),ko=I.upVector(p,Pt.x,Pt.y),Qr=I.upVector(p,Nn.x,Nn.y);Jv(Ur,Gr,ko),Jv(Ur,Gr,ko),Jv(Ur,Br,Qr),Jv(Ur,Br,Qr)}}V&&(rt+=lt.length-1),ne&&Ie&&this.zoom>=17&&(At.length!==0&&$e(At,At[0])&&At.pop(),this.groundEffect.addData(At,qe,S,Ie>0))}this.footprintSegments.push(ht),St.triangleCount=this.indexArray.length-St.triangleArrayOffset,this.polygonSegments.push(St),++X.footprintSegLen,++X.polygonSegLen}if(X.vertexCount=this.layoutVertexArray.length-X.vertexArrayOffset,X.groundVertexCount=this.groundEffect.vertexArray.length-X.groundVertexArrayOffset,X.vertexCount!==0){if(X.centroidXY=Y.borders?iL:this.encodeCentroid(Y,X),this.centroidData.push(X),Y.borders){this.featuresOnBorder.push(Y);const We=this.featuresOnBorder.length-1;for(let qe=0;qe<Y.borders.length;qe++)Y.borders[qe][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[qe].push(We)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,u,m,v,p,T),this.groundEffect.addPaintPropertiesData(o,u,m,v,p,T),this.maxHeight=Math.max(this.maxHeight,ae)}}sortBorders(){for(let o=0;o<this.borderFeatureIndices.length;o++)this.borderFeatureIndices[o].sort((s,u)=>this.featuresOnBorder[s].borders[o][0]-this.featuresOnBorder[u].borders[o][0])}splitToSubtiles(){const o=[];for(let x=0;x<this.centroidData.length;x++){const T=this.centroidData[x],S=+(T.min.y+T.max.y>Xt),A=2*S+(+(T.min.x+T.max.x>Xt)^S);for(let I=0;I<T.polygonSegLen;I++){const z=T.polygonSegIdx+I;o.push({centroidIdx:x,subtile:A,polygonSegmentIdx:z,triangleSegmentIdx:this.polygonSegments[z].triangleSegIdx})}}const s=new ci;o.sort((x,T)=>x.triangleSegmentIdx===T.triangleSegmentIdx?x.subtile-T.subtile:x.triangleSegmentIdx-T.triangleSegmentIdx);let u=0,p=0,m=0;for(const x of o){if(x.triangleSegmentIdx!==u)break;m++}const v=o.length;for(;p!==o.length;){u=o[p].triangleSegmentIdx;let x=0,T=p,S=p;for(let A=T;A<m&&o[A].subtile===x;A++)S++;for(;T!==m;){const A=o[T];x=A.subtile;const I=this.centroidData[A.centroidIdx].min.clone(),z=this.centroidData[A.centroidIdx].max.clone(),V={vertexOffset:this.segments.segments[u].vertexOffset,primitiveOffset:s.length,vertexLength:this.segments.segments[u].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let Y=T;Y<S;Y++){const X=o[Y],ne=this.polygonSegments[X.polygonSegmentIdx],ae=this.centroidData[X.centroidIdx].min,ye=this.centroidData[X.centroidIdx].max,xe=this.indexArray.uint16;for(let _e=ne.triangleArrayOffset;_e<ne.triangleArrayOffset+ne.triangleCount;_e++)s.emplaceBack(xe[3*_e],xe[3*_e+1],xe[3*_e+2]);V.primitiveLength+=ne.triangleCount,I.x=Math.min(I.x,ae.x),I.y=Math.min(I.y,ae.y),z.x=Math.max(z.x,ye.x),z.y=Math.max(z.y,ye.y)}V.primitiveLength>0&&this.triangleSubSegments.push({segment:V,min:I,max:z}),T=S;for(let Y=T;Y<m&&o[Y].subtile===o[T].subtile;Y++)S++}p=m;for(let A=p;A<v&&o[A].triangleSegmentIdx===o[p].triangleSegmentIdx;A++)m++}s._trim(),this.indexArray=s}getVisibleSegments(o,s,u){let p=0,m=0;const v=1<<o.canonical.z;if(s){const X=s.getMinMaxForTile(o);X&&(p=X.min,m=X.max)}m+=this.maxHeight;const x=o.toUnwrapped();let T;const S=[x.canonical.x/v+x.wrap,x.canonical.y/v],A=[(x.canonical.x+1)/v+x.wrap,(x.canonical.y+1)/v],I=new Po,z=(X,ne,ae)=>[X[0]*(1-ae[0])+ne[0]*ae[0],X[1]*(1-ae[1])+ne[1]*ae[1]],V=[],Y=[];for(const X of this.triangleSubSegments){V[0]=X.min.x/Xt,V[1]=X.min.y/Xt,Y[0]=X.max.x/Xt,Y[1]=X.max.y/Xt;const ne=z(S,A,V),ae=z(S,A,Y);if(new Bo([ne[0],ne[1],p],[ae[0],ae[1],m]).intersectsPrecise(u)===0){T&&(I.segments.push(T),T=void 0);continue}const ye=X.segment;T&&T.vertexOffset!==ye.vertexOffset&&(I.segments.push(T),T=void 0),T?(T.vertexLength+=ye.vertexLength,T.primitiveLength+=ye.primitiveLength):T={vertexOffset:ye.vertexOffset,primitiveLength:ye.primitiveLength,vertexLength:ye.vertexLength,primitiveOffset:ye.primitiveOffset,sortKey:void 0,vaos:{}}}return T&&I.segments.push(T),I}encodeCentroid(o,s){const u=o.centroid(),p=s.span(),m=Math.min(7,Math.round(p.x*this.tileToMeter/10)),v=Math.min(7,Math.round(p.y*this.tileToMeter/10));return new ve(Re(u.x,1,Xt-1)<<3|m,Re(u.y,1,Xt-1)<<3|v)}encodeBorderCentroid(o){if(!o.borders)return new ve(0,0);const s=o.borders,u=Number.MAX_VALUE;if(s[0][0]!==u||s[1][0]!==u){const p=s[0][0]!==u?0:1;return new ve(6|(s[0][0]!==u?0:65528),(s[p][0]+s[p][1])/2<<3|6)}{const p=s[2][0]!==u?2:3;return new ve((s[p][0]+s[p][1])/2<<3|6,6|(s[2][0]!==u?0:65528))}}showCentroid(o){const s=this.centroidData[o.centroidDataIndex];s.flags&=np,s.centroidXY.x=0,s.centroidXY.y=0,this.writeCentroidToBuffer(s)}writeCentroidToBuffer(o){this.groundEffect.updateHiddenByLandmark(o);const s=o.vertexArrayOffset,u=o.vertexCount+o.vertexArrayOffset,p=o.flags&np?iL:o.centroidXY,m=this.centroidVertexArray.geta_centroid_pos0(s);if(this.centroidVertexArray.geta_centroid_pos1(s)!==p.y||m!==p.x){for(let v=s;v<u;++v)this.centroidVertexArray.emplace(v,p.x,p.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const o of this.centroidData)this.writeCentroidToBuffer(o)}updateReplacement(o,s){if(s.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=s.updateTime;const u=s.getReplacementRegionsForTile(o.toUnwrapped());if(function(m,v){if(m.length!==v.length)return!1;for(let x=0;x<m.length;x++)if(m[x].sourceId!==v[x].sourceId||!GO(m[x],v[x]))return!1;return!0}(this.activeReplacements,u))return;if(this.activeReplacements=u,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const m of this.centroidData)m.flags&=2147483647;const p=[];for(const m of this.activeReplacements){const v=Math.pow(2,m.footprintTileId.canonical.z-o.canonical.z);for(const x of this.centroidData)if(!(x.flags&np||m.min.x>x.max.x||x.min.x>m.max.x||m.min.y>x.max.y||x.min.y>m.max.y))for(let T=0;T<x.footprintSegLen;T++){const S=this.footprintSegments[x.footprintSegIdx+T];if(p.length=0,aK(this.footprintVertices,S.vertexOffset,S.vertexCount,m.footprintTileId.canonical,o.canonical,p),KO(m.footprint,p,this.footprintIndices.uint16,S.indexOffset,S.indexCount,-S.vertexOffset,-v)){x.flags|=np;break}}}for(const m of this.centroidData)this.writeCentroidToBuffer(m);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(o,s,u){let p=!1;for(let m=0;m<u.footprintSegLen;m++){const v=this.footprintSegments[u.footprintSegIdx+m];let x=0;for(const T of v.ringIndices){for(let S=x,A=T+x-1;S<T+x;A=S++){const I=this.footprintVertices.int16[2*(S+v.vertexOffset)+0],z=this.footprintVertices.int16[2*(S+v.vertexOffset)+1],V=this.footprintVertices.int16[2*(A+v.vertexOffset)+1];z>s!=V>s&&o<(this.footprintVertices.int16[2*(A+v.vertexOffset)+0]-I)*(s-z)/(V-z)+I&&(p=!p)}x=T}}return p}getHeightAtTileCoord(o,s){let u=Number.NEGATIVE_INFINITY,p=!0;const m=4*(o+Xt)*Xt+(s+Xt);if(this.partLookup.hasOwnProperty(m)){const v=this.partLookup[m];return v?{height:v.height,hidden:!!(v.flags&np)}:void 0}for(const v of this.centroidData)o>v.max.x||v.min.x>o||s>v.max.y||v.min.y>s||this.footprintContainsPoint(o,s,v)&&v&&v.height>u&&(u=v.height,this.partLookup[m]=v,p=!!(v.flags&np));if(u!==Number.NEGATIVE_INFINITY)return{height:u,hidden:p};this.partLookup[m]=void 0}}function dL(i,o){const s=i.add(o)._unit();return i.x*s.x+i.y*s.y}function iK(i,o,s,u){const p=o.sub(i)._perp()._unit(),m=s.sub(o)._perp()._unit();return hL(i,o,s,dL(p,m),u)}function hL(i,o,s,u,p){const m=Math.sqrt(1-u*u);return Math.min(i.dist(o)/3,o.dist(s)/3,p*m/u)}function cA(i,o,s){return i.x<s[0].x&&o.x<s[0].x||i.x>s[1].x&&o.x>s[1].x||i.y<s[0].y&&o.y<s[0].y||i.y>s[1].y&&o.y>s[1].y}function fL(i,o){return i.x<o[0].x||i.x>o[1].x||i.y<o[0].y||i.y>o[1].y}function pL(i,o,s){if(i.x<0||i.x>=Xt||o.x<0||o.x>=Xt||s.x<0||s.x>=Xt)return!1;const u=s.sub(o),p=u.perp(),m=i.sub(o);return(u.x*m.x+u.y*m.y)/Math.sqrt((u.x*u.x+u.y*u.y)*(m.x*m.x+m.y*m.y))>-.866&&p.x*m.x+p.y*m.y<0}function mL(i,o,s){const u=o?2|i:-3&i;return s?1|u:-2&u}function gL(){const i=Math.PI/32,o=Math.tan(i),s=ge;return s*Math.sqrt(1+2*o*o)-s}function yL(i,o,s){const u=1<<s.z,p=yn(s.x/u),m=yn((s.x+1)/u),v=Ln(s.y/u),x=Ln((s.y+1)/u);return function(T,S,A,I,z=0,V){const Y=[];if(!T.length||!A||!I)return Y;const X=(Me,$e)=>{for(const We of Me)Y.push({polygon:We,bounds:$e})},ne=Math.ceil(Math.log2(A)),ae=Math.ceil(Math.log2(I)),ye=ne-ae,xe=[];for(let Me=0;Me<Math.abs(ye);Me++)xe.push(ye>0?0:1);for(let Me=0;Me<Math.min(ne,ae);Me++)xe.push(0),xe.push(1);let _e=T;if(_e=mw(_e,S[0].y-z,S[1].y+z,1),_e=mw(_e,S[0].x-z,S[1].x+z,0),!_e.length)return Y;const Ie=[];for(xe.length?Ie.push({polygons:_e,bounds:S,depth:0}):X(_e,S);Ie.length;){const Me=Ie.pop(),$e=Me.depth,We=xe[$e],qe=Me.bounds[0],rt=Me.bounds[1],Xe=We===0?qe.x:qe.y,mt=We===0?rt.x:rt.y,St=V?V(We,Xe,mt):.5*(Xe+mt),ht=mw(Me.polygons,Xe-z,St+z,We),wt=mw(Me.polygons,St-z,mt+z,We);if(ht.length){const lt=[qe,new ve(We===0?St:rt.x,We===1?St:rt.y)];xe.length>$e+1?Ie.push({polygons:ht,bounds:lt,depth:$e+1}):X(ht,lt)}if(wt.length){const lt=[new ve(We===0?St:qe.x,We===1?St:qe.y),rt];xe.length>$e+1?Ie.push({polygons:wt,bounds:lt,depth:$e+1}):X(wt,lt)}}return Y}(i,o,Math.ceil((m-p)/11.25),Math.ceil((v-x)/11.25),1,(T,S,A)=>{if(T===0)return .5*(S+A);{const I=Ln((s.y+S/Xt)/u);return(xn(.5*(Ln((s.y+A/Xt)/u)+I))*u-s.y)*Xt}})}function aK(i,o,s,u,p,m){const v=Math.pow(2,u.z-p.z);for(let x=0;x<s;x++){let T=i.int16[2*(x+o)+0],S=i.int16[2*(x+o)+1];T=(T+p.x*Xt)*v-u.x*Xt,S=(S+p.y*Xt)*v-u.y*Xt,m.push(new ve(T,S))}}rn(vw,"FillExtrusionBucket",{omit:["layers","features"]}),rn(sL,"PartData"),rn(aL,"FootprintSegment"),rn(lL,"BorderCentroidData"),rn(uL,"GroundEffect");const sK=new wo({visibility:new $t(et["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new $t(et["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var lK={paint:new wo({"fill-extrusion-opacity":new $t(et["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Cn(et["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new $t(et["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new $t(et["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Cn(et["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Cn(et["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Cn(et["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new $t(et["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new $t(et["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new $t(et["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new $t(et["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new $t(et["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new $t(et["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new $t(et["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new $t(et["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Cn(et["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Cn(et["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new $t(et["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new $t(et["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new $t(et["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new $t(et["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new $t(et["paint_fill-extrusion"]["fill-extrusion-emissive-strength"])}),layout:sK};class my extends ve{constructor(o,s,u){super(o,s),this.z=u}}function e_(i,o){return i.x*o.x+i.y*o.y}function bL(i,o){if(i.length===1){let s=0;const u=o[s++];let p;for(;!p||u.equals(p);)if(p=o[s++],!p)return 1/0;for(;s<o.length;s++){const m=o[s],v=i[0],x=p.sub(u),T=m.sub(u),S=v.sub(u),A=e_(x,x),I=e_(x,T),z=e_(T,T),V=e_(S,x),Y=e_(S,T),X=A*z-I*I,ne=(z*V-I*Y)/X,ae=(A*Y-I*V)/X,ye=u.z*(1-ne-ae)+p.z*ne+m.z*ae;if(isFinite(ye))return ye}return 1/0}{let s=1/0;for(const u of o)s=Math.min(s,u.z);return s}}function vL(i,o,s,u,p,m,v,x){const T=v*p.getElevationAt(i,o,!0,!0),S=m[0]!==0,A=S?m[1]===0?v*(m[0]/7-450):v*function(I,z,V){const Y=Math.floor(z[0]/8),X=Math.floor(z[1]/8),ne=10*(z[0]-8*Y),ae=10*(z[1]-8*X),ye=I.getElevationAt(Y,X,!0,!0),xe=I.getMeterToDEM(V),_e=Math.floor(.5*(ne*xe-1)),Ie=Math.floor(.5*(ae*xe-1)),Me=I.tileCoordToPixel(Y,X),$e=2*_e+1,We=2*Ie+1,qe=function(wt,lt,xt,Gt,At){return[wt.getElevationAtPixel(lt,xt,!0),wt.getElevationAtPixel(lt+At,xt,!0),wt.getElevationAtPixel(lt,xt+At,!0),wt.getElevationAtPixel(lt+Gt,xt+At,!0)]}(I,Me.x-_e,Me.y-Ie,$e,We),rt=Math.abs(qe[0]-qe[1]),Xe=Math.abs(qe[2]-qe[3]),mt=Math.abs(qe[0]-qe[2])+Math.abs(qe[1]-qe[3]),St=Math.min(.25,.5*xe*(rt+Xe)/$e),ht=Math.min(.25,.5*xe*mt/We);return ye+Math.max(St*ne,ht*ae)}(p,m,x):T;return{base:T+(s===0)?-1:s,top:S?Math.max(A+u,T+s+2):T+u}}const cK=Yr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:uK}=cK,dK=Yr([{name:"a_packed",components:4,type:"Float32"}]),{members:hK}=dK;class _L{constructor(o,s){this.width=o,this.height=s,this.nextRow=0,this.image=new ep({width:o,height:s}),this.positions={},this.uploaded=!1}getDash(o,s){const u=this.getKey(o,s);return this.positions[u]}trim(){const o=this.width,s=this.height=Mt(this.nextRow);this.image.resize({width:o,height:s})}getKey(o,s){return o.join(",")+s}getDashRanges(o,s,u){const p=[];let m=o.length%2==1?-o[o.length-1]*u:0,v=o[0]*u,x=!0;p.push({left:m,right:v,isDash:x,zeroLength:o[0]===0});let T=o[0];for(let S=1;S<o.length;S++){x=!x;const A=o[S];m=T*u,T+=A,v=T*u,p.push({left:m,right:v,isDash:x,zeroLength:A===0})}return p}addRoundDash(o,s,u){const p=s/2;for(let m=-u;m<=u;m++){const v=this.width*(this.nextRow+u+m);let x=0,T=o[x];for(let S=0;S<this.width;S++){S/T.right>1&&(T=o[++x]);const A=Math.abs(S-T.left),I=Math.abs(S-T.right),z=Math.min(A,I);let V;const Y=m/u*(p+1);if(T.isDash){const X=p-Math.abs(Y);V=Math.sqrt(z*z+X*X)}else V=p-Math.sqrt(z*z+Y*Y);this.image.data[v+S]=Math.max(0,Math.min(255,V+128))}}}addRegularDash(o,s){for(let T=o.length-1;T>=0;--T){const S=o[T],A=o[T+1];S.zeroLength?o.splice(T,1):A&&A.isDash===S.isDash&&(A.left=S.left,o.splice(T,1))}const u=o[0],p=o[o.length-1];u.isDash===p.isDash&&(u.left=p.left-this.width,p.right=u.right+this.width);const m=this.width*this.nextRow;let v=0,x=o[v];for(let T=0;T<this.width;T++){T/x.right>1&&(x=o[++v]);const S=Math.abs(T-x.left),A=Math.abs(T-x.right),I=Math.min(S,A);this.image.data[m+T]=Math.max(0,Math.min(255,(x.isDash?I:-I)+s+128))}}addDash(o,s){const u=this.getKey(o,s);if(this.positions[u])return this.positions[u];const p=s==="round",m=p?7:0,v=2*m+1;if(this.nextRow+v>this.height)return On("LineAtlas out of space"),null;o.length===0&&o.push(1);let x=0;for(let A=0;A<o.length;A++)o[A]<0&&(On("Negative value is found in line dasharray, replacing values with 0"),o[A]=0),x+=o[A];if(x!==0){const A=this.width/x,I=this.getDashRanges(o,this.width,A);p?this.addRoundDash(I,A,m):this.addRegularDash(I,s==="square"?.5*A:0)}const T=this.nextRow+m;this.nextRow+=v;const S={tl:[T,m],br:[x,0]};return this.positions[u]=S,S}}rn(_L,"LineAtlas");const fK=pw.types,pK=Math.cos(Math.PI/180*37.5);class uA{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=o.index,this.projection=o.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new mg,this.layoutVertexArray2=new ec,this.indexArray=new ci,this.programConfigurations=new ce(o.layers,o.zoom),this.segments=new Po,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(o,s,u,p){this.hasPattern=iA("line",this.layers,s);const m=this.layers[0].layout.get("line-sort-key"),v=[];for(const{feature:A,id:I,index:z,sourceLayerIndex:V}of o){const Y=this.layers[0]._featureFilter.needGeometry,X=Oo(A,Y);if(!this.layers[0]._featureFilter.filter(new xo(this.zoom),X,u))continue;const ne=m?m.evaluate(X,{},u):void 0,ae={id:I,properties:A.properties,type:A.type,sourceLayerIndex:V,index:z,geometry:Y?X.geometry:Qo(A,u,p),patterns:{},sortKey:ne};v.push(ae)}m&&v.sort((A,I)=>A.sortKey-I.sortKey);const{lineAtlas:x,featureIndex:T}=s,S=this.addConstantDashes(x);for(const A of v){const{geometry:I,index:z,sourceLayerIndex:V}=A;if(S&&this.addFeatureDashes(A,x),this.hasPattern){const Y=aA("line",this.layers,A,this.zoom,s);this.patternFeatures.push(Y)}else this.addFeature(A,I,z,u,x.positions,s.availableImages,s.brightness);T.insert(o[z].feature,I,z,V,this.index)}}addConstantDashes(o){let s=!1;for(const u of this.layers){const p=u.paint.get("line-dasharray").value,m=u.layout.get("line-cap").value;if(p.kind!=="constant"||m.kind!=="constant")s=!0;else{const v=m.value,x=p.value;if(!x)continue;o.addDash(x,v)}}return s}addFeatureDashes(o,s){const u=this.zoom;for(const p of this.layers){const m=p.paint.get("line-dasharray").value,v=p.layout.get("line-cap").value;if(m.kind==="constant"&&v.kind==="constant")continue;let x,T;if(m.kind==="constant"){if(x=m.value,!x)continue}else x=m.evaluate({zoom:u},o);T=v.kind==="constant"?v.value:v.evaluate({zoom:u},o),s.addDash(x,T),o.patterns[p.id]=s.getKey(x,T)}}update(o,s,u,p,m){const v=Object.keys(o).length!==0;v&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(o,s,v?this.stateDependentLayers:this.layers,u,p,m)}addFeatures(o,s,u,p,m,v){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,s,u,p,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,hK)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,uK),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,s,u,p,m,v,x){const T=this.layers[0].layout,S=T.get("line-join").evaluate(o,{}),A=T.get("line-cap").evaluate(o,{}),I=T.get("line-miter-limit"),z=T.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const V of s)this.addLine(V,o,S,A,I,z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,u,m,v,p,x)}addLine(o,s,u,p,m,v){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ae=0;ae<o.length-1;ae++)this.totalDistance+=o[ae].dist(o[ae+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const x=fK[s.type]==="Polygon";let T=o.length;for(;T>=2&&o[T-1].equals(o[T-2]);)T--;let S=0;for(;S<T-1&&o[S].equals(o[S+1]);)S++;if(T<(x?3:2))return;u==="bevel"&&(m=1.05);const A=this.overscaling<=16?15*Xt/(512*this.overscaling):0,I=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray);let z,V,Y,X,ne;this.e1=this.e2=-1,x&&(z=o[T-2],ne=o[S].sub(z)._unit()._perp());for(let ae=S;ae<T;ae++){if(Y=ae===T-1?x?o[S+1]:void 0:o[ae+1],Y&&o[ae].equals(Y))continue;ne&&(X=ne),z&&(V=z),z=o[ae],ne=Y?Y.sub(z)._unit()._perp():X,X=X||ne;let ye=X.add(ne);ye.x===0&&ye.y===0||ye._unit();const xe=X.x*ne.x+X.y*ne.y,_e=ye.x*ne.x+ye.y*ne.y,Ie=_e!==0?1/_e:1/0,Me=2*Math.sqrt(2-2*_e),$e=_e<pK&&V&&Y,We=X.x*ne.y-X.y*ne.x>0;if($e&&ae>S){const Xe=z.dist(V);if(Xe>2*A){const mt=z.sub(z.sub(V)._mult(A/Xe)._round());this.updateDistance(V,mt),this.addCurrentVertex(mt,X,0,0,I),V=mt}}const qe=V&&Y;let rt=qe?u:x?"butt":p;if(qe&&rt==="round"&&(Ie<v?rt="miter":Ie<=2&&(rt="fakeround")),rt==="miter"&&Ie>m&&(rt="bevel"),rt==="bevel"&&(Ie>2&&(rt="flipbevel"),Ie<m&&(rt="miter")),V&&this.updateDistance(V,z),rt==="miter")ye._mult(Ie),this.addCurrentVertex(z,ye,0,0,I);else if(rt==="flipbevel"){if(Ie>100)ye=ne.mult(-1);else{const Xe=Ie*X.add(ne).mag()/X.sub(ne).mag();ye._perp()._mult(Xe*(We?-1:1))}this.addCurrentVertex(z,ye,0,0,I),this.addCurrentVertex(z,ye.mult(-1),0,0,I)}else if(rt==="bevel"||rt==="fakeround"){const Xe=-Math.sqrt(Ie*Ie-1),mt=We?Xe:0,St=We?0:Xe;if(V&&this.addCurrentVertex(z,X,mt,St,I),rt==="fakeround"){const ht=Math.round(180*Me/Math.PI/20);for(let wt=1;wt<ht;wt++){let lt=wt/ht;if(lt!==.5){const Gt=lt-.5;lt+=lt*Gt*(lt-1)*((1.0904+xe*(xe*(3.55645-1.43519*xe)-3.2452))*Gt*Gt+(.848013+xe*(.215638*xe-1.06021)))}const xt=ne.sub(X)._mult(lt)._add(X)._unit()._mult(We?-1:1);this.addHalfVertex(z,xt.x,xt.y,!1,We,0,I)}}Y&&this.addCurrentVertex(z,ne,-mt,-St,I)}else if(rt==="butt")this.addCurrentVertex(z,ye,0,0,I);else if(rt==="square"){const Xe=V?1:-1;V||this.addCurrentVertex(z,ye,Xe,Xe,I),this.addCurrentVertex(z,ye,0,0,I),V&&this.addCurrentVertex(z,ye,Xe,Xe,I)}else rt==="round"&&(V&&(this.addCurrentVertex(z,X,0,0,I),this.addCurrentVertex(z,X,1,1,I,!0)),Y&&(this.addCurrentVertex(z,ne,-1,-1,I,!0),this.addCurrentVertex(z,ne,0,0,I)));if($e&&ae<T-1){const Xe=z.dist(Y);if(Xe>2*A){const mt=z.add(Y.sub(z)._mult(A/Xe)._round());this.updateDistance(z,mt),this.addCurrentVertex(mt,ne,0,0,I),z=mt}}}}addCurrentVertex(o,s,u,p,m,v=!1){const x=s.y*p-s.x,T=-s.y-s.x*p;this.addHalfVertex(o,s.x+s.y*u,s.y-s.x*u,v,!1,u,m),this.addHalfVertex(o,x,T,v,!0,-p,m)}addHalfVertex({x:o,y:s},u,p,m,v,x,T){this.layoutVertexArray.emplaceBack((o<<1)+(m?1:0),(s<<1)+(v?1:0),Math.round(63*u)+128,Math.round(63*p)+128,1+(x===0?0:x<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const S=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,S),T.primitiveLength++),v?this.e2=S:this.e1=S}updateScaledDistance(){if(this.lineClips){const o=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=o*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(o,s){this.distance+=o.dist(s),this.updateScaledDistance()}}rn(uA,"LineBucket",{omit:["layers","patternFeatures"]});const mK=new wo({"line-cap":new Cn(et.layout_line["line-cap"]),"line-join":new Cn(et.layout_line["line-join"]),"line-miter-limit":new $t(et.layout_line["line-miter-limit"]),"line-round-limit":new $t(et.layout_line["line-round-limit"]),"line-sort-key":new Cn(et.layout_line["line-sort-key"]),visibility:new $t(et.layout_line.visibility)});var xL={paint:new wo({"line-opacity":new Cn(et.paint_line["line-opacity"]),"line-color":new Cn(et.paint_line["line-color"]),"line-translate":new $t(et.paint_line["line-translate"]),"line-translate-anchor":new $t(et.paint_line["line-translate-anchor"]),"line-width":new Cn(et.paint_line["line-width"]),"line-gap-width":new Cn(et.paint_line["line-gap-width"]),"line-offset":new Cn(et.paint_line["line-offset"]),"line-blur":new Cn(et.paint_line["line-blur"]),"line-dasharray":new Cn(et.paint_line["line-dasharray"]),"line-pattern":new Cn(et.paint_line["line-pattern"]),"line-gradient":new qc(et.paint_line["line-gradient"]),"line-trim-offset":new $t(et.paint_line["line-trim-offset"]),"line-emissive-strength":new $t(et.paint_line["line-emissive-strength"]),"line-border-width":new Cn(et.paint_line["line-border-width"]),"line-border-color":new Cn(et.paint_line["line-border-color"])}),layout:mK};function wL(i,o,s){return o*(Xt/(i.tileSize*Math.pow(2,s-i.tileID.overscaledZ)))}function EL(i,o){return 1/wL(i,1,o.tileZoom)}function TL(i,o,s,u){return i.translatePosMatrix(u||o.tileID.projMatrix,o,s.paint.get("line-translate"),s.paint.get("line-translate-anchor"))}const SL=i=>{const o=[];CL(i)&&o.push("RENDER_LINE_DASH"),i.paint.get("line-gradient")&&o.push("RENDER_LINE_GRADIENT");const s=i.paint.get("line-trim-offset");return s[0]===0&&s[1]===0||o.push("RENDER_LINE_TRIM_OFFSET"),i.paint.get("line-border-width").constantOr(1)!==0&&o.push("RENDER_LINE_BORDER"),o};function CL(i){const o=i.paint.get("line-dasharray").value;return o.value||o.kind!=="constant"}const kL=new class extends Cn{possiblyEvaluate(i,o){return o=new xo(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,transition:o.transition}),super.possiblyEvaluate(i,o)}evaluate(i,o,s,u){return o=Nt({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(i,o,s,u)}}(xL.paint.properties["line-width"].specification);function AL(i,o){return o>0?o+2*i:i}kL.useIntegerZoom=!0;const gK=Yr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),yK=Yr([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),bK=Yr([{name:"a_projected_pos",components:4,type:"Float32"}],4);Yr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const vK=Yr([{name:"a_z_offset",components:1,type:"Float32"}],4),_K=Yr([{name:"a_texb",components:2,type:"Uint16"}]),xK=Yr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),wK=Yr([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_z_offset",components:1,type:"Float32"}]);Yr([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ML=Yr([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),EK=Yr([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Yr([{name:"triangle",components:3,type:"Uint16"}]),Yr([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Yr([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"}]),Yr([{type:"Float32",name:"offsetX"}]),Yr([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var ya=24;const nu=128;function dA(i,o){const{expression:s}=o;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new xo(i+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:p}=s;let m=0;for(;m<u.length&&u[m]<=i;)m++;m=Math.max(0,m-1);let v=m;for(;v<u.length&&u[v]<i+1;)v++;v=Math.min(u.length-1,v);const x=u[m],T=u[v];return s.kind==="composite"?{kind:"composite",minZoom:x,maxZoom:T,interpolationType:p}:{kind:"camera",minZoom:x,maxZoom:T,minSize:s.evaluate(new xo(x)),maxSize:s.evaluate(new xo(T)),interpolationType:p}}}function _w(i,{uSize:o,uSizeT:s},{lowerSize:u,upperSize:p}){return i.kind==="source"?u/nu:i.kind==="composite"?yr(u/nu,p/nu,s):o}function gy(i,o){let s=0,u=0;if(i.kind==="constant")u=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:p,minZoom:m,maxZoom:v}=i,x=p?Re(Ea.interpolationFactor(p,o,m,v),0,1):0;i.kind==="camera"?u=yr(i.minSize,i.maxSize,x):s=x}return{uSizeT:s,uSize:u}}var TK=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:nu,evaluateSizeForFeature:_w,evaluateSizeForZoom:gy,getSizeData:dA});function SK(i,o,s){return i.sections.forEach(u=>{u.text=function(p,m,v){const x=m.layout.get("text-transform").evaluate(v,{});return x==="uppercase"?p=p.toLocaleUpperCase():x==="lowercase"&&(p=p.toLocaleLowerCase()),Ta.applyArabicShaping&&(p=Ta.applyArabicShaping(p)),p}(u.text,o,s)}),i}const t_={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function CK(i){return i==="︶"||i==="﹈"||i==="︸"||i==="﹄"||i==="﹂"||i==="︾"||i==="︼"||i==="︺"||i==="︘"||i==="﹀"||i==="︐"||i==="︓"||i==="︔"||i==="｀"||i==="￣"||i==="︑"||i==="︒"}function kK(i){return i==="︵"||i==="﹇"||i==="︷"||i==="﹃"||i==="﹁"||i==="︽"||i==="︻"||i==="︹"||i==="︗"||i==="︿"}var AK={read:function(i,o,s,u,p){var m,v,x=8*p-u-1,T=(1<<x)-1,S=T>>1,A=-7,I=s?p-1:0,z=s?-1:1,V=i[o+I];for(I+=z,m=V&(1<<-A)-1,V>>=-A,A+=x;A>0;m=256*m+i[o+I],I+=z,A-=8);for(v=m&(1<<-A)-1,m>>=-A,A+=u;A>0;v=256*v+i[o+I],I+=z,A-=8);if(m===0)m=1-S;else{if(m===T)return v?NaN:1/0*(V?-1:1);v+=Math.pow(2,u),m-=S}return(V?-1:1)*v*Math.pow(2,m-u)},write:function(i,o,s,u,p,m){var v,x,T,S=8*m-p-1,A=(1<<S)-1,I=A>>1,z=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,V=u?0:m-1,Y=u?1:-1,X=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(x=isNaN(o)?1:0,v=A):(v=Math.floor(Math.log(o)/Math.LN2),o*(T=Math.pow(2,-v))<1&&(v--,T*=2),(o+=v+I>=1?z/T:z*Math.pow(2,1-I))*T>=2&&(v++,T/=2),v+I>=A?(x=0,v=A):v+I>=1?(x=(o*T-1)*Math.pow(2,p),v+=I):(x=o*Math.pow(2,I-1)*Math.pow(2,p),v=0));p>=8;i[s+V]=255&x,V+=Y,x/=256,p-=8);for(v=v<<p|x,S+=p;S>0;i[s+V]=255&v,V+=Y,v/=256,S-=8);i[s+V-Y]|=128*X}},DL=Co,xw=AK;function Co(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Co.Varint=0,Co.Fixed64=1,Co.Bytes=2,Co.Fixed32=5;var hA=4294967296,RL=1/hA,IL=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ch(i){return i.type===Co.Bytes?i.readVarint()+i.pos:i.pos+1}function yy(i,o,s){return s?4294967296*o+(i>>>0):4294967296*(o>>>0)+(i>>>0)}function PL(i,o,s){var u=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));s.realloc(u);for(var p=s.pos-1;p>=i;p--)s.buf[p+u]=s.buf[p]}function MK(i,o){for(var s=0;s<i.length;s++)o.writeVarint(i[s])}function DK(i,o){for(var s=0;s<i.length;s++)o.writeSVarint(i[s])}function RK(i,o){for(var s=0;s<i.length;s++)o.writeFloat(i[s])}function IK(i,o){for(var s=0;s<i.length;s++)o.writeDouble(i[s])}function PK(i,o){for(var s=0;s<i.length;s++)o.writeBoolean(i[s])}function OK(i,o){for(var s=0;s<i.length;s++)o.writeFixed32(i[s])}function LK(i,o){for(var s=0;s<i.length;s++)o.writeSFixed32(i[s])}function NK(i,o){for(var s=0;s<i.length;s++)o.writeFixed64(i[s])}function zK(i,o){for(var s=0;s<i.length;s++)o.writeSFixed64(i[s])}function ww(i,o){return(i[o]|i[o+1]<<8|i[o+2]<<16)+16777216*i[o+3]}function by(i,o,s){i[s]=o,i[s+1]=o>>>8,i[s+2]=o>>>16,i[s+3]=o>>>24}function OL(i,o){return(i[o]|i[o+1]<<8|i[o+2]<<16)+(i[o+3]<<24)}Co.prototype={destroy:function(){this.buf=null},readFields:function(i,o,s){for(s=s||this.length;this.pos<s;){var u=this.readVarint(),p=u>>3,m=this.pos;this.type=7&u,i(p,o,this),this.pos===m&&this.skip(u)}return o},readMessage:function(i,o){return this.readFields(i,o,this.readVarint()+this.pos)},readFixed32:function(){var i=ww(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=OL(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=ww(this.buf,this.pos)+ww(this.buf,this.pos+4)*hA;return this.pos+=8,i},readSFixed64:function(){var i=ww(this.buf,this.pos)+OL(this.buf,this.pos+4)*hA;return this.pos+=8,i},readFloat:function(){var i=xw.read(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=xw.read(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var o,s,u=this.buf;return o=127&(s=u[this.pos++]),s<128?o:(o|=(127&(s=u[this.pos++]))<<7,s<128?o:(o|=(127&(s=u[this.pos++]))<<14,s<128?o:(o|=(127&(s=u[this.pos++]))<<21,s<128?o:function(p,m,v){var x,T,S=v.buf;if(x=(112&(T=S[v.pos++]))>>4,T<128||(x|=(127&(T=S[v.pos++]))<<3,T<128)||(x|=(127&(T=S[v.pos++]))<<10,T<128)||(x|=(127&(T=S[v.pos++]))<<17,T<128)||(x|=(127&(T=S[v.pos++]))<<24,T<128)||(x|=(1&(T=S[v.pos++]))<<31,T<128))return yy(p,x,m);throw new Error("Expected varint not more than 10 bytes")}(o|=(15&(s=u[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,o=this.pos;return this.pos=i,i-o>=12&&IL?function(s,u,p){return IL.decode(s.subarray(u,p))}(this.buf,o,i):function(s,u,p){for(var m="",v=u;v<p;){var x,T,S,A=s[v],I=null,z=A>239?4:A>223?3:A>191?2:1;if(v+z>p)break;z===1?A<128&&(I=A):z===2?(192&(x=s[v+1]))==128&&(I=(31&A)<<6|63&x)<=127&&(I=null):z===3?(T=s[v+2],(192&(x=s[v+1]))==128&&(192&T)==128&&((I=(15&A)<<12|(63&x)<<6|63&T)<=2047||I>=55296&&I<=57343)&&(I=null)):z===4&&(T=s[v+2],S=s[v+3],(192&(x=s[v+1]))==128&&(192&T)==128&&(192&S)==128&&((I=(15&A)<<18|(63&x)<<12|(63&T)<<6|63&S)<=65535||I>=1114112)&&(I=null)),I===null?(I=65533,z=1):I>65535&&(I-=65536,m+=String.fromCharCode(I>>>10&1023|55296),I=56320|1023&I),m+=String.fromCharCode(I),v+=z}return m}(this.buf,o,i)},readBytes:function(){var i=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,i);return this.pos=i,o},readPackedVarint:function(i,o){if(this.type!==Co.Bytes)return i.push(this.readVarint(o));var s=Ch(this);for(i=i||[];this.pos<s;)i.push(this.readVarint(o));return i},readPackedSVarint:function(i){if(this.type!==Co.Bytes)return i.push(this.readSVarint());var o=Ch(this);for(i=i||[];this.pos<o;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Co.Bytes)return i.push(this.readBoolean());var o=Ch(this);for(i=i||[];this.pos<o;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Co.Bytes)return i.push(this.readFloat());var o=Ch(this);for(i=i||[];this.pos<o;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Co.Bytes)return i.push(this.readDouble());var o=Ch(this);for(i=i||[];this.pos<o;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Co.Bytes)return i.push(this.readFixed32());var o=Ch(this);for(i=i||[];this.pos<o;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Co.Bytes)return i.push(this.readSFixed32());var o=Ch(this);for(i=i||[];this.pos<o;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Co.Bytes)return i.push(this.readFixed64());var o=Ch(this);for(i=i||[];this.pos<o;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Co.Bytes)return i.push(this.readSFixed64());var o=Ch(this);for(i=i||[];this.pos<o;)i.push(this.readSFixed64());return i},skip:function(i){var o=7&i;if(o===Co.Varint)for(;this.buf[this.pos++]>127;);else if(o===Co.Bytes)this.pos=this.readVarint()+this.pos;else if(o===Co.Fixed32)this.pos+=4;else{if(o!==Co.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(i,o){this.writeVarint(i<<3|o)},realloc:function(i){for(var o=this.length||16;o<this.pos+i;)o*=2;if(o!==this.length){var s=new Uint8Array(o);s.set(this.buf),this.buf=s,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),by(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),by(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),by(this.buf,-1&i,this.pos),by(this.buf,Math.floor(i*RL),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),by(this.buf,-1&i,this.pos),by(this.buf,Math.floor(i*RL),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(o,s){var u,p;if(o>=0?(u=o%4294967296|0,p=o/4294967296|0):(p=~(-o/4294967296),4294967295^(u=~(-o%4294967296))?u=u+1|0:(u=0,p=p+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(m,v,x){x.buf[x.pos++]=127&m|128,m>>>=7,x.buf[x.pos++]=127&m|128,m>>>=7,x.buf[x.pos++]=127&m|128,m>>>=7,x.buf[x.pos++]=127&m|128,x.buf[x.pos]=127&(m>>>=7)}(u,0,s),function(m,v){var x=(7&m)<<4;v.buf[v.pos++]|=x|((m>>>=3)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m|((m>>>=7)?128:0),m&&(v.buf[v.pos++]=127&m)))))}(p,s)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var o=this.pos;this.pos=function(u,p,m){for(var v,x,T=0;T<p.length;T++){if((v=p.charCodeAt(T))>55295&&v<57344){if(!x){v>56319||T+1===p.length?(u[m++]=239,u[m++]=191,u[m++]=189):x=v;continue}if(v<56320){u[m++]=239,u[m++]=191,u[m++]=189,x=v;continue}v=x-55296<<10|v-56320|65536,x=null}else x&&(u[m++]=239,u[m++]=191,u[m++]=189,x=null);v<128?u[m++]=v:(v<2048?u[m++]=v>>6|192:(v<65536?u[m++]=v>>12|224:(u[m++]=v>>18|240,u[m++]=v>>12&63|128),u[m++]=v>>6&63|128),u[m++]=63&v|128)}return m}(this.buf,i,this.pos);var s=this.pos-o;s>=128&&PL(o,s,this),this.pos=o-1,this.writeVarint(s),this.pos+=s},writeFloat:function(i){this.realloc(4),xw.write(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),xw.write(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var o=i.length;this.writeVarint(o),this.realloc(o);for(var s=0;s<o;s++)this.buf[this.pos++]=i[s]},writeRawMessage:function(i,o){this.pos++;var s=this.pos;i(o,this);var u=this.pos-s;u>=128&&PL(s,u,this),this.pos=s-1,this.writeVarint(u),this.pos+=u},writeMessage:function(i,o,s){this.writeTag(i,Co.Bytes),this.writeRawMessage(o,s)},writePackedVarint:function(i,o){o.length&&this.writeMessage(i,MK,o)},writePackedSVarint:function(i,o){o.length&&this.writeMessage(i,DK,o)},writePackedBoolean:function(i,o){o.length&&this.writeMessage(i,PK,o)},writePackedFloat:function(i,o){o.length&&this.writeMessage(i,RK,o)},writePackedDouble:function(i,o){o.length&&this.writeMessage(i,IK,o)},writePackedFixed32:function(i,o){o.length&&this.writeMessage(i,OK,o)},writePackedSFixed32:function(i,o){o.length&&this.writeMessage(i,LK,o)},writePackedFixed64:function(i,o){o.length&&this.writeMessage(i,NK,o)},writePackedSFixed64:function(i,o){o.length&&this.writeMessage(i,zK,o)},writeBytesField:function(i,o){this.writeTag(i,Co.Bytes),this.writeBytes(o)},writeFixed32Field:function(i,o){this.writeTag(i,Co.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(i,o){this.writeTag(i,Co.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(i,o){this.writeTag(i,Co.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(i,o){this.writeTag(i,Co.Fixed64),this.writeSFixed64(o)},writeVarintField:function(i,o){this.writeTag(i,Co.Varint),this.writeVarint(o)},writeSVarintField:function(i,o){this.writeTag(i,Co.Varint),this.writeSVarint(o)},writeStringField:function(i,o){this.writeTag(i,Co.Bytes),this.writeString(o)},writeFloatField:function(i,o){this.writeTag(i,Co.Fixed32),this.writeFloat(o)},writeDoubleField:function(i,o){this.writeTag(i,Co.Fixed64),this.writeDouble(o)},writeBooleanField:function(i,o){this.writeVarintField(i,!!o)}};var vy=Q(DL);const fA=3;function BK(i,o,s){o.glyphs=[],i===1&&s.readMessage(FK,o)}function FK(i,o,s){if(i===3){const{id:u,bitmap:p,width:m,height:v,left:x,top:T,advance:S}=s.readMessage(jK,{});o.glyphs.push({id:u,bitmap:new ep({width:m+2*fA,height:v+2*fA},p),metrics:{width:m,height:v,left:x,top:T,advance:S}})}else i===4?o.ascender=s.readSVarint():i===5&&(o.descender=s.readSVarint())}function jK(i,o,s){i===1?o.id=s.readVarint():i===2?o.bitmap=s.readBytes():i===3?o.width=s.readVarint():i===4?o.height=s.readVarint():i===5?o.left=s.readSVarint():i===6?o.top=s.readSVarint():i===7&&(o.advance=s.readVarint())}const LL=fA,yl={horizontal:1,vertical:2,horizontalOnly:3};class n_{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,s){const u=new n_;return u.scale=o||1,u.fontStack=s,u}static forImage(o){const s=new n_;return s.imageName=o,s}}class _y{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,s){const u=new _y;for(let p=0;p<o.sections.length;p++){const m=o.sections[p];m.image?u.addImageSection(m):u.addTextSection(m,s)}return u}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSections(){return this.sections}getSectionIndex(o){return this.sectionIndex[o]}getCodePoint(o){return this.text.codePointAt(o)}verticalizePunctuation(o){this.text=function(s,u){let p="";for(let m=0;m<s.length;m++){const v=s.charCodeAt(m+1)||null,x=s.charCodeAt(m-1)||null;p+=!u&&(v&&X0(v)&&!t_[s[m+1]]||x&&X0(x)&&!t_[s[m-1]])||!t_[s[m]]?s[m]:t_[s[m]]}return p}(this.text,o)}trim(){let o=0;for(let u=0;u<this.text.length&&Ew[this.text.charCodeAt(u)];u++)o++;let s=this.text.length;for(let u=this.text.length-1;u>=0&&u>=o&&Ew[this.text.charCodeAt(u)];u--)s--;this.text=this.text.substring(o,s),this.sectionIndex=this.sectionIndex.slice(o,s)}substring(o,s){const u=new _y;return u.text=this.text.substring(o,s),u.sectionIndex=this.sectionIndex.slice(o,s),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,s)=>Math.max(o,this.sections[s].scale),0)}addTextSection(o,s){this.text+=o.text,this.sections.push(n_.forText(o.scale,o.fontStack||s));const u=this.sections.length-1;for(let p=0;p<o.text.length;++p)this.sectionIndex.push(u)}addImageSection(o){const s=o.image?o.image.namePrimary:"";if(s.length===0)return void On("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCodePoint(u),this.sections.push(n_.forImage(s)),this.sectionIndex.push(this.sections.length-1)):On("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function pA(i,o,s,u,p,m,v,x,T,S,A,I,z,V,Y){const X=_y.fromFeature(i,p);I===yl.vertical&&X.verticalizePunctuation(z);let ne=[];const ae=function(Me,$e,We,qe,rt,Xe){if(!Me)return[];const mt=[],St=function(xt,Gt,At,dn,Jt,It){let Bn=0;for(let wn=0;wn<xt.length();wn++){const ln=xt.getSection(wn);Bn+=NL(xt.getCodePoint(wn),ln,dn,Jt,Gt,It)}return Bn/Math.max(1,Math.ceil(Bn/At))}(Me,$e,We,qe,rt,Xe),ht=Me.text.indexOf("​")>=0;let wt=0;for(let xt=0;xt<Me.length();xt++){const Gt=Me.getSection(xt),At=Me.getCodePoint(xt);if(Ew[At]||(wt+=NL(At,Gt,qe,rt,$e,Xe)),xt<Me.length()-1){const dn=!((lt=At)<11904||!(un["Bopomofo Extended"](lt)||un.Bopomofo(lt)||un["CJK Compatibility Forms"](lt)||un["CJK Compatibility Ideographs"](lt)||un["CJK Compatibility"](lt)||un["CJK Radicals Supplement"](lt)||un["CJK Strokes"](lt)||un["CJK Symbols and Punctuation"](lt)||un["CJK Unified Ideographs Extension A"](lt)||un["CJK Unified Ideographs"](lt)||un["Enclosed CJK Letters and Months"](lt)||un["Halfwidth and Fullwidth Forms"](lt)||un.Hiragana(lt)||un["Ideographic Description Characters"](lt)||un["Kangxi Radicals"](lt)||un["Katakana Phonetic Extensions"](lt)||un.Katakana(lt)||un["Vertical Forms"](lt)||un["Yi Radicals"](lt)||un["Yi Syllables"](lt)));($K[At]||dn||Gt.imageName)&&mt.push(BL(xt+1,wt,St,mt,UK(At,Me.getCodePoint(xt+1),dn&&ht),!1))}}var lt;return FL(BL(Me.length(),wt,St,mt,0,!0))}(X,S,m,o,u,V),{processBidirectionalText:ye,processStyledBidirectionalText:xe}=Ta;if(ye&&X.sections.length===1){const Me=ye(X.toString(),ae);for(const $e of Me){const We=new _y;We.text=$e,We.sections=X.sections;for(let qe=0;qe<$e.length;qe++)We.sectionIndex.push(0);ne.push(We)}}else if(xe){const Me=xe(X.text,X.sectionIndex,ae);for(const $e of Me){const We=new _y;We.text=$e[0],We.sectionIndex=$e[1],We.sections=X.sections,ne.push(We)}}else ne=function(Me,$e){const We=[],qe=Me.text;let rt=0;for(const Xe of $e)We.push(Me.substring(rt,Xe)),rt=Xe;return rt<qe.length&&We.push(Me.substring(rt,qe.length)),We}(X,ae);const _e=[],Ie={positionedLines:_e,text:X.toString(),top:A[1],bottom:A[1],left:A[0],right:A[0],writingMode:I,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Me,$e,We,qe,rt,Xe,mt,St,ht,wt,lt,xt){let Gt=0,At=0,dn=0;const Jt=St==="right"?1:St==="left"?0:.5;let It=!1;for(const hr of rt){const $n=hr.getSections();for(const fr of $n){if(fr.imageName)continue;const Kn=$e[fr.fontStack];if(Kn&&(It=Kn.ascender!==void 0&&Kn.descender!==void 0,!It))break}if(!It)break}let Bn=0;for(const hr of rt){hr.trim();const $n=hr.getMaxScale(),fr=($n-1)*ya,Kn={positionedGlyphs:[],lineOffset:0};Me.positionedLines[Bn]=Kn;const Sr=Kn.positionedGlyphs;let or=0;if(!hr.length()){At+=Xe,++Bn;continue}let lo=0,zr=0;for(let Gr=0;Gr<hr.length();Gr++){const Br=hr.getSection(Gr),ko=hr.getSectionIndex(Gr),Qr=hr.getCodePoint(Gr);let Yo=Br.scale,wi=null,ia=null,To=null,No=ya,Hi=0;const Wi=!(ht===yl.horizontal||!lt&&!Jd(Qr)||lt&&(Ew[Qr]||(wn=Qr,un.Arabic(wn)||un["Arabic Supplement"](wn)||un["Arabic Extended-A"](wn)||un["Arabic Presentation Forms-A"](wn)||un["Arabic Presentation Forms-B"](wn))));if(Br.imageName){const Yi=qe[Br.imageName];if(!Yi)continue;To=Br.imageName,Me.iconsInText=Me.iconsInText||!0,ia=Yi.paddedRect;const bo=Yi.displaySize;Yo=Yo*ya/xt,wi={width:bo[0],height:bo[1],left:0,top:-LL,advance:Wi?bo[1]:bo[0],localGlyph:!1},Hi=It?-wi.height*Yo:$n*ya-17-bo[1]*Yo,No=wi.advance;const js=(Wi?bo[0]:bo[1])*Yo-ya*$n;js>0&&js>or&&(or=js)}else{const Yi=We[Br.fontStack];if(!Yi)continue;Yi[Qr]&&(ia=Yi[Qr]);const bo=$e[Br.fontStack];if(!bo)continue;const js=bo.glyphs[Qr];if(!js)continue;if(wi=js.metrics,No=Qr!==8203?ya:0,It){const cp=bo.ascender!==void 0?Math.abs(bo.ascender):0,es=bo.descender!==void 0?Math.abs(bo.descender):0,Ua=(cp+es)*Yo;lo<Ua&&(lo=Ua,zr=(cp-es)/2*Yo),Hi=-cp*Yo}else Hi=($n-Yo)*ya-17}Wi?(Me.verticalizable=!0,Sr.push({glyph:Qr,imageName:To,x:Gt,y:At+Hi,vertical:Wi,scale:Yo,localGlyph:wi.localGlyph,fontStack:Br.fontStack,sectionIndex:ko,metrics:wi,rect:ia}),Gt+=No*Yo+wt):(Sr.push({glyph:Qr,imageName:To,x:Gt,y:At+Hi,vertical:Wi,scale:Yo,localGlyph:wi.localGlyph,fontStack:Br.fontStack,sectionIndex:ko,metrics:wi,rect:ia}),Gt+=wi.advance*Yo+wt)}Sr.length!==0&&(dn=Math.max(Gt-wt,dn),It?jL(Sr,Jt,or,zr,Xe*$n/2):jL(Sr,Jt,or,0,Xe/2)),Gt=0;const Ur=Xe*$n+or;Kn.lineOffset=Math.max(or,fr),At+=Ur,++Bn}var wn;const ln=At,{horizontalAlign:Pt,verticalAlign:Nn}=mA(mt);(function(hr,$n,fr,Kn,Sr,or){const lo=($n-fr)*Sr,zr=-or*Kn;for(const Ur of hr)for(const Gr of Ur.positionedGlyphs)Gr.x+=lo,Gr.y+=zr})(Me.positionedLines,Jt,Pt,Nn,dn,ln),Me.top+=-Nn*ln,Me.bottom=Me.top+ln,Me.left+=-Pt*dn,Me.right=Me.left+dn,Me.hasBaseline=It}(Ie,o,s,u,ne,v,x,T,I,S,z,Y),!function(Me){for(const $e of Me)if($e.positionedGlyphs.length!==0)return!1;return!0}(_e)&&Ie}const Ew={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},$K={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function NL(i,o,s,u,p,m){if(o.imageName){const v=u[o.imageName];return v?v.displaySize[0]*o.scale*ya/m+p:0}{const v=s[o.fontStack],x=v&&v.glyphs[i];return x?x.metrics.advance*o.scale+p:0}}function zL(i,o,s,u){const p=Math.pow(i-o,2);return u?i<o?p/2:2*p:p+Math.abs(s)*s}function UK(i,o,s){let u=0;return i===10&&(u-=1e4),s&&(u+=150),i!==40&&i!==65288||(u+=50),o!==41&&o!==65289||(u+=50),u}function BL(i,o,s,u,p,m){let v=null,x=zL(o,s,p,m);for(const T of u){const S=zL(o-T.x,s,p,m)+T.badness;S<=x&&(v=T,x=S)}return{index:i,x:o,priorBreak:v,badness:x}}function FL(i){return i?FL(i.priorBreak).concat(i.index):[]}function mA(i){let o=.5,s=.5;switch(i){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:o,verticalAlign:s}}function jL(i,o,s,u,p){if(!(o||s||u||p))return;const m=i.length-1,v=i[m],x=(v.x+v.metrics.advance*v.scale)*o;for(let T=0;T<=m;T++)i[T].x-=x,i[T].y+=s+u+p}function VK(i,o,s,u){const{horizontalAlign:p,verticalAlign:m}=mA(u),v=s[0]-i.displaySize[0]*p,x=s[1]-i.displaySize[1]*m;return{imagePrimary:i,imageSecondary:o,top:x,bottom:x+i.displaySize[1],left:v,right:v+i.displaySize[0]}}function $L(i,o,s,u,p,m){const v=i.imagePrimary;let x;if(v.content){const ne=v.content,ae=v.pixelRatio||1;x=[ne[0]/ae,ne[1]/ae,v.displaySize[0]-ne[2]/ae,v.displaySize[1]-ne[3]/ae]}const T=o.left*m,S=o.right*m;let A,I,z,V;s==="width"||s==="both"?(V=p[0]+T-u[3],I=p[0]+S+u[1]):(V=p[0]+(T+S-v.displaySize[0])/2,I=V+v.displaySize[0]);const Y=o.top*m,X=o.bottom*m;return s==="height"||s==="both"?(A=p[1]+Y-u[0],z=p[1]+X+u[2]):(A=p[1]+(Y+X-v.displaySize[1])/2,z=A+v.displaySize[1]),{imagePrimary:v,imageSecondary:void 0,top:A,right:I,bottom:z,left:V,collisionPadding:x}}class kh extends ve{constructor(o,s,u,p,m){super(o,s),this.angle=p,this.z=u,m!==void 0&&(this.segment=m)}clone(){return new kh(this.x,this.y,this.z,this.angle,this.segment)}}function UL(i,o,s,u,p){if(o.segment===void 0)return!0;let m=o,v=o.segment+1,x=0;for(;x>-s/2;){if(v--,v<0)return!1;x-=i[v].dist(m),m=i[v]}x+=i[v].dist(i[v+1]),v++;const T=[];let S=0;for(;x<s/2;){const A=i[v],I=i[v+1];if(!I)return!1;let z=i[v-1].angleTo(A)-A.angleTo(I);for(z=Math.abs((z+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:x,angleDelta:z}),S+=z;x-T[0].distance>u;)S-=T.shift().angleDelta;if(S>p)return!1;v++,x+=A.dist(I)}return!0}function VL(i){let o=0;for(let s=0;s<i.length-1;s++)o+=i[s].dist(i[s+1]);return o}function HL(i,o,s){return i?.6*o*s:0}function WL(i,o){return Math.max(i?i.right-i.left:0,o?o.right-o.left:0)}function HK(i,o,s,u,p,m){const v=HL(s,p,m),x=WL(s,u)*m;let T=0;const S=VL(i)/2;for(let A=0;A<i.length-1;A++){const I=i[A],z=i[A+1],V=I.dist(z);if(T+V>S){const Y=(S-T)/V,X=yr(I.x,z.x,Y),ne=yr(I.y,z.y,Y),ae=new kh(X,ne,0,z.angleTo(I),A);return!v||UL(i,ae,x,v,o)?ae:void 0}T+=V}}function WK(i,o,s,u,p,m,v,x,T){const S=HL(u,m,v),A=WL(u,p),I=A*v,z=i[0].x===0||i[0].x===T||i[0].y===0||i[0].y===T;return o-I<o/4&&(o=I+o/4),YL(i,z?o/2*x%o:(A/2+2*m)*v*x%o,o,S,s,I,z,!1,T)}function YL(i,o,s,u,p,m,v,x,T){const S=m/2,A=VL(i);let I=0,z=o-s,V=[];for(let Y=0;Y<i.length-1;Y++){const X=i[Y],ne=i[Y+1],ae=X.dist(ne),ye=ne.angleTo(X);for(;z+s<I+ae;){z+=s;const xe=(z-I)/ae,_e=yr(X.x,ne.x,xe),Ie=yr(X.y,ne.y,xe);if(_e>=0&&_e<T&&Ie>=0&&Ie<T&&z-S>=0&&z+S<=A){const Me=new kh(_e,Ie,0,ye,Y);u&&!UL(i,Me,m,u,p)||V.push(Me)}}I+=ae}return x||V.length||v||(V=YL(i,I/2,s,u,p,m,v,!0,T)),V}function GL(i,o,s,u,p){const m=[];for(let v=0;v<i.length;v++){const x=i[v];let T;for(let S=0;S<x.length-1;S++){let A=x[S],I=x[S+1];A.x<o&&I.x<o||(A.x<o?A=new ve(o,A.y+(o-A.x)/(I.x-A.x)*(I.y-A.y))._round():I.x<o&&(I=new ve(o,A.y+(o-A.x)/(I.x-A.x)*(I.y-A.y))._round()),A.y<s&&I.y<s||(A.y<s?A=new ve(A.x+(s-A.y)/(I.y-A.y)*(I.x-A.x),s)._round():I.y<s&&(I=new ve(A.x+(s-A.y)/(I.y-A.y)*(I.x-A.x),s)._round()),A.x>=u&&I.x>=u||(A.x>=u?A=new ve(u,A.y+(u-A.x)/(I.x-A.x)*(I.y-A.y))._round():I.x>=u&&(I=new ve(u,A.y+(u-A.x)/(I.x-A.x)*(I.y-A.y))._round()),A.y>=p&&I.y>=p||(A.y>=p?A=new ve(A.x+(p-A.y)/(I.y-A.y)*(I.x-A.x),p)._round():I.y>=p&&(I=new ve(A.x+(p-A.y)/(I.y-A.y)*(I.x-A.x),p)._round()),T&&A.equals(T[T.length-1])||(T=[A],m.push(T)),T.push(I)))))}}return m}function qL(i){let o=0,s=0;for(const v of i)o+=v.w*v.h,s=Math.max(s,v.w);i.sort((v,x)=>x.h-v.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),s),h:1/0}];let p=0,m=0;for(const v of i)for(let x=u.length-1;x>=0;x--){const T=u[x];if(!(v.w>T.w||v.h>T.h)){if(v.x=T.x,v.y=T.y,m=Math.max(m,v.y+v.h),p=Math.max(p,v.x+v.w),v.w===T.w&&v.h===T.h){const S=u.pop();x<u.length&&(u[x]=S)}else v.h===T.h?(T.x+=v.w,T.w-=v.w):v.w===T.w?(T.y+=v.h,T.h-=v.h):(u.push({x:T.x+v.w,y:T.y,w:T.w-v.w,h:v.h}),T.y+=v.h,T.h-=v.h);break}}return{w:p,h:m,fill:o/(p*m)||0}}rn(kh,"Anchor");const Fs=1;class gA{constructor(o,{pixelRatio:s,version:u,stretchX:p,stretchY:m,content:v}){this.paddedRect=o,this.pixelRatio=s,this.stretchX=p,this.stretchY=m,this.content=v,this.version=u}get tl(){return[this.paddedRect.x+Fs,this.paddedRect.y+Fs]}get br(){return[this.paddedRect.x+this.paddedRect.w-Fs,this.paddedRect.y+this.paddedRect.h-Fs]}get displaySize(){return[(this.paddedRect.w-2*Fs)/this.pixelRatio,(this.paddedRect.h-2*Fs)/this.pixelRatio]}}class ZL{constructor(o,s){const u={},p={};this.haveRenderCallbacks=[];const m=[];this.addImages(o,u,m),this.addImages(s,p,m);const{w:v,h:x}=qL(m),T=new gl({width:v||1,height:x||1});for(const S in o){const A=o[S],I=u[S].paddedRect;gl.copy(A.data,T,{x:0,y:0},{x:I.x+Fs,y:I.y+Fs},A.data,A.sdf)}for(const S in s){const A=s[S],I=p[S].paddedRect,z=I.x+Fs,V=I.y+Fs,Y=A.data.width,X=A.data.height;gl.copy(A.data,T,{x:0,y:0},{x:z,y:V},A.data),gl.copy(A.data,T,{x:0,y:X-1},{x:z,y:V-1},{width:Y,height:1}),gl.copy(A.data,T,{x:0,y:0},{x:z,y:V+X},{width:Y,height:1}),gl.copy(A.data,T,{x:Y-1,y:0},{x:z-1,y:V},{width:1,height:X}),gl.copy(A.data,T,{x:0,y:0},{x:z+Y,y:V},{width:1,height:X})}this.image=T,this.iconPositions=u,this.patternPositions=p}addImages(o,s,u){for(const p in o){const m=o[p],v={x:0,y:0,w:m.data.width+2*Fs,h:m.data.height+2*Fs};u.push(v),s[p]=new gA(v,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(o,s,u){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(p=>o.hasImage(p,u)),o.dispatchRenderCallbacks(this.haveRenderCallbacks,u);for(const p in o.getUpdatedImages(u))this.patchUpdatedImage(this.iconPositions[p],o.getImage(p,u),s),this.patchUpdatedImage(this.patternPositions[p],o.getImage(p,u),s)}patchUpdatedImage(o,s,u){if(!o||!s||o.version===s.version)return;o.version=s.version;const[p,m]=o.tl,v=!!Object.keys(this.patternPositions).length;u.update(s.data,{useMipmap:v},{x:p,y:m})}}rn(gA,"ImagePosition"),rn(ZL,"ImageAtlas");const r_=1e20;function KL(i,o,s,u,p,m,v,x,T){for(let S=o;S<o+u;S++)XL(i,s*m+S,m,p,v,x,T);for(let S=s;S<s+p;S++)XL(i,S*m+o,1,u,v,x,T)}function XL(i,o,s,u,p,m,v){m[0]=0,v[0]=-r_,v[1]=r_,p[0]=i[o];for(let x=1,T=0,S=0;x<u;x++){p[x]=i[o+x*s];const A=x*x;do{const I=m[T];S=(p[x]-p[I]+A-I*I)/(x-I)/2}while(S<=v[T]&&--T>-1);T++,m[T]=x,v[T]=S,v[T+1]=r_}for(let x=0,T=0;x<u;x++){for(;v[T+1]<x;)T++;const S=m[T],A=x-S;i[o+x*s]=p[S]+A*A}}const ru=2,yA={none:0,ideographs:1,all:2};class xy{constructor(o,s,u){this.requestManager=o,this.localGlyphMode=s,this.localFontFamily=u,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(o,s){this.urls[s]=o}getGlyphs(o,s,u){const p=[],m=this.urls[s]||M.GLYPHS_URL;for(const v in o)for(const x of o[v])p.push({stack:v,id:x});Ct(p,({stack:v,id:x},T)=>{let S=this.entries[v];S||(S=this.entries[v]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let A=S.glyphs[x];if(A!==void 0)return void T(null,{stack:v,id:x,glyph:A});if(A=this._tinySDF(S,v,x),A)return S.glyphs[x]=A,void T(null,{stack:v,id:x,glyph:A});const I=Math.floor(x/256);if(256*I>65535)return void T(new Error("glyphs > 65535 not supported"));if(S.ranges[I])return void T(null,{stack:v,id:x,glyph:A});let z=S.requests[I];z||(z=S.requests[I]=[],xy.loadGlyphRange(v,I,m,this.requestManager,(V,Y)=>{if(Y){S.ascender=Y.ascender,S.descender=Y.descender;for(const X in Y.glyphs)this._doesCharSupportLocalGlyph(+X)||(S.glyphs[+X]=Y.glyphs[+X]);S.ranges[I]=!0}for(const X of z)X(V,Y);delete S.requests[I]})),z.push((V,Y)=>{V?T(V):Y&&T(null,{stack:v,id:x,glyph:Y.glyphs[x]||null})})},(v,x)=>{if(v)u(v);else if(x){const T={};for(const{stack:S,id:A,glyph:I}of x)T[S]===void 0&&(T[S]={}),T[S].glyphs===void 0&&(T[S].glyphs={}),T[S].glyphs[A]=I&&{id:I.id,bitmap:I.bitmap.clone(),metrics:I.metrics},T[S].ascender=this.entries[S].ascender,T[S].descender=this.entries[S].descender;u(null,T)}})}_doesCharSupportLocalGlyph(o){return this.localGlyphMode!==yA.none&&(this.localGlyphMode===yA.all?!!this.localFontFamily:!!this.localFontFamily&&(un["CJK Unified Ideographs"](o)||un["Hangul Syllables"](o)||un.Hiragana(o)||un.Katakana(o)||un["CJK Symbols and Punctuation"](o)||un["CJK Unified Ideographs Extension A"](o)||un["CJK Unified Ideographs Extension B"](o)))}_tinySDF(o,s,u){const p=this.localFontFamily;if(!p||!this._doesCharSupportLocalGlyph(u))return;let m=o.tinySDF;if(!m){let X="400";/bold/i.test(s)?X="900":/medium/i.test(s)?X="500":/light/i.test(s)&&(X="200"),m=o.tinySDF=new xy.TinySDF({fontFamily:p,fontWeight:X,fontSize:24*ru,buffer:3*ru,radius:8*ru}),m.fontWeight=X}if(this.localGlyphs[m.fontWeight][u])return this.localGlyphs[m.fontWeight][u];const v=String.fromCodePoint(u),{data:x,width:T,height:S,glyphWidth:A,glyphHeight:I,glyphLeft:z,glyphTop:V,glyphAdvance:Y}=m.draw(v);return this.localGlyphs[m.fontWeight][u]={id:u,bitmap:new ep({width:T,height:S},x),metrics:{width:A/ru,height:I/ru,left:z/ru,top:V/ru-27,advance:Y/ru,localGlyph:!0}}}}xy.loadGlyphRange=function(i,o,s,u,p){const m=256*o,v=m+255,x=u.transformRequest(u.normalizeGlyphsURL(s).replace("{fontstack}",i).replace("{range}",`${m}-${v}`),tr.Glyphs);Je(x,(T,S)=>{if(T)p(T);else if(S){const A={},I=function(z){return new vy(z).readFields(BK,{})}(S);for(const z of I.glyphs)A[z.id]=z;p(null,{glyphs:A,ascender:I.ascender,descender:I.descender})}})},xy.TinySDF=class{constructor({fontSize:i=24,buffer:o=3,radius:s=8,cutoff:u=.25,fontFamily:p="sans-serif",fontWeight:m="normal",fontStyle:v="normal"}={}){this.buffer=o,this.cutoff=u,this.radius=s;const x=this.size=i+4*o,T=this._createCanvas(x),S=this.ctx=T.getContext("2d",{willReadFrequently:!0});S.font=`${v} ${m} ${i}px ${p}`,S.textBaseline="alphabetic",S.textAlign="left",S.fillStyle="black",this.gridOuter=new Float64Array(x*x),this.gridInner=new Float64Array(x*x),this.f=new Float64Array(x),this.z=new Float64Array(x+1),this.v=new Uint16Array(x)}_createCanvas(i){const o=document.createElement("canvas");return o.width=o.height=i,o}draw(i){const{width:o,actualBoundingBoxAscent:s,actualBoundingBoxDescent:u,actualBoundingBoxLeft:p,actualBoundingBoxRight:m}=this.ctx.measureText(i),v=Math.ceil(s),x=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-p))),T=Math.min(this.size-this.buffer,v+Math.ceil(u)),S=x+2*this.buffer,A=T+2*this.buffer,I=Math.max(S*A,0),z=new Uint8ClampedArray(I),V={data:z,width:S,height:A,glyphWidth:x,glyphHeight:T,glyphTop:v,glyphLeft:0,glyphAdvance:o};if(x===0||T===0)return V;const{ctx:Y,buffer:X,gridInner:ne,gridOuter:ae}=this;Y.clearRect(X,X,x,T),Y.fillText(i,X,X+v);const ye=Y.getImageData(X,X,x,T);ae.fill(r_,0,I),ne.fill(0,0,I);for(let xe=0;xe<T;xe++)for(let _e=0;_e<x;_e++){const Ie=ye.data[4*(xe*x+_e)+3]/255;if(Ie===0)continue;const Me=(xe+X)*S+_e+X;if(Ie===1)ae[Me]=0,ne[Me]=r_;else{const $e=.5-Ie;ae[Me]=$e>0?$e*$e:0,ne[Me]=$e<0?$e*$e:0}}KL(ae,0,0,S,A,S,this.f,this.v,this.z),KL(ne,X,X,x,T,S,this.f,this.v,this.z);for(let xe=0;xe<I;xe++){const _e=Math.sqrt(ae[xe])-Math.sqrt(ne[xe]);z[xe]=Math.round(255-255*(_e/this.radius+this.cutoff))}return V}};const rp=Fs;function QL(i,o,s,u){const p=[],m=i.imagePrimary,v=m.pixelRatio,x=m.paddedRect.w-2*rp,T=m.paddedRect.h-2*rp,S=i.right-i.left,A=i.bottom-i.top,I=m.stretchX||[[0,x]],z=m.stretchY||[[0,T]],V=(Xe,mt)=>Xe+mt[1]-mt[0],Y=I.reduce(V,0),X=z.reduce(V,0),ne=x-Y,ae=T-X;let ye=0,xe=Y,_e=0,Ie=X,Me=0,$e=ne,We=0,qe=ae;if(m.content&&u){const Xe=m.content;ye=Tw(I,0,Xe[0]),_e=Tw(z,0,Xe[1]),xe=Tw(I,Xe[0],Xe[2]),Ie=Tw(z,Xe[1],Xe[3]),Me=Xe[0]-ye,We=Xe[1]-_e,$e=Xe[2]-Xe[0]-xe,qe=Xe[3]-Xe[1]-Ie}const rt=(Xe,mt,St,ht)=>{const wt=Sw(Xe.stretch-ye,xe,S,i.left),lt=Cw(Xe.fixed-Me,$e,Xe.stretch,Y),xt=Sw(mt.stretch-_e,Ie,A,i.top),Gt=Cw(mt.fixed-We,qe,mt.stretch,X),At=Sw(St.stretch-ye,xe,S,i.left),dn=Cw(St.fixed-Me,$e,St.stretch,Y),Jt=Sw(ht.stretch-_e,Ie,A,i.top),It=Cw(ht.fixed-We,qe,ht.stretch,X),Bn=new ve(wt,xt),wn=new ve(At,xt),ln=new ve(At,Jt),Pt=new ve(wt,Jt),Nn=new ve(lt/v,Gt/v),hr=new ve(dn/v,It/v),$n=o*Math.PI/180;if($n){const zr=Math.sin($n),Ur=Math.cos($n),Gr=[Ur,-zr,zr,Ur];Bn._matMult(Gr),wn._matMult(Gr),Pt._matMult(Gr),ln._matMult(Gr)}const fr=Xe.stretch+Xe.fixed,Kn=St.stretch+St.fixed,Sr=mt.stretch+mt.fixed,or=ht.stretch+ht.fixed,lo=i.imageSecondary;return{tl:Bn,tr:wn,bl:Pt,br:ln,texPrimary:{x:m.paddedRect.x+rp+fr,y:m.paddedRect.y+rp+Sr,w:Kn-fr,h:or-Sr},texSecondary:lo?{x:lo.paddedRect.x+rp+fr,y:lo.paddedRect.y+rp+Sr,w:Kn-fr,h:or-Sr}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Nn,pixelOffsetBR:hr,minFontScaleX:$e/v/S,minFontScaleY:qe/v/A,isSDF:s}};if(u&&(m.stretchX||m.stretchY)){const Xe=JL(I,ne,Y),mt=JL(z,ae,X);for(let St=0;St<Xe.length-1;St++){const ht=Xe[St],wt=Xe[St+1];for(let lt=0;lt<mt.length-1;lt++)p.push(rt(ht,mt[lt],wt,mt[lt+1]))}}else p.push(rt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:T+1}));return p}function Tw(i,o,s){let u=0;for(const p of i)u+=Math.max(o,Math.min(s,p[1]))-Math.max(o,Math.min(s,p[0]));return u}function JL(i,o,s){const u=[{fixed:-rp,stretch:0}];for(const[p,m]of i){const v=u[u.length-1];u.push({fixed:p-v.stretch,stretch:v.stretch}),u.push({fixed:p-v.stretch,stretch:v.stretch+(m-p)})}return u.push({fixed:o+rp,stretch:s}),u}function Sw(i,o,s,u){return i/o*s+u}function Cw(i,o,s,u){return i-o*s/u}function YK(i,o,s,u){const p=o+i.positionedLines[u].lineOffset;return u===0?s+p/2:s+(p+(o+i.positionedLines[u-1].lineOffset))/2}function GK(i,o=1,s=!1){let u=1/0,p=1/0,m=-1/0,v=-1/0;const x=i[0];for(let V=0;V<x.length;V++){const Y=x[V];(!V||Y.x<u)&&(u=Y.x),(!V||Y.y<p)&&(p=Y.y),(!V||Y.x>m)&&(m=Y.x),(!V||Y.y>v)&&(v=Y.y)}const T=Math.min(m-u,v-p);let S=T/2;const A=new Xa([],qK);if(T===0)return new ve(u,p);for(let V=u;V<m;V+=T)for(let Y=p;Y<v;Y+=T)A.push(new wy(V+S,Y+S,S,i));let I=function(V){let Y=0,X=0,ne=0;const ae=V[0];for(let ye=0,xe=ae.length,_e=xe-1;ye<xe;_e=ye++){const Ie=ae[ye],Me=ae[_e],$e=Ie.x*Me.y-Me.x*Ie.y;X+=(Ie.x+Me.x)*$e,ne+=(Ie.y+Me.y)*$e,Y+=3*$e}return new wy(X/Y,ne/Y,0,V)}(i),z=A.length;for(;A.length;){const V=A.pop();(V.d>I.d||!I.d)&&(I=V,s&&console.log("found best %d after %d probes",Math.round(1e4*V.d)/1e4,z)),V.max-I.d<=o||(S=V.h/2,A.push(new wy(V.p.x-S,V.p.y-S,S,i)),A.push(new wy(V.p.x+S,V.p.y-S,S,i)),A.push(new wy(V.p.x-S,V.p.y+S,S,i)),A.push(new wy(V.p.x+S,V.p.y+S,S,i)),z+=4)}return s&&(console.log(`num probes: ${z}`),console.log(`best distance: ${I.d}`)),I.p}function qK(i,o){return o.max-i.max}class wy{constructor(o,s,u,p){this.p=new ve(o,s),this.h=u,this.d=function(m,v){let x=!1,T=1/0;for(let S=0;S<v.length;S++){const A=v[S];for(let I=0,z=A.length,V=z-1;I<z;V=I++){const Y=A[I],X=A[V];Y.y>m.y!=X.y>m.y&&m.x<(X.x-Y.x)*(m.y-Y.y)/(X.y-Y.y)+Y.x&&(x=!x),T=Math.min(T,Jc(m,Y,X))}}return(x?1:-1)*Math.sqrt(T)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}}const bA=Number.POSITIVE_INFINITY,ZK=Math.sqrt(2);function eN(i,[o,s]){let u=0,p=0;if(s===bA){o<0&&(o=0);const m=o/ZK;switch(i){case"top-right":case"top-left":p=m-7;break;case"bottom-right":case"bottom-left":p=7-m;break;case"bottom":p=7-o;break;case"top":p=o-7}switch(i){case"top-right":case"bottom-right":u=-m;break;case"top-left":case"bottom-left":u=m;break;case"left":u=o;break;case"right":u=-o}}else{switch(o=Math.abs(o),s=Math.abs(s),i){case"top-right":case"top-left":case"top":p=s-7;break;case"bottom-right":case"bottom-left":case"bottom":p=7-s}switch(i){case"top-right":case"bottom-right":case"right":u=-o;break;case"top-left":case"bottom-left":case"left":u=o}}return[u,p]}function vA(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function KK(i,o,s,u,p,m,v,x,T,S,A,I,z,V,Y){let X=m.textMaxSize.evaluate(o,{},I);X===void 0&&(X=v);const ne=i.layers[0].layout,ae=ne.get("icon-offset").evaluate(o,{},I),ye=nN(s.horizontal)||s.vertical,xe=z.name==="globe",_e=ya,Ie=v/_e,Me=i.tilePixelRatio*X/_e,$e=(wt=i.overscaling,i.zoom>18&&wt>2&&(wt>>=1),Math.max(Xt/(512*wt),1)*ne.get("symbol-spacing")),We=ne.get("text-padding")*i.tilePixelRatio,qe=ne.get("icon-padding")*i.tilePixelRatio,rt=Be(ne.get("text-max-angle")),Xe=ne.get("text-rotation-alignment")==="map"&&ne.get("symbol-placement")!=="point",mt=ne.get("icon-rotation-alignment")==="map"&&ne.get("symbol-placement")!=="point",St=ne.get("symbol-placement"),ht=$e/2;var wt;const lt=ne.get("icon-text-fit").evaluate(o,{},I),xt=ne.get("icon-text-fit-padding").evaluate(o,{},I),Gt=lt!=="none";let At;i.hasAnyIconTextFit===!1&&Gt&&(i.hasAnyIconTextFit=!0),u&&Gt&&(i.allowVerticalPlacement&&s.vertical&&(At=$L(u,s.vertical,lt,xt,ae,Ie)),ye&&(u=$L(u,ye,lt,xt,ae,Ie)));const dn=(Jt,It,Bn)=>{if(It.x<0||It.x>=Xt||It.y<0||It.y>=Xt)return;let wn=null;if(xe){const{x:ln,y:Pt,z:Nn}=z.projectTilePoint(It.x,It.y,Bn);wn={anchor:new kh(ln,Pt,Nn,0,void 0),up:z.upVector(Bn,It.x,It.y)}}(function(ln,Pt,Nn,hr,$n,fr,Kn,Sr,or,lo,zr,Ur,Gr,Br,ko,Qr,Yo,wi,ia,To,No,Hi,Wi,Yi,bo,js,cp){const es=ln.addToLineVertexArray(Pt,hr);let Ua,vl,v_,Gw,nz,rz,oz,iz=0,az=0,sz=0,lz=0,VA=-1,HA=-1;const rd={};let cz=Gf("");const Ig=Nn?Nn.anchor:Pt,WA=or.layout.get("icon-text-fit").evaluate(No,{},bo)!=="none";let YA=0,GA=0;if(or._unevaluatedLayout.getValue("text-radial-offset")===void 0?[YA,GA]=or.layout.get("text-offset").evaluate(No,{},bo).map($s=>$s*ya):(YA=or.layout.get("text-radial-offset").evaluate(No,{},bo)*ya,GA=bA),ln.allowVerticalPlacement&&$n.vertical){const $s=$n.vertical;if(ko)rz=_A($s),Sr&&(oz=_A(Sr));else{const Us=or.layout.get("text-rotate").evaluate(No,{},bo)+90;v_=kw(lo,Ig,Pt,zr,Ur,Gr,$s,Br,Us,Qr),Sr&&(Gw=kw(lo,Ig,Pt,zr,Ur,Gr,Sr,wi,Us))}}if(fr){const $s=or.layout.get("icon-rotate").evaluate(No,{},bo),Us=QL(fr,$s,Wi,WA),Dy=Sr?QL(Sr,$s,Wi,WA):void 0;vl=kw(lo,Ig,Pt,zr,Ur,Gr,fr,wi,$s),iz=4*Us.length;const uz=ln.iconSizeData;let Pg=null;uz.kind==="source"?(Pg=[nu*or.layout.get("icon-size").evaluate(No,{},bo)],Pg[0]>op&&On(`${ln.layerIds[0]}: Value for "icon-size" is >= ${o_}. Reduce your "icon-size".`)):uz.kind==="composite"&&(Pg=[nu*Hi.compositeIconSizes[0].evaluate(No,{},bo),nu*Hi.compositeIconSizes[1].evaluate(No,{},bo)],(Pg[0]>op||Pg[1]>op)&&On(`${ln.layerIds[0]}: Value for "icon-size" is >= ${o_}. Reduce your "icon-size".`)),ln.addSymbols(ln.icon,Us,Pg,To,ia,No,!1,Nn,Pt,es.lineStartIndex,es.lineLength,-1,Yi,bo,js,cp),VA=ln.icon.placedSymbolArray.length-1,Dy&&(az=4*Dy.length,ln.addSymbols(ln.icon,Dy,Pg,To,ia,No,yl.vertical,Nn,Pt,es.lineStartIndex,es.lineLength,-1,Yi,bo,js,cp),HA=ln.icon.placedSymbolArray.length-1)}for(const $s in $n.horizontal){const Us=$n.horizontal[$s];Ua||(cz=Gf(Us.text),ko?nz=_A(Us):Ua=kw(lo,Ig,Pt,zr,Ur,Gr,Us,Br,or.layout.get("text-rotate").evaluate(No,{},bo),Qr));const Dy=Us.positionedLines.length===1;if(sz+=tN(ln,Nn,Pt,Us,Kn,or,ko,No,Qr,es,$n.vertical?yl.horizontal:yl.horizontalOnly,Dy?Object.keys($n.horizontal):[$s],rd,VA,Hi,Yi,bo,js),Dy)break}$n.vertical&&(lz+=tN(ln,Nn,Pt,$n.vertical,Kn,or,ko,No,Qr,es,yl.vertical,["vertical"],rd,HA,Hi,Yi,bo,js));let up=-1;const qA=($s,Us)=>$s?Math.max($s,Us):Us;up=qA(nz,up),up=qA(rz,up),up=qA(oz,up);const pQ=up>-1?1:0;ln.glyphOffsetArray.length>=65535&&On("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),No.sortKey!==void 0&&ln.addToSortKeyRanges(ln.symbolInstances.length,No.sortKey),ln.symbolInstances.emplaceBack(Pt.x,Pt.y,Ig.x,Ig.y,Ig.z,rd.right>=0?rd.right:-1,rd.center>=0?rd.center:-1,rd.left>=0?rd.left:-1,rd.vertical>=0?rd.vertical:-1,VA,HA,cz,Ua!==void 0?Ua:ln.collisionBoxArray.length,Ua!==void 0?Ua+1:ln.collisionBoxArray.length,v_!==void 0?v_:ln.collisionBoxArray.length,v_!==void 0?v_+1:ln.collisionBoxArray.length,vl!==void 0?vl:ln.collisionBoxArray.length,vl!==void 0?vl+1:ln.collisionBoxArray.length,Gw||ln.collisionBoxArray.length,Gw?Gw+1:ln.collisionBoxArray.length,zr,sz,lz,iz,az,pQ,0,YA,GA,up,0,WA?1:0)})(i,It,wn,Jt,s,u,p,At,i.layers[0],i.collisionBoxArray,o.index,o.sourceLayerIndex,i.index,We,Xe,T,0,qe,mt,ae,o,m,S,A,I,V,Y)};if(St==="line")for(const Jt of GL(o.geometry,0,0,Xt,Xt)){const It=WK(Jt,$e,rt,s.vertical||ye,u,_e,Me,i.overscaling,Xt);for(const Bn of It)ye&&XK(i,ye.text,ht,Bn)||dn(Jt,Bn,I)}else if(St==="line-center"){for(const Jt of o.geometry)if(Jt.length>1){const It=HK(Jt,rt,s.vertical||ye,u,_e,Me);It&&dn(Jt,It,I)}}else if(o.type==="Polygon")for(const Jt of oA(o.geometry,0)){const It=GK(Jt,16);dn(Jt[0],new kh(It.x,It.y,0,0,void 0),I)}else if(o.type==="LineString")for(const Jt of o.geometry)dn(Jt,new kh(Jt[0].x,Jt[0].y,0,0,void 0),I);else if(o.type==="Point")for(const Jt of o.geometry)for(const It of Jt)dn([It],new kh(It.x,It.y,0,0,void 0),I)}const o_=255,op=o_*nu;function tN(i,o,s,u,p,m,v,x,T,S,A,I,z,V,Y,X,ne,ae){const ye=function(Ie,Me,$e,We,qe,rt,Xe,mt){const St=[];if(Me.positionedLines.length===0)return St;const ht=We.layout.get("text-rotate").evaluate(rt,{})*Math.PI/180,wt=function(dn){const Jt=dn[0],It=dn[1],Bn=Jt*It;return Bn>0?[Jt,-It]:Bn<0?[-Jt,It]:Jt===0?[It,Jt]:[It,-Jt]}($e);let lt=Math.abs(Me.top-Me.bottom);for(const dn of Me.positionedLines)lt-=dn.lineOffset;const xt=Me.positionedLines.length,Gt=lt/xt;let At=Me.top-$e[1];for(let dn=0;dn<xt;++dn){const Jt=Me.positionedLines[dn];At=YK(Me,Gt,At,dn);for(const It of Jt.positionedGlyphs){if(!It.rect)continue;const Bn=It.rect||{};let wn=LL+1,ln=!0,Pt=1,Nn=0;if(It.imageName){const To=Xe[It.imageName];if(!To)continue;if(To.sdf){On("SDF images are not supported in formatted text and will be ignored.");continue}ln=!1,Pt=To.pixelRatio,wn=Fs/Pt}const hr=(qe||mt)&&It.vertical,$n=It.metrics.advance*It.scale/2,fr=It.metrics,Kn=It.rect;if(Kn===null)continue;mt&&Me.verticalizable&&(Nn=It.imageName?$n-It.metrics.width*It.scale/2:0);const Sr=qe?[It.x+$n,It.y]:[0,0];let or=[0,0],lo=[0,0],zr=!1;qe||(hr?(lo=[It.x+$n+wt[0],It.y+wt[1]-Nn],zr=!0):or=[It.x+$n+$e[0],It.y+$e[1]-Nn]);const Ur=Kn.w*It.scale/(Pt*(It.localGlyph?ru:1)),Gr=Kn.h*It.scale/(Pt*(It.localGlyph?ru:1));let Br,ko,Qr,Yo;if(hr){const To=It.y-At,No=new ve(-$n,$n-To),Hi=-Math.PI/2,Wi=new ve(...lo);Br=new ve(-$n+or[0],or[1]),Br._rotateAround(Hi,No)._add(Wi),Br.x+=-To+$n,Br.y-=(fr.left-wn)*It.scale;const Yi=It.imageName?fr.advance*It.scale:ya*It.scale,bo=String.fromCodePoint(It.glyph);CK(bo)?Br.x+=(1-wn)*It.scale:kK(bo)?Br.x+=Yi-fr.height*It.scale+(-wn-1)*It.scale:Br.x+=It.imageName||fr.width+2*wn===Kn.w&&fr.height+2*wn===Kn.h?(Yi-Gr)/2:(Yi-(fr.height+2*wn)*It.scale)/2,ko=new ve(Br.x,Br.y-Ur),Qr=new ve(Br.x+Gr,Br.y),Yo=new ve(Br.x+Gr,Br.y-Ur)}else{const To=(fr.left-wn)*It.scale-$n+or[0],No=(-fr.top-wn)*It.scale+or[1],Hi=To+Ur,Wi=No+Gr;Br=new ve(To,No),ko=new ve(Hi,No),Qr=new ve(To,Wi),Yo=new ve(Hi,Wi)}if(ht){let To;To=qe?new ve(0,0):zr?new ve(wt[0],wt[1]):new ve($e[0],$e[1]),Br._rotateAround(ht,To),ko._rotateAround(ht,To),Qr._rotateAround(ht,To),Yo._rotateAround(ht,To)}const wi=new ve(0,0),ia=new ve(0,0);St.push({tl:Br,tr:ko,bl:Qr,br:Yo,texPrimary:Bn,texSecondary:void 0,writingMode:Me.writingMode,glyphOffset:Sr,sectionIndex:It.sectionIndex,isSDF:ln,pixelOffsetTL:wi,pixelOffsetBR:ia,minFontScaleX:0,minFontScaleY:0})}}return St}(0,u,T,m,v,x,p,i.allowVerticalPlacement),xe=i.textSizeData;let _e=null;xe.kind==="source"?(_e=[nu*m.layout.get("text-size").evaluate(x,{},ne)],_e[0]>op&&On(`${i.layerIds[0]}: Value for "text-size" is >= ${o_}. Reduce your "text-size".`)):xe.kind==="composite"&&(_e=[nu*Y.compositeTextSizes[0].evaluate(x,{},ne),nu*Y.compositeTextSizes[1].evaluate(x,{},ne)],(_e[0]>op||_e[1]>op)&&On(`${i.layerIds[0]}: Value for "text-size" is >= ${o_}. Reduce your "text-size".`)),i.addSymbols(i.text,ye,_e,T,v,x,A,o,s,S.lineStartIndex,S.lineLength,V,X,ne,ae,!1);for(const Ie of I)z[Ie]=i.text.placedSymbolArray.length-1;return 4*ye.length}function nN(i){for(const o in i)return i[o];return null}function kw(i,o,s,u,p,m,v,x,T,S){let A=v.top,I=v.bottom,z=v.left,V=v.right;const Y=v.collisionPadding;if(Y&&(z-=Y[0],A-=Y[1],V+=Y[2],I+=Y[3]),T){const X=new ve(z,A),ne=new ve(V,A),ae=new ve(z,I),ye=new ve(V,I),xe=Be(T);let _e=new ve(0,0);S&&(_e=new ve(S[0],S[1])),X._rotateAround(xe,_e),ne._rotateAround(xe,_e),ae._rotateAround(xe,_e),ye._rotateAround(xe,_e),z=Math.min(X.x,ne.x,ae.x,ye.x),V=Math.max(X.x,ne.x,ae.x,ye.x),A=Math.min(X.y,ne.y,ae.y,ye.y),I=Math.max(X.y,ne.y,ae.y,ye.y)}return i.emplaceBack(o.x,o.y,o.z,s.x,s.y,z,A,V,I,x,u,p,m),i.length-1}function _A(i){i.collisionPadding&&(i.top-=i.collisionPadding[1],i.bottom+=i.collisionPadding[3]);const o=i.bottom-i.top;return o>0?Math.max(10,o):null}function XK(i,o,s,u){const p=i.compareText;if(o in p){const m=p[o];for(let v=m.length-1;v>=0;v--)if(u.dist(m[v])<s)return!0}else p[o]=[];return p[o].push(u),!1}function rN(i,o){const s=i.fovAboveCenter,u=i.elevation?i.elevation.getMinElevationBelowMSL()*o:0,p=(i._camera.position[2]*i.worldSize-u)/Math.cos(i._pitch),m=Math.sin(s)*p/Math.sin(Math.max(Math.PI/2-i._pitch-s,.01)),v=Math.sin(i._pitch)*m+p;return Math.min(1.01*v,p*(1/i._horizonShift))}function i_(i,o){if(!o.isReprojectedInTileSpace)return{scale:1<<i.z,x:i.x,y:i.y,x2:i.x+1,y2:i.y+1,projection:o};const s=Math.pow(2,-i.z),u=i.x*s,p=(i.x+1)*s,m=i.y*s,v=(i.y+1)*s,x=yn(u),T=yn(p),S=Ln(m),A=Ln(v),I=o.project(x,S),z=o.project(T,S),V=o.project(T,A),Y=o.project(x,A);let X=Math.min(I.x,z.x,V.x,Y.x),ne=Math.min(I.y,z.y,V.y,Y.y),ae=Math.max(I.x,z.x,V.x,Y.x),ye=Math.max(I.y,z.y,V.y,Y.y);const xe=s/16;function _e(Me,$e,We,qe,rt,Xe){const mt=(We+rt)/2,St=(qe+Xe)/2,ht=o.project(yn(mt),Ln(St)),wt=Math.max(0,X-ht.x,ne-ht.y,ht.x-ae,ht.y-ye);X=Math.min(X,ht.x),ae=Math.max(ae,ht.x),ne=Math.min(ne,ht.y),ye=Math.max(ye,ht.y),wt>xe&&(_e(Me,ht,We,qe,mt,St),_e(ht,$e,mt,St,rt,Xe))}_e(I,z,u,m,p,m),_e(z,V,p,m,p,v),_e(V,Y,p,v,u,v),_e(Y,I,u,v,u,m),X-=xe,ne-=xe,ae+=xe,ye+=xe;const Ie=1/Math.max(ae-X,ye-ne);return{scale:Ie,x:X*Ie,y:ne*Ie,x2:ae*Ie,y2:ye*Ie,projection:o}}function oN(i,{x:o,y:s},u=0){return new ve(((o-u)*i.scale-i.x)*Xt,(s*i.scale-i.y)*Xt)}const QK=a.a6.identity(new Float32Array(16));class ip{constructor(o){this.spec=o,this.name=o.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(o,s){return{x:0,y:0,z:0}}unproject(o,s){return new Se(0,0)}projectTilePoint(o,s,u){return{x:o,y:s,z:0}}locationPoint(o,s,u=!0){return o._coordinatePoint(o.locationCoordinate(s),u)}pixelsPerMeter(o,s){return on(1,o)*s}pixelSpaceConversion(o,s,u){return 1}farthestPixelDistance(o){return rN(o,o.pixelsPerMeter)}pointCoordinate(o,s,u,p){const m=o.horizonLineFromTop(!1),v=new ve(s,Math.max(m,u));return o.rayIntersectionCoordinate(o.pointRayIntersection(v,p))}pointCoordinate3D(o,s,u){const p=new ve(s,u);if(o.elevation)return o.elevation.pointCoordinate(p);{const m=this.pointCoordinate(o,p.x,p.y,0);return[m.x,m.y,m.z]}}isPointAboveHorizon(o,s){if(o.elevation)return!this.pointCoordinate3D(o,s.x,s.y);const u=o.horizonLineFromTop();return s.y<u}createInversionMatrix(o,s){return QK}createTileMatrix(o,s,u){let p,m,v;const x=u.canonical,T=a.a6.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const S=i_(x,this);p=1,m=S.x+u.wrap*S.scale,v=S.y,a.a6.scale(T,T,[p/S.scale,p/S.scale,o.pixelsPerMeter/s])}else p=s/o.zoomScale(x.z),m=(x.x+Math.pow(2,x.z)*u.wrap)*p,v=x.y*p;return a.a6.translate(T,T,[m,v,0]),a.a6.scale(T,T,[p/Xt,p/Xt,1]),T}upVector(o,s,u){return[0,0,1]}upVectorScale(o,s,u){return{metersToTile:1}}}class JK extends ip{constructor(o){super(o),this.range=[4,7],this.center=o.center||[-96,37.5];const[s,u]=this.parallels=o.parallels||[29.5,45.5],p=Math.sin(Be(s));this.n=(p+Math.sin(Be(u)))/2,this.c=1+p*(2*this.n-p),this.r0=Math.sqrt(this.c)/this.n}project(o,s){const{n:u,c:p,r0:m}=this,v=Be(o-this.center[0]),x=Be(s),T=Math.sqrt(p-2*u*Math.sin(x))/u;return{x:T*Math.sin(v*u),y:T*Math.cos(v*u)-m,z:0}}unproject(o,s){const{n:u,c:p,r0:m}=this,v=m+s;let x=Math.atan2(o,Math.abs(v))*Math.sign(v);v*u<0&&(x-=Math.PI*Math.sign(o)*Math.sign(v));const T=Be(this.center[0])*u;x=Lt(x,-Math.PI-T,Math.PI-T);const S=Re(Ue(x/u)+this.center[0],-180,180),A=Math.asin(Re((p-(o*o+v*v)*u*u)/(2*u),-1,1)),I=Re(Ue(A),-jn,jn);return new Se(S,I)}}const a_=1.340264,s_=-.081106,l_=893e-6,c_=.003796,Aw=Math.sqrt(3)/2;class eX extends ip{project(o,s){s=s/180*Math.PI,o=o/180*Math.PI;const u=Math.asin(Aw*Math.sin(s)),p=u*u,m=p*p*p;return{x:.5*(o*Math.cos(u)/(Aw*(a_+3*s_*p+m*(7*l_+9*c_*p)))/Math.PI+.5),y:1-.5*(u*(a_+s_*p+m*(l_+c_*p))/Math.PI+1),z:0}}unproject(o,s){o=(2*o-.5)*Math.PI;let u=s=(2*(1-s)-1)*Math.PI,p=u*u,m=p*p*p;for(let A,I,z,V=0;V<12&&(I=u*(a_+s_*p+m*(l_+c_*p))-s,z=a_+3*s_*p+m*(7*l_+9*c_*p),A=I/z,u=Re(u-A,-Math.PI/3,Math.PI/3),p=u*u,m=p*p*p,!(Math.abs(A)<1e-12));++V);const v=Aw*o*(a_+3*s_*p+m*(7*l_+9*c_*p))/Math.cos(u),x=Math.asin(Math.sin(u)/Aw),T=Re(180*v/Math.PI,-180,180),S=Re(180*x/Math.PI,-jn,jn);return new Se(T,S)}}class tX extends ip{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0}project(o,s){return{x:.5+o/360,y:.5-s/360,z:0}}unproject(o,s){const u=360*(o-.5),p=Re(360*(.5-s),-jn,jn);return new Se(u,p)}}const Ey=Math.PI/2;function Mw(i){return Math.tan((Ey+i)/2)}class nX extends ip{constructor(o){super(o),this.center=o.center||[0,30];const[s,u]=this.parallels=o.parallels||[30,30];let p=Be(s),m=Be(u);this.southernCenter=p+m<0,this.southernCenter&&(p=-p,m=-m);const v=Math.cos(p),x=Mw(p);this.n=p===m?Math.sin(p):Math.log(v/Math.cos(m))/Math.log(Mw(m)/x),this.f=v*Math.pow(Mw(p),this.n)/this.n}project(o,s){s=Be(s),this.southernCenter&&(s=-s),o=Be(o-this.center[0]);const u=1e-6,{n:p,f:m}=this;m>0?s<-Ey+u&&(s=-Ey+u):s>Ey-u&&(s=Ey-u);const v=m/Math.pow(Mw(s),p);let x=v*Math.sin(p*o),T=m-v*Math.cos(p*o);return x=.5*(x/Math.PI+.5),T=.5*(T/Math.PI+.5),{x,y:this.southernCenter?T:1-T,z:0}}unproject(o,s){o=(2*o-.5)*Math.PI,this.southernCenter&&(s=1-s),s=(2*(1-s)-.5)*Math.PI;const{n:u,f:p}=this,m=p-s,v=Math.sign(m),x=Math.sign(u)*Math.sqrt(o*o+m*m);let T=Math.atan2(o,Math.abs(m))*v;m*u<0&&(T-=Math.PI*Math.sign(o)*v);const S=Re(Ue(T/u)+this.center[0],-180,180),A=Re(Ue(2*Math.atan(Math.pow(p/x,1/u))-Ey),-jn,jn);return new Se(S,this.southernCenter?-A:A)}}class iN extends ip{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(o,s){return{x:In(o),y:xn(s),z:0}}unproject(o,s){const u=yn(o),p=Ln(s);return new Se(u,p)}}const aN=Be(jn);class rX extends ip{project(o,s){const u=(s=Be(s))*s,p=u*u;return{x:.5*((o=Be(o))*(.8707-.131979*u+p*(p*(.003971*u-.001529*p)-.013791))/Math.PI+.5),y:1-.5*(s*(1.007226+u*(.015085+p*(.028874*u-.044475-.005916*p)))/Math.PI+1),z:0}}unproject(o,s){o=(2*o-.5)*Math.PI;let u=s=(2*(1-s)-1)*Math.PI,p=25,m=0,v=u*u;do{v=u*u;const S=v*v;m=(u*(1.007226+v*(.015085+S*(.028874*v-.044475-.005916*S)))-s)/(1.007226+v*(.045255+S*(.259866*v-.311325-.005916*11*S))),u=Re(u-m,-aN,aN)}while(Math.abs(m)>1e-6&&--p>0);v=u*u;const x=Re(Ue(o/(.8707+v*(v*(v*v*v*(.003971-.001529*v)-.013791)-.131979))),-180,180),T=Ue(u);return new Se(x,T)}}const sN=Be(jn);class oX extends ip{project(o,s){s=Be(s),o=Be(o);const u=Math.cos(s),p=2/Math.PI,m=Math.acos(u*Math.cos(o/2)),v=Math.sin(m)/m,x=.5*(o*p+2*u*Math.sin(o/2)/v)||0,T=.5*(s+Math.sin(s)/v)||0;return{x:.5*(x/Math.PI+.5),y:1-.5*(T/Math.PI+1),z:0}}unproject(o,s){let u=o=(2*o-.5)*Math.PI,p=s=(2*(1-s)-1)*Math.PI,m=25;const v=1e-6;let x=0,T=0;do{const S=Math.cos(p),A=Math.sin(p),I=2*A*S,z=A*A,V=S*S,Y=Math.cos(u/2),X=Math.sin(u/2),ne=2*Y*X,ae=X*X,ye=1-V*Y*Y,xe=ye?1/ye:0,_e=ye?Math.acos(S*Y)*Math.sqrt(1/ye):0,Ie=.5*(2*_e*S*X+2*u/Math.PI)-o,Me=.5*(_e*A+p)-s,$e=.5*xe*(V*ae+_e*S*Y*z)+1/Math.PI,We=xe*(ne*I/4-_e*A*X),qe=.125*xe*(I*X-_e*A*V*ne),rt=.5*xe*(z*Y+_e*ae*S)+.5,Xe=We*qe-rt*$e;x=(Me*We-Ie*rt)/Xe,T=(Ie*qe-Me*$e)/Xe,u=Re(u-x,-Math.PI,Math.PI),p=Re(p-T,-sN,sN)}while((Math.abs(x)>v||Math.abs(T)>v)&&--m>0);return new Se(Ue(u),Ue(p))}}class lN extends ip{constructor(o){super(o),this.center=o.center||[0,0],this.parallels=o.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Be(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(o,s){const{scale:u,cosPhi:p}=this;return{x:Be(o)*p*u+.5,y:-Math.sin(Be(s))/p*u+.5,z:0}}unproject(o,s){const{scale:u,cosPhi:p}=this,m=-(s-.5)/u,v=Re(Ue((o-.5)/u)/p,-180,180),x=Math.asin(Re(m*p,-1,1)),T=Re(Ue(x),-jn,jn);return new Se(v,T)}}class iX extends iN{constructor(o){super(o),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(o,s,u){const p=Gv(o,s,u),m=sw(nd(u));return a.N.transformMat4(p,p,m),{x:p[0],y:p[1],z:p[2]}}locationPoint(o,s){const u=le(s.lat,s.lng),p=a.N.normalize([],u),m=o.elevation?o.elevation.getAtPointOrZero(o.locationCoordinate(s),o._centerAltitude):o._centerAltitude,v=on(1,0)*Xt*m;a.N.scaleAndAdd(u,u,p,v);const x=a.a6.identity(new Float64Array(16));return a.a6.multiply(x,o.pixelMatrix,o.globeMatrix),a.N.transformMat4(u,u,x),new ve(u[0],u[1])}pixelsPerMeter(o,s){return on(1,0)*s}pixelSpaceConversion(o,s,u){const p=on(1,o)*s,m=yr(on(1,45)*s,p,u);return this.pixelsPerMeter(o,s)/m}createTileMatrix(o,s,u){const p=Kk(nd(u.canonical));return a.a6.multiply(new Float64Array(16),o.globeMatrix,p)}createInversionMatrix(o,s){const{center:u}=o,p=sw(nd(s));return a.a6.rotateY(p,p,Be(u.lng)),a.a6.rotateX(p,p,Be(u.lat)),a.a6.scale(p,p,[o._pixelsPerMercatorPixel,o._pixelsPerMercatorPixel,1]),Float32Array.from(p)}pointCoordinate(o,s,u,p){return SO(o,s,u,!0)||new Jn(0,0)}pointCoordinate3D(o,s,u){const p=this.pointCoordinate(o,s,u,0);return[p.x,p.y,p.z]}isPointAboveHorizon(o,s){return!SO(o,s.x,s.y,!1)}farthestPixelDistance(o){const s=function(p,m){const v=p.cameraToCenterDistance,x=p._centerAltitude*m,T=p._camera,S=p._camera.forward(),A=a.N.add([],a.N.scale([],S,-v),[0,0,x]),I=p.worldSize/(2*Math.PI),z=[0,0,-I],V=p.width/p.height,Y=Math.tan(p.fovAboveCenter),X=a.N.scale([],T.up(),Y),ne=a.N.scale([],T.right(),Y*V),ae=a.N.normalize([],a.N.add([],a.N.add([],S,X),ne)),ye=[];let xe;if(new Wk(A,ae).closestPointOnSphere(z,I,ye)){const _e=a.N.add([],ye,z),Ie=a.N.sub([],_e,A);xe=Math.cos(p.fovAboveCenter)*a.N.length(Ie)}else{const _e=a.N.sub([],A,z),Ie=a.N.sub([],z,A);a.N.normalize(Ie,Ie);const Me=a.N.length(_e)-I;xe=Math.sqrt(Me*(Me+2*I));const $e=Math.acos(xe/(I+Me))-Math.acos(a.N.dot(S,Ie));xe*=Math.cos($e)}return 1.01*xe}(o,this.pixelsPerMeter(o.center.lat,o.worldSize)),u=Jf(o.zoom);if(u>0){const p=rN(o,on(1,o.center.lat)*o.worldSize),m=o.worldSize/(2*Math.PI),v=Math.max(o.width,o.height)/o.worldSize*Math.PI;return yr(s,p+m*(1-Math.cos(v)),Math.pow(u,10))}return s}upVector(o,s,u){return Gv(s,u,o,1)}upVectorScale(o){return{metersToTile:ow(aw(nd(o)))}}}function cN(i){const o=i.parallels,s=!!o&&Math.abs(o[0]+o[1])<.01;switch(i.name){case"mercator":return new iN(i);case"equirectangular":return new tX(i);case"naturalEarth":return new rX(i);case"equalEarth":return new eX(i);case"winkelTripel":return new oX(i);case"albers":return s?new lN(i):new JK(i);case"lambertConformalConic":return s?new lN(i):new nX(i);case"globe":return new iX(i)}throw new Error(`Invalid projection name: ${i.name}`)}const aX=pw.types,sX=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Dw(i,o,s,u,p,m,v,x,T,S,A,I,z){const V=x?Math.min(op,Math.round(x[0])):0,Y=x?Math.min(op,Math.round(x[1])):0;i.emplaceBack(o,s,Math.round(32*u),Math.round(32*p),m,v,(V<<1)+(T?1:0),Y,16*S,16*A,256*I,256*z)}function Rw(i,o,s){i.emplaceBack(o,s)}function Iw(i,o,s,u,p,m,v){i.emplaceBack(o,s,u,p,m,v)}function Pw(i,o,s,u,p){i.emplaceBack(o,s,u,p),i.emplaceBack(o,s,u,p),i.emplaceBack(o,s,u,p),i.emplaceBack(o,s,u,p)}function lX(i){for(const o of i.sections)if(tg(o.text))return!0;return!1}class xA{constructor(o){this.layoutVertexArray=new sh,this.indexArray=new ci,this.programConfigurations=o,this.segments=new Po,this.dynamicLayoutVertexArray=new ec,this.opacityVertexArray=new yg,this.placedSymbolArray=new Fv,this.iconTransitioningVertexArray=new ra,this.globeExtVertexArray=new gg,this.zOffsetVertexArray=new Hf}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(o,s,u,p,m){this.isEmpty()||(u&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,gK.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,bK.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,sX,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=o.createVertexBuffer(this.iconTransitioningVertexArray,_K.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,yK.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||m)&&(this.zOffsetVertexBuffer=o.createVertexBuffer(this.zOffsetVertexArray,vK.members,!0)),this.opacityVertexBuffer.itemSize=1),(u||p)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}rn(xA,"SymbolBuffers");class wA{constructor(o,s,u){this.layoutVertexArray=new o,this.layoutAttributes=s,this.indexArray=new u,this.segments=new Po,this.collisionVertexArray=new vg,this.collisionVertexArrayExt=new ec}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,xK.members,!0),this.collisionVertexBufferExt=o.createVertexBuffer(this.collisionVertexArrayExt,wK.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}rn(wA,"CollisionBuffers");class Ow{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(v=>v.fqid),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=a.a6.identity([]),this.placementViewportMatrix=a.a6.identity([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=dA(this.zoom,s["text-size"]),this.iconSizeData=dA(this.zoom,s["icon-size"]);const u=this.layers[0].layout,p=u.get("symbol-sort-key"),m=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&p.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=u.get("text-writing-mode").map(v=>yl[v]),this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id),this.sourceID=o.sourceID,this.projection=o.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=u.get("symbol-z-elevate")}createArrays(){this.text=new xA(new ce(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new xA(new ce(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new ay,this.lineVertexArray=new fh,this.symbolInstances=new iy}calculateGlyphDependencies(o,s,u,p,m){for(let v=0;v<o.length;v++){const x=o.codePointAt(v);if(x===void 0)break;if(s[x]=!0,p&&m&&x<=65535){const T=t_[o.charAt(v)];T&&(s[T.charCodeAt(0)]=!0)}}}populate(o,s,u,p){const m=this.layers[0],v=m.layout,x=this.projection.name==="globe",T=v.get("text-font"),S=v.get("text-field"),A=v.get("icon-image"),I=(S.value.kind!=="constant"||S.value.value instanceof qo&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),z=A.value.kind!=="constant"||!!A.value.value||Object.keys(A.parameters).length>0,V=v.get("symbol-sort-key");if(this.features=[],!I&&!z)return;const Y=s.iconDependencies,X=s.glyphDependencies,ne=s.availableImages,ae=new xo(this.zoom);for(const{feature:ye,id:xe,index:_e,sourceLayerIndex:Ie}of o){const Me=m._featureFilter.needGeometry,$e=Oo(ye,Me);if(!m._featureFilter.filter(ae,$e,u))continue;if(Me||($e.geometry=Qo(ye,u,p)),x&&ye.type!==1&&u.z<=5){const Xe=$e.geometry,mt=.98078528056,St=(ht,wt)=>{const lt=Gv(ht.x,ht.y,u,1),xt=Gv(wt.x,wt.y,u,1);return a.N.dot(lt,xt)<mt};for(let ht=0;ht<Xe.length;ht++)Xe[ht]=Eo(Xe[ht],St)}let We,qe;if(I){const Xe=m.getValueAndResolveTokens("text-field",$e,u,ne),mt=qo.factory(Xe);lX(mt)&&(this.hasRTLText=!0),(!this.hasRTLText||ll()==="unavailable"||this.hasRTLText&&Ta.isParsed())&&(We=SK(mt,m,$e))}if(z){const Xe=m.getValueAndResolveTokens("icon-image",$e,u,ne);qe=Xe instanceof Rn?Xe:Rn.fromString(Xe)}if(!We&&!qe)continue;const rt=this.sortFeaturesByKey?V.evaluate($e,{},u):void 0;if(this.features.push({id:xe,text:We,icon:qe,index:_e,sourceLayerIndex:Ie,geometry:$e.geometry,properties:ye.properties,type:aX[ye.type],sortKey:rt}),qe&&(Y[qe.namePrimary]=!0,qe.nameSecondary&&(Y[qe.nameSecondary]=!0)),We){const Xe=T.evaluate($e,{},u).join(","),mt=v.get("text-rotation-alignment")==="map"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(yl.vertical)>=0;for(const St of We.sections)if(St.image)Y[St.image.namePrimary]=!0;else{const ht=al(We.toString()),wt=St.fontStack||Xe,lt=X[wt]=X[wt]||{};this.calculateGlyphDependencies(St.text,lt,mt,this.allowVerticalPlacement,ht)}}}v.get("symbol-placement")==="line"&&(this.features=function(ye){const xe={},_e={},Ie=[];let Me=0;function $e(Xe){Ie.push(ye[Xe]),Me++}function We(Xe,mt,St){const ht=_e[Xe];return delete _e[Xe],_e[mt]=ht,Ie[ht].geometry[0].pop(),Ie[ht].geometry[0]=Ie[ht].geometry[0].concat(St[0]),ht}function qe(Xe,mt,St){const ht=xe[mt];return delete xe[mt],xe[Xe]=ht,Ie[ht].geometry[0].shift(),Ie[ht].geometry[0]=St[0].concat(Ie[ht].geometry[0]),ht}function rt(Xe,mt,St){const ht=St?mt[0][mt[0].length-1]:mt[0][0];return`${Xe}:${ht.x}:${ht.y}`}for(let Xe=0;Xe<ye.length;Xe++){const mt=ye[Xe],St=mt.geometry,ht=mt.text?mt.text.toString():null;if(!ht){$e(Xe);continue}const wt=rt(ht,St),lt=rt(ht,St,!0);if(wt in _e&&lt in xe&&_e[wt]!==xe[lt]){const xt=qe(wt,lt,St),Gt=We(wt,lt,Ie[xt].geometry);delete xe[wt],delete _e[lt],_e[rt(ht,Ie[Gt].geometry,!0)]=Gt,Ie[xt].geometry=null}else wt in _e?We(wt,lt,St):lt in xe?qe(wt,lt,St):($e(Xe),xe[wt]=Me-1,_e[lt]=Me-1)}return Ie.filter(Xe=>Xe.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ye,xe)=>ye.sortKey-xe.sortKey)}update(o,s,u,p,m){const v=Object.keys(o).length!==0;if(v&&!this.stateDependentLayers.length)return;const x=v?this.stateDependentLayers:this.layers;this.text.programConfigurations.updatePaintArrays(o,s,x,u,p,m),this.icon.programConfigurations.updatePaintArrays(o,s,x,u,p,m)}updateZOffset(){const o=(m,v,x)=>{u+=v,u>m.length&&m.resize(u);for(let T=-v;T<0;T++)m.emplace(T+u,x)},s=(m,v,x)=>{p+=v,p>m.length&&m.resize(p);for(let T=-v;T<0;T++)m.emplace(T+p,x)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let u=0,p=0;for(let m=0;m<this.symbolInstances.length;m++){const v=this.symbolInstances.get(m),{numHorizontalGlyphVertices:x,numVerticalGlyphVertices:T,numIconVertices:S}=v,A=v.zOffset,I=S>0;if((x>0||T>0)&&(o(this.text.zOffsetVertexArray,x,A),o(this.text.zOffsetVertexArray,T,A)),I){const{placedIconSymbolIndex:z,verticalPlacedIconSymbolIndex:V}=v;z>=0&&s(this.icon.zOffsetVertexArray,S,A),V>=0&&s(this.icon.zOffsetVertexArray,v.numVerticalIconVertices,A)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=cN(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,s){const u=this.lineVertexArray.length;if(o.segment!==void 0)for(const{x:p,y:m}of s)this.lineVertexArray.emplaceBack(p,m);return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(o,s,u,p,m,v,x,T,S,A,I,z,V,Y,X,ne){const ae=o.indexArray,ye=o.layoutVertexArray,xe=o.globeExtVertexArray,_e=o.segments.prepareSegment(4*s.length,ye,ae,this.canOverlap?v.sortKey:void 0),Ie=this.glyphOffsetArray.length,Me=_e.vertexLength,$e=this.allowVerticalPlacement&&x===yl.vertical?Math.PI/2:0,We=v.text&&v.text.sections;for(let rt=0;rt<s.length;rt++){const{tl:Xe,tr:mt,bl:St,br:ht,texPrimary:wt,texSecondary:lt,pixelOffsetTL:xt,pixelOffsetBR:Gt,minFontScaleX:At,minFontScaleY:dn,glyphOffset:Jt,isSDF:It,sectionIndex:Bn}=s[rt],wn=_e.vertexLength,ln=Jt[1];if(Dw(ye,S.x,S.y,Xe.x,ln+Xe.y,wt.x,wt.y,u,It,xt.x,xt.y,At,dn),Dw(ye,S.x,S.y,mt.x,ln+mt.y,wt.x+wt.w,wt.y,u,It,Gt.x,xt.y,At,dn),Dw(ye,S.x,S.y,St.x,ln+St.y,wt.x,wt.y+wt.h,u,It,xt.x,Gt.y,At,dn),Dw(ye,S.x,S.y,ht.x,ln+ht.y,wt.x+wt.w,wt.y+wt.h,u,It,Gt.x,Gt.y,At,dn),T){const{x:Pt,y:Nn,z:hr}=T.anchor,[$n,fr,Kn]=T.up;Iw(xe,Pt,Nn,hr,$n,fr,Kn),Iw(xe,Pt,Nn,hr,$n,fr,Kn),Iw(xe,Pt,Nn,hr,$n,fr,Kn),Iw(xe,Pt,Nn,hr,$n,fr,Kn),Pw(o.dynamicLayoutVertexArray,Pt,Nn,hr,$e)}else Pw(o.dynamicLayoutVertexArray,S.x,S.y,S.z,$e);if(ne){const Pt=lt||wt;Rw(o.iconTransitioningVertexArray,Pt.x,Pt.y),Rw(o.iconTransitioningVertexArray,Pt.x+Pt.w,Pt.y),Rw(o.iconTransitioningVertexArray,Pt.x,Pt.y+Pt.h),Rw(o.iconTransitioningVertexArray,Pt.x+Pt.w,Pt.y+Pt.h)}ae.emplaceBack(wn,wn+1,wn+2),ae.emplaceBack(wn+1,wn+2,wn+3),_e.vertexLength+=4,_e.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Jt[0]),rt!==s.length-1&&Bn===s[rt+1].sectionIndex||o.programConfigurations.populatePaintArrays(ye.length,v,v.index,{},V,Y,X,We&&We[Bn])}const qe=T?T.anchor:S;o.placedSymbolArray.emplaceBack(qe.x,qe.y,qe.z,S.x,S.y,Ie,this.glyphOffsetArray.length-Ie,Me,A,I,S.segment,u?u[0]:0,u?u[1]:0,p[0],p[1],x,0,!1,0,z,0)}_commitLayoutVertex(o,s,u,p,m,v,x){o.emplaceBack(s,u,p,m,v,Math.round(x.x),Math.round(x.y))}_addCollisionDebugVertices(o,s,u,p,m,v,x){const T=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),S=T.vertexLength,A=x.tileAnchorX,I=x.tileAnchorY;for(let V=0;V<4;V++)u.collisionVertexArray.emplaceBack(0,0,0,0);this._commitDebugCollisionVertexUpdate(u.collisionVertexArrayExt,s,o.padding,x.zOffset),this._commitLayoutVertex(u.layoutVertexArray,p,m,v,A,I,new ve(o.x1,o.y1)),this._commitLayoutVertex(u.layoutVertexArray,p,m,v,A,I,new ve(o.x2,o.y1)),this._commitLayoutVertex(u.layoutVertexArray,p,m,v,A,I,new ve(o.x2,o.y2)),this._commitLayoutVertex(u.layoutVertexArray,p,m,v,A,I,new ve(o.x1,o.y2)),T.vertexLength+=4;const z=u.indexArray;z.emplaceBack(S,S+1),z.emplaceBack(S+1,S+2),z.emplaceBack(S+2,S+3),z.emplaceBack(S+3,S),T.primitiveLength+=4}_addTextDebugCollisionBoxes(o,s,u,p,m,v){for(let x=p;x<m;x++){const T=u.get(x),S=this.getSymbolInstanceTextSize(o,v,s,x);this._addCollisionDebugVertices(T,S,this.textCollisionBox,T.projectedAnchorX,T.projectedAnchorY,T.projectedAnchorZ,v)}}_addIconDebugCollisionBoxes(o,s,u,p,m,v){for(let x=p;x<m;x++){const T=u.get(x),S=this.getSymbolInstanceIconSize(o,s,v.placedIconSymbolIndex);this._addCollisionDebugVertices(T,S,this.iconCollisionBox,T.projectedAnchorX,T.projectedAnchorY,T.projectedAnchorZ,v)}}generateCollisionDebugBuffers(o,s){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new wA(lh,ML.members,ra),this.iconCollisionBox=new wA(lh,ML.members,ra);const u=gy(this.iconSizeData,o),p=gy(this.textSizeData,o);for(let m=0;m<this.symbolInstances.length;m++){const v=this.symbolInstances.get(m);this._addTextDebugCollisionBoxes(p,o,s,v.textBoxStartIndex,v.textBoxEndIndex,v),this._addTextDebugCollisionBoxes(p,o,s,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v),this._addIconDebugCollisionBoxes(u,o,s,v.iconBoxStartIndex,v.iconBoxEndIndex,v),this._addIconDebugCollisionBoxes(u,o,s,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v)}}getSymbolInstanceTextSize(o,s,u,p){const m=this.text.placedSymbolArray.get(s.rightJustifiedTextSymbolIndex>=0?s.rightJustifiedTextSymbolIndex:s.centerJustifiedTextSymbolIndex>=0?s.centerJustifiedTextSymbolIndex:s.leftJustifiedTextSymbolIndex>=0?s.leftJustifiedTextSymbolIndex:s.verticalPlacedTextSymbolIndex>=0?s.verticalPlacedTextSymbolIndex:p),v=_w(this.textSizeData,o,m)/ya;return this.tilePixelRatio*v}getSymbolInstanceIconSize(o,s,u){const p=this.icon.placedSymbolArray.get(u),m=_w(this.iconSizeData,o,p);return this.tilePixelRatio*m}_commitDebugCollisionVertexUpdate(o,s,u,p){o.emplaceBack(s,-u,-u,p),o.emplaceBack(s,u,-u,p),o.emplaceBack(s,u,u,p),o.emplaceBack(s,-u,u,p)}_updateTextDebugCollisionBoxes(o,s,u,p,m,v){for(let x=p;x<m;x++){const T=u.get(x),S=this.getSymbolInstanceTextSize(o,v,s,x);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,S,T.padding,v.zOffset)}}_updateIconDebugCollisionBoxes(o,s,u,p,m,v){for(let x=p;x<m;x++){const T=u.get(x),S=this.getSymbolInstanceIconSize(o,s,v.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,S,T.padding,v.zOffset)}}updateCollisionDebugBuffers(o,s){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const u=gy(this.iconSizeData,o),p=gy(this.textSizeData,o);for(let m=0;m<this.symbolInstances.length;m++){const v=this.symbolInstances.get(m);this._updateTextDebugCollisionBoxes(p,o,s,v.textBoxStartIndex,v.textBoxEndIndex,v),this._updateTextDebugCollisionBoxes(p,o,s,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v),this._updateIconDebugCollisionBoxes(u,o,s,v.iconBoxStartIndex,v.iconBoxEndIndex,v),this._updateIconDebugCollisionBoxes(u,o,s,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(o,s,u,p,m,v,x,T,S){const A={};if(s<u){const{x1:I,y1:z,x2:V,y2:Y,padding:X,projectedAnchorX:ne,projectedAnchorY:ae,projectedAnchorZ:ye,tileAnchorX:xe,tileAnchorY:_e,featureIndex:Ie}=o.get(s);A.textBox={x1:I,y1:z,x2:V,y2:Y,padding:X,projectedAnchorX:ne,projectedAnchorY:ae,projectedAnchorZ:ye,tileAnchorX:xe,tileAnchorY:_e},A.textFeatureIndex=Ie}if(p<m){const{x1:I,y1:z,x2:V,y2:Y,padding:X,projectedAnchorX:ne,projectedAnchorY:ae,projectedAnchorZ:ye,tileAnchorX:xe,tileAnchorY:_e,featureIndex:Ie}=o.get(p);A.verticalTextBox={x1:I,y1:z,x2:V,y2:Y,padding:X,projectedAnchorX:ne,projectedAnchorY:ae,projectedAnchorZ:ye,tileAnchorX:xe,tileAnchorY:_e},A.verticalTextFeatureIndex=Ie}if(v<x){const{x1:I,y1:z,x2:V,y2:Y,padding:X,projectedAnchorX:ne,projectedAnchorY:ae,projectedAnchorZ:ye,tileAnchorX:xe,tileAnchorY:_e,featureIndex:Ie}=o.get(v);A.iconBox={x1:I,y1:z,x2:V,y2:Y,padding:X,projectedAnchorX:ne,projectedAnchorY:ae,projectedAnchorZ:ye,tileAnchorX:xe,tileAnchorY:_e},A.iconFeatureIndex=Ie}if(T<S){const{x1:I,y1:z,x2:V,y2:Y,padding:X,projectedAnchorX:ne,projectedAnchorY:ae,projectedAnchorZ:ye,tileAnchorX:xe,tileAnchorY:_e,featureIndex:Ie}=o.get(T);A.verticalIconBox={x1:I,y1:z,x2:V,y2:Y,padding:X,projectedAnchorX:ne,projectedAnchorY:ae,projectedAnchorZ:ye,tileAnchorX:xe,tileAnchorY:_e},A.verticalIconFeatureIndex=Ie}return A}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const u=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(o,s){const u=o.placedSymbolArray.get(s),p=u.vertexStartIndex+4*u.numGlyphs;for(let m=u.vertexStartIndex;m<p;m+=4)o.indexArray.emplaceBack(m,m+1,m+2),o.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(o),u=Math.cos(o),p=[],m=[],v=[];for(let x=0;x<this.symbolInstances.length;++x){v.push(x);const T=this.symbolInstances.get(x);p.push(0|Math.round(s*T.tileAnchorX+u*T.tileAnchorY)),m.push(T.featureIndex)}return v.sort((x,T)=>p[x]-p[T]||m[T]-m[x]),v}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let o=0;o<this.symbolInstances.length;++o)this.symbolInstanceIndexesSortedZOffset.push(o)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((o,s)=>this.symbolInstances.get(s).zOffset-this.symbolInstances.get(o).zOffset)}addToSortKeyRanges(o,s){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===s?u.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const u=this.symbolInstances.get(s);this.featureSortOrder.push(u.featureIndex);const{rightJustifiedTextSymbolIndex:p,centerJustifiedTextSymbolIndex:m,leftJustifiedTextSymbolIndex:v,verticalPlacedTextSymbolIndex:x,placedIconSymbolIndex:T,verticalPlacedIconSymbolIndex:S}=u;p>=0&&this.addIndicesForPlacedSymbol(this.text,p),m>=0&&m!==p&&this.addIndicesForPlacedSymbol(this.text,m),v>=0&&v!==m&&v!==p&&this.addIndicesForPlacedSymbol(this.text,v),x>=0&&this.addIndicesForPlacedSymbol(this.text,x),T>=0&&this.addIndicesForPlacedSymbol(this.icon,T),S>=0&&this.addIndicesForPlacedSymbol(this.icon,S)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}rn(Ow,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Ow.addDynamicAttributes=Pw;const cX=new wo({"symbol-placement":new $t(et.layout_symbol["symbol-placement"]),"symbol-spacing":new $t(et.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new $t(et.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Cn(et.layout_symbol["symbol-sort-key"]),"symbol-z-order":new $t(et.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new $t(et.layout_symbol["symbol-z-elevate"]),"icon-allow-overlap":new $t(et.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new $t(et.layout_symbol["icon-ignore-placement"]),"icon-optional":new $t(et.layout_symbol["icon-optional"]),"icon-rotation-alignment":new $t(et.layout_symbol["icon-rotation-alignment"]),"icon-size":new Cn(et.layout_symbol["icon-size"]),"icon-text-fit":new Cn(et.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Cn(et.layout_symbol["icon-text-fit-padding"]),"icon-image":new Cn(et.layout_symbol["icon-image"]),"icon-rotate":new Cn(et.layout_symbol["icon-rotate"]),"icon-padding":new $t(et.layout_symbol["icon-padding"]),"icon-keep-upright":new $t(et.layout_symbol["icon-keep-upright"]),"icon-offset":new Cn(et.layout_symbol["icon-offset"]),"icon-anchor":new Cn(et.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new $t(et.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new $t(et.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new $t(et.layout_symbol["text-rotation-alignment"]),"text-field":new Cn(et.layout_symbol["text-field"]),"text-font":new Cn(et.layout_symbol["text-font"]),"text-size":new Cn(et.layout_symbol["text-size"]),"text-max-width":new Cn(et.layout_symbol["text-max-width"]),"text-line-height":new Cn(et.layout_symbol["text-line-height"]),"text-letter-spacing":new Cn(et.layout_symbol["text-letter-spacing"]),"text-justify":new Cn(et.layout_symbol["text-justify"]),"text-radial-offset":new Cn(et.layout_symbol["text-radial-offset"]),"text-variable-anchor":new $t(et.layout_symbol["text-variable-anchor"]),"text-anchor":new Cn(et.layout_symbol["text-anchor"]),"text-max-angle":new $t(et.layout_symbol["text-max-angle"]),"text-writing-mode":new $t(et.layout_symbol["text-writing-mode"]),"text-rotate":new Cn(et.layout_symbol["text-rotate"]),"text-padding":new $t(et.layout_symbol["text-padding"]),"text-keep-upright":new $t(et.layout_symbol["text-keep-upright"]),"text-transform":new Cn(et.layout_symbol["text-transform"]),"text-offset":new Cn(et.layout_symbol["text-offset"]),"text-allow-overlap":new $t(et.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new $t(et.layout_symbol["text-ignore-placement"]),"text-optional":new $t(et.layout_symbol["text-optional"]),visibility:new $t(et.layout_symbol.visibility)});var EA={paint:new wo({"icon-opacity":new Cn(et.paint_symbol["icon-opacity"]),"icon-emissive-strength":new Cn(et.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Cn(et.paint_symbol["text-emissive-strength"]),"icon-color":new Cn(et.paint_symbol["icon-color"]),"icon-halo-color":new Cn(et.paint_symbol["icon-halo-color"]),"icon-halo-width":new Cn(et.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Cn(et.paint_symbol["icon-halo-blur"]),"icon-translate":new $t(et.paint_symbol["icon-translate"]),"icon-translate-anchor":new $t(et.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Cn(et.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Cn(et.paint_symbol["text-opacity"]),"text-color":new Cn(et.paint_symbol["text-color"],{runtimeType:Ga,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new Cn(et.paint_symbol["text-halo-color"]),"text-halo-width":new Cn(et.paint_symbol["text-halo-width"]),"text-halo-blur":new Cn(et.paint_symbol["text-halo-blur"]),"text-translate":new $t(et.paint_symbol["text-translate"]),"text-translate-anchor":new $t(et.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new $t(et.paint_symbol["icon-color-saturation"])}),layout:cX};class uN{constructor(o){this.type=o.property.overrides?o.property.overrides.runtimeType:nl,this.defaultValue=o}evaluate(o){if(o.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(o.formattedSection))return s.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}rn(uN,"FormatSectionOverride",{omit:["defaultValue"]});class Lw extends ma{constructor(o,s,u){super(o,EA,s,u)}recalculate(o,s){super.recalculate(o,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const u=this.layout.get("text-writing-mode");if(u){const p=[];for(const m of u)p.indexOf(m)<0&&p.push(m);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(o,s,u,p){const m=this.layout.get(o).evaluate(s,{},u,p),v=this._unevaluatedLayout._values[o];return v.isDataDriven()||Xl(v.value)||!m?m:function(x,T){return T.replace(/{([^{}]+)}/g,(S,A)=>A in x?String(x[A]):"")}(s.properties,m)}createBucket(o){return new Ow(o)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const o of EA.paint.overridableProperties){if(!Lw.hasPaintOverride(this.layout,o))continue;const s=this.paint.get(o),u=new uN(s),p=new qd(u,s.property.specification,this.scope,this.options);let m=null;m=s.value.kind==="constant"||s.value.kind==="source"?new Kd("source",p):new Xd("composite",p,s.value.zoomStops,s.value._interpolationType),this.paint._values[o]=new qu(s.property,m,s.parameters)}}_handleOverridablePaintPropertyUpdate(o,s,u){return!(!this.layout||s.isDataDriven()||u.isDataDriven())&&Lw.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,s){const u=o.get("text-field"),p=EA.paint.properties[s];let m=!1;const v=x=>{for(const T of x)if(p.overrides&&p.overrides.hasOverride(T))return void(m=!0)};if(u.value.kind==="constant"&&u.value.value instanceof qo)v(u.value.value.sections);else if(u.value.kind==="source"){const x=S=>{m||(S instanceof Rs&&Zo(S.value)===Mu?v(S.value.sections):S instanceof Ic?v(S.sections):S.eachChild(x))},T=u.value;T._styleExpression&&x(T._styleExpression.expression)}return m}getProgramIds(){const o=this.paint.get("icon-opacity").constantOr(1)!==0,s=this.paint.get("text-opacity").constantOr(1)!==0,u=[];return o&&u.push("symbolIcon"),s&&u.push("symbolSDF"),u}getDefaultProgramParams(o,s){return{config:new ee(this,s),overrideFog:!1}}}const uX=new wo({visibility:new $t(et.layout_background.visibility)});var dX={paint:new wo({"background-color":new $t(et.paint_background["background-color"]),"background-pattern":new $t(et.paint_background["background-pattern"]),"background-opacity":new $t(et.paint_background["background-opacity"]),"background-emissive-strength":new $t(et.paint_background["background-emissive-strength"])}),layout:uX};const hX=new wo({visibility:new $t(et.layout_raster.visibility)});var fX={paint:new wo({"raster-opacity":new $t(et.paint_raster["raster-opacity"]),"raster-color":new qc(et.paint_raster["raster-color"]),"raster-color-mix":new $t(et.paint_raster["raster-color-mix"]),"raster-color-range":new $t(et.paint_raster["raster-color-range"]),"raster-hue-rotate":new $t(et.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new $t(et.paint_raster["raster-brightness-min"]),"raster-brightness-max":new $t(et.paint_raster["raster-brightness-max"]),"raster-saturation":new $t(et.paint_raster["raster-saturation"]),"raster-contrast":new $t(et.paint_raster["raster-contrast"]),"raster-resampling":new $t(et.paint_raster["raster-resampling"]),"raster-fade-duration":new $t(et.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new $t(et.paint_raster["raster-emissive-strength"]),"raster-array-band":new $t(et.paint_raster["raster-array-band"]),"raster-elevation":new $t(et.paint_raster["raster-elevation"])}),layout:hX},TA=Yr([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class SA{constructor(o,s,u,p){this.context=o,this.format=u,this.texture=o.gl.createTexture(),this.update(s,p)}update(o,s,u){const{width:p,height:m}=o,{context:v}=this,{gl:x}=v;if(x.bindTexture(x.TEXTURE_2D,this.texture),v.pixelStoreUnpackFlipY.set(!1),v.pixelStoreUnpack.set(1),v.pixelStoreUnpackPremultiplyAlpha.set(this.format===x.RGBA&&(!s||s.premultiply!==!1)),u||this.size&&this.size[0]===p&&this.size[1]===m){const{x:T,y:S}=u||{x:0,y:0};if(o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||ImageBitmap&&o instanceof ImageBitmap)x.texSubImage2D(x.TEXTURE_2D,0,T,S,x.RGBA,x.UNSIGNED_BYTE,o);else{let A=this.format,I=x.UNSIGNED_BYTE;this.format===x.R32F&&(A=x.RED,I=x.FLOAT),x.texSubImage2D(x.TEXTURE_2D,0,T,S,p,m,A,I,o.data)}}else if(this.size=[p,m],o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||ImageBitmap&&o instanceof ImageBitmap){let T=this.format;this.format===x.R8&&(T=x.RED),x.texImage2D(x.TEXTURE_2D,0,this.format,T,x.UNSIGNED_BYTE,o)}else{let T=this.format,S=this.format,A=x.UNSIGNED_BYTE;this.format===x.DEPTH_COMPONENT&&(T=x.DEPTH_COMPONENT16,A=x.UNSIGNED_SHORT),this.format===x.R8&&(S=x.RED),this.format===x.R32F&&(A=x.FLOAT,S=x.RED),x.texImage2D(x.TEXTURE_2D,0,T,p,m,0,S,A,o.data)}this.useMipmap=!!(s&&s.useMipmap),this.useMipmap&&x.generateMipmap(x.TEXTURE_2D)}bind(o,s,u=!1){const{context:p}=this,{gl:m}=p;m.bindTexture(m.TEXTURE_2D,this.texture),o!==this.minFilter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,o),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,this.useMipmap&&!u?o===m.NEAREST?m.NEAREST_MIPMAP_NEAREST:m.LINEAR_MIPMAP_LINEAR:o),this.minFilter=o),s!==this.wrapS&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,s),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,s),this.wrapS=s)}bindExtraParam(o,s,u,p){const{context:m}=this,{gl:v}=m;v.bindTexture(v.TEXTURE_2D,this.texture),s!==this.magFilter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,s),this.magFilter=s),o!==this.minFilter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,this.useMipmap?o===v.NEAREST?v.NEAREST_MIPMAP_NEAREST:v.LINEAR_MIPMAP_LINEAR:o),this.minFilter=o),u!==this.wrapS&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,u),this.wrapS=u),p!==this.wrapT&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,p),this.wrapT=p)}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}class Nw{constructor(o,s){this.context=o,this.texture=s}bind(o,s){const{context:u}=this,{gl:p}=u;p.bindTexture(p.TEXTURE_2D,this.texture),o!==this.minFilter&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,o),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,o),this.minFilter=o),s!==this.wrapS&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,s),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,s),this.wrapS=s)}}function zw(i,o,s,u,p,m,v,x){const T=[i,o,1,s,u,1,p,m,1],S=[v,x,1],A=a.co.adjoint([],T),[I,z,V]=a.N.transformMat3(S,S,A);return a.co.multiply(T,T,[I,0,0,0,z,0,0,0,V])}function dN(i,o,s,u,p,m,v,x){const T=function(S,A,I,z,V,Y,X,ne){const ae=zw(0,0,1,0,1,1,0,1),ye=zw(S,A,I,z,V,Y,X,ne),xe=a.co.adjoint([],ae);return a.co.multiply(ye,ye,xe)}(i,o,s,u,p,m,v,x);return[T[2]/T[8]/Xt,T[5]/T[8]/Xt]}function Bw(i){return[i[0],Math.min(Math.max(i[1],-jn),jn)]}class hN extends Su{constructor(o,s,u,p){super(),this.id=o,this.dispatcher=u,this.coordinates=s.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(p),this.options=s,this._dirty=!1}load(o,s){if(this._loaded=s||!1,this.fire(new Rc("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return o&&(this.coordinates=o),this._loaded=!0,void this._finishLoading();this._imageRequest=Rt(this.map._requestManager.transformRequest(this.url,tr.Image),(u,p)=>{this._imageRequest=null,this._loaded=!0,u?this.fire(new gm(u)):p&&(this.image=p instanceof HTMLImageElement?it.getImageData(p):p,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,o&&(this.coordinates=o),this._finishLoading())})}loaded(){return this._loaded}updateImage(o){return o.url?(this._imageRequest&&o.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=o.url,this.load(o.coordinates,this._loaded),this):this}setTexture(o){if(!(o.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new Nw(this.map.painter.context,o.handle),this.width=o.dimensions[0],this.height=o.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new Rc("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof Nw||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(o){if(this.coordinates=o,this._boundsArray=void 0,this._unsupportedCoords=!1,!o.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let s=o[0][1],u=o[0][1];for(const m of o)m[1]>u&&(u=m[1]),m[1]<s&&(s=m[1]);const p=(u+s)/2;if(p>jn?this.onNorthPole=!0:p<-jn&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const m=o.map(Jn.fromLngLat);this.tileID=function(v){let x=1/0,T=1/0,S=-1/0,A=-1/0;for(const X of v)x=Math.min(x,X.x),T=Math.min(T,X.y),S=Math.max(S,X.x),A=Math.max(A,X.y);const I=Math.max(S-x,A-T),z=Math.max(0,Math.floor(-Math.log(I)/Math.LN2)),V=Math.pow(2,z);let Y=Math.floor((x+S)/2*V);return Y>1&&(Y-=1),new Ye(z,Y,Math.floor((T+A)/2*V))}(m),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new Rc("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(o){for(const ae in this.tiles){const ye=this.tiles[ae];ye.state!=="loaded"&&(ye.state="loaded",ye.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const s=i_(new Ye(0,0,0),this.map.transform.projection),u=[s.projection.project(this.coordinates[0][0],this.coordinates[0][1]),s.projection.project(this.coordinates[1][0],this.coordinates[1][1]),s.projection.project(this.coordinates[2][0],this.coordinates[2][1]),s.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(ae){const ye=ae[1].x-ae[0].x,xe=ae[1].y-ae[0].y,_e=ae[2].x-ae[1].x,Ie=ae[2].y-ae[1].y,Me=ae[3].x-ae[2].x,$e=ae[3].y-ae[2].y,We=ae[0].x-ae[3].x,qe=ae[0].y-ae[3].y,rt=ye*Ie-_e*xe,Xe=_e*$e-Me*Ie,mt=Me*qe-We*$e,St=We*xe-ye*qe;return rt>0&&Xe>0&&mt>0&&St>0||rt<0&&Xe<0&&mt<0&&St<0}(u))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const p=i_(this.tileID,this.map.transform.projection),[m,v,x,T]=this.coordinates.map(ae=>{const ye=p.projection.project(ae[0],ae[1]);return oN(p,ye)._round()});this.perspectiveTransform=dN(m.x,m.y,v.x,v.y,x.x,x.y,T.x,T.y);const S=this._boundsArray=new ul;S.emplaceBack(m.x,m.y,0,0),S.emplaceBack(v.x,v.y,Xt,0),S.emplaceBack(T.x,T.y,0,Xt),S.emplaceBack(x.x,x.y,Xt,Xt),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=o.createVertexBuffer(S,TA.members),this.boundsSegments=Po.simpleSegment(0,0,4,2);const A=[],I=[Bw((z=this.coordinates)[0]),Bw(z[1]),Bw(z[2]),Bw(z[3])];var z;const[V,Y,X,ne]=function(ae){let ye=ae[0][0],xe=ye,_e=ae[0][1],Ie=_e;for(let Me=1;Me<ae.length;Me++)ae[Me][0]<ye?ye=ae[Me][0]:ae[Me][0]>xe&&(xe=ae[Me][0]),ae[Me][1]<_e?_e=ae[Me][1]:ae[Me][1]>Ie&&(Ie=ae[Me][1]);return[ye,_e,xe-ye,Ie-_e]}(I);{const ae=new ul,[ye,xe,_e,Ie]=function(xt){let Gt=xt[0].x,At=Gt,dn=xt[0].y,Jt=dn;for(let It=1;It<xt.length;It++)xt[It].x<Gt?Gt=xt[It].x:xt[It].x>At&&(At=xt[It].x),xt[It].y<dn?dn=xt[It].y:xt[It].y>Jt&&(Jt=xt[It].y);return[Gt,dn,At-Gt,Jt-dn]}(u),Me=xt=>[(xt.x-ye)/_e,(xt.y-xe)/Ie],[$e,We,qe,rt]=u.map(Me),Xe=function(xt,Gt,At,dn,Jt,It,Bn,wn){const ln=zw(0,0,1,0,1,1,0,1),Pt=zw(xt,Gt,At,dn,Jt,It,Bn,wn),Nn=a.co.adjoint([],Pt);return a.co.multiply(ln,ln,Nn)}($e[0],$e[1],We[0],We[1],qe[0],qe[1],rt[0],rt[1]);this.elevatedGlobePerspectiveTransform=dN($e[0],$e[1],We[0],We[1],qe[0],qe[1],rt[0],rt[1]);const mt=(xt,Gt)=>{A.push(xt.lng);const At=Math.round((xt.lng-V)/X*Xt),dn=Math.round((xt.lat-Y)/ne*Xt),Jt=Me(Gt),It=a.N.transformMat3([],[Jt[0],Jt[1],1],Xe),Bn=Math.round(It[0]/It[2]*Xt),wn=Math.round(It[1]/It[2]*Xt);ae.emplaceBack(At,dn,Bn,wn)},St=u[3].x-u[0].x,ht=u[3].y-u[0].y,wt=u[2].x-u[1].x,lt=u[2].y-u[1].y;for(let xt=0;xt<65;xt++){const Gt=xt/64,At=[u[0].x+Gt*St,u[0].y+Gt*ht],dn=[u[1].x+Gt*wt,u[1].y+Gt*lt],Jt=dn[0]-At[0],It=dn[1]-At[1];for(let Bn=0;Bn<65;Bn++){const wn=Bn/64,ln={x:At[0]+Jt*wn,y:At[1]+It*wn,z:0};mt(s.projection.unproject(ln.x,ln.y),ln)}}this.elevatedGlobeVertexBuffer=o.createVertexBuffer(ae,TA.members)}{this.maxLongitudeTriangleSize=0;let ae=[],ye=new ci;const xe=(_e,Ie,Me)=>{ye.emplaceBack(_e,Ie,Me);const $e=A[_e],We=A[Ie],qe=A[Me],rt=Math.min(Math.min($e,We),qe),Xe=Math.max(Math.max($e,We),qe)-rt;Xe>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=Xe),ae.push(rt+Xe/2)};for(let _e=0;_e<64;_e++)for(let Ie=0;Ie<64;Ie++){const Me=65*_e+Ie,$e=Me+1,We=Me+65,qe=We+1;xe(Me,We,$e),xe($e,We,qe)}[ae,ye]=function(_e,Ie){const Me=Array.from({length:_e.length},(qe,rt)=>rt);Me.sort((qe,rt)=>_e[qe]-_e[rt]);const $e=[],We=new ci;for(let qe=0;qe<Me.length;qe++){const rt=Me[qe];$e.push(_e[rt]);const Xe=3*rt,mt=Xe+1;We.emplaceBack(Ie.uint16[Xe],Ie.uint16[mt],Ie.uint16[mt+1])}return[$e,We]}(ae,ye),this.elevatedGlobeTrianglesCenterLongitudes=ae,this.elevatedGlobeIndexBuffer=o.createIndexBuffer(ye)}this.elevatedGlobeSegments=Po.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,X/Xt,0,ne/Xt,0,0,Y,V,0])}prepare(){const o=Object.keys(this.tiles).length!==0;if(this.tileID&&!o)return;const s=this.map.painter.context,u=s.gl;!this._dirty||this.texture instanceof Nw||(this.texture?this.texture.update(this.image):(this.texture=new SA(s,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE)),this._dirty=!1),o&&this._prepareData(s)}loadTile(o,s){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},s(null)):(o.state="errored",s(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(o){const s=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!s)return null;const u=this.elevatedGlobeTrianglesCenterLongitudes;let p=((A,I)=>A+360*Math.round((I-A)/360))(o+180,u[0]);const m=new Po,v=(A,I)=>{m.segments.push({vertexOffset:0,primitiveOffset:A,vertexLength:s.segments[0].vertexLength,primitiveLength:I,sortKey:void 0,vaos:{}})},x=.51*this.maxLongitudeTriangleSize;if(Math.abs(u[0]-p)<=x){const A=at(u,0,u.length,p+x);return A===u.length||v(A,Pe(u,A+1,u.length,p+360-x)-A),m}p<u[0]&&(p+=360);const T=Pe(u,0,u.length,p-x);if(T===u.length)return v(0,u.length),m;v(0,T-0);const S=at(u,T+1,u.length,p+x);return S!==u.length&&v(S,u.length-S),m}}const pX=(Math.pow(256,2)-1)/16907520;class fN extends ma{constructor(o,s,u){super(o,fX,s,u),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isLayerDraped(o){return!(o&&o._source instanceof hN&&(o._source.onNorthPole||o._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(o){o!=="raster-color"&&o!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(o){if(!this.hasColorMap()||!this._curRampRange)return;const s=this._transitionablePaint._values["raster-color"].value.expression,[u,p]=o||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(u)&&isNaN(p)||u===this._curRampRange[0]&&p===this._curRampRange[1]||(this.colorRamp=qv({expression:s,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:u,end:p}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[u,p])}}const mX=new wo({visibility:new $t(et["layout_raster-particle"].visibility)});var gX={paint:new wo({"raster-particle-array-band":new $t(et["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new $t(et["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new qc(et["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new $t(et["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new $t(et["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new $t(et["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new $t(et["paint_raster-particle"]["raster-particle-reset-rate-factor"])}),layout:mX};class pN extends ma{constructor(o,s,u){super(o,gX,s,u),this._updateColorRamp(),this.onRemove=p=>{this.colorRampTexture&&this.colorRampTexture.destroy(),this.transformFeedbackObject&&p.painter.context.gl.deleteTransformFeedback(this.transformFeedbackObject),this.tileFramebuffer&&this.tileFramebuffer.destroy()},this.lastInvalidatedAt=it.now()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isLayerDraped(o){return!1}_handleSpecialPaintPropertyUpdate(o){o!=="raster-particle-color"&&o!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),o==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const o=this._transitionablePaint._values["raster-particle-color"].value.expression,s=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=qv({expression:o,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:s}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=it.now()}}class yX extends ma{constructor(o,s){super(o,{},s),this.implementation=o,o.slot&&(this.slot=o.slot)}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(o){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(o){this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)}onRemove(o){this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)}}const bX=new wo({visibility:new $t(et.layout_sky.visibility)});var vX={paint:new wo({"sky-type":new $t(et.paint_sky["sky-type"]),"sky-atmosphere-sun":new $t(et.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new $t(et.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new $t(et.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new $t(et.paint_sky["sky-gradient-radius"]),"sky-gradient":new qc(et.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new $t(et.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new $t(et.paint_sky["sky-atmosphere-color"]),"sky-opacity":new $t(et.paint_sky["sky-opacity"])}),layout:bX};function CA(i,o,s){const u=[0,0,1],p=a.bi.identity([]);return a.bi.rotateY(p,p,s?-Be(i)+Math.PI:Be(i)),a.bi.rotateX(p,p,-Be(o)),a.N.transformQuat(u,u,p),a.N.normalize(u,u)}var _X={paint:new wo({})};function mN(i,o){const s=Fw(i.projection,i.zoom,i.width,i.height),u=function(m,v,x,T,S){const A=new Se(x.lng-180*ap,x.lat),I=new Se(x.lng+180*ap,x.lat),z=m.project(A.lng,A.lat),V=m.project(I.lng,I.lat),Y=-Math.atan2(V.y-z.y,V.x-z.x),X=Jn.fromLngLat(x);X.y=Re(X.y,-1+ap,1-ap);const ne=X.toLngLat(),ae=m.project(ne.lng,ne.lat),ye=Jn.fromLngLat(ne);ye.x+=ap;const xe=ye.toLngLat(),_e=m.project(xe.lng,xe.lat),Ie=bN(_e.x-ae.x,_e.y-ae.y,Y),Me=Jn.fromLngLat(ne);Me.y+=ap;const $e=Me.toLngLat(),We=m.project($e.lng,$e.lat),qe=bN(We.x-ae.x,We.y-ae.y,Y),rt=Math.abs(Ie.x)/Math.abs(qe.y),Xe=a.a6.identity([]);a.a6.rotateZ(Xe,Xe,-Y*(1-(S?0:T)));const mt=a.a6.identity([]);return a.a6.scale(mt,mt,[1,1-(1-rt)*T,1]),mt[4]=-qe.x/qe.y*T,a.a6.rotateZ(mt,mt,Y),a.a6.multiply(mt,Xe,mt),mt}(i.projection,0,i.center,s,o),p=gN(i);return a.a6.scale(u,u,[p,p,1]),u}function gN(i){const o=i.projection,s=Fw(i.projection,i.zoom,i.width,i.height),u=yN(o,i.center),p=yN(o,Se.convert(o.center));return Math.pow(2,u*s+(1-s)*p)}function Fw(i,o,s,u,p=1/0){const m=i.range;if(!m)return 0;const v=Math.min(p,Math.max(s,u)),x=Math.log(v/1024)/Math.LN2;return bt(m[0]+x,m[1]+x,o)}const ap=1/4e4;function yN(i,o){const s=Re(o.lat,-jn,jn),u=new Se(o.lng-180*ap,s),p=new Se(o.lng+180*ap,s),m=i.project(u.lng,s),v=i.project(p.lng,s),x=Jn.fromLngLat(u),T=Jn.fromLngLat(p),S=v.x-m.x,A=v.y-m.y,I=T.x-x.x,z=T.y-x.y,V=Math.sqrt((I*I+z*z)/(S*S+A*A));return Math.log(V)/Math.LN2}function bN(i,o,s){const u=Math.cos(s),p=Math.sin(s);return{x:i*u-o*p,y:i*p+o*u}}function vN(i,o,s){a.a6.identity(i),a.a6.rotateZ(i,i,Be(o[2])),a.a6.rotateX(i,i,Be(o[0])),a.a6.rotateY(i,i,Be(o[1])),a.a6.scale(i,i,s),a.a6.multiply(i,i,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function jw(i,o,s,u,p,m,v,x){const T=[s[0]-o[0],s[1]-o[1],0],S=[u[0]-o[0],u[1]-o[1],0];if(a.N.length(T)<1e-12||a.N.length(S)<1e-12)return a.bi.identity(i);const A=a.N.cross([],T,S);a.N.normalize(A,A),a.N.subtract(S,u,o),T[2]=(m-p)*x,S[2]=(v-p)*x;const I=T;return a.N.cross(I,T,S),a.N.normalize(I,I),a.bi.rotationTo(i,A,I)}function kA(i,o,s=!1){const u=Jf(o.zoom),p=function(m,v,x){const T=v.worldSize,S=[m[12],m[13],m[14]],A=Ln(S[1]/T),I=yn(S[0]/T),z=a.a6.identity([]),V=on(1,A)*T,Y=on(1,0)*T*zn(A,v.zoom),X=1/Xk(T);let ne=Y*X;if(x){const _e=Fw(v.projection,v.zoom,v.width,v.height,1024);ne=X*v.projection.pixelSpaceConversion(v.center.lat,T,_e)}const ae=le(A,I);a.N.add(ae,ae,a.N.scale([],a.N.normalize([],ae),V*ne*S[2]));const ye=function(_e){const Ie=[_e[0],_e[1],_e[2]];let Me=[0,1,0];const $e=a.N.cross([],Me,Ie);return a.N.cross(Me,Ie,$e),a.N.squaredLength(Me)===0&&(Me=[0,1,0],a.N.cross($e,Ie,Me)),a.N.normalize($e,$e),a.N.normalize(Me,Me),a.N.normalize(Ie,Ie),[$e[0],$e[1],$e[2],0,Me[0],Me[1],Me[2],0,Ie[0],Ie[1],Ie[2],0,_e[0],_e[1],_e[2],1]}(ae);a.a6.scale(z,z,[ne,ne,ne*V]),a.a6.translate(z,z,[-S[0],-S[1],-S[2]]);const xe=a.a6.multiply([],v.globeMatrix,ye);return a.a6.multiply(xe,xe,z),a.a6.multiply(xe,xe,m),xe}(i,o,s);if(u>0){const m=function(v,x){const T=x.worldSize,S=on(1,0)*T*zn(x.center.lat,x.zoom)/Xk(T),A=on(1,x.center.lat)*T,I=a.a6.identity([]);return a.a6.rotateY(I,I,Be(x.center.lng)),a.a6.rotateX(I,I,Be(x.center.lat)),a.a6.translate(I,I,[0,0,be]),a.a6.scale(I,I,[S,S,S*A]),a.a6.translate(I,I,[x.point.x-.5*T,x.point.y-.5*T,0]),a.a6.multiply(I,I,v),a.a6.multiply(I,x.globeMatrix,I)}(i,o);return function(v,x,T){const S=(Y,X,ne)=>{const ae=a.N.length(Y),ye=a.N.length(X),xe=Sh(Y,X,ne);return a.N.scale(xe,xe,1/a.N.length(xe)*yr(ae,ye,ne))},A=S([v[0],v[1],v[2]],[x[0],x[1],x[2]],T),I=S([v[4],v[5],v[6]],[x[4],x[5],x[6]],T),z=S([v[8],v[9],v[10]],[x[8],x[9],x[10]],T),V=Sh([v[12],v[13],v[14]],[x[12],x[13],x[14]],T);return[A[0],A[1],A[2],0,I[0],I[1],I[2],0,z[0],z[1],z[2],0,V[0],V[1],V[2],1]}(p,m,u)}return p}function _N(i,o,s,u){const p=Bo.projectAabbCorners(u,s);let m=Number.MAX_VALUE,v=-1;for(let S=0;S<p.length;++S){const A=p[S];A[0]=(.5*A[0]+.5)*o.width,A[1]=(.5-.5*A[1])*o.height,A[2]<m&&(v=S,m=A[2])}const x=S=>new ve(p[S][0],p[S][1]);let T;switch(v){case 0:case 6:T=[x(1),x(5),x(4),x(7),x(3),x(2),x(1)];break;case 1:case 7:T=[x(0),x(4),x(5),x(6),x(2),x(3),x(0)];break;case 3:case 5:T=[x(1),x(0),x(4),x(7),x(6),x(2),x(1)];break;default:T=[x(1),x(5),x(6),x(7),x(3),x(0),x(1)]}if(Sa(i,T))return m}const xX=Yr([{name:"a_pos_3f",components:3,type:"Float32"}]),wX=Yr([{name:"a_color_3f",components:3,type:"Float32"}]),EX=Yr([{name:"a_color_4f",components:4,type:"Float32"}]),TX=Yr([{name:"a_uv_2f",components:2,type:"Float32"}]),SX=Yr([{name:"a_normal_3f",components:3,type:"Float32"}]),CX=Yr([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),kX=Yr([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]);class xN{constructor(o,s){this.feature=o,this.instancedDataOffset=s,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class wN{constructor(){this.instancedDataArray=new nc,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class AA{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.layers=o.layers,this.layerIds=this.layers.map(s=>s.fqid),this.projection=o.projection,this.index=o.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0}}populate(o,s,u,p){this.tileToMeter=qn(u);const m=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:v,id:x,index:T,sourceLayerIndex:S}of o){const A=Oo(v,m);if(!this.layers[0]._featureFilter.filter(new xo(this.zoom),A,u))continue;const I={id:x,sourceLayerIndex:S,index:T,geometry:m?A.geometry:Qo(v,u,p),properties:v.properties,type:v.type,patterns:{}},z=this.addFeature(I,I.geometry,A);z&&s.featureIndex.insert(v,I.geometry,T,S,this.index,this.instancesPerModel[z].instancedDataArray.length,Xt/32)}this.lookup=null}update(o,s,u,p){for(const m in this.instancesPerModel){const v=this.instancesPerModel[m];for(const x in o)v.idToFeaturesIndex.hasOwnProperty(x)&&this.evaluate(v.features[v.idToFeaturesIndex[x]],o[x],v,!0)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let o=!1;for(const s in this.instancesPerModel){const u=this.instancesPerModel[s];for(const p of u.features){const m=this.layers[0],v=p.feature,x=this.canonical,T=m.paint.get("model-rotation").evaluate(v,{},x),S=m.paint.get("model-scale").evaluate(v,{},x),A=m.paint.get("model-translation").evaluate(v,{},x);a.N.exactEquals(p.rotation,T)&&a.N.exactEquals(p.scale,S)&&a.N.exactEquals(p.translation,A)||(this.evaluate(p,p.featureStates,u,!0),o=!0)}}return o}isEmpty(){for(const o in this.instancesPerModel)if(this.instancesPerModel[o].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(o){if(!this.uploaded)for(const s in this.instancesPerModel){const u=this.instancesPerModel[s];u.instancedDataArray.length<0||u.instancedDataArray.length===0||(u.instancedDataBuffer?u.instancedDataBuffer.updateData(u.instancedDataArray):u.instancedDataBuffer=o.createVertexBuffer(u.instancedDataArray,CX.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const o in this.instancesPerModel){const s=this.instancesPerModel[o];s.instancedDataArray.length!==0&&s.instancedDataBuffer&&s.instancedDataBuffer.destroy()}}addFeature(o,s,u){const p=this.layers[0],m=p.layout.get("model-id").evaluate(u,{},this.canonical);if(!m)return On(`modelId is not evaluated for layer ${p.id} and it is not going to get rendered.`),m;this.instancesPerModel[m]||(this.instancesPerModel[m]=new wN);const v=this.instancesPerModel[m],x=v.instancedDataArray,T=new xN(u,x.length);for(const S of s)for(const A of S){if(A.x<0||A.x>=Xt||A.y<0||A.y>=Xt)continue;const I=(this.lookupDim-1)/Xt,z=this.lookupDim*(A.y*I|0)+A.x*I|0;if(this.lookup){if(this.lookup[z]!==0)continue;this.lookup[z]=1}this.instanceCount++;const V=x.length;x.resize(V+1),v.instancesEvaluatedElevation.push(0),x.float32[16*V]=A.x,x.float32[16*V+1]=A.y}return T.instancedDataCount=v.instancedDataArray.length-T.instancedDataOffset,T.instancedDataCount>0&&(o.id&&(v.idToFeaturesIndex[o.id]=v.features.length),v.features.push(T),this.evaluate(T,{},v,!1)),m}evaluate(o,s,u,p){const m=this.layers[0],v=o.feature,x=this.canonical,T=o.rotation=m.paint.get("model-rotation").evaluate(v,s,x),S=o.scale=m.paint.get("model-scale").evaluate(v,s,x),A=o.translation=m.paint.get("model-translation").evaluate(v,s,x),I=m.paint.get("model-color").evaluate(v,s,x);I.a=m.paint.get("model-color-mix-intensity").evaluate(v,s,x);const z=[];this.maxVerticalOffset<A[2]&&(this.maxVerticalOffset=A[2]),this.maxScale=Math.max(Math.max(this.maxScale,S[0]),Math.max(S[1],S[2])),vN(z,T,S);const V=Math.round(100*I.a)+I.b/1.05;for(let Y=0;Y<o.instancedDataCount;++Y){const X=o.instancedDataOffset+Y,ne=16*X,ae=u.instancedDataArray.float32;let ye=0;p&&(ye=ae[ne+6]-u.instancesEvaluatedElevation[X]);const xe=0|ae[ne+1];ae[ne]=(0|ae[ne])+I.r/1.05,ae[ne+1]=xe+I.g/1.05,ae[ne+2]=V,ae[ne+3]=1/(x.z>10?this.tileToMeter:qn(x,xe)),ae[ne+4]=A[0],ae[ne+5]=A[1],ae[ne+6]=A[2]+ye,ae[ne+7]=z[0],ae[ne+8]=z[1],ae[ne+9]=z[2],ae[ne+10]=z[4],ae[ne+11]=z[5],ae[ne+12]=z[6],ae[ne+13]=z[8],ae[ne+14]=z[9],ae[ne+15]=z[10],u.instancesEvaluatedElevation[X]=A[2]}}}rn(AA,"ModelBucket",{omit:["layers"]}),rn(wN,"PerModelAttributes"),rn(xN,"ModelFeature");const AX=new wo({visibility:new $t(et.layout_model.visibility),"model-id":new Cn(et.layout_model["model-id"])});var MX={paint:new wo({"model-opacity":new $t(et.paint_model["model-opacity"]),"model-rotation":new Cn(et.paint_model["model-rotation"]),"model-scale":new Cn(et.paint_model["model-scale"]),"model-translation":new Cn(et.paint_model["model-translation"]),"model-color":new Cn(et.paint_model["model-color"]),"model-color-mix-intensity":new Cn(et.paint_model["model-color-mix-intensity"]),"model-type":new $t(et.paint_model["model-type"]),"model-cast-shadows":new $t(et.paint_model["model-cast-shadows"]),"model-receive-shadows":new $t(et.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new $t(et.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Cn(et.paint_model["model-emissive-strength"]),"model-roughness":new Cn(et.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Cn(et.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new $t(et.paint_model["model-cutoff-fade-range"])}),layout:AX};const Mg=64,Ty={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function EN(i,o,s,u,p,m,v,x,T,S=!1){const A=s.zoom,I=s.project(u),z=zn(u.lat,A),V=1/z;a.a6.identity(i),a.a6.translate(i,i,[I.x+v[0]*V,I.y+v[1]*V,v[2]]);let Y=1,X=1;const ne=s.worldSize;if(S){if(s.projection.name==="mercator"){let _e=0;s.elevation&&(_e=s.elevation.getAtPointOrZero(new Jn(I.x/ne,I.y/ne),0));const Ie=a.a7.transformMat4([],[I.x,I.y,_e,1],s.projMatrix)[3]/s.cameraToCenterDistance;Y=Ie,X=Ie*zn(s.center.lat,A)}else if(s.projection.name==="globe"){const _e=kA(i,s),Ie=a.a6.multiply([],s.projMatrix,_e),Me=[0,0,0,1];a.a7.transformMat4(Me,Me,Ie);const $e=Me[3]/s.cameraToCenterDistance,We=Jf(A),qe=s.projection.pixelsPerMeter(u.lat,ne)*zn(u.lat,A),rt=s.projection.pixelsPerMeter(s.center.lat,ne)*zn(s.center.lat,A);Y=$e/yr(qe,Dr(s.center.lat),We),X=$e*z/qe,Y*=rt,X*=rt}}else Y=V;a.a6.scale(i,i,[Y,Y,X]);const ae=[...i],ye=o.orientation,xe=[];if(vN(xe,[ye[0]+p[0],ye[1]+p[1],ye[2]+p[2]],m),a.a6.multiply(i,ae,xe),x&&s.elevation){let _e=0;const Ie=[];if(T&&s.elevation){_e=function(We,qe,rt,Xe,mt){const St=qe.elevation;if(!St)return 0;const ht=Bo.projectAabbCorners(rt,Xe),wt=on(1,mt.lat)*qe.worldSize,lt=function(Nn,hr){const $n=[0,0,1],fr=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const Kn of fr){const Sr=Nn[Kn.corners[0]],or=Nn[Kn.corners[1]],lo=Nn[Kn.corners[2]],zr=[or[0]-Sr[0],or[1]-Sr[1],hr*(or[2]-Sr[2])],Ur=a.N.cross(zr,zr,[lo[0]-Sr[0],lo[1]-Sr[1],hr*(lo[2]-Sr[2])]);a.N.normalize(Ur,Ur),Kn.dotProductWithUp=a.N.dot(Ur,$n)}return fr.sort((Kn,Sr)=>Kn.dotProductWithUp-Sr.dotProductWithUp),fr[0].corners}(ht,wt),xt=ht[lt[0]],Gt=ht[lt[1]],At=ht[lt[2]],dn=ht[lt[3]],Jt=St.getAtPointOrZero(new Jn(xt[0]/qe.worldSize,xt[1]/qe.worldSize),0),It=St.getAtPointOrZero(new Jn(Gt[0]/qe.worldSize,Gt[1]/qe.worldSize),0),Bn=St.getAtPointOrZero(new Jn(At[0]/qe.worldSize,At[1]/qe.worldSize),0),wn=St.getAtPointOrZero(new Jn(dn[0]/qe.worldSize,dn[1]/qe.worldSize),0),ln=(Jt+wn)/2,Pt=(It+Bn)/2;return ln>Pt?It<Bn?jw(We,Gt,dn,xt,It,wn,Jt,wt):jw(We,At,xt,dn,Bn,Jt,wn,wt):Jt<wn?jw(We,xt,Gt,At,Jt,It,Bn,wt):jw(We,dn,At,Gt,wn,Bn,It,wt),Math.max(ln,Pt)}(Ie,s,o.aabb,i,u);const Me=a.a6.fromQuat([],Ie),$e=a.a6.multiply([],Me,xe);a.a6.multiply(i,ae,$e)}else _e=s.elevation.getAtPointOrZero(new Jn(I.x/ne,I.y/ne),0);_e!==0&&(i[14]+=_e)}}function u_(i,o,s=!1){i.uploaded||(i.gfxTexture=new SA(o,i.image,s?o.gl.R8:o.gl.RGBA,{useMipmap:i.sampler.minFilter>=o.gl.NEAREST_MIPMAP_NEAREST}),i.uploaded=!0,i.image=null)}function DX(i,o,s){i.indexBuffer=o.createIndexBuffer(i.indexArray,!1,!0),i.vertexBuffer=o.createVertexBuffer(i.vertexArray,xX.members,!1,!0),i.normalArray&&(i.normalBuffer=o.createVertexBuffer(i.normalArray,SX.members,!1,!0)),i.texcoordArray&&(i.texcoordBuffer=o.createVertexBuffer(i.texcoordArray,TX.members,!1,!0)),i.colorArray&&(i.colorBuffer=o.createVertexBuffer(i.colorArray,(i.colorArray.bytesPerElement===12?wX:EX).members,!1,!0)),i.featureArray&&(i.pbrBuffer=o.createVertexBuffer(i.featureArray,kX.members,!0)),i.segments=Po.simpleSegment(0,0,i.vertexArray.length,i.indexArray.length);const u=i.material;u.pbrMetallicRoughness.baseColorTexture&&u_(u.pbrMetallicRoughness.baseColorTexture,o),u.pbrMetallicRoughness.metallicRoughnessTexture&&u_(u.pbrMetallicRoughness.metallicRoughnessTexture,o),u.normalTexture&&u_(u.normalTexture,o),u.occlusionTexture&&u_(u.occlusionTexture,o,s),u.emissionTexture&&u_(u.emissionTexture,o)}function MA(i,o,s){if(i.meshes)for(const u of i.meshes)DX(u,o,s);if(i.children)for(const u of i.children)MA(u,o,s)}function $w(i){if(i.meshes)for(const o of i.meshes)o.indexArray.destroy(),o.vertexArray.destroy(),o.colorArray&&o.colorArray.destroy(),o.normalArray&&o.normalArray.destroy(),o.texcoordArray&&o.texcoordArray.destroy(),o.featureArray&&o.featureArray.destroy();if(i.children)for(const o of i.children)$w(o)}function DA(i){if(i.meshes)for(const s of i.meshes)s.vertexBuffer&&(s.vertexBuffer.destroy(),s.indexBuffer.destroy(),s.normalBuffer&&s.normalBuffer.destroy(),s.texcoordBuffer&&s.texcoordBuffer.destroy(),s.colorBuffer&&s.colorBuffer.destroy(),s.pbrBuffer&&s.pbrBuffer.destroy(),s.segments.destroy(),s.material&&((o=s.material).pbrMetallicRoughness.baseColorTexture&&o.pbrMetallicRoughness.baseColorTexture.gfxTexture&&o.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),o.pbrMetallicRoughness.metallicRoughnessTexture&&o.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&o.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),o.normalTexture&&o.normalTexture.gfxTexture&&o.normalTexture.gfxTexture.destroy(),o.emissionTexture&&o.emissionTexture.gfxTexture&&o.emissionTexture.gfxTexture.destroy(),o.occlusionTexture&&o.occlusionTexture.gfxTexture&&o.occlusionTexture.gfxTexture.destroy()));var o;if(i.children)for(const s of i.children)DA(s)}class RX{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class IX{constructor(){this.tasks={},this.taskQueue=[],nt(["process"],this),this.invoker=new RX(this.process),this.nextId=0}add(o,s){const u=this.nextId++,p=function({type:m,isSymbolTile:v,zoom:x}){return x=x||0,m==="message"?0:m!=="maybePrepare"||v?m!=="parseTile"||v?m==="parseTile"&&v?300-x:m==="maybePrepare"&&v?400-x:500:200-x:100-x}(s);if(p===0){Wr();try{o()}finally{}return null}return this.tasks[u]={fn:o,metadata:s,priority:p,id:u},this.taskQueue.push(u),this.invoker.trigger(),{cancel:()=>{delete this.tasks[u]}}}process(){Wr();try{if(this.taskQueue=this.taskQueue.filter(u=>!!this.tasks[u]),!this.taskQueue.length)return;const o=this.pick();if(o===null)return;const s=this.tasks[o];if(delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),!s)return;s.fn()}finally{}}pick(){let o=null,s=1/0;for(let p=0;p<this.taskQueue.length;p++){const m=this.tasks[this.taskQueue[p]];m.priority<s&&(s=m.priority,o=p)}if(o===null)return null;const u=this.taskQueue[o];return this.taskQueue.splice(o,1),u}remove(){this.invoker.remove()}}class TN{constructor(o,s,u){this.target=o,this.parent=s,this.mapId=u,this.callbacks={},this.cancelCallbacks={},nt(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new IX}send(o,s,u,p,m=!1,v){const x=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(u.metadata=v,this.callbacks[x]=u);const T=new Set;return this.target.postMessage({id:x,type:o,hasCallback:!!u,targetMapId:p,mustQueue:m,sourceMapId:this.mapId,data:Ql(s,T)},T),{cancel:()=>{u&&delete this.callbacks[x],this.target.postMessage({id:x,type:"<cancel>",targetMapId:p,sourceMapId:this.mapId})}}}receive(o){const s=o.data,u=s.id;if(u&&(!s.targetMapId||this.mapId===s.targetMapId))if(s.type==="<cancel>"){const p=this.cancelCallbacks[u];delete this.cancelCallbacks[u],p&&p.cancel()}else if(s.mustQueue||Wr()){const p=this.callbacks[u],m=this.scheduler.add(()=>this.processTask(u,s),p&&p.metadata||{type:"message"});m&&(this.cancelCallbacks[u]=m)}else this.processTask(u,s)}processTask(o,s){if(delete this.cancelCallbacks[o],s.type==="<response>"){const u=this.callbacks[o];delete this.callbacks[o],u&&(s.error?u(Gc(s.error)):u(null,Gc(s.data)))}else{const u=new Set,p=s.hasCallback?(v,x)=>{this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:v?Ql(v):null,data:Ql(x,u)},u)}:v=>{},m=Gc(s.data);if(this.parent[s.type])this.parent[s.type](s.sourceMapId,m,p);else if(this.parent.getWorkerSource){const v=s.type.split(".");this.parent.getWorkerSource(s.sourceMapId,v[0],m.source,m.scope)[v[1]](m,p)}else p(new Error(`Could not find function ${s.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}class Sy{constructor(o,s){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=Dt();const u=this.workerPool.acquire(this.id);for(let p=0;p<u.length;p++){const m=new Sy.Actor(u[p],s,this.id);m.name=`Worker ${p}`,this.actors.push(m)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(o,s,u){Ct(this.actors,(p,m)=>{p.send(o,s,m)},u=u||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(o=>{o.remove()}),this.actors=[],this.workerPool.release(this.id)}}Sy.Actor=TN;var d_={workerUrl:"",workerClass:null,workerParams:void 0};function PX(){return d_.workerClass!=null?new d_.workerClass:new self.Worker(d_.workerUrl,d_.workerParams)}const RA="mapboxgl_preloaded_worker_pool";class h_{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<h_.workerCount;)this.workers.push(new PX);return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.workers&&this.numActive()===0&&(this.workers.forEach(s=>{s.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[RA]}numActive(){return Object.keys(this.active).length}}let f_;function Uw(){return f_||(f_=new h_),f_}h_.workerCount=2;let Vw,IA,ou,Cy,PA,ky=null;function SN(){return Wr()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:IA||M.DRACO_URL}function CN(){if(Wr()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(Cy)return Cy;const i=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return Cy=WebAssembly.validate(i)?M.MESHOPT_SIMD_URL:M.MESHOPT_URL,Cy}const Hw={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},OX={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},p_={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function kN(i,o,s){const u=s.json.bufferViews.length,p=s.buffers.length;o.bufferView=u,s.json.bufferViews[u]={buffer:p,byteLength:i.byteLength},s.buffers[p]=i}const OA="KHR_draco_mesh_compression";function LX(i,o){const s=i.extensions&&i.extensions[OA];if(!s)return;const u=new ou.Decoder,p=RN(o,s.bufferView),m=new ou.Mesh;if(!u.DecodeArrayToMesh(p,p.byteLength,m))throw new Error("Failed to decode Draco mesh");const v=o.json.accessors[i.indices],x=Hw[v.componentType],T=v.count*x.BYTES_PER_ELEMENT,S=ou._malloc(T);x===Uint16Array?u.GetTrianglesUInt16Array(m,T,S):u.GetTrianglesUInt32Array(m,T,S),kN(ou.memory.buffer.slice(S,S+T),v,o),ou._free(S);for(const A of Object.keys(s.attributes)){const I=u.GetAttributeByUniqueId(m,s.attributes[A]),z=o.json.accessors[i.attributes[A]],V=OX[z.componentType],Y=z.count*p_[z.type]*Hw[z.componentType].BYTES_PER_ELEMENT,X=ou._malloc(Y);u.GetAttributeDataArrayForAllPoints(m,I,ou[V],Y,X),kN(ou.memory.buffer.slice(X,X+Y),z,o),ou._free(X)}u.destroy(),m.destroy(),delete i.extensions[OA]}const Ww="EXT_meshopt_compression";function NX(i,o){if(!i.extensions||!i.extensions[Ww])return;const s=i.extensions[Ww],u=new Uint8Array(o.buffers[s.buffer],s.byteOffset||0,s.byteLength||0),p=new Uint8Array(s.count*s.byteStride);PA.decodeGltfBuffer(p,s.count,s.byteStride,u,s.mode,s.filter),i.buffer=o.buffers.length,i.byteOffset=0,o.buffers[i.buffer]=p.buffer,delete i.extensions[Ww]}const AN=1179937895,MN=new TextDecoder("utf8");function DN(i,o){return new URL(i,o).href}function zX(i,o,s,u){return fetch(DN(i.uri,u)).then(p=>p.arrayBuffer()).then(p=>{o.buffers[s]=p})}function RN(i,o){const s=i.json.bufferViews[o];return new Uint8Array(i.buffers[s.buffer],s.byteOffset||0,s.byteLength)}function BX(i,o,s,u){if(i.uri){const p=DN(i.uri,u);return fetch(p).then(m=>m.blob()).then(m=>createImageBitmap(m)).then(m=>{o.images[s]=m})}if(i.bufferView!==void 0){const p=RN(o,i.bufferView),m=new Blob([p],{type:i.mimeType});return createImageBitmap(m).then(v=>{o.images[s]=v})}}function IN(i,o=0,s){const u={json:null,images:[],buffers:[]};if(new Uint32Array(i,o,1)[0]===AN){const A=new Uint32Array(i,o);let I=2;const z=(A[I++]>>2)-3,V=A[I++]>>2;if(I++,u.json=JSON.parse(MN.decode(A.subarray(I,I+V))),I+=V,I<z){const Y=A[I++];I++;const X=o+(I<<2);u.buffers[0]=i.slice(X,X+Y)}}else u.json=JSON.parse(MN.decode(new Uint8Array(i,o)));const{buffers:p,images:m,meshes:v,extensionsUsed:x,bufferViews:T}=u.json;let S=Promise.resolve();if(p){const A=[];for(let I=0;I<p.length;I++){const z=p[I];z.uri?A.push(zX(z,u,I,s)):u.buffers[I]||(u.buffers[I]=null)}S=Promise.all(A)}return S.then(()=>{const A=[],I=x&&x.includes(OA),z=x&&x.includes(Ww);if(I&&A.push(function(){if(!ou)return Vw||(Vw=function(V){let Y,X=null;function ne(){Y=new Uint8Array(X.buffer)}function ae(){throw new Error("Unexpected Draco error.")}const ye={a:{a:ae,d:function(xe,_e,Ie){return Y.copyWithin(xe,_e,_e+Ie)},c:function(xe){const _e=Y.length,Ie=Math.max(xe>>>0,Math.ceil(1.2*_e)),Me=Math.ceil((Ie-_e)/65536);try{return X.grow(Me),ne(),!0}catch{return!1}},b:ae}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(V,ye):V.then(xe=>xe.arrayBuffer()).then(xe=>WebAssembly.instantiate(xe,ye))).then(xe=>{const{Rb:_e,Qb:Ie,P:Me,T:$e,X:We,Ja:qe,La:rt,Qa:Xe,Va:mt,Wa:St,eb:ht,jb:wt,f:lt,e:xt,yb:Gt,zb:At,Ab:dn,Bb:Jt,Db:It,Gb:Bn}=xe.instance.exports;X=xt;const wn=(()=>{let ln=0,Pt=0,Nn=0,hr=0;return $n=>{Nn&&(_e(hr),_e(ln),Pt+=Nn,Nn=ln=0),ln||(Pt+=128,ln=Ie(Pt));const fr=$n.length+7&-8;let Kn=ln;fr>=Pt&&(Nn=fr,Kn=hr=Ie(fr));for(let Sr=0;Sr<$n.length;Sr++)Y[Kn+Sr]=$n[Sr];return Kn}})();return ne(),lt(),{memory:xt,_free:_e,_malloc:Ie,Mesh:class{constructor(){this.ptr=Me()}destroy(){$e(this.ptr)}},Decoder:class{constructor(){this.ptr=qe()}destroy(){wt(this.ptr)}DecodeArrayToMesh(ln,Pt,Nn){const hr=wn(ln),$n=rt(this.ptr,hr,Pt,Nn.ptr);return!!We($n)}GetAttributeByUniqueId(ln,Pt){return{ptr:Xe(this.ptr,ln.ptr,Pt)}}GetTrianglesUInt16Array(ln,Pt,Nn){mt(this.ptr,ln.ptr,Pt,Nn)}GetTrianglesUInt32Array(ln,Pt,Nn){St(this.ptr,ln.ptr,Pt,Nn)}GetAttributeDataArrayForAllPoints(ln,Pt,Nn,hr,$n){ht(this.ptr,ln.ptr,Pt.ptr,Nn,hr,$n)}},DT_INT8:Gt(),DT_UINT8:At(),DT_INT16:dn(),DT_UINT16:Jt(),DT_UINT32:It(),DT_FLOAT32:Bn()}})}(fetch(SN())),Vw.then(V=>{ou=V,Vw=void 0}))}()),z&&A.push(function(){if(PA)return;const V=function(Y){let X;const ne=WebAssembly.instantiateStreaming(Y,{}).then(xe=>{X=xe.instance,X.exports.__wasm_call_ctors()}),ae={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},ye={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:ne,supported:!0,decodeGltfBuffer(xe,_e,Ie,Me,$e,We){(function(qe,rt,Xe,mt,St,ht,wt){const lt=qe.exports.sbrk,xt=mt+3&-4,Gt=lt(xt*St),At=lt(ht.length),dn=new Uint8Array(qe.exports.memory.buffer);dn.set(ht,At);const Jt=rt(Gt,mt,St,At,ht.length);if(Jt===0&&wt&&wt(Gt,xt,St),Xe.set(dn.subarray(Gt,Gt+mt*St)),lt(Gt-lt(0)),Jt!==0)throw new Error(`Malformed buffer data: ${Jt}`)})(X,X.exports[ye[$e]],xe,_e,Ie,Me,X.exports[ae[We]])}}}(fetch(CN()));return V.ready.then(()=>{PA=V})}()),m)for(let V=0;V<m.length;V++)A.push(BX(m[V],u,V,s));return(A.length?Promise.all(A):Promise.resolve()).then(()=>{if(I&&v)for(const{primitives:V}of v)for(const Y of V)LX(Y,u);if(z&&v&&T)for(const V of T)NX(V,u);return u})})}class PN{constructor(o,s,u){if(this.triangleCount=s.length/3,this.min=new ve(0,0),this.max=new ve(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||o.length===0||u===0)return;const p=o.map(A=>A.x),m=o.map(A=>A.y);this.min=new ve(Math.min(...p),Math.min(...m)),this.max=new ve(Math.max(...p),Math.max(...m));const v=this.max.sub(this.min);v.x=Math.max(v.x,1),v.y=Math.max(v.y,1);const x=Math.max(v.x,v.y)/u;this.cellsX=Math.max(1,Math.ceil(v.x/x)),this.cellsY=Math.max(1,Math.ceil(v.y/x)),this.xScale=1/x,this.yScale=1/x;const T=[];for(let A=0;A<this.triangleCount;A++){const I=o[s[3*A+0]].sub(this.min),z=o[s[3*A+1]].sub(this.min),V=o[s[3*A+2]].sub(this.min),Y=sp(Math.floor(Math.min(I.x,z.x,V.x)),this.xScale,this.cellsX),X=sp(Math.floor(Math.max(I.x,z.x,V.x)),this.xScale,this.cellsX),ne=sp(Math.floor(Math.min(I.y,z.y,V.y)),this.yScale,this.cellsY),ae=sp(Math.floor(Math.max(I.y,z.y,V.y)),this.yScale,this.cellsY),ye=new ve(0,0),xe=new ve(0,0),_e=new ve(0,0),Ie=new ve(0,0);for(let Me=ne;Me<=ae;++Me){ye.y=xe.y=Me*x,_e.y=Ie.y=(Me+1)*x;for(let $e=Y;$e<=X;++$e)ye.x=_e.x=$e*x,xe.x=Ie.x=($e+1)*x,($v(I,z,V,ye,xe,Ie)||$v(I,z,V,ye,Ie,_e))&&T.push({cellIdx:Me*this.cellsX+$e,triIdx:A})}}if(T.length===0)return;T.sort((A,I)=>A.cellIdx-I.cellIdx||A.triIdx-I.triIdx);let S=0;for(;S<T.length;){const A=T[S].cellIdx,I={start:this.payload.length,len:0};for(;S<T.length&&T[S].cellIdx===A;)++I.len,this.payload.push(T[S++].triIdx);this.cells[A]=I}}query(o,s,u){if(this.triangleCount===0||this.cells.length===0||o.x>this.max.x||this.min.x>s.x||o.y>this.max.y||this.min.y>s.y)return;this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8)));for(let T=0;T<this.lookup.length;T++)this.lookup[T]=0;const p=sp(o.x-this.min.x,this.xScale,this.cellsX),m=sp(s.x-this.min.x,this.xScale,this.cellsX),v=sp(o.y-this.min.y,this.yScale,this.cellsY),x=sp(s.y-this.min.y,this.yScale,this.cellsY);for(let T=v;T<=x;T++)for(let S=p;S<=m;S++){const A=this.cells[T*this.cellsX+S];if(A)for(let I=0;I<A.len;I++){const z=this.payload[A.start+I],V=Math.floor(z/8),Y=1<<z%8;if(!(this.lookup[V]&Y)&&(this.lookup[V]|=Y,u.push(z),u.length===this.triangleCount))return}}}}function sp(i,o,s){return Math.max(0,Math.min(s-1,Math.floor(i*o)))}function Dg(i,o){const s=i.json.bufferViews[o.bufferView],u=Hw[o.componentType];return new u(i.buffers[s.buffer],(o.byteOffset||0)+(s.byteOffset||0),o.count*(s.byteStride&&s.byteStride!==p_[o.type]*u.BYTES_PER_ELEMENT?s.byteStride/u.BYTES_PER_ELEMENT:p_[o.type]))}function LA(i,o,s,u){const p=Hw[o.componentType],m=function(A){switch(A){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(p),v=i.json.bufferViews[o.bufferView],x=v.byteStride?v.byteStride/p.BYTES_PER_ELEMENT:p_[o.type],T=s.float32,S=T.length/s.capacity;for(let A=0,I=0;A<o.count*x;A+=x,I+=S)for(let z=0;z<S;z++)T[I+z]=u[A+z]*m;s._trim()}function FX(i,o,s){const u=i.indices,p=i.attributes,m={};m.indexArray=new ci;const v=o.json.accessors[u],x=v.count/3;m.indexArray.reserve(x);const T=Dg(o,v);for(let z=0;z<x;z++)m.indexArray.emplaceBack(T[3*z],T[3*z+1],T[3*z+2]);m.indexArray._trim(),m.vertexArray=new Kc;const S=o.json.accessors[p.POSITION];m.vertexArray.reserve(S.count);const A=Dg(o,S);for(let z=0;z<S.count;z++)m.vertexArray.emplaceBack(A[3*z],A[3*z+1],A[3*z+2]);if(m.vertexArray._trim(),m.aabb=new Bo(S.min,S.max),m.centroid=function(z,V){const Y=[0,0,0],X=z.length;if(X>0){for(let ne=0;ne<X;ne++){const ae=3*z[ne];Y[0]+=V[ae],Y[1]+=V[ae+1],Y[2]+=V[ae+2]}Y[0]/=X,Y[1]/=X,Y[2]/=X}return Y}(T,A),p.COLOR_0!==void 0){const z=o.json.accessors[p.COLOR_0],V=p_[z.type],Y=Dg(o,z);m.colorArray=V===3?new Kc:new ec,m.colorArray.resize(z.count),LA(o,z,m.colorArray,Y)}if(p.NORMAL!==void 0){m.normalArray=new Kc;const z=o.json.accessors[p.NORMAL];m.normalArray.resize(z.count);const V=Dg(o,z);LA(o,z,m.normalArray,V)}if(p.TEXCOORD_0!==void 0&&s.length>0){m.texcoordArray=new uh;const z=o.json.accessors[p.TEXCOORD_0];m.texcoordArray.resize(z.count);const V=Dg(o,z);LA(o,z,m.texcoordArray,V)}if(p._FEATURE_ID_RGBA4444!==void 0){const z=o.json.accessors[p._FEATURE_ID_RGBA4444];o.json.extensionsUsed&&o.json.extensionsUsed.includes("EXT_meshopt_compression")&&(m.featureData=Dg(o,z))}p._FEATURE_RGBA4444!==void 0&&(m.featureData=new Uint32Array(Dg(o,o.json.accessors[p._FEATURE_RGBA4444]).buffer));const I=i.material;return m.material=function(z,V){const{emissiveFactor:Y=[0,0,0],alphaMode:X="OPAQUE",alphaCutoff:ne=.5,normalTexture:ae,occlusionTexture:ye,emissiveTexture:xe,doubleSided:_e}=z,{baseColorFactor:Ie=[1,1,1,1],metallicFactor:Me=1,roughnessFactor:$e=1,baseColorTexture:We,metallicRoughnessTexture:qe}=z.pbrMetallicRoughness||{},rt=ye?V[ye.index]:void 0;if(ye&&ye.extensions&&ye.extensions.KHR_texture_transform&&rt){const Xe=ye.extensions.KHR_texture_transform;rt.offsetScale=[Xe.offset[0],Xe.offset[1],Xe.scale[0],Xe.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new So(...Ie),metallicFactor:Me,roughnessFactor:$e,baseColorTexture:We?V[We.index]:void 0,metallicRoughnessTexture:qe?V[qe.index]:void 0},doubleSided:_e,emissiveFactor:Y,alphaMode:X,alphaCutoff:ne,normalTexture:ae?V[ae.index]:void 0,occlusionTexture:rt,emissionTexture:xe?V[xe.index]:void 0,defined:z.defined===void 0}}(I!==void 0?o.json.materials[I]:{defined:!1},s),m}function ON(i,o,s){const{matrix:u,rotation:p,translation:m,scale:v,mesh:x,extras:T,children:S}=i,A={};if(A.matrix=u||a.a6.fromRotationTranslationScale([],p||[0,0,0,1],m||[0,0,0],v||[1,1,1]),x!==void 0){A.meshes=s[x];const I=A.anchor=[0,0];for(const z of A.meshes){const{min:V,max:Y}=z.aabb;I[0]+=V[0]+Y[0],I[1]+=V[1]+Y[1]}I[0]=Math.floor(I[0]/A.meshes.length/2),I[1]=Math.floor(I[1]/A.meshes.length/2)}if(T&&(T.id&&(A.id=T.id),T.lights&&(A.lights=function(I){if(!I.length)return[];const z=function(ae){const ye=atob(ae),xe=new Uint8Array(ye.length);for(let _e=0;_e<ye.length;_e++)xe[_e]=ye.codePointAt(_e);return xe}(I),V=[],Y=z.length/24,X=new Uint16Array(z.buffer),ne=new Float32Array(z.buffer);for(let ae=0;ae<Y;ae++){const ye=X[2*ae*6]/30,xe=X[2*ae*6+1]/30,_e=X[2*ae*6+10]/100,Ie=ne[6*ae+1],Me=ne[6*ae+2],$e=ne[6*ae+3],We=ne[6*ae+4],qe=$e-Ie,rt=We-Me,Xe=Math.hypot(qe,rt);V.push({pos:[Ie+.5*qe,Me+.5*rt,xe],normal:[rt/Xe,-qe/Xe,0],width:Xe,height:ye,depth:_e,points:[Ie,Me,$e,We]})}return V}(T.lights))),S){const I=[];for(const z of S)I.push(ON(o.json.nodes[z],o,s));A.children=I}return A}function jX(i){if(i.vertices.length===0||i.indices.length===0)return null;const[o,s]=[i.vertices[0].clone(),i.vertices[0].clone()];for(let v=1;v<i.vertices.length;++v){const x=i.vertices[v];o.x=Math.min(o.x,x.x),o.y=Math.min(o.y,x.y),s.x=Math.max(s.x,x.x),s.y=Math.max(s.y,x.y)}const u=Math.ceil(Math.max(s.x-o.x,s.y-o.y)/256),p=Math.max(8,u),m=new PN(i.vertices,i.indices,p);return{vertices:i.vertices,indices:i.indices,grid:m,min:o,max:s}}function $X(i){if(!i.extras||!i.extras.ground)return null;const o=i.extras.ground;if(!o||!Array.isArray(o)||o.length===0)return null;const s=o[0];if(!s||!Array.isArray(s)||s.length===0)return null;const u=[];for(const v of s){if(!Array.isArray(v)||v.length!==2)continue;const x=v[0],T=v[1];typeof x=="number"&&typeof T=="number"&&u.push(new ve(x,T))}if(u.length<3)return null;u.length>1&&u[u.length-1].equals(u[0])&&u.pop();let p=0;for(let v=0;v<u.length;v++){const x=u[v],T=u[(v+1)%u.length],S=u[(v+2)%u.length];p+=(x.x-T.x)*(S.y-T.y)-(S.x-T.x)*(x.y-T.y)}p>0&&u.reverse();const m=hw(u.flatMap(v=>[v.x,v.y]),[]);return m.length===0?null:{vertices:u,indices:m}}function UX(i){const o=[],s=[];let u=0;for(const p of i){u=o.length;const m=p.vertexArray.float32,v=p.indexArray.uint16;for(let x=0;x<p.vertexArray.length;x++)o.push(new ve(m[3*x+0],m[3*x+1]));for(let x=0;x<3*p.indexArray.length;x++)s.push(v[x]+u)}if(s.length%3!=0)return null;for(let p=0;p<s.length;p+=3){const m=o[s[p+0]],v=o[s[p+1]],x=o[s[p+2]];(m.x-v.x)*(x.y-v.y)-(x.x-v.x)*(m.y-v.y)>0&&([s[p+1],s[p+2]]=[s[p+2],s[p+1]])}return{vertices:o,indices:s}}function LN(i){const o=function(T,S){const A=[],I=WebGL2RenderingContext;if(T.json.textures)for(const z of T.json.textures){const V={magFilter:I.LINEAR,minFilter:I.NEAREST,wrapS:I.REPEAT,wrapT:I.REPEAT};z.sampler!==void 0&&Object.assign(V,T.json.samplers[z.sampler]),A.push({image:S[z.source],sampler:V,uploaded:!1})}return A}(i,i.images),s=function(T,S){const A=[];for(const I of T.json.meshes){const z=[];for(const V of I.primitives)z.push(FX(V,T,S));A.push(z)}return A}(i,o),{scenes:u,scene:p,nodes:m}=i.json,v=u?u[p||0].nodes:m,x=[];for(const T of v)x.push(ON(m[T],i,s));return function(T,S,A){const I={},z=new Set;for(let V=0;V<T.length;V++){const Y=A[S[V]];if(!Y.extras)continue;const X=Y.extras["mapbox:footprint:version"],ne=Y.extras["mapbox:footprint:id"];(X||ne)&&z.add(V),X==="1.0.0"&&ne&&(I[ne]=V)}for(let V=0;V<T.length;V++){if(z.has(V))continue;const Y=T[V],X=A[S[V]];if(!X.extras)continue;let ne=null;Y.id in I&&(ne=UX(T[I[Y.id]].meshes)),ne||(ne=$X(X)),ne&&(Y.footprint=jX(ne))}if(z.size>0){const V=Array.from(z.values()).sort((Y,X)=>Y-X);for(let Y=V.length-1;Y>=0;Y--)T.splice(V[Y],1)}}(x,v,i.json.nodes),x}function VX(i){i.heightmap=new Float32Array(4096),i.heightmap.fill(-1);const o=i.vertexArray.float32,s=i.aabb.min[0]-1,u=i.aabb.min[1]-1,p=Mg/(i.aabb.max[0]-s+2),m=Mg/(i.aabb.max[1]-u+2);for(let v=0;v<o.length;v+=3){const x=o[v+2],T=(o[v+0]-s)*p|0,S=(o[v+1]-u)*m|0;x>i.heightmap[S*Mg+T]&&(i.heightmap[S*Mg+T]=x)}}function HX(i,o){const s={};s.indexArray=new ci,s.indexArray.reserve(4*i.length),s.vertexArray=new Kc,s.vertexArray.reserve(10*i.length),s.colorArray=new ec,s.vertexArray.reserve(10*i.length);let u=0;for(const v of i){const x=Math.min(10,Math.max(4,1.3*v.height))*o,T=[-v.normal[1],v.normal[0],0],S=Math.min(.29,.1*v.width/v.depth),A=v.width-2*v.depth*o*(S+.01),I=a.N.scaleAndAdd([],v.pos,T,A/2),z=a.N.scaleAndAdd([],v.pos,T,-A/2),V=[I[0],I[1],I[2]+v.height],Y=[z[0],z[1],z[2]+v.height],X=a.N.scaleAndAdd([],v.normal,T,S);a.N.scale(X,X,x);const ne=a.N.scaleAndAdd([],v.normal,T,-S);a.N.scale(ne,ne,x),a.N.add(X,I,X),a.N.add(ne,z,ne),I[2]+=.1,z[2]+=.1,s.vertexArray.emplaceBack(X[0],X[1],X[2]),s.vertexArray.emplaceBack(ne[0],ne[1],ne[2]),s.vertexArray.emplaceBack(I[0],I[1],I[2]),s.vertexArray.emplaceBack(z[0],z[1],z[2]),s.vertexArray.emplaceBack(V[0],V[1],V[2]),s.vertexArray.emplaceBack(Y[0],Y[1],Y[2]),s.vertexArray.emplaceBack(I[0],I[1],I[2]),s.vertexArray.emplaceBack(z[0],z[1],z[2]),s.vertexArray.emplaceBack(X[0],X[1],X[2]),s.vertexArray.emplaceBack(ne[0],ne[1],ne[2]);const ae=A/x/2;s.colorArray.emplaceBack(-ae-S,-1,ae,.8),s.colorArray.emplaceBack(ae+S,-1,ae,.8),s.colorArray.emplaceBack(-ae,0,ae,1.3),s.colorArray.emplaceBack(ae,0,ae,1.3),s.colorArray.emplaceBack(ae+S,-.8,ae,.7),s.colorArray.emplaceBack(ae+S,-.8,ae,.7),s.colorArray.emplaceBack(0,0,ae,1.3),s.colorArray.emplaceBack(0,0,ae,1.3),s.colorArray.emplaceBack(ae+S,-1.2,ae,.8),s.colorArray.emplaceBack(ae+S,-1.2,ae,.8),s.indexArray.emplaceBack(6+u,4+u,8+u),s.indexArray.emplaceBack(7+u,9+u,5+u),s.indexArray.emplaceBack(0+u,1+u,2+u),s.indexArray.emplaceBack(1+u,3+u,2+u),u+=10}const p={defined:!0,emissiveFactor:[0,0,0]},m={};return m.baseColorFactor=So.white,p.pbrMetallicRoughness=m,s.material=p,s.aabb=new Bo([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),s}rn(PN,"TriangleGridIndex");class NN{constructor(o){this._stringToNumber={},this._numberToString=[];for(let s=0;s<o.length;s++){const u=o[s];this._stringToNumber[u]=s,this._numberToString[s]=u}}encode(o){return this._stringToNumber[o]}decode(o){return this._numberToString[o]}}const WX=["tile","layer","source","sourceLayer","state"];class zN{constructor(o,s,u,p,m){this.type="Feature",this._vectorTileFeature=o,this._z=s,this._x=u,this._y=p,this.properties=o.properties,this.id=m}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(o.id=this.id);for(const s of WX)this[s]!==void 0&&(o[s]=this[s]);return o}}class BN{constructor(o,s){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new Ns(Xt,16,0),this.featureIndexArray=new Ju,this.promoteId=s,this.is3DTile=!1}insert(o,s,u,p,m,v=0,x=0){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,p,m,v);const S=this.grid;for(let A=0;A<s.length;A++){const I=s[A],z=[1/0,1/0,-1/0,-1/0];for(let V=0;V<I.length;V++){const Y=I[V];z[0]=Math.min(z[0],Y.x),z[1]=Math.min(z[1],Y.y),z[2]=Math.max(z[2],Y.x),z[3]=Math.max(z[3],Y.y)}x!==0&&(z[0]-=x,z[1]-=x,z[2]+=x,z[3]+=x),z[0]<Xt&&z[1]<Xt&&z[2]>=0&&z[3]>=0&&S.insert(T,z[0],z[1],z[2],z[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new lA(new vy(this.rawTileData)).layers,this.sourceLayerCoder=new NN(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const o in this.vtLayers)this.vtFeatures[o]=[]}return this.vtLayers}query(o,s,u,p){this.loadVTLayers();const m=o.params||{},v=ja(m.filter),x=o.tileResult,T=o.transform,S=x.bufferedTilespaceBounds,A=this.grid.query(S.min.x,S.min.y,S.max.x,S.max.y,(Y,X,ne,ae)=>jv(x.bufferedTilespaceGeometry,Y,X,ne,ae));A.sort(YX);let I=null;T.elevation&&A.length>0&&(I=py.create(T.elevation,this.tileID));const z={};let V;for(let Y=0;Y<A.length;Y++){const X=A[Y];if(X===V)continue;V=X;const ne=this.featureIndexArray.get(X);let ae=null;if(this.is3DTile){const ye=this.bucketLayerIDs[0][0],xe=s[ye];if(xe.type!=="model")continue;const{queryFeature:_e,intersectionZ:Ie}=xe.queryIntersectsMatchingFeature(x,ne.featureIndex,v,T);_e&&this.appendToResult(z,ye,ne.featureIndex,_e,Ie)}else this.loadMatchingFeature(z,ne,v,m.layers,m.availableImages,s,u,p,(ye,xe,_e,Ie=0)=>(ae||(ae=Qo(ye,this.tileID.canonical,o.tileTransform)),xe.queryIntersectsFeature(x,ye,_e,ae,this.z,o.transform,o.pixelPosMatrix,I,Ie)))}return z}loadMatchingFeature(o,s,u,p,m,v,x,T,S){const{featureIndex:A,bucketIndex:I,sourceLayerIndex:z,layoutVertexArrayOffset:V}=s,Y=this.bucketLayerIDs[I];if(p&&!function(ye,xe){for(let _e=0;_e<ye.length;_e++)if(xe.indexOf(ye[_e])>=0)return!0;return!1}(p,Y))return;const X=this.sourceLayerCoder.decode(z),ne=this.vtLayers[X].feature(A);if(u.needGeometry){const ye=Oo(ne,!0);if(!u.filter(new xo(this.tileID.overscaledZ),ye,this.tileID.canonical))return}else if(!u.filter(new xo(this.tileID.overscaledZ),ne))return;const ae=this.getId(ne,X);for(let ye=0;ye<Y.length;ye++){const xe=Y[ye];if(p&&p.indexOf(xe)<0)continue;const _e=v[xe];if(!_e)continue;let Ie={};ae!==void 0&&T&&(Ie=T.getState(_e.sourceLayer||"_geojsonTileLayer",ae));const Me=!S||S(ne,_e,Ie,V);if(!Me)continue;const $e=new zN(ne,this.z,this.x,this.y,ae),We=Nt({},x[xe]);We.paint=FN(We.paint,_e.paint,ne,Ie,m),We.layout=FN(We.layout,_e.layout,ne,Ie,m),$e.layer=We,this.appendToResult(o,xe,A,$e,Me)}}appendToResult(o,s,u,p,m){let v=o[s];v===void 0&&(v=o[s]=[]),v.push({featureIndex:u,feature:p,intersectionZ:m})}lookupSymbolFeatures(o,s,u,p,m,v,x,T){const S={};this.loadVTLayers();const A=ja(m);for(const I of o)this.loadMatchingFeature(S,{bucketIndex:u,sourceLayerIndex:p,featureIndex:I,layoutVertexArrayOffset:0},A,v,x,T,s);return S}loadFeature(o){const{featureIndex:s,sourceLayerIndex:u}=o;this.loadVTLayers();const p=this.sourceLayerCoder.decode(u),m=this.vtFeatures[p];if(m[s])return m[s];const v=this.vtLayers[p].feature(s);return m[s]=v,v}hasLayer(o){for(const s of this.bucketLayerIDs)for(const u of s)if(o===u)return!0;return!1}getId(o,s){let u=o.id;if(this.promoteId){const p=typeof this.promoteId=="string"?this.promoteId:this.promoteId[s];p!=null&&(u=o.properties[p]),typeof u=="boolean"&&(u=Number(u))}return u}}function FN(i,o,s,u,p){return Un(i,(m,v)=>{const x=o instanceof th?o.get(v):null;return x&&x.evaluate?x.evaluate(s,u,p):x})}function YX(i,o){return o-i}rn(BN,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const NA=new Float32Array(262144),Rg=new Uint8Array(262144);function jN(i){let o=0;if(i.meshes)for(const s of i.meshes)o=Math.max(o,s.aabb.max[2]);if(i.children)for(const s of i.children)o=Math.max(o,jN(s));return o}function $N(i,o,s){if(i.meshes)for(const u of i.meshes)u.aabb.min[0]!==1/0&&s.insert(o,u.aabb.min[0],u.aabb.min[1],u.aabb.max[0],u.aabb.max[1]);if(i.children)for(const u of i.children)$N(u,o,s)}const UN=["","wall","door","roof","window","lamp","logo"];class VN{constructor(o){this.node=o,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.feature={type:"Point",id:o.id,geometry:[],properties:{height:jN(o)}}}getLocalBounds(){if(!this.node.meshes)return new Bo([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let o=0;const s=new Bo([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const u of this.node.meshes)this.node.lightMeshIndex!==o&&s.encapsulate(u.aabb),o++;this.aabb=s}return this.aabb}}class Yw{constructor(o,s,u,p,m,v){this.id=s,this.modelTraits|=Ty.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,u&&(this.modelTraits|=Ty.HasMapboxMeshFeatures),p&&(this.modelTraits|=Ty.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=m,this.dirty=!0,this.needsUpload=!1,this.nodesInfo=[];for(const x of o)this.nodesInfo.push(new VN(x)),$N(x,v.featureIndexArray.length,v.grid),v.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,v.bucketLayerIDs.length-1,0)}update(){console.log("Update 3D model bucket")}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(o){if(!this.needsUpload)return;const s=this.getNodesInfo();for(const u of s){const p=u.node;this.uploaded?this.updatePbrBuffer(p):MA(p,o,!0)}for(const u of s)$w(u.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(o){let s=!1;if(!o.meshes)return s;for(const u of o.meshes)u.pbrBuffer&&(u.pbrBuffer.updateData(u.featureArray),s=!0);return s}needsReEvaluation(o,s,u){const p=o.transform.projectionOptions,m=o.style.getBrightness(),v=this.brightness!==m;return!!(!this.uploaded||this.dirty||p.name!==this.projection.name||m_(u.paint.get("model-color").value,v)||m_(u.paint.get("model-color-mix-intensity").value,v)||m_(u.paint.get("model-roughness").value,v)||m_(u.paint.get("model-emissive-strength").value,v)||m_(u.paint.get("model-height-based-emissive-strength-multiplier").value,v))&&(this.projection=p,this.brightness=m,!0)}evaluateScale(o,s){if(o.transform.zoom===this.zoom)return;this.zoom=o.transform.zoom;const u=this.getNodesInfo(),p=this.id.canonical;for(const m of u){const v=m.feature;m.evaluatedScale=s.paint.get("model-scale").evaluate(v,{},p)}}evaluate(o){const s=this.getNodesInfo();for(const u of s){if(!u.node.meshes)continue;const p=u.feature,m=u.node.meshes&&u.node.meshes[0].featureData,v=u.evaluatedColor[2],x=u.evaluatedRMEA[2],T=this.id.canonical;if(u.hasTranslucentParts=!1,m){for(let S=0;S<UN.length;S++){const A=UN[S];A.length&&(p.properties.part=A);const I=o.paint.get("model-color").evaluate(p,{},T),z=o.paint.get("model-color-mix-intensity").evaluate(p,{},T);u.evaluatedColor[S]=[I.r,I.g,I.b,z],u.evaluatedRMEA[S][0]=o.paint.get("model-roughness").evaluate(p,{},T),u.evaluatedRMEA[S][2]=o.paint.get("model-emissive-strength").evaluate(p,{},T),u.evaluatedRMEA[S][3]=I.a,u.emissionHeightBasedParams[S]=o.paint.get("model-height-based-emissive-strength-multiplier").evaluate(p,{},T),!u.hasTranslucentParts&&I.a<1&&(u.hasTranslucentParts=!0)}delete p.properties.part,qX(u,v!==u.evaluatedColor[2]||x!==u.evaluatedRMEA[2],this.modelTraits)}else u.evaluatedRMEA[0][2]=o.paint.get("model-emissive-strength").evaluate(p,{},T);u.evaluatedScale=o.paint.get("model-scale").evaluate(p,{},T),this.updatePbrBuffer(u.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(o,s,u,p){const m=o.findDEMTileFor(u);if(m&&(m.tileID.canonical!==this.terrainTile||s!==this.terrainExaggeration)){if(m.dem&&m.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=m.tileID.overscaledZ;const v=py.create(o,u,m);if(!v)return;this.modelTraits&Ty.HasMapboxMeshFeatures&&this.updateDEM(o,v,u,p);for(const x of this.getNodesInfo()){const T=x.node;if(!T.footprint||!T.footprint.vertices||!T.footprint.vertices.length)continue;const S=T.footprint.vertices;let A=v.getElevationAt(S[0].x,S[0].y,!0,!0);for(let I=1;I<S.length;I++)A=Math.min(A,v.getElevationAt(S[I].x,S[I].y,!0,!0));T.elevation=A}}this.terrainTile=m.tileID.canonical,this.terrainExaggeration=s}}updateDEM(o,s,u,p){let m=s._dem._modifiedForSources[p];if(m===void 0&&(s._dem._modifiedForSources[p]=[],m=s._dem._modifiedForSources[p]),m.includes(u.canonical))return;const v=s._dem.dim;m.push(u.canonical);let x=!1;for(const T of this.getNodesInfo()){const S=T.node;if(!S.footprint||!S.footprint.grid)continue;const A=S.footprint.grid,I=s.tileCoordToPixel(A.min.x,A.min.y),z=s.tileCoordToPixel(A.max.x,A.max.y),V=Math.min(Math.min(v-z.y,I.x),Math.min(I.y,v-z.x));if(V<0)continue;const Y=Re(V,2,5);let X=Math.max(0,I.x-Y),ne=Math.max(0,I.y-Y),ae=Math.min(z.x+Y,v-1),ye=Math.min(z.y+Y,v-1);for(let Me=ne;Me<=ye;++Me)for(let $e=X;$e<=ae;++$e)Rg[Me*v+$e]=255;let xe=0,_e=0;for(let Me=0;Me<A.cellsY;++Me)for(let $e=0;$e<A.cellsX;++$e){if(!A.cells[Me*A.cellsX+$e])continue;const We=s.tileCoordToPixel(A.min.x+$e/A.xScale,A.min.y+Me/A.yScale),qe=s.tileCoordToPixel(A.min.x+($e+1)/A.xScale,A.min.y+(Me+1)/A.yScale);for(let rt=We.y;rt<=Math.min(qe.y+1,v-1);++rt)for(let Xe=We.x;Xe<=Math.min(qe.x+1,v-1);++Xe)Rg[rt*v+Xe]===255&&(Rg[rt*v+Xe]=0,xe+=s.getElevationAtPixel(Xe,rt),_e++)}const Ie=xe/_e;X=Math.max(1,I.x-Y),ne=Math.max(1,I.y-Y),ae=Math.min(z.x+Y,v-2),ye=Math.min(z.y+Y,v-2),x=!0;for(let Me=ne;Me<=ye;++Me)for(let $e=X;$e<=ae;++$e)Rg[Me*v+$e]===0&&(NA[Me*v+$e]=s._dem.set($e,Me,Ie));for(let Me=1;Me<Y;++Me){X=Math.max(1,I.x-Me),ne=Math.max(1,I.y-Me),ae=Math.min(z.x+Me,v-2),ye=Math.min(z.y+Me,v-2);for(let $e=ne;$e<=ye;++$e)for(let We=X;We<=ae;++We){const qe=$e*v+We;if(Rg[qe]===255){let rt=0,Xe=0,mt=-1,St=-1;for(let ht=-1;ht<=1;++ht)for(let wt=-1;wt<=1;++wt){const lt=($e+ht)*v+We+wt;if(Rg[lt]>=Me)continue;const xt=NA[lt],Gt=Math.abs(xt);Gt>Xe&&(rt=xt,Xe=Gt,mt=wt,St=ht)}if(Xe>.1){const ht=1-(Me+.5*Math.abs(mt*St))/Y;let wt=s._dem.get(We,$e)+rt*ht;const lt=s._dem.get(We+mt,$e+St),xt=s._dem.get(We-mt,$e-St,!0);(wt-lt)*(wt-xt)>0&&(wt=(lt+xt)/2),NA[qe]=s._dem.set(We,$e,wt),Rg[qe]=Me}}}}}x&&(s._demTile.needsDEMTextureUpload=!0,s._dem._timestamp=it.now())}getNodesInfo(){return this.nodesInfo}destroy(){const o=this.getNodesInfo();for(const s of o)$w(s.node),DA(s.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(o,s){if(s.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=s.updateTime;const u=s.getReplacementRegionsForTile(o.toUnwrapped()),p=this.getNodesInfo();for(let m=0;m<this.nodesInfo.length;m++){const v=p[m].node;p[m].hiddenByReplacement=!!v.footprint&&!u.find(x=>x.footprint===v.footprint)}}getHeightAtTileCoord(o,s){const u=this.getNodesInfo(),p=[];for(let m=0;m<this.nodesInfo.length;m++){const v=u[m],x=v.node.meshes[0];if(o<x.aabb.min[0]||s<x.aabb.min[1]||o>x.aabb.max[0]||s>x.aabb.max[1])continue;const T=(o-x.aabb.min[0])/(x.aabb.max[0]-x.aabb.min[0])*Mg|0,S=Math.min(63,(s-x.aabb.min[1])/(x.aabb.max[1]-x.aabb.min[1])*Mg|0)*Mg+Math.min(63,T);if(!(x.heightmap[S]<0&&v.node.footprint))return v.hiddenByReplacement?void 0:{height:x.heightmap[S],maxHeight:v.feature.properties.height,hidden:!1,verticalScale:v.evaluatedScale[2]};if(v.node.footprint.grid.query(new ve(o,s),new ve(o,s),p),p.length>0)return{height:void 0,maxHeight:v.feature.properties.height,hidden:v.hiddenByReplacement,verticalScale:v.evaluatedScale[2]}}}}function m_(i,o){return!i.isLightConstant&&o}function GX(i,o,s,u,p,m,v,x){let T=(61440&o|(61440&o)>>4)>>8,S=(3840&o|(3840&o)>>4)>>4,A=240&o|(240&o)>>4;s[3]>0&&(T=yr(T,255*s[0],s[3]),S=yr(S,255*s[1],s[3]),A=yr(A,255*s[2],s[3]));const I=T<<8|S,z=A<<8|Math.floor(255*u[3]),V=function(Me){const $e=Re(Me,0,2);return Math.min(Math.round(.5*$e*255),255)}(u[2])<<8|15*u[0]<<4|15*u[1],Y=Re(p[0],0,1),X=Re(p[1],0,1),ne=Re(p[2],0,1),ae=Re(p[3],0,1);let ye,xe,_e,Ie;if(Y!==X&&v!==m&&X!==Y){const Me=v-m;xe=1/(Me*(X-Y)),_e=-(m+Me*Y)/(Me*(X-Y));const $e=Re(p[4],-1,1);Ie=Math.pow(10,$e),ye=255*ne<<8|255*ae}else ye=65535,xe=0,_e=1,Ie=1;if(i.emplaceBack(I,z,V,ye,xe,_e,Ie),x){const Me=x.length;x.clear();for(let $e=0;$e<Me;$e++)x.emplaceBack(I,z,V,ye,xe,_e,Ie)}}function qX(i,o,s){const u=i.node;let p=0;const m=s&Ty.HasMeshoptCompression;for(const v of u.meshes){if(u.lights&&u.lightMeshIndex===p||!v.featureData)continue;v.featureArray=new dh,v.featureArray.reserve(v.featureData.length);let x=o;for(const T of v.featureData){const S=m?65535&T:T>>16&65535,A=m?T>>16&65535:65535&T,I=(15&A)<8?15&A:0,z=i.evaluatedRMEA[I],V=i.evaluatedColor[I],Y=i.emissionHeightBasedParams[I];let X;if(x&&I===2&&u.lights&&(X=new dh,X.resize(10*u.lights.length)),GX(v.featureArray,S,V,z,Y,v.aabb.min[2],v.aabb.max[2],X),X&&x){x=!1;const ne=u.meshes[u.lightMeshIndex];ne.featureArray=X,ne.featureArray._trim()}}v.featureArray._trim(),p++}}function HN(i,o,s,u){const p=1<<i.z;o.lat=Ln((u/Xt+i.y)/p),o.lng=yn((s/Xt+i.x)/p)}rn(Yw,"Tiled3dModelBucket",{omit:["layers"]}),rn(VN,"Tiled3dModelFeature");const ZX={circle:class extends ma{constructor(i,o,s){super(i,Jx,o,s)}createBucket(i){return new ri(i)}queryRadius(i){const o=i;return Bs("circle-radius",this,o)+Bs("circle-stroke-width",this,o)+_h(this.paint.get("circle-translate"))}queryIntersectsFeature(i,o,s,u,p,m,v,x){const T=Vv(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),S=this.paint.get("circle-radius").evaluate(o,s)+this.paint.get("circle-stroke-width").evaluate(o,s);return OO(i,u,m,v,x,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",T,S)}getProgramIds(){return["circle"]}getDefaultProgramParams(i,o){const s=PO(this);return{config:new ee(this,o),defines:s,overrideFog:!1}}},heatmap:class extends ma{createBucket(i){return new NO(i)}constructor(i,o,s){super(i,bZ,o,s),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=qv({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(i){return Bs("heatmap-radius",this,i)}queryIntersectsFeature(i,o,s,u,p,m,v,x){const T=this.paint.get("heatmap-radius").evaluate(o,s);return OO(i,u,m,v,x,!0,!0,new ve(0,0),T)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(i,o){return i==="heatmap"?{config:new ee(this,o),overrideFog:!1}:{}}},hillshade:class extends ma{constructor(i,o,s){super(i,_Z,o,s)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(i,o){return{overrideFog:!1}}},fill:class extends ma{constructor(i,o,s){super(i,OZ,o,s)}getProgramIds(){const i=this.paint.get("fill-pattern"),o=i&&i.constantOr(1),s=[o?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&s.push(o&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),s}getDefaultProgramParams(i,o){return{config:new ee(this,o),overrideFog:!1}}recalculate(i,o){super.recalculate(i,o);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new sA(i)}queryRadius(){return _h(this.paint.get("fill-translate"))}queryIntersectsFeature(i,o,s,u,p,m){return!i.queryGeometry.isAboveHorizon&&$a(Uv(i.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),u)}isTileClipped(){return!0}},"fill-extrusion":class extends ma{constructor(i,o,s){super(i,lK,o,s),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(i){return new vw(i)}queryRadius(){return _h(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return!0}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(i,o,s,u,p,m,v,x,T){const S=Vv(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),A=this.paint.get("fill-extrusion-height").evaluate(o,s),I=this.paint.get("fill-extrusion-base").evaluate(o,s),z=[0,0],V=x&&m.elevation,Y=m.elevation?m.elevation.exaggeration():1,X=i.tile.getBucket(this);if(V&&X instanceof vw){const _e=X.centroidVertexArray,Ie=T+1;Ie<_e.length&&(z[0]=_e.geta_centroid_pos0(Ie),z[1]=_e.geta_centroid_pos1(Ie))}if(z[0]===0&&z[1]===1)return!1;m.projection.name==="globe"&&(u=yL([u],[new ve(0,0),new ve(Xt,Xt)],i.tileID.canonical).map(_e=>_e.polygon).flat());const ne=V?x:null,[ae,ye]=function(_e,Ie,Me,$e,We,qe,rt,Xe,mt,St,ht){return _e.projection.name==="globe"?function(wt,lt,xt,Gt,At,dn,Jt,It,Bn,wn,ln){const Pt=[],Nn=[],hr=wt.projection.upVectorScale(ln,wt.center.lat,wt.worldSize).metersToTile,$n=[0,0,0,1],fr=[0,0,0,1],Kn=(or,lo,zr,Ur)=>{or[0]=lo,or[1]=zr,or[2]=Ur,or[3]=1},Sr=gL();xt>0&&(xt+=Sr),Gt+=Sr;for(const or of lt){const lo=[],zr=[];for(const Ur of or){const Gr=Ur.x+At.x,Br=Ur.y+At.y,ko=wt.projection.projectTilePoint(Gr,Br,ln),Qr=wt.projection.upVector(ln,Ur.x,Ur.y);let Yo=xt,wi=Gt;if(Jt){const ia=vL(Gr,Br,xt,Gt,Jt,It,Bn,wn);Yo+=ia.base,wi+=ia.top}xt!==0?Kn($n,ko.x+Qr[0]*hr*Yo,ko.y+Qr[1]*hr*Yo,ko.z+Qr[2]*hr*Yo):Kn($n,ko.x,ko.y,ko.z),Kn(fr,ko.x+Qr[0]*hr*wi,ko.y+Qr[1]*hr*wi,ko.z+Qr[2]*hr*wi),a.N.transformMat4($n,$n,dn),a.N.transformMat4(fr,fr,dn),lo.push(new my($n[0],$n[1],$n[2])),zr.push(new my(fr[0],fr[1],fr[2]))}Pt.push(lo),Nn.push(zr)}return[Pt,Nn]}(_e,Ie,Me,$e,We,qe,rt,Xe,mt,St,ht):rt?function(wt,lt,xt,Gt,At,dn,Jt,It,Bn){const wn=[],ln=[],Pt=[0,0,0,1];for(const Nn of wt){const hr=[],$n=[];for(const fr of Nn){const Kn=fr.x+Gt.x,Sr=fr.y+Gt.y,or=vL(Kn,Sr,lt,xt,dn,Jt,It,Bn);Pt[0]=Kn,Pt[1]=Sr,Pt[2]=or.base,Pt[3]=1,a.a7.transformMat4(Pt,Pt,At),Pt[3]=Math.max(Pt[3],1e-5);const lo=new my(Pt[0]/Pt[3],Pt[1]/Pt[3],Pt[2]/Pt[3]);Pt[0]=Kn,Pt[1]=Sr,Pt[2]=or.top,Pt[3]=1,a.a7.transformMat4(Pt,Pt,At),Pt[3]=Math.max(Pt[3],1e-5);const zr=new my(Pt[0]/Pt[3],Pt[1]/Pt[3],Pt[2]/Pt[3]);hr.push(lo),$n.push(zr)}wn.push(hr),ln.push($n)}return[wn,ln]}(Ie,Me,$e,We,qe,rt,Xe,mt,St):function(wt,lt,xt,Gt,At){const dn=[],Jt=[],It=At[8]*lt,Bn=At[9]*lt,wn=At[10]*lt,ln=At[11]*lt,Pt=At[8]*xt,Nn=At[9]*xt,hr=At[10]*xt,$n=At[11]*xt;for(const fr of wt){const Kn=[],Sr=[];for(const or of fr){const lo=or.x+Gt.x,zr=or.y+Gt.y,Ur=At[0]*lo+At[4]*zr+At[12],Gr=At[1]*lo+At[5]*zr+At[13],Br=At[2]*lo+At[6]*zr+At[14],ko=At[3]*lo+At[7]*zr+At[15],Qr=Ur+It,Yo=Gr+Bn,wi=Br+wn,ia=Math.max(ko+ln,1e-5),To=Ur+Pt,No=Gr+Nn,Hi=Br+hr,Wi=Math.max(ko+$n,1e-5);Kn.push(new my(Qr/ia,Yo/ia,wi/ia)),Sr.push(new my(To/Wi,No/Wi,Hi/Wi))}dn.push(Kn),Jt.push(Sr)}return[dn,Jt]}(Ie,Me,$e,We,qe)}(m,u,I,A,S,v,ne,z,Y,m.center.lat,i.tileID.canonical),xe=i.queryGeometry;return function(_e,Ie,Me){let $e=1/0;$a(Me,Ie)&&($e=bL(Me,Ie[0]));for(let We=0;We<Ie.length;We++){const qe=Ie[We],rt=_e[We];for(let Xe=0;Xe<qe.length-1;Xe++){const mt=qe[Xe],St=[mt,qe[Xe+1],rt[Xe+1],rt[Xe],mt];Sa(Me,St)&&($e=Math.min($e,bL(Me,St)))}}return $e!==1/0&&$e}(ae,ye,xe.isPointQuery()?xe.screenBounds:xe.screenGeometry)}},line:class extends ma{constructor(i,o,s){super(i,xL,o,s),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const o=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=o._styleExpression&&o._styleExpression.expression instanceof Yd,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(i,o){super.recalculate(i,o),this.paint._values["line-floorwidth"]=kL.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new uA(i)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(i,o){const s=SL(this);return{config:new ee(this,o),defines:s,overrideFog:!1}}queryRadius(i){const o=i,s=AL(Bs("line-width",this,o),Bs("line-gap-width",this,o)),u=Bs("line-offset",this,o);return s/2+Math.abs(u)+_h(this.paint.get("line-translate"))}queryIntersectsFeature(i,o,s,u,p,m){if(i.queryGeometry.isAboveHorizon)return!1;const v=Uv(i.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),x=i.pixelToTileUnitsFactor/2*AL(this.paint.get("line-width").evaluate(o,s),this.paint.get("line-gap-width").evaluate(o,s)),T=this.paint.get("line-offset").evaluate(o,s);return T&&(u=function(S,A){const I=[],z=new ve(0,0);for(let V=0;V<S.length;V++){const Y=S[V],X=[];for(let ne=0;ne<Y.length;ne++){const ae=Y[ne],ye=Y[ne+1],xe=ne===0?z:ae.sub(Y[ne-1])._unit()._perp(),_e=ne===Y.length-1?z:ye.sub(ae)._unit()._perp(),Ie=xe._add(_e)._unit();Ie._mult(1/(Ie.x*_e.x+Ie.y*_e.y)),X.push(Ie._mult(A)._add(ae))}I.push(X)}return I}(u,T*i.pixelToTileUnitsFactor)),function(S,A,I){for(let z=0;z<A.length;z++){const V=A[z];if(S.length>=3){for(let Y=0;Y<V.length;Y++)if(fl(S,V[Y]))return!0}if(Qc(S,V,I))return!0}return!1}(v,u,x)}isTileClipped(){return!0}},symbol:Lw,background:class extends ma{constructor(i,o,s){super(i,dX,o,s)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(i,o){return{overrideFog:!1}}},raster:fN,"raster-particle":pN,sky:class extends ma{constructor(i,o,s){super(i,vX,o,s),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="sky-gradient"?this._updateColorRamp():i!=="sky-atmosphere-sun"&&i!=="sky-atmosphere-halo-color"&&i!=="sky-atmosphere-color"&&i!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=qv({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(i){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const o=i.style.light.properties.get("position");return this._lightPosition.azimuthal!==o.azimuthal||this._lightPosition.polar!==o.polar}return!1}getCenter(i,o){if(this.paint.get("sky-type")==="atmosphere"){const u=this.paint.get("sky-atmosphere-sun"),p=!u,m=i.style.light,v=m.properties.get("position");return p&&m.properties.get("anchor")==="viewport"&&On("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),p?CA(v.azimuthal,90-v.polar,o):CA(u[0],90-u[1],o)}const s=this.paint.get("sky-gradient-center");return CA(s[0],90-s[1],o)}isSky(){return!0}markSkyboxValid(i){this._skyboxInvalidated=!1,this._lightPosition=i.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const i=this.paint.get("sky-type");return i==="atmosphere"?["skyboxCapture","skybox"]:i==="gradient"?["skyboxGradient"]:null}},slot:class extends ma{constructor(i,o,s){super(i,_X,o)}},model:class extends ma{constructor(i,o,s){super(i,MX,o,s),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(i){return new AA(i)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(i){return i instanceof Yw?Xt-1:0}queryIntersectsFeature(i,o,s,u,p,m){if(!this.modelManager)return!1;const v=this.modelManager,x=i.tile.getBucket(this);if(!(x&&x instanceof AA))return!1;const T=x;for(const S in T.instancesPerModel){const A=T.instancesPerModel[S];if(A.idToFeaturesIndex.hasOwnProperty(o.id)){const I=A.features[A.idToFeaturesIndex[o.id]],z=v.getModel(S,this.scope);if(!z)return!1;let V=a.a6.create();const Y=new Se(0,0),X=T.canonical;let ne=Number.MAX_VALUE;for(let ae=0;ae<I.instancedDataCount;++ae){const ye=16*(I.instancedDataOffset+ae),xe=A.instancedDataArray.float32,_e=[xe[ye+4],xe[ye+5],xe[ye+6]];HN(X,Y,xe[ye],0|xe[ye+1]),EN(V,z,m,Y,I.rotation,I.scale,_e,!1,!1,!1),m.projection.name==="globe"&&(V=kA(V,m));const Ie=a.a6.multiply([],m.projMatrix,V),Me=i.queryGeometry,$e=_N(Me.isPointQuery()?Me.screenBounds:Me.screenGeometry,m,Ie,z.aabb);$e!=null&&(ne=Math.min($e,ne))}return ne!==Number.MAX_VALUE&&ne}}return!1}_handleOverridablePaintPropertyUpdate(i,o,s){return!(!this.layout||o.isDataDriven()||s.isDataDriven()||i!=="model-color"&&i!=="model-color-mix-intensity"&&i!=="model-rotation"&&i!=="model-scale"&&i!=="model-translation"&&i!=="model-emissive-strength")}_isPropertyZoomDependent(i){const o=this._transitionablePaint._values[i];return o!=null&&o.value!=null&&o.value.expression!=null&&o.value.expression instanceof Xd}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}queryIntersectsMatchingFeature(i,o,s,u){const p=i.tile,m=p.getBucket(this);let v=null,x=Number.MAX_VALUE;if(!(m&&m instanceof Yw))return{queryFeature:v,intersectionZ:x};const T=m.getNodesInfo()[o];if(T.hiddenByReplacement||!T.node.meshes||!s.filter(new xo(p.tileID.overscaledZ),T.feature,p.tileID.canonical))return{queryFeature:v,intersectionZ:x};const S=T.node,A=u.calculatePosMatrix(p.tileID.toUnwrapped(),u.worldSize),I=T.evaluatedScale;let z=0;u.elevation&&S.elevation&&(z=S.elevation*u.elevation.exaggeration()),a.a6.translate(A,A,[(S.anchor?S.anchor[0]:0)*(I[0]-1),(S.anchor?S.anchor[1]:0)*(I[1]-1),z]),a.a6.scale(A,A,I),a.a6.multiply(A,A,S.matrix);const V=i.queryGeometry,Y=V.isPointQuery()?V.screenBounds:V.screenGeometry,X=function(ae){const ye=a.a6.multiply([],A,ae.matrix),xe=a.a6.multiply(ye,u.expandedFarZProjMatrix,ye);for(let _e=0;_e<ae.meshes.length;++_e){const Ie=ae.meshes[_e];if(_e===ae.lightMeshIndex)continue;const Me=_N(Y,u,xe,Ie.aabb);Me!=null&&(x=Math.min(Me,x))}if(ae.children)for(const _e of ae.children)X(_e)};if(X(S),x===Number.MAX_VALUE)return{queryFeature:v,intersectionZ:x};const ne=new Se(0,0);return HN(p.tileID.canonical,ne,T.node.anchor[0],T.node.anchor[1]),v={type:"Feature",geometry:{type:"Point",coordinates:[ne.lng,ne.lat]},properties:T.feature.properties,id:T.feature.id,state:{},layer:this.serialize()},{queryFeature:v,intersectionZ:x}}}},ar={read:function(i,o){return i.readFields(ar._readField,{header_length:0,x:0,y:0,z:0,layers:[]},o)},_readField:function(i,o,s){i===1?o.header_length=s.readFixed32():i===2?o.x=s.readVarint():i===3?o.y=s.readVarint():i===4?o.z=s.readVarint():i===5&&o.layers.push(ar.Layer.read(s,s.readVarint()+s.pos))},PixelFormat:{PIXEL_FORMAT_UNKNOWN:{value:0,options:{}},PIXEL_FORMAT_UINT32:{value:1,options:{}},PIXEL_FORMAT_UINT16:{value:2,options:{}},PIXEL_FORMAT_UINT8:{value:3,options:{}}},Filter:{}};ar.Filter.read=function(i,o){return i.readFields(ar.Filter._readField,{delta_filter:null,filter:null,zigzag_filter:null,bitshuffle_filter:null,byteshuffle_filter:null},o)},ar.Filter._readField=function(i,o,s){i===1?(o.delta_filter=ar.Filter.Delta.read(s,s.readVarint()+s.pos),o.filter="delta_filter"):i===2?(o.zigzag_filter=ar.Filter.Zigzag.read(s,s.readVarint()+s.pos),o.filter="zigzag_filter"):i===3?(o.bitshuffle_filter=ar.Filter.BitShuffle.read(s,s.readVarint()+s.pos),o.filter="bitshuffle_filter"):i===4&&(o.byteshuffle_filter=ar.Filter.ByteShuffle.read(s,s.readVarint()+s.pos),o.filter="byteshuffle_filter")},ar.Filter.Delta={},ar.Filter.Delta.read=function(i,o){return i.readFields(ar.Filter.Delta._readField,{block_size:0},o)},ar.Filter.Delta._readField=function(i,o,s){i===1&&(o.block_size=s.readVarint())},ar.Filter.Zigzag={},ar.Filter.Zigzag.read=function(i,o){return i.readFields(ar.Filter.Zigzag._readField,{},o)},ar.Filter.Zigzag._readField=function(i,o,s){},ar.Filter.BitShuffle={},ar.Filter.BitShuffle.read=function(i,o){return i.readFields(ar.Filter.BitShuffle._readField,{},o)},ar.Filter.BitShuffle._readField=function(i,o,s){},ar.Filter.ByteShuffle={},ar.Filter.ByteShuffle.read=function(i,o){return i.readFields(ar.Filter.ByteShuffle._readField,{},o)},ar.Filter.ByteShuffle._readField=function(i,o,s){},ar.Codec={},ar.Codec.read=function(i,o){return i.readFields(ar.Codec._readField,{gzip_data:null,codec:null,jpeg_image:null,webp_image:null,png_image:null},o)},ar.Codec._readField=function(i,o,s){i===1?(o.gzip_data=ar.Codec.GzipData.read(s,s.readVarint()+s.pos),o.codec="gzip_data"):i===2?(o.jpeg_image=ar.Codec.JpegImage.read(s,s.readVarint()+s.pos),o.codec="jpeg_image"):i===3?(o.webp_image=ar.Codec.WebpImage.read(s,s.readVarint()+s.pos),o.codec="webp_image"):i===4&&(o.png_image=ar.Codec.PngImage.read(s,s.readVarint()+s.pos),o.codec="png_image")},ar.Codec.GzipData={},ar.Codec.GzipData.read=function(i,o){return i.readFields(ar.Codec.GzipData._readField,{},o)},ar.Codec.GzipData._readField=function(i,o,s){},ar.Codec.JpegImage={},ar.Codec.JpegImage.read=function(i,o){return i.readFields(ar.Codec.JpegImage._readField,{},o)},ar.Codec.JpegImage._readField=function(i,o,s){},ar.Codec.WebpImage={},ar.Codec.WebpImage.read=function(i,o){return i.readFields(ar.Codec.WebpImage._readField,{},o)},ar.Codec.WebpImage._readField=function(i,o,s){},ar.Codec.PngImage={},ar.Codec.PngImage.read=function(i,o){return i.readFields(ar.Codec.PngImage._readField,{},o)},ar.Codec.PngImage._readField=function(i,o,s){},ar.DataIndexEntry={},ar.DataIndexEntry.read=function(i,o){return i.readFields(ar.DataIndexEntry._readField,{first_byte:0,last_byte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},o)},ar.DataIndexEntry._readField=function(i,o,s){i===1?o.first_byte=s.readFixed64():i===2?o.last_byte=s.readFixed64():i===3?o.filters.push(ar.Filter.read(s,s.readVarint()+s.pos)):i===4?o.codec=ar.Codec.read(s,s.readVarint()+s.pos):i===5?o.offset=s.readFloat():i===6?o.scale=s.readFloat():i===7&&o.bands.push(s.readString())},ar.Layer={},ar.Layer.read=function(i,o){return i.readFields(ar.Layer._readField,{version:0,name:"",units:"",tilesize:0,buffer:0,pixel_format:0,data_index:[]},o)},ar.Layer._readField=function(i,o,s){i===1?o.version=s.readVarint():i===2?o.name=s.readString():i===3?o.units=s.readString():i===4?o.tilesize=s.readVarint():i===5?o.buffer=s.readVarint():i===6?o.pixel_format=s.readVarint():i===7&&o.data_index.push(ar.DataIndexEntry.read(s,s.readVarint()+s.pos))};const iu={read:function(i,o){return i.readFields(iu._readField,{uint32_values:null,values:null,fixed32_values:null},o)},_readField:function(i,o,s){i===2?(o.uint32_values=iu.Uint32Values.read(s,s.readVarint()+s.pos),o.values="uint32_values"):i===3&&(o.fixed32_values=iu.Fixed32Values.read(s,s.readVarint()+s.pos),o.values="fixed32_values")},Uint32Values:{}};iu.Uint32Values.read=function(i,o){return i.readFields(iu.Uint32Values._readField,{values:[]},o)},iu.Uint32Values._readField=function(i,o,s){i===1&&(o.readValuesInto=function(u){if(u.type!==2)throw new Error(`Unsupported pbf type "${u.type}"`);const p=function(v){return v.type===2?v.readVarint()+v.pos:v.pos+1}(u),m=u.pos;return u.pos=p,function(v){u.pos=m;let x=0;for(;u.pos<p;){const T=u.readVarint();v[x++]=T}return v}}(s))},iu.Fixed32Values={},iu.Fixed32Values.read=function(i,o){return i.readFields(iu.Fixed32Values._readField,{values:[]},o)},iu.Fixed32Values._readField=function(i,o,s){throw new Error("Not implemented")};/**
 * tiny-lru
 *
 * @copyright 2023 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 11.2.5
 */class KX{constructor(o=0,s=0,u=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=o,this.resetTtl=u,this.size=0,this.ttl=s}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(o){if(this.has(o)){const s=this.items[o];delete this.items[o],this.size--,s.prev!==null&&(s.prev.next=s.next),s.next!==null&&(s.next.prev=s.prev),this.first===s&&(this.first=s.next),this.last===s&&(this.last=s.prev)}return this}entries(o=this.keys()){return o.map(s=>[s,this.get(s)])}evict(o=!1){if(o||this.size>0){const s=this.first;delete this.items[s.key],--this.size==0?(this.first=null,this.last=null):(this.first=s.next,this.first.prev=null)}return this}expiresAt(o){let s;return this.has(o)&&(s=this.items[o].expiry),s}get(o){let s;if(this.has(o)){const u=this.items[o];this.ttl>0&&u.expiry<=Date.now()?this.delete(o):(s=u.value,this.set(o,s,!0))}return s}has(o){return o in this.items}keys(){const o=[];let s=this.first;for(;s!==null;)o.push(s.key),s=s.next;return o}set(o,s,u=!1,p=this.resetTtl){let m;if(u||this.has(o)){if(m=this.items[o],m.value=s,u===!1&&p&&(m.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.last!==m){const v=this.last,x=m.next,T=m.prev;this.first===m&&(this.first=m.next),m.next=null,m.prev=this.last,v.next=m,T!==null&&(T.next=x),x!==null&&(x.prev=T)}}else this.max>0&&this.size===this.max&&this.evict(!0),m=this.items[o]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:o,prev:this.last,next:null,value:s},++this.size==1?this.first=m:this.last.next=m;return this.last=m,this}values(o=this.keys()){return o.map(s=>this.get(s))}}function XX(i,o){if(o.length!==4)throw new Error(`Expected data of dimension 4 but got ${o.length}.`);let s=o[3];for(let u=2;u>=1;u--){const p=u===1?1:0,m=u===2?1:0;for(let v=0;v<o[0];v++){const x=o[1]*v;for(let T=p;T<o[1];T++){const S=o[2]*(T+x);for(let A=m;A<o[2];A++){const I=o[3]*(A+S);for(let z=0;z<o[3];z++){const V=I+z;i[V]+=i[V-s]}}}}s*=o[u]}return i}function QX(i){for(let o=0,s=i.length;o<s;o++)i[o]=i[o]>>>1^-(1&i[o]);return i}function JX(i,o){switch(o){case"uint32":return i;case"uint16":for(let s=0;s<i.length;s+=2){const u=i[s],p=i[s+1];i[s]=(240&u)>>4|(61440&u)>>8|(240&p)<<4|61440&p,i[s+1]=15&u|(3840&u)>>4|(15&p)<<8|(3840&p)<<4}return i;case"uint8":for(let s=0;s<i.length;s+=4){const u=i[s],p=i[s+1],m=i[s+2],v=i[s+3];i[s+0]=(192&u)>>6|(192&p)>>4|(192&m)>>2|192&v,i[s+1]=(48&u)>>4|(48&p)>>2|48&m|(48&v)<<2,i[s+2]=(12&u)>>2|12&p|(12&m)<<2|(12&v)<<4,i[s+3]=3&u|(3&p)<<2|(3&m)<<4|(3&v)<<6}return i;default:throw new Error(`Invalid pixel format, "${o}"`)}}class lp extends Error{constructor(o){super(o),this.name="MRTError"}}var bl=Uint8Array,Ay=Uint16Array,eQ=Int32Array,WN=new bl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),YN=new bl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),tQ=new bl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),GN=function(i,o){for(var s=new Ay(31),u=0;u<31;++u)s[u]=o+=1<<i[u-1];var p=new eQ(s[30]);for(u=1;u<30;++u)for(var m=s[u];m<s[u+1];++m)p[m]=m-s[u]<<5|u;return{b:s,r:p}},qN=GN(WN,2),ZN=qN.b,nQ=qN.r;ZN[28]=258,nQ[258]=28;for(var rQ=GN(YN,0).b,zA=new Ay(32768),oi=0;oi<32768;++oi){var My=(43690&oi)>>1|(21845&oi)<<1;zA[oi]=((65280&(My=(61680&(My=(52428&My)>>2|(13107&My)<<2))>>4|(3855&My)<<4))>>8|(255&My)<<8)>>1}var g_=function(i,o,s){for(var u=i.length,p=0,m=new Ay(o);p<u;++p)i[p]&&++m[i[p]-1];var v,x=new Ay(o);for(p=1;p<o;++p)x[p]=x[p-1]+m[p-1]<<1;if(s){v=new Ay(1<<o);var T=15-o;for(p=0;p<u;++p)if(i[p])for(var S=p<<4|i[p],A=o-i[p],I=x[i[p]-1]++<<A,z=I|(1<<A)-1;I<=z;++I)v[zA[I]>>T]=S}else for(v=new Ay(u),p=0;p<u;++p)i[p]&&(v[p]=zA[x[i[p]-1]++]>>15-i[p]);return v},y_=new bl(288);for(oi=0;oi<144;++oi)y_[oi]=8;for(oi=144;oi<256;++oi)y_[oi]=9;for(oi=256;oi<280;++oi)y_[oi]=7;for(oi=280;oi<288;++oi)y_[oi]=8;var KN=new bl(32);for(oi=0;oi<32;++oi)KN[oi]=5;var oQ=g_(y_,9,1),iQ=g_(KN,5,1),BA=function(i){for(var o=i[0],s=1;s<i.length;++s)i[s]>o&&(o=i[s]);return o},au=function(i,o,s){var u=o/8|0;return(i[u]|i[u+1]<<8)>>(7&o)&s},FA=function(i,o){var s=o/8|0;return(i[s]|i[s+1]<<8|i[s+2]<<16)>>(7&o)},aQ=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],su=function(i,o,s){var u=new Error(o||aQ[i]);if(u.code=i,Error.captureStackTrace&&Error.captureStackTrace(u,su),!s)throw u;return u},sQ=new bl(0),lQ=typeof TextDecoder<"u"&&new TextDecoder;try{lQ.decode(sQ,{stream:!0})}catch{}const cQ={gzip_data:"gzip"},uQ={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},dQ={uint32:1,uint16:2,uint8:4},hQ={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};class XN{constructor(o=1){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=o}getLayer(o){return this.layers[o]}getHeaderLength(o){const s=new Uint8Array(o),u=new DataView(o);if(s[0]!==13)throw new lp("File is not a valid MRT.");return u.getUint32(1,!0)}parseHeader(o){const s=new Uint8Array(o),u=this.getHeaderLength(o);if(s.length<u)throw new lp(`Expected header with length >= ${u} but got buffer of length ${s.length}`);const p=new vy(s.subarray(0,u)),m=ar.read(p);if(!isNaN(this.x)&&(this.x!==m.x||this.y!==m.y||this.z!==m.z))throw new lp(`Invalid attempt to parse header ${m.z}/${m.x}/${m.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=m.x,this.y=m.y,this.z=m.z;for(const v of m.layers)this.layers[v.name]=new fQ(v,{cacheSize:this._cacheSize});return this}createDecodingTask(o){const s=[],u=this.getLayer(o.layerName);for(let p=0;p<u.dataIndex.length;p++){const m=u.dataIndex[p],v=m.first_byte-o.firstByte,x=m.last_byte+1-o.firstByte;if(p<o.firstBlock||p>o.lastBlock||u._blocksInProgress.has(p))continue;const T={layerName:u.name,firstByte:v,lastByte:x,pixelFormat:u.pixelFormat,blockIndex:p,blockShape:[m.bands.length].concat(u.bandShape),buffer:u.buffer,codec:m.codec.codec,filters:m.filters.map(S=>S.filter)};u._blocksInProgress.add(p),s.push(T)}return new QN(s,()=>{s.forEach(p=>u._blocksInProgress.delete(p.blockIndex))},(p,m)=>{if(s.forEach(v=>u._blocksInProgress.delete(v.blockIndex)),p)throw p;m.forEach(v=>{this.getLayer(v.layerName).processDecodedData(v)})})}}class fQ{constructor({version:o,name:s,units:u,tilesize:p,pixel_format:m,buffer:v,data_index:x},T){if(this.version=o,this.version!==1)throw new lp(`Cannot parse raster layer encoded with MRT version ${o}`);this.name=s,this.units=u,this.tileSize=p,this.buffer=v,this.pixelFormat=uQ[m],this.dataIndex=x,this.bandShape=[p+2*v,p+2*v,dQ[this.pixelFormat]],this._decodedBlocks=function(S=1e3,A=0,I=!1){if(isNaN(S)||S<0)throw new TypeError("Invalid max value");if(isNaN(A)||A<0)throw new TypeError("Invalid ttl value");if(typeof I!="boolean")throw new TypeError("Invalid resetTtl value");return new KX(S,A,I)}(T?T.cacheSize:5),this._blocksInProgress=new Set}processDecodedData(o){const s=o.blockIndex.toString();this._decodedBlocks.get(s)||this._decodedBlocks.set(s,o.data)}getBlockForBand(o){let s=0;switch(typeof o){case"string":for(const[u,p]of this.dataIndex.entries()){for(const[m,v]of p.bands.entries())if(v===o)return{bandIndex:s+m,blockIndex:u,blockBandIndex:m};s+=p.bands.length}break;case"number":for(const[u,p]of this.dataIndex.entries()){if(o>=s&&o<s+p.bands.length)return{bandIndex:o,blockIndex:u,blockBandIndex:o-s};s+=p.bands.length}break;default:throw new lp(`Invalid band \`${JSON.stringify(o)}\`. Expected string or integer.`)}throw new lp(`Band not found: ${JSON.stringify(o)}`)}getDataRange(o){let s=1/0,u=-1/0,p=1/0,m=-1/0;for(const v of o){const{blockIndex:x}=this.getBlockForBand(v);if(x<0)throw new lp(`Invalid band: ${JSON.stringify(v)}`);const T=this.dataIndex[x];p=Math.min(p,x),m=Math.max(m,x),s=Math.min(s,T.first_byte),u=Math.max(u,T.last_byte)}return{layerName:this.name,firstByte:s,lastByte:u,firstBlock:p,lastBlock:m}}hasBand(o){const{blockIndex:s}=this.getBlockForBand(o);return s>=0}hasDataForBand(o){const{blockIndex:s}=this.getBlockForBand(o);return s>=0&&!!this._decodedBlocks.get(s.toString())}getBandView(o){const{blockIndex:s,blockBandIndex:u}=this.getBlockForBand(o),p=this._decodedBlocks.get(s.toString());if(!p)throw new lp(`Data for band ${JSON.stringify(o)} of layer "${this.name}" not decoded.`);const m=this.dataIndex[s],v=this.bandShape.reduce((S,A)=>S*A,1),x=u*v,T=p.subarray(x,x+v);return{data:T,bytes:new Uint8Array(T.buffer).subarray(T.byteOffset,T.byteOffset+T.byteLength),tileSize:this.tileSize,buffer:this.buffer,offset:m.offset,scale:m.scale}}}class QN{constructor(o,s,u){this.tasks=o,this._onCancel=s,this._onComplete=u,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(o,s){this._finalized||(this._onComplete(o,s),this._finalized=!0)}}XN.performDecoding=function(i,o){return Promise.all(o.tasks.map(s=>{const{layerName:u,firstByte:p,lastByte:m,pixelFormat:v,blockShape:x,blockIndex:T,filters:S,codec:A}=s,I=new Uint8Array(i).subarray(p,m+1),z=new Uint32Array(x[0]*x[1]*x[2]);let V;if(A!=="gzip_data")throw new Error(`Unhandled codec: ${A}`);return V=function(Y,X){if(!globalThis.DecompressionStream&&X==="gzip_data")return Promise.resolve(((xe=function(Me){Me[0]==31&&Me[1]==139&&Me[2]==8||su(6,"invalid gzip data");var $e=Me[3],We=10;4&$e&&(We+=2+(Me[10]|Me[11]<<8));for(var qe=($e>>3&1)+($e>>4&1);qe>0;qe-=!Me[We++]);return We+(2&$e)}(ye=Y))+8>ye.length&&su(6,"invalid gzip data"),function(Me,$e,We,qe){var rt=Me.length;if(!rt||$e.f&&!$e.l)return We||new bl(0);var Xe=!We,mt=Xe||$e.i!=2,St=$e.i;Xe&&(We=new bl(3*rt));var ht=function(es){var Ua=We.length;if(es>Ua){var vl=new bl(Math.max(2*Ua,es));vl.set(We),We=vl}},wt=$e.f||0,lt=$e.p||0,xt=$e.b||0,Gt=$e.l,At=$e.d,dn=$e.m,Jt=$e.n,It=8*rt;do{if(!Gt){wt=au(Me,lt,1);var Bn=au(Me,lt+1,3);if(lt+=3,!Bn){var wn=Me[(zr=4+((lt+7)/8|0))-4]|Me[zr-3]<<8,ln=zr+wn;if(ln>rt){St&&su(0);break}mt&&ht(xt+wn),We.set(Me.subarray(zr,ln),xt),$e.b=xt+=wn,$e.p=lt=8*ln,$e.f=wt;continue}if(Bn==1)Gt=oQ,At=iQ,dn=9,Jt=5;else if(Bn==2){var Pt=au(Me,lt,31)+257,Nn=au(Me,lt+10,15)+4,hr=Pt+au(Me,lt+5,31)+1;lt+=14;for(var $n=new bl(hr),fr=new bl(19),Kn=0;Kn<Nn;++Kn)fr[tQ[Kn]]=au(Me,lt+3*Kn,7);lt+=3*Nn;var Sr=BA(fr),or=(1<<Sr)-1,lo=g_(fr,Sr,1);for(Kn=0;Kn<hr;){var zr,Ur=lo[au(Me,lt,or)];if(lt+=15&Ur,(zr=Ur>>4)<16)$n[Kn++]=zr;else{var Gr=0,Br=0;for(zr==16?(Br=3+au(Me,lt,3),lt+=2,Gr=$n[Kn-1]):zr==17?(Br=3+au(Me,lt,7),lt+=3):zr==18&&(Br=11+au(Me,lt,127),lt+=7);Br--;)$n[Kn++]=Gr}}var ko=$n.subarray(0,Pt),Qr=$n.subarray(Pt);dn=BA(ko),Jt=BA(Qr),Gt=g_(ko,dn,1),At=g_(Qr,Jt,1)}else su(1);if(lt>It){St&&su(0);break}}mt&&ht(xt+131072);for(var Yo=(1<<dn)-1,wi=(1<<Jt)-1,ia=lt;;ia=lt){var To=(Gr=Gt[FA(Me,lt)&Yo])>>4;if((lt+=15&Gr)>It){St&&su(0);break}if(Gr||su(2),To<256)We[xt++]=To;else{if(To==256){ia=lt,Gt=null;break}var No=To-254;To>264&&(No=au(Me,lt,(1<<(Yi=WN[Kn=To-257]))-1)+ZN[Kn],lt+=Yi);var Hi=At[FA(Me,lt)&wi],Wi=Hi>>4;if(Hi||su(3),lt+=15&Hi,Qr=rQ[Wi],Wi>3){var Yi=YN[Wi];Qr+=FA(Me,lt)&(1<<Yi)-1,lt+=Yi}if(lt>It){St&&su(0);break}mt&&ht(xt+131072);var bo=xt+No;if(xt<Qr){var js=0-Qr,cp=Math.min(Qr,bo);for(js+xt<0&&su(3);xt<cp;++xt)We[xt]=qe[js+xt]}for(;xt<bo;++xt)We[xt]=We[xt-Qr]}}$e.l=Gt,$e.p=ia,$e.b=xt,$e.f=wt,Gt&&(wt=1,$e.m=dn,$e.d=At,$e.n=Jt)}while(!wt);return xt!=We.length&&Xe?function(es,Ua,vl){return(Ua==null||Ua<0)&&(Ua=0),(vl==null||vl>es.length)&&(vl=es.length),new bl(es.subarray(Ua,vl))}(We,0,xt):We.subarray(0,xt)}(ye.subarray(xe,-8),{i:2},new bl(((ne=ye)[(ae=ne.length)-4]|ne[ae-3]<<8|ne[ae-2]<<16|ne[ae-1]<<24)>>>0),void 0)));var ne,ae,ye,xe;const _e=cQ[X];if(!_e)throw new Error(`Unhandled codec: ${X}`);const Ie=new globalThis.DecompressionStream(_e);return new Response(new Blob([Y]).stream().pipeThrough(Ie)).arrayBuffer().then(Me=>new Uint8Array(Me))}(I,A).then(Y=>{const X=iu.read(new vy(Y));if(X.values==="uint32_values")return X.uint32_values.readValuesInto(z),new hQ[v](z.buffer);throw new Error(`Unhandled numeric data "${X.values}"`)}),V.then(Y=>{for(let X=S.length-1;X>=0;X--)switch(S[X]){case"delta_filter":XX(Y,x);break;case"zigzag_filter":QX(Y);break;case"bitshuffle_filter":JX(Y,v);break;default:throw new Error(`Unhandled filter "${S[X]}"`)}return{layerName:u,blockIndex:T,data:Y}}).catch(Y=>{throw Y})}))},rn(QN,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]});const JN=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class jA{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,u]=new Uint8Array(o,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=u>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const m=JN[15&u];if(!m)throw new Error("Unrecognized array type.");const[v]=new Uint16Array(o,2,1),[x]=new Uint32Array(o,4,1);return new jA(x,v,m,o)}constructor(o,s=64,u=Float64Array,p){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=u,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const m=JN.indexOf(this.ArrayType),v=2*o*this.ArrayType.BYTES_PER_ELEMENT,x=o*this.IndexArrayType.BYTES_PER_ELEMENT,T=(8-x%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${u}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+x+T,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+v+x+T),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+x+T,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=o)}add(o,s){const u=this._pos>>1;return this.ids[u]=u,this.coords[this._pos++]=o,this.coords[this._pos++]=s,u}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return $A(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,s,u,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:v,nodeSize:x}=this,T=[0,m.length-1,0],S=[];for(;T.length;){const A=T.pop()||0,I=T.pop()||0,z=T.pop()||0;if(I-z<=x){for(let ne=z;ne<=I;ne++){const ae=v[2*ne],ye=v[2*ne+1];ae>=o&&ae<=u&&ye>=s&&ye<=p&&S.push(m[ne])}continue}const V=z+I>>1,Y=v[2*V],X=v[2*V+1];Y>=o&&Y<=u&&X>=s&&X<=p&&S.push(m[V]),(A===0?o<=Y:s<=X)&&(T.push(z),T.push(V-1),T.push(1-A)),(A===0?u>=Y:p>=X)&&(T.push(V+1),T.push(I),T.push(1-A))}return S}within(o,s,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:m,nodeSize:v}=this,x=[0,p.length-1,0],T=[],S=u*u;for(;x.length;){const A=x.pop()||0,I=x.pop()||0,z=x.pop()||0;if(I-z<=v){for(let ne=z;ne<=I;ne++)tz(m[2*ne],m[2*ne+1],o,s)<=S&&T.push(p[ne]);continue}const V=z+I>>1,Y=m[2*V],X=m[2*V+1];tz(Y,X,o,s)<=S&&T.push(p[V]),(A===0?o-u<=Y:s-u<=X)&&(x.push(z),x.push(V-1),x.push(1-A)),(A===0?o+u>=Y:s+u>=X)&&(x.push(V+1),x.push(I),x.push(1-A))}return T}}function $A(i,o,s,u,p,m){if(p-u<=s)return;const v=u+p>>1;ez(i,o,v,u,p,m),$A(i,o,s,u,v-1,1-m),$A(i,o,s,v+1,p,1-m)}function ez(i,o,s,u,p,m){for(;p>u;){if(p-u>600){const S=p-u+1,A=s-u+1,I=Math.log(S),z=.5*Math.exp(2*I/3),V=.5*Math.sqrt(I*z*(S-z)/S)*(A-S/2<0?-1:1);ez(i,o,s,Math.max(u,Math.floor(s-A*z/S+V)),Math.min(p,Math.floor(s+(S-A)*z/S+V)),m)}const v=o[2*s+m];let x=u,T=p;for(b_(i,o,u,s),o[2*p+m]>v&&b_(i,o,u,p);x<T;){for(b_(i,o,x,T),x++,T--;o[2*x+m]<v;)x++;for(;o[2*T+m]>v;)T--}o[2*u+m]===v?b_(i,o,u,T):(T++,b_(i,o,T,p)),T<=s&&(u=T+1),s<=T&&(p=T-1)}}function b_(i,o,s,u){UA(i,s,u),UA(o,2*s,2*u),UA(o,2*s+1,2*u+1)}function UA(i,o,s){const u=i[o];i[o]=i[s],i[s]=u}function tz(i,o,s,u){const p=i-s,m=o-u;return p*p+m*m}a.$=oN,a.A=Nf,a.B=G0,a.C=xr,a.D=et,a.E=Su,a.F=wo,a.G=$t,a.H=class{constructor(i){this.specification=i}possiblyEvaluate(i,o){return hn(i.expression.evaluate(o))}interpolate(i,o,s){return{x:yr(i.x,o.x,s),y:yr(i.y,o.y,s),z:yr(i.z,o.z,s),azimuthal:yr(i.azimuthal,o.azimuthal,s),polar:yr(i.polar,o.polar,s)}}},a.I=gA,a.J=cl,a.K=xo,a.L=Jn,a.M=class{constructor(i,o,s,u){this.id=i,this.position=o!=null?new Se(o[0],o[1]):new Se(0,0),this.orientation=s??[0,0,0],this.nodes=u,this.uploaded=!1,this.aabb=new Bo([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(i,o){if(a.a6.multiply(i.matrix,o,i.matrix),i.meshes)for(const s of i.meshes){const u=Bo.applyTransform(s.aabb,i.matrix);this.aabb.encapsulate(u)}if(i.children)for(const s of i.children)this._applyTransformations(s,i.matrix)}computeBoundsAndApplyParent(){const i=a.a6.identity([]);for(const o of this.nodes)this._applyTransformations(o,i)}computeModelMatrix(i,o,s,u,p,m,v=!1){EN(this.matrix,this,i.transform,this.position,o,s,u,p,m,v)}upload(i){if(!this.uploaded){for(const o of this.nodes)MA(o,i);for(const o of this.nodes)$w(o);this.uploaded=!0}}destroy(){for(const i of this.nodes)DA(i)}},a.O=bt,a.P=ve,a.Q=th,a.R=tr,a.S=Jf,a.T=SA,a.U=yr,a.V=Xt,a.W=N0,a.X=class{constructor(i){this.specification=i}possiblyEvaluate(i,o){return function([s,u]){const p=hn([1,s,u]);return{x:p.x,y:p.y,z:p.z}}(i.expression.evaluate(o))}interpolate(i,o,s){return{x:yr(i.x,o.x,s),y:yr(i.y,o.y,s),z:yr(i.z,o.z,s)}}},a.Y=function(i,o,s=0,u=!0){const p=new ve(s,s),m=i.sub(p),v=o.add(p),x=[m,new ve(v.x,m.y),v,new ve(m.x,v.y)];return u&&x.push(m.clone()),x},a.Z=Xd,a._=function(i,o){const s=[];for(let u=0;u<i.length;u++){const p=Lt(u-1,-1,i.length-1),m=Lt(u+1,-1,i.length-1),v=i[u],x=i[m],T=i[p].sub(v).unit(),S=x.sub(v).unit(),A=S.angleWithSep(T.x,T.y),I=T.add(S).unit().mult(-1*o/Math.sin(A/2));s.push(v.add(I))}return s},a.a=gm,a.a$=function(i){const o=[];for(const s in i)o.push(i[s]);return o},a.a0=jv,a.a1=function(i,o,s=0){return a.N.fromValues(((o.x-s)*i.scale-i.x)*Xt,(o.y*i.scale-i.y)*Xt,lr(o.z,o.y))},a.a2=Wk,a.a3=wL,a.a4=function(i){let o=1/0,s=1/0,u=-1/0,p=-1/0;for(const m of i)o=Math.min(o,m.x),s=Math.min(s,m.y),u=Math.max(u,m.x),p=Math.max(p,m.y);return{min:new ve(o,s),max:new ve(u,p)}},a.a5=In,a.a8=fl,a.a9=br,a.aA=Y0,a.aB=Po,a.aC=Dt,a.aD=xg,a.aE=Ow,a.aF=function(){Ta.isLoading()||Ta.isLoaded()||ll()!=="deferred"||Bf()},a.aG=ja,a.aH=Oo,a.aI=zN,a.aJ=go,a.aK=uA,a.aL=sA,a.aM=Qo,a.aN=bs,a.aO=Wf,a.aP=TO,a.aQ=hw,a.aR=TA,a.aS=function(i,o){const s=Jf(o.zoom);if(s===0)return nd(i);const u=iw(i),p=Zk(u),m=In(u.getWest())*o.worldSize,v=In(u.getEast())*o.worldSize,x=xn(u.getNorth())*o.worldSize,T=xn(u.getSouth())*o.worldSize,S=[m,x,0],A=[v,x,0],I=[m,T,0],z=[v,T,0],V=a.a6.invert([],o.globeMatrix);return a.N.transformMat4(S,S,V),a.N.transformMat4(A,A,V),a.N.transformMat4(I,I,V),a.N.transformMat4(z,z,V),p[0]=Sh(p[0],I,s),p[1]=Sh(p[1],z,s),p[2]=Sh(p[2],A,s),p[3]=Sh(p[3],S,s),Bo.fromPoints(p)},a.aT=sw,a.aU=Gv,a.aV=Sh,a.aW=ga,a.aX=lZ,a.aY=nt,a.aZ=XN,a.a_=Je,a.aa=Re,a.ab=be,a.ac=function(i,o){const s={};for(let u=0;u<o.length;u++){const p=o[u];p in i&&(s[p]=i[p])}return s},a.ad=Le,a.ae=xn,a.af=class{constructor(i){this.entries={},this.scheduler=i}request(i,o,s,u){const p=this.entries[i]=this.entries[i]||{callbacks:[]};if(p.result){const[m,v]=p.result;return this.scheduler?this.scheduler.add(()=>{u(m,v)},o):u(m,v),()=>{}}return p.callbacks.push(u),p.cancel||(p.cancel=s((m,v)=>{p.result=[m,v];for(const x of p.callbacks)this.scheduler?this.scheduler.add(()=>{x(m,v)},o):x(m,v);setTimeout(()=>delete this.entries[i],3e3)})),()=>{p.result||(p.callbacks=p.callbacks.filter(m=>m!==u),p.callbacks.length||(p.cancel(),delete this.entries[i]))}}},a.ag=fg,a.ah=function(i,o,s){const u=JSON.stringify(i.request);return i.data&&(this.deduped.entries[u]={result:[null,i.data]}),this.deduped.request(u,{type:"parseTile",isSymbolTile:i.isSymbolTile,zoom:i.tileZoom},p=>{const m=Je(i.request,(v,x,T,S)=>{v?p(v):x&&p(null,{vectorTile:s?void 0:new lA(new vy(x)),rawData:x,cacheControl:T,expires:S})});return()=>{m.cancel(),p()}},o)},a.ai=function(i){Cr++,Cr>jt&&(i.getActor().send("enforceCacheSizeLimit",tt),Cr=0)},a.aj=Xn,a.ak=ft,a.al=function(i){return i<=1?1:Math.pow(2,Math.floor(Math.log(i)/Math.LN2))},a.am=yt,a.an=fN,a.ao=pN,a.ap=hN,a.aq=function(i,o){const s=document.createElement("video");s.muted=!0,s.onloadstart=function(){o(null,s)};for(let u=0;u<i.length;u++){const p=document.createElement("source");Et(i[u])||(s.crossOrigin="Anonymous"),p.src=i[u],s.appendChild(p)}return{cancel:()=>{}}},a.ar=Nw,a.as=i_,a.at=yn,a.au=Ln,a.av=ul,a.aw=ci,a.ax=So,a.ay=Yr,a.az=Kc,a.b=Rc,a.b$=ig,a.b0=function(i,o){const s=[];for(const u in i)u in o||s.push(u);return s},a.b1=Ct,a.b2=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.b3=function(i,o){const{x:s,y:u}=i.point,p=DO(s,u,i.worldSize/i._pixelsPerMercatorPixel,0,0);return a.a6.multiply(p,p,Kk(nd(o)))},a.b5=gy,a.b6=yl,a.b7=_w,a.b8=function(i,o,s,u,p){const m=5*o+2;i.float32[m+0]=s,i.float32[m+1]=u,i.float32[m+2]=p},a.b9=Pw,a.bA=Fw,a.bB=mN,a.bC=function(i){const o=mN(i,!0);return a.b4.invert([],[o[0],o[1],o[4],o[5]])},a.bD=Yk,a.bE=function(i){const{x:o,y:s}=i.point,{lng:u,lat:p}=i._center;return DO(o,s,i.worldSize,u,p)},a.bF=Ue,a.bG=Ee,a.bH=function(i){const o=Math.round((i+45+360)%360/90)%4;return Ge[o]},a.bI=45,a.bJ=Zt,a.bK=b,a.bL=oc,a.bM=Zf,a.bN=$i,a.bO=qf,a.bP=g,a.bQ=function(i,o,s){const u=Math.sqrt(i*i+o*o+s*s),p=u>0?Math.acos(s/u)*je:0;let m=i!==0||o!==0?Math.atan2(-o,-i)*je+90:0;return m<0&&(m+=360),[u,m,p]},a.bR=qn,a.bS=Bo,a.bT=hn,a.bU=function(i){return[Math.pow(i[0],1/2.2),Math.pow(i[1],1/2.2),Math.pow(i[2],1/2.2)]},a.bV=function(i){return i({pluginStatus:Ba,pluginURL:na}),sg.on("pluginStateChange",i),i},a.bW=Sy,a.bX=Uw,a.bY=xy,a.bZ=yA,a.b_=sn,a.ba=GL,a.bb=Sa,a.bc=ya,a.bd=eN,a.be=vA,a.bf=mA,a.bg=jA,a.bh=Lt,a.bj=Be,a.bk=we,a.bl=on,a.bm=function(i,o,s){i[4*o+0]=s[0],i[4*o+1]=s[1],i[4*o+2]=s[2],i[4*o+3]=s[3]},a.bn=Se,a.bo=cN,a.bp=gt,a.bq=Gk,a.br=gN,a.bs=Ye,a.bt=kO,a.bu=function(i,o,s,u,p,m,v,x,T){if(T.name==="globe")return kO(i,o,new Ye(s,u,p),!1);const S=i_({z:s,x:u,y:p},T);return new Bo([(m+S.x/S.scale)*o,o*(S.y/S.scale),v],[(m+S.x2/S.scale)*o,o*(S.y2/S.scale),x])},a.bv=function(i,o,s){let u=0;for(let p=0;p<2;++p){const m=s?s[p]:0;i[p]>m&&(u+=(i[p]-m)*(i[p]-m)),o[p]<m&&(u+=(m-o[p])*(m-o[p]))}return u},a.bw=jn,a.bx=he,a.by=function(i){const o=a.a6.identity(new Float64Array(16));a.a6.multiply(o,i.pixelMatrix,i.globeMatrix);const s=[0,G,0],u=[0,R,0];return a.N.transformMat4(s,s,o),a.N.transformMat4(u,u,o),[s[0]>0&&s[0]<=i.width&&s[1]>0&&s[1]<=i.height&&!Qk(i,new Se(i.center.lat,90)),u[0]>0&&u[0]<=i.width&&u[1]>0&&u[1]<=i.height&&!Qk(i,new Se(i.center.lat,-90))]},a.bz=function(i,o){const{scale:s}=i.tileTransform,u=s*Xt/(i.tileSize*Math.pow(2,o.zoom-i.tileID.overscaledZ+i.tileID.canonical.z));return a.b4.scale(new Float32Array(4),o.inverseAdjustmentMatrix,[u,u])},a.c=LN,a.c$=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},a.c0=N,a.c1=bn,a.c2=function(i,o,s){return i.type==="custom"?new yX(i,o):new ZX[i.type](i,o,s)},a.c3=function(i){const o=i.indexOf(Zc);return o>=0?i.slice(0,o):i},a.c4=function(i){return i.indexOf(Zc)>=0},a.c5=function(i){const o=i.indexOf(Zc);return o>=0?i.slice(o+1):""},a.c6=function(i){const o=[],s=i.id;return s===void 0&&o.push({message:`layers.${s}: missing required property "id"`}),i.render===void 0&&o.push({message:`layers.${s}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&o.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),o},a.c7=En,a.c8=sg,a.c9=Ze,a.cA=SL,a.cB=(i,o,s,u,p,m)=>{const v=i.transform;return{u_matrix:TL(i,o,s,u),u_texsize:o.imageAtlasTexture?o.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:v.calculatePixelsToTileUnitsMatrix(o),u_device_pixel_ratio:p,u_image:0,u_tile_units_to_pixels:EL(o,v),u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:m}},a.cC=(i,o,s,u,p,m,v)=>{const x=i.transform,T=x.calculatePixelsToTileUnitsMatrix(o);return{u_matrix:TL(i,o,s,u),u_pixels_to_tile_units:T,u_device_pixel_ratio:m,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:p,u_texsize:CL(s)&&o.lineAtlasTexture?o.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:EL(o,i.transform),u_alpha_discard_threshold:0,u_trim_offset:v,u_emissive_strength:s.paint.get("line-emissive-strength")}},a.cD=Mt,a.cE=qv,a.cF=gL,a.cG=Wt,a.cH=vw,a.cI=np,a.cJ=450,a.cK=7,a.cL=pX,a.cM=256,a.cN=Kk,a.cO=zs,a.cP=_g,a.cQ=function(i,o,s,u,p){return Re((i-o)/(s-o)*(p-u)+u,u,p)},a.cR=zn,a.cS=kA,a.cT=[1,1,1],a.cU=py,a.cV=Ty,a.cW=ra,a.cX=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[]}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(i){const o=ZO(new ve(0,0),new ve(Xt,Xt),i),s=[];for(const u of this._activeRegions){if(u.hiddenByOverlap||!qO(o,u))continue;const p=qZ(u.min,u.max,i);s.push({min:p.min,max:p.max,sourceId:this._sourceIds[u.priority],footprint:u.footprint,footprintTileId:u.tileId})}return s}setSources(i){this._setSources(i.map(o=>({getSourceId:()=>o.cache.id,getFootprints:()=>{const s=[];for(const u of o.cache.getVisibleCoordinates()){const p=o.cache.getTile(u).buckets[o.layer];if(p)for(const m of p.getNodesInfo()){const v=m.node;v.footprint&&s.push({footprint:v.footprint,id:u.toUnwrapped()})}}return s}})))}_addSource(i){const o=i.getFootprints();if(o.length!==0){for(const s of o){if(!s.footprint)continue;const u=ZO(s.footprint.min,s.footprint.max,s.id);this._activeRegions.push({min:u.min,max:u.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:s.id,footprint:s.footprint})}this._sourceIds.push(i.getSourceId())}}_computeReplacement(){this._activeRegions.sort((o,s)=>o.priority-s.priority||gw(o.min,s.min)||gw(o.max,s.max));let i=this._activeRegions.length!==this._prevRegions.length;if(!i){let o=0,s=0;for(;!i&&o!==this._activeRegions.length;){const u=this._activeRegions[o],p=this._prevRegions[s];i=u.priority!==p.priority||!GO(u,p),++o,++s}}if(i){++this._updateTime;const o=s=>{const u=this._activeRegions;if(s>=u.length)return s;const p=u[s].priority;for(;s<u.length&&u[s].priority===p;)++s;return s};if(this._sourceIds.length>1){let s=0,u=o(s);for(;s!==u;){let p=s;const m=s;for(;p!==u;){const v=this._activeRegions[p];v.hiddenByOverlap=!1;for(let x=0;x<m;x++){const T=this._activeRegions[x];if(!T.hiddenByOverlap&&qO(v,T)&&(v.hiddenByOverlap=XO(v.footprint,v.tileId,T.footprint,T.tileId),v.hiddenByOverlap))break}++p}s=u,u=o(s)}}}}_setSources(i){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let o=i.length-1;o>=0;o--)this._addSource(i[o]);this._computeReplacement()}},a.cY=class{constructor(i){this._createGrid(i),this._createPoles(i)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const i of this._poleSegments)i.destroy();for(const i of this._gridSegments)i.withSkirts.destroy(),i.withoutSkirts.destroy()}_fillGridMeshWithLods(i,o){const s=new bs,u=new ci,p=[],m=i+1+2,v=o[0]+1,x=o[0]+1+(1+o.length),T=(S,A,I)=>{let z=S===m-1?S-2:S===0?S:S-1;return z+=I?24575:0,[z,A]};for(let S=0;S<m;++S)s.emplaceBack(...T(S,0,!0));for(let S=0;S<v;++S)for(let A=0;A<m;++A)s.emplaceBack(...T(A,S,(A===0||A===m-1)&&!0));for(let S=0;S<o.length;++S){const A=o[S];for(let I=0;I<m;++I)s.emplaceBack(...T(I,A,!0))}for(let S=0;S<o.length;++S){const A=u.length,I=o[S]+1+2,z=new ci;for(let X=0;X<I-1;X++){const ne=X===I-2,ae=ne?m*(x-o.length+S-X):m;for(let ye=0;ye<m-1;ye++){const xe=X*m+ye;X===0||ne||ye===0||ye===m-2?(z.emplaceBack(xe+1,xe,xe+ae),z.emplaceBack(xe+ae,xe+ae+1,xe+1)):(u.emplaceBack(xe+1,xe,xe+ae),u.emplaceBack(xe+ae,xe+ae+1,xe+1))}}const V=Po.simpleSegment(0,A,s.length,u.length-A);for(let X=0;X<z.uint16.length;X+=3)u.emplaceBack(z.uint16[X],z.uint16[X+1],z.uint16[X+2]);const Y=Po.simpleSegment(0,A,s.length,u.length-A);p.push({withoutSkirts:V,withSkirts:Y})}return{vertices:s,indices:u,segments:p}}_createGrid(i){const o=this._fillGridMeshWithLods(Ne,Fe);this._gridSegments=o.segments,this._gridBuffer=i.createVertexBuffer(o.vertices,TO.members),this._gridIndexBuffer=i.createIndexBuffer(o.indices,!0)}_createPoles(i){const o=new ci;for(let v=0;v<=Ne;v++)o.emplaceBack(0,v+1,v+2);this._poleIndexBuffer=i.createIndexBuffer(o,!0);const s=new zs,u=new zs,p=new zs,m=new zs;this._poleSegments=[];for(let v=0,x=0;v<Ee;v++){const T=360/(1<<v);s.emplaceBack(0,-be,0,.5,0),u.emplaceBack(0,-be,0,.5,1),p.emplaceBack(0,-be,0,.5,.5),m.emplaceBack(0,-be,0,.5,.5);for(let S=0;S<=Ne;S++){let A=S/Ne,I=0;const z=yr(0,T,A),[V,Y,X]=H(dZ,hZ,z,be);s.emplaceBack(V,Y,X,A,I),u.emplaceBack(V,Y,X,A,1-I);const ne=Be(z);A=.5+.5*Math.sin(ne),I=.5+.5*Math.cos(ne),p.emplaceBack(V,Y,X,A,I),m.emplaceBack(V,Y,X,A,1-I)}this._poleSegments.push(Po.simpleSegment(x,0,66,64)),x+=66}this._poleNorthVertexBuffer=i.createVertexBuffer(s,rw,!1),this._poleSouthVertexBuffer=i.createVertexBuffer(u,rw,!1),this._texturedPoleNorthVertexBuffer=i.createVertexBuffer(p,rw,!1),this._texturedPoleSouthVertexBuffer=i.createVertexBuffer(m,rw,!1)}getGridBuffers(i,o){return[this._gridBuffer,this._gridIndexBuffer,o?this._gridSegments[i].withSkirts:this._gridSegments[i].withoutSkirts]}getPoleBuffers(i,o){return[o?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,o?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[i]]}},a.cZ=function(i){return el.has(i)},a.c_=ot,a.ca=c,a.cb=class extends vs{constructor(i){super(i),this.current=_}set(i,o,s){if(this.fetchUniformLocation(i,o)){for(let u=0;u<9;u++)if(s[u]!==this.current[u]){this.current=s,this.gl.uniformMatrix3fv(this.location,!1,s);break}}}},a.cc=ze,a.cd=function(i,o,s){const u=Jf(s.zoom),p=i.style.map._antialias,m=o.options.extStandardDerivativesForceOff||i.terrain&&i.terrain.exaggeration()>0;return u===0&&!p&&!m},a.ce=function(i){const o=i.pixelsPerMeter,s=o/on(1,i.center.lat),u=a.a6.identity(new Float64Array(16));return a.a6.translate(u,u,[i.point.x,i.point.y,0]),a.a6.scale(u,u,[s,s,o]),Float32Array.from(u)},a.cf=iw,a.cg=function(i){const o=jn-5;i=Re(i,-o,o)/o*90;const s=Math.pow(Math.abs(Math.sin(Be(i))),3);return Math.round(s*(Fe.length-1))},a.ch=function(i,o,s,u){const p=o.getNorth(),m=o.getSouth(),v=o.getWest(),x=o.getEast(),T=1<<i.z,S=x-v,A=p-m,I=S/Ne,z=-A/Fe[s],V=[0,I,0,z,0,0,p,v,0];if(i.z>0){const Y=180/u;a.co.multiply(V,V,[Y/S+1,0,0,0,Y/A+1,0,-.5*Y/I,.5*Y/z,1])}return V[2]=T,V[5]=i.x,V[8]=i.y,V},a.ci=nd,a.cj=function(i,o,s){const u=a.a6.identity(new Float64Array(16)),p=(o/(1<<i)-.5)*Math.PI*2;return a.a6.rotateY(u,s.globeMatrix,p),Float32Array.from(u)},a.ck=class{isDataAvailableAtPoint(i){const o=this._source();if(this.isUsingMockSource()||!o||i.y<0||i.y>1)return!1;const s=o.getSource().maxzoom,u=1<<s,p=Math.floor(i.x),m=Math.floor((i.x-p)*u),v=Math.floor(i.y*u),x=this.findDEMTileFor(new yt(s,p,s,m,v));return!(!x||!x.dem)}getAtPointOrZero(i,o=0){return this.getAtPoint(i,o)||0}getAtPoint(i,o,s=!0){if(this.isUsingMockSource())return null;o==null&&(o=null);const u=this._source();if(!u||i.y<0||i.y>1)return o;const p=u.getSource().maxzoom,m=1<<p,v=Math.floor(i.x),x=i.x-v,T=new yt(p,v,p,Math.floor(x*m),Math.floor(i.y*m)),S=this.findDEMTileFor(T);if(!S||!S.dem)return o;const A=S.dem,I=1<<S.tileID.canonical.z,z=(x*I-S.tileID.canonical.x)*A.dim,V=(i.y*I-S.tileID.canonical.y)*A.dim,Y=Math.floor(z),X=Math.floor(V);return(s?this.exaggeration():1)*yr(yr(A.get(Y,X),A.get(Y,X+1),V-X),yr(A.get(Y+1,X),A.get(Y+1,X+1),V-X),z-Y)}getAtTileOffset(i,o,s){const u=1<<i.canonical.z;return this.getAtPointOrZero(new Jn(i.wrap+(i.canonical.x+o/Xt)/u,(i.canonical.y+s/Xt)/u))}getAtTileOffsetFunc(i,o,s,u){return p=>{const m=this.getAtTileOffset(i,p.x,p.y),v=u.upVector(i.canonical,p.x,p.y),x=u.upVectorScale(i.canonical,o,s).metersToTile;return a.N.scale(v,v,m*x),v}}getForTilePoints(i,o,s,u){if(this.isUsingMockSource())return!1;const p=py.create(this,i,u);return!!p&&(o.forEach(m=>{m[2]=this.exaggeration()*p.getElevationAt(m[0],m[1],s)}),!0)}getMinMaxForTile(i){if(this.isUsingMockSource())return null;const o=this.findDEMTileFor(i);if(!o||!o.dem)return null;const s=o.dem.tree,u=o.tileID,p=1<<i.canonical.z-u.canonical.z;let m=i.canonical.x/p-u.canonical.x,v=i.canonical.y/p-u.canonical.y,x=0;for(let T=0;T<i.canonical.z-u.canonical.z&&!s.leaves[x];T++){m*=2,v*=2;const S=2*Math.floor(v)+Math.floor(m);x=s.childOffsets[x]+S,m%=1,v%=1}return{min:this.exaggeration()*s.minimums[x],max:this.exaggeration()*s.maximums[x]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(i,o,s){throw new Error("Pure virtual method called.")}pointCoordinate(i){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(i){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const i=this.visibleDemTiles;if(i.length===0)return null;let o=!1,s=Number.MAX_VALUE,u=Number.MIN_VALUE;for(const p of i){const m=this.getMinMaxForTile(p.tileID);m&&(s=Math.min(s,m.min),u=Math.max(u,m.max),o=!0)}return o?{min:s,max:u}:null}},a.cl=ow,a.cm=FO,a.cn=function(i,o){return[Math.pow(i[0],2.2)*o,Math.pow(i[1],2.2)*o,Math.pow(i[2],2.2)*o]},a.cp=MO,a.cq=256,a.cr=function(i,o){const s=[0,0,0],u=sw(nd(o.canonical));return a.N.transformMat4(s,s,u),a.N.transformMat4(s,s,i),s},a.cs=i=>({u_camera_to_center_distance:new $i(i),u_extrude_scale:new k(i),u_device_pixel_ratio:new $i(i),u_matrix:new b(i),u_inv_rot_matrix:new b(i),u_merc_center:new oc(i),u_tile_id:new Zf(i),u_zoom_transition:new $i(i),u_up_dir:new Zf(i),u_emissive_strength:new $i(i)}),a.ct=i=>({u_matrix:new b(i),u_pixels_to_tile_units:new k(i),u_device_pixel_ratio:new $i(i),u_units_to_pixels:new oc(i),u_dash_image:new qf(i),u_gradient_image:new qf(i),u_image_height:new $i(i),u_texsize:new oc(i),u_tile_units_to_pixels:new $i(i),u_alpha_discard_threshold:new $i(i),u_trim_offset:new oc(i),u_emissive_strength:new $i(i)}),a.cu=i=>({u_matrix:new b(i),u_texsize:new oc(i),u_pixels_to_tile_units:new k(i),u_device_pixel_ratio:new $i(i),u_image:new qf(i),u_units_to_pixels:new oc(i),u_tile_units_to_pixels:new $i(i),u_alpha_discard_threshold:new $i(i),u_trim_offset:new oc(i)}),a.cv=Uf,a.cw=EK,a.cx=TK,a.cy=PO,a.cz=(i,o,s,u,p,m)=>{const v=i.transform,x=v.projection.name==="globe";let T;if(m.paint.get("circle-pitch-alignment")==="map")if(x){const A=MO(v.zoom,o.canonical)*v._pixelsPerMercatorPixel;T=Float32Array.from([A,0,0,A])}else T=v.calculatePixelsToTileUnitsMatrix(s);else T=new Float32Array([v.pixelsToGLUnits[0],0,0,v.pixelsToGLUnits[1]]);const S={u_camera_to_center_distance:i.transform.getCameraToCenterDistance(v.projection),u_matrix:i.translatePosMatrix(o.projMatrix,s,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_device_pixel_ratio:it.devicePixelRatio,u_extrude_scale:T,u_inv_rot_matrix:fZ,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:m.paint.get("circle-emissive-strength")};if(x){S.u_inv_rot_matrix=u,S.u_merc_center=p,S.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],S.u_zoom_transition=Jf(v.zoom);const A=p[0]*Xt,I=p[1]*Xt;S.u_up_dir=v.projection.upVector(new Ye(0,0,0),A,I)}return S},a.d=Rt,a.d0=st,a.d1=Qn,a.d2=le,a.d3=function([i,o,s]){const u=Math.hypot(i,o,s),p=Math.atan2(i,s),m=.5*Math.PI-Math.acos(-o/u);return new Se(Ue(p),Ue(m))},a.d4=ge,a.d5=M,a.d6=Qk,a.d7=RO,a.d8=function(i){const o=[0,0,0],s=a.a6.identity(new Float64Array(16));return a.a6.multiply(s,i.pixelMatrix,i.globeMatrix),a.N.transformMat4(o,o,s),new ve(o[0],o[1])},a.d9=function(i){const o=i.navigator?i.navigator.userAgent:null;return!!function(s){if(Ke==null){const u=s.navigator?s.navigator.userAgent:null;Ke=!!s.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return Ke}(i)&&o&&(o.match("Version/15.4")||o.match("Version/15.5")||o.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},a.dA=ru,a.dB=NN,a.dC=BN,a.dD=_L,a.dE=Un,a.dF=ZL,a.dG=function(i,o,s,u,p,m,v,x,T,S,A){i.createArrays(),i.tilePixelRatio=Xt/(512*i.overscaling),i.compareText={},i.iconsNeedLinear=!1;const I=i.layers[0].layout,z=i.layers[0]._unevaluatedLayout._values,V={};if(i.textSizeData.kind==="composite"){const{minZoom:ae,maxZoom:ye}=i.textSizeData;V.compositeTextSizes=[z["text-size"].possiblyEvaluate(new xo(ae),x),z["text-size"].possiblyEvaluate(new xo(ye),x)]}if(i.iconSizeData.kind==="composite"){const{minZoom:ae,maxZoom:ye}=i.iconSizeData;V.compositeIconSizes=[z["icon-size"].possiblyEvaluate(new xo(ae),x),z["icon-size"].possiblyEvaluate(new xo(ye),x)]}V.layoutTextSize=z["text-size"].possiblyEvaluate(new xo(T+1),x),V.layoutIconSize=z["icon-size"].possiblyEvaluate(new xo(T+1),x),V.textMaxSize=z["text-size"].possiblyEvaluate(new xo(18),x);const Y=I.get("text-rotation-alignment")==="map"&&I.get("symbol-placement")!=="point",X=I.get("text-size");let ne=!1;for(const ae of i.features)if(ae.icon&&ae.icon.nameSecondary){ne=!0;break}for(const ae of i.features){const ye=I.get("text-font").evaluate(ae,{},x).join(","),xe=X.evaluate(ae,{},x),_e=V.layoutTextSize.evaluate(ae,{},x),Ie=(V.layoutIconSize.evaluate(ae,{},x),{horizontal:{},vertical:void 0}),Me=ae.text;let $e,We=[0,0];if(Me){const Xe=Me.toString(),mt=I.get("text-letter-spacing").evaluate(ae,{},x)*ya,St=I.get("text-line-height").evaluate(ae,{},x)*ya,ht=Lv(Xe)?mt:0,wt=I.get("text-anchor").evaluate(ae,{},x),lt=I.get("text-variable-anchor");if(!lt){const Jt=I.get("text-radial-offset").evaluate(ae,{},x);We=Jt?eN(wt,[Jt*ya,bA]):I.get("text-offset").evaluate(ae,{},x).map(It=>It*ya)}let xt=Y?"center":I.get("text-justify").evaluate(ae,{},x);const Gt=I.get("symbol-placement")==="point",At=Gt?I.get("text-max-width").evaluate(ae,{},x)*ya:1/0,dn=Jt=>{i.allowVerticalPlacement&&al(Xe)&&(Ie.vertical=pA(Me,o,s,p,ye,At,St,wt,Jt,ht,We,yl.vertical,!0,_e,xe))};if(!Y&&lt){const Jt=xt==="auto"?lt.map(Bn=>vA(Bn)):[xt];let It=!1;for(let Bn=0;Bn<Jt.length;Bn++){const wn=Jt[Bn];if(!Ie.horizontal[wn])if(It)Ie.horizontal[wn]=Ie.horizontal[0];else{const ln=pA(Me,o,s,p,ye,At,St,"center",wn,ht,We,yl.horizontal,!1,_e,xe);ln&&(Ie.horizontal[wn]=ln,It=ln.positionedLines.length===1)}}dn("left")}else{if(xt==="auto"&&(xt=vA(wt)),Gt||I.get("text-writing-mode").indexOf("horizontal")>=0||!al(Xe)){const Jt=pA(Me,o,s,p,ye,At,St,wt,xt,ht,We,yl.horizontal,!1,_e,xe);Jt&&(Ie.horizontal[xt]=Jt)}dn(Gt?"left":xt)}}let qe=!1;if(ae.icon&&ae.icon.namePrimary){const Xe=u[ae.icon.namePrimary];Xe&&($e=VK(p[ae.icon.namePrimary],ae.icon.nameSecondary?p[ae.icon.nameSecondary]:void 0,I.get("icon-offset").evaluate(ae,{},x),I.get("icon-anchor").evaluate(ae,{},x)),qe=Xe.sdf,i.sdfIcons===void 0?i.sdfIcons=Xe.sdf:i.sdfIcons!==Xe.sdf&&On("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Xe.pixelRatio!==i.pixelRatio||I.get("icon-rotate").constantOr(1)!==0)&&(i.iconsNeedLinear=!0))}const rt=nN(Ie.horizontal)||Ie.vertical;i.iconsInText||(i.iconsInText=!!rt&&rt.iconsInText),(rt||$e)&&KK(i,ae,Ie,$e,u,V,_e,0,We,qe,v,x,S,A,ne)}m&&i.generateCollisionDebugBuffers(T,i.collisionBoxArray)},a.dH=lA,a.dI=vy,a.dJ=yw,a.dK=Q,a.dL=pw,a.dM=fw,a.dN=re,a.dO=DL,a.dP=function(i){let o=0;if(new Uint32Array(i,0,1)[0]!==AN){const s=new Uint32Array(i,0,7),[,,u,p,m,v]=s;o=s.byteLength+p+m+v+m,(u!==i.byteLength||o>=i.byteLength)&&On("Invalid b3dm header information.")}return IN(i,o)},a.dQ=function(i,o){const s=LN(i);for(const u of s){for(const p of u.meshes)VX(p);u.lights&&(u.lightMeshIndex=u.meshes.length,u.meshes.push(HX(u.lights,o)))}return s},a.dR=Yw,a.dS=TN,a.dT=Ta,a.dU=function(i){Fr(),Ut&&Ut.then(o=>{o.keys().then(s=>{for(let u=0;u<s.length-i;u++)o.delete(s[u])})})},a.da=class{constructor(i,o,s){this._transformRequestFn=i,this._customAccessToken=o,this._silenceAuthErrors=!!s,this._createSkuToken()}_createSkuToken(){const i=function(){let o="";for(let s=0;s<10;s++)o+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Bt,o].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=i.token,this._skuTokenExpiresAt=i.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(i,o){return this._transformRequestFn&&this._transformRequestFn(i,o)||{url:i}}normalizeStyleURL(i,o){if(!N(i))return i;const s=An(i);return s.params.push(`sdk=js-${E}`),s.path=`/styles/v1${s.path}`,this._makeAPIURL(s,this._customAccessToken||o)}normalizeGlyphsURL(i,o){if(!N(i))return i;const s=An(i);return s.path=`/fonts/v1${s.path}`,this._makeAPIURL(s,this._customAccessToken||o)}normalizeModelURL(i,o){if(!N(i))return i;const s=An(i);return s.path=`/models/v1${s.path}`,this._makeAPIURL(s,this._customAccessToken||o)}normalizeSourceURL(i,o,s,u){if(!N(i))return i;const p=An(i);return p.path=`/v4/${p.authority}.json`,p.params.push("secure"),s&&p.params.push(`language=${s}`),u&&p.params.push(`worldview=${u}`),this._makeAPIURL(p,this._customAccessToken||o)}normalizeSpriteURL(i,o,s,u){const p=An(i);return N(i)?(p.path=`/styles/v1${p.path}/sprite${o}${s}`,this._makeAPIURL(p,this._customAccessToken||u)):(p.path+=`${o}${s}`,nr(p))}normalizeTileURL(i,o,s){if(this._isSkuTokenExpired()&&this._createSkuToken(),i&&!N(i))return i;const u=An(i);u.path=u.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${o||s&&u.authority!=="raster"&&s===512?"@2x":""}${vr.supported?".webp":"$1"}`),u.authority==="raster"?u.path=`/${M.RASTER_URL_PREFIX}${u.path}`:u.authority==="rasterarrays"?u.path=`/${M.RASTERARRAYS_URL_PREFIX}${u.path}`:(u.path=u.path.replace(/^.+\/v4\//,"/"),u.path=`/${M.TILE_URL_VERSION}${u.path}`);const p=this._customAccessToken||function(m){for(const v of m){const x=v.match(/^access_token=(.*)$/);if(x)return x[1]}return null}(u.params)||M.ACCESS_TOKEN;return M.REQUIRE_ACCESS_TOKEN&&p&&this._skuToken&&u.params.push(`sku=${this._skuToken}`),this._makeAPIURL(u,p)}canonicalizeTileURL(i,o){const s=An(i);if(!s.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!s.path.match(/\.[\w]+$/))return i;let u="mapbox://";s.path.match(/^\/raster\/v1\//)?u+=`raster/${s.path.replace(`/${M.RASTER_URL_PREFIX}/`,"")}`:s.path.match(/^\/rasterarrays\/v1\//)?u+=`rasterarrays/${s.path.replace(`/${M.RASTERARRAYS_URL_PREFIX}/`,"")}`:u+=`tiles/${s.path.replace(`/${M.TILE_URL_VERSION}/`,"")}`;let p=s.params;return o&&(p=p.filter(m=>!m.match(/^access_token=/))),p.length&&(u+=`?${p.join("&")}`),u}canonicalizeTileset(i,o){const s=!!o&&N(o),u=[];for(const p of i.tiles||[])P(p)?u.push(this.canonicalizeTileURL(p,s)):u.push(p);return u}_makeAPIURL(i,o){const s="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",u=An(M.API_URL);if(i.protocol=u.protocol,i.authority=u.authority,i.protocol==="http"){const p=i.params.indexOf("secure");p>=0&&i.params.splice(p,1)}if(u.path!=="/"&&(i.path=`${u.path}${i.path}`),!M.REQUIRE_ACCESS_TOKEN)return nr(i);if(o=o||M.ACCESS_TOKEN,!this._silenceAuthErrors){if(!o)throw new Error(`An API access token is required to use Mapbox GL. ${s}`);if(o[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${s}`)}return i.params=i.params.filter(p=>p.indexOf("access_token")===-1),i.params.push(`access_token=${o||""}`),nr(i)}},a.db=function(i,o){o?el.add(i):el.delete(i)},a.dc=vr,a.dd=Fi,a.de=jl,a.df=Yt,a.dg=sr,a.dh=function(i){el.delete(i)},a.di=ni,a.dj=ro,a.dk=E,a.dl=function(i,o){tt=i,jt=o},a.dm=function(i,o,s=!1){if(Ba===ng||Ba===rg||Ba===sl)throw new Error("setRTLTextPlugin cannot be called multiple times.");na=it.resolveURL(i),Ba=ng,og=o,ag(),s||Bf()},a.dn=ll,a.dp=function(){Uw().acquire(RA)},a.dq=function(){const i=f_;i&&(i.isPreloaded()&&i.numActive()===1?(i.release(RA),f_=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},a.dr=h_,a.ds=function(i){const o=er();if(!o)return;const s=o.delete(ct);i&&s.catch(i).then(()=>i())},a.dt=d_,a.du=SN,a.dv=function(i){IA=it.resolveURL(i),ky||(ky=new Sy(Uw(),new Su)),ky.broadcast("setDracoUrl",IA)},a.dw=CN,a.dx=function(i){Cy=it.resolveURL(i),ky||(ky=new Sy(Uw(),new Su)),ky.broadcast("setMeshoptUrl",Cy)},a.dy=rn,a.dz=ep,a.e=Nt,a.f=it,a.g=function(i,o){return Ze(Nt(i,{type:"json"}),o)},a.h=gl,a.i=Pc,a.j=vm,a.k=Lf,a.l=function(i){return fetch(i).then(o=>o.arrayBuffer()).then(o=>IN(o,0,i))},a.m=Gd,a.n=Xl,a.o=Ff,a.p=qL,a.q=eg,a.r=Zd,a.s=Km,a.t=Wd,a.u=Fa,a.v=Pi,a.w=On,a.x=Nu,a.z=ug}),f(["./shared"],function(a){function E(Ke){const pe=Ke?Ke.url.toString():void 0;return pe?performance.getEntriesByName(pe):[]}function C(Ke){if(typeof Ke=="number"||typeof Ke=="boolean"||typeof Ke=="string"||Ke==null)return JSON.stringify(Ke);if(Array.isArray(Ke)){let we="[";for(const Pe of Ke)we+=`${C(Pe)},`;return`${we}]`}let pe="{";for(const we of Object.keys(Ke).sort())pe+=`${we}:${C(Ke[we])},`;return`${pe}}`}function M(Ke){let pe="";for(const we of a.b2)pe+=`/${C(Ke[we])}`;return pe}class P{constructor(pe){this.keyCache={},this._layers={},this._layerConfigs={},pe&&this.replace(pe)}replace(pe,we){this._layerConfigs={},this._layers={},this.update(pe,[],we)}update(pe,we,Pe){this._options=Pe;for(const ft of pe)this._layerConfigs[ft.id]=ft,(this._layers[ft.id]=a.c2(ft,this.scope,this._options)).compileFilter(),this.keyCache[ft.id]&&delete this.keyCache[ft.id];for(const ft of we)delete this.keyCache[ft],delete this._layerConfigs[ft],delete this._layers[ft];this.familiesBySource={};const at=function(ft,it){const ct={};for(let jt=0;jt<ft.length;jt++){const Ut=it&&it[ft[jt].id]||M(ft[jt]);it&&(it[ft[jt].id]=Ut);let en=ct[Ut];en||(en=ct[Ut]=[]),en.push(ft[jt])}const tt=[];for(const jt in ct)tt.push(ct[jt]);return tt}(a.a$(this._layerConfigs),this.keyCache);for(const ft of at){const it=ft.map(er=>this._layers[er.id]),ct=it[0];if(ct.visibility==="none")continue;const tt=ct.source||"";let jt=this.familiesBySource[tt];jt||(jt=this.familiesBySource[tt]={});const Ut=ct.sourceLayer||"_geojsonTileLayer";let en=jt[Ut];en||(en=jt[Ut]=[]),en.push(it)}}}const N=1*a.dA;class F{constructor(pe){const we={},Pe=[];for(const ct in pe){const tt=pe[ct],jt=we[ct]={};for(const Ut in tt.glyphs){const en=tt.glyphs[+Ut];if(!en||en.bitmap.width===0||en.bitmap.height===0)continue;const er=en.metrics.localGlyph?N:1,Fr={x:0,y:0,w:en.bitmap.width+2*er,h:en.bitmap.height+2*er};Pe.push(Fr),jt[Ut]=Fr}}const{w:at,h:ft}=a.p(Pe),it=new a.dz({width:at||1,height:ft||1});for(const ct in pe){const tt=pe[ct];for(const jt in tt.glyphs){const Ut=tt.glyphs[+jt];if(!Ut||Ut.bitmap.width===0||Ut.bitmap.height===0)continue;const en=we[ct][jt],er=Ut.metrics.localGlyph?N:1;a.dz.copy(Ut.bitmap,it,{x:0,y:0},{x:en.x+er,y:en.y+er},Ut.bitmap)}}this.image=it,this.positions=we}}a.dy(F,"GlyphAtlas");class ${constructor(pe){this.tileID=new a.am(pe.tileID.overscaledZ,pe.tileID.wrap,pe.tileID.canonical.z,pe.tileID.canonical.x,pe.tileID.canonical.y),this.tileZoom=pe.tileZoom,this.uid=pe.uid,this.zoom=pe.zoom,this.canonical=pe.tileID.canonical,this.pixelRatio=pe.pixelRatio,this.tileSize=pe.tileSize,this.source=pe.source,this.scope=pe.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=pe.showCollisionBoxes,this.collectResourceTiming=!!pe.collectResourceTiming,this.promoteId=pe.promoteId,this.isSymbolTile=pe.isSymbolTile,this.tileTransform=a.as(pe.tileID.canonical,pe.projection),this.projection=pe.projection,this.brightness=pe.brightness,this.extraShadowCaster=!!pe.extraShadowCaster}parse(pe,we,Pe,at,ft){this.status="parsing",this.data=pe,this.collisionBoxArray=new a.aD;const it=new a.dB(Object.keys(pe.layers).sort()),ct=new a.dC(this.tileID,this.promoteId);ct.bucketLayerIDs=[];const tt={},jt=new a.dD(256,256),Ut={featureIndex:ct,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:jt,availableImages:Pe,brightness:this.brightness},en=we.familiesBySource[this.source];for(const Nr in en){const Qe=pe.layers[Nr];if(!Qe)continue;let pt=!1,_t=!1,Kt=!1;for(const mn of en[Nr])mn[0].type==="symbol"?pt=!0:_t=!0,mn[0].is3D()&&mn[0].type!=="model"&&(Kt=!0);if(this.extraShadowCaster&&!Kt||this.isSymbolTile===!0&&!pt||this.isSymbolTile===!1&&!_t)continue;Qe.version===1&&a.w(`Vector tile source "${this.source}" layer "${Nr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const vn=it.encode(Nr),tr=[];for(let mn=0;mn<Qe.length;mn++){const sn=Qe.feature(mn),Ze=ct.getId(sn,Nr);tr.push({feature:sn,id:Ze,index:mn,sourceLayerIndex:vn})}for(const mn of en[Nr]){const sn=mn[0];(!this.extraShadowCaster||sn.is3D()&&sn.type!=="model")&&(this.isSymbolTile!==void 0&&sn.type==="symbol"!==this.isSymbolTile||sn.minzoom&&this.zoom<Math.floor(sn.minzoom)||sn.maxzoom&&this.zoom>=sn.maxzoom||sn.visibility!=="none"&&(Z(mn,this.zoom,Ut.brightness,Pe),(tt[sn.id]=sn.createBucket({index:ct.bucketLayerIDs.length,layers:mn,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:vn,sourceID:this.source,projection:this.projection.spec})).populate(tr,Ut,this.tileID.canonical,this.tileTransform),ct.bucketLayerIDs.push(mn.map(Ze=>Ze.id))))}}let er,Fr,no,Vr;jt.trim();const Cr={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},vr=()=>{if(er)return this.status="done",ft(er);if(this.extraShadowCaster)this.status="done",ft(null,{buckets:a.a$(tt).filter(Nr=>!Nr.isEmpty()),featureIndex:ct,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:Ut.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(Fr&&no&&Vr){const Nr=new F(Fr),Qe=new a.dF(no,Vr);for(const pt in tt){const _t=tt[pt];_t instanceof a.aE?(Z(_t.layers,this.zoom,Ut.brightness,Pe),a.dG(_t,Fr,Nr.positions,no,Qe.iconPositions,this.showCollisionBoxes,Pe,this.tileID.canonical,this.tileZoom,this.projection,this.brightness)):_t.hasPattern&&(_t instanceof a.aK||_t instanceof a.aL||_t instanceof a.cH)&&(Z(_t.layers,this.zoom,Ut.brightness,Pe),_t.addFeatures(Ut,this.tileID.canonical,Qe.patternPositions,Pe,this.tileTransform,this.brightness))}this.status="done",ft(null,{buckets:a.a$(tt).filter(pt=>!pt.isEmpty()),featureIndex:ct,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Nr.image,lineAtlas:jt,imageAtlas:Qe,brightness:Ut.brightness})}};if(!this.extraShadowCaster){const Nr=a.dE(Ut.glyphDependencies,_t=>Object.keys(_t).map(Number));Object.keys(Nr).length?at.send("getGlyphs",{uid:this.uid,stacks:Nr,scope:this.scope},(_t,Kt)=>{er||(er=_t,Fr=Kt,vr())},void 0,!1,Cr):Fr={};const Qe=Object.keys(Ut.iconDependencies);Qe.length?at.send("getImages",{icons:Qe,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(_t,Kt)=>{er||(er=_t,no=Kt,vr())},void 0,!1,Cr):no={};const pt=Object.keys(Ut.patternDependencies);pt.length?at.send("getImages",{icons:pt,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(_t,Kt)=>{er||(er=_t,Vr=Kt,vr())},void 0,!1,Cr):Vr={}}vr()}}function Z(Ke,pe,we,Pe){const at=new a.K(pe,{brightness:we});for(const ft of Ke)ft.recalculate(at,Pe)}class q extends a.E{constructor(pe,we,Pe,at,ft,it){super(),this.actor=pe,this.layerIndex=we,this.availableImages=Pe,this.loadVectorData=ft||a.ah,this.loading={},this.loaded={},this.deduped=new a.af(pe.scheduler),this.isSpriteLoaded=at,this.scheduler=pe.scheduler,this.brightness=it}loadTile(pe,we){const Pe=pe.uid,at=pe&&pe.request,ft=at&&at.collectResourceTiming,it=this.loading[Pe]=new $(pe);it.abort=this.loadVectorData(pe,(ct,tt)=>{const jt=!this.loading[Pe];if(delete this.loading[Pe],jt||ct||!tt)return it.status="done",jt||(this.loaded[Pe]=it),we(ct);const Ut=tt.rawData,en={};tt.expires&&(en.expires=tt.expires),tt.cacheControl&&(en.cacheControl=tt.cacheControl),it.vectorTile=tt.vectorTile||new a.dH(new a.dI(Ut));const er=()=>{it.parse(it.vectorTile,this.layerIndex,this.availableImages,this.actor,(Fr,no)=>{if(Fr||!no)return we(Fr);const Vr={};if(ft){const Cr=E(at);Cr.length>0&&(Vr.resourceTiming=JSON.parse(JSON.stringify(Cr)))}we(null,a.e({rawTileData:Ut.slice(0)},no,en,Vr))})};this.isSpriteLoaded?er():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(er,{type:"parseTile",isSymbolTile:pe.isSymbolTile,zoom:pe.tileZoom}):er()}),this.loaded=this.loaded||{},this.loaded[Pe]=it})}reloadTile(pe,we){const Pe=this.loaded,at=pe.uid,ft=this;if(Pe&&Pe[at]){const it=Pe[at];it.showCollisionBoxes=pe.showCollisionBoxes,it.projection=pe.projection,it.brightness=pe.brightness,it.tileTransform=a.as(pe.tileID.canonical,pe.projection),it.extraShadowCaster=pe.extraShadowCaster;const ct=(tt,jt)=>{const Ut=it.reloadCallback;Ut&&(delete it.reloadCallback,it.parse(it.vectorTile,ft.layerIndex,this.availableImages,ft.actor,Ut)),we(tt,jt)};it.status==="parsing"?it.reloadCallback=ct:it.status==="done"&&(it.vectorTile?it.parse(it.vectorTile,this.layerIndex,this.availableImages,this.actor,ct):ct())}else we(null,void 0)}abortTile(pe,we){const Pe=pe.uid,at=this.loading[Pe];at&&(at.abort&&at.abort(),delete this.loading[Pe]),we()}removeTile(pe,we){const Pe=this.loaded,at=pe.uid;Pe&&Pe[at]&&delete Pe[at],we()}}class K{loadTile(pe,we){const{uid:Pe,encoding:at,rawImageData:ft,padding:it}=pe,ct=ImageBitmap&&ft instanceof ImageBitmap?this.getImageData(ft,it):ft;we(null,new a.dJ(Pe,ct,at,it<1))}getImageData(pe,we){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(pe.width,pe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=pe.width,this.offscreenCanvas.height=pe.height,this.offscreenCanvasContext.drawImage(pe,0,0,pe.width,pe.height);const Pe=this.offscreenCanvasContext.getImageData(-we,-we,pe.width+2*we,pe.height+2*we);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Pe}}class Q{decodeRasterArray({task:pe,buffer:we},Pe){a.aZ.performDecoding(we,pe).then(at=>{Pe(null,at)},at=>{Pe(at)})}}function te(Ke,pe){if(Ke.length!==0){ie(Ke[0],pe);for(var we=1;we<Ke.length;we++)ie(Ke[we],!pe)}}function ie(Ke,pe){for(var we=0,Pe=0,at=0,ft=Ke.length,it=ft-1;at<ft;it=at++){var ct=(Ke[at][0]-Ke[it][0])*(Ke[it][1]+Ke[at][1]),tt=we+ct;Pe+=Math.abs(we)>=Math.abs(ct)?we-tt+ct:ct-tt+we,we=tt}we+Pe>=0!=!!pe&&Ke.reverse()}var ue=a.dK(function Ke(pe,we){var Pe,at=pe&&pe.type;if(at==="FeatureCollection")for(Pe=0;Pe<pe.features.length;Pe++)Ke(pe.features[Pe],we);else if(at==="GeometryCollection")for(Pe=0;Pe<pe.geometries.length;Pe++)Ke(pe.geometries[Pe],we);else if(at==="Feature")Ke(pe.geometry,we);else if(at==="Polygon")te(pe.coordinates,we);else if(at==="MultiPolygon")for(Pe=0;Pe<pe.coordinates.length;Pe++)te(pe.coordinates[Pe],we);return pe});const re=a.dL.prototype.toGeoJSON;let me=class{constructor(Ke){this._feature=Ke,this.extent=a.V,this.type=Ke.type,this.properties=Ke.tags,"id"in Ke&&!isNaN(Ke.id)&&(this.id=parseInt(Ke.id,10))}loadGeometry(){if(this._feature.type===1){const Ke=[];for(const pe of this._feature.geometry)Ke.push([new a.P(pe[0],pe[1])]);return Ke}{const Ke=[];for(const pe of this._feature.geometry){const we=[];for(const Pe of pe)we.push(new a.P(Pe[0],Pe[1]));Ke.push(we)}return Ke}}toGeoJSON(Ke,pe,we){return re.call(this,Ke,pe,we)}},ve=class{constructor(Ke){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.V,this.length=Ke.length,this._features=Ke}feature(Ke){return new me(this._features[Ke])}};var De={exports:{}},je=a.dN,Be=a.dM.VectorTileFeature,Ue=Ge;function Ge(Ke,pe){this.options=pe||{},this.features=Ke,this.length=Ke.length}function ze(Ke,pe){this.id=typeof Ke.id=="number"?Ke.id:void 0,this.type=Ke.type,this.rawGeometry=Ke.type===1?[Ke.geometry]:Ke.geometry,this.properties=Ke.tags,this.extent=pe||4096}Ge.prototype.feature=function(Ke){return new ze(this.features[Ke],this.options.extent)},ze.prototype.loadGeometry=function(){var Ke=this.rawGeometry;this.geometry=[];for(var pe=0;pe<Ke.length;pe++){for(var we=Ke[pe],Pe=[],at=0;at<we.length;at++)Pe.push(new je(we[at][0],we[at][1]));this.geometry.push(Pe)}return this.geometry},ze.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ke=this.geometry,pe=1/0,we=-1/0,Pe=1/0,at=-1/0,ft=0;ft<Ke.length;ft++)for(var it=Ke[ft],ct=0;ct<it.length;ct++){var tt=it[ct];pe=Math.min(pe,tt.x),we=Math.max(we,tt.x),Pe=Math.min(Pe,tt.y),at=Math.max(at,tt.y)}return[pe,Pe,we,at]},ze.prototype.toGeoJSON=Be.prototype.toGeoJSON;var ot=a.dO,st=Ue;function Re(Ke){var pe=new ot;return function(we,Pe){for(var at in we.layers)Pe.writeMessage(3,bt,we.layers[at])}(Ke,pe),pe.finish()}function bt(Ke,pe){var we;pe.writeVarintField(15,Ke.version||1),pe.writeStringField(1,Ke.name||""),pe.writeVarintField(5,Ke.extent||4096);var Pe={keys:[],values:[],keycache:{},valuecache:{}};for(we=0;we<Ke.length;we++)Pe.feature=Ke.feature(we),pe.writeMessage(2,Lt,Pe);var at=Pe.keys;for(we=0;we<at.length;we++)pe.writeStringField(3,at[we]);var ft=Pe.values;for(we=0;we<ft.length;we++)pe.writeMessage(4,cn,ft[we])}function Lt(Ke,pe){var we=Ke.feature;we.id!==void 0&&pe.writeVarintField(1,we.id),pe.writeMessage(2,Ct,Ke),pe.writeVarintField(3,we.type),pe.writeMessage(4,Dt,we)}function Ct(Ke,pe){var we=Ke.feature,Pe=Ke.keys,at=Ke.values,ft=Ke.keycache,it=Ke.valuecache;for(var ct in we.properties){var tt=we.properties[ct],jt=ft[ct];if(tt!==null){jt===void 0&&(Pe.push(ct),ft[ct]=jt=Pe.length-1),pe.writeVarint(jt);var Ut=typeof tt;Ut!=="string"&&Ut!=="boolean"&&Ut!=="number"&&(tt=JSON.stringify(tt));var en=Ut+":"+tt,er=it[en];er===void 0&&(at.push(tt),it[en]=er=at.length-1),pe.writeVarint(er)}}}function Nt(Ke,pe){return(pe<<3)+(7&Ke)}function tn(Ke){return Ke<<1^Ke>>31}function Dt(Ke,pe){for(var we=Ke.loadGeometry(),Pe=Ke.type,at=0,ft=0,it=we.length,ct=0;ct<it;ct++){var tt=we[ct],jt=1;Pe===1&&(jt=tt.length),pe.writeVarint(Nt(1,jt));for(var Ut=Pe===3?tt.length-1:tt.length,en=0;en<Ut;en++){en===1&&Pe!==1&&pe.writeVarint(Nt(2,Ut-1));var er=tt[en].x-at,Fr=tt[en].y-ft;pe.writeVarint(tn(er)),pe.writeVarint(tn(Fr)),at+=er,ft+=Fr}Pe===3&&pe.writeVarint(Nt(7,1))}}function cn(Ke,pe){var we=typeof Ke;we==="string"?pe.writeStringField(1,Ke):we==="boolean"?pe.writeBooleanField(7,Ke):we==="number"&&(Ke%1!=0?pe.writeDoubleField(3,Ke):Ke<0?pe.writeSVarintField(6,Ke):pe.writeVarintField(5,Ke))}De.exports=Re,De.exports.fromVectorTileJs=Re,De.exports.fromGeojsonVt=function(Ke,pe){pe=pe||{};var we={};for(var Pe in Ke)we[Pe]=new st(Ke[Pe].features,pe),we[Pe].name=Pe,we[Pe].version=pe.version,we[Pe].extent=pe.extent;return Re({layers:we})},De.exports.GeoJSONWrapper=st;var Mt=a.dK(De.exports);const Vn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ke=>Ke},nt=Math.fround||(Pn=new Float32Array(1),Ke=>(Pn[0]=+Ke,Pn[0]));var Pn;const Un=3,En=5,bn=6;class Fn{constructor(pe){this.options=Object.assign(Object.create(Vn),pe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(pe){const{log:we,minZoom:Pe,maxZoom:at}=this.options;we&&console.time("total time");const ft=`prepare ${pe.length} points`;we&&console.time(ft),this.points=pe;const it=[];for(let tt=0;tt<pe.length;tt++){const jt=pe[tt];if(!jt.geometry)continue;const[Ut,en]=jt.geometry.coordinates,er=nt(qr(Ut)),Fr=nt(hn(en));it.push(er,Fr,1/0,tt,-1,1),this.options.reduce&&it.push(0)}let ct=this.trees[at+1]=this._createTree(it);we&&console.timeEnd(ft);for(let tt=at;tt>=Pe;tt--){const jt=+Date.now();ct=this.trees[tt]=this._createTree(this._cluster(ct,tt)),we&&console.log("z%d: %d clusters in %dms",tt,ct.numItems,+Date.now()-jt)}return we&&console.timeEnd("total time"),this}getClusters(pe,we){let Pe=((pe[0]+180)%360+360)%360-180;const at=Math.max(-90,Math.min(90,pe[1]));let ft=pe[2]===180?180:((pe[2]+180)%360+360)%360-180;const it=Math.max(-90,Math.min(90,pe[3]));if(pe[2]-pe[0]>=360)Pe=-180,ft=180;else if(Pe>ft){const en=this.getClusters([Pe,at,180,it],we),er=this.getClusters([-180,at,ft,it],we);return en.concat(er)}const ct=this.trees[this._limitZoom(we)],tt=ct.range(qr(Pe),hn(it),qr(ft),hn(at)),jt=ct.data,Ut=[];for(const en of tt){const er=this.stride*en;Ut.push(jt[er+En]>1?On(jt,er,this.clusterProps):this.points[jt[er+Un]])}return Ut}getChildren(pe){const we=this._getOriginId(pe),Pe=this._getOriginZoom(pe),at="No cluster with the specified id.",ft=this.trees[Pe];if(!ft)throw new Error(at);const it=ft.data;if(we*this.stride>=it.length)throw new Error(at);const ct=this.options.radius/(this.options.extent*Math.pow(2,Pe-1)),tt=ft.within(it[we*this.stride],it[we*this.stride+1],ct),jt=[];for(const Ut of tt){const en=Ut*this.stride;it[en+4]===pe&&jt.push(it[en+En]>1?On(it,en,this.clusterProps):this.points[it[en+Un]])}if(jt.length===0)throw new Error(at);return jt}getLeaves(pe,we,Pe){const at=[];return this._appendLeaves(at,pe,we=we||10,Pe=Pe||0,0),at}getTile(pe,we,Pe){const at=this.trees[this._limitZoom(pe)],ft=Math.pow(2,pe),{extent:it,radius:ct}=this.options,tt=ct/it,jt=(Pe-tt)/ft,Ut=(Pe+1+tt)/ft,en={features:[]};return this._addTileFeatures(at.range((we-tt)/ft,jt,(we+1+tt)/ft,Ut),at.data,we,Pe,ft,en),we===0&&this._addTileFeatures(at.range(1-tt/ft,jt,1,Ut),at.data,ft,Pe,ft,en),we===ft-1&&this._addTileFeatures(at.range(0,jt,tt/ft,Ut),at.data,-1,Pe,ft,en),en.features.length?en:null}getClusterExpansionZoom(pe){let we=this._getOriginZoom(pe)-1;for(;we<=this.options.maxZoom;){const Pe=this.getChildren(pe);if(we++,Pe.length!==1)break;pe=Pe[0].properties.cluster_id}return we}_appendLeaves(pe,we,Pe,at,ft){const it=this.getChildren(we);for(const ct of it){const tt=ct.properties;if(tt&&tt.cluster?ft+tt.point_count<=at?ft+=tt.point_count:ft=this._appendLeaves(pe,tt.cluster_id,Pe,at,ft):ft<at?ft++:pe.push(ct),pe.length===Pe)break}return ft}_createTree(pe){const we=new a.bg(pe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Pe=0;Pe<pe.length;Pe+=this.stride)we.add(pe[Pe],pe[Pe+1]);return we.finish(),we.data=pe,we}_addTileFeatures(pe,we,Pe,at,ft,it){for(const ct of pe){const tt=ct*this.stride,jt=we[tt+En]>1;let Ut,en,er;if(jt)Ut=an(we,tt,this.clusterProps),en=we[tt],er=we[tt+1];else{const Vr=this.points[we[tt+Un]];Ut=Vr.properties;const[Cr,vr]=Vr.geometry.coordinates;en=qr(Cr),er=hn(vr)}const Fr={type:1,geometry:[[Math.round(this.options.extent*(en*ft-Pe)),Math.round(this.options.extent*(er*ft-at))]],tags:Ut};let no;no=jt||this.options.generateId?we[tt+Un]:this.points[we[tt+Un]].id,no!==void 0&&(Fr.id=no),it.features.push(Fr)}}_limitZoom(pe){return Math.max(this.options.minZoom,Math.min(Math.floor(+pe),this.options.maxZoom+1))}_cluster(pe,we){const{radius:Pe,extent:at,reduce:ft,minPoints:it}=this.options,ct=Pe/(at*Math.pow(2,we)),tt=pe.data,jt=[],Ut=this.stride;for(let en=0;en<tt.length;en+=Ut){if(tt[en+2]<=we)continue;tt[en+2]=we;const er=tt[en],Fr=tt[en+1],no=pe.within(tt[en],tt[en+1],ct),Vr=tt[en+En];let Cr=Vr;for(const vr of no){const Nr=vr*Ut;tt[Nr+2]>we&&(Cr+=tt[Nr+En])}if(Cr>Vr&&Cr>=it){let vr,Nr=er*Vr,Qe=Fr*Vr,pt=-1;const _t=(en/Ut<<5)+(we+1)+this.points.length;for(const Kt of no){const vn=Kt*Ut;if(tt[vn+2]<=we)continue;tt[vn+2]=we;const tr=tt[vn+En];Nr+=tt[vn]*tr,Qe+=tt[vn+1]*tr,tt[vn+4]=_t,ft&&(vr||(vr=this._map(tt,en,!0),pt=this.clusterProps.length,this.clusterProps.push(vr)),ft(vr,this._map(tt,vn)))}tt[en+4]=_t,jt.push(Nr/Cr,Qe/Cr,1/0,_t,-1,Cr),ft&&jt.push(pt)}else{for(let vr=0;vr<Ut;vr++)jt.push(tt[en+vr]);if(Cr>1)for(const vr of no){const Nr=vr*Ut;if(!(tt[Nr+2]<=we)){tt[Nr+2]=we;for(let Qe=0;Qe<Ut;Qe++)jt.push(tt[Nr+Qe])}}}}return jt}_getOriginId(pe){return pe-this.points.length>>5}_getOriginZoom(pe){return(pe-this.points.length)%32}_map(pe,we,Pe){if(pe[we+En]>1){const it=this.clusterProps[pe[we+bn]];return Pe?Object.assign({},it):it}const at=this.points[pe[we+Un]].properties,ft=this.options.map(at);return Pe&&ft===at?Object.assign({},ft):ft}}function On(Ke,pe,we){return{type:"Feature",id:Ke[pe+Un],properties:an(Ke,pe,we),geometry:{type:"Point",coordinates:[(Pe=Ke[pe],360*(Pe-.5)),Wr(Ke[pe+1])]}};var Pe}function an(Ke,pe,we){const Pe=Ke[pe+En],at=Pe>=1e4?`${Math.round(Pe/1e3)}k`:Pe>=1e3?Math.round(Pe/100)/10+"k":Pe,ft=Ke[pe+bn],it=ft===-1?{}:Object.assign({},we[ft]);return Object.assign(it,{cluster:!0,cluster_id:Ke[pe+Un],point_count:Pe,point_count_abbreviated:at})}function qr(Ke){return Ke/360+.5}function hn(Ke){const pe=Math.sin(Ke*Math.PI/180),we=.5-.25*Math.log((1+pe)/(1-pe))/Math.PI;return we<0?0:we>1?1:we}function Wr(Ke){const pe=(180-360*Ke)*Math.PI/180;return 360*Math.atan(Math.exp(pe))/Math.PI-90}var go={exports:{}};go.exports=function(){function Ke(Ze,Je,Et,Tt){for(var ut,kt=Tt,Rt=Et-Je>>1,Bt=Et-Je,Yt=Ze[Je],Ft=Ze[Je+1],An=Ze[Et],nr=Ze[Et+1],nn=Je+3;nn<Et;nn+=3){var Mn=pe(Ze[nn],Ze[nn+1],Yt,Ft,An,nr);if(Mn>kt)ut=nn,kt=Mn;else if(Mn===kt){var _r=Math.abs(nn-Rt);_r<Bt&&(ut=nn,Bt=_r)}}kt>Tt&&(ut-Je>3&&Ke(Ze,Je,ut,Tt),Ze[ut+2]=kt,Et-ut>3&&Ke(Ze,ut,Et,Tt))}function pe(Ze,Je,Et,Tt,ut,kt){var Rt=ut-Et,Bt=kt-Tt;if(Rt!==0||Bt!==0){var Yt=((Ze-Et)*Rt+(Je-Tt)*Bt)/(Rt*Rt+Bt*Bt);Yt>1?(Et=ut,Tt=kt):Yt>0&&(Et+=Rt*Yt,Tt+=Bt*Yt)}return(Rt=Ze-Et)*Rt+(Bt=Je-Tt)*Bt}function we(Ze,Je,Et,Tt){var ut={id:Ze===void 0?null:Ze,type:Je,geometry:Et,tags:Tt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(kt){var Rt=kt.geometry,Bt=kt.type;if(Bt==="Point"||Bt==="MultiPoint"||Bt==="LineString")Pe(kt,Rt);else if(Bt==="Polygon"||Bt==="MultiLineString")for(var Yt=0;Yt<Rt.length;Yt++)Pe(kt,Rt[Yt]);else if(Bt==="MultiPolygon")for(Yt=0;Yt<Rt.length;Yt++)for(var Ft=0;Ft<Rt[Yt].length;Ft++)Pe(kt,Rt[Yt][Ft])}(ut),ut}function Pe(Ze,Je){for(var Et=0;Et<Je.length;Et+=3)Ze.minX=Math.min(Ze.minX,Je[Et]),Ze.minY=Math.min(Ze.minY,Je[Et+1]),Ze.maxX=Math.max(Ze.maxX,Je[Et]),Ze.maxY=Math.max(Ze.maxY,Je[Et+1])}function at(Ze,Je,Et,Tt){if(Je.geometry){var ut=Je.geometry.coordinates,kt=Je.geometry.type,Rt=Math.pow(Et.tolerance/((1<<Et.maxZoom)*Et.extent),2),Bt=[],Yt=Je.id;if(Et.promoteId?Yt=Je.properties[Et.promoteId]:Et.generateId&&(Yt=Tt||0),kt==="Point")ft(ut,Bt);else if(kt==="MultiPoint")for(var Ft=0;Ft<ut.length;Ft++)ft(ut[Ft],Bt);else if(kt==="LineString")it(ut,Bt,Rt,!1);else if(kt==="MultiLineString"){if(Et.lineMetrics){for(Ft=0;Ft<ut.length;Ft++)it(ut[Ft],Bt=[],Rt,!1),Ze.push(we(Yt,"LineString",Bt,Je.properties));return}ct(ut,Bt,Rt,!1)}else if(kt==="Polygon")ct(ut,Bt,Rt,!0);else{if(kt!=="MultiPolygon"){if(kt==="GeometryCollection"){for(Ft=0;Ft<Je.geometry.geometries.length;Ft++)at(Ze,{id:Yt,geometry:Je.geometry.geometries[Ft],properties:Je.properties},Et,Tt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ft=0;Ft<ut.length;Ft++){var An=[];ct(ut[Ft],An,Rt,!0),Bt.push(An)}}Ze.push(we(Yt,kt,Bt,Je.properties))}}function ft(Ze,Je){Je.push(tt(Ze[0])),Je.push(jt(Ze[1])),Je.push(0)}function it(Ze,Je,Et,Tt){for(var ut,kt,Rt=0,Bt=0;Bt<Ze.length;Bt++){var Yt=tt(Ze[Bt][0]),Ft=jt(Ze[Bt][1]);Je.push(Yt),Je.push(Ft),Je.push(0),Bt>0&&(Rt+=Tt?(ut*Ft-Yt*kt)/2:Math.sqrt(Math.pow(Yt-ut,2)+Math.pow(Ft-kt,2))),ut=Yt,kt=Ft}var An=Je.length-3;Je[2]=1,Ke(Je,0,An,Et),Je[An+2]=1,Je.size=Math.abs(Rt),Je.start=0,Je.end=Je.size}function ct(Ze,Je,Et,Tt){for(var ut=0;ut<Ze.length;ut++){var kt=[];it(Ze[ut],kt,Et,Tt),Je.push(kt)}}function tt(Ze){return Ze/360+.5}function jt(Ze){var Je=Math.sin(Ze*Math.PI/180),Et=.5-.25*Math.log((1+Je)/(1-Je))/Math.PI;return Et<0?0:Et>1?1:Et}function Ut(Ze,Je,Et,Tt,ut,kt,Rt,Bt){if(Tt/=Je,kt>=(Et/=Je)&&Rt<Tt)return Ze;if(Rt<Et||kt>=Tt)return null;for(var Yt=[],Ft=0;Ft<Ze.length;Ft++){var An=Ze[Ft],nr=An.geometry,nn=An.type,Mn=ut===0?An.minX:An.minY,_r=ut===0?An.maxX:An.maxY;if(Mn>=Et&&_r<Tt)Yt.push(An);else if(!(_r<Et||Mn>=Tt)){var Zr=[];if(nn==="Point"||nn==="MultiPoint")en(nr,Zr,Et,Tt,ut);else if(nn==="LineString")er(nr,Zr,Et,Tt,ut,!1,Bt.lineMetrics);else if(nn==="MultiLineString")no(nr,Zr,Et,Tt,ut,!1);else if(nn==="Polygon")no(nr,Zr,Et,Tt,ut,!0);else if(nn==="MultiPolygon")for(var Xn=0;Xn<nr.length;Xn++){var ro=[];no(nr[Xn],ro,Et,Tt,ut,!0),ro.length&&Zr.push(ro)}if(Zr.length){if(Bt.lineMetrics&&nn==="LineString"){for(Xn=0;Xn<Zr.length;Xn++)Yt.push(we(An.id,nn,Zr[Xn],An.tags));continue}nn!=="LineString"&&nn!=="MultiLineString"||(Zr.length===1?(nn="LineString",Zr=Zr[0]):nn="MultiLineString"),nn!=="Point"&&nn!=="MultiPoint"||(nn=Zr.length===3?"Point":"MultiPoint"),Yt.push(we(An.id,nn,Zr,An.tags))}}}return Yt.length?Yt:null}function en(Ze,Je,Et,Tt,ut){for(var kt=0;kt<Ze.length;kt+=3){var Rt=Ze[kt+ut];Rt>=Et&&Rt<=Tt&&(Je.push(Ze[kt]),Je.push(Ze[kt+1]),Je.push(Ze[kt+2]))}}function er(Ze,Je,Et,Tt,ut,kt,Rt){for(var Bt,Yt,Ft=Fr(Ze),An=ut===0?Cr:vr,nr=Ze.start,nn=0;nn<Ze.length-3;nn+=3){var Mn=Ze[nn],_r=Ze[nn+1],Zr=Ze[nn+2],Xn=Ze[nn+3],ro=Ze[nn+4],sr=ut===0?Mn:_r,fo=ut===0?Xn:ro,Fi=!1;Rt&&(Bt=Math.sqrt(Math.pow(Mn-Xn,2)+Math.pow(_r-ro,2))),sr<Et?fo>Et&&(Yt=An(Ft,Mn,_r,Xn,ro,Et),Rt&&(Ft.start=nr+Bt*Yt)):sr>Tt?fo<Tt&&(Yt=An(Ft,Mn,_r,Xn,ro,Tt),Rt&&(Ft.start=nr+Bt*Yt)):Vr(Ft,Mn,_r,Zr),fo<Et&&sr>=Et&&(Yt=An(Ft,Mn,_r,Xn,ro,Et),Fi=!0),fo>Tt&&sr<=Tt&&(Yt=An(Ft,Mn,_r,Xn,ro,Tt),Fi=!0),!kt&&Fi&&(Rt&&(Ft.end=nr+Bt*Yt),Je.push(Ft),Ft=Fr(Ze)),Rt&&(nr+=Bt)}var ni=Ze.length-3;Mn=Ze[ni],_r=Ze[ni+1],Zr=Ze[ni+2],(sr=ut===0?Mn:_r)>=Et&&sr<=Tt&&Vr(Ft,Mn,_r,Zr),ni=Ft.length-3,kt&&ni>=3&&(Ft[ni]!==Ft[0]||Ft[ni+1]!==Ft[1])&&Vr(Ft,Ft[0],Ft[1],Ft[2]),Ft.length&&Je.push(Ft)}function Fr(Ze){var Je=[];return Je.size=Ze.size,Je.start=Ze.start,Je.end=Ze.end,Je}function no(Ze,Je,Et,Tt,ut,kt){for(var Rt=0;Rt<Ze.length;Rt++)er(Ze[Rt],Je,Et,Tt,ut,kt,!1)}function Vr(Ze,Je,Et,Tt){Ze.push(Je),Ze.push(Et),Ze.push(Tt)}function Cr(Ze,Je,Et,Tt,ut,kt){var Rt=(kt-Je)/(Tt-Je);return Ze.push(kt),Ze.push(Et+(ut-Et)*Rt),Ze.push(1),Rt}function vr(Ze,Je,Et,Tt,ut,kt){var Rt=(kt-Et)/(ut-Et);return Ze.push(Je+(Tt-Je)*Rt),Ze.push(kt),Ze.push(1),Rt}function Nr(Ze,Je){for(var Et=[],Tt=0;Tt<Ze.length;Tt++){var ut,kt=Ze[Tt],Rt=kt.type;if(Rt==="Point"||Rt==="MultiPoint"||Rt==="LineString")ut=Qe(kt.geometry,Je);else if(Rt==="MultiLineString"||Rt==="Polygon"){ut=[];for(var Bt=0;Bt<kt.geometry.length;Bt++)ut.push(Qe(kt.geometry[Bt],Je))}else if(Rt==="MultiPolygon")for(ut=[],Bt=0;Bt<kt.geometry.length;Bt++){for(var Yt=[],Ft=0;Ft<kt.geometry[Bt].length;Ft++)Yt.push(Qe(kt.geometry[Bt][Ft],Je));ut.push(Yt)}Et.push(we(kt.id,Rt,ut,kt.tags))}return Et}function Qe(Ze,Je){var Et=[];Et.size=Ze.size,Ze.start!==void 0&&(Et.start=Ze.start,Et.end=Ze.end);for(var Tt=0;Tt<Ze.length;Tt+=3)Et.push(Ze[Tt]+Je,Ze[Tt+1],Ze[Tt+2]);return Et}function pt(Ze,Je){if(Ze.transformed)return Ze;var Et,Tt,ut,kt=1<<Ze.z,Rt=Ze.x,Bt=Ze.y;for(Et=0;Et<Ze.features.length;Et++){var Yt=Ze.features[Et],Ft=Yt.geometry,An=Yt.type;if(Yt.geometry=[],An===1)for(Tt=0;Tt<Ft.length;Tt+=2)Yt.geometry.push(_t(Ft[Tt],Ft[Tt+1],Je,kt,Rt,Bt));else for(Tt=0;Tt<Ft.length;Tt++){var nr=[];for(ut=0;ut<Ft[Tt].length;ut+=2)nr.push(_t(Ft[Tt][ut],Ft[Tt][ut+1],Je,kt,Rt,Bt));Yt.geometry.push(nr)}}return Ze.transformed=!0,Ze}function _t(Ze,Je,Et,Tt,ut,kt){return[Math.round(Et*(Ze*Tt-ut)),Math.round(Et*(Je*Tt-kt))]}function Kt(Ze,Je,Et,Tt,ut){for(var kt=Je===ut.maxZoom?0:ut.tolerance/((1<<Je)*ut.extent),Rt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Et,y:Tt,z:Je,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Bt=0;Bt<Ze.length;Bt++){Rt.numFeatures++,vn(Rt,Ze[Bt],kt,ut);var Yt=Ze[Bt].minX,Ft=Ze[Bt].minY,An=Ze[Bt].maxX,nr=Ze[Bt].maxY;Yt<Rt.minX&&(Rt.minX=Yt),Ft<Rt.minY&&(Rt.minY=Ft),An>Rt.maxX&&(Rt.maxX=An),nr>Rt.maxY&&(Rt.maxY=nr)}return Rt}function vn(Ze,Je,Et,Tt){var ut=Je.geometry,kt=Je.type,Rt=[];if(kt==="Point"||kt==="MultiPoint")for(var Bt=0;Bt<ut.length;Bt+=3)Rt.push(ut[Bt]),Rt.push(ut[Bt+1]),Ze.numPoints++,Ze.numSimplified++;else if(kt==="LineString")tr(Rt,ut,Ze,Et,!1,!1);else if(kt==="MultiLineString"||kt==="Polygon")for(Bt=0;Bt<ut.length;Bt++)tr(Rt,ut[Bt],Ze,Et,kt==="Polygon",Bt===0);else if(kt==="MultiPolygon")for(var Yt=0;Yt<ut.length;Yt++){var Ft=ut[Yt];for(Bt=0;Bt<Ft.length;Bt++)tr(Rt,Ft[Bt],Ze,Et,!0,Bt===0)}if(Rt.length){var An=Je.tags||null;if(kt==="LineString"&&Tt.lineMetrics){for(var nr in An={},Je.tags)An[nr]=Je.tags[nr];An.mapbox_clip_start=ut.start/ut.size,An.mapbox_clip_end=ut.end/ut.size}var nn={geometry:Rt,type:kt==="Polygon"||kt==="MultiPolygon"?3:kt==="LineString"||kt==="MultiLineString"?2:1,tags:An};Je.id!==null&&(nn.id=Je.id),Ze.features.push(nn)}}function tr(Ze,Je,Et,Tt,ut,kt){var Rt=Tt*Tt;if(Tt>0&&Je.size<(ut?Rt:Tt))Et.numPoints+=Je.length/3;else{for(var Bt=[],Yt=0;Yt<Je.length;Yt+=3)(Tt===0||Je[Yt+2]>Rt)&&(Et.numSimplified++,Bt.push(Je[Yt]),Bt.push(Je[Yt+1])),Et.numPoints++;ut&&function(Ft,An){for(var nr=0,nn=0,Mn=Ft.length,_r=Mn-2;nn<Mn;_r=nn,nn+=2)nr+=(Ft[nn]-Ft[_r])*(Ft[nn+1]+Ft[_r+1]);if(nr>0===An)for(nn=0,Mn=Ft.length;nn<Mn/2;nn+=2){var Zr=Ft[nn],Xn=Ft[nn+1];Ft[nn]=Ft[Mn-2-nn],Ft[nn+1]=Ft[Mn-1-nn],Ft[Mn-2-nn]=Zr,Ft[Mn-1-nn]=Xn}}(Bt,kt),Ze.push(Bt)}}function mn(Ze,Je){var Et=(Je=this.options=function(ut,kt){for(var Rt in kt)ut[Rt]=kt[Rt];return ut}(Object.create(this.options),Je)).debug;if(Et&&console.time("preprocess data"),Je.maxZoom<0||Je.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Je.promoteId&&Je.generateId)throw new Error("promoteId and generateId cannot be used together.");var Tt=function(ut,kt){var Rt=[];if(ut.type==="FeatureCollection")for(var Bt=0;Bt<ut.features.length;Bt++)at(Rt,ut.features[Bt],kt,Bt);else at(Rt,ut.type==="Feature"?ut:{geometry:ut},kt);return Rt}(Ze,Je);this.tiles={},this.tileCoords=[],Et&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Je.indexMaxZoom,Je.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Tt=function(ut,kt){var Rt=kt.buffer/kt.extent,Bt=ut,Yt=Ut(ut,1,-1-Rt,Rt,0,-1,2,kt),Ft=Ut(ut,1,1-Rt,2+Rt,0,-1,2,kt);return(Yt||Ft)&&(Bt=Ut(ut,1,-Rt,1+Rt,0,-1,2,kt)||[],Yt&&(Bt=Nr(Yt,1).concat(Bt)),Ft&&(Bt=Bt.concat(Nr(Ft,-1)))),Bt}(Tt,Je)).length&&this.splitTile(Tt,0,0,0),Et&&(Tt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function sn(Ze,Je,Et){return 32*((1<<Ze)*Et+Je)+Ze}return mn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},mn.prototype.splitTile=function(Ze,Je,Et,Tt,ut,kt,Rt){for(var Bt=[Ze,Je,Et,Tt],Yt=this.options,Ft=Yt.debug;Bt.length;){Tt=Bt.pop(),Et=Bt.pop(),Je=Bt.pop(),Ze=Bt.pop();var An=1<<Je,nr=sn(Je,Et,Tt),nn=this.tiles[nr];if(!nn&&(Ft>1&&console.time("creation"),nn=this.tiles[nr]=Kt(Ze,Je,Et,Tt,Yt),this.tileCoords.push({z:Je,x:Et,y:Tt}),Ft)){Ft>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Je,Et,Tt,nn.numFeatures,nn.numPoints,nn.numSimplified),console.timeEnd("creation"));var Mn="z"+Je;this.stats[Mn]=(this.stats[Mn]||0)+1,this.total++}if(nn.source=Ze,ut){if(Je===Yt.maxZoom||Je===ut)continue;var _r=1<<ut-Je;if(Et!==Math.floor(kt/_r)||Tt!==Math.floor(Rt/_r))continue}else if(Je===Yt.indexMaxZoom||nn.numPoints<=Yt.indexMaxPoints)continue;if(nn.source=null,Ze.length!==0){Ft>1&&console.time("clipping");var Zr,Xn,ro,sr,fo,Fi,ni=.5*Yt.buffer/Yt.extent,jl=.5-ni,el=.5+ni,Tu=1+ni;Zr=Xn=ro=sr=null,fo=Ut(Ze,An,Et-ni,Et+el,0,nn.minX,nn.maxX,Yt),Fi=Ut(Ze,An,Et+jl,Et+Tu,0,nn.minX,nn.maxX,Yt),Ze=null,fo&&(Zr=Ut(fo,An,Tt-ni,Tt+el,1,nn.minY,nn.maxY,Yt),Xn=Ut(fo,An,Tt+jl,Tt+Tu,1,nn.minY,nn.maxY,Yt),fo=null),Fi&&(ro=Ut(Fi,An,Tt-ni,Tt+el,1,nn.minY,nn.maxY,Yt),sr=Ut(Fi,An,Tt+jl,Tt+Tu,1,nn.minY,nn.maxY,Yt),Fi=null),Ft>1&&console.timeEnd("clipping"),Bt.push(Zr||[],Je+1,2*Et,2*Tt),Bt.push(Xn||[],Je+1,2*Et,2*Tt+1),Bt.push(ro||[],Je+1,2*Et+1,2*Tt),Bt.push(sr||[],Je+1,2*Et+1,2*Tt+1)}}},mn.prototype.getTile=function(Ze,Je,Et){var Tt=this.options,ut=Tt.extent,kt=Tt.debug;if(Ze<0||Ze>24)return null;var Rt=1<<Ze,Bt=sn(Ze,Je=(Je%Rt+Rt)%Rt,Et);if(this.tiles[Bt])return pt(this.tiles[Bt],ut);kt>1&&console.log("drilling down to z%d-%d-%d",Ze,Je,Et);for(var Yt,Ft=Ze,An=Je,nr=Et;!Yt&&Ft>0;)Ft--,An=Math.floor(An/2),nr=Math.floor(nr/2),Yt=this.tiles[sn(Ft,An,nr)];return Yt&&Yt.source?(kt>1&&console.log("found parent tile z%d-%d-%d",Ft,An,nr),kt>1&&console.time("drilling down"),this.splitTile(Yt.source,Ft,An,nr,Ze,Je,Et),kt>1&&console.timeEnd("drilling down"),this.tiles[Bt]?pt(this.tiles[Bt],ut):null):null},function(Ze,Je){return new mn(Ze,Je)}}();var pr=a.dK(go.exports);function Pr(Ke,pe){const we=Ke.tileID.canonical;if(!this._geoJSONIndex)return pe(null,null);const Pe=this._geoJSONIndex.getTile(we.z,we.x,we.y);if(!Pe)return pe(null,null);const at=new ve(Pe.features);let ft=Mt(at);ft.byteOffset===0&&ft.byteLength===ft.buffer.byteLength||(ft=new Uint8Array(ft)),pe(null,{vectorTile:at,rawData:ft.buffer})}class to extends q{constructor(pe,we,Pe,at,ft,it){super(pe,we,Pe,at,Pr,it),ft&&(this.loadGeoJSON=ft)}loadData(pe,we){const Pe=pe&&pe.request,at=Pe&&Pe.collectResourceTiming;this.loadGeoJSON(pe,(ft,it)=>{if(ft||!it)return we(ft);if(typeof it!="object")return we(new Error(`Input data given to '${pe.source}' is not a valid GeoJSON object.`));{ue(it,!0);try{if(pe.filter){const tt=a.r(pe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(tt.result==="error")throw new Error(tt.value.map(Ut=>`${Ut.key}: ${Ut.message}`).join(", "));it={type:"FeatureCollection",features:it.features.filter(Ut=>tt.value.evaluate({zoom:0},Ut))}}this._geoJSONIndex=pe.cluster?new Fn(function({superclusterOptions:tt,clusterProperties:jt}){if(!jt||!tt)return tt;const Ut={},en={},er={accumulated:null,zoom:0},Fr={properties:null},no=Object.keys(jt);for(const Vr of no){const[Cr,vr]=jt[Vr],Nr=a.r(vr),Qe=a.r(typeof Cr=="string"?[Cr,["accumulated"],["get",Vr]]:Cr);Ut[Vr]=Nr.value,en[Vr]=Qe.value}return tt.map=Vr=>{Fr.properties=Vr;const Cr={};for(const vr of no)Cr[vr]=Ut[vr].evaluate(er,Fr);return Cr},tt.reduce=(Vr,Cr)=>{Fr.properties=Cr;for(const vr of no)er.accumulated=Vr[vr],Vr[vr]=en[vr].evaluate(er,Fr)},tt}(pe)).load(it.features):pr(it,pe.geojsonVtOptions)}catch(tt){return we(tt)}this.loaded={};const ct={};if(at){const tt=E(Pe);tt&&(ct.resourceTiming={},ct.resourceTiming[pe.source]=JSON.parse(JSON.stringify(tt)))}we(null,ct)}})}reloadTile(pe,we){const Pe=this.loaded;return Pe&&Pe[pe.uid]?super.reloadTile(pe,we):this.loadTile(pe,we)}loadGeoJSON(pe,we){if(pe.request)a.g(pe.request,we);else{if(typeof pe.data!="string")return we(new Error(`Input data given to '${pe.source}' is not a valid GeoJSON object.`));try{return we(null,JSON.parse(pe.data))}catch{return we(new Error(`Input data given to '${pe.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(pe,we){try{we(null,this._geoJSONIndex.getClusterExpansionZoom(pe.clusterId))}catch(Pe){we(Pe)}}getClusterChildren(pe,we){try{we(null,this._geoJSONIndex.getChildren(pe.clusterId))}catch(Pe){we(Pe)}}getClusterLeaves(pe,we){try{we(null,this._geoJSONIndex.getLeaves(pe.clusterId,pe.limit,pe.offset))}catch(Pe){we(Pe)}}}class Mr{constructor(pe,we){this.tileID=new a.am(pe.tileID.overscaledZ,pe.tileID.wrap,pe.tileID.canonical.z,pe.tileID.canonical.x,pe.tileID.canonical.y),this.tileZoom=pe.tileZoom,this.uid=pe.uid,this.zoom=pe.zoom,this.canonical=pe.tileID.canonical,this.pixelRatio=pe.pixelRatio,this.tileSize=pe.tileSize,this.source=pe.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=pe.projection,this.brightness=we}parse(pe,we,Pe,at){this.status="parsing";const ft=new a.am(Pe.tileID.overscaledZ,Pe.tileID.wrap,Pe.tileID.canonical.z,Pe.tileID.canonical.x,Pe.tileID.canonical.y),it={},ct=we.familiesBySource[Pe.source],tt=new a.dC(ft,Pe.promoteId);return tt.bucketLayerIDs=[],tt.is3DTile=!0,a.dP(pe).then(jt=>{if(!jt)return at(new Error("Could not parse tile"));const Ut=a.dQ(jt,1/a.bR(Pe.tileID.canonical)),en=jt.json.extensionsUsed&&jt.json.extensionsUsed.includes("MAPBOX_mesh_features")||jt.json.asset.extras&&jt.json.asset.extras.MAPBOX_mesh_features,er=jt.json.extensionsUsed&&jt.json.extensionsUsed.includes("EXT_meshopt_compression"),Fr=new a.K(this.zoom,{brightness:this.brightness});for(const no in ct)for(const Vr of ct[no]){const Cr=Vr[0];tt.bucketLayerIDs.push(Vr.map(Nr=>Nr.id)),Cr.recalculate(Fr,[]);const vr=new a.dR(Ut,ft,en,er,this.brightness,tt);en||(vr.needsUpload=!0),it[Cr.fqid]=vr,vr.evaluate(Cr)}this.status="done",at(null,{buckets:it,featureIndex:tt})}).catch(jt=>at(new Error(jt.message)))}}class mr{constructor(pe,we,Pe,at,ft,it){this.actor=pe,this.layerIndex=we,this.brightness=it,this.loading={},this.loaded={}}loadTile(pe,we){const Pe=pe.uid,at=this.loading[Pe]=new Mr(pe,this.brightness);a.a_(pe.request,(ft,it)=>{const ct=!this.loading[Pe];return delete this.loading[Pe],ct||ft?(at.status="done",ct||(this.loaded[Pe]=at),we(ft)):it&&it.byteLength!==0?void at.parse(it,this.layerIndex,pe,(tt,jt)=>{at.status="done",this.loaded=this.loaded||{},this.loaded[Pe]=at,tt||!jt?we(tt):we(null,jt)}):(at.status="done",this.loaded[Pe]=at,we())})}reloadTile(pe,we){const Pe=this.loaded,at=pe.uid;if(Pe&&Pe[at]){const ft=Pe[at];ft.projection=pe.projection,ft.brightness=pe.brightness;const it=(ct,tt)=>{ft.reloadCallback&&(delete ft.reloadCallback,this.loadTile(pe,we)),we(ct,tt)};ft.status==="parsing"?ft.reloadCallback=it:ft.status==="done"&&this.loadTile(pe,we)}}abortTile(pe,we){const Pe=pe.uid;this.loading[Pe]&&delete this.loading[Pe],we()}removeTile(pe,we){const Pe=this.loaded,at=pe.uid;Pe&&Pe[at]&&delete Pe[at],we()}}class eo{constructor(pe){this.self=pe,this.actor=new a.dS(pe,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=a.bo({name:"mercator"}),this.workerSourceTypes={vector:q,geojson:to,"batched-model":mr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(we,Pe)=>{if(this.workerSourceTypes[we])throw new Error(`Worker source with name "${we}" already registered.`);this.workerSourceTypes[we]=Pe},this.self.registerRTLTextPlugin=we=>{if(a.dT.isParsed())throw new Error("RTL text plugin already registered.");a.dT.applyArabicShaping=we.applyArabicShaping,a.dT.processBidirectionalText=we.processBidirectionalText,a.dT.processStyledBidirectionalText=we.processStyledBidirectionalText}}clearCaches(pe,we,Pe){delete this.layerIndexes[pe],delete this.availableImages[pe],delete this.workerSources[pe],delete this.demWorkerSources[pe],delete this.rasterArrayWorkerSource,Pe()}checkIfReady(pe,we,Pe){Pe()}setReferrer(pe,we){this.referrer=we}spriteLoaded(pe,{scope:we,isLoaded:Pe}){if(this.isSpriteLoaded[pe]||(this.isSpriteLoaded[pe]={}),this.isSpriteLoaded[pe][we]=Pe,this.workerSources[pe]&&this.workerSources[pe][we])for(const at in this.workerSources[pe][we]){const ft=this.workerSources[pe][we][at];for(const it in ft)ft[it]instanceof q&&(ft[it].isSpriteLoaded=Pe,ft[it].fire(new a.b("isSpriteLoaded")))}}setImages(pe,{scope:we,images:Pe},at){if(this.availableImages[pe]||(this.availableImages[pe]={}),this.availableImages[pe][we]=Pe,this.workerSources[pe]&&this.workerSources[pe][we]){for(const ft in this.workerSources[pe][we]){const it=this.workerSources[pe][we][ft];for(const ct in it)it[ct].availableImages=Pe}at()}else at()}setProjection(pe,we){this.projections[pe]=a.bo(we)}setBrightness(pe,we,Pe){this.brightness=we,Pe()}setLayers(pe,we,Pe){this.getLayerIndex(pe,we.scope).replace(we.layers,we.options),Pe()}updateLayers(pe,we,Pe){this.getLayerIndex(pe,we.scope).update(we.layers,we.removedIds,we.options),Pe()}loadTile(pe,we,Pe){we.projection=this.projections[pe]||this.defaultProjection,this.getWorkerSource(pe,we.type,we.source,we.scope).loadTile(we,Pe)}loadDEMTile(pe,we,Pe){this.getDEMWorkerSource(pe,we.source,we.scope).loadTile(we,Pe)}decodeRasterArray(pe,we,Pe){this.getRasterArrayWorkerSource().decodeRasterArray(we,Pe)}reloadTile(pe,we,Pe){we.projection=this.projections[pe]||this.defaultProjection,this.getWorkerSource(pe,we.type,we.source,we.scope).reloadTile(we,Pe)}abortTile(pe,we,Pe){this.getWorkerSource(pe,we.type,we.source,we.scope).abortTile(we,Pe)}removeTile(pe,we,Pe){this.getWorkerSource(pe,we.type,we.source,we.scope).removeTile(we,Pe)}removeSource(pe,we,Pe){if(!(this.workerSources[pe]&&this.workerSources[pe][we.scope]&&this.workerSources[pe][we.scope][we.type]&&this.workerSources[pe][we.scope][we.type][we.source]))return;const at=this.workerSources[pe][we.scope][we.type][we.source];delete this.workerSources[pe][we.scope][we.type][we.source],at.removeSource!==void 0?at.removeSource(we,Pe):Pe()}loadWorkerSource(pe,we,Pe){try{this.self.importScripts(we.url),Pe()}catch(at){Pe(at.toString())}}syncRTLPluginState(pe,we,Pe){try{a.dT.setState(we);const at=a.dT.getPluginURL();if(a.dT.isLoaded()&&!a.dT.isParsed()&&at!=null){this.self.importScripts(at);const ft=a.dT.isParsed();Pe(ft?void 0:new Error(`RTL Text Plugin failed to import scripts from ${at}`),ft)}}catch(at){Pe(at.toString())}}setDracoUrl(pe,we){this.dracoUrl=we}getAvailableImages(pe,we){this.availableImages[pe]||(this.availableImages[pe]={});let Pe=this.availableImages[pe][we];return Pe||(Pe=[]),Pe}getLayerIndex(pe,we){this.layerIndexes[pe]||(this.layerIndexes[pe]={});let Pe=this.layerIndexes[pe][we];return Pe||(Pe=this.layerIndexes[pe][we]=new P,Pe.scope=we),Pe}getWorkerSource(pe,we,Pe,at){if(this.workerSources[pe]||(this.workerSources[pe]={}),this.workerSources[pe][at]||(this.workerSources[pe][at]={}),this.workerSources[pe][at][we]||(this.workerSources[pe][at][we]={}),this.isSpriteLoaded[pe]||(this.isSpriteLoaded[pe]={}),!this.workerSources[pe][at][we][Pe]){const ft={send:(it,ct,tt,jt,Ut,en)=>{this.actor.send(it,ct,tt,pe,Ut,en)},scheduler:this.actor.scheduler};this.workerSources[pe][at][we][Pe]=new this.workerSourceTypes[we](ft,this.getLayerIndex(pe,at),this.getAvailableImages(pe,at),this.isSpriteLoaded[pe][at],void 0,this.brightness)}return this.workerSources[pe][at][we][Pe]}getDEMWorkerSource(pe,we,Pe){return this.demWorkerSources[pe]||(this.demWorkerSources[pe]={}),this.demWorkerSources[pe][Pe]||(this.demWorkerSources[pe][Pe]={}),this.demWorkerSources[pe][Pe][we]||(this.demWorkerSources[pe][Pe][we]=new K),this.demWorkerSources[pe][Pe][we]}getRasterArrayWorkerSource(){return this.rasterArrayWorkerSource||(this.rasterArrayWorkerSource=new Q),this.rasterArrayWorkerSource}enforceCacheSizeLimit(pe,we){a.dU(we)}getWorkerPerformanceMetrics(pe,we,Pe){Pe(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new eo(self)),eo}),f(["./shared"],function(a){function E(g,c){if(Array.isArray(g)){if(!Array.isArray(c)||g.length!==c.length)return!1;for(let h=0;h<g.length;h++)if(!E(g[h],c[h]))return!1;return!0}if(typeof g=="object"&&g!==null&&c!==null){if(typeof c!="object"||Object.keys(g).length!==Object.keys(c).length)return!1;for(const h in g)if(!E(g[h],c[h]))return!1;return!0}return g===c}var C=M;function M(g){return!function(c){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var b,_,w=new Blob([""],{type:"text/javascript"}),k=URL.createObjectURL(w);try{_=new Worker(k),b=!0}catch{b=!1}return _&&_.terminate(),URL.revokeObjectURL(k),b}()?function(){var b=document.createElement("canvas");b.width=b.height=1;var _=b.getContext("2d");if(!_)return!1;var w=_.getImageData(0,0,1,1);return w&&w.width===b.width}()?(P[h=c&&c.failIfMajorPerformanceCaveat]===void 0&&(P[h]=function(b){var _,w=function(k){var D=document.createElement("canvas"),L=Object.create(M.webGLContextAttributes);return L.failIfMajorPerformanceCaveat=k,D.getContext("webgl2",L)}(b);if(!w)return!1;try{_=w.createShader(w.VERTEX_SHADER)}catch{return!1}return!(!_||w.isContextLost())&&(w.shaderSource(_,"void main() {}"),w.compileShader(_),w.getShaderParameter(_,w.COMPILE_STATUS)===!0)}(h)),P[h]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var h}(g)}var P={};function N(g,c,h){const b=document.createElement(g);return c!=null&&(b.className=c),h&&h.appendChild(b),b}function F(g,c,h){const b=document.createElementNS("http://www.w3.org/2000/svg",g);for(const _ of Object.keys(c))b.setAttributeNS(null,_,String(c[_]));return h&&h.appendChild(b),b}M.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const $=typeof document<"u"?document.documentElement&&document.documentElement.style:null,Z=$&&$.userSelect!==void 0?"userSelect":"WebkitUserSelect";let q;function K(){$&&Z&&(q=$[Z],$[Z]="none")}function Q(){$&&Z&&($[Z]=q)}function te(g){g.preventDefault(),g.stopPropagation(),window.removeEventListener("click",te,!0)}function ie(){window.addEventListener("click",te,!0),window.setTimeout(()=>{window.removeEventListener("click",te,!0)},0)}function ue(g,c){const h=g.getBoundingClientRect();return ve(g,h,c)}function re(g,c){const h=g.getBoundingClientRect(),b=[];for(let _=0;_<c.length;_++)b.push(ve(g,h,c[_]));return b}function me(g){return window.InstallTrigger!==void 0&&g.button===2&&g.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:g.button}function ve(g,c,h){const b=g.offsetWidth===c.width?1:g.offsetWidth/c.width;return new a.P((h.clientX-c.left)*b,(h.clientY-c.top)*b)}class De{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(c,h){this._updatedSourceCaches[c]=h,this.setDirty()}discardSourceCacheUpdate(c){delete this._updatedSourceCaches[c]}updateLayer(c){const h=c.scope;this._updatedLayers[h]=this._updatedLayers[h]||new Set,this._updatedLayers[h].add(c.id),this.setDirty()}removeLayer(c){const h=c.scope;this._removedLayers[h]=this._removedLayers[h]||{},this._updatedLayers[h]=this._updatedLayers[h]||new Set,this._removedLayers[h][c.id]=c,this._updatedLayers[h].delete(c.id),this._updatedPaintProps.delete(c.fqid),this.setDirty()}getRemovedLayer(c){return this._removedLayers[c.scope]?this._removedLayers[c.scope][c.id]:null}discardLayerRemoval(c){this._removedLayers[c.scope]&&delete this._removedLayers[c.scope][c.id]}getLayerUpdatesByScope(){const c={};for(const h in this._updatedLayers)c[h]=c[h]||{},c[h].updatedIds=Array.from(this._updatedLayers[h].values());for(const h in this._removedLayers)c[h]=c[h]||{},c[h].removedIds=Object.keys(this._removedLayers[h]);return c}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(c){this._updatedPaintProps.add(c.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(c){this._updatedImages.add(c),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}class je extends a.E{constructor(c){super(),this.requestManager=c,this.models={"":{}},this.numModelsLoading={}}loadModel(c,h){return a.l(this.requestManager.transformRequest(h,a.R.Model).url).then(b=>{if(!b)return;const _=a.c(b),w=new a.M(c,void 0,void 0,_);return w.computeBoundsAndApplyParent(),w}).catch(b=>{this.fire(new a.a(new Error(`Could not load model ${c} from ${h}: ${b.message}`)))})}load(c,h){this.models[h]||(this.models[h]={});const b=Object.keys(c);this.numModelsLoading[h]=(this.numModelsLoading[h]||0)+b.length;const _=[];for(const w of b)_.push(this.loadModel(w,c[w]));Promise.allSettled(_).then(w=>{for(let k=0;k<w.length;k++){const{status:D,value:L}=w[k];D==="fulfilled"&&L&&(this.models[h][b[k]]=L)}this.numModelsLoading[h]-=b.length,this.fire(new a.b("data",{dataType:"style"}))}).catch(w=>{this.fire(new a.a(new Error(`Could not load models: ${w.message}`)))})}isLoaded(){for(const c in this.numModelsLoading)if(this.numModelsLoading[c]>0)return!1;return!0}hasModel(c,h){return!!this.getModel(c,h)}getModel(c,h){return this.models[h]||(this.models[h]={}),this.models[h][c]}addModel(c,h,b){this.models[b]||(this.models[b]={}),this.hasModel(c,b)&&this.removeModel(c,b),this.load({[c]:this.requestManager.normalizeModelURL(h)},b)}addModels(c,h){const b={};for(const _ in c)b[_]=this.requestManager.normalizeModelURL(c[_]);this.load(b,h)}removeModel(c,h){this.models[h]||(this.models[h]={});const b=this.models[h][c];delete this.models[h][c],b.destroy()}listModels(c){return this.models[c]||(this.models[c]={}),Object.keys(this.models[c])}upload(c,h){this.models[h]||(this.models[h]={});for(const b in this.models[h])this.models[h][b].upload(c.context)}}class Be{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(c,h,b){const _=String(h);if(this.stateChanges[c]=this.stateChanges[c]||{},this.stateChanges[c][_]=this.stateChanges[c][_]||{},a.e(this.stateChanges[c][_],b),this.deletedStates[c]===null){this.deletedStates[c]={};for(const w in this.state[c])w!==_&&(this.deletedStates[c][w]=null)}else if(this.deletedStates[c]&&this.deletedStates[c][_]===null){this.deletedStates[c][_]={};for(const w in this.state[c][_])b[w]||(this.deletedStates[c][_][w]=null)}else for(const w in b)this.deletedStates[c]&&this.deletedStates[c][_]&&this.deletedStates[c][_][w]===null&&delete this.deletedStates[c][_][w]}removeFeatureState(c,h,b){if(this.deletedStates[c]===null)return;const _=String(h);if(this.deletedStates[c]=this.deletedStates[c]||{},b&&h!==void 0)this.deletedStates[c][_]!==null&&(this.deletedStates[c][_]=this.deletedStates[c][_]||{},this.deletedStates[c][_][b]=null);else if(h!==void 0)if(this.stateChanges[c]&&this.stateChanges[c][_])for(b in this.deletedStates[c][_]={},this.stateChanges[c][_])this.deletedStates[c][_][b]=null;else this.deletedStates[c][_]=null;else this.deletedStates[c]=null}getState(c,h){const b=String(h),_=a.e({},(this.state[c]||{})[b],(this.stateChanges[c]||{})[b]);if(this.deletedStates[c]===null)return{};if(this.deletedStates[c]){const w=this.deletedStates[c][h];if(w===null)return{};for(const k in w)delete _[k]}return _}initializeTileState(c,h){c.setFeatureState(this.state,h)}coalesceChanges(c,h){const b={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const w={};for(const k in this.stateChanges[_])this.state[_][k]||(this.state[_][k]={}),a.e(this.state[_][k],this.stateChanges[_][k]),w[k]=this.state[_][k];b[_]=w}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const w={};if(this.deletedStates[_]===null)for(const k in this.state[_])w[k]={},this.state[_][k]={};else for(const k in this.deletedStates[_]){if(this.deletedStates[_][k]===null)this.state[_][k]={};else if(this.state[_][k])for(const D of Object.keys(this.deletedStates[_][k]))delete this.state[_][k][D];w[k]=this.state[_][k]}b[_]=b[_]||{},a.e(b[_],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(b).length!==0)for(const _ in c)c[_].setFeatureState(b,h)}}function Ue(g){const{userImage:c}=g;return!!(c&&c.render&&c.render())&&(g.data.replace(new Uint8Array(c.data.buffer)),!0)}class Ge extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0}createScope(c){this.images[c]={},this.loaded[c]=!1,this.updatedImages[c]={},this.patterns[c]={},this.callbackDispatchedThisFrame[c]={},this.atlasImage[c]=new a.h({width:1,height:1})}isLoaded(){for(const c in this.loaded)if(!this.loaded[c])return!1;return!0}setLoaded(c,h){if(this.loaded[h]!==c&&(this.loaded[h]=c,c)){for(const{ids:b,callback:_}of this.requestors)this._notify(b,h,_);this.requestors=[]}}hasImage(c,h){return!!this.getImage(c,h)}getImage(c,h){return this.images[h][c]}addImage(c,h,b){this._validate(c,b)&&(this.images[h][c]=b)}_validate(c,h){let b=!0;return this._validateStretch(h.stretchX,h.data&&h.data.width)||(this.fire(new a.a(new Error(`Image "${c}" has invalid "stretchX" value`))),b=!1),this._validateStretch(h.stretchY,h.data&&h.data.height)||(this.fire(new a.a(new Error(`Image "${c}" has invalid "stretchY" value`))),b=!1),this._validateContent(h.content,h)||(this.fire(new a.a(new Error(`Image "${c}" has invalid "content" value`))),b=!1),b}_validateStretch(c,h){if(!c)return!0;let b=0;for(const _ of c){if(_[0]<b||_[1]<_[0]||h<_[1])return!1;b=_[1]}return!0}_validateContent(c,h){return!(c&&(c.length!==4||c[0]<0||h.data.width<c[0]||c[1]<0||h.data.height<c[1]||c[2]<0||h.data.width<c[2]||c[3]<0||h.data.height<c[3]||c[2]<c[0]||c[3]<c[1]))}updateImage(c,h,b){b.version=this.images[h][c].version+1,this.images[h][c]=b,this.updatedImages[h][c]=!0}removeImage(c,h){const b=this.images[h][c];delete this.images[h][c],delete this.patterns[h][c],b.userImage&&b.userImage.onRemove&&b.userImage.onRemove()}listImages(c){return Object.keys(this.images[c])}getImages(c,h,b){let _=!0;const w=!!this.loaded[h];if(!w)for(const k of c)this.images[h][k]||(_=!1);w||_?this._notify(c,h,b):this.requestors.push({ids:c,scope:h,callback:b})}getUpdatedImages(c){return this.updatedImages[c]}_notify(c,h,b){const _={};for(const w of c){this.images[h][w]||this.fire(new a.b("styleimagemissing",{id:w}));const k=this.images[h][w];k?_[w]={data:k.data.clone(),pixelRatio:k.pixelRatio,sdf:k.sdf,version:k.version,stretchX:k.stretchX,stretchY:k.stretchY,content:k.content,hasRenderCallback:!!(k.userImage&&k.userImage.render)}:a.w(`Image "${w}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}b(null,_)}getPixelSize(c){const{width:h,height:b}=this.atlasImage[c];return{width:h,height:b}}getPattern(c,h){const b=this.patterns[h][c],_=this.getImage(c,h);if(!_)return null;if(b&&b.position.version===_.version)return b.position;if(b)b.position.version=_.version;else{const w={w:_.data.width+2,h:_.data.height+2,x:0,y:0},k=new a.I(w,_);this.patterns[h][c]={bin:w,position:k}}return this._updatePatternAtlas(h),this.patterns[h][c].position}bind(c,h){const b=c.gl;let _=this.atlasTexture[h];_?this.dirty&&(_.update(this.atlasImage[h]),this.dirty=!1):(_=new a.T(c,this.atlasImage[h],b.RGBA),this.atlasTexture[h]=_),_.bind(b.LINEAR,b.CLAMP_TO_EDGE)}_updatePatternAtlas(c){const h=[];for(const k in this.patterns[c])h.push(this.patterns[c][k].bin);const{w:b,h:_}=a.p(h),w=this.atlasImage[c];w.resize({width:b||1,height:_||1});for(const k in this.patterns[c]){const{bin:D}=this.patterns[c][k],L=D.x+1,B=D.y+1,U=this.images[c][k].data,W=U.width,J=U.height;a.h.copy(U,w,{x:0,y:0},{x:L,y:B},{width:W,height:J}),a.h.copy(U,w,{x:0,y:J-1},{x:L,y:B-1},{width:W,height:1}),a.h.copy(U,w,{x:0,y:0},{x:L,y:B+J},{width:W,height:1}),a.h.copy(U,w,{x:W-1,y:0},{x:L-1,y:B},{width:1,height:J}),a.h.copy(U,w,{x:0,y:0},{x:L+W,y:B},{width:1,height:J})}this.dirty=!0}beginFrame(){for(const c in this.images)this.callbackDispatchedThisFrame[c]={}}dispatchRenderCallbacks(c,h){for(const b of c){if(this.callbackDispatchedThisFrame[h][b])continue;this.callbackDispatchedThisFrame[h][b]=!0;const _=this.images[h][b];Ue(_)&&this.updateImage(b,h,_)}}}class ze{constructor(c,h,b,_){this.message=(c?`${c}: `:"")+b,_&&(this.identifier=_),h!=null&&h.__line__&&(this.line=h.__line__)}}class ot extends ze{}function st(g){const c=g.key,h=g.value,b=g.valueSpec||{},_=g.objectElementValidators||{},w=g.style,k=g.styleSpec;let D=[];const L=a.i(h);if(L!=="object")return[new ze(c,h,`object expected, ${L} found`)];for(const B in h){const U=B.split(".")[0];let W;_[U]?W=_[U]:b[U]?W=pr:_["*"]?W=_["*"]:b["*"]&&(W=pr),W?D=D.concat(W({key:(c&&`${c}.`)+B,value:h[B],valueSpec:b[U]||b["*"],style:w,styleSpec:k,object:h,objectKey:B},h)):D.push(new ot(c,h[B],`unknown property "${B}"`))}for(const B in b)_[B]||b[B].required&&b[B].default===void 0&&h[B]===void 0&&D.push(new ze(c,h,`missing required property "${B}"`));return D}function Re(g){const c=g.value,h=g.valueSpec,b=g.style,_=g.styleSpec,w=g.key,k=g.arrayElementValidator||pr;if(a.i(c)!=="array")return[new ze(w,c,`array expected, ${a.i(c)} found`)];if(h.length&&c.length!==h.length)return[new ze(w,c,`array length ${h.length} expected, length ${c.length} found`)];if(h["min-length"]&&c.length<h["min-length"])return[new ze(w,c,`array length at least ${h["min-length"]} expected, length ${c.length} found`)];let D={type:h.value,values:h.values,minimum:h.minimum,maximum:h.maximum,function:void 0};_.$version<7&&(D.function=h.function),a.i(h.value)==="object"&&(D=h.value);let L=[];for(let B=0;B<c.length;B++)L=L.concat(k({array:c,arrayIndex:B,value:c[B],valueSpec:D,style:b,styleSpec:_,key:`${w}[${B}]`},!0));return L}function bt(g){const c=g.key,h=g.value,b=g.valueSpec;let _=a.i(h);if(_==="number"&&h!=h&&(_="NaN"),_!=="number")return[new ze(c,h,`number expected, ${_} found`)];if("minimum"in b){let w=b.minimum;if(a.i(b.minimum)==="array"&&(w=b.minimum[g.arrayIndex]),h<w)return[new ze(c,h,`${h} is less than the minimum value ${w}`)]}if("maximum"in b){let w=b.maximum;if(a.i(b.maximum)==="array"&&(w=b.maximum[g.arrayIndex]),h>w)return[new ze(c,h,`${h} is greater than the maximum value ${w}`)]}return[]}function Lt(g){const c=g.valueSpec,h=a.u(g.value.type);let b,_,w,k={};const D=h!=="categorical"&&g.value.property===void 0,L=!D,B=a.i(g.value.stops)==="array"&&a.i(g.value.stops[0])==="array"&&a.i(g.value.stops[0][0])==="object",U=st({key:g.key,value:g.value,valueSpec:g.styleSpec.function,style:g.style,styleSpec:g.styleSpec,objectElementValidators:{stops:function(ee){if(h==="identity")return[new ze(ee.key,ee.value,'identity function may not have a "stops" property')];let ce=[];const se=ee.value;return ce=ce.concat(Re({key:ee.key,value:se,valueSpec:ee.valueSpec,style:ee.style,styleSpec:ee.styleSpec,arrayElementValidator:W})),a.i(se)==="array"&&se.length===0&&ce.push(new ze(ee.key,se,"array must have at least one stop")),ce},default:function(ee){return pr({key:ee.key,value:ee.value,valueSpec:c,style:ee.style,styleSpec:ee.styleSpec})}}});return h==="identity"&&D&&U.push(new ze(g.key,g.value,'missing required property "property"')),h==="identity"||g.value.stops||U.push(new ze(g.key,g.value,'missing required property "stops"')),h==="exponential"&&g.valueSpec.expression&&!a.s(g.valueSpec)&&U.push(new ze(g.key,g.value,"exponential functions not supported")),g.styleSpec.$version>=8&&(L&&!a.k(g.valueSpec)?U.push(new ze(g.key,g.value,"property functions not supported")):D&&!a.m(g.valueSpec)&&U.push(new ze(g.key,g.value,"zoom functions not supported"))),h!=="categorical"&&!B||g.value.property!==void 0||U.push(new ze(g.key,g.value,'"property" property is required')),U;function W(ee){let ce=[];const se=ee.value,de=ee.key;if(a.i(se)!=="array")return[new ze(de,se,`array expected, ${a.i(se)} found`)];if(se.length!==2)return[new ze(de,se,`array length 2 expected, length ${se.length} found`)];if(B){if(a.i(se[0])!=="object")return[new ze(de,se,`object expected, ${a.i(se[0])} found`)];if(se[0].zoom===void 0)return[new ze(de,se,"object stop key must have zoom")];if(se[0].value===void 0)return[new ze(de,se,"object stop key must have value")];const oe=a.u(se[0].zoom);if(typeof oe!="number")return[new ze(de,se[0].zoom,"stop zoom values must be numbers")];if(w&&w>oe)return[new ze(de,se[0].zoom,"stop zoom values must appear in ascending order")];oe!==w&&(w=oe,_=void 0,k={}),ce=ce.concat(st({key:`${de}[0]`,value:se[0],valueSpec:{zoom:{}},style:ee.style,styleSpec:ee.styleSpec,objectElementValidators:{zoom:bt,value:J}}))}else ce=ce.concat(J({key:`${de}[0]`,value:se[0],valueSpec:{},style:ee.style,styleSpec:ee.styleSpec},se));return a.n(a.o(se[1]))?ce.concat([new ze(`${de}[1]`,se[1],"expressions are not allowed in function stops.")]):ce.concat(pr({key:`${de}[1]`,value:se[1],valueSpec:c,style:ee.style,styleSpec:ee.styleSpec}))}function J(ee,ce){const se=a.i(ee.value),de=a.u(ee.value),oe=ee.value!==null?ee.value:ce;if(b){if(se!==b)return[new ze(ee.key,oe,`${se} stop domain type must match previous stop domain type ${b}`)]}else b=se;if(se!=="number"&&se!=="string"&&se!=="boolean"&&typeof de!="number"&&typeof de!="string"&&typeof de!="boolean")return[new ze(ee.key,oe,"stop domain value must be a number, string, or boolean")];if(se!=="number"&&h!=="categorical"){let fe=`number expected, ${se} found`;return a.k(c)&&h===void 0&&(fe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ze(ee.key,oe,fe)]}return h!=="categorical"||se!=="number"||typeof de=="number"&&isFinite(de)&&Math.floor(de)===de?h!=="categorical"&&se==="number"&&typeof de=="number"&&typeof _=="number"&&_!==void 0&&de<_?[new ze(ee.key,oe,"stop domain values must appear in ascending order")]:(_=de,h==="categorical"&&de in k?[new ze(ee.key,oe,"stop domain values must be unique")]:(k[de]=!0,[])):[new ze(ee.key,oe,`integer expected, found ${String(de)}`)]}}function Ct(g){const c=(g.expressionContext==="property"?a.q:a.r)(a.o(g.value),g.valueSpec);if(c.result==="error")return c.value.map(b=>new ze(`${g.key}${b.key}`,g.value,b.message));const h=c.value.expression||c.value._styleExpression.expression;if(g.expressionContext==="property"&&g.propertyKey==="text-font"&&!h.outputDefined())return[new ze(g.key,g.value,`Invalid data expression for "${g.propertyKey}". Output values must be contained as literals within the expression.`)];if(g.expressionContext==="property"&&g.propertyType==="layout"&&!a.t(h))return[new ze(g.key,g.value,'"feature-state" data expressions are not supported with layout properties.')];if(g.expressionContext==="filter")return Nt(h,g);if(g.expressionContext&&g.expressionContext.indexOf("cluster")===0){if(!a.v(h,["zoom","feature-state"]))return[new ze(g.key,g.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(g.expressionContext==="cluster-initial"&&!a.x(h))return[new ze(g.key,g.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Nt(g,c){const h=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(c.valueSpec&&c.valueSpec.expression)for(const _ of c.valueSpec.expression.parameters)h.delete(_);if(h.size===0)return[];const b=[];return g instanceof a.C&&h.has(g.name)?[new ze(c.key,c.value,`["${g.name}"] expression is not supported in a filter for a ${c.object.type} layer with id: ${c.object.id}`)]:(g.eachChild(_=>{b.push(...Nt(_,c))}),b)}function tn(g){const c=g.key,h=g.value,b=g.valueSpec,_=[];return Array.isArray(b.values)?b.values.indexOf(a.u(h))===-1&&_.push(new ze(c,h,`expected one of [${b.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(b.values).indexOf(a.u(h))===-1&&_.push(new ze(c,h,`expected one of [${Object.keys(b.values).join(", ")}], ${JSON.stringify(h)} found`)),_}function Dt(g){return a.z(a.o(g.value))?Ct(a.j({},g,{expressionContext:"filter",valueSpec:g.styleSpec[`filter_${g.layerType||"fill"}`]})):cn(g)}function cn(g){const c=g.value,h=g.key;if(a.i(c)!=="array")return[new ze(h,c,`array expected, ${a.i(c)} found`)];const b=g.styleSpec;let _,w=[];if(c.length<1)return[new ze(h,c,"filter array must have at least 1 element")];switch(w=w.concat(tn({key:`${h}[0]`,value:c[0],valueSpec:b.filter_operator,style:g.style,styleSpec:g.styleSpec})),a.u(c[0])){case"<":case"<=":case">":case">=":c.length>=2&&a.u(c[1])==="$type"&&w.push(new ze(h,c,`"$type" cannot be use with operator "${c[0]}"`));case"==":case"!=":c.length!==3&&w.push(new ze(h,c,`filter array for operator "${c[0]}" must have 3 elements`));case"in":case"!in":c.length>=2&&(_=a.i(c[1]),_!=="string"&&w.push(new ze(`${h}[1]`,c[1],`string expected, ${_} found`)));for(let k=2;k<c.length;k++)_=a.i(c[k]),a.u(c[1])==="$type"?w=w.concat(tn({key:`${h}[${k}]`,value:c[k],valueSpec:b.geometry_type,style:g.style,styleSpec:g.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&w.push(new ze(`${h}[${k}]`,c[k],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let k=1;k<c.length;k++)w=w.concat(cn({key:`${h}[${k}]`,value:c[k],style:g.style,styleSpec:g.styleSpec}));break;case"has":case"!has":_=a.i(c[1]),c.length!==2?w.push(new ze(h,c,`filter array for "${c[0]}" operator must have 2 elements`)):_!=="string"&&w.push(new ze(`${h}[1]`,c[1],`string expected, ${_} found`))}return w}function Mt(g,c){const h=g.key,b=g.style,_=g.layer,w=g.styleSpec,k=g.value,D=g.objectKey,L=w[`${c}_${g.layerType}`];if(!L)return[];const B=D.match(/^(.*)-transition$/);if(c==="paint"&&B&&L[B[1]]&&L[B[1]].transition)return pr({key:h,value:k,valueSpec:w.transition,style:b,styleSpec:w});const U=g.valueSpec||L[D];if(!U)return[new ot(h,k,`unknown property "${D}"`)];let W;if(a.i(k)==="string"&&a.k(U)&&!U.tokens&&(W=/^{([^}]+)}$/.exec(k))){const ee=`\`{ "type": "identity", "property": ${W?JSON.stringify(W[1]):'"_"'} }\``;return[new ze(h,k,`"${D}" does not support interpolation syntax
Use an identity property function instead: ${ee}.`)]}const J=[];if(g.layerType==="symbol")D!=="text-field"||!b||b.glyphs||b.imports||J.push(new ze(h,k,'use of "text-field" requires a style "glyphs" property')),D==="text-font"&&a.A(a.o(k))&&a.u(k.type)==="identity"&&J.push(new ze(h,k,'"text-font" does not support identity functions'));else if(g.layerType==="model"&&c==="paint"&&_&&_.layout&&_.layout.hasOwnProperty("model-id")&&a.k(U)&&(a.B(U)||a.m(U))){const ee=a.q(a.o(k),U),ce=ee.value.expression||ee.value._styleExpression.expression;ce&&!a.v(ce,["measure-light"])&&(D==="model-emissive-strength"&&a.x(ce)&&a.t(ce)||J.push(new ze(h,k,`${D} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return J.concat(pr({key:g.key,value:k,valueSpec:U,style:b,styleSpec:w,expressionContext:"property",propertyType:c,propertyKey:D}))}function Vn(g){return Mt(g,"paint")}function nt(g){return Mt(g,"layout")}function Pn(g){let c=[];const h=g.value,b=g.key,_=g.style,w=g.styleSpec;h.type||h.ref||c.push(new ze(b,h,'either "type" or "ref" is required'));let k=a.u(h.type);const D=a.u(h.ref);if(h.id){const L=a.u(h.id);for(let B=0;B<g.arrayIndex;B++){const U=_.layers[B];a.u(U.id)===L&&c.push(new ze(b,h.id,`duplicate layer id "${h.id}", previously used at line ${U.id.__line__}`))}}if("ref"in h){let L;["type","source","source-layer","filter","layout"].forEach(B=>{B in h&&c.push(new ze(b,h[B],`"${B}" is prohibited for ref layers`))}),_.layers.forEach(B=>{a.u(B.id)===D&&(L=B)}),L?L.ref?c.push(new ze(b,h.ref,"ref cannot reference another ref layer")):k=a.u(L.type):typeof D=="string"&&c.push(new ze(b,h.ref,`ref layer "${D}" not found`))}else if(k!=="background"&&k!=="sky"&&k!=="slot")if(h.source){const L=_.sources&&_.sources[h.source],B=L&&a.u(L.type);L?B==="vector"&&k==="raster"?c.push(new ze(b,h.source,`layer "${h.id}" requires a raster source`)):B==="raster"&&k!=="raster"?c.push(new ze(b,h.source,`layer "${h.id}" requires a vector source`)):B!=="vector"||h["source-layer"]?B==="raster-dem"&&k!=="hillshade"?c.push(new ze(b,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):B!=="raster-array"||["raster","raster-particle"].includes(k)?k!=="line"||!h.paint||!h.paint["line-gradient"]&&!h.paint["line-trim-offset"]||B==="geojson"&&L.lineMetrics?k==="raster-particle"&&B!=="raster-array"&&c.push(new ze(b,h.source,`layer "${h.id}" requires a 'raster-array' source.`)):c.push(new ze(b,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):c.push(new ze(b,h.source,"raster-array source can only be used with layer type 'raster'.")):c.push(new ze(b,h,`layer "${h.id}" must specify a "source-layer"`)):c.push(new ze(b,h.source,`source "${h.source}" not found`))}else c.push(new ze(b,h,'missing required property "source"'));return c=c.concat(st({key:b,value:h,valueSpec:w.layer,style:g.style,styleSpec:g.styleSpec,objectElementValidators:{"*":()=>[],type:()=>pr({key:`${b}.type`,value:h.type,valueSpec:w.layer.type,style:g.style,styleSpec:g.styleSpec,object:h,objectKey:"type"}),filter:L=>Dt(a.j({layerType:k},L)),layout:L=>st({layer:h,key:L.key,value:L.value,valueSpec:{},style:L.style,styleSpec:L.styleSpec,objectElementValidators:{"*":B=>nt(a.j({layerType:k},B))}}),paint:L=>st({layer:h,key:L.key,value:L.value,valueSpec:{},style:L.style,styleSpec:L.styleSpec,objectElementValidators:{"*":B=>Vn(a.j({layerType:k,layer:h},B))}})}})),c}function Un(g){const c=g.value,h=g.key,b=a.i(c);return b!=="string"?[new ze(h,c,`string expected, ${b} found`)]:[]}const En={promoteId:function({key:g,value:c}){if(a.i(c)==="string")return Un({key:g,value:c});{const h=[];for(const b in c)h.push(...Un({key:`${g}.${b}`,value:c[b]}));return h}}};function bn(g){const c=g.value,h=g.key,b=g.styleSpec,_=g.style;if(!c.type)return[new ze(h,c,'"type" is required')];const w=a.u(c.type);let k=[];switch(["vector","raster","raster-dem","raster-array"].includes(w)&&(c.url||c.tiles||k.push(new ot(h,c,'Either "url" or "tiles" is required.'))),w){case"vector":case"raster":case"raster-dem":case"raster-array":return k=k.concat(st({key:h,value:c,valueSpec:b[`source_${w.replace("-","_")}`],style:g.style,styleSpec:b,objectElementValidators:En})),k;case"geojson":if(k=st({key:h,value:c,valueSpec:b.source_geojson,style:_,styleSpec:b,objectElementValidators:En}),c.cluster)for(const D in c.clusterProperties){const[L,B]=c.clusterProperties[D],U=typeof L=="string"?[L,["accumulated"],["get",D]]:L;k.push(...Ct({key:`${h}.${D}.map`,value:B,expressionContext:"cluster-map"})),k.push(...Ct({key:`${h}.${D}.reduce`,value:U,expressionContext:"cluster-reduce"}))}return k;case"video":return st({key:h,value:c,valueSpec:b.source_video,style:_,styleSpec:b});case"image":return st({key:h,value:c,valueSpec:b.source_image,style:_,styleSpec:b});case"canvas":return[new ze(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return tn({key:`${h}.type`,value:c.type,valueSpec:{values:Fn(b)},style:_,styleSpec:b})}}function Fn(g){return g.source.reduce((c,h)=>{const b=g[h];return b.type.type==="enum"&&(c=c.concat(Object.keys(b.type.values))),c},[])}function On(g){const c=g.value;let h=[];if(!c)return h;const b=a.i(c);return b!=="string"?(h=h.concat([new ze(g.key,c,`string expected, "${b}" found`)]),h):(function(_){const w=_.indexOf("://")===-1;try{return new URL(_,w?"http://example.com":void 0),!0}catch{return!1}}(c)||(h=h.concat([new ze(g.key,c,`invalid url "${c}"`)])),h)}function an(g){const c=g.value,h=g.styleSpec,b=h.light,_=g.style;let w=[];const k=a.i(c);if(c===void 0)return w;if(k!=="object")return w=w.concat([new ze("light",c,`object expected, ${k} found`)]),w;for(const D in c){const L=D.match(/^(.*)-transition$/);w=w.concat(L&&b[L[1]]&&b[L[1]].transition?pr({key:D,value:c[D],valueSpec:h.transition,style:_,styleSpec:h}):b[D]?pr({key:D,value:c[D],valueSpec:b[D],style:_,styleSpec:h}):[new ze(D,c[D],`unknown property "${D}"`)])}return w}function qr(g){const c=g.value;let h=[];if(!c)return h;const b=a.i(c);if(b!=="object")return h=h.concat([new ze("light-3d",c,`object expected, ${b} found`)]),h;const _=g.styleSpec,w=_["light-3d"],k=g.key,D=g.style,L=g.style.lights;for(const W of["type","id"])if(!(W in c))return h=h.concat([new ze("light-3d",c,`missing property ${W} on light`)]),h;if(c.type&&L)for(let W=0;W<g.arrayIndex;W++){const J=a.u(c.type),ee=L[W];a.u(ee.type)===J&&h.push(new ze(k,c.id,`duplicate light type "${c.type}", previously defined at line ${ee.id.__line__}`))}const B=`properties_light_${c.type}`;if(!(B in _))return h=h.concat([new ze("light-3d",c,`Invalid light type ${c.type}`)]),h;const U=_[B];for(const W in c)if(W==="properties"){const J=c[W],ee=a.i(J);if(ee!=="object")return h=h.concat([new ze("properties",J,`object expected, ${ee} found`)]),h;for(const ce in J)h=h.concat(U[ce]?pr({key:ce,value:J[ce],valueSpec:U[ce],style:D,styleSpec:_}):[new ot(g.key,J[ce],`unknown property "${ce}"`)])}else{const J=W.match(/^(.*)-transition$/);h=h.concat(J&&w[J[1]]&&w[J[1]].transition?pr({key:W,value:c[W],valueSpec:_.transition,style:D,styleSpec:_}):w[W]?pr({key:W,value:c[W],valueSpec:w[W],style:D,styleSpec:_}):[new ot(W,c[W],`unknown property "${W}"`)])}return h}function hn(g){const c=g.value,h=g.key,b=g.style,_=g.styleSpec,w=_.terrain;let k=[];const D=a.i(c);if(c===void 0||D==="null")return k;if(D!=="object")return k=k.concat([new ze("terrain",c,`object expected, ${D} found`)]),k;for(const L in c){const B=L.match(/^(.*)-transition$/);k=k.concat(B&&w[B[1]]&&w[B[1]].transition?pr({key:L,value:c[L],valueSpec:_.transition,style:b,styleSpec:_}):w[L]?pr({key:L,value:c[L],valueSpec:w[L],style:b,styleSpec:_}):[new ot(L,c[L],`unknown property "${L}"`)])}if(c.source){const L=b.sources&&b.sources[c.source],B=L&&a.u(L.type);L?B!=="raster-dem"&&k.push(new ze(h,c.source,`terrain cannot be used with a source of type ${String(B)}, it only be used with a "raster-dem" source type`)):k.push(new ze(h,c.source,`source "${c.source}" not found`))}else k.push(new ze(h,c,'terrain is missing required property "source"'));return k}function Wr(g){const c=g.value,h=g.style,b=g.styleSpec,_=b.fog;let w=[];const k=a.i(c);if(c===void 0)return w;if(k!=="object")return w=w.concat([new ze("fog",c,`object expected, ${k} found`)]),w;for(const D in c){const L=D.match(/^(.*)-transition$/);w=w.concat(L&&_[L[1]]&&_[L[1]].transition?pr({key:D,value:c[D],valueSpec:b.transition,style:h,styleSpec:b}):_[D]?pr({key:D,value:c[D],valueSpec:_[D],style:h,styleSpec:b}):[new ot(D,c[D],`unknown property "${D}"`)])}return w}const go={"*":()=>[],array:Re,boolean:function(g){const c=g.value,h=g.key,b=a.i(c);return b!=="boolean"?[new ze(h,c,`boolean expected, ${b} found`)]:[]},number:bt,color:function(g){const c=g.key,h=g.value,b=a.i(h);return b!=="string"?[new ze(c,h,`color expected, ${b} found`)]:a.y(h)===null?[new ze(c,h,`color expected, "${h}" found`)]:[]},enum:tn,filter:Dt,function:Lt,layer:Pn,object:st,source:bn,model:On,light:an,"light-3d":qr,terrain:hn,fog:Wr,string:Un,formatted:function(g){return Un(g).length===0?[]:Ct(g)},resolvedImage:function(g){return Un(g).length===0?[]:Ct(g)},projection:function(g){const c=g.value,h=g.styleSpec,b=h.projection,_=g.style;let w=[];const k=a.i(c);if(k==="object")for(const D in c)w=w.concat(pr({key:D,value:c[D],valueSpec:b[D],style:_,styleSpec:h}));else k!=="string"&&(w=w.concat([new ze("projection",c,`object or string expected, ${k} found`)]));return w},import:function(g){const{value:c,styleSpec:h}=g,{data:b,..._}=c;Object.defineProperty(_,"__line__",{value:c.__line__,enumerable:!1});let w=st(a.j({},g,{value:_,valueSpec:h.import}));return a.u(_.id)===""&&w.push(new ze(`${g.key}.id`,_,"import id can't be an empty string")),b&&(w=w.concat(to(b,h,{key:`${g.key}.data`}))),w}};function pr(g,c=!1){const h=g.value,b=g.valueSpec,_=g.styleSpec;if(b.expression&&a.A(a.u(h)))return Lt(g);if(b.expression&&a.n(a.o(h)))return Ct(g);if(b.type&&go[b.type]){const w=go[b.type](g);return c===!0&&w.length>0&&a.i(g.value)==="array"?Ct(g):w}return st(a.j({},g,{valueSpec:b.type?_[b.type]:b}))}function Pr(g){const c=g.value,h=g.key,b=Un(g);return b.length||(c.indexOf("{fontstack}")===-1&&b.push(new ze(h,c,'"glyphs" url must include a "{fontstack}" token')),c.indexOf("{range}")===-1&&b.push(new ze(h,c,'"glyphs" url must include a "{range}" token'))),b}function to(g,c=a.D,h={}){return pr({key:h.key||"",value:g,valueSpec:c.$root,styleSpec:c,style:g,objectElementValidators:{glyphs:Pr,"*":()=>[]}})}function Mr(g,c=a.D){return tt(to(g,c))}const mr=g=>tt(bn(g)),eo=g=>tt(an(g)),Ke=g=>tt(qr(g)),pe=g=>tt(hn(g)),we=g=>tt(Wr(g)),Pe=g=>tt(Pn(g)),at=g=>tt(Dt(g)),ft=g=>tt(Vn(g)),it=g=>tt(nt(g)),ct=g=>tt(On(g));function tt(g){return g.slice().sort((c,h)=>c.line&&h.line?c.line-h.line:0)}function jt(g,c){let h=!1;if(c&&c.length)for(const b of c)b instanceof ot?a.w(b.message):(g.fire(new a.a(new Error(b.message))),h=!0);return h}const Ut=new a.F({anchor:new a.G(a.D.light.anchor),position:new a.H(a.D.light.position),color:new a.G(a.D.light.color),intensity:new a.G(a.D.light.intensity)});class en extends a.E{constructor(c,h="flat"){super(),this._transitionable=new a.J(Ut),this.setLight(c,h),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(c,h,b={}){this._validate(eo,c,b)||(this._transitionable.setTransitionOrValue(c),this.id=h)}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,h,b){return(!b||b.validate!==!1)&&jt(this,c.call(Mr,a.e({value:h,style:{glyphs:!0,sprite:!0},styleSpec:a.D})))}}const er=new a.F({source:new a.G(a.D.terrain.source),exaggeration:new a.G(a.D.terrain.exaggeration)});let Fr=class extends a.E{constructor(g,c,h,b){super(),this.scope=h,this._transitionable=new a.J(er,h,b),this._transitionable.setTransitionOrValue(g,b),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=c}get(){return this._transitionable.serialize()}set(g,c){this._transitionable.setTransitionOrValue(g,c)}updateTransitions(g){this._transitioning=this._transitionable.transitioned(g,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(g){this.properties=this._transitioning.possiblyEvaluate(g)}getExaggeration(g){return this._transitioning.possiblyEvaluate(new a.K(g)).get("exaggeration")}isZoomDependent(){const g=this._transitionable._values.exaggeration;return g!=null&&g.value!=null&&g.value.expression!=null&&g.value.expression instanceof a.Z}};const no=45,Vr=65,Cr=.05;function vr(g,c,h,b){const _=a.O(no,Vr,h),[w,k]=Nr(g,b);let D=1-Math.min(1,Math.exp((c-w)/(k-w)*-6));return D*=D*D,D=Math.min(1,1.00747*D),D*_*g.alpha}function Nr(g,c){const h=.5/Math.tan(.5*c);return[g.range[0]+h,g.range[1]+h]}function Qe(g,c,h,b,_){const w=a.N.transformMat4([],[c,h,b],_.mercatorFogMatrix);return vr(g,a.N.length(w),_.pitch,_._fov)}function pt(g,c,h,b,_,w,k){const D=[[h,b,0],[_,b,0],[_,w,0],[h,w,0]];let L=Number.MAX_VALUE,B=-Number.MAX_VALUE;for(const U of D){const W=a.N.transformMat4([],U,c),J=a.N.length(W);L=Math.min(L,J),B=Math.max(B,J)}return[vr(g,L,k.pitch,k._fov),vr(g,B,k.pitch,k._fov)]}const _t=new a.F({range:new a.G(a.D.fog.range),color:new a.G(a.D.fog.color),"high-color":new a.G(a.D.fog["high-color"]),"space-color":new a.G(a.D.fog["space-color"]),"horizon-blend":new a.G(a.D.fog["horizon-blend"]),"star-intensity":new a.G(a.D.fog["star-intensity"]),"vertical-range":new a.G(a.D.fog["vertical-range"])});class Kt extends a.E{constructor(c,h,b,_){super(),this._transitionable=new a.J(_t,b,new Map(_)),this.set(c,_),this._transitioning=this._transitionable.untransitioned(),this._transform=h,this.properties=new a.Q(_t)}get state(){const c=this._transform,h=c.projection.name==="globe",b=a.S(c.zoom),_=this.properties.get("range"),w=[.5,3];return{range:h?[a.U(w[0],_[0],b),a.U(w[1],_[1],b)]:_,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(c,h,b={}){if(this._validate(we,c,b))return;const _=a.e({},c);for(const w of Object.keys(a.D.fog))_[w]===void 0&&(_[w]=a.D.fog[w].default);this._options=_,this._transitionable.setTransitionOrValue(this._options,h)}getOpacity(c){if(!this._transform.projection.supportsFog)return 0;const h=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:a.O(no,Vr,c))*h.a}getOpacityAtLatLng(c,h){return this._transform.projection.supportsFog?function(b,_,w){const k=a.L.fromLngLat(_),D=w.elevation?w.elevation.getAtPointOrZero(k):0;return Qe(b,k.x,k.y,D,w)}(this.state,c,h):0}getOpacityForTile(c){if(!this._transform.projection.supportsFog)return[1,1];const h=this._transform.calculateFogTileMatrix(c.toUnwrapped());return pt(this.state,h,0,0,a.V,a.V,this._transform)}getOpacityForBounds(c,h,b,_,w){return this._transform.projection.supportsFog?pt(this.state,c,h,b,_,w,this._transform):[1,1]}getFovAdjustedRange(c){return this._transform.projection.supportsFog?Nr(this.state,c):[0,1]}isVisibleOnFrustum(c){if(!this._transform.projection.supportsFog)return!1;const h=[4,5,6,7];for(const b of h){const _=c.points[b];let w;if(_[2]>=0)w=_;else{const k=c.points[b-4];w=a.W(k,_,k[2]/(k[2]-_[2]))}if(Qe(this.state,w[0],w[1],0,this._transform)>=Cr)return!0}return!1}updateConfig(c){this._transitionable.setTransitionOrValue(this._options,new Map(c))}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,h,b){return(!b||b.validate!==!1)&&jt(this,c.call(Mr,a.e({value:h,style:{glyphs:!0,sprite:!0},styleSpec:a.D})))}}class vn extends a.E{constructor(c,h,b,_){super(),this.scope=b,this._options=c,this.properties=new a.Q(h),this._transitionable=new a.J(h,b,new Map(_)),this._transitionable.setTransitionOrValue(c.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(c){this._transitionable.setTransitionOrValue(this._options.properties,new Map(c))}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(c,h){this._options=c,this._transitionable.setTransitionOrValue(c.properties,h)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}const tr=new a.F({color:new a.G(a.D.properties_light_ambient.color),intensity:new a.G(a.D.properties_light_ambient.intensity)}),mn=new a.F({direction:new a.X(a.D.properties_light_directional.direction),color:new a.G(a.D.properties_light_directional.color),intensity:new a.G(a.D.properties_light_directional.intensity),"cast-shadows":new a.G(a.D.properties_light_directional["cast-shadows"]),"shadow-intensity":new a.G(a.D.properties_light_directional["shadow-intensity"])});class sn{constructor(c,h,b,_){this.screenBounds=c,this.cameraPoint=h,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=b,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,_)}static createFromScreenPoints(c,h){let b,_;if(c instanceof a.P||typeof c[0]=="number"){const w=a.P.convert(c);b=[w],_=h.isPointAboveHorizon(w)}else{const w=a.P.convert(c[0]),k=a.P.convert(c[1]);b=[w,k],_=a.Y(w,k).every(D=>h.isPointAboveHorizon(D))}return new sn(b,h.getCameraPoint(),_,h)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(c){return a.Y(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],c)}bufferedCameraGeometry(c){const h=this.screenBounds[0],b=this.screenBounds.length===1?this.screenBounds[0].add(new a.P(1,1)):this.screenBounds[1],_=a.Y(h,b,0,!1);return this.cameraPoint.y>b.y&&(this.cameraPoint.x>h.x&&this.cameraPoint.x<b.x?_.splice(3,0,this.cameraPoint):this.cameraPoint.x>=b.x?_[2]=this.cameraPoint:this.cameraPoint.x<=h.x&&(_[3]=this.cameraPoint)),a._(_,c)}bufferedCameraGeometryGlobe(c){const h=this.screenBounds[0],b=this.screenBounds.length===1?this.screenBounds[0].add(new a.P(1,1)):this.screenBounds[1],_=a.Y(h,b,c),w=this.cameraPoint.clone();switch(3*((w.y>h.y)+(w.y>b.y))+((w.x>h.x)+(w.x>b.x))){case 0:_[0]=w,_[4]=w.clone();break;case 1:_.splice(1,0,w);break;case 2:_[1]=w;break;case 3:_.splice(4,0,w);break;case 5:_.splice(2,0,w);break;case 6:_[3]=w;break;case 7:_.splice(3,0,w);break;case 8:_[2]=w}return _}containsTile(c,h,b,_=0){const w=c.queryPadding/h._pixelsPerMercatorPixel+1,k=b?this._bufferedCameraMercator(w,h):this._bufferedScreenMercator(w,h);let D=c.tileID.wrap+(k.unwrapped?_:0);const L=k.polygon.map(de=>a.$(c.tileTransform,de,D));if(!a.a0(L,0,0,a.V,a.V))return;D=c.tileID.wrap+(this.screenGeometryMercator.unwrapped?_:0);const B=this.screenGeometryMercator.polygon.map(de=>a.a1(c.tileTransform,de,D)),U=B.map(de=>new a.P(de[0],de[1])),W=h.getFreeCameraOptions().position||new a.L(0,0,0),J=a.a1(c.tileTransform,W,D),ee=B.map(de=>{const oe=a.N.sub(de,de,J);return a.N.normalize(oe,oe),new a.a2(J,oe)}),ce=a.a3(c,1,h.zoom)*h._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:U,tilespaceRays:ee,bufferedTilespaceGeometry:L,bufferedTilespaceBounds:(se=a.a4(L),se.min.x=a.aa(se.min.x,0,a.V),se.min.y=a.aa(se.min.y,0,a.V),se.max.x=a.aa(se.max.x,0,a.V),se.max.y=a.aa(se.max.y,0,a.V),se),tile:c,tileID:c.tileID,pixelToTileUnitsFactor:ce};var se}_bufferedScreenMercator(c,h){const b=Et(c);if(this._screenRaycastCache[b])return this._screenRaycastCache[b];{let _;return _=h.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(c),h):{polygon:this.bufferedScreenGeometry(c).map(w=>h.pointCoordinate3D(w)),unwrapped:!0},this._screenRaycastCache[b]=_,_}}_bufferedCameraMercator(c,h){const b=Et(c);if(this._cameraRaycastCache[b])return this._cameraRaycastCache[b];{let _;return _=h.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(c),h):{polygon:this.bufferedCameraGeometry(c).map(w=>h.pointCoordinate3D(w)),unwrapped:!0},this._cameraRaycastCache[b]=_,_}}_projectAndResample(c,h){const b=function(w,k){const D=a.a6.multiply([],k.pixelMatrix,k.globeMatrix),L=[0,-a.ab,0,1],B=[0,a.ab,0,1],U=[0,0,0,1];a.a7.transformMat4(L,L,D),a.a7.transformMat4(B,B,D),a.a7.transformMat4(U,U,D);const W=new a.P(L[0]/L[3],L[1]/L[3]),J=new a.P(B[0]/B[3],B[1]/B[3]),ee=a.a8(w,W)&&L[3]<U[3],ce=a.a8(w,J)&&B[3]<U[3];if(!ee&&!ce)return null;const se=function(Ce,Ne,Fe){for(let G=1;G<Ce.length;G++){const R=Je(Ne.pointCoordinate3D(Ce[G-1]).x),H=Je(Ne.pointCoordinate3D(Ce[G]).x);if(Fe<0){if(R<H)return{idx:G,t:-R/(H-1-R)}}else if(H<R)return{idx:G,t:(1-R)/(H+1-R)}}return null}(w,k,ee?-1:1);if(!se)return null;const{idx:de,t:oe}=se;let fe=de>1?Ze(w.slice(0,de),k):[],Te=de<w.length?Ze(w.slice(de),k):[];fe=fe.map(Ce=>new a.P(Je(Ce.x),Ce.y)),Te=Te.map(Ce=>new a.P(Je(Ce.x),Ce.y));const be=[...fe];be.length===0&&be.push(Te[Te.length-1]);const Ee=a.U(be[be.length-1].y,(Te.length===0?fe[0]:Te[0]).y,oe);let he;return he=ee?[new a.P(0,Ee),new a.P(0,0),new a.P(1,0),new a.P(1,Ee)]:[new a.P(1,Ee),new a.P(1,1),new a.P(0,1),new a.P(0,Ee)],be.push(...he),Te.length===0?be.push(fe[0]):be.push(...Te),{polygon:be.map(Ce=>new a.L(Ce.x,Ce.y)),unwrapped:!1}}(c,h);if(b)return b;const _=function(w,k){let D=!1,L=-1/0,B=0;for(let W=0;W<w.length-1;W++)w[W].x>L&&(L=w[W].x,B=W);for(let W=0;W<w.length-1;W++){const J=(B+W)%(w.length-1),ee=w[J],ce=w[J+1];Math.abs(ee.x-ce.x)>.5&&(ee.x<ce.x?(ee.x+=1,J===0&&(w[w.length-1].x+=1)):(ce.x+=1,J+1===w.length-1&&(w[0].x+=1)),D=!0)}const U=a.a5(k.center.lng);return D&&U<Math.abs(U-1)&&w.forEach(W=>{W.x-=1}),{polygon:w,unwrapped:D}}(Ze(c,h).map(w=>new a.P(Je(w.x),w.y)),h);return{polygon:_.polygon.map(w=>new a.L(w.x,w.y)),unwrapped:_.unwrapped}}}function Ze(g,c){return a.a9(g,h=>{const b=c.pointCoordinate3D(h);h.x=b.x,h.y=b.y},1/256)}function Je(g){return g<0?1+g%1:g%1}function Et(g){return 100*g|0}function Tt(g,c,h,b,_){const w=function(k,D){if(k)return _(k);if(D){g.url&&D.tiles&&g.tiles&&delete g.tiles;const L=a.ac(a.e(D,g),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);D.vector_layers&&(L.vectorLayers=D.vector_layers,L.vectorLayerIds=L.vectorLayers.map(B=>B.id)),D.raster_layers&&(L.rasterLayers=D.raster_layers,L.rasterLayerIds=L.rasterLayers.map(B=>B.id)),L.tiles=c.canonicalizeTileset(L,g.url),_(null,L)}};return g.url?a.g(c.transformRequest(c.normalizeSourceURL(g.url,null,h,b),a.R.Source),w):a.f.frame(()=>w(null,g))}class ut{constructor(c,h,b){this.bounds=a.ad.convert(this.validateBounds(c)),this.minzoom=h||0,this.maxzoom=b||24}validateBounds(c){return Array.isArray(c)&&c.length===4?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]}contains(c){const h=Math.pow(2,c.z),b=Math.floor(a.a5(this.bounds.getWest())*h),_=Math.floor(a.ae(this.bounds.getNorth())*h),w=Math.ceil(a.a5(this.bounds.getEast())*h),k=Math.ceil(a.ae(this.bounds.getSouth())*h);return c.x>=b&&c.x<w&&c.y>=_&&c.y<k}}class kt extends a.E{constructor(c,h,b,_){if(super(),this.id=c,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.ac(h,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},h),this._collectResourceTiming=!!h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_),this._tileWorkers={},this._deduped=new a.af}load(c){this._loaded=!1,this.fire(new a.b("dataloading",{dataType:"source"}));const h=Array.isArray(this.map._language)?this.map._language.join():this.map._language,b=this.map._worldview;this._tileJSONRequest=Tt(this._options,this.map._requestManager,h,b,(_,w)=>{this._tileJSONRequest=null,this._loaded=!0,_?(h&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${h}`),b&&b.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${b}`),this.fire(new a.a(_))):w&&(a.e(this,w),w.bounds&&(this.tileBounds=new ut(w.bounds,this.minzoom,this.maxzoom)),a.aj(w.tiles,this.map._requestManager._customAccessToken),this.fire(new a.b("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.b("data",{dataType:"source",sourceDataType:"content"}))),c&&c(_)})}loaded(){return this._loaded}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}onAdd(c){this.map=c,this.load()}reload(){this.cancelTileJSONRequest();const c=a.ag(this.id,this.scope);this.load(()=>this.map.style.clearSource(c))}setTiles(c){return this._options.tiles=c,this.reload(),this}setUrl(c){return this.url=c,this._options.url=c,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return a.e({},this._options)}loadTile(c,h){const b=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme)),_={request:this.map._requestManager.transformRequest(b,a.R.Tile),data:void 0,uid:c.uid,tileID:c.tileID,tileZoom:c.tileZoom,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:a.f.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:c.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:c.isExtraShadowCaster};if(_.request.collectResourceTiming=this._collectResourceTiming,c.actor&&c.state!=="expired")c.state==="loading"?c.reloadCallback=h:c.request=c.actor.send("reloadTile",_,w.bind(this));else if(c.actor=this._tileWorkers[b]=this._tileWorkers[b]||this.dispatcher.getActor(),this.dispatcher.ready)c.request=c.actor.send("loadTile",_,w.bind(this),void 0,!0);else{const k=a.ah.call({deduped:this._deduped},_,(D,L)=>{D||!L?w.call(this,D):(_.data={cacheControl:L.cacheControl,expires:L.expires,rawData:L.rawData.slice(0)},c.actor&&c.actor.send("loadTile",_,w.bind(this),void 0,!0))},!0);c.request={cancel:k}}function w(k,D){return delete c.request,c.aborted?h(null):k&&k.status!==404?h(k):(D&&D.resourceTiming&&(c.resourceTiming=D.resourceTiming),this.map._refreshExpiredTiles&&D&&c.setExpiryData(D),c.loadVectorData(D,this.map.painter),a.ai(this.dispatcher),h(null),void(c.reloadCallback&&(this.loadTile(c,c.reloadCallback),c.reloadCallback=null)))}}abortTile(c){c.request&&(c.request.cancel(),delete c.request),c.actor&&c.actor.send("abortTile",{uid:c.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(c){c.actor&&c.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id,scope:this.scope}),c.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Rt extends a.E{constructor(c,h,b,_){super(),this.id=c,this.dispatcher=b,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},h),a.e(this,a.ac(h,["url","scheme","tileSize"]))}load(c){this._loaded=!1,this.fire(new a.b("dataloading",{dataType:"source"})),this._tileJSONRequest=Tt(this._options,this.map._requestManager,null,null,(h,b)=>{this._tileJSONRequest=null,this._loaded=!0,h?this.fire(new a.a(h)):b&&(a.e(this,b),b.bounds&&(this.tileBounds=new ut(b.bounds,this.minzoom,this.maxzoom)),a.aj(b.tiles),this.fire(new a.b("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.b("data",{dataType:"source",sourceDataType:"content"}))),c&&c(h)})}loaded(){return this._loaded}onAdd(c){this.map=c,this.load()}reload(){this.cancelTileJSONRequest();const c=a.ag(this.id,this.scope);this.load(()=>this.map.style.clearSource(c))}setTiles(c){return this._options.tiles=c,this.reload(),this}setUrl(c){return this.url=c,this._options.url=c,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return a.e({},this._options)}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}loadTile(c,h){const b=a.f.devicePixelRatio>=2,_=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),b,this.tileSize);c.request=a.d(this.map._requestManager.transformRequest(_,a.R.Tile),(w,k,D,L)=>(delete c.request,c.aborted?(c.state="unloaded",h(null)):w?(c.state="errored",h(w)):k?(this.map._refreshExpiredTiles&&c.setExpiryData({cacheControl:D,expires:L}),c.setTexture(k,this.map.painter),c.state="loaded",a.ai(this.dispatcher),void h(null)):h(null)))}abortTile(c,h){c.request&&(c.request.cancel(),delete c.request),h()}unloadTile(c,h){c.texture&&c.texture instanceof a.T?(c.destroy(!0),c.texture&&c.texture instanceof a.T&&this.map.painter.saveTileTexture(c.texture)):c.destroy(),h()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Bt extends Rt{constructor(c,h,b,_){super(c,h,b,_),this.type="raster-array",this.maxzoom=22,this._options=a.e({type:"raster-array"},h)}triggerRepaint(c){const h=this.map.painter._terrain,b=this.map.style.getSourceCache(this.id);h&&h.enabled&&b&&h._clearRenderCacheForTile(b.id,c.tileID),this.map.triggerRepaint()}loadTile(c,h){const b=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),_=this.map._requestManager.transformRequest(b,a.R.Tile);c.requestParams=_,c.actor||(c.actor=this.dispatcher.getActor()),c.request=c.fetchHeader(void 0,(w,k,D,L)=>{if(delete c.request,c.aborted)return c.state="unloaded",h(null);if(w)return w.code===20?void 0:(c.state="errored",h(w));this.map._refreshExpiredTiles&&c.setExpiryData({cacheControl:D,expires:L}),c.state="empty",h(null)})}unloadTile(c){const h=c.texture;h&&h instanceof a.T?(c.destroy(!0),this.map.painter.saveTileTexture(h)):(c.destroy(),c.flushQueues(),c._isHeaderLoaded=!1,delete c._mrt,delete c.textureDescriptor),c.fbo&&(c.fbo.destroy(),delete c.fbo),delete c.request,delete c.requestParams,delete c.neighboringTiles,c.state="unloaded"}prepareTile(c,h,b){c._isHeaderLoaded&&(c.state!=="empty"&&(c.state="reloading"),c.fetchBand(h,b,(_,w)=>{if(_)return c.state="errored",this.fire(new a.a(_)),void this.triggerRepaint(c);w&&(c.setTexture(w,this.map.painter),c.state="loaded",this.triggerRepaint(c))}))}getInitialBand(c){if(!this.rasterLayers)return 0;const h=this.rasterLayers.find(({id:w})=>w===c),b=h&&h.fields,_=b&&b.bands&&b.bands;return _?_[0]:0}getTextureDescriptor(c,h,b){if(!c)return;const _=h.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!_)return;let w=null;h instanceof a.an?w=h.paint.get("raster-array-band"):h instanceof a.ao&&(w=h.paint.get("raster-particle-array-band"));const k=w||this.getInitialBand(_);if(k!=null)if(c.textureDescriptor){if(!c.updateNeeded(_,k)||b)return Object.assign({},c.textureDescriptor,{texture:c.texture})}else this.prepareTile(c,_,k)}}const Yt=32,Ft=33,An=new Uint16Array(8184);for(let g=0;g<2046;g++){let c=g+2,h=0,b=0,_=0,w=0,k=0,D=0;for(1&c?_=w=k=Yt:h=b=D=Yt;(c>>=1)>1;){const B=h+_>>1,U=b+w>>1;1&c?(_=h,w=b,h=k,b=D):(h=_,b=w,_=k,w=D),k=B,D=U}const L=4*g;An[L+0]=h,An[L+1]=b,An[L+2]=_,An[L+3]=w}const nr=new Uint16Array(2178),nn=new Uint8Array(1089),Mn=new Uint16Array(1089);function _r(g){return g===0?-.03125:g===32?.03125:0}class Zr{constructor(c,h,b,_){this.id=Zr.uniqueIdxCounter,Zr.uniqueIdxCounter++,this.context=c;const w=c.gl;this.buffer=w.createBuffer(),this.dynamicDraw=!!b,this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||_||h.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(c){this.id=Zr.uniqueIdxCounter,Zr.uniqueIdxCounter++;const h=this.context.gl;this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}Zr.uniqueIdxCounter=0;const Xn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ro{constructor(c,h,b,_,w,k){this.length=h.length,this.attributes=b,this.itemSize=h.bytesPerElement,this.dynamicDraw=_,this.instanceCount=k,this.context=c;const D=c.gl;this.buffer=D.createBuffer(),c.bindVertexBuffer.set(this.buffer),D.bufferData(D.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?D.DYNAMIC_DRAW:D.STATIC_DRAW),this.dynamicDraw||w||h.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(c){const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,c.arrayBuffer)}enableAttributes(c,h){for(let b=0;b<this.attributes.length;b++){const _=h.attributes[this.attributes[b].name];_!==void 0&&c.enableVertexAttribArray(_)}}setVertexAttribPointers(c,h,b){for(let _=0;_<this.attributes.length;_++){const w=this.attributes[_],k=h.attributes[w.name];k!==void 0&&c.vertexAttribPointer(k,w.components,c[Xn[w.type]],!1,this.itemSize,w.offset+this.itemSize*(b||0))}}setVertexAttribDivisor(c,h,b){for(let _=0;_<this.attributes.length;_++){const w=h.attributes[this.attributes[_].name];w!==void 0&&this.instanceCount&&this.instanceCount>0&&c.vertexAttribDivisor(w,b)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class sr{constructor(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(c){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class fo extends sr{getDefault(){return a.ax.transparent}set(c){const h=this.current;(c.r!==h.r||c.g!==h.g||c.b!==h.b||c.a!==h.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class Fi extends sr{getDefault(){return 1}set(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)}}class ni extends sr{getDefault(){return 0}set(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)}}class jl extends sr{getDefault(){return[!0,!0,!0,!0]}set(c){const h=this.current;(c[0]!==h[0]||c[1]!==h[1]||c[2]!==h[2]||c[3]!==h[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class el extends sr{getDefault(){return!0}set(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)}}class Tu extends sr{getDefault(){return 255}set(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)}}class mm extends sr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(c){const h=this.current;(c.func!==h.func||c.ref!==h.ref||c.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)}}class Rc extends sr{getDefault(){const c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]}set(c){const h=this.current;(c[0]!==h[0]||c[1]!==h[1]||c[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)}}class gm extends sr{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;c?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=c,this.dirty=!1}}class Su extends sr{getDefault(){return[0,1]}set(c){const h=this.current;(c[0]!==h[0]||c[1]!==h[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)}}class L0 extends sr{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;c?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=c,this.dirty=!1}}class df extends sr{getDefault(){return this.gl.LESS}set(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)}}class ym extends sr{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;c?h.enable(h.BLEND):h.disable(h.BLEND),this.current=c,this.dirty=!1}}class tl extends sr{getDefault(){const c=this.gl;return[c.ONE,c.ZERO,c.ONE,c.ZERO]}set(c){const h=this.current;(c[0]!==h[0]||c[1]!==h[1]||c[2]!==h[2]||c[3]!==h[3]||this.dirty)&&(this.gl.blendFuncSeparate(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class bm extends sr{getDefault(){return a.ax.transparent}set(c){const h=this.current;(c.r!==h.r||c.g!==h.g||c.b!==h.b||c.a!==h.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class Oa extends sr{getDefault(){return this.gl.FUNC_ADD}set(c){(c!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(c,c),this.current=c,this.dirty=!1)}}class So extends sr{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;c?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=c,this.dirty=!1}}class yr extends sr{getDefault(){return this.gl.BACK}set(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)}}class N0 extends sr{getDefault(){return this.gl.CCW}set(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)}}let hf=class extends sr{getDefault(){return null}set(g){(g!==this.current||this.dirty)&&(this.gl.useProgram(g),this.current=g,this.dirty=!1)}};class vm extends sr{getDefault(){return this.gl.TEXTURE0}set(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)}}class Sv extends sr{getDefault(){const c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]}set(c){const h=this.current;(c[0]!==h[0]||c[1]!==h[1]||c[2]!==h[2]||c[3]!==h[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class Ms extends sr{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,c),this.current=c,this.dirty=!1}}class Pd extends sr{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Cu extends sr{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,c),this.current=c,this.dirty=!1}}class nl extends sr{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class Qt extends sr{getDefault(){return null}set(c){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class jr extends sr{getDefault(){return null}set(c){this.gl&&(c!==this.current||this.dirty)&&(this.gl.bindVertexArray(c),this.current=c,this.dirty=!1)}}class $r extends sr{getDefault(){return 4}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}}class Ga extends sr{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}}class ku extends sr{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}}class kr extends sr{constructor(c,h){super(c),this.context=c,this.parent=h}getDefault(){return null}}class Au extends kr{setDirty(){this.dirty=!0}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class Mu extends kr{attachment(){return this.gl.DEPTH_ATTACHMENT}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,this.attachment(),h.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Od extends kr{attachment(){return this.gl.DEPTH_ATTACHMENT}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,this.attachment(),h.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class bi extends Mu{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Kr{constructor(c,h,b,_,w){this.context=c,this.width=h,this.height=b;const k=this.framebuffer=c.gl.createFramebuffer();_&&(this.colorAttachment=new Au(c,k)),w&&(this.depthAttachmentType=w,this.depthAttachment=w==="renderbuffer"?new Mu(c,k):new Od(c,k))}destroy(){const c=this.context.gl;if(this.colorAttachment){const h=this.colorAttachment.get();h&&c.deleteTexture(h)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const h=this.depthAttachment.get();h&&c.deleteRenderbuffer(h)}else{const h=this.depthAttachment.get();h&&c.deleteTexture(h)}c.deleteFramebuffer(this.framebuffer)}}class gn{constructor(c,h,b){this.func=c,this.mask=h,this.range=b}}gn.ReadOnly=!1,gn.ReadWrite=!0,gn.disabled=new gn(519,gn.ReadOnly,[0,1]);const vi=7680;class Dn{constructor(c,h,b,_,w,k){this.test=c,this.ref=h,this.mask=b,this.fail=_,this.depthFail=w,this.pass=k}}Dn.disabled=new Dn({func:519,mask:0},0,0,vi,vi,vi);const ds=771;class rr{constructor(c,h,b,_){this.blendFunction=c,this.blendColor=h,this.mask=b,this.blendEquation=_}}rr.Replace=[1,0,1,0],rr.disabled=new rr(rr.Replace,a.ax.transparent,[!1,!1,!1,!1]),rr.unblended=new rr(rr.Replace,a.ax.transparent,[!0,!0,!0,!0]),rr.alphaBlended=new rr([1,ds,1,ds],a.ax.transparent,[!0,!0,!0,!0]),rr.multiply=new rr([774,0,774,0],a.ax.transparent,[!0,!0,!0,!0]);const qa=1029,qo=2305;class Rn{constructor(c,h,b){this.enable=c,this.mode=h,this.frontFace=b}}Rn.disabled=new Rn(!1,qa,qo),Rn.backCCW=new Rn(!0,qa,qo),Rn.backCW=new Rn(!0,qa,2304),Rn.frontCW=new Rn(!0,1028,2304),Rn.frontCCW=new Rn(!0,1028,qo);class ff{constructor(c,h){this.gl=c,this.clearColor=new fo(this),this.clearDepth=new Fi(this),this.clearStencil=new ni(this),this.colorMask=new jl(this),this.depthMask=new el(this),this.stencilMask=new Tu(this),this.stencilFunc=new mm(this),this.stencilOp=new Rc(this),this.stencilTest=new gm(this),this.depthRange=new Su(this),this.depthTest=new L0(this),this.depthFunc=new df(this),this.blend=new ym(this),this.blendFunc=new tl(this),this.blendColor=new bm(this),this.blendEquation=new Oa(this),this.cullFace=new So(this),this.cullFaceSide=new yr(this),this.frontFace=new N0(this),this.program=new hf(this),this.activeTexture=new vm(this),this.viewport=new Sv(this),this.bindFramebuffer=new Ms(this),this.bindRenderbuffer=new Pd(this),this.bindTexture=new Cu(this),this.bindVertexBuffer=new nl(this),this.bindElementBuffer=new Qt(this),this.bindVertexArrayOES=new jr(this),this.pixelStoreUnpack=new $r(this),this.pixelStoreUnpackPremultiplyAlpha=new Ga(this),this.pixelStoreUnpackFlipY=new ku(this),this.options=h?{...h}:{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=c.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=c.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=c.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=c.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=c.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=c.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE),this.maxPointSize=c.getParameter(c.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(c,h,b){return new Zr(this,c,h,b)}createVertexBuffer(c,h,b,_,w){return new ro(this,c,h,b,_,w)}createRenderbuffer(c,h,b){const _=this.gl,w=_.createRenderbuffer();return this.bindRenderbuffer.set(w),_.renderbufferStorage(_.RENDERBUFFER,c,h,b),this.bindRenderbuffer.set(null),w}createFramebuffer(c,h,b,_){return new Kr(this,c,h,b,_)}clear({color:c,depth:h,stencil:b,colorMask:_}){const w=this.gl;let k=0;c&&(k|=w.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set(_||[!0,!0,!0,!0])),h!==void 0&&(k|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),b!==void 0&&(k|=w.STENCIL_BUFFER_BIT,this.clearStencil.set(b),this.stencilMask.set(255)),w.clear(k)}setCullFace(c){c.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))}setDepthMode(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)}setStencilMode(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)}setColorMode(c){E(c.blendFunction,rr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor),c.blendEquation?this.blendEquation.set(c.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(c.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}var Za=a.ay([{name:"a_pos",type:"Float32",components:3}]);class Zo{constructor(c,h,b,_){const w={width:b[0],height:b[1],data:null},k=c.gl;this.targetColorTexture=new a.T(c,w,k.RGBA,{useMipmap:!1}),this.backgroundColorTexture=new a.T(c,w,k.RGBA,{useMipmap:!1}),this.context=c,this.setNumParticles(h,_),this.lastInvalidatedAt=0}setNumParticles(c,h){if(this.numParticles===h)return;(this.particleVertices0||this.particleVertices1||this.particleSegment)&&(this.particleVertices0.destroy(),this.particleVertices1.destroy(),this.particleSegment.destroy());const b=new a.az;b.reserve(Math.round(h));const _=a.aA(c.key);for(let w=0;w<h;w++)b.emplaceBack(_(),_(),_());this.particleVertices0=this.context.createVertexBuffer(b,Za.members,!0),this.particleVertices1=this.context.createVertexBuffer(b,Za.members,!0),this.particleSegment=a.aB.simpleSegment(0,0,this.particleVertices0.length,0),this.numParticles=h}update(c){return!(this.lastInvalidatedAt<c&&(this.lastInvalidatedAt=a.f.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleVertices0.destroy(),this.particleVertices1.destroy(),this.particleSegment.destroy()}}const wa={type:2,extent:a.V,loadGeometry:()=>[[new a.P(0,0),new a.P(a.V+1,0),new a.P(a.V+1,a.V+1),new a.P(0,a.V+1),new a.P(0,0)]]};class Ds{constructor(c,h,b,_,w){this.tileID=c,this.uid=a.aC(),this.uses=0,this.tileSize=h,this.tileZoom=b,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=w,_&&_.style&&(this._lastUpdatedBrightness=_.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",_&&_.transform&&(this.projection=_.transform.projection)}registerFadeDuration(c){const h=c+this.timeAdded;h<a.f.now()||this.fadeEndTime&&h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=a.as(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(c,h,b){if(this.unloadVectorData(),this.state="loaded",c){c.featureIndex&&(this.latestFeatureIndex=c.featureIndex,c.rawTileData?(this.latestRawTileData=c.rawTileData,this.latestFeatureIndex.rawTileData=c.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=c.collisionBoxArray,this.buckets=function(_,w){const k={};if(!w)return k;for(const D of _){const L=D.layerIds.map(B=>w.getLayer(B)).filter(Boolean);if(L.length!==0){D.layers=L,D.stateDependentLayerIds&&(D.stateDependentLayers=D.stateDependentLayerIds.map(B=>L.filter(U=>U.id===B)[0]));for(const B of L)k[B.fqid]=D}}return k}(c.buckets,h.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const w=this.buckets[_];if(w instanceof a.aE){if(this.hasSymbolBuckets=!0,!b)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const w=this.buckets[_];if(w instanceof a.aE&&w.hasRTLText){this.hasRTLText=!0,a.aF();break}}this.queryPadding=0;for(const _ in this.buckets){const w=this.buckets[_],k=h.style.getOwnLayer(_);if(!k)continue;const D=k.queryRadius(w);this.queryPadding=Math.max(this.queryPadding,D)}c.imageAtlas&&(this.imageAtlas=c.imageAtlas),c.glyphAtlasImage&&(this.glyphAtlasImage=c.glyphAtlasImage),c.lineAtlas&&(this.lineAtlas=c.lineAtlas),this._lastUpdatedBrightness=c.brightness}else this.collisionBoxArray=new a.aD}unloadVectorData(){if(this.hasData()){for(const c in this.buckets)this.buckets[c].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(c){return this.buckets[c.fqid]}upload(c){for(const _ in this.buckets){const w=this.buckets[_];w.uploadPending()&&w.upload(c)}const h=c.gl,b=this.imageAtlas;if(b&&!b.uploaded){const _=!!Object.keys(b.patternPositions).length;this.imageAtlasTexture=new a.T(c,b.image,h.RGBA,{useMipmap:_}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(c,this.glyphAtlasImage,h.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new a.T(c,this.lineAtlas.image,h.R8),this.lineAtlas.uploaded=!0)}prepare(c,h,b){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(c,this.imageAtlasTexture,b),!h||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const _=h.style.getBrightness();(this._lastUpdatedBrightness||_)&&(this._lastUpdatedBrightness&&_&&Math.abs(this._lastUpdatedBrightness-_)<.001||(this._lastUpdatedBrightness=_,this.updateBuckets(void 0,h)))}queryRenderedFeatures(c,h,b,_,w,k,D,L){return this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)?this.latestFeatureIndex.query({tileResult:_,pixelPosMatrix:D,transform:k,params:w,tileTransform:this.tileTransform},c,h,b):{}}querySourceFeatures(c,h){const b=this.latestFeatureIndex;if(!b||!b.rawTileData)return;const _=b.loadVTLayers(),w=h?h.sourceLayer:"",k=_._geojsonTileLayer||_[w];if(!k)return;const D=a.aG(h&&h.filter),{z:L,x:B,y:U}=this.tileID.canonical,W={z:L,x:B,y:U};for(let J=0;J<k.length;J++){const ee=k.feature(J);if(D.needGeometry){const de=a.aH(ee,!0);if(!D.filter(new a.K(this.tileID.overscaledZ),de,this.tileID.canonical))continue}else if(!D.filter(new a.K(this.tileID.overscaledZ),ee))continue;const ce=b.getId(ee,w),se=new a.aI(ee,L,B,U,ce);se.tile=W,c.push(se)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}bucketsLoaded(){for(const c in this.buckets)if(this.buckets[c].uploadPending())return!1;return!0}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(c){const h=this.expirationTime;if(c.cacheControl){const b=a.aJ(c.cacheControl);b["max-age"]&&(this.expirationTime=Date.now()+1e3*b["max-age"])}else c.expires&&(this.expirationTime=new Date(c.expires).getTime());if(this.expirationTime){const b=Date.now();let _=!1;if(this.expirationTime>b)_=!1;else if(h)if(this.expirationTime<h)_=!0;else{const w=this.expirationTime-h;w?this.expirationTime=b+Math.max(w,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(c,h){this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(c).length!==0&&h&&this.updateBuckets(c,h)}updateBuckets(c,h){if(!this.latestFeatureIndex)return;const b=this.latestFeatureIndex.loadVTLayers(),_=h.style.listImages(),w=h.style.getBrightness();for(const k in this.buckets){if(!h.style.hasLayer(k))continue;const D=this.buckets[k],L=D.layers[0].sourceLayer||"_geojsonTileLayer",B=b[L];let U={};if(c&&(U=c[L],!B||!U||Object.keys(U).length===0))continue;if(D.update(U,B,_,this.imageAtlas&&this.imageAtlas.patternPositions||{},w),D instanceof a.aK||D instanceof a.aL){const J=h.style.getOwnSourceCache(D.layers[0].source);h._terrain&&h._terrain.enabled&&J&&D.programConfigurations.needsUpload&&h._terrain._clearRenderCacheForTile(J.id,this.tileID)}const W=h&&h.style&&h.style.getOwnLayer(k);W&&(this.queryPadding=Math.max(this.queryPadding,W.queryRadius(D)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.f.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(c){this.symbolFadeHoldUntil=a.f.now()+c}setTexture(c,h){const b=h.context,_=b.gl;this.texture=this.texture||h.getTileTexture(c.width),this.texture&&this.texture instanceof a.T?this.texture.update(c,{useMipmap:!0}):(this.texture=new a.T(b,c,_.RGBA,{useMipmap:!0}),this.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE))}setDependencies(c,h){const b={};for(const _ of h)b[_]=!0;this.dependencies[c]=b}hasDependency(c,h){for(const b of c){const _=this.dependencies[b];if(_){for(const w of h)if(_[w])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(c,h){if(!h||h.name==="mercator"||this._tileDebugBuffer)return;const b=a.aM(wa,this.tileID.canonical,this.tileTransform)[0],_=new a.aN,w=new a.aO;for(let k=0;k<b.length;k++){const{x:D,y:L}=b[k];_.emplaceBack(D,L),w.emplaceBack(k)}w.emplaceBack(0),this._tileDebugIndexBuffer=c.createIndexBuffer(w),this._tileDebugBuffer=c.createVertexBuffer(_,a.aP.members),this._tileDebugSegments=a.aB.simpleSegment(0,0,_.length,w.length)}_makeTileBoundsBuffers(c,h){if(this._tileBoundsBuffer||!h||h.name==="mercator")return;const b=a.aM(wa,this.tileID.canonical,this.tileTransform)[0];let _,w;if(this.isRaster){const k=function(D,L){const B=a.as(D,L),U=Math.pow(2,D.z);for(let de=0;de<Ft;de++)for(let oe=0;oe<Ft;oe++){const fe=a.at((D.x+(oe+_r(oe))/Yt)/U),Te=a.au((D.y+(de+_r(de))/Yt)/U),be=L.project(fe,Te),Ee=de*Ft+oe;nr[2*Ee+0]=Math.round((be.x*B.scale-B.x)*a.V),nr[2*Ee+1]=Math.round((be.y*B.scale-B.y)*a.V)}nn.fill(0),Mn.fill(0);for(let de=2045;de>=0;de--){const oe=4*de,fe=An[oe+0],Te=An[oe+1],be=An[oe+2],Ee=An[oe+3],he=fe+be>>1,Ce=Te+Ee>>1,Ne=he+Ce-Te,Fe=Ce+fe-he,G=Te*Ft+fe,R=Ee*Ft+be,H=Ce*Ft+he,le=Math.hypot((nr[2*G+0]+nr[2*R+0])/2-nr[2*H+0],(nr[2*G+1]+nr[2*R+1])/2-nr[2*H+1])>=16;nn[H]=nn[H]||(le?1:0),de<1022&&(nn[H]=nn[H]||nn[(Te+Fe>>1)*Ft+(fe+Ne>>1)]||nn[(Ee+Fe>>1)*Ft+(be+Ne>>1)])}const W=new a.av,J=new a.aw;let ee=0;function ce(de,oe){const fe=oe*Ft+de;return Mn[fe]===0&&(W.emplaceBack(nr[2*fe+0],nr[2*fe+1],de*a.V/Yt,oe*a.V/Yt),Mn[fe]=++ee),Mn[fe]-1}function se(de,oe,fe,Te,be,Ee){const he=de+fe>>1,Ce=oe+Te>>1;if(Math.abs(de-be)+Math.abs(oe-Ee)>1&&nn[Ce*Ft+he])se(be,Ee,de,oe,he,Ce),se(fe,Te,be,Ee,he,Ce);else{const Ne=ce(de,oe),Fe=ce(fe,Te),G=ce(be,Ee);J.emplaceBack(Ne,Fe,G)}}return se(0,0,Yt,Yt,Yt,0),se(Yt,Yt,0,0,0,Yt),{vertices:W,indices:J}}(this.tileID.canonical,h);_=k.vertices,w=k.indices}else{_=new a.av,w=new a.aw;for(const{x:D,y:L}of b)_.emplaceBack(D,L,0,0);const k=a.aQ(_.int16,void 0,4);for(let D=0;D<k.length;D+=3)w.emplaceBack(k[D],k[D+1],k[D+2])}this._tileBoundsBuffer=c.createVertexBuffer(_,a.aR.members),this._tileBoundsIndexBuffer=c.createIndexBuffer(w),this._tileBoundsSegments=a.aB.simpleSegment(0,0,_.length,w.length)}_makeGlobeTileDebugBuffers(c,h){const b=h.projection;if(!b||b.name!=="globe"||h.freezeTileCoverage)return;const _=this.tileID.canonical,w=a.aS(_,h),k=a.aT(w),D=a.S(h.zoom);let L;D>0&&(L=a.a6.invert(new Float64Array(16),h.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(c,_,h,k,L,D),this._makeGlobeTileDebugTextBuffer(c,_,h,k,L,D)}_globePoint(c,h,b,_,w,k,D){let L=a.aU(c,h,b);if(k){const B=1<<b.z,U=a.a5(_.center.lng),W=a.ae(_.center.lat),J=(b.x+.5)/B-U;let ee=0;J>.5?ee=-1:J<-.5&&(ee=1);let ce=(c/a.V+b.x)/B+ee,se=(h/a.V+b.y)/B;ce=(ce-U)*_._pixelsPerMercatorPixel+U,se=(se-W)*_._pixelsPerMercatorPixel+W;const de=[ce*_.worldSize,se*_.worldSize,0];a.N.transformMat4(de,de,k),L=a.aV(L,de,D)}return a.N.transformMat4(L,L,w)}_makeGlobeTileDebugBorderBuffer(c,h,b,_,w,k){const D=new a.aN,L=new a.aO,B=new a.aW,U=(J,ee,ce,se,de)=>{const oe=(ce-J)/(de-1),fe=(se-ee)/(de-1),Te=D.length;for(let be=0;be<de;be++){const Ee=J+be*oe,he=ee+be*fe;D.emplaceBack(Ee,he);const Ce=this._globePoint(Ee,he,h,b,_,w,k);B.emplaceBack(Ce[0],Ce[1],Ce[2]),L.emplaceBack(Te+be)}},W=a.V;U(0,0,W,0,16),U(W,0,W,W,16),U(W,W,0,W,16),U(0,W,0,0,16),this._tileDebugIndexBuffer=c.createIndexBuffer(L),this._tileDebugBuffer=c.createVertexBuffer(D,a.aP.members),this._globeTileDebugBorderBuffer=c.createVertexBuffer(B,a.aX.members),this._tileDebugSegments=a.aB.simpleSegment(0,0,D.length,L.length)}_makeGlobeTileDebugTextBuffer(c,h,b,_,w,k){const D=a.V/4,L=new a.aN,B=new a.aw,U=new a.aW,W=25;B.reserve(32),L.reserve(W),U.reserve(W);const J=(ee,ce)=>W*ee+ce;for(let ee=0;ee<W;ee++){const ce=ee*D;for(let se=0;se<W;se++){const de=se*D;L.emplaceBack(de,ce);const oe=this._globePoint(de,ce,h,b,_,w,k);U.emplaceBack(oe[0],oe[1],oe[2])}}for(let ee=0;ee<4;ee++)for(let ce=0;ce<4;ce++){const se=J(ee,ce),de=J(ee,ce+1),oe=J(ee+1,ce),fe=J(ee+1,ce+1);B.emplaceBack(se,de,oe),B.emplaceBack(oe,de,fe)}this._tileDebugTextIndexBuffer=c.createIndexBuffer(B),this._tileDebugTextBuffer=c.createVertexBuffer(L,a.aP.members),this._globeTileDebugTextBuffer=c.createVertexBuffer(U,a.aX.members),this._tileDebugTextSegments=a.aB.simpleSegment(0,0,W,32)}destroy(c=!1){for(const h in this.buckets)this.buckets[h].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!c&&this.texture&&this.texture instanceof a.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}const Rs={vector:kt,raster:Rt,"raster-dem":class extends Rt{constructor(g,c,h,b){super(g,c,h,b),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}loadTile(g,c){const h=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function b(_,w){_&&(g.state="errored",c(_)),w&&(g.dem=w,g.dem.onDeserialize(),g.needsHillshadePrepare=!0,g.needsDEMTextureUpload=!0,g.state="loaded",c(null))}g.request=a.d(this.map._requestManager.transformRequest(h,a.R.Tile),function(_,w,k,D){if(delete g.request,g.aborted)g.state="unloaded",c(null);else if(_)g.state="errored",c(_);else if(w){this.map._refreshExpiredTiles&&g.setExpiryData({cacheControl:k,expires:D});const L=ImageBitmap&&w instanceof ImageBitmap&&a.ak(),B=1-(w.width-a.al(w.width))/2;B<1||g.neighboringTiles||(g.neighboringTiles=this._getNeighboringTiles(g.tileID));const U=L?w:a.f.getImageData(w,B),W={uid:g.uid,coord:g.tileID,source:this.id,scope:this.scope,rawImageData:U,encoding:this.encoding,padding:B};g.actor&&g.state!=="expired"||(g.actor=this.dispatcher.getActor(),g.actor.send("loadDEMTile",W,b.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(g){const c=g.canonical,h=Math.pow(2,c.z),b=(c.x-1+h)%h,_=c.x===0?g.wrap-1:g.wrap,w=(c.x+1+h)%h,k=c.x+1===h?g.wrap+1:g.wrap,D={};return D[new a.am(g.overscaledZ,_,c.z,b,c.y).key]={backfilled:!1},D[new a.am(g.overscaledZ,k,c.z,w,c.y).key]={backfilled:!1},c.y>0&&(D[new a.am(g.overscaledZ,_,c.z,b,c.y-1).key]={backfilled:!1},D[new a.am(g.overscaledZ,g.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},D[new a.am(g.overscaledZ,k,c.z,w,c.y-1).key]={backfilled:!1}),c.y+1<h&&(D[new a.am(g.overscaledZ,_,c.z,b,c.y+1).key]={backfilled:!1},D[new a.am(g.overscaledZ,g.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},D[new a.am(g.overscaledZ,k,c.z,w,c.y+1).key]={backfilled:!1}),D}},"raster-array":Bt,geojson:class extends a.E{constructor(g,c,h,b){super(),this.id=g,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=h.getActor(),this.setEventedParent(b),this._data=c.data,this._options=a.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const _=a.V/this.tileSize;this.workerOptions=a.e({source:this.id,scope:this.scope,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*_,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*_,extent:a.V,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:a.V,radius:(c.clusterRadius!==void 0?c.clusterRadius:50)*_,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}onAdd(g){this.map=g,this.setData(this._data)}setData(g){return this._data=g,this._updateWorkerData(),this}getClusterExpansionZoom(g,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:g,source:this.id,scope:this.scope},c),this}getClusterChildren(g,c){return this.actor.send("geojson.getClusterChildren",{clusterId:g,source:this.id,scope:this.scope},c),this}getClusterLeaves(g,c,h,b){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:g,limit:c,offset:h},b),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new a.b("dataloading",{dataType:"source"})),this._loaded=!1;const g=a.e({},this.workerOptions);g.scope=this.scope;const c=this._data;typeof c=="string"?(g.request=this.map._requestManager.transformRequest(a.f.resolveURL(c),a.R.Source),g.request.collectResourceTiming=this._collectResourceTiming):g.data=JSON.stringify(c),this._pendingLoad=this.actor.send(`${this.type}.loadData`,g,(h,b)=>{if(this._loaded=!0,this._pendingLoad=null,h)this.fire(new a.a(h));else{const _={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&b&&b.resourceTiming&&b.resourceTiming[this.id]&&(_.resourceTiming=b.resourceTiming[this.id]),this.fire(new a.b("data",_)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(g,c){const h=g.actor?"reloadTile":"loadTile";g.actor=this.actor;const b={type:this.type,uid:g.uid,tileID:g.tileID,tileZoom:g.tileZoom,zoom:g.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,scope:this.scope,pixelRatio:a.f.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0};g.request=this.actor.send(h,b,(_,w)=>(delete g.request,g.destroy(),g.aborted?c(null):_?c(_):(g.loadVectorData(w,this.map.painter,h==="reloadTile"),c(null))),void 0,h==="loadTile")}abortTile(g){g.request&&(g.request.cancel(),delete g.request),g.aborted=!0}unloadTile(g){this.actor.send("removeTile",{uid:g.uid,type:this.type,source:this.id,scope:this.scope}),g.destroy()}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends a.ap{constructor(g,c,h,b){super(g,c,h,b),this.roundZoom=!0,this.type="video",this.options=c}load(){this._loaded=!1;const g=this.options;this.urls=[];for(const c of g.urls)this.urls.push(this.map._requestManager.transformRequest(c,a.R.Source).url);a.aq(this.urls,(c,h)=>{this._loaded=!0,c?this.fire(new a.a(c)):h&&(this.video=h,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(g){if(this.video){const c=this.video.seekable;g<c.start(0)||g>c.end(0)?this.fire(new a.a(new ze(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=g}}getVideo(){return this.video}onAdd(g){this.map||(this.map=g,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const g=this.map.painter.context,c=g.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(g,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(g)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:a.ap,model:class extends a.E{constructor(g,c,h,b){super(),this.id=g,this.type="model",this.models=[],this._loaded=!1,this._options=c}load(){const g=[];for(const c in this._options.models){const h=this._options.models[c],b=a.l(this.map._requestManager.transformRequest(h.uri,a.R.Model).url).then(_=>{if(!_)return;const w=a.c(_),k=new a.M(c,h.position,h.orientation,w);k.computeBoundsAndApplyParent(),this.models.push(k)}).catch(_=>{this.fire(new a.a(new Error(`Could not load model ${c} from ${h.uri}: ${_.message}`)))});g.push(b)}return Promise.allSettled(g).then(()=>{this._loaded=!0,this.fire(new a.b("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(c=>{this.fire(new a.a(new Error(`Could not load models: ${c.message}`)))})}onAdd(g){this.map=g,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(g,c){}serialize(){return{type:"model"}}},"batched-model":class extends a.E{constructor(g,c,h,b){super(),this.type="batched-model",this.id=g,this.tileSize=512,this._options=c,this.tiles=this._options.tiles,this.maxzoom=c.maxzoom||19,this.minzoom=c.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=h,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(b)}onAdd(g){this.map=g,this.load()}load(g){this._loaded=!1,this.fire(new a.b("dataloading",{dataType:"source"}));const c=Array.isArray(this.map._language)?this.map._language.join():this.map._language,h=this.map._worldview;this._tileJSONRequest=Tt(this._options,this.map._requestManager,c,h,(b,_)=>{this._tileJSONRequest=null,this._loaded=!0,b?(c&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${c}`),h&&h.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${h}`),this.fire(new a.a(b))):_&&(a.e(this,_),_.bounds&&(this.tileBounds=new ut(_.bounds,this.minzoom,this.maxzoom)),a.aj(_.tiles,this.map._requestManager._customAccessToken),this.fire(new a.b("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.b("data",{dataType:"source",sourceDataType:"content"}))),g&&g(b)})}hasTransition(){return!1}hasTile(g){return!this.tileBounds||this.tileBounds.contains(g.canonical)}loaded(){return this._loaded}loadTile(g,c){const h=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme)),b={request:this.map._requestManager.transformRequest(h,a.R.Tile),data:void 0,uid:g.uid,tileID:g.tileID,tileZoom:g.tileZoom,zoom:g.tileID.overscaledZ,tileSize:this.tileSize*g.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:g.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0};if(g.actor&&g.state!=="expired")if(g.state==="loading")g.reloadCallback=c;else{if(g.buckets){const w=Object.values(g.buckets);for(const k of w)k.dirty=!0;return void(g.state="loaded")}g.request=g.actor.send("reloadTile",b,_.bind(this))}else g.actor=this.dispatcher.getActor(),g.request=g.actor.send("loadTile",b,_.bind(this),void 0,!0);function _(w,k){return g.aborted?c(null):w&&w.status!==404?c(w):(k&&(k.resourceTiming&&(g.resourceTiming=k.resourceTiming),this.map._refreshExpiredTiles&&g.setExpiryData(k),g.buckets={...g.buckets,...k.buckets},k.featureIndex&&(g.latestFeatureIndex=k.featureIndex)),g.state="loaded",void c(null))}}serialize(){return a.e({},this._options)}},canvas:class extends a.ap{constructor(g,c,h,b){super(g,c,h,b),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(w=>typeof w!="number"))||this.fire(new a.a(new ze(`sources.${g}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.a(new ze(`sources.${g}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new a.a(new ze(`sources.${g}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new a.a(new ze(`sources.${g}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.a(new ze(`sources.${g}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.a(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(g){this.map=g,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let g=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,g=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,g=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context;this.texture?!g&&!this._playing||this.texture instanceof a.ar||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(c,this.canvas,c.gl.RGBA,{premultiply:!0}),this._prepareData(c)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const g of[this.canvas.width,this.canvas.height])if(isNaN(g)||g<=0)return!0;return!1}},custom:class extends a.E{constructor(g,c,h,b){super(),this.id=g,this.type="custom",this._dataType="raster",this._dispatcher=h,this._implementation=c,this.setEventedParent(b),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new a.a(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new a.a(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new ut(this._implementation.bounds,this.minzoom,this.maxzoom)),c.update=this._update.bind(this),c.clearTiles=this._clearTiles.bind(this),c.coveringTiles=this._coveringTiles.bind(this),a.e(this,a.ac(c,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return a.ac(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new a.b("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.b("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(g){this._map=g,this._loaded=!1,this.fire(new a.b("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(g),this.load()}onRemove(g){this._implementation.onRemove&&this._implementation.onRemove(g)}hasTile(g){if(this._implementation.hasTile){const{x:c,y:h,z:b}=g.canonical;return this._implementation.hasTile({x:c,y:h,z:b})}return!this.tileBounds||this.tileBounds.contains(g.canonical)}loadTile(g,c){const{x:h,y:b,z:_}=g.tileID.canonical,w=new AbortController;g.request=Promise.resolve(this._implementation.loadTile({x:h,y:b,z:_},{signal:w.signal})).then(function(k){return delete g.request,g.aborted?(g.state="unloaded",c(null)):k===void 0?(g.state="errored",c(null)):k===null?(this.loadTileData(g,{width:this.tileSize,height:this.tileSize,data:null}),g.state="loaded",c(null)):function(D){return D instanceof ImageData||D instanceof HTMLCanvasElement||D instanceof ImageBitmap||D instanceof HTMLImageElement}(k)?(this.loadTileData(g,k),g.state="loaded",void c(null)):(g.state="errored",c(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(k=>{k.code!==20&&(g.state="errored",c(k))}),g.request.cancel=()=>w.abort()}loadTileData(g,c){g.setTexture(c,this._map.painter)}unloadTile(g,c){if(g.texture&&g.texture instanceof a.T?(g.destroy(!0),g.texture&&g.texture instanceof a.T&&this._map.painter.saveTileTexture(g.texture)):g.destroy(),this._implementation.unloadTile){const{x:h,y:b,z:_}=g.tileID.canonical;this._implementation.unloadTile({x:h,y:b,z:_})}c()}abortTile(g,c){g.request&&g.request.cancel&&(g.request.cancel(),delete g.request),c()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(g=>({x:g.canonical.x,y:g.canonical.y,z:g.canonical.z}))}_clearTiles(){const g=a.ag(this.id,this.scope);this._map.style.clearSource(g)}_update(){this.fire(new a.b("data",{dataType:"source",sourceDataType:"content"}))}}},Ko=function(g,c,h,b){const _=new Rs[c.type](g,c,h,b);if(_.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${_.id}`);return a.aY(["load","abort","unload","serialize","prepare"],_),_};function pf(g,c){const h=a.a6.identity([]);return a.a6.scale(h,h,[.5*g.width,.5*-g.height,1]),a.a6.translate(h,h,[1,-1,0]),a.a6.multiply(h,h,g.calculateProjMatrix(c.toUnwrapped())),Float32Array.from(h)}function mf(g,c,h,b,_,w,k,D=!1){const L=g.tilesIn(b,k,D);L.sort(Ic);const B=[];for(const W of L)B.push({wrappedTileID:W.tile.tileID.wrapped().key,queryResults:W.tile.queryRenderedFeatures(c,h,g._state,W,_,w,pf(g.transform,W.tile.tileID),D)});const U=function(W){const J={},ee={};for(const ce of W){const se=ce.queryResults,de=ce.wrappedTileID,oe=ee[de]=ee[de]||{};for(const fe in se){const Te=se[fe],be=oe[fe]=oe[fe]||{},Ee=J[fe]=J[fe]||[];for(const he of Te)be[he.featureIndex]||(be[he.featureIndex]=!0,Ee.push(he))}}return J}(B);for(const W in U)U[W].forEach(J=>{const ee=J.feature,ce=ee.layer;ce&&ce.type!=="background"&&ce.type!=="sky"&&ce.type!=="slot"&&(ee.source=ce.source,ce["source-layer"]&&(ee.sourceLayer=ce["source-layer"]),ee.state=ee.id!==void 0?g.getFeatureState(ce["source-layer"],ee.id):{})});return U}function Is(g,c){const h=g.getRenderableIds().map(w=>g.getTileByID(w)),b=[],_={};for(let w=0;w<h.length;w++){const k=h[w],D=k.tileID.canonical.key;_[D]||(_[D]=!0,k.querySourceFeatures(b,c))}return b}function Ic(g,c){const h=g.tileID,b=c.tileID;return h.overscaledZ-b.overscaledZ||h.canonical.y-b.canonical.y||h.wrap-b.wrap||h.canonical.x-b.canonical.x}class $l extends Ds{constructor(c,h,b,_,w){super(c,h,b,_,w),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}setTexture(c,h){const b=h.context,_=b.gl;this.texture=this.texture||h.getTileTexture(c.width),this.texture&&this.texture instanceof a.T?this.texture.update(c,{useMipmap:!1,premultiply:!1}):this.texture=new a.T(b,c,_.RGBA,{useMipmap:!1,premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(c=16384,h){const b=this._mrt=new a.aZ(30),_=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(c-1)}});return this.entireBuffer=null,this.request=a.a_(_,(w,k,D,L)=>{if(w)h(w);else try{const B=b.getHeaderLength(k);if(B>c)return void(this.request=this.fetchHeader(B,h));b.parseHeader(k),this._isHeaderLoaded=!0;let U=0;for(const W of Object.values(b.layers))U=Math.max(U,W.dataIndex[W.dataIndex.length-1].last_byte);k.byteLength>=U&&(this.entireBuffer=k),h(null,this.entireBuffer||k,D,L)}catch(B){h(B)}}),this.request}fetchBand(c,h,b){const _=this._mrt;if(!this._isHeaderLoaded||!_)return void b(new Error("Tile header is not ready"));const w=this.actor;if(!w)return void b(new Error("Can't fetch tile band without an actor"));let k;const D=(W,J)=>{k.complete(W,J),W?b(W):(this.updateTextureDescriptor(c,h),b(null,this.textureDescriptor&&this.textureDescriptor.img))},L=(W,J)=>{if(W)return b(W);const ee=w.send("decodeRasterArray",{buffer:J,task:k},D,void 0,!0);this._workQueue.push(()=>{ee&&ee.cancel(),k.cancel()})},B=_.getLayer(c);if(!B)return void b(new Error(`Unknown sourceLayer "${c}"`));if(B.hasDataForBand(h))return this.updateTextureDescriptor(c,h),void b(null,this.textureDescriptor?this.textureDescriptor.img:null);const U=B.getDataRange([h]);if(k=_.createDecodingTask(U),!k||k.tasks.length)if(this.flushQueues(),this.entireBuffer)L(null,this.entireBuffer.slice(U.firstByte,U.lastByte+1));else{const W=Object.assign({},this.requestParams,{headers:{Range:`bytes=${U.firstByte}-${U.lastByte}`}}),J=a.a_(W,L);this._fetchQueue.push(()=>{J.cancel(),k.cancel()})}else b(null)}updateNeeded(c,h){return(!this.textureDescriptor||this.textureDescriptor.band!==h||this.textureDescriptor.layer!==c)&&this.state!=="errored"}updateTextureDescriptor(c,h){if(!this._mrt)return;const b=this._mrt.getLayer(c);if(!b||!b.hasBand(h)||!b.hasDataForBand(h))return;const{bytes:_,tileSize:w,buffer:k,offset:D,scale:L}=b.getBandView(h),B=w+2*k,U={data:_,width:B,height:B},W=this.texture;W&&W instanceof a.T&&W.update(U,{useMipmap:!1,premultiply:!1}),this.textureDescriptor={layer:c,band:h,img:U,buffer:k,offset:D,tileSize:w,format:b.pixelFormat,mix:[L,256*L,65536*L,16777216*L]}}}class Pc{constructor(c,h){this.max=c,this.onRemove=h,this.reset()}reset(){for(const c in this.data)for(const h of this.data[c])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(c,h,b){const _=c.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);const w={value:h,timeout:void 0};if(b!==void 0&&(w.timeout=setTimeout(()=>{this.remove(c,w)},b)),this.data[_].push(w),this.order.push(_),this.order.length>this.max){const k=this._getAndRemoveByKey(this.order[0]);k&&this.onRemove(k)}return this}has(c){return c.wrapped().key in this.data}getAndRemove(c){return this.has(c)?this._getAndRemoveByKey(c.wrapped().key):null}_getAndRemoveByKey(c){const h=this.data[c].shift();return h.timeout&&clearTimeout(h.timeout),this.data[c].length===0&&delete this.data[c],this.order.splice(this.order.indexOf(c),1),h.value}getByKey(c){const h=this.data[c];return h?h[0].value:null}get(c){return this.has(c)?this.data[c.wrapped().key][0].value:null}remove(c,h){if(!this.has(c))return this;const b=c.wrapped().key,_=h===void 0?0:this.data[b].indexOf(h),w=this.data[b][_];return this.data[b].splice(_,1),w.timeout&&clearTimeout(w.timeout),this.data[b].length===0&&delete this.data[b],this.onRemove(w.value),this.order.splice(this.order.indexOf(b),1),this}setMaxSize(c){for(this.max=c;this.order.length>this.max;){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(c){const h=[];for(const b in this.data)for(const _ of this.data[b])c(_.value)||h.push(_);for(const b of h)this.remove(b.value.tileID,b)}}class Ka extends a.E{constructor(c,h,b){super(),this.id=c,this._onlySymbols=b,h.on("data",_=>{_.dataType==="source"&&_.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&_.dataType==="source"&&_.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),h.on("error",()=>{this._sourceErrored=!0}),this._source=h,this._tiles={},this._cache=new Pc(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=h.minTileCacheSize,this._maxTileCacheSize=h.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new Be,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(c){this.map=c,this._minTileCacheSize=this._minTileCacheSize===void 0&&c?c._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&c?c._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const c in this._tiles){const h=this._tiles[c];if(h.state!=="errored"&&(h.state!=="loaded"||!h.bucketsLoaded()))return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const c=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,c&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(c,h){return c.isSymbolTile=this._onlySymbols,c.isExtraShadowCaster=this._shadowCasterTiles[c.tileID.key],this._source.loadTile(c,h)}_unloadTile(c){if(this._source.unloadTile)return this._source.unloadTile(c,()=>{})}_abortTile(c){if(this._source.abortTile)return this._source.abortTile(c,()=>{})}serialize(){return this._source.serialize()}prepare(c){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const h in this._tiles){const b=this._tiles[h];b.upload(c),b.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return a.a$(this._tiles).map(c=>c.tileID).sort(Ld).map(c=>c.key)}getRenderableIds(c,h){const b=[];for(const _ in this._tiles)this._isIdRenderable(+_,c,h)&&b.push(this._tiles[_]);return c?b.sort((_,w)=>{const k=_.tileID,D=w.tileID,L=new a.P(k.canonical.x,k.canonical.y)._rotate(this.transform.angle),B=new a.P(D.canonical.x,D.canonical.y)._rotate(this.transform.angle);return k.overscaledZ-D.overscaledZ||B.y-L.y||B.x-L.x}).map(_=>_.tileID.key):b.map(_=>_.tileID).sort(Ld).map(_=>_.key)}hasRenderableParent(c){const h=this.findLoadedParent(c,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(c,h,b){return this._tiles[c]&&this._tiles[c].hasData()&&!this._coveredTiles[c]&&(h||!this._tiles[c].holdingForFade())&&(b||!this._shadowCasterTiles[c])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)this._tiles[c].state!=="errored"&&this._reloadTile(+c,"reloading")}}_reloadTile(c,h){const b=this._tiles[c];b&&(b.state!=="loading"&&(b.state=h),this._loadTile(b,this._tileLoaded.bind(this,b,c,h)))}_tileLoaded(c,h,b,_){if(_)if(c.state="errored",_.status!==404)this._source.fire(new a.a(_,{tile:c}));else{if(!(c.tileID.key in this._loadedParentTiles))return void this._source.fire(new a.b("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id}));if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const w=this.map.painter.terrain;this.update(this.transform,w.getScaledDemTileSize(),!0),w.resetTileLookupCache(this.id)}else this.update(this.transform)}else c.timeAdded=a.f.now(),b==="expired"&&(c.refreshedUponExpiration=!0),this._setTileReloadTimer(h,c),this._source.type==="raster-dem"&&c.dem&&this._backfillDEM(c),this._state.initializeTileState(c,this.map?this.map.painter:null),this._source.fire(new a.b("data",{dataType:"source",tile:c,coord:c.tileID,sourceCacheId:this.id}))}_backfillDEM(c){const h=this.getRenderableIds();for(let _=0;_<h.length;_++){const w=h[_];if(c.neighboringTiles&&c.neighboringTiles[w]){const k=this.getTileByID(w);b(c,k),b(k,c)}}function b(_,w){if(!_.dem||_.dem.borderReady)return;_.needsHillshadePrepare=!0,_.needsDEMTextureUpload=!0;let k=w.tileID.canonical.x-_.tileID.canonical.x;const D=w.tileID.canonical.y-_.tileID.canonical.y,L=Math.pow(2,_.tileID.canonical.z),B=w.tileID.key;k===0&&D===0||Math.abs(D)>1||(Math.abs(k)>1&&(Math.abs(k+L)===1?k+=L:Math.abs(k-L)===1&&(k-=L)),w.dem&&_.dem&&(_.dem.backfillBorder(w.dem,k,D),_.neighboringTiles&&_.neighboringTiles[B]&&(_.neighboringTiles[B].backfilled=!0)))}}getTile(c){return this.getTileByID(c.key)}getTileByID(c){return this._tiles[c]}_retainLoadedChildren(c,h,b,_){for(const w in this._tiles){let k=this._tiles[w];if(_[w]||!k.hasData()||k.tileID.overscaledZ<=h||k.tileID.overscaledZ>b)continue;let D=k.tileID;for(;k&&k.tileID.overscaledZ>h+1;){const B=k.tileID.scaledTo(k.tileID.overscaledZ-1);k=this._tiles[B.key],k&&k.hasData()&&(D=B)}let L=D;for(;L.overscaledZ>h;)if(L=L.scaledTo(L.overscaledZ-1),c[L.key]){_[D.key]=D;break}}}findLoadedParent(c,h){if(c.key in this._loadedParentTiles){const b=this._loadedParentTiles[c.key];return b&&b.tileID.overscaledZ>=h?b:null}for(let b=c.overscaledZ-1;b>=h;b--){const _=c.scaledTo(b),w=this._getLoadedTile(_);if(w)return w}}_getLoadedTile(c){const h=this._tiles[c.key];return h&&h.hasData()?h:this._cache.getByKey(this._source.reparseOverscaled?c.wrapped().key:c.canonical.key)}updateCacheSize(c,h){h=h||this._source.tileSize;const b=Math.ceil(c.width/h)+1,_=Math.ceil(c.height/h)+1,w=Math.floor(b*_*5),k=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,w):w,D=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,k):k;this._cache.setMaxSize(D)}handleWrapJump(c){const h=Math.round((c-(this._prevLng===void 0?c:this._prevLng))/360);if(this._prevLng=c,h){const b={};for(const _ in this._tiles){const w=this._tiles[_];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+h),b[w.tileID.key]=w}this._tiles=b;for(const _ in this._timers)clearTimeout(this._timers[_]),delete this._timers[_];for(const _ in this._tiles)this._setTileReloadTimer(+_,this._tiles[_])}}update(c,h,b,_){if(this.transform=c,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!b)return;let w;if(this.updateCacheSize(c,h),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={},this.used||this.usedForTerrain)if(this._source.tileID)w=c.getVisibleUnwrappedCoordinates(this._source.tileID).map(L=>new a.am(L.canonical.z,L.wrap,L.canonical.z,L.canonical.x,L.canonical.y));else if(this.tileCoverLift!==0){const L=c.clone();L.tileCoverLift=this.tileCoverLift,w=L.coveringTiles({tileSize:h||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!b,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.minzoom<=1&&c.projection.name==="globe"&&(w.push(new a.am(1,0,1,0,0)),w.push(new a.am(1,0,1,1,0)),w.push(new a.am(1,0,1,0,1)),w.push(new a.am(1,0,1,1,1)))}else w=c.coveringTiles({tileSize:h||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!b,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(w=w.filter(L=>this._source.hasTile(L)));else w=[];if(w.length>0&&this.castsShadows&&_&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!Ri(this._source.type)){const L=c.coveringZoomLevel({tileSize:h||this._source.tileSize,roundZoom:this._source.roundZoom&&!b}),B=Math.min(L,this._source.maxzoom),U=c.extendTileCoverForShadows(w,_,B);for(const W of U)this._shadowCasterTiles[W.key]=!0,w.push(W)}const k=this._updateRetainedTiles(w);if(Ri(this._source.type)&&w.length!==0){const L={},B={},U=Object.keys(k);for(const J of U){const ee=k[J],ce=this._tiles[J];if(!ce||ce.fadeEndTime&&ce.fadeEndTime<=a.f.now())continue;const se=this.findLoadedParent(ee,Math.max(ee.overscaledZ-Ka.maxOverzooming,this._source.minzoom));se&&(this._addTile(se.tileID),L[se.tileID.key]=se.tileID),B[J]=ee}const W=w[w.length-1].overscaledZ;for(const J in this._tiles){const ee=this._tiles[J];if(k[J]||!ee.hasData())continue;let ce=ee.tileID;for(;ce.overscaledZ>W;){ce=ce.scaledTo(ce.overscaledZ-1);const se=this._tiles[ce.key];if(se&&se.hasData()&&B[ce.key]){k[J]=ee.tileID;break}}}for(const J in L)k[J]||(this._coveredTiles[J]=!0,k[J]=L[J])}for(const L in k)this._tiles[L].clearFadeHold();const D=a.b0(this._tiles,k);for(const L of D){const B=this._tiles[L];B.hasSymbolBuckets&&!B.holdingForFade()?B.setHoldDuration(this.map._fadeDuration):B.hasSymbolBuckets&&!B.symbolFadeFinished()||this._removeTile(+L)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const c in this._tiles)this._tiles[c].holdingForFade()&&this._removeTile(+c)}_updateRetainedTiles(c){const h={};if(c.length===0)return h;const b={},_=c.reduce((B,U)=>Math.min(B,U.overscaledZ),1/0),w=c[0].overscaledZ,k=Math.max(w-Ka.maxOverzooming,this._source.minzoom),D=Math.max(w+Ka.maxUnderzooming,this._source.minzoom),L={};for(const B of c){const U=this._addTile(B);h[B.key]=B,U.hasData()||_<this._source.maxzoom&&(L[B.key]=B)}this._retainLoadedChildren(L,_,D,h);for(const B of c){let U=this._tiles[B.key];if(U.hasData())continue;if(B.canonical.z>=this._source.maxzoom){const J=B.children(this._source.maxzoom)[0],ee=this.getTile(J);if(ee&&ee.hasData()){h[J.key]=J;continue}}else{const J=B.children(this._source.maxzoom);if(h[J[0].key]&&h[J[1].key]&&h[J[2].key]&&h[J[3].key])continue}let W=U.wasRequested();for(let J=B.overscaledZ-1;J>=k;--J){const ee=B.scaledTo(J);if(b[ee.key]||(b[ee.key]=!0,U=this.getTile(ee),!U&&W&&(U=this._addTile(ee)),U&&(h[ee.key]=ee,W=U.wasRequested(),U.hasData())))break}}return h}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const c in this._tiles){const h=[];let b,_=this._tiles[c].tileID;for(;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){b=this._loadedParentTiles[_.key];break}h.push(_.key);const w=_.scaledTo(_.overscaledZ-1);if(b=this._getLoadedTile(w),b)break;_=w}for(const w of h)this._loadedParentTiles[w]=b}}_addTile(c){let h=this._tiles[c.key];if(h)return h.isExtraShadowCaster!==!0||this._shadowCasterTiles[c.key]||this._reloadTile(c.key,"reloading"),h;h=this._cache.getAndRemove(c),h&&(this._setTileReloadTimer(c.key,h),h.tileID=c,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[c.key]&&(clearTimeout(this._cacheTimers[c.key]),delete this._cacheTimers[c.key],this._setTileReloadTimer(c.key,h)));const b=!!h;if(!b){const _=this.map?this.map.painter:null,w=this._source.tileSize*c.overscaleFactor();h=this._source.type==="raster-array"?new $l(c,w,this.transform.tileZoom,_,this._isRaster):new Ds(c,w,this.transform.tileZoom,_,this._isRaster),this._loadTile(h,this._tileLoaded.bind(this,h,c.key,h.state))}return h?(h.uses++,this._tiles[c.key]=h,b||this._source.fire(new a.b("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h):null}_setTileReloadTimer(c,h){c in this._timers&&(clearTimeout(this._timers[c]),delete this._timers[c]);const b=h.getExpiryTimeout();b&&(this._timers[c]=setTimeout(()=>{this._reloadTile(c,"expired"),delete this._timers[c]},b))}_removeTile(c){const h=this._tiles[c];h&&(h.uses--,delete this._tiles[c],this._timers[c]&&(clearTimeout(this._timers[c]),delete this._timers[c]),h.uses>0||(h.hasData()&&h.state!=="reloading"||h.state==="empty"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const c in this._tiles)this._removeTile(+c);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(c,h,b){const _=[],w=this.transform;if(!w)return _;const k=w.projection.name==="globe",D=a.a5(w.center.lng);for(const L in this._tiles){const B=this._tiles[L];if(b&&B.clearQueryDebugViz(),B.holdingForFade())continue;let U;if(k){const W=B.tileID.canonical;if(W.z===0){const J=[Math.abs(a.aa(D,...ji(W,-1))-D),Math.abs(a.aa(D,...ji(W,1))-D)];U=[0,2*J.indexOf(Math.min(...J))-1]}else{const J=[Math.abs(a.aa(D,...ji(W,-1))-D),Math.abs(a.aa(D,...ji(W,0))-D),Math.abs(a.aa(D,...ji(W,1))-D)];U=[J.indexOf(Math.min(...J))-1]}}else U=[0];for(const W of U){const J=c.containsTile(B,w,h,W);J&&_.push(J)}}return _}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(c){return this._getRenderableCoordinates(c)}_getRenderableCoordinates(c,h){const b=this.getRenderableIds(c,h).map(w=>this._tiles[w].tileID),_=this.transform.projection.name==="globe";for(const w of b)w.projMatrix=this.transform.calculateProjMatrix(w.toUnwrapped()),w.expandedProjMatrix=_?this.transform.calculateProjMatrix(w.toUnwrapped(),!1,!0):w.projMatrix;return b}sortCoordinatesByDistance(c){const h=c.slice(),b=this.transform._camera.position,_=this.transform._camera.forward(),w={};for(const k of h){const D=1/(1<<k.canonical.z);w[k.key]=((k.canonical.x+.5)*D+k.wrap-b[0])*_[0]+((k.canonical.y+.5)*D-b[1])*_[1]-b[2]*_[2]}return h.sort((k,D)=>w[k.key]-w[D.key]),h}hasTransition(){if(this._source.hasTransition())return!0;if(Ri(this._source.type))for(const c in this._tiles){const h=this._tiles[c];if(h.fadeEndTime!==void 0&&h.fadeEndTime>=a.f.now())return!0}return!1}setFeatureState(c,h,b){this._state.updateState(c=c||"_geojsonTileLayer",h,b)}removeFeatureState(c,h,b){this._state.removeFeatureState(c=c||"_geojsonTileLayer",h,b)}getFeatureState(c,h){return this._state.getState(c=c||"_geojsonTileLayer",h)}setDependencies(c,h,b){const _=this._tiles[c];_&&_.setDependencies(h,b)}reloadTilesForDependencies(c,h){for(const b in this._tiles)this._tiles[b].hasDependency(c,h)&&this._reloadTile(+b,"reloading");this._cache.filter(b=>!b.hasDependency(c,h))}_preloadTiles(c,h){if(!this._sourceLoaded){const L=()=>{this._sourceLoaded&&(this._source.off("data",L),this._preloadTiles(c,h))};return void this._source.on("data",L)}const b=new Map,_=Array.isArray(c)?c:[c],w=this.map.painter.terrain,k=this.usedForTerrain&&w?w.getScaledDemTileSize():this._source.tileSize;for(const L of _){const B=L.coveringTiles({tileSize:k,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const U of B)b.set(U.key,U);this.usedForTerrain&&L.updateElevation(!1)}const D=Array.from(b.values());a.b1(D,(L,B)=>{const U=new Ds(L,this._source.tileSize*L.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(U,W=>{this._source.type==="raster-dem"&&U.dem&&this._backfillDEM(U),B(W,U)})},h)}}function Ld(g,c){const h=Math.abs(2*g.wrap)-+(g.wrap<0),b=Math.abs(2*c.wrap)-+(c.wrap<0);return g.overscaledZ-c.overscaledZ||b-h||c.canonical.y-g.canonical.y||c.canonical.x-g.canonical.x}function Ri(g){return g==="raster"||g==="image"||g==="video"||g==="custom"}function ji(g,c){const h=1<<g.z;return[g.x/h+c,(g.x+1)/h+c]}Ka.maxOverzooming=10,Ka.maxUnderzooming=3;class Ul{constructor(c){this.style=c,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const c=!1,h=!1;for(const b in this.style._mergedLayers){const _=this.style._mergedLayers[b];if(_.type==="fill-extrusion")this.layers.push({layer:_,visible:c,visibilityChanged:h});else if(_.type==="model"){const w=this.style.getLayerSource(_);w&&w.type==="batched-model"&&this.layers.push({layer:_,visible:c,visibilityChanged:h})}}}onNewFrame(c){this.layersGotHidden=!1;for(const h of this.layers){const b=h.layer;let _=!1;b.type==="fill-extrusion"?_=!b.isHidden(c)&&b.paint.get("fill-extrusion-opacity")>0:b.type==="model"&&(_=!b.isHidden(c)&&b.paint.get("model-opacity")>0),this.layersGotHidden=this.layersGotHidden||!_&&h.visible,h.visible=_}}updateZOffset(c,h){this.currentBuildingBuckets=[];for(const _ of this.layers){const w=_.layer,k=this.style.getLayerSourceCache(w);let D=1;w.type==="fill-extrusion"&&(D=_.visible?w.paint.get("fill-extrusion-vertical-scale"):0);let L=k?k.getTile(h):null;if(!L&&k&&h.canonical.z>k.getSource().minzoom){let B=h.scaledTo(Math.min(k.getSource().maxzoom,h.overscaledZ-1));for(;B.overscaledZ>=k.getSource().minzoom&&(L=k.getTile(B),!L&&B.overscaledZ!==0);)B=B.scaledTo(B.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:L?L.getBucket(w):null,tileID:L?L.tileID:h,verticalScale:D})}c.hasAnyZOffset=!1;let b=!1;for(let _=0;_<c.symbolInstances.length;_++){const w=c.symbolInstances.get(_),k=w.zOffset,D=this._getHeightAtTileOffset(h,w.tileAnchorX,w.tileAnchorY);w.zOffset=D!==Number.NEGATIVE_INFINITY?D:k,b||k===w.zOffset||(b=!0),c.hasAnyZOffset||w.zOffset===0||(c.hasAnyZOffset=!0)}b&&(c.zOffsetBuffersNeedUpload=!0,c.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(c,h,b,_){let w=h,k=b;if(c.canonical.z!==_.canonical.z){const D=_.canonical,L=1/(1<<c.canonical.z-D.z);w=(h+c.canonical.x*a.V)*L-D.x*a.V|0,k=(b+c.canonical.y*a.V)*L-D.y*a.V|0}return{tileX:w,tileY:k}}_getHeightAtTileOffset(c,h,b){let _,w;for(let k=0;k<this.layers.length;++k){if(this.layers[k].layer.type!=="fill-extrusion")continue;const{bucket:D,tileID:L,verticalScale:B}=this.currentBuildingBuckets[k];if(!D)continue;const{tileX:U,tileY:W}=this._mapCoordToOverlappingTile(c,h,b,L),J=D.getHeightAtTileCoord(U,W);J&&J.height!==void 0&&(J.hidden?_=J.height:w=Math.max(J.height*B,w||0))}if(w!==void 0)return w;for(let k=0;k<this.layers.length;++k){const D=this.layers[k];if(D.layer.type!=="model"||!D.visible)continue;const{bucket:L,tileID:B}=this.currentBuildingBuckets[k];if(!L)continue;const{tileX:U,tileY:W}=this._mapCoordToOverlappingTile(c,h,b,B),J=L.getHeightAtTileCoord(U,W);if(J&&!J.hidden)return J.height===void 0&&_!==void 0?Math.min(J.maxHeight,_)*J.verticalScale:(J.height||0)*J.verticalScale}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function Ii(g,c){const h={};for(const b in g)b!=="ref"&&(h[b]=g[b]);return a.b2.forEach(b=>{b in c&&(h[b]=c[b])}),h}function gf(g){g=g.slice();const c=Object.create(null);for(let h=0;h<g.length;h++)c[g[h].id]=g[h];for(let h=0;h<g.length;h++)"ref"in g[h]&&(g[h]=Ii(g[h],c[g[h].ref]));return g}const xr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function Nd(g,c,h){h.push({command:xr.addSource,args:[g,c[g]]})}function zd(g,c,h){c.push({command:xr.removeSource,args:[g]}),h[g]=!0}function Ps(g,c,h,b){zd(g,h,b),Nd(g,c,h)}function Oc(g,c,h){let b;for(b in g[h])if(g[h].hasOwnProperty(b)&&b!=="data"&&!E(g[h][b],c[h][b]))return!1;for(b in c[h])if(c[h].hasOwnProperty(b)&&b!=="data"&&!E(g[h][b],c[h][b]))return!1;return!0}function hs(g,c,h,b,_,w){let k;for(k in c=c||{},g=g||{})g.hasOwnProperty(k)&&(E(g[k],c[k])||h.push({command:w,args:[b,k,c[k],_]}));for(k in c)c.hasOwnProperty(k)&&!g.hasOwnProperty(k)&&(E(g[k],c[k])||h.push({command:w,args:[b,k,c[k],_]}))}function La(g){return g.id}function Du(g,c){return g[c.id]=c,g}class Lc{constructor(c,h){this.reset(c,h)}reset(c,h){this.points=c||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(c){if(this.points.length===1)return this.points[0];c=a.aa(c,0,1);let h=1,b=this._distances[h];const _=c*this.paddedLength+this.padding;for(;b<_&&h<this._distances.length;)b=this._distances[++h];const w=h-1,k=this._distances[w],D=b-k,L=D>0?(_-k)/D:0;return this.points[w].mult(1-L).add(this.points[h].mult(L))}}class Vl{constructor(c,h,b){const _=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(c/b),this.yCellCount=Math.ceil(h/b);for(let k=0;k<this.xCellCount*this.yCellCount;k++)_.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=h,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(c,h,b,_,w){this._forEachCell(h,b,_,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(h),this.bboxes.push(b),this.bboxes.push(_),this.bboxes.push(w)}insertCircle(c,h,b,_){this._forEachCell(h-_,b-_,h+_,b+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(h),this.circles.push(b),this.circles.push(_)}_insertBoxCell(c,h,b,_,w,k){this.boxCells[w].push(k)}_insertCircleCell(c,h,b,_,w,k){this.circleCells[w].push(k)}_query(c,h,b,_,w,k){if(b<0||c>this.width||_<0||h>this.height)return!w&&[];const D=[];if(c<=0&&h<=0&&this.width<=b&&this.height<=_){if(w)return!0;for(let L=0;L<this.boxKeys.length;L++)D.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(let L=0;L<this.circleKeys.length;L++){const B=this.circles[3*L],U=this.circles[3*L+1],W=this.circles[3*L+2];D.push({key:this.circleKeys[L],x1:B-W,y1:U-W,x2:B+W,y2:U+W})}return k?D.filter(k):D}return this._forEachCell(c,h,b,_,this._queryCell,D,{hitTest:w,seenUids:{box:{},circle:{}}},k),w?D.length>0:D}_queryCircle(c,h,b,_,w){const k=c-b,D=c+b,L=h-b,B=h+b;if(D<0||k>this.width||B<0||L>this.height)return!_&&[];const U=[];return this._forEachCell(k,L,D,B,this._queryCellCircle,U,{hitTest:_,circle:{x:c,y:h,radius:b},seenUids:{box:{},circle:{}}},w),_?U.length>0:U}query(c,h,b,_,w){return this._query(c,h,b,_,!1,w)}hitTest(c,h,b,_,w){return this._query(c,h,b,_,!0,w)}hitTestCircle(c,h,b,_){return this._queryCircle(c,h,b,!0,_)}_queryCell(c,h,b,_,w,k,D,L){const B=D.seenUids,U=this.boxCells[w];if(U!==null){const J=this.bboxes;for(const ee of U)if(!B.box[ee]){B.box[ee]=!0;const ce=4*ee;if(c<=J[ce+2]&&h<=J[ce+3]&&b>=J[ce+0]&&_>=J[ce+1]&&(!L||L(this.boxKeys[ee]))){if(D.hitTest)return k.push(!0),!0;k.push({key:this.boxKeys[ee],x1:J[ce],y1:J[ce+1],x2:J[ce+2],y2:J[ce+3]})}}}const W=this.circleCells[w];if(W!==null){const J=this.circles;for(const ee of W)if(!B.circle[ee]){B.circle[ee]=!0;const ce=3*ee;if(this._circleAndRectCollide(J[ce],J[ce+1],J[ce+2],c,h,b,_)&&(!L||L(this.circleKeys[ee]))){if(D.hitTest)return k.push(!0),!0;{const se=J[ce],de=J[ce+1],oe=J[ce+2];k.push({key:this.circleKeys[ee],x1:se-oe,y1:de-oe,x2:se+oe,y2:de+oe})}}}}}_queryCellCircle(c,h,b,_,w,k,D,L){const B=D.circle,U=D.seenUids,W=this.boxCells[w];if(W!==null){const ee=this.bboxes;for(const ce of W)if(!U.box[ce]){U.box[ce]=!0;const se=4*ce;if(this._circleAndRectCollide(B.x,B.y,B.radius,ee[se+0],ee[se+1],ee[se+2],ee[se+3])&&(!L||L(this.boxKeys[ce])))return k.push(!0),!0}}const J=this.circleCells[w];if(J!==null){const ee=this.circles;for(const ce of J)if(!U.circle[ce]){U.circle[ce]=!0;const se=3*ce;if(this._circlesCollide(ee[se],ee[se+1],ee[se+2],B.x,B.y,B.radius)&&(!L||L(this.circleKeys[ce])))return k.push(!0),!0}}}_forEachCell(c,h,b,_,w,k,D,L){const B=this._convertToXCellCoord(c),U=this._convertToYCellCoord(h),W=this._convertToXCellCoord(b),J=this._convertToYCellCoord(_);for(let ee=B;ee<=W;ee++)for(let ce=U;ce<=J;ce++)if(w.call(this,c,h,b,_,this.xCellCount*ce+ee,k,D,L))return}_convertToXCellCoord(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))}_convertToYCellCoord(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))}_circlesCollide(c,h,b,_,w,k){const D=_-c,L=w-h,B=b+k;return B*B>D*D+L*L}_circleAndRectCollide(c,h,b,_,w,k,D){const L=(k-_)/2,B=Math.abs(c-(_+L));if(B>L+b)return!1;const U=(D-w)/2,W=Math.abs(h-(w+U));if(W>U+b)return!1;if(B<=L||W<=U)return!0;const J=B-L,ee=W-U;return J*J+ee*ee<=b*b}}const fs={unknown:0,flipRequired:1,flipNotRequired:2},rl=Math.tan(85*Math.PI/180);function Na(g,c,h,b,_,w,k){const D=a.a6.create();if(h)if(w.name==="globe"){const L=a.b3(_,c);a.a6.multiply(D,D,L)}else{const L=a.b4.invert([],k);D[0]=L[0],D[1]=L[1],D[4]=L[2],D[5]=L[3],b||a.a6.rotateZ(D,D,_.angle)}else a.a6.multiply(D,_.labelPlaneMatrix,g);return D}function _m(g,c,h,b,_,w,k){const D=Na(g,c,h,b,_,w,k);return w.name==="globe"&&h||(D[2]=D[6]=D[10]=D[14]=0),D}function Os(g,c,h,b,_,w,k){if(h){if(w.name==="globe"){const D=Na(g,c,h,b,_,w,k);return a.a6.invert(D,D),a.a6.multiply(D,g,D),D}{const D=a.a6.clone(g),L=a.a6.identity([]);return L[0]=k[0],L[1]=k[1],L[4]=k[2],L[5]=k[3],a.a6.multiply(D,D,L),b||a.a6.rotateZ(D,D,-_.angle),D}}return _.glCoordMatrix}function fa(g,c,h,b){const _=[g,c,h,1];h?a.a7.transformMat4(_,_,b):Tm(_,_,b);const w=_[3];return _[0]/=w,_[1]/=w,_[2]/=w,_}function xm(g,c){return Math.min(.5+g/c*.5,1.5)}function wm(g,c){const h=g[0]/g[3],b=g[1]/g[3];return h>=-c[0]&&h<=c[0]&&b>=-c[1]&&b<=c[1]}function Nc(g,c,h,b,_,w,k,D,L,B){const U=h.transform,W=b?g.textSizeData:g.iconSizeData,J=a.b5(W,h.transform.zoom),ee=U.projection.name==="globe",ce=[256/h.width*2+1,256/h.height*2+1],se=b?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;se.clear();let de=null;ee&&(de=b?g.text.globeExtVertexArray:g.icon.globeExtVertexArray);const oe=g.lineVertexArray,fe=b?g.text.placedSymbolArray:g.icon.placedSymbolArray,Te=h.transform.width/h.transform.height;let be,Ee=!1;for(let he=0;he<fe.length;he++){const Ce=fe.get(he),{numGlyphs:Ne,writingMode:Fe}=Ce;if(Fe!==a.b6.vertical||Ee||be===a.b6.horizontal||(Ee=!0),be=Fe,(Ce.hidden||Fe===a.b6.vertical)&&!Ee){Hl(Ne,se);continue}Ee=!1;const G=new a.P(Ce.tileAnchorX,Ce.tileAnchorY);let{x:R,y:H,z:le}=U.projection.projectTilePoint(G.x,G.y,B.canonical);if(L){const[vt,Wt,Vt]=L(G);R+=vt,H+=Wt,le+=Vt}const ge=[R,H,le,1];if(a.a7.transformMat4(ge,ge,c),!wm(ge,ce)){Hl(Ne,se);continue}const Oe=ge[3],Se=xm(h.transform.getCameraToCenterDistance(U.projection),Oe),Le=a.b7(W,J,Ce),ke=k?Le/Se:Le*Se,Ve=fa(R,H,le,_);if(Ve[3]<=0){Hl(Ne,se);continue}let Ye={};const gt=k?null:L,yt=Em(Ce,ke,!1,D,c,_,w,g.glyphOffsetArray,oe,se,de,Ve,G,Ye,Te,gt,U.projection,B,k);Ee=yt.useVertical,gt&&yt.needsFlipping&&(Ye={}),(yt.notEnoughRoom||Ee||yt.needsFlipping&&Em(Ce,ke,!0,D,c,_,w,g.glyphOffsetArray,oe,se,de,Ve,G,Ye,Te,gt,U.projection,B,k).notEnoughRoom)&&Hl(Ne,se)}b?(g.text.dynamicLayoutVertexBuffer.updateData(se),de&&g.text.globeExtVertexBuffer&&g.text.globeExtVertexBuffer.updateData(de)):(g.icon.dynamicLayoutVertexBuffer.updateData(se),de&&g.icon.globeExtVertexBuffer&&g.icon.globeExtVertexBuffer.updateData(de))}function Bd(g,c,h,b,_,w,k,D,L,B,U,W,J,ee,ce,se){const{lineStartIndex:de,glyphStartIndex:oe,segment:fe}=D,Te=oe+D.numGlyphs,be=de+D.lineLength,Ee=c.getoffsetX(oe),he=c.getoffsetX(Te-1),Ce=Ru(g*Ee,h,b,_,w,k,fe,de,be,L,B,U,W,J,!0,ee,ce,se);if(!Ce)return null;const Ne=Ru(g*he,h,b,_,w,k,fe,de,be,L,B,U,W,J,!0,ee,ce,se);return Ne?{first:Ce,last:Ne}:null}function zc(g,c,h,b){return g===a.b6.horizontal&&Math.abs(b)>Math.abs(h)?{useVertical:!0}:g===a.b6.vertical?b>0?{needsFlipping:!0}:null:c!==fs.unknown&&function(_,w){return _===0||Math.abs(w/_)>rl}(h,b)?c===fs.flipRequired?{needsFlipping:!0}:null:h<0?{needsFlipping:!0}:null}function Em(g,c,h,b,_,w,k,D,L,B,U,W,J,ee,ce,se,de,oe,fe){const Te=c/24,be=g.lineOffsetX*Te,Ee=g.lineOffsetY*Te,{lineStartIndex:he,glyphStartIndex:Ce,numGlyphs:Ne,segment:Fe,writingMode:G,flipState:R}=g,H=he+g.lineLength,le=ge=>{if(U){const[ke,Ve,Ye]=ge.up,gt=B.length;a.b8(U,gt+0,ke,Ve,Ye),a.b8(U,gt+1,ke,Ve,Ye),a.b8(U,gt+2,ke,Ve,Ye),a.b8(U,gt+3,ke,Ve,Ye)}const[Oe,Se,Le]=ge.point;a.b9(B,Oe,Se,Le,ge.angle)};if(Ne>1){const ge=Bd(Te,D,be,Ee,h,W,J,g,L,w,ee,se,!1,de,oe,fe);if(!ge)return{notEnoughRoom:!0};if(b&&!h){let[Oe,Se,Le]=ge.first.point,[ke,Ve,Ye]=ge.last.point;[Oe,Se]=fa(Oe,Se,Le,k),[ke,Ve]=fa(ke,Ve,Ye,k);const gt=zc(G,R,(ke-Oe)*ce,Ve-Se);if(g.flipState=gt&&gt.needsFlipping?fs.flipRequired:fs.flipNotRequired,gt)return gt}le(ge.first);for(let Oe=Ce+1;Oe<Ce+Ne-1;Oe++){const Se=Ru(Te*D.getoffsetX(Oe),be,Ee,h,W,J,Fe,he,H,L,w,ee,se,!1,!1,de,oe,fe);if(!Se)return B.length-=4*(Oe-Ce),{notEnoughRoom:!0};le(Se)}le(ge.last)}else{if(b&&!h){const Oe=fa(J.x,J.y,0,_),Se=he+Fe+1,Le=new a.P(L.getx(Se),L.gety(Se)),ke=fa(Le.x,Le.y,0,_),Ve=ke[3]>0?ke:Fd(J,Le,Oe,1,_,void 0,de,oe.canonical),Ye=zc(G,R,(Ve[0]-Oe[0])*ce,Ve[1]-Oe[1]);if(g.flipState=Ye&&Ye.needsFlipping?fs.flipRequired:fs.flipNotRequired,Ye)return Ye}const ge=Ru(Te*D.getoffsetX(Ce),be,Ee,h,W,J,Fe,he,H,L,w,ee,se,!1,!1,de,oe,fe);if(!ge)return{notEnoughRoom:!0};le(ge)}return{}}function Bc(g,c,h,b,_){const{x:w,y:k,z:D}=b.projectTilePoint(g.x,g.y,c);if(!_)return fa(w,k,D,h);const[L,B,U]=_(g);return fa(w+L,k+B,D+U,h)}function Fd(g,c,h,b,_,w,k,D){const L=Bc(g.sub(c)._unit()._add(g),D,_,k,w);return a.N.sub(L,h,L),a.N.normalize(L,L),a.N.scaleAndAdd(L,h,L,b)}function Ru(g,c,h,b,_,w,k,D,L,B,U,W,J,ee,ce,se,de,oe){const fe=b?g-c:g+c;let Te=fe>0?1:-1,be=0;b&&(Te*=-1,be=Math.PI),Te<0&&(be+=Math.PI);let Ee=D+k+(Te>0?0:1)|0,he=_,Ce=_,Ne=0,Fe=0;const G=Math.abs(fe),R=[],H=[];let le=w,ge=le;const Oe=()=>Fd(ge,le,Ce,G-Ne+1,U,J,se,de.canonical);for(;Ne+Fe<=G;){if(Ee+=Te,Ee<D||Ee>=L)return null;if(Ce=he,ge=le,R.push(Ce),ee&&H.push(ge),le=new a.P(B.getx(Ee),B.gety(Ee)),he=W[Ee],!he){const Wt=Bc(le,de.canonical,U,se,J);he=Wt[3]>0?W[Ee]=Wt:Oe()}Ne+=Fe,Fe=a.N.distance(Ce,he)}ce&&J&&(W[Ee]&&(he=Oe(),Fe=a.N.distance(Ce,he)),W[Ee]=he);const Se=(G-Ne)/Fe,Le=le.sub(ge)._mult(Se)._add(ge),ke=a.N.sub([],he,Ce),Ve=a.N.scaleAndAdd([],Ce,ke,Se);let Ye=[0,0,1],gt=ke[0],yt=ke[1];if(oe&&(Ye=se.upVector(de.canonical,Le.x,Le.y),Ye[0]!==0||Ye[1]!==0||Ye[2]!==1)){const Wt=[Ye[2],0,-Ye[0]],Vt=a.N.cross([],Ye,Wt);a.N.normalize(Wt,Wt),a.N.normalize(Vt,Vt),gt=a.N.dot(ke,Wt),yt=a.N.dot(ke,Vt)}if(h){const Wt=a.N.cross([],Ye,ke);a.N.normalize(Wt,Wt),a.N.scaleAndAdd(Ve,Ve,Wt,h*Te)}const vt=be+Math.atan2(yt,gt);return R.push(Ve),ee&&H.push(Le),{point:Ve,angle:vt,path:R,tilePath:H,up:Ye}}function Hl(g,c){const h=c.length,b=h+4*g;c.resize(b),c.float32.fill(-1/0,4*h,4*b)}function Tm(g,c,h){const b=c[0],_=c[1];return g[0]=h[0]*b+h[4]*_+h[12],g[1]=h[1]*b+h[5]*_+h[13],g[3]=h[3]*b+h[7]*_+h[15],g}const Xa=100;class Xt{constructor(c,h,b=new Vl(c.width+200,c.height+200,25),_=new Vl(c.width+200,c.height+200,25)){this.transform=c,this.grid=b,this.ignoredGrid=_,this.pitchfactor=Math.cos(c._pitch)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+Xa,this.screenBottomBoundary=c.height+Xa,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200,this.fogState=h}placeCollisionBox(c,h,b,_,w,k,D,L){let B=b.projectedAnchorX,U=b.projectedAnchorY,W=b.projectedAnchorZ;const J=b.elevation,ee=b.tileID,ce=c.getProjection();if(J&&ee){const[he,Ce,Ne]=ce.upVector(ee.canonical,b.tileAnchorX,b.tileAnchorY),Fe=ce.upVectorScale(ee.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;B+=he*J*Fe,U+=Ce*J*Fe,W+=Ne*J*Fe}const se=this.projectAndGetPerspectiveRatio(D,B,U,W,b.tileID,ce.name==="globe"||!!J||this.transform.pitch>0,ce),de=k*se.perspectiveRatio,oe=(b.x1*h+_.x-b.padding)*de+se.point.x,fe=(b.y1*h+_.y-b.padding)*de+se.point.y,Te=(b.x2*h+_.x+b.padding)*de+se.point.x,be=(b.y2*h+_.y+b.padding)*de+se.point.y,Ee=se.perspectiveRatio<=.55||se.occluded;return!this.isInsideGrid(oe,fe,Te,be)||!w&&this.grid.hitTest(oe,fe,Te,be,L)||Ee?{box:[],offscreen:!1,occluded:se.occluded}:{box:[oe,fe,Te,be],offscreen:this.isOffscreen(oe,fe,Te,be),occluded:!1}}placeCollisionCircles(c,h,b,_,w,k,D,L,B,U,W,J,ee,ce,se){const de=[],oe=this.transform.elevation,fe=c.getProjection(),Te=oe?oe.getAtTileOffsetFunc(se,this.transform.center.lat,this.transform.worldSize,fe):null,be=new a.P(b.tileAnchorX,b.tileAnchorY);let{x:Ee,y:he,z:Ce}=fe.projectTilePoint(be.x,be.y,se.canonical);if(Te){const[Le,ke,Ve]=Te(be);Ee+=Le,he+=ke,Ce+=Ve}const Ne=fe.name==="globe",Fe=this.projectAndGetPerspectiveRatio(D,Ee,he,Ce,se,Ne||!!oe||this.transform.pitch>0,fe),{perspectiveRatio:G}=Fe,R=(W?k/G:k*G)/a.bc,H=fa(Ee,he,Ce,L),le=Fe.signedDistanceFromCamera>0?Bd(R,w,b.lineOffsetX*R,b.lineOffsetY*R,!1,H,be,b,_,L,{},oe&&!W?Te:null,W&&!!oe,fe,se,W):null;let ge=!1,Oe=!1,Se=!0;if(le&&!Fe.occluded){const Le=.5*ee*G+ce,ke=new a.P(-100,-100),Ve=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Ye=new Lc,{first:gt,last:yt}=le,vt=gt.path.length;let Wt=[];for(let Zt=vt-1;Zt>=1;Zt--)Wt.push(gt.path[Zt]);for(let Zt=1;Zt<yt.path.length;Zt++)Wt.push(yt.path[Zt]);const Vt=2.5*Le;B&&(Wt=Wt.map(([Zt,In,xn],on)=>(Te&&!Ne&&(xn=Te(on<vt-1?gt.tilePath[vt-1-on]:yt.tilePath[on-vt+2])[2]),fa(Zt,In,xn,B))),Wt.some(Zt=>Zt[3]<=0)&&(Wt=[]));let Ht=[];if(Wt.length>0){let Zt=1/0,In=-1/0,xn=1/0,on=-1/0;for(const yn of Wt)Zt=Math.min(Zt,yn[0]),xn=Math.min(xn,yn[1]),In=Math.max(In,yn[0]),on=Math.max(on,yn[1]);In>=ke.x&&Zt<=Ve.x&&on>=ke.y&&xn<=Ve.y&&(Ht=[Wt.map(yn=>new a.P(yn[0],yn[1]))],(Zt<ke.x||In>Ve.x||xn<ke.y||on>Ve.y)&&(Ht=a.ba(Ht,ke.x,ke.y,Ve.x,Ve.y)))}for(const Zt of Ht){Ye.reset(Zt,.25*Le);let In=0;In=Ye.length<=.5*Le?1:Math.ceil(Ye.paddedLength/Vt)+1;for(let xn=0;xn<In;xn++){const on=xn/Math.max(In-1,1),yn=Ye.lerp(on),Ln=yn.x+Xa,lr=yn.y+Xa;de.push(Ln,lr,Le,0);const jn=Ln-Le,Dr=lr-Le,zn=Ln+Le,Qn=lr+Le;if(Se=Se&&this.isOffscreen(jn,Dr,zn,Qn),Oe=Oe||this.isInsideGrid(jn,Dr,zn,Qn),!h&&this.grid.hitTestCircle(Ln,lr,Le,J)&&(ge=!0,!U))return{circles:[],offscreen:!1,collisionDetected:ge,occluded:!1}}}}return{circles:!U&&ge||!Oe?[]:de,offscreen:Se,collisionDetected:ge,occluded:Fe.occluded}}queryRenderedSymbols(c){if(c.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let b=1/0,_=1/0,w=-1/0,k=-1/0;for(const U of c){const W=new a.P(U.x+Xa,U.y+Xa);b=Math.min(b,W.x),_=Math.min(_,W.y),w=Math.max(w,W.x),k=Math.max(k,W.y),h.push(W)}const D=this.grid.query(b,_,w,k).concat(this.ignoredGrid.query(b,_,w,k)),L={},B={};for(const U of D){const W=U.key;if(L[W.bucketInstanceId]===void 0&&(L[W.bucketInstanceId]={}),L[W.bucketInstanceId][W.featureIndex])continue;const J=[new a.P(U.x1,U.y1),new a.P(U.x2,U.y1),new a.P(U.x2,U.y2),new a.P(U.x1,U.y2)];a.bb(h,J)&&(L[W.bucketInstanceId][W.featureIndex]=!0,B[W.bucketInstanceId]===void 0&&(B[W.bucketInstanceId]=[]),B[W.bucketInstanceId].push(W.featureIndex))}return B}insertCollisionBox(c,h,b,_,w){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:_,collisionGroupID:w},c[0],c[1],c[2],c[3])}insertCollisionCircles(c,h,b,_,w){const k=h?this.ignoredGrid:this.grid,D={bucketInstanceId:b,featureIndex:_,collisionGroupID:w};for(let L=0;L<c.length;L+=4)k.insertCircle(D,c[L],c[L+1],c[L+2])}projectAndGetPerspectiveRatio(c,h,b,_,w,k,D){const L=[h,b,_,1];let B=!1;_||this.transform.pitch>0?(a.a7.transformMat4(L,L,c),this.fogState&&w&&D.name!=="globe"&&(B=function(J,ee,ce,se,de,oe){const fe=oe.calculateFogTileMatrix(de),Te=[ee,ce,se];return a.N.transformMat4(Te,Te,fe),vr(J,a.N.length(Te),oe.pitch,oe._fov)}(this.fogState,h,b,_,w.toUnwrapped(),this.transform)>.9)):Tm(L,L,c);const U=L[3];return{point:new a.P((L[0]/U+1)/2*this.transform.width+Xa,(-L[1]/U+1)/2*this.transform.height+Xa),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(D)/U*.5,1.5),signedDistanceFromCamera:U,occluded:k&&L[2]>U||B}}isOffscreen(c,h,b,_){return b<Xa||c>=this.screenRightBoundary||_<Xa||h>this.screenBottomBoundary}isInsideGrid(c,h,b,_){return b>=0&&c<this.gridRightBoundary&&_>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const c=a.a6.identity([]);return a.a6.translate(c,c,[-100,-100,0]),c}}function ol(g,c,h){const b=c.createTileMatrix(g,g.worldSize,h.toUnwrapped());return a.a6.multiply(new Float32Array(16),g.projMatrix,b)}function Sm(g,c,h){if(c.projection.name===h.projection.name)return g.projMatrix;const b=h.clone();return b.setProjection(c.projection),ol(b,c.getProjection(),g)}function jd(g,c,h){return c.name===h.projection.name?g.projMatrix:ol(h,c,g)}class yf{constructor(c,h,b,_){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?h:-h))):_&&b?1:0,this.placed=b}isHidden(){return this.opacity===0&&!this.placed}}class Wl{constructor(c,h,b,_,w,k=!1){this.text=new yf(c?c.text:null,h,b,w),this.icon=new yf(c?c.icon:null,h,_,w),this.clipped=k}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class za{constructor(c,h,b,_=!1){this.text=c,this.icon=h,this.skipFade=b,this.clipped=_}}class Iu{constructor(){this.invProjMatrix=a.a6.create(),this.viewportMatrix=a.a6.create(),this.circles=[]}}class Fc{constructor(c,h,b,_,w){this.bucketInstanceId=c,this.featureIndex=h,this.sourceLayerIndex=b,this.bucketIndex=_,this.tileID=w}}class Pu{constructor(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}}get(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){const h=++this.maxGroupID;this.collisionGroups[c]={ID:h,predicate:b=>b.collisionGroupID===h}}return this.collisionGroups[c]}}function jc(g,c,h,b,_){const{horizontalAlign:w,verticalAlign:k}=a.bf(g),D=-(w-.5)*c,L=-(k-.5)*h,B=a.bd(g,b);return new a.P(D+B[0]*_,L+B[1]*_)}function Ou(g,c,h,b,_){const w=new a.P(g,c);return h&&w._rotate(b?_:-_),w}class Cv{constructor(c,h,b,_,w,k){this.transform=c.clone(),this.projection=c.projection.name,this.collisionIndex=new Xt(this.transform,w),this.buildingIndex=k,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new Pu(b),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(c,h,b,_){const w=b.getBucket(h),k=b.latestFeatureIndex;if(!w||!k||h.fqid!==w.layerIds[0])return;const D=w.layers[0].layout,L=b.collisionBoxArray,B=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),U=b.tileSize/a.V,W=b.tileID.toUnwrapped();this.transform.setProjection(w.projection);const J=(ee=b.tileID,ce=w.getProjection(),se=this.transform,ce.name===this.projection?se.calculateProjMatrix(ee.toUnwrapped()):ol(se,ce,ee));var ee,ce,se;const de=D.get("text-pitch-alignment")==="map",oe=D.get("text-rotation-alignment")==="map";h.compileFilter();const fe=h.dynamicFilter(),Te=h.dynamicFilterNeedsFeature(),be=this.transform.calculatePixelsToTileUnitsMatrix(b),Ee=_m(J,b.tileID.canonical,de,oe,this.transform,w.getProjection(),be);let he=null;if(de){const Fe=Os(J,b.tileID.canonical,de,oe,this.transform,w.getProjection(),be);he=a.a6.multiply([],this.transform.labelPlaneMatrix,Fe)}let Ce=null;fe&&b.latestFeatureIndex&&(Ce={unwrappedTileID:W,dynamicFilter:fe,dynamicFilterNeedsFeature:Te,featureIndex:b.latestFeatureIndex}),this.retainedQueryData[w.bucketInstanceId]=new Fc(w.bucketInstanceId,k,w.sourceLayerIndex,w.index,b.tileID);const Ne={bucket:w,layout:D,posMatrix:J,textLabelPlaneMatrix:Ee,labelToScreenMatrix:he,clippingData:Ce,scale:B,textPixelRatio:U,holdingForFade:b.holdingForFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:a.b5(w.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:a.b5(w.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(_)for(const Fe of w.sortKeyRanges){const{sortKey:G,symbolInstanceStart:R,symbolInstanceEnd:H}=Fe;c.push({sortKey:G,symbolInstanceStart:R,symbolInstanceEnd:H,parameters:Ne})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:Ne})}attemptAnchorPlacement(c,h,b,_,w,k,D,L,B,U,W,J,ee,ce,se,de,oe,fe){const{textOffset0:Te,textOffset1:be,crossTileID:Ee}=J,he=[Te,be],Ce=jc(c,b,_,he,w),Ne=this.collisionIndex.placeCollisionBox(ce,w,h,Ou(Ce.x,Ce.y,k,D,this.transform.angle),W,L,B,U.predicate);if(de){const Fe=ce.getSymbolInstanceIconSize(fe,this.transform.zoom,J.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(ce,Fe,de,Ou(Ce.x,Ce.y,k,D,this.transform.angle),W,L,B,U.predicate).box.length===0)return}if(Ne.box.length>0){let Fe;return this.prevPlacement&&this.prevPlacement.variableOffsets[Ee]&&this.prevPlacement.placements[Ee]&&this.prevPlacement.placements[Ee].text&&(Fe=this.prevPlacement.variableOffsets[Ee].anchor),this.variableOffsets[Ee]={textOffset:he,width:b,height:_,anchor:c,textScale:w,prevAnchor:Fe},this.markUsedJustification(ce,c,J,se),ce.allowVerticalPlacement&&(this.markUsedOrientation(ce,se,J),this.placedOrientations[Ee]=se),{shift:Ce,placedGlyphBoxes:Ne}}}placeLayerBucketPart(c,h,b,_){const{bucket:w,layout:k,posMatrix:D,textLabelPlaneMatrix:L,labelToScreenMatrix:B,clippingData:U,textPixelRatio:W,holdingForFade:J,collisionBoxArray:ee,partiallyEvaluatedTextSize:ce,partiallyEvaluatedIconSize:se,collisionGroup:de}=c.parameters,oe=k.get("text-optional"),fe=k.get("icon-optional"),Te=k.get("text-allow-overlap"),be=k.get("icon-allow-overlap"),Ee=k.get("text-rotation-alignment")==="map",he=k.get("text-pitch-alignment")==="map",Ce=k.get("symbol-z-order")==="viewport-y",Ne=k.get("symbol-z-elevate");this.transform.setProjection(w.projection);let Fe=Te&&(be||!w.hasIconData()||fe),G=be&&(Te||!w.hasTextData()||oe);!w.collisionArrays&&ee&&w.deserializeCollisionBoxes(ee),b&&_&&w.updateCollisionDebugBuffers(this.transform.zoom,ee);const R=(H,le,ge)=>{const{crossTileID:Oe,numVerticalGlyphVertices:Se}=H;if(U){const zn={zoom:this.transform.zoom,pitch:this.transform.pitch};let Qn=null;if(U.dynamicFilterNeedsFeature){const qn=this.retainedQueryData[w.bucketInstanceId];Qn=U.featureIndex.loadFeature({featureIndex:H.featureIndex,bucketIndex:qn.bucketIndex,sourceLayerIndex:qn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,U.dynamicFilter)(zn,Qn,this.retainedQueryData[w.bucketInstanceId].tileID.canonical,new a.P(H.tileAnchorX,H.tileAnchorY),this.transform.calculateDistanceTileData(U.unwrappedTileID)))return this.placements[Oe]=new za(!1,!1,!1,!0),void h.add(Oe)}if(h.has(Oe))return;if(J)return void(this.placements[Oe]=new za(!1,!1,!1));let Le=!1,ke=!1,Ve=!0,Ye=!1,gt=!1,yt=null,vt={box:null,offscreen:null,occluded:null},Wt={box:null,offscreen:null,occluded:null},Vt=null,Ht=null,Zt=null,In=0,xn=0,on=0;ge.textFeatureIndex?In=ge.textFeatureIndex:H.useRuntimeCollisionCircles&&(In=H.featureIndex),ge.verticalTextFeatureIndex&&(xn=ge.verticalTextFeatureIndex);const yn=zn=>{zn.tileID=this.retainedQueryData[w.bucketInstanceId].tileID;const Qn=this.transform.elevation;zn.elevation=H.zOffset+(Qn?Qn.getAtTileOffset(zn.tileID,zn.tileAnchorX,zn.tileAnchorY):0)},Ln=ge.textBox;if(Ln){yn(Ln);const zn=qn=>{let Jn=a.b6.horizontal;if(w.allowVerticalPlacement&&!qn&&this.prevPlacement){const Xr=this.prevPlacement.placedOrientations[Oe];Xr&&(this.placedOrientations[Oe]=Xr,Jn=Xr,this.markUsedOrientation(w,Jn,H))}return Jn},Qn=(qn,Jn)=>{if(w.allowVerticalPlacement&&Se>0&&ge.verticalTextBox){for(const Xr of w.writingModes)if(Xr===a.b6.vertical?(vt=Jn(),Wt=vt):vt=qn(),vt&&vt.box&&vt.box.length)break}else vt=qn()};if(k.get("text-variable-anchor")){let qn=k.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Oe]){const br=this.prevPlacement.variableOffsets[Oe];qn.indexOf(br.anchor)>0&&(qn=qn.filter(uo=>uo!==br.anchor),qn.unshift(br.anchor))}const Jn=(br,uo,Eo)=>{const Ui=w.getSymbolInstanceTextSize(ce,H,this.transform.zoom,le),oa=(br.x2-br.x1)*Ui+2*br.padding,Vi=(br.y2-br.y1)*Ui+2*br.padding,Qo=H.hasIconTextFit&&!be?uo:null;Qo&&yn(Qo);let Oo={box:[],offscreen:!1,occluded:!1};const _i=Te?2*qn.length:qn.length;for(let ui=0;ui<_i;++ui){const ri=this.attemptAnchorPlacement(qn[ui%qn.length],br,oa,Vi,Ui,Ee,he,W,D,de,ui>=qn.length,H,le,w,Eo,Qo,ce,se);if(ri&&(Oo=ri.placedGlyphBoxes,Oo&&Oo.box&&Oo.box.length)){Le=!0,yt=ri.shift;break}}return Oo};Qn(()=>Jn(Ln,ge.iconBox,a.b6.horizontal),()=>{const br=ge.verticalTextBox;return br&&yn(br),w.allowVerticalPlacement&&!(vt&&vt.box&&vt.box.length)&&Se>0&&br?Jn(br,ge.verticalIconBox,a.b6.vertical):{box:null,offscreen:null,occluded:null}}),vt&&(Le=vt.box,Ve=vt.offscreen,Ye=vt.occluded);const Xr=zn(!(!vt||!vt.box));if(!Le&&this.prevPlacement){const br=this.prevPlacement.variableOffsets[Oe];br&&(this.variableOffsets[Oe]=br,this.markUsedJustification(w,br.anchor,H,Xr))}}else{const qn=(Jn,Xr)=>{const br=w.getSymbolInstanceTextSize(ce,H,this.transform.zoom,le),uo=this.collisionIndex.placeCollisionBox(w,br,Jn,new a.P(0,0),Te,W,D,de.predicate);return uo&&uo.box&&uo.box.length&&(this.markUsedOrientation(w,Xr,H),this.placedOrientations[Oe]=Xr),uo};Qn(()=>qn(Ln,a.b6.horizontal),()=>{const Jn=ge.verticalTextBox;return w.allowVerticalPlacement&&Se>0&&Jn?(yn(Jn),qn(Jn,a.b6.vertical)):{box:null,offscreen:null,occluded:null}}),zn(!!(vt&&vt.box&&vt.box.length))}}if(Vt=vt,Le=Vt&&Vt.box&&Vt.box.length>0,Ve=Vt&&Vt.offscreen,Ye=Vt&&Vt.occluded,H.useRuntimeCollisionCircles){const zn=w.text.placedSymbolArray.get(H.centerJustifiedTextSymbolIndex>=0?H.centerJustifiedTextSymbolIndex:H.verticalPlacedTextSymbolIndex),Qn=a.b7(w.textSizeData,ce,zn),qn=k.get("text-padding");Ht=this.collisionIndex.placeCollisionCircles(w,Te,zn,w.lineVertexArray,w.glyphOffsetArray,Qn,D,L,B,b,he,de.predicate,H.collisionCircleDiameter*Qn/a.bc,qn,this.retainedQueryData[w.bucketInstanceId].tileID),Le=Te||Ht.circles.length>0&&!Ht.collisionDetected,Ve=Ve&&Ht.offscreen,Ye=Ht.occluded}if(ge.iconFeatureIndex&&(on=ge.iconFeatureIndex),ge.iconBox){const zn=Qn=>{yn(Qn);const qn=H.hasIconTextFit&&yt?Ou(yt.x,yt.y,Ee,he,this.transform.angle):new a.P(0,0),Jn=w.getSymbolInstanceIconSize(se,this.transform.zoom,H.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(w,Jn,Qn,qn,be,W,D,de.predicate)};Wt&&Wt.box&&Wt.box.length&&ge.verticalIconBox?(Zt=zn(ge.verticalIconBox),ke=Zt.box.length>0):(Zt=zn(ge.iconBox),ke=Zt.box.length>0),Ve=Ve&&Zt.offscreen,gt=Zt.occluded}const lr=oe||H.numHorizontalGlyphVertices===0&&Se===0,jn=fe||H.numIconVertices===0;if(lr||jn?jn?lr||(ke=ke&&Le):Le=ke&&Le:ke=Le=ke&&Le,Le&&Vt&&Vt.box&&this.collisionIndex.insertCollisionBox(Vt.box,k.get("text-ignore-placement"),w.bucketInstanceId,Wt&&Wt.box&&xn?xn:In,de.ID),ke&&Zt&&this.collisionIndex.insertCollisionBox(Zt.box,k.get("icon-ignore-placement"),w.bucketInstanceId,on,de.ID),Ht&&(Le&&this.collisionIndex.insertCollisionCircles(Ht.circles,k.get("text-ignore-placement"),w.bucketInstanceId,In,de.ID),b)){const zn=w.bucketInstanceId;let Qn=this.collisionCircleArrays[zn];Qn===void 0&&(Qn=this.collisionCircleArrays[zn]=new Iu);for(let qn=0;qn<Ht.circles.length;qn+=4)Qn.circles.push(Ht.circles[qn+0]),Qn.circles.push(Ht.circles[qn+1]),Qn.circles.push(Ht.circles[qn+2]),Qn.circles.push(Ht.collisionDetected?1:0)}const Dr=w.projection.name!=="globe";Fe=Fe&&(Dr||!Ye),G=G&&(Dr||!gt),this.placements[Oe]=new za(Le||Fe,ke||G,Ve||w.justReloaded),h.add(Oe)};if(Ne&&this.buildingIndex&&(this.buildingIndex.updateZOffset(w,this.retainedQueryData[w.bucketInstanceId].tileID),w.updateZOffset()),Ce){const H=w.getSortedSymbolIndexes(this.transform.angle);for(let le=H.length-1;le>=0;--le){const ge=H[le];R(w.symbolInstances.get(ge),ge,w.collisionArrays[ge])}w.hasAnyZOffset&&a.w(`${w.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(w.hasAnyZOffset){const H=w.getSortedIndexesByZOffset();for(let le=0;le<H.length;++le){const ge=H[le];R(w.symbolInstances.get(ge),ge,w.collisionArrays[ge])}}else for(let H=c.symbolInstanceStart;H<c.symbolInstanceEnd;H++)R(w.symbolInstances.get(H),H,w.collisionArrays[H]);if(b&&w.bucketInstanceId in this.collisionCircleArrays){const H=this.collisionCircleArrays[w.bucketInstanceId];a.a6.invert(H.invProjMatrix,D),H.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(c,h,b,_){const{leftJustifiedTextSymbolIndex:w,centerJustifiedTextSymbolIndex:k,rightJustifiedTextSymbolIndex:D,verticalPlacedTextSymbolIndex:L,crossTileID:B}=b,U=a.be(h),W=_===a.b6.vertical?L:U==="left"?w:U==="center"?k:U==="right"?D:-1;w>=0&&(c.text.placedSymbolArray.get(w).crossTileID=W>=0&&w!==W?0:B),k>=0&&(c.text.placedSymbolArray.get(k).crossTileID=W>=0&&k!==W?0:B),D>=0&&(c.text.placedSymbolArray.get(D).crossTileID=W>=0&&D!==W?0:B),L>=0&&(c.text.placedSymbolArray.get(L).crossTileID=W>=0&&L!==W?0:B)}markUsedOrientation(c,h,b){const _=h===a.b6.horizontal||h===a.b6.horizontalOnly?h:0,w=h===a.b6.vertical?h:0,{leftJustifiedTextSymbolIndex:k,centerJustifiedTextSymbolIndex:D,rightJustifiedTextSymbolIndex:L,verticalPlacedTextSymbolIndex:B}=b,U=c.text.placedSymbolArray;k>=0&&(U.get(k).placedOrientation=_),D>=0&&(U.get(D).placedOrientation=_),L>=0&&(U.get(L).placedOrientation=_),B>=0&&(U.get(B).placedOrientation=w)}commit(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let b=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const _=h?h.symbolFadeChange(c):1,w=h?h.opacities:{},k=h?h.variableOffsets:{},D=h?h.placedOrientations:{};for(const L in this.placements){const B=this.placements[L],U=w[L];U?(this.opacities[L]=new Wl(U,_,B.text,B.icon,null,B.clipped),b=b||B.text!==U.text.placed||B.icon!==U.icon.placed):(this.opacities[L]=new Wl(null,_,B.text,B.icon,B.skipFade,B.clipped),b=b||B.text||B.icon)}for(const L in w){const B=w[L];if(!this.opacities[L]){const U=new Wl(B,_,!1,!1);U.isHidden()||(this.opacities[L]=U,b=b||B.text.placed||B.icon.placed)}}for(const L in k)this.variableOffsets[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.variableOffsets[L]=k[L]);for(const L in D)this.placedOrientations[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.placedOrientations[L]=D[L]);b?this.lastPlacementChangeTime=c:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:c)}updateLayerOpacities(c,h){const b=new Set;for(const _ of h){const w=_.getBucket(c);w&&_.latestFeatureIndex&&c.fqid===w.layerIds[0]&&(this.updateBucketOpacities(w,b,_.collisionBoxArray),w.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(w,_.tileID),w.updateZOffset()))}}updateBucketOpacities(c,h,b){c.hasTextData()&&c.text.opacityVertexArray.clear(),c.hasIconData()&&c.icon.opacityVertexArray.clear(),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();const _=c.layers[0].layout,w=!!c.layers[0].dynamicFilter(),k=new Wl(null,0,!1,!1,!0),D=_.get("text-allow-overlap"),L=_.get("icon-allow-overlap"),B=_.get("text-variable-anchor"),U=_.get("text-rotation-alignment")==="map",W=_.get("text-pitch-alignment")==="map",J=new Wl(null,0,D&&(L||!c.hasIconData()||_.get("icon-optional")),L&&(D||!c.hasTextData()||_.get("text-optional")),!0);!c.collisionArrays&&b&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(b);const ee=(se,de,oe)=>{for(let fe=0;fe<de/4;fe++)se.opacityVertexArray.emplaceBack(oe)};let ce=0;for(let se=0;se<c.symbolInstances.length;se++){const de=c.symbolInstances.get(se),{numHorizontalGlyphVertices:oe,numVerticalGlyphVertices:fe,crossTileID:Te,numIconVertices:be}=de,Ee=h.has(Te);let he=this.opacities[Te];Ee?he=k:he||(he=J,this.opacities[Te]=he),h.add(Te);const Ce=oe>0||fe>0,Ne=be>0,Fe=this.placedOrientations[Te],G=Fe===a.b6.vertical,R=Fe===a.b6.horizontal||Fe===a.b6.horizontalOnly;if(!Ce&&!Ne||he.isHidden()||ce++,Ce){const H=vf(he.text);ee(c.text,oe,G?Ud:H),ee(c.text,fe,R?Ud:H);const le=he.text.isHidden(),{leftJustifiedTextSymbolIndex:ge,centerJustifiedTextSymbolIndex:Oe,rightJustifiedTextSymbolIndex:Se,verticalPlacedTextSymbolIndex:Le}=de,ke=c.text.placedSymbolArray,Ve=le||G?1:0;ge>=0&&(ke.get(ge).hidden=Ve),Oe>=0&&(ke.get(Oe).hidden=Ve),Se>=0&&(ke.get(Se).hidden=Ve),Le>=0&&(ke.get(Le).hidden=le||R?1:0);const Ye=this.variableOffsets[Te];Ye&&this.markUsedJustification(c,Ye.anchor,de,Fe);const gt=this.placedOrientations[Te];gt&&(this.markUsedJustification(c,"left",de,gt),this.markUsedOrientation(c,gt,de))}if(Ne){const H=vf(he.icon),{placedIconSymbolIndex:le,verticalPlacedIconSymbolIndex:ge}=de,Oe=c.icon.placedSymbolArray,Se=he.icon.isHidden()?1:0;le>=0&&(ee(c.icon,be,G?Ud:H),Oe.get(le).hidden=Se),ge>=0&&(ee(c.icon,de.numVerticalIconVertices,R?Ud:H),Oe.get(ge).hidden=Se)}if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){const H=c.collisionArrays[se];if(H){let le=new a.P(0,0),ge=!0;if(H.textBox||H.verticalTextBox){if(B){const Se=this.variableOffsets[Te];Se?(le=jc(Se.anchor,Se.width,Se.height,Se.textOffset,Se.textScale),U&&le._rotate(W?this.transform.angle:-this.transform.angle)):ge=!1}w&&(ge=!he.clipped),H.textBox&&$c(c.textCollisionBox.collisionVertexArray,he.text.placed,!ge||G,le.x,le.y),H.verticalTextBox&&$c(c.textCollisionBox.collisionVertexArray,he.text.placed,!ge||R,le.x,le.y)}const Oe=ge&&!!(!R&&H.verticalIconBox);H.iconBox&&$c(c.iconCollisionBox.collisionVertexArray,he.icon.placed,Oe,de.hasIconTextFit?le.x:0,de.hasIconTextFit?le.y:0),H.verticalIconBox&&$c(c.iconCollisionBox.collisionVertexArray,he.icon.placed,!Oe,de.hasIconTextFit?le.x:0,de.hasIconTextFit?le.y:0)}}}if(c.fullyClipped=ce===0,c.sortFeatures(this.transform.angle),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.bucketInstanceId in this.collisionCircleArrays){const se=this.collisionCircleArrays[c.bucketInstanceId];c.placementInvProjMatrix=se.invProjMatrix,c.placementViewportMatrix=se.viewportMatrix,c.collisionCircleArray=se.circles,delete this.collisionCircleArrays[c.bucketInstanceId]}}symbolFadeChange(c){return this.fadeDuration===0?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(c){return Math.max(0,(this.transform.zoom-c)/1.5)}hasTransitions(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(c,h){const b=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*b>c}setStale(){this.stale=!0}}function $c(g,c,h,b,_){g.emplaceBack(c?1:0,h?1:0,b||0,_||0),g.emplaceBack(c?1:0,h?1:0,b||0,_||0),g.emplaceBack(c?1:0,h?1:0,b||0,_||0),g.emplaceBack(c?1:0,h?1:0,b||0,_||0)}const Cm=Math.pow(2,25),bf=Math.pow(2,24),z0=Math.pow(2,17),km=Math.pow(2,16),Am=Math.pow(2,9),B0=Math.pow(2,8),$d=Math.pow(2,1);function vf(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const c=g.placed?1:0,h=Math.floor(127*g.opacity);return h*Cm+c*bf+h*z0+c*km+h*Am+c*B0+h*$d+c}const Ud=0;class F0{constructor(c){this._sortAcrossTiles=c.layout.get("symbol-z-order")!=="viewport-y"&&c.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(c,h,b,_,w){const k=this._bucketParts;for(;this._currentTileIndex<c.length;)if(h.getBucketParts(k,_,c[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,k.sort((D,L)=>D.sortKey-L.sortKey));this._currentPartIndex<k.length;){const D=k[this._currentPartIndex];if(h.placeLayerBucketPart(D,this._seenCrossTileIDs,b,D.symbolInstanceStart===0),this._currentPartIndex++,w())return!0}return!1}}class _f{constructor(c,h,b,_,w,k,D,L,B){this.placement=new Cv(c,w,k,D,L,B),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(c,h,b,_){const w=a.f.now(),k=()=>{const D=a.f.now()-w;return!this._forceFullPlacement&&D>2};for(;this._currentPlacementIndex>=0;){const D=h[c[this._currentPlacementIndex]],L=this.placement.collisionIndex.transform.zoom;if(D.type==="symbol"&&(!D.minzoom||D.minzoom<=L)&&(!D.maxzoom||D.maxzoom>L)){const B=D,U=B.layout.get("symbol-z-elevate"),W=this._inProgressLayer=this._inProgressLayer||new F0(B),J=a.ag(D.source,D.scope);if(W.continuePlacement(U?_[J]:b[J],this.placement,this._showCollisionBoxes,D,k))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(c){return this.placement.commit(c),this.placement}}const Mm=512/a.V/2;class Dm{constructor(c,h,b){this.tileID=c,this.bucketInstanceId=b,this.index=new a.bg(h.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const _=c.canonical.x*a.V,w=c.canonical.y*a.V;for(let k=0;k<h.length;k++){const{key:D,crossTileID:L,tileAnchorX:B,tileAnchorY:U}=h.get(k),W=Math.floor((_+B)*Mm),J=Math.floor((w+U)*Mm);this.index.add(W,J),this.keys.push(D),this.crossTileIDs.push(L)}this.index.finish()}findMatches(c,h,b){const _=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z),w=Mm/Math.pow(2,h.canonical.z-this.tileID.canonical.z),k=h.canonical.x*a.V,D=h.canonical.y*a.V;for(let L=0;L<c.length;L++){const B=c.get(L);if(B.crossTileID)continue;const{key:U,tileAnchorX:W,tileAnchorY:J}=B,ee=Math.floor((k+W)*w),ce=Math.floor((D+J)*w),se=this.index.range(ee-_,ce-_,ee+_,ce+_);for(const de of se){const oe=this.crossTileIDs[de];if(this.keys[de]===U&&!b.has(oe)){b.add(oe),B.crossTileID=oe;break}}}}}class Yl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class xf{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(c){const h=Math.round((c-this.lng)/360);if(h!==0)for(const b in this.indexes){const _=this.indexes[b],w={};for(const k in _){const D=_[k];D.tileID=D.tileID.unwrapTo(D.tileID.wrap+h),w[D.tileID.key]=D}this.indexes[b]=w}this.lng=c}addBucket(c,h,b){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(let w=0;w<h.symbolInstances.length;w++)h.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]=new Set);const _=this.usedCrossTileIDs[c.overscaledZ];for(const w in this.indexes){const k=this.indexes[w];if(Number(w)>c.overscaledZ)for(const D in k){const L=k[D];L.tileID.isChildOf(c)&&L.findMatches(h.symbolInstances,c,_)}else{const D=k[c.scaledTo(Number(w)).key];D&&D.findMatches(h.symbolInstances,c,_)}}for(let w=0;w<h.symbolInstances.length;w++){const k=h.symbolInstances.get(w);k.crossTileID||(k.crossTileID=b.generate(),_.add(k.crossTileID))}return this.indexes[c.overscaledZ]===void 0&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new Dm(c,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(c,h){for(const b of h.crossTileIDs)this.usedCrossTileIDs[c].delete(b)}removeStaleBuckets(c){let h=!1;for(const b in this.indexes){const _=this.indexes[b];for(const w in _)c[_[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(b,_[w]),delete _[w],h=!0)}return h}}class Rm{constructor(){this.layerIndexes={},this.crossTileIDs=new Yl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(c,h,b,_){let w=this.layerIndexes[c.fqid];w===void 0&&(w=this.layerIndexes[c.fqid]=new xf);let k=!1;const D={};_.name!=="globe"&&w.handleWrapJump(b);for(const L of h){const B=L.getBucket(c);B&&c.fqid===B.layerIds[0]&&(B.bucketInstanceId||(B.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(L.tileID,B,this.crossTileIDs)&&(k=!0),D[B.bucketInstanceId]=!0)}return w.removeStaleBuckets(D)&&(k=!0),k}pruneUnusedLayers(c){const h={};c.forEach(b=>{h[b]=!0});for(const b in this.layerIndexes)h[b]||delete this.layerIndexes[b]}}class Uc{constructor(c=0,h=0,b=0,_=0){if(isNaN(c)||c<0||isNaN(h)||h<0||isNaN(b)||b<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=h,this.left=b,this.right=_}interpolate(c,h,b){return h.top!=null&&c.top!=null&&(this.top=a.U(c.top,h.top,b)),h.bottom!=null&&c.bottom!=null&&(this.bottom=a.U(c.bottom,h.bottom,b)),h.left!=null&&c.left!=null&&(this.left=a.U(c.left,h.left,b)),h.right!=null&&c.right!=null&&(this.right=a.U(c.right,h.right,b)),this}getCenter(c,h){const b=a.aa((this.left+c-this.right)/2,0,c),_=a.aa((this.top+h-this.bottom)/2,0,h);return new a.P(b,_)}equals(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right}clone(){return new Uc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Vd(g,c){const h=a.bk(g,3);a.a6.fromQuat(g,c),a.bm(g,3,h)}function Lu(g,c){const h=a.bi.identity([]);return a.bi.rotateZ(h,h,-c),a.bi.rotateX(h,h,-g),h}function wf(g,c){const h=[g[0],g[1],0],b=[c[0],c[1],0];if(a.N.length(h)>=1e-15){const k=a.N.normalize([],h);a.N.scale(b,k,a.N.dot(b,k)),c[0]=b[0],c[1]=b[1]}const _=a.N.cross([],c,g);if(a.N.len(_)<1e-15)return null;const w=Math.atan2(-_[1],_[0]);return Lu(Math.atan2(Math.sqrt(g[0]*g[0]+g[1]*g[1]),-g[2]),w)}class Hd{constructor(c,h){this.position=c,this.orientation=h}get position(){return this._position}set position(c){if(c){const h=c instanceof a.L?c:new a.L(c[0],c[1],c[2]);this._renderWorldCopies&&(h.x=a.bh(h.x,0,1)),this._position=h}else this._position=null}lookAtPoint(c,h){if(this.orientation=null,!this.position)return;const b=this.position,_=this._elevation?this._elevation.getAtPointOrZero(a.L.fromLngLat(c)):0,w=a.L.fromLngLat(c,_),k=[w.x-b.x,w.y-b.y,w.z-b.z];h||(h=[0,0,1]),h[2]=Math.abs(h[2]),this.orientation=wf(k,h)}setPitchBearing(c,h){this.orientation=Lu(a.bj(c),a.bj(-h))}}class Vc{constructor(c,h){this._transform=a.a6.identity([]),this.orientation=h,this.position=c}get mercatorPosition(){const c=this.position;return new a.L(c[0],c[1],c[2])}get position(){const c=a.bk(this._transform,3);return[c[0],c[1],c[2]]}set position(c){var h;c&&a.bm(this._transform,3,[(h=c)[0],h[1],h[2],1])}get orientation(){return this._orientation}set orientation(c){this._orientation=c||a.bi.identity([]),c&&Vd(this._transform,this._orientation)}getPitchBearing(){const c=this.forward(),h=this.right();return{bearing:Math.atan2(-h[1],h[0]),pitch:Math.atan2(Math.sqrt(c[0]*c[0]+c[1]*c[1]),-c[2])}}setPitchBearing(c,h){this._orientation=Lu(c,h),Vd(this._transform,this._orientation)}forward(){const c=a.bk(this._transform,2);return[-c[0],-c[1],-c[2]]}up(){const c=a.bk(this._transform,1);return[-c[0],-c[1],-c[2]]}right(){const c=a.bk(this._transform,0);return[c[0],c[1],c[2]]}getCameraToWorld(c,h){const b=new Float64Array(16);return a.a6.invert(b,this.getWorldToCamera(c,h)),b}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(c,h,b){const _=this.position;a.N.scale(_,_,-c);const w=new Float64Array(16);return a.a6.fromScaling(w,[b,b,b]),a.a6.translate(w,w,_),w[10]*=h,w}getWorldToCamera(c,h){const b=new Float64Array(16),_=new Float64Array(4),w=this.position;return a.bi.conjugate(_,this._orientation),a.N.scale(w,w,-c),a.a6.fromQuat(b,_),a.a6.translate(b,b,w),b[1]*=-1,b[5]*=-1,b[9]*=-1,b[13]*=-1,b[8]*=h,b[9]*=h,b[10]*=h,b[11]*=h,b}getCameraToClipPerspective(c,h,b,_){const w=new Float64Array(16);return a.a6.perspective(w,c,h,b,_),w}getCameraToClipOrthographic(c,h,b,_,w,k){const D=new Float64Array(16);return a.a6.ortho(D,c,h,b,_,w,k),D}getDistanceToElevation(c,h=!1){const b=c===0?0:a.bl(c,h?a.au(this.position[1]):this.position[1]),_=this.forward();return(b-this.position[2])/_[2]}clone(){return new Vc([...this.position],[...this.orientation])}}const Nu=(g,c,h)=>(1-h)*g+h*c,Wd=g=>g*g*g*g*g;class zu{constructor(c,h,b,_,w,k,D){this.tileSize=512,this._renderWorldCopies=w===void 0||w,this._minZoom=c||0,this._maxZoom=h||22,this._minPitch=b??0,this._maxPitch=_??60,this.setProjection(k),this.setMaxBounds(D),this.width=0,this.height=0,this._center=new a.bn(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Uc,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new Vc,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){const c=new zu(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return c._elevation=this._elevation,c._centerAltitude=this._centerAltitude,c._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,c.tileSize=this.tileSize,c.mercatorFromTransition=this.mercatorFromTransition,c.width=this.width,c.height=this.height,c.cameraElevationReference=this.cameraElevationReference,c._center=this._center,c._setZoom(this.zoom),c._seaLevelZoom=this._seaLevelZoom,c.angle=this.angle,c._fov=this._fov,c._pitch=this._pitch,c._nearZ=this._nearZ,c._farZ=this._farZ,c._averageElevation=this._averageElevation,c._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,c._unmodified=this._unmodified,c._edgeInsets=this._edgeInsets.clone(),c._camera=this._camera.clone(),c._calcMatrices(),c.freezeTileCoverage=this.freezeTileCoverage,c.frustumCorners=this.frustumCorners,c}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(c){this._elevation!==c&&(this._elevation=c,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(c,h=!1){const b=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||b)&&this._updateCameraOnTerrain(),(c||b)&&this._constrainCamera(h),this._calcMatrices()}getProjection(){return a.ac(this.projection,["name","center","parallels"])}setProjection(c){this.projectionOptions=c||{name:"mercator"};const h=this.projection?this.getProjection():void 0;this.projection=a.bo(this.projectionOptions);const b=!E(h,this.getProjection());return b&&this._calcMatrices(),this.mercatorFromTransition=!1,b}setOrthographicProjectionAtLowPitch(c){return this._orthographicProjectionAtLowPitch!==c&&(this._orthographicProjectionAtLowPitch=c,this._calcMatrices(),!0)}setMercatorFromTransition(){const c=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=a.bo({name:"mercator"});const h=c!==this.projection.name;return h&&this._calcMatrices(),h}get minZoom(){return this._minZoom}set minZoom(c){this._minZoom!==c&&(this._minZoom=c,this.zoom=Math.max(this.zoom,c))}get maxZoom(){return this._maxZoom}set maxZoom(c){this._maxZoom!==c&&(this._maxZoom=c,this.zoom=Math.min(this.zoom,c))}get minPitch(){return this._minPitch}set minPitch(c){this._minPitch!==c&&(this._minPitch=c,this.pitch=Math.max(this.pitch,c))}get maxPitch(){return this._maxPitch}set maxPitch(c){this._maxPitch!==c&&(this._maxPitch=c,this.pitch=Math.min(this.pitch,c))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(c){c===void 0?c=!0:c===null&&(c=!1),this._renderWorldCopies=c}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const c=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(c))}get cameraWorldSize(){const c=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(c))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return a.bl(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return a.bh(this.rotation,-180,180)}set bearing(c){this.rotation=c}get rotation(){return-this.angle/Math.PI*180}set rotation(c){const h=-c*Math.PI/180;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=a.b4.create(),a.b4.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(c){const h=a.aa(c,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const c=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/c)}set fov(c){c=Math.max(.01,Math.min(60,c)),this._fov!==c&&(this._unmodified=!1,this._fov=a.bj(c),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(c){this._averageElevation=c,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(c){const h=Math.min(Math.max(c,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._setZoom(h),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(c){this._zoom=c,this.scale=this.zoomScale(c),this.tileZoom=Math.floor(c),this.zoomFraction=c-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(c){this._tileCoverLift!==c&&(this._tileCoverLift=c)}_updateCameraOnTerrain(){const c=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,h=this.elevation&&c===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||c===Number.NEGATIVE_INFINITY&&(!h||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const b=this._elevation;h||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&b.exaggeration()&&this._centerAltitudeValidForExaggeration!==b.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*b.exaggeration(),this._centerAltitudeValidForExaggeration=b.exaggeration()):(this._centerAltitude=c||0,this._centerAltitudeValidForExaggeration=b.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const c=this._elevation,h=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],b=this.horizonLineFromTop();let _=0,w=0;for(let k=0;k<h.length;k++){const D=new a.P(h[k][0]*this.width,b+h[k][1]*(this.height-b)),L=c.pointCoordinate(D);if(!L)continue;const B=1/Math.hypot(L[0]-this._camera.position[0],L[1]-this._camera.position[1]);_+=L[3]*B,w+=B}return w===0?NaN:_/w}get center(){return this._center}set center(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const c=this._seaLevelZoom,h=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),b=this.pixelsPerMeter/this.worldSize*h,_=this._mercatorZfromZoom(c),w=this._mercatorZfromZoom(this._maxZoom),k=Math.max(_-b,w);this._setZoom(this._zoomFromMercatorZ(k))}get padding(){return this._edgeInsets.toJSON()}set padding(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())}computeZoomRelativeTo(c){const h=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,c.toAltitude()));let b;b=c.z<this._camera.position[2]?[h.x,h.y,h.z]:[c.x,c.y,c.z];const _=a.N.length(a.N.sub([],this._camera.position,b));return a.aa(this._zoomFromMercatorZ(_),this._minZoom,this._maxZoom)}setFreeCameraOptions(c){if(!this.height||!c.position&&!c.orientation)return;this._updateCameraState();let h=!1;if(c.orientation&&!a.bi.exactEquals(c.orientation,this._camera.orientation)&&(h=this._setCameraOrientation(c.orientation)),c.position){const b=[c.position.x,c.position.y,c.position.z];a.N.exactEquals(b,this._camera.position)||(this._setCameraPosition(b),h=!0)}h&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const c=this._camera.position,h=new Hd;return h.position=new a.L(c[0],c[1],c[2]),h.orientation=this._camera.orientation,h._elevation=this.elevation,h._renderWorldCopies=this.renderWorldCopies,h}_setCameraOrientation(c){if(!a.bi.length(c))return!1;a.bi.normalize(c,c);const h=a.N.transformQuat([],[0,0,-1],c),b=a.N.transformQuat([],[0,-1,0],c);if(b[2]<0)return!1;const _=wf(h,b);return!!_&&(this._camera.orientation=_,!0)}_setCameraPosition(c){const h=this.zoomScale(this.minZoom)*this.tileSize,b=this.zoomScale(this.maxZoom)*this.tileSize,_=this.cameraToCenterDistance;c[2]=a.aa(c[2],_/b,_/h),this._camera.position=c}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(c){return this._edgeInsets.equals(c)}interpolatePadding(c,h,b){this._unmodified=!1,this._edgeInsets.interpolate(c,h,b),this._constrain(),this._calcMatrices()}coveringZoomLevel(c){const h=(c.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/c.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(c){const h=[new a.bp(0,c)];if(this.renderWorldCopies){const b=this.pointCoordinate(new a.P(0,0)),_=this.pointCoordinate(new a.P(this.width,0)),w=this.pointCoordinate(new a.P(this.width,this.height)),k=this.pointCoordinate(new a.P(0,this.height)),D=Math.floor(Math.min(b.x,_.x,w.x,k.x)),L=Math.floor(Math.max(b.x,_.x,w.x,k.x)),B=1;for(let U=D-B;U<=L+B;U++)U!==0&&h.push(new a.bp(U,c))}return h}isLODDisabled(c){return(!c||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCoverForShadows(c,h,b){let _=[];if(h[0]===0&&h[1]===0)return _;for(const k of c){const D=k.canonical,L=k.overscaledZ,B=k.wrap,U=1<<D.z,W=D.x+1<U,J=D.x>0,ee=D.y+1<U,ce=D.y>0,se=k.wrap-(J?0:1),de=k.wrap+(W?0:1),oe=J?D.x-1:U-1,fe=W?D.x+1:0;h[0]<0?(_.push(new a.am(L,de,D.z,fe,D.y)),h[1]<0&&ee&&(_.push(new a.am(L,B,D.z,D.x,D.y+1)),_.push(new a.am(L,de,D.z,fe,D.y+1))),h[1]>0&&ce&&(_.push(new a.am(L,B,D.z,D.x,D.y-1)),_.push(new a.am(L,de,D.z,fe,D.y-1)))):h[0]>0?(_.push(new a.am(L,se,D.z,oe,D.y)),h[1]<0&&ee&&(_.push(new a.am(L,B,D.z,D.x,D.y+1)),_.push(new a.am(L,se,D.z,oe,D.y+1))),h[1]>0&&ce&&(_.push(new a.am(L,B,D.z,D.x,D.y-1)),_.push(new a.am(L,se,D.z,oe,D.y-1)))):h[1]<0&&ee?_.push(new a.am(L,B,D.z,D.x,D.y+1)):ce&&_.push(new a.am(L,B,D.z,D.x,D.y-1))}if(_.length>1){_.sort((L,B)=>L.overscaledZ-B.overscaledZ||L.wrap-B.wrap||L.canonical.z-B.canonical.z||L.canonical.x-B.canonical.x||L.canonical.y-B.canonical.y);let k=0,D=0;for(;D<_.length;)_[D].equals(_[k])?++D:_[++k]=_[D++];_.length=k+1}const w=[];for(const k of _)_.some(D=>k.isChildOf(D))||w.push(k);return _=w.filter(k=>!c.some(D=>!!(k.overscaledZ<b&&D.isChildOf(k))||k.equals(D)||k.isChildOf(D))),_}coveringTiles(c){let h=this.coveringZoomLevel(c);const b=h,_=this.elevation&&this.elevation.exaggeration(),w=_&&!c.isTerrainDEM,k=this.projection.name==="mercator";if(c.minzoom!==void 0&&h<c.minzoom)return[];c.maxzoom!==void 0&&h>c.maxzoom&&(h=c.maxzoom);const D=this.locationCoordinate(this.center),L=this.center.lat,B=1<<h,U=[B*D.x,B*D.y,0],W=this.projection.name==="globe",J=!W,ee=a.bq.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,h,J),ce=W?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),se=B*a.bl(1,this.center.lat),de=this._camera.position[2]/a.bl(1,this.center.lat),oe=[B*ce.x,B*ce.y,de*(J?1:se)],fe=W||_,Te=this.cameraToCenterDistance/c.tileSize*(c.roundZoom?1:.502),be=this.isLODDisabled(!0)?h:0;let Ee;if(this._elevation&&c.isTerrainDEM)Ee=1e4*this._elevation.exaggeration();else if(this._elevation){const ke=this._elevation.getMinMaxForVisibleTiles();Ee=ke?ke.max:this._centerAltitude}else Ee=this._centerAltitude;const he=c.isTerrainDEM?-Ee:this._elevation?this._elevation.getMinElevationBelowMSL():0,Ce=this.projection.isReprojectedInTileSpace?a.br(this):1,Ne=ke=>{const Ye=new a.L(ke.x+25e-6,ke.y,ke.z),gt=new a.L(ke.x,ke.y+25e-6,ke.z),yt=ke.toLngLat(),vt=Ye.toLngLat(),Wt=gt.toLngLat(),Vt=this.locationCoordinate(yt),Ht=this.locationCoordinate(vt),Zt=this.locationCoordinate(Wt),In=Math.hypot(Ht.x-Vt.x,Ht.y-Vt.y),xn=Math.hypot(Zt.x-Vt.x,Zt.y-Vt.y);return Math.sqrt(In*xn)*Ce/25e-6},Fe=ke=>{const Ve=Ee,Ye=he;return{aabb:a.bu(this,B,0,0,0,ke,Ye,Ve,this.projection),zoom:0,x:0,y:0,minZ:Ye,maxZ:Ve,wrap:ke,fullyVisible:!1}},G=[];let R=[];const H=h,le=c.reparseOverscaled?b:h,ge=ke=>ke*ke,Oe=ge((de-this._centerAltitude)*se),Se=ke=>{if(!this._elevation||!ke.tileID||!k)return;const Ve=this._elevation.getMinMaxForTile(ke.tileID),Ye=ke.aabb;Ve?(Ye.min[2]=Ve.min,Ye.max[2]=Ve.max,Ye.center[2]=(Ye.min[2]+Ye.max[2])/2):(ke.shouldSplit=Le(ke),ke.shouldSplit||(Ye.min[2]=Ye.max[2]=Ye.center[2]=this._centerAltitude))},Le=ke=>{if(ke.zoom<be)return!0;if(ke.zoom===H)return!1;if(ke.shouldSplit!=null)return ke.shouldSplit;const Ve=ke.aabb.distanceX(oe),Ye=ke.aabb.distanceY(oe);let gt=Oe,yt=1;if(W){gt=ge(ke.aabb.distanceZ(oe));const Vt=Math.pow(2,ke.zoom),Ht=a.au((ke.y+1)/Vt),Zt=a.au(ke.y/Vt),In=Math.min(Math.max(L,Ht),Zt),xn=a.bJ(In)/a.bJ(L);if(yt=In===L?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,xn/this._mercatorScaleRatio),this.zoom<=a.bG&&ke.zoom===H-1&&xn>=.9)return!0}else if(w&&(gt=ge(ke.aabb.distanceZ(oe)*se)),this.projection.isReprojectedInTileSpace&&b<=5){const Vt=Math.pow(2,ke.zoom),Ht=Ne(new a.L((ke.x+.5)/Vt,(ke.y+.5)/Vt));yt=Ht>.85?1:Ht}const vt=Ve*Ve+Ye*Ye+gt,Wt=ge((1<<H-ke.zoom)*Te*yt*((Vt,Ht)=>{if(Ht*ge(.707)<Vt)return 1;const Zt=Math.sqrt(Ht/Vt);return Zt/(1.4144271570014144+(Math.pow(1.1,Zt-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(gt,Oe),vt));return vt<Wt};if(this.renderWorldCopies)for(let ke=1;ke<=3;ke++)G.push(Fe(-ke)),G.push(Fe(ke));for(G.push(Fe(0));G.length>0;){const ke=G.pop(),Ve=ke.x,Ye=ke.y;let gt=ke.fullyVisible;const yt=()=>this.projection.name==="globe"&&(ke.y===0||ke.y===(1<<ke.zoom)-1);if(!gt){let vt=fe?ke.aabb.intersects(ee):ke.aabb.intersectsFlat(ee);if(vt===0&&yt()){const Wt=new a.bs(ke.zoom,Ve,Ye);vt=a.bt(this,B,Wt,!0).intersects(ee)}if(vt===0)continue;gt=vt===2}if(ke.zoom!==H&&Le(ke))for(let vt=0;vt<4;vt++){const Wt=(Ve<<1)+vt%2,Vt=(Ye<<1)+(vt>>1),Ht={aabb:k?ke.aabb.quadrant(vt):a.bu(this,B,ke.zoom+1,Wt,Vt,ke.wrap,ke.minZ,ke.maxZ,this.projection),zoom:ke.zoom+1,x:Wt,y:Vt,wrap:ke.wrap,fullyVisible:gt,tileID:void 0,shouldSplit:void 0,minZ:ke.minZ,maxZ:ke.maxZ};w&&!W&&(Ht.tileID=new a.am(ke.zoom+1===H?le:ke.zoom+1,ke.wrap,ke.zoom+1,Wt,Vt),Se(Ht)),G.push(Ht)}else{const vt=ke.zoom===H?le:ke.zoom;if(c.minzoom&&c.minzoom>vt)continue;if(!gt){let Zt=fe?ke.aabb.intersectsPrecise(ee):ke.aabb.intersectsPreciseFlat(ee);if(Zt===0&&yt()){const In=new a.bs(ke.zoom,Ve,Ye);Zt=a.bt(this,B,In,!0).intersectsPrecise(ee)}if(Zt===0)continue}const Wt=U[0]-(.5+Ve+(ke.wrap<<ke.zoom))*(1<<h-ke.zoom),Vt=U[1]-.5-Ye,Ht=ke.tileID?ke.tileID:new a.am(vt,ke.wrap,ke.zoom,Ve,Ye);R.push({tileID:Ht,distanceSq:Wt*Wt+Vt*Vt})}}if(this.fogCullDistSq){const ke=this.fogCullDistSq,Ve=this.horizonLineFromTop();R=R.filter(Ye=>{const gt=[0,0,0,1],yt=[a.V,a.V,0,1],vt=this.calculateFogTileMatrix(Ye.tileID.toUnwrapped());a.a7.transformMat4(gt,gt,vt),a.a7.transformMat4(yt,yt,vt);const Wt=a.a7.min([],gt,yt),Vt=a.a7.max([],gt,yt),Ht=a.bv(Wt,Vt);if(Ht===0)return!0;let Zt=!1;const In=this._elevation;if(In&&Ht>ke&&Ve!==0){const xn=this.calculateProjMatrix(Ye.tileID.toUnwrapped());let on;c.isTerrainDEM||(on=In.getMinMaxForTile(Ye.tileID)),on||(on={min:he,max:Ee});const yn=a.bH(this.rotation),Ln=[yn[0]*a.V,yn[1]*a.V,on.max];a.N.transformMat4(Ln,Ln,xn),Zt=(1-Ln[1])*this.height*.5<Ve}return Ht<ke||Zt})}return R.sort((ke,Ve)=>ke.distanceSq-Ve.distanceSq).map(ke=>ke.tileID)}resize(c,h){this.width=c,this.height=h,this.pixelsToGLUnits=[2/c,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(c){return Math.pow(2,c)}scaleZoom(c){return Math.log(c)/Math.LN2}project(c){const h=a.aa(c.lat,-a.bw,a.bw),b=this.projection.project(c.lng,h);return new a.P(b.x*this.worldSize,b.y*this.worldSize)}unproject(c){return this.projection.unproject(c.x/this.worldSize,c.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/a.bl(1,this.center.lat)/this.worldSize}setLocationAtPoint(c,h){let b,_;const w=this.centerPoint;if(this.projection.name==="globe"){const D=this.worldSize;b=(h.x-w.x)/D,_=(h.y-w.y)/D}else{const D=this.pointCoordinate(h),L=this.pointCoordinate(w);b=D.x-L.x,_=D.y-L.y}const k=this.locationCoordinate(c);this.setLocation(new a.L(k.x-b,k.y-_))}setLocation(c){this.center=this.coordinateLocation(c),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(c){return this.projection.locationPoint(this,c)}locationPoint3D(c){return this.projection.locationPoint(this,c,!0)}pointLocation(c){return this.coordinateLocation(this.pointCoordinate(c))}pointLocation3D(c){return this.coordinateLocation(this.pointCoordinate3D(c))}locationCoordinate(c,h){const b=h?a.bl(h,c.lat):void 0,_=this.projection.project(c.lng,c.lat);return new a.L(_.x,_.y,b)}coordinateLocation(c){return this.projection.unproject(c.x,c.y)}pointRayIntersection(c,h){const b=h??this._centerAltitude,_=[c.x,c.y,0,1],w=[c.x,c.y,1,1];a.a7.transformMat4(_,_,this.pixelMatrixInverse),a.a7.transformMat4(w,w,this.pixelMatrixInverse);const k=w[3];a.a7.scale(_,_,1/_[3]),a.a7.scale(w,w,1/k);const D=_[2],L=w[2];return{p0:_,p1:w,t:D===L?0:(b-D)/(L-D)}}screenPointToMercatorRay(c){const h=[c.x,c.y,0,1],b=[c.x,c.y,1,1];return a.a7.transformMat4(h,h,this.pixelMatrixInverse),a.a7.transformMat4(b,b,this.pixelMatrixInverse),a.a7.scale(h,h,1/h[3]),a.a7.scale(b,b,1/b[3]),h[2]=a.bl(h[2],this._center.lat)*this.worldSize,b[2]=a.bl(b[2],this._center.lat)*this.worldSize,a.a7.scale(h,h,1/this.worldSize),a.a7.scale(b,b,1/this.worldSize),new a.a2([h[0],h[1],h[2]],a.N.normalize([],a.N.sub([],b,h)))}rayIntersectionCoordinate(c){const{p0:h,p1:b,t:_}=c,w=a.bl(h[2],this._center.lat),k=a.bl(b[2],this._center.lat);return new a.L(a.U(h[0],b[0],_)/this.worldSize,a.U(h[1],b[1],_)/this.worldSize,a.U(w,k,_))}pointCoordinate(c,h=this._centerAltitude){return this.projection.pointCoordinate(this,c.x,c.y,h)}pointCoordinate3D(c){if(!this.elevation)return this.pointCoordinate(c);let h=this.projection.pointCoordinate3D(this,c.x,c.y);if(h)return new a.L(h[0],h[1],h[2]);let b=0,_=this.horizonLineFromTop();if(c.y>_)return this.pointCoordinate(c);const w=.02*_,k=c.clone();for(let D=0;D<10&&_-b>w;D++){k.y=a.U(b,_,.66);const L=this.projection.pointCoordinate3D(this,k.x,k.y);L?(_=k.y,h=L):b=k.y}return h?new a.L(h[0],h[1],h[2]):this.pointCoordinate(c)}isPointAboveHorizon(c){return this.projection.isPointAboveHorizon(this,c)}isPointOnSurface(c){if(c.y<0||c.y>this.height||c.x<0||c.x>this.width)return!1;if(this.elevation||this.zoom>=a.bx)return!this.isPointAboveHorizon(c);const h=this.pointCoordinate(c);return h.y>=0&&h.y<=1}_coordinatePoint(c,h){const b=h&&this.elevation?this.elevation.getAtPointOrZero(c,this._centerAltitude):this._centerAltitude,_=[c.x*this.worldSize,c.y*this.worldSize,b+c.toAltitude(),1];return a.a7.transformMat4(_,_,this.pixelMatrix),_[3]>0?new a.P(_[0]/_[3],_[1]/_[3]):new a.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:c,left:h}=this._edgeInsets,b=this.height-this._edgeInsets.bottom,_=this.width-this._edgeInsets.right,w=this.pointLocation3D(new a.P(h,c)),k=this.pointLocation3D(new a.P(_,c)),D=this.pointLocation3D(new a.P(_,b)),L=this.pointLocation3D(new a.P(h,b));let B=Math.min(w.lng,k.lng,D.lng,L.lng),U=Math.max(w.lng,k.lng,D.lng,L.lng),W=Math.min(w.lat,k.lat,D.lat,L.lat),J=Math.max(w.lat,k.lat,D.lat,L.lat);const ee=Math.pow(2,-this.zoom)/16*270,ce=this.projection.name==="globe"?1:4,se=(de,oe,fe,Te,be)=>{const Ee=(de+fe)/2,he=(oe+Te)/2,Ce=new a.P(Ee,he),{lng:Ne,lat:Fe}=this.pointLocation3D(Ce),G=Math.max(0,B-Ne,W-Fe,Ne-U,Fe-J);B=Math.min(B,Ne),U=Math.max(U,Ne),W=Math.min(W,Fe),J=Math.max(J,Fe),(be<ce||G>ee)&&(se(de,oe,Ee,he,be+1),se(Ee,he,fe,Te,be+1))};if(se(h,c,_,c,1),se(_,c,_,b,1),se(_,b,h,b,1),se(h,b,h,c,1),this.projection.name==="globe"){const[de,oe]=a.by(this);de?(J=90,U=180,B=-180):oe&&(W=-90,U=180,B=-180)}return new a.ad(new a.bn(B,W),new a.bn(U,J))}_getBoundsRectangular(c,h){const{top:b,left:_}=this._edgeInsets,w=this.height-this._edgeInsets.bottom,k=this.width-this._edgeInsets.right,D=new a.P(_,b),L=new a.P(k,b),B=new a.P(k,w),U=new a.P(_,w);let W=this.pointCoordinate(D,c),J=this.pointCoordinate(L,c);const ee=this.pointCoordinate(B,h),ce=this.pointCoordinate(U,h),se=(de,oe)=>(oe.y-de.y)/(oe.x-de.x);return W.y>1&&J.y>=0?W=new a.L((1-ce.y)/se(ce,W)+ce.x,1):W.y<0&&J.y<=1&&(W=new a.L(-ce.y/se(ce,W)+ce.x,0)),J.y>1&&W.y>=0?J=new a.L((1-ee.y)/se(ee,J)+ee.x,1):J.y<0&&W.y<=1&&(J=new a.L(-ee.y/se(ee,J)+ee.x,0)),new a.ad().extend(this.coordinateLocation(W)).extend(this.coordinateLocation(J)).extend(this.coordinateLocation(ce)).extend(this.coordinateLocation(ee))}_getBoundsRectangularTerrain(){const c=this.elevation;if(!c.visibleDemTiles.length||c.isUsingMockSource())return this._getBoundsRectangular(0,0);const h=c.visibleDemTiles.reduce((b,_)=>{if(_.dem){const w=_.dem.tree;b.min=Math.min(b.min,w.minimums[0]),b.max=Math.max(b.max,w.maximums[0])}return b},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(h.min*c.exaggeration(),h.max*c.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(c=!0){const h=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,b=this.height/2-h*(1-this._horizonShift);return c?Math.max(0,b):b}getMaxBounds(){return this.maxBounds}setMaxBounds(c){this.maxBounds=c,this.minLat=-a.bw,this.maxLat=a.bw,this.minLng=-180,this.maxLng=180,c&&(this.minLat=c.getSouth(),this.maxLat=c.getNorth(),this.minLng=c.getWest(),this.maxLng=c.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=a.a5(this.minLng)*this.tileSize,this.worldMaxX=a.a5(this.maxLng)*this.tileSize,this.worldMinY=a.ae(this.maxLat)*this.tileSize,this.worldMaxY=a.ae(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(c,h){return this.projection.createTileMatrix(this,h,c)}calculateDistanceTileData(c){const h=c.key,b=this._distanceTileDataCache;if(b[h])return b[h];const _=c.canonical,w=1/this.height,k=this.cameraWorldSize,D=k/this.zoomScale(_.z),L=(_.x+Math.pow(2,_.z)*c.wrap)*D,B=_.y*D,U=this.point;U.x*=k/this.worldSize,U.y*=k/this.worldSize;const W=this.angle,J=Math.sin(-W),ee=-Math.cos(-W);return b[h]={bearing:[J,ee],center:[(U.x-L)*w,(U.y-B)*w],scale:D/a.V*w},b[h]}calculateFogTileMatrix(c){const h=c.key,b=this._fogTileMatrixCache;if(b[h])return b[h];const _=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,c);return a.a6.multiply(_,this.worldToFogMatrix,_),b[h]=new Float32Array(_),b[h]}calculateProjMatrix(c,h=!1,b=!1){const _=c.key;let w;if(w=b?this._expandedProjMatrixCache:h?this._alignedProjMatrixCache:this._projMatrixCache,w[_])return w[_];const k=this.calculatePosMatrix(c,this.worldSize);let D;return D=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:b?this.expandedFarZProjMatrix:h?this.alignedProjMatrix:this.projMatrix,a.a6.multiply(k,D,k),w[_]=new Float32Array(k),w[_]}calculatePixelsToTileUnitsMatrix(c){const h=c.tileID.key,b=this._pixelsToTileUnitsCache;if(b[h])return b[h];const _=a.bz(c,this);return b[h]=_,b[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const c=1/this.worldSize,h=a.a6.fromScaling([],[c,c,c]);return a.a6.multiply(h,h,this.globeMatrix),h}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const c=this._elevation;this._updateCameraState();const h=a.bl(1,this._center.lat)*this.worldSize,b=this._computeCameraPosition(h),_=this._camera.forward(),w=a.bl(1,this._center.lat);b[2]/=w,_[2]/=w,a.N.normalize(_,_);const k=c.raycast(b,_,c.exaggeration());if(k){const D=a.N.scaleAndAdd([],b,_,k),L=new a.L(D[0],D[1],a.bl(D[2],a.au(D[1]))),B=(L.z+a.N.length([L.x-b[0],L.y-b[1],L.z-b[2]*w]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(B),this._centerAltitude=L.toAltitude(),this._center=this.coordinateLocation(L),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(c=!1){if(!this._elevation)return;const h=this._elevation,b=a.bl(1,this._center.lat)*this.worldSize,_=this._computeCameraPosition(b),w=h.getAtPointOrZero(new a.L(..._)),k=this.pixelsPerMeter/this.worldSize*w,D=this._minimumHeightOverTerrain(),L=_[2]-k;if(L<=D)if(L<0||c){const B=this.locationCoordinate(this._center,this._centerAltitude),U=[_[0],_[1],B.z-_[2]],W=a.N.length(U);U[2]-=(D-L)/this._pixelsPerMercatorPixel;const J=a.N.length(U);if(J===0)return;a.N.scale(U,U,W/J*this._pixelsPerMercatorPixel),this._camera.position=[_[0],_[1],B.z*this._pixelsPerMercatorPixel-U[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const c=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||c){const J=this.center;return J.lat=a.aa(J.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!c)&&(J.lng=a.aa(J.lng,this.minLng,this.maxLng)),this.center=J,void(this._constraining=!1)}const h=this._unmodified,{x:b,y:_}=this.point;let w=0,k=b,D=_;const L=this.width/2,B=this.height/2,U=this.worldMinY*this.scale,W=this.worldMaxY*this.scale;if(_-B<U&&(D=U+B),_+B>W&&(D=W-B),W-U<this.height&&(w=Math.max(w,this.height/(W-U)),D=(W+U)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const J=this.worldMinX*this.scale,ee=this.worldMaxX*this.scale,ce=this.worldSize/2-(J+ee)/2;k=(b+ce+this.worldSize)%this.worldSize-ce,k-L<J&&(k=J+L),k+L>ee&&(k=ee-L),ee-J<this.width&&(w=Math.max(w,this.width/(ee-J)),k=(ee+J)/2)}k===b&&D===_||(this.center=this.unproject(new a.P(k,D))),w&&(this.zoom+=this.scaleZoom(w)),this._constrainCamera(),this._unmodified=h,this._constraining=!1}_minZoomForBounds(){let c=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(c=Math.max(c,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),c}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const c=this.centerOffset,h=this.projection.name==="globe",b=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=a.bl(1,this.center.lat)/a.bl(1,a.bI));const _=a.bA(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,_),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const w=this.projection.zAxisUnit==="meters"?b:1,k=this._camera.getWorldToCamera(this.worldSize,w);let D;const L=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(L[8]=2*-c.x/this.width,L[9]=2*c.y/this.height,this.isOrthographic){let Fe=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),G=Fe*this.aspect,R=-G,H=-Fe;G-=c.x,R-=c.x,Fe+=c.y,H+=c.y,D=this._camera.getCameraToClipOrthographic(R,G,H,Fe,this._nearZ,this._farZ),((le,ge,Oe,Se)=>{for(let Le=0;Le<16;Le++)le[Le]=Nu(ge[Le],Oe[Le],Se)})(D,D,L,Wd(this.pitch>=15?1:this.pitch/15))}else D=L;const B=a.a6.mul([],L,k);let U=a.a6.mul([],D,k);if(this.projection.isReprojectedInTileSpace){const Fe=this.locationCoordinate(this.center),G=a.a6.identity([]);a.a6.translate(G,G,[Fe.x*this.worldSize,Fe.y*this.worldSize,0]),a.a6.multiply(G,G,a.bB(this)),a.a6.translate(G,G,[-Fe.x*this.worldSize,-Fe.y*this.worldSize,0]),a.a6.multiply(U,U,G),a.a6.multiply(B,B,G),this.inverseAdjustmentMatrix=a.bC(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=a.a6.scale([],U,[this.worldSize,this.worldSize,this.worldSize/w,1]),this.projMatrix=U,this.invProjMatrix=a.a6.invert(new Float64Array(16),this.projMatrix),h){const Fe=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);Fe[8]=2*-c.x/this.width,Fe[9]=2*c.y/this.height,this.expandedFarZProjMatrix=a.a6.mul([],Fe,k)}else this.expandedFarZProjMatrix=this.projMatrix;const W=a.a6.invert([],D);this.frustumCorners=a.bD.fromInvProjectionMatrix(W,this.horizonLineFromTop(),this.height),this.cameraFrustum=a.bq.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!h);const J=new Float32Array(16);a.a6.identity(J),a.a6.scale(J,J,[1,-1,1]),a.a6.rotateX(J,J,this._pitch),a.a6.rotateZ(J,J,this.angle);const ee=a.a6.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=a.a6.clone(ee);const ce=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;ee[8]=2*-c.x/this.width,ee[9]=2*(c.y+ce)/this.height,this.skyboxMatrix=a.a6.multiply(J,ee,J);const se=this.point,de=se.x,oe=se.y,fe=this.width%2/2,Te=this.height%2/2,be=Math.cos(this.angle),Ee=Math.sin(this.angle),he=de-Math.round(de)+be*fe+Ee*Te,Ce=oe-Math.round(oe)+be*Te+Ee*fe,Ne=new Float64Array(U);if(a.a6.translate(Ne,Ne,[he>.5?he-1:he,Ce>.5?Ce-1:Ce,0]),this.alignedProjMatrix=Ne,U=a.a6.create(),a.a6.scale(U,U,[this.width/2,-this.height/2,1]),a.a6.translate(U,U,[1,-1,0]),this.labelPlaneMatrix=U,U=a.a6.create(),a.a6.scale(U,U,[1,-1,1]),a.a6.translate(U,U,[-1,-1,0]),a.a6.scale(U,U,[2/this.width,2/this.height,1]),this.glCoordMatrix=U,this.pixelMatrix=a.a6.multiply(new Float64Array(16),this.labelPlaneMatrix,B),this._calcFogMatrices(),this._distanceTileDataCache={},U=a.a6.invert(new Float64Array(16),this.pixelMatrix),!U)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=U,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=a.bE(this);const Fe=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=a.N.transformMat4(Fe,Fe,k),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=U;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const c=this.cameraWorldSizeForFog,h=this.cameraPixelsPerMeter,b=this._camera.position,_=1/this.height/this._pixelsPerMercatorPixel,w=[c,c,h];a.N.scale(w,w,_),a.N.scale(b,b,-1),a.N.multiply(b,b,w);const k=a.a6.create();a.a6.translate(k,k,b),a.a6.scale(k,k,w),this.mercatorFogMatrix=k,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(c,h,_)}_computeCameraPosition(c){const h=(c=c||this.pixelsPerMeter)/this.pixelsPerMeter,b=this._camera.forward(),_=this.point,w=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*h-c/this.worldSize*this._centerAltitude;return[_.x/this.worldSize-b[0]*w,_.y/this.worldSize-b[1]*w,c/this.worldSize*this._centerAltitude-b[2]*w]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(c){const h=this._maxCameraBoundsDistance()*Math.cos(this._pitch),b=this._camera.position[2],_=c[2];let w=1;this.projection.wrap&&(this.center=this.center.wrap()),_>0&&(w=Math.min((h-b)/_,1)),this._camera.position=a.N.scaleAndAdd([],this._camera.position,c,w),this._updateStateFromCamera()}_updateStateFromCamera(){const c=this._camera.position,h=this._camera.forward(),{pitch:b,bearing:_}=this._camera.getPitchBearing(),w=a.bl(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,k=this._mercatorZfromZoom(this._maxZoom)*Math.cos(a.bj(this._maxPitch)),D=Math.max((c[2]-w)/Math.cos(b),k),L=this._zoomFromMercatorZ(D);a.N.scaleAndAdd(c,c,h,D),this._pitch=a.aa(b,a.bj(this.minPitch),a.bj(this.maxPitch)),this.angle=a.bh(_,-Math.PI,Math.PI),this._setZoom(a.aa(L,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new a.L(c[0],c[1],c[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(c){return Math.pow(2,c)*this.tileSize}_mercatorZfromZoom(c){return this.cameraToCenterDistance/this._worldSizeFromZoom(c)}_minimumHeightOverTerrain(){const c=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(c)}_zoomFromMercatorZ(c){return this.scaleZoom(this.cameraToCenterDistance/(c*this.tileSize))}zoomFromMercatorZAdjusted(c){let h=0,b=a.bx,_=0,w=1/0;for(;b-h>1e-6&&b>h;){const k=h+.5*(b-h),D=this.tileSize*Math.pow(2,k),L=this.getCameraToCenterDistance(this.projection,k,D),B=this.scaleZoom(L/(c*this.tileSize)),U=Math.abs(k-B);U<w&&(w=U,_=k),k<B?h=k:b=k}return _}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(a.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(c,h){const b=Math.min(c.x,h.x),_=Math.max(c.x,h.x),w=Math.min(c.y,h.y),k=Math.max(c.y,h.y);if(w<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const D=[new a.P(b,w),new a.P(_,k),new a.P(b,k),new a.P(_,w)],L=this.renderWorldCopies?-3:0,B=this.renderWorldCopies?4:1;for(const U of D){const W=this.pointRayIntersection(U);if(W.t<0)return!0;const J=this.rayIntersectionCoordinate(W);if(J.x<L||J.y<0||J.x>B||J.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+a.bF(this.fovAboveCenter)>88||this.anyCornerOffEdge(new a.P(0,0),new a.P(this.width,this.height))}zoomDeltaToMovement(c,h){const b=a.N.length(a.N.sub([],this._camera.position,c)),_=this._zoomFromMercatorZ(b)+h;return b-this._mercatorZfromZoom(_)}getCameraPoint(){if(this.projection.name==="globe"){const c=function([h,b,_],w){const k=[h,b,_,1];a.a7.transformMat4(k,k,w);const D=k[3]=Math.max(k[3],1e-6);return k[0]/=D,k[1]/=D,k[2]/=D,k}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new a.P(c[0],c[1])}{const c=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,c))}}getCameraToCenterDistance(c,h=this.zoom,b=this.worldSize){const _=a.bA(c,h,this.width,this.height,1024),w=c.pixelSpaceConversion(this.center.lat,b,_);let k=.5/Math.tan(.5*this._fov)*this.height*w;return this.isOrthographic&&(k=Nu(1,k,Wd(this.pitch>=15?1:this.pitch/15))),k}getWorldToCameraMatrix(){const c=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&a.a6.multiply(c,c,this.globeMatrix),c}getFrustum(c){return a.bq.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,c,this.projection.zAxisUnit==="meters")}}const Pi={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,ShadowMap0:10},Ls=(g,c)=>{if(c>0&&g.terrain&&a.w("Cutoff is currently disabled on terrain"),c<=0||g.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const h=g.transform,b=Math.max(Math.abs(h._zoom-(g.minCutoffZoom-1)),1),_=h.isLODDisabled(!1)?a.O(60,45,h.pitch):a.O(30,15,h.pitch),w=h._farZ-h._nearZ,k=c*h.height,D=((1-(L=_))*h.cameraToCenterDistance+L*(h._farZ+k))*b;var L;return{shouldRenderCutoff:_<1,uniformValues:{u_cutoff_params:[h._nearZ,h._farZ,(D-h._nearZ)/w,(D-k-h._nearZ)/w]}}},pa={cascadeCount:2,shadowMapResolution:2048};class Im{constructor(c,h){this.aabb=c,this.lastCascade=h}}class Pm{add(c,h){const b=this.receivers[c.key];b!==void 0?(b.aabb.min[0]=Math.min(b.aabb.min[0],h.min[0]),b.aabb.min[1]=Math.min(b.aabb.min[1],h.min[1]),b.aabb.min[2]=Math.min(b.aabb.min[2],h.min[2]),b.aabb.max[0]=Math.max(b.aabb.max[0],h.max[0]),b.aabb.max[1]=Math.max(b.aabb.max[1],h.max[1]),b.aabb.max[2]=Math.max(b.aabb.max[2],h.max[2])):this.receivers[c.key]=new Im(h,null)}clear(){this.receivers={}}get(c){return this.receivers[c.key]}computeRequiredCascades(c,h,b){const _=a.bS.fromPoints(c.points);let w=0;for(const k in this.receivers){const D=this.receivers[k];if(!D||!_.intersectsAabb(D.aabb))continue;D.aabb.min=_.closestPoint(D.aabb.min),D.aabb.max=_.closestPoint(D.aabb.max);const L=D.aabb.getCorners();for(let B=0;B<b.length;B++){let U=!0;for(const W of L){const J=[W[0]*h,W[1]*h,W[2]];if(a.N.transformMat4(J,J,b[B].matrix),J[0]<-1||J[0]>1||J[1]<-1||J[1]>1){U=!1;break}}if(D.lastCascade=B,w=Math.max(w,B),U)break}}return w+1}}class Om{constructor(c){this.painter=c,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new Pm,this._depthMode=new gn(c.context.gl.LEQUAL,gn.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this.useNormalOffset=!1,c.tp.registerParameter(pa,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),c.tp.registerParameter(pa,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32})}destroy(){for(const c of this._cascades)c.texture.destroy(),c.framebuffer.destroy();this._cascades=[]}updateShadowParameters(c,h){const b=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!h||!h.properties)return;const _=h.properties.get("shadow-intensity");if(!h.shadowsEnabled()||_<=0||(this._shadowLayerCount=b.style.order.reduce((ce,se)=>{const de=b.style._mergedLayers[se];return ce+(de.hasShadowPass()&&!de.isHidden(c.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this._enabled))return;const w=b.context,k=pa.shadowMapResolution,D=pa.shadowMapResolution;if(this._cascades.length===0||pa.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let ce=0;ce<pa.cascadeCount;++ce){const se=b._shadowMapDebug,de=w.gl,oe=w.createFramebuffer(k,D,se,"texture"),fe=new a.T(w,{width:k,height:D,data:null},de.DEPTH_COMPONENT);if(oe.depthAttachment.set(fe.texture),se){const Te=new a.T(w,{width:k,height:D,data:null},de.RGBA);oe.colorAttachment.set(Te.texture)}this._cascades.push({framebuffer:oe,texture:fe,matrix:[],far:0,boundingSphereRadius:0,frustum:new a.bq,scale:0})}}this.shadowDirection=Ef(h);let L=0;if(c.elevation){const ce=c.elevation,se=[1e4,-1e4];ce.visibleDemTiles.filter(de=>de.dem).forEach(de=>{const oe=de.dem.tree;se[0]=Math.min(se[0],oe.minimums[0]),se[1]=Math.max(se[1],oe.maximums[0])}),se[0]!==1e4&&(L=(se[1]-se[0])*ce.exaggeration())}const B=1.5*c.cameraToCenterDistance,U=3*B,W=new Float64Array(16);for(let ce=0;ce<this._cascades.length;++ce){const se=this._cascades[ce];let de=c.height/50,oe=1;pa.cascadeCount===1?oe=U:ce===0?oe=B:(de=B,oe=U);const[fe,Te]=j0(c,this.shadowDirection,de,oe,pa.shadowMapResolution,L);se.scale=c.scale,se.matrix=fe,se.boundingSphereRadius=Te,a.a6.invert(W,se.matrix),se.frustum=a.bq.fromInvProjectionMatrix(W,1,0,!0),se.far=oe}const J=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[J].far,this._cascades[J].far],this._uniformValues.u_shadow_intensity=_,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/pa.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=pa.shadowMapResolution,this._uniformValues.u_shadowmap_0=Pi.ShadowMap0,this._uniformValues.u_shadowmap_1=Pi.ShadowMap0+1,this._groundShadowTiles=b.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const ee=b.transform.elevation;for(const ce of this._groundShadowTiles){let se={min:0,max:0};if(ee){const de=ee.getMinMaxForTile(ce);de&&(se=de)}this.addShadowReceiver(ce.toUnwrapped(),se.min,se.max)}}get enabled(){return this._enabled}set enabled(c){this._enabled=c}drawShadowPass(c,h){if(!this._enabled)return;const b=this.painter,_=b.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(b.transform.getFrustum(0),b.transform.worldSize,this._cascades),_.viewport.set([0,0,pa.shadowMapResolution,pa.shadowMapResolution]);for(let w=0;w<this._numCascadesToRender;++w){b.currentShadowCascade=w,_.bindFramebuffer.set(this._cascades[w].framebuffer.framebuffer),_.clear({color:a.ax.white,depth:1});for(const k of c.order){const D=c._mergedLayers[k];if(!D.hasShadowPass()||D.isHidden(b.transform.zoom))continue;const L=c.getLayerSourceCache(D),B=L?h[L.id]:void 0;(D.type==="model"||B&&B.length)&&b.renderLayer(b,L,D,B)}}b.currentShadowCascade=0}drawGroundShadows(){if(!this._enabled)return;const c=this.painter,h=c.style,b=c.context,_=h.directionalLight,w=h.ambientLight;if(!_||!w)return;const k=[],D=Ls(c,c.longestCutoffRange);D.shouldRenderCutoff&&k.push("RENDER_CUTOFF");const L=Yd(_,w),B=new gn(b.gl.LEQUAL,gn.ReadOnly,c.depthRangeFor3D);for(const U of this._groundShadowTiles){const W=U.toUnwrapped(),J=c.isTileAffectedByFog(U),ee=c.getOrCreateProgram("groundShadow",{defines:k,overrideFog:J});this.setupShadows(W,ee),c.uploadCommonUniforms(b,ee,W,null,D);const ce={u_matrix:c.transform.calculateProjMatrix(W),u_ground_shadow_factor:L};ee.draw(c,b.gl.TRIANGLES,B,Dn.disabled,rr.multiply,Rn.disabled,ce,"ground_shadow",c.tileExtentBuffer,c.quadTriangleIndexBuffer,c.tileExtentSegments,{},c.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?rr.unblended:rr.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(c){const h=this.painter.transform,b=h.calculatePosMatrix(c,h.worldSize);return a.a6.multiply(b,this._cascades[this.painter.currentShadowCascade].matrix,b),Float32Array.from(b)}calculateShadowPassMatrixFromMatrix(c){return a.a6.multiply(c,this._cascades[this.painter.currentShadowCascade].matrix,c),Float32Array.from(c)}setupShadows(c,h,b,_=0){if(!this._enabled)return;const w=this.painter.transform,k=this.painter.context,D=k.gl,L=this._uniformValues,B=new Float64Array(16),U=w.calculatePosMatrix(c,w.worldSize);for(let W=0;W<this._cascades.length;W++)a.a6.multiply(B,this._cascades[W].matrix,U),L[W===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(B),k.activeTexture.set(D.TEXTURE0+Pi.ShadowMap0+W),this._cascades[W].texture.bind(D.NEAREST,D.CLAMP_TO_EDGE);if(this.useNormalOffset=!!b,this.useNormalOffset){const W=a.bR(c.canonical),J=2/w.tileSize*a.V/pa.shadowMapResolution,ee=J*this._cascades[0].boundingSphereRadius,ce=J*this._cascades[this._cascades.length-1].boundingSphereRadius,se=(b==="vector-tile"?1:3)/Math.pow(2,_-c.canonical.z-(1-w.zoom+Math.floor(w.zoom)));L.u_shadow_normal_offset=[W,ee*se,ce*se],L.u_shadow_bias=[6e-5,.0012,.012]}else L.u_shadow_bias=[36e-5,.0012,.012];h.setShadowUniformValues(k,L)}setupShadowsFromMatrix(c,h,b=!1){if(!this._enabled)return;const _=this.painter.context,w=_.gl,k=this._uniformValues,D=new Float64Array(16);for(let L=0;L<pa.cascadeCount;L++)a.a6.multiply(D,this._cascades[L].matrix,c),k[L===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(D),_.activeTexture.set(w.TEXTURE0+Pi.ShadowMap0+L),this._cascades[L].texture.bind(w.NEAREST,w.CLAMP_TO_EDGE);this.useNormalOffset=b,b?(k.u_shadow_normal_offset=[1,5,5],k.u_shadow_bias=[6e-5,.0012,.012]):k.u_shadow_bias=[36e-5,.0012,.012],h.setShadowUniformValues(_,k)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(c,h,b,_){if(_[2]>=0)return{};const w=function(L,B,U){const W=U/(1<<L.canonical.z);return new a.bS([L.canonical.x*W+L.wrap*U,L.canonical.y*W+L.wrap*U,0],[(L.canonical.x+1)*W+L.wrap*U,(L.canonical.y+1)*W+L.wrap*U,B])}(c,h,b).getCorners(),k=h/-_[2];_[0]<0?(a.N.add(w[0],w[0],[_[0]*k,0,0]),a.N.add(w[3],w[3],[_[0]*k,0,0])):_[0]>0&&(a.N.add(w[1],w[1],[_[0]*k,0,0]),a.N.add(w[2],w[2],[_[0]*k,0,0])),_[1]<0?(a.N.add(w[0],w[0],[0,_[1]*k,0]),a.N.add(w[1],w[1],[0,_[1]*k,0])):_[1]>0&&(a.N.add(w[2],w[2],[0,_[1]*k,0]),a.N.add(w[3],w[3],[0,_[1]*k,0]));const D={};return D.vertices=w,D.planes=[Hc(w[1],w[0],w[4]),Hc(w[2],w[1],w[5]),Hc(w[3],w[2],w[6]),Hc(w[0],w[3],w[7])],D}addShadowReceiver(c,h,b){this._receivers.add(c,a.bS.fromTileIdAndHeight(c,h,b))}getMaxCascadeForTile(c){const h=this._receivers.get(c);return h&&h.lastCascade?h.lastCascade:0}}function Hc(g,c,h){const b=a.N.sub([],h,c),_=a.N.sub([],g,c),w=a.N.cross([],b,_),k=a.N.length(w);return k===0?[0,0,1,0]:(a.N.scale(w,w,1/k),[w[0],w[1],w[2],-a.N.dot(w,c)])}function Ef(g){const c=g.properties.get("direction"),h=a.bQ(c.x,c.y,c.z);h[2]=a.aa(h[2],0,75);const b=a.bT([h[0],h[1],h[2]]);return a.N.fromValues(b.x,b.y,b.z)}function Yd(g,c){const h=g.properties.get("color"),b=g.properties.get("intensity"),_=g.properties.get("direction"),w=[_.x,_.y,_.z],k=c.properties.get("color"),D=c.properties.get("intensity"),L=Math.max(a.N.dot([0,0,1],w),0),B=[0,0,0];a.N.scale(B,k.toArray01Linear().slice(0,3),D);const U=[0,0,0];return a.N.scale(U,h.toArray01Linear().slice(0,3),L*b),a.bU([B[0]>0?B[0]/(B[0]+U[0]):0,B[1]>0?B[1]/(B[1]+U[1]):0,B[2]>0?B[2]/(B[2]+U[2]):0])}function j0(g,c,h,b,_,w){const k=g.zoom,D=g.scale,L=g.worldSize,B=1/L,U=g.aspect,W=Math.sqrt(1+U*U)*Math.tan(.5*g.fovX),J=W*W,ee=b-h,ce=b+h;let se,de;J>ee/ce?(se=b,de=b*W):(se=.5*ce*(1+J),de=.5*Math.sqrt(ee*ee+2*(b*b+h*h)*J+ce*ce*J*J));const oe=g.projection.pixelsPerMeter(g.center.lat,L),fe=g._camera.getCameraToWorldMercator(),Te=[0,0,-se*B];a.N.transformMat4(Te,Te,fe);let be=de*B;const Ee=g._edgeInsets;if(!(Ee.left===0&&Ee.top===0&&Ee.right===0&&Ee.bottom===0||Ee.left===Ee.right&&Ee.top===Ee.bottom)){const gt=g._camera.getWorldToCamera(g.worldSize,g.projection.zAxisUnit==="meters"?oe:1),yt=g._camera.getCameraToClipPerspective(g._fov,g.width/g.height,h,b);yt[8]=2*-g.centerOffset.x/g.width,yt[9]=2*g.centerOffset.y/g.height;const vt=new Float64Array(16);a.a6.mul(vt,yt,gt);const Wt=new Float64Array(16);a.a6.invert(Wt,vt);const Vt=a.bq.fromInvProjectionMatrix(Wt,L,k,!0);for(const Ht of Vt.points){const Zt=((he=Ht)[0]/=D,he[1]/=D,he[2]=a.bl(he[2],g._center.lat),he);be=Math.max(be,a.N.len(a.N.subtract([],Te,Zt)))}}var he;be*=_/(_-1);const Ce=Math.acos(c[2]),Ne=Math.atan2(-c[0],-c[1]),Fe=new Vc;Fe.position=Te,Fe.setPitchBearing(Ce,Ne);const G=Fe.getWorldToCamera(L,oe),R=be*L,H=Math.min(g._mercatorZfromZoom(17)*L*-2,-2*R),le=Fe.getCameraToClipOrthographic(-R,R,-R,R,H,(R+w*oe)/c[2]),ge=new Float64Array(16);a.a6.multiply(ge,le,G);const Oe=a.N.fromValues(Math.floor(1e6*Te[0])/1e6*L,Math.floor(1e6*Te[1])/1e6*L,0),Se=.5*_,Le=[0,0,0];a.N.transformMat4(Le,Oe,ge),a.N.scale(Le,Le,Se);const ke=[Math.floor(Le[0]),Math.floor(Le[1]),Math.floor(Le[2])],Ve=[0,0,0];a.N.sub(Ve,Le,ke),a.N.scale(Ve,Ve,-1/Se);const Ye=new Float64Array(16);return a.a6.identity(Ye),a.a6.translate(Ye,Ye,Ve),a.a6.multiply(ge,Ye,ge),[ge,R]}const Gl=(g,c)=>jt(g,c&&c.filter(h=>h.identifier!=="source.canvas")),$0=a.ac(xr,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection","setCamera","addImport","removeImport","updateImport"]),Bu=a.ac(xr,["setCenter","setZoom","setBearing","setPitch"]),Tf={version:8,layers:[],sources:{}},Lm={duration:300,delay:0},Sf=new Set(["fill","line","background","hillshade","raster"]);class ps extends a.E{constructor(c,h={}){super(),this.map=c,this.scope=h.scope||"",this.fragments=[],this.importDepth=h.importDepth||0,this.importsCache=h.importsCache||new Map,this.resolvedImports=h.resolvedImports||new Set,this.transition=a.e({},Lm),this._buildingIndex=new Ul(this),this.crossTileSymbolIndex=new Rm,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=h.styleChanges||new De,this.dispatcher=h.dispatcher?h.dispatcher:new a.bW(a.bX(),this),h.imageManager?this.imageManager=h.imageManager:(this.imageManager=new Ge,this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=h.glyphManager?h.glyphManager:new a.bY(c._requestManager,h.localFontFamily?a.bZ.all:h.localIdeographFontFamily?a.bZ.ideographs:a.bZ.none,h.localFontFamily||h.localIdeographFontFamily),h.modelManager?this.modelManager=h.modelManager:(this.modelManager=new je(c._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this.options=h.configOptions?h.configOptions:new Map,this._configDependentLayers=h.configDependentLayers?h.configDependentLayers:new Set,this._config=h.config,this.dispatcher.broadcast("setReferrer",a.b_());const b=this;this._rtlTextPluginCallback=ps.registerForPluginStateChange(_=>{b.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:_.pluginStatus,pluginURL:_.pluginURL},(w,k)=>{if(a.b$(w),k&&k.every(D=>D))for(const D in b._sourceCaches){const L=b._sourceCaches[D],B=L.getSource().type;B!=="vector"&&B!=="geojson"||L.reload()}})}),this.on("data",_=>{if(_.dataType!=="source"||_.sourceDataType!=="metadata")return;const w=this.getOwnSource(_.sourceId);if(w&&w.vectorLayerIds)for(const k in this._layers){const D=this._layers[k];D.source===w.id&&this._validateLayer(D)}})}loadURL(c,h={}){this.fire(new a.b("dataloading",{dataType:"style"}));const b=typeof h.validate=="boolean"?h.validate:!a.c0(c);c=this.map._requestManager.normalizeStyleURL(c,h.accessToken),this.resolvedImports.add(c);const _=this.importsCache.get(c);if(_)return this._load(_,b);const w=this.map._requestManager.transformRequest(c,a.R.Style);this._request=a.g(w,(k,D)=>{if(this._request=null,k)this.fire(new a.a(k));else if(D)return this.importsCache.set(c,D),this._load(D,b)})}loadJSON(c,h={}){this.fire(new a.b("dataloading",{dataType:"style"})),this._request=a.f.frame(()=>{this._request=null,this._load(c,h.validate!==!1)})}loadEmpty(){this.fire(new a.b("dataloading",{dataType:"style"})),this._load(Tf,!1)}_loadImports(c,h,b){if(this.importDepth>=4)return a.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const _=[];for(const w of c){const k=this._createFragmentStyle(w),D=new Promise(U=>{k.once("style.import.load",U),k.once("error",U)}).then(()=>this.mergeAll());if(_.push(D),this.resolvedImports.has(w.url)){k.loadEmpty();continue}const L=w.data||this.importsCache.get(w.url);L?k.loadJSON(L,{validate:h}):w.url?k.loadURL(w.url,{validate:h}):k.loadEmpty();const B={style:k,id:w.id,config:w.config};if(b){const U=this.fragments.findIndex(({id:W})=>W===b);this.fragments=this.fragments.slice(0,U).concat(B).concat(this.fragments.slice(U))}else this.fragments.push(B)}return Promise.allSettled(_)}_createFragmentStyle(c){const h=this.scope?a.ag(c.id,this.scope):c.id,b=new ps(this.map,{scope:h,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:c.config,configOptions:this.options,configDependentLayers:this._configDependentLayers});return b.setEventedParent(this.map,{style:b}),b}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options});const c=this.isRootStyle();this._shouldPrecompile=c,this.fire(new a.b(c?"style.load":"style.import.load"))}_load(c,h){const b=c.schema;if(this.isRootStyle()&&(c.fragment||b&&c.fragment!==!1)){const k=a.e({},Tf,{imports:[{id:"basemap",data:c,url:""}]});return void this._load(k,h)}if(this.setConfig(this._config,b),h&&Gl(this,Mr(c)))return;this._loaded=!0,this.stylesheet=a.c1(c);for(const k in c.sources)this.addSource(k,c.sources[k],{validate:!1,isInitialLoad:!0});c.sprite?this._loadSprite(c.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(c.glyphs,this.scope);const _=gf(this.stylesheet.layers);if(this._order=_.map(k=>k.id),this.stylesheet.light&&a.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const k=this.stylesheet.lights[0];this.light=new en(k.properties,k.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new en(this.stylesheet.light)),this._layers={},this._serializedLayers={};for(const k of _){const D=a.c2(k,this.scope,this.options);D.isConfigDependent&&this._configDependentLayers.add(D.fqid),D.setEventedParent(this,{layer:{id:D.id}}),this._layers[D.id]=D,this._serializedLayers[D.id]=D.serialize();const L=this.getOwnLayerSourceCache(D),B=!!this.directionalLight&&this.directionalLight.shadowsEnabled();L&&D.canCastShadows()&&B&&(L.castsShadows=!0)}this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const w=this.stylesheet.terrain;w&&(this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=a.f.hasCanvasFingerprintNoise()),this.disableElevatedTerrain?a.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."):this.terrainSetForDrapingOnly()||this._createTerrain(w,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new a.b("data",{dataType:"style"})),c.imports?this._loadImports(c.imports,h).then(()=>this._reloadImports()):this._reloadImports()}isRootStyle(){return this.importDepth===0}mergeAll(){let c,h,b,_,w,k,D,L;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(B=>{if(B.stylesheet){if(B.light!=null&&(c=B.light),B.stylesheet.lights)for(const U of B.stylesheet.lights)U.type==="ambient"&&B.ambientLight!=null&&(h=B.ambientLight),U.type==="directional"&&B.directionalLight!=null&&(b=B.directionalLight);_=this._prioritizeTerrain(_,B.terrain,B.stylesheet.terrain),B.stylesheet.fog&&B.fog!=null&&(w=B.fog),B.stylesheet.camera!=null&&(L=B.stylesheet.camera),B.stylesheet.projection!=null&&(k=B.stylesheet.projection),B.stylesheet.transition!=null&&(D=B.stylesheet.transition)}}),this.light=c,this.ambientLight=h,this.directionalLight=b,this.fog=w,_===null?delete this.terrain:this.terrain=_,this.camera=L||{"camera-projection":"perspective"},this.projection=k||{name:"mercator"},this.transition=a.e({},Lm,D),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(c){const h=b=>{for(const _ of b.fragments)h(_.style);c(b)};h(this)}_prioritizeTerrain(c,h,b){const _=c&&c.drapeRenderMode===0;return b===null?h&&h.drapeRenderMode===0?h:_?c:null:h!=null&&(!c||_||h&&h.drapeRenderMode===1)?h:c}mergeTerrain(){let c;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(h=>{c=this._prioritizeTerrain(c,h.terrain,h.stylesheet.terrain)}),c===null?delete this.terrain:this.terrain=c}mergeProjection(){let c;this.forEachFragmentStyle(h=>{h.stylesheet.projection!=null&&(c=h.stylesheet.projection)}),this.projection=c||{name:"mercator"}}mergeSources(){const c={},h={},b={};this.forEachFragmentStyle(_=>{for(const w in _._sourceCaches){const k=a.ag(w,_.scope);c[k]=_._sourceCaches[w]}for(const w in _._otherSourceCaches){const k=a.ag(w,_.scope);h[k]=_._otherSourceCaches[w]}for(const w in _._symbolSourceCaches){const k=a.ag(w,_.scope);b[k]=_._symbolSourceCaches[w]}}),this._mergedSourceCaches=c,this._mergedOtherSourceCaches=h,this._mergedSymbolSourceCaches=b}mergeLayers(){const c={},h=[],b={};this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(w=>{for(const k of w._order){const D=w._layers[k];if(D.type==="slot"){const L=a.c3(k);if(c[L])continue;c[L]=[]}D.slot&&c[D.slot]?c[D.slot].push(D):h.push(D)}}),this._mergedOrder=[];const _=(w=[])=>{for(const k of w)if(k.type==="slot"){const D=a.c3(k.id);c[D]&&_(c[D])}else{const D=a.ag(k.id,k.scope);this._mergedOrder.push(D),b[D]=k,k.is3D()&&(this._has3DLayers=!0),k.type==="circle"&&(this._hasCircleLayers=!0),k.type==="symbol"&&(this._hasSymbolLayers=!0)}};_(h),this._mergedLayers=b,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(c){return this.stylesheet.camera=a.e({},this.stylesheet.camera,c),this.camera=this.stylesheet.camera,this}setProjection(c){c?this.stylesheet.projection=c:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(c){this._spriteRequest=function(h,b,_){let w,k,D;const L=a.f.devicePixelRatio>1?"@2x":"";let B=a.g(b.transformRequest(b.normalizeSpriteURL(h,L,".json"),a.R.SpriteJSON),(J,ee)=>{B=null,D||(D=J,w=ee,W())}),U=a.d(b.transformRequest(b.normalizeSpriteURL(h,L,".png"),a.R.SpriteImage),(J,ee)=>{U=null,D||(D=J,k=ee,W())});function W(){if(D)_(D);else if(w&&k){const J=a.f.getImageData(k),ee={};for(const ce in w){const{width:se,height:de,x:oe,y:fe,sdf:Te,pixelRatio:be,stretchX:Ee,stretchY:he,content:Ce}=w[ce],Ne=new a.h({width:se,height:de});a.h.copy(J,Ne,{x:oe,y:fe},{x:0,y:0},{width:se,height:de}),ee[ce]={data:Ne,pixelRatio:be,sdf:Te,stretchX:Ee,stretchY:he,content:Ce}}_(null,ee)}}return{cancel(){B&&(B.cancel(),B=null),U&&(U.cancel(),U=null)}}}(c,this.map._requestManager,(h,b)=>{if(this._spriteRequest=null,h)this.fire(new a.a(h));else if(b)for(const _ in b)this.imageManager.addImage(_,this.scope,b[_]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new a.b("data",{dataType:"style"}))})}_validateLayer(c){const h=this.getOwnSource(c.source);if(!h)return;const b=c.sourceLayer;b&&(h.type==="geojson"||h.vectorLayerIds&&h.vectorLayerIds.indexOf(b)===-1)&&this.fire(new a.a(new Error(`Source layer "${b}" does not exist on source "${h.id}" as specified by style layer "${c.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const c in this._sourceCaches)if(!this._sourceCaches[c].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded())return!1;for(const{style:c}of this.fragments)if(!c.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((c,h)=>{const b=this.fragments[h];return b&&b.style&&(c.data=b.style.serialize()),c})}_serializeSources(){const c={};for(const h in this._sourceCaches){const b=this._sourceCaches[h].getSource();c[b.id]||(c[b.id]=b.serialize())}return c}_serializeLayers(c){const h=[];for(const b of c){const _=this._layers[b];_&&_.type!=="custom"&&h.push(_.serialize())}return h}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition())return!0;for(const c in this._sourceCaches)if(this._sourceCaches[c].hasTransition())return!0;for(const c in this._layers)if(this._layers[c].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}isLayerDraped(c){return!!this.terrain&&(typeof c.isLayerDraped=="function"?c.isLayerDraped(this.getLayerSourceCache(c)):Sf.has(c.type))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(c){const h=this.getOwnLayer(c);if(h)return h;this.fire(new a.a(new Error(`The layer '${c}' does not exist in the map's style.`)))}_checkSource(c){const h=this.getOwnSource(c);if(h)return h;this.fire(new a.a(new Error(`The source '${c}' does not exist in the map's style.`)))}update(c){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(c),this.directionalLight&&this.directionalLight.recalculate(c);const h=this.calculateLightsBrightness();c.brightness=h||0,h!==this._brightness&&(this._brightness=h,this.dispatcher.broadcast("setBrightness",h));const b=this._changes.isDirty();if(this._changes.isDirty()){const w=this._changes.getLayerUpdatesByScope();for(const k in w){const{updatedIds:D,removedIds:L}=w[k];(D||L)&&this._updateWorkerLayers(k,D,L)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(c),this.light&&this.light.updateTransitions(c),this.ambientLight&&this.ambientLight.updateTransitions(c),this.directionalLight&&this.directionalLight.updateTransitions(c),this.fog&&this.fog.updateTransitions(c),this._changes.reset()}const _={};for(const w in this._mergedSourceCaches){const k=this._mergedSourceCaches[w];_[w]=k.used,k.used=!1,k.tileCoverLift=0}for(const w of this._mergedOrder){const k=this._mergedLayers[w];if(k.recalculate(c,this._availableImages),!k.isHidden(c.zoom)){const D=this.getLayerSourceCache(k);D&&(D.used=!0,D.tileCoverLift=Math.max(D.tileCoverLift,k.tileCoverLift()))}if(!this._precompileDone&&this._shouldPrecompile)for(let D=k.minzoom||0;D<(k.maxzoom||25.5);D++){const L=this.map.painter;if(L){const B=k.getProgramIds();if(!B)continue;for(const U of B){const W=k.getDefaultProgramParams(U,c.zoom);W&&(L.style=this,this.fog&&(L._fogVisible=!0,W.overrideFog=!0,L.getOrCreateProgram(U,W)),L._fogVisible=!1,W.overrideFog=!1,L.getOrCreateProgram(U,W),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(W.overrideRtt=!0,L.getOrCreateProgram(U,W)))}}}}this._shouldPrecompile&&(this._precompileDone=!0);for(const w in _){const k=this._mergedSourceCaches[w];_[w]!==k.used&&k.getSource().fire(new a.b("data",{sourceDataType:"visibility",dataType:"source",sourceId:k.getSource().id}))}this.light&&this.light.recalculate(c),this.terrain&&this.terrain.recalculate(c),this.fog&&this.fog.recalculate(c),this.z=c.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),b&&this.fire(new a.b("data",{dataType:"style"}))}_updateTilesForChangedImages(){const c=this._changes.getUpdatedImages();if(c.length){for(const h in this._sourceCaches)this._sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],c);this._changes.resetUpdatedImages()}}_updateWorkerLayers(c,h,b){const _=this.getFragmentStyle(c);_&&this.dispatcher.broadcast("updateLayers",{layers:h?_._serializeLayers(h):[],scope:c,removedIds:b||[],options:_.options})}setState(c){if(this._checkLoaded(),Gl(this,Mr(c)))return!1;(c=a.c1(c)).layers=gf(c.layers);const h=function(_,w){if(!_)return[{command:xr.setStyle,args:[w]}];let k=[];try{if(!E(_.version,w.version))return[{command:xr.setStyle,args:[w]}];E(_.center,w.center)||k.push({command:xr.setCenter,args:[w.center]}),E(_.zoom,w.zoom)||k.push({command:xr.setZoom,args:[w.zoom]}),E(_.bearing,w.bearing)||k.push({command:xr.setBearing,args:[w.bearing]}),E(_.pitch,w.pitch)||k.push({command:xr.setPitch,args:[w.pitch]}),E(_.sprite,w.sprite)||k.push({command:xr.setSprite,args:[w.sprite]}),E(_.glyphs,w.glyphs)||k.push({command:xr.setGlyphs,args:[w.glyphs]}),E(_.imports,w.imports)||function(W=[],J=[],ee){J=J||[];const ce=(W=W||[]).map(La),se=J.map(La),de=W.reduce(Du,{}),oe=J.reduce(Du,{}),fe=ce.slice();let Te,be,Ee,he;for(Te=0,be=0;Te<ce.length;Te++)Ee=ce[Te],oe.hasOwnProperty(Ee)?be++:(ee.push({command:xr.removeImport,args:[Ee]}),fe.splice(fe.indexOf(Ee,be),1));for(Te=0,be=0;Te<se.length;Te++)Ee=se[se.length-1-Te],fe[fe.length-1-Te]!==Ee&&(de.hasOwnProperty(Ee)?(ee.push({command:xr.removeImport,args:[Ee]}),fe.splice(fe.lastIndexOf(Ee,fe.length-be),1)):be++,he=fe[fe.length-Te],ee.push({command:xr.addImport,args:[oe[Ee],he]}),fe.splice(fe.length-Te,0,Ee));for(const Ce of J){const Ne=de[Ce.id];Ne&&!E(Ne,Ce)&&ee.push({command:xr.updateImport,args:[Ce.id,Ce]})}}(_.imports,w.imports,k),E(_.transition,w.transition)||k.push({command:xr.setTransition,args:[w.transition]}),E(_.light,w.light)||k.push({command:xr.setLight,args:[w.light]}),E(_.fog,w.fog)||k.push({command:xr.setFog,args:[w.fog]}),E(_.projection,w.projection)||k.push({command:xr.setProjection,args:[w.projection]}),E(_.lights,w.lights)||k.push({command:xr.setLights,args:[w.lights]}),E(_.camera,w.camera)||k.push({command:xr.setCamera,args:[w.camera]});const D={},L=[];(function(W,J,ee,ce){let se;for(se in J=J||{},W=W||{})W.hasOwnProperty(se)&&(J.hasOwnProperty(se)||zd(se,ee,ce));for(se in J){if(!J.hasOwnProperty(se))continue;const de=J[se];W.hasOwnProperty(se)?E(W[se],de)||(W[se].type==="geojson"&&de.type==="geojson"&&Oc(W,J,se)?ee.push({command:xr.setGeoJSONSourceData,args:[se,de.data]}):Ps(se,J,ee,ce)):Nd(se,J,ee)}})(_.sources,w.sources,L,D);const B=[];_.layers&&_.layers.forEach(W=>{W.source&&D[W.source]?k.push({command:xr.removeLayer,args:[W.id]}):B.push(W)});let U=_.terrain;U&&D[U.source]&&(k.push({command:xr.setTerrain,args:[void 0]}),U=void 0),k=k.concat(L),E(U,w.terrain)||k.push({command:xr.setTerrain,args:[w.terrain]}),function(W,J,ee){J=J||[];const ce=(W=W||[]).map(La),se=J.map(La),de=W.reduce(Du,{}),oe=J.reduce(Du,{}),fe=ce.slice(),Te=Object.create(null);let be,Ee,he,Ce,Ne,Fe,G;for(be=0,Ee=0;be<ce.length;be++)he=ce[be],oe.hasOwnProperty(he)?Ee++:(ee.push({command:xr.removeLayer,args:[he]}),fe.splice(fe.indexOf(he,Ee),1));for(be=0,Ee=0;be<se.length;be++)he=se[se.length-1-be],fe[fe.length-1-be]!==he&&(de.hasOwnProperty(he)?(ee.push({command:xr.removeLayer,args:[he]}),fe.splice(fe.lastIndexOf(he,fe.length-Ee),1)):Ee++,Fe=fe[fe.length-be],ee.push({command:xr.addLayer,args:[oe[he],Fe]}),fe.splice(fe.length-be,0,he),Te[he]=!0);for(be=0;be<se.length;be++)if(he=se[be],Ce=de[he],Ne=oe[he],!Te[he]&&!E(Ce,Ne))if(E(Ce.source,Ne.source)&&E(Ce["source-layer"],Ne["source-layer"])&&E(Ce.type,Ne.type)){for(G in hs(Ce.layout,Ne.layout,ee,he,null,xr.setLayoutProperty),hs(Ce.paint,Ne.paint,ee,he,null,xr.setPaintProperty),E(Ce.slot,Ne.slot)||ee.push({command:xr.setSlot,args:[he,Ne.slot]}),E(Ce.filter,Ne.filter)||ee.push({command:xr.setFilter,args:[he,Ne.filter]}),E(Ce.minzoom,Ne.minzoom)&&E(Ce.maxzoom,Ne.maxzoom)||ee.push({command:xr.setLayerZoomRange,args:[he,Ne.minzoom,Ne.maxzoom]}),Ce)Ce.hasOwnProperty(G)&&G!=="layout"&&G!=="paint"&&G!=="filter"&&G!=="metadata"&&G!=="minzoom"&&G!=="maxzoom"&&G!=="slot"&&(G.indexOf("paint.")===0?hs(Ce[G],Ne[G],ee,he,G.slice(6),xr.setPaintProperty):E(Ce[G],Ne[G])||ee.push({command:xr.setLayerProperty,args:[he,G,Ne[G]]}));for(G in Ne)Ne.hasOwnProperty(G)&&!Ce.hasOwnProperty(G)&&G!=="layout"&&G!=="paint"&&G!=="filter"&&G!=="metadata"&&G!=="minzoom"&&G!=="maxzoom"&&G!=="slot"&&(G.indexOf("paint.")===0?hs(Ce[G],Ne[G],ee,he,G.slice(6),xr.setPaintProperty):E(Ce[G],Ne[G])||ee.push({command:xr.setLayerProperty,args:[he,G,Ne[G]]}))}else ee.push({command:xr.removeLayer,args:[he]}),Fe=fe[fe.lastIndexOf(he)+1],ee.push({command:xr.addLayer,args:[Ne,Fe]})}(B,w.layers,k)}catch(D){console.warn("Unable to compute style diff:",D),k=[{command:xr.setStyle,args:[w]}]}return k}(this.serialize(),c).filter(_=>!(_.command in Bu));if(h.length===0)return!1;const b=h.filter(_=>!(_.command in $0));if(b.length>0)throw new Error(`Unimplemented: ${b.map(_=>_.command).join(", ")}.`);return h.forEach(_=>{this[_.command].apply(this,_.args)}),this.stylesheet=c,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(c,h){return this.getImage(c)?this.fire(new a.a(new Error("An image with this name already exists."))):(this.imageManager.addImage(c,this.scope,h),this._afterImageUpdated(c),this)}updateImage(c,h){this.imageManager.updateImage(c,this.scope,h)}getImage(c){return this.imageManager.getImage(c,this.scope)}removeImage(c){return this.getImage(c)?(this.imageManager.removeImage(c,this.scope),this._afterImageUpdated(c),this):this.fire(new a.a(new Error("No image with this name exists.")))}_afterImageUpdated(c){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(c),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new a.b("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(c,h,b={}){return this._checkLoaded(),this._validate(ct,`models.${c}`,h,null,b)||(this.modelManager.addModel(c,h,this.scope),this._changes.setDirty()),this}hasModel(c){return this.modelManager.hasModel(c,this.scope)}removeModel(c){return this.hasModel(c)?(this.modelManager.removeModel(c,this.scope),this):this.fire(new a.a(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(c,h,b={}){if(this._checkLoaded(),this.getOwnSource(c)!==void 0)throw new Error(`There is already a source with ID "${c}".`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(mr,`sources.${c}`,h,null,b))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const _=Ko(c,h,this.dispatcher,this);_.scope=this.scope,_.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(_.id),source:_.serialize(),sourceId:_.id}));const w=k=>{const D=(k?"symbol:":"other:")+_.id,L=a.ag(D,this.scope),B=this._sourceCaches[D]=new Ka(L,_,k);(k?this._symbolSourceCaches:this._otherSourceCaches)[_.id]=B,B.onAdd(this.map)};w(!1),h.type!=="vector"&&h.type!=="geojson"||w(!0),_.onAdd&&_.onAdd(this.map),b.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(c){this._checkLoaded();const h=this.getOwnSource(c);if(!h)throw new Error("There is no source with this ID");for(const _ in this._layers)if(this._layers[_].source===c)return this.fire(new a.a(new Error(`Source "${c}" cannot be removed while layer "${_}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===c)return this.fire(new a.a(new Error(`Source "${c}" cannot be removed while terrain is using it.`)));const b=this.getOwnSourceCaches(c);for(const _ of b){const w=a.c3(_.id);delete this._sourceCaches[w],this._changes.discardSourceCacheUpdate(_.id),_.fire(new a.b("data",{sourceDataType:"metadata",dataType:"source",sourceId:_.getSource().id})),_.setEventedParent(null),_.clearTiles()}return delete this._otherSourceCaches[c],delete this._symbolSourceCaches[c],this.mergeSources(),h.setEventedParent(null),h.onRemove&&h.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(c,h){this._checkLoaded(),this.getOwnSource(c).setData(h),this._changes.setDirty()}getOwnSource(c){const h=this.getOwnSourceCache(c);return h&&h.getSource()}getOwnSources(){const c=[];for(const h in this._otherSourceCaches){const b=this.getOwnSourceCache(h);b&&c.push(b.getSource())}return c}areTilesLoaded(){const c=this._mergedSourceCaches;for(const h in c){const b=c[h]._tiles;for(const _ in b){const w=b[_];if(w.state!=="loaded"&&w.state!=="errored")return!1}}return!0}setLights(c){if(this._checkLoaded(),!c)return delete this.ambientLight,void delete this.directionalLight;const h=this._getTransitionParameters();for(const _ of c){if(this._validate(Ke,"lights",_))return;switch(_.type){case"ambient":if(this.ambientLight){const w=this.ambientLight;w.set(_),w.updateTransitions(h)}else this.ambientLight=new vn(_,tr,this.scope,this.options);break;case"directional":if(this.directionalLight){const w=this.directionalLight;w.set(_),w.updateTransitions(h)}else this.directionalLight=new vn(_,mn,this.scope,this.options)}}const b=new a.K(this.z||0,h);this.ambientLight&&this.ambientLight.recalculate(b),this.directionalLight&&this.directionalLight.recalculate(b),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const c=this.directionalLight,h=this.ambientLight;if(!c||!h)return;const b=W=>.2126*(W[0]<=.03928?W[0]/12.92:Math.pow((W[0]+.055)/1.055,2.4))+.7152*(W[1]<=.03928?W[1]/12.92:Math.pow((W[1]+.055)/1.055,2.4))+.0722*(W[2]<=.03928?W[2]/12.92:Math.pow((W[2]+.055)/1.055,2.4)),_=c.properties.get("color").toArray01(),w=c.properties.get("intensity"),k=c.properties.get("direction"),D=1-a.bQ(k.x,k.y,k.z)[2]/90,L=b(_)*w*D,B=h.properties.get("color").toArray01(),U=h.properties.get("intensity");return(L+b(B)*U)/2}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const c=[];return this.directionalLight&&c.push(this.directionalLight.get()),this.ambientLight&&c.push(this.ambientLight.get()),c}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(c){if(!c)return this;if(a.c4(c)){const h=a.c5(c),b=this.fragments.find(({id:w})=>w===h);if(!b)throw new Error(`Style import not found: ${c}`);const _=a.c3(c);return b.style.getFragmentStyle(_)}{const h=this.fragments.find(({id:b})=>b===c);if(!h)throw new Error(`Style import not found: ${c}`);return h.style}}getConfigProperty(c,h){const b=this.getFragmentStyle(c);if(!b)return null;const _=a.ag(h,b.scope),w=b.options.get(_),k=w?w.value||w.default:null;return k?k.serialize():null}setConfigProperty(c,h,b){const _=a.r(b);if(_.result!=="success")return void Gl(this,_.value);const w=_.value.expression,k=this.getFragmentStyle(c);if(!k)return;const D=a.ag(h,k.scope),L=k.options.get(D);L&&(this.options.set(D,{...L,value:w}),this.updateConfigDependencies())}setConfig(c,h){if(this._config=c,c||h)if(h)for(const b in h){let _,w;const k=a.r(h[b].default);if(k.result==="success"&&(_=k.value.expression),c&&c[b]!==void 0){const J=a.r(c[b]);J.result==="success"&&(w=J.value.expression)}const{minValue:D,maxValue:L,stepValue:B,type:U,values:W}=h[b];if(_){const J=a.ag(b,this.scope);this.options.set(J,{default:_,value:w,minValue:D,maxValue:L,stepValue:B,type:U,values:W})}else this.fire(new a.a(new Error(`No schema defined for config option "${b}".`)))}else this.fire(new a.a(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(){for(const c of this._configDependentLayers){const h=this.getLayer(c);h&&(h.possiblyEvaluateVisibility(),this._updateLayer(h))}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this._changes.setDirty()}addLayer(c,h,b={}){this._checkLoaded();const _=c.id;if(this._layers[_])return void this.fire(new a.a(new Error(`Layer with id "${_}" already exists on this map`)));let w;if(c.type==="custom"){if(Gl(this,a.c6(c)))return;w=a.c2(c,this.scope,this.options)}else{if(typeof c.source=="object"&&(this.addSource(_,c.source),c=a.c1(c),c=a.e(c,{source:_})),this._validate(Pe,`layers.${_}`,c,{arrayIndex:-1},b))return;w=a.c2(c,this.scope,this.options),this._validateLayer(w),w.setEventedParent(this,{layer:{id:_}}),this._serializedLayers[w.id]=w.serialize()}w.isConfigDependent&&this._configDependentLayers.add(w.fqid);let k=this._order.length;if(h){const U=this._order.indexOf(h);if(U===-1)return void this.fire(new a.a(new Error(`Layer with id "${h}" does not exist on this map.`)));w.slot===this._layers[h].slot?k=U:a.w(`Layer with id "${h}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(k,0,_),this._layerOrderChanged=!0,this._layers[_]=w;const D=this.getOwnLayerSourceCache(w),L=!!this.directionalLight&&this.directionalLight.shadowsEnabled();D&&w.canCastShadows()&&L&&(D.castsShadows=!0);const B=this._changes.getRemovedLayer(w);if(B&&w.source&&D&&w.type!=="custom"){this._changes.discardLayerRemoval(w);const U=a.ag(w.source,w.scope);B.type!==w.type?this._changes.updateSourceCache(U,"clear"):(this._changes.updateSourceCache(U,"reload"),D.pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map),w.scope=this.scope,this.mergeLayers()}moveLayer(c,h){this._checkLoaded();const b=this._checkLayer(c);if(!b||c===h)return;const _=this._order.indexOf(c);this._order.splice(_,1);let w=this._order.length;if(h){const k=this._order.indexOf(h);if(k===-1)return void this.fire(new a.a(new Error(`Layer with id "${h}" does not exist on this map.`)));b.slot===this._layers[h].slot?w=k:a.w(`Layer with id "${h}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(w,0,c),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(c){this._checkLoaded();const h=this._checkLayer(c);if(!h)return;h.setEventedParent(null);const b=this._order.indexOf(c);this._order.splice(b,1),delete this._layers[c],delete this._serializedLayers[c],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(h.fqid),this._changes.removeLayer(h);const _=this.getOwnLayerSourceCache(h);if(_&&_.castsShadows){let w=!1;for(const k in this._layers)if(this._layers[k].source===h.source&&this._layers[k].canCastShadows()){w=!0;break}_.castsShadows=w}h.onRemove&&h.onRemove(this.map),this.mergeLayers()}getOwnLayer(c){return this._layers[c]}hasLayer(c){return c in this._mergedLayers}hasLayerType(c){for(const h in this._layers)if(this._layers[h].type===c)return!0;return!1}setLayerZoomRange(c,h,b){this._checkLoaded();const _=this._checkLayer(c);_&&(_.minzoom===h&&_.maxzoom===b||(h!=null&&(_.minzoom=h),b!=null&&(_.maxzoom=b),this._updateLayer(_)))}setSlot(c,h){this._checkLoaded();const b=this._checkLayer(c);b&&b.slot!==h&&(b.slot=h,this._updateLayer(b))}setFilter(c,h,b={}){this._checkLoaded();const _=this._checkLayer(c);if(_&&!E(_.filter,h))return h==null?(_.filter=void 0,void this._updateLayer(_)):void(this._validate(at,`layers.${_.id}.filter`,h,{layerType:_.type},b)||(_.filter=a.c1(h),this._updateLayer(_)))}getFilter(c){const h=this._checkLayer(c);if(h)return a.c1(h.filter)}setLayoutProperty(c,h,b,_={}){this._checkLoaded();const w=this._checkLayer(c);if(w&&!E(w.getLayoutProperty(h),b)){if(b!=null&&(!_||_.validate!==!1)&&Gl(w,it.call(Mr,{key:`layers.${c}.layout.${h}`,layerType:w.type,objectKey:h,value:b,styleSpec:a.D,style:{glyphs:!0,sprite:!0}})))return;w.setLayoutProperty(h,b),w.isConfigDependent&&this._configDependentLayers.add(w.fqid),this._updateLayer(w)}}getLayoutProperty(c,h){const b=this._checkLayer(c);if(b)return b.getLayoutProperty(h)}setPaintProperty(c,h,b,_={}){this._checkLoaded();const w=this._checkLayer(c);if(!w||E(w.getPaintProperty(h),b)||b!=null&&(!_||_.validate!==!1)&&Gl(w,ft.call(Mr,{key:`layers.${c}.paint.${h}`,layerType:w.type,objectKey:h,value:b,styleSpec:a.D})))return;const k=w.setPaintProperty(h,b);w.isConfigDependent&&this._configDependentLayers.add(w.fqid),k&&this._updateLayer(w),this._changes.updatePaintProperties(w)}getPaintProperty(c,h){const b=this._checkLayer(c);if(b)return b.getPaintProperty(h)}setFeatureState(c,h){this._checkLoaded();const b=c.source,_=c.sourceLayer,w=this._checkSource(b);if(!w)return;const k=w.type;if(k==="geojson"&&_)return void this.fire(new a.a(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(k==="vector"&&!_)return void this.fire(new a.a(new Error("The sourceLayer parameter must be provided for vector source types.")));c.id===void 0&&this.fire(new a.a(new Error("The feature id parameter must be provided.")));const D=this.getOwnSourceCaches(b);for(const L of D)L.setFeatureState(_,c.id,h)}removeFeatureState(c,h){this._checkLoaded();const b=c.source,_=this._checkSource(b);if(!_)return;const w=_.type,k=w==="vector"?c.sourceLayer:void 0;if(w==="vector"&&!k)return void this.fire(new a.a(new Error("The sourceLayer parameter must be provided for vector source types.")));if(h&&typeof c.id!="string"&&typeof c.id!="number")return void this.fire(new a.a(new Error("A feature id is required to remove its specific state property.")));const D=this.getOwnSourceCaches(b);for(const L of D)L.removeFeatureState(k,c.id,h)}getFeatureState(c){this._checkLoaded();const h=c.source,b=c.sourceLayer,_=this._checkSource(h);if(_){if(_.type!=="vector"||b)return c.id===void 0&&this.fire(new a.a(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(h)[0].getFeatureState(b,c.id);this.fire(new a.a(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(c){return this.stylesheet.transition=a.e({},this.stylesheet.transition,c),this.transition=this.stylesheet.transition,this}getTransition(){return a.e({},this.stylesheet.transition)}serialize(){this._checkLoaded();const c=this.getTerrain(),h=c&&this.terrain&&this.terrain.scope===this.scope?c:this.stylesheet.terrain;return a.c7({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:h,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},b=>b!==void 0)}_updateLayer(c){this._changes.updateLayer(c);const h=this.getLayerSourceCache(c),b=a.ag(c.source,c.scope),_=this._changes.getUpdatedSourceCaches();c.source&&!_[b]&&h&&h.getSource().type!=="raster"&&(this._changes.updateSourceCache(b,"reload"),h.pause()),c.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(c){const h=D=>this._mergedLayers[D].type==="fill-extrusion"||this._mergedLayers[D].type==="model",b=this.order,_={},w=[];for(let D=b.length-1;D>=0;D--){const L=b[D];if(h(L)){_[L]=D;for(const B of c){const U=B[L];if(U)for(const W of U)w.push(W)}}}w.sort((D,L)=>L.intersectionZ-D.intersectionZ);const k=[];for(let D=b.length-1;D>=0;D--){const L=b[D];if(h(L))for(let B=w.length-1;B>=0;B--){const U=w[B].feature;if(_[U.layer.id]<D)break;k.push(U),w.pop()}else for(const B of c){const U=B[L];if(U)for(const W of U)k.push(W.feature)}}return k}queryRenderedFeatures(c,h,b){h&&h.filter&&this._validate(at,"queryRenderedFeatures.filter",h.filter,null,h),h.scope=this.scope,h.availableImages=this._availableImages,h.serializedLayers=this._serializedLayers;const _={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new a.a(new Error("parameters.layers must be an Array."))),[];for(const B of h.layers){const U=this._mergedLayers[B];if(!U)return this.fire(new a.a(new Error(`The layer '${B}' does not exist in the map's style and cannot be queried for features.`))),[];_[U.source]=!0}}const w=[],k=h.serializedLayers||{},D=h&&h.layers?h.layers.some(B=>{const U=this.getLayer(B);return U&&U.is3D()}):this.has3DLayers(),L=sn.createFromScreenPoints(c,b);for(const B in this._mergedSourceCaches){const U=this._mergedSourceCaches[B].getSource();if(!U||U.scope!==h.scope)continue;const W=this._mergedSourceCaches[B].getSource().id;h.layers&&!_[W]||w.push(mf(this._mergedSourceCaches[B],this._mergedLayers,k,L,h,b,D,!!this.map._showQueryGeometry))}return this.placement&&w.push(function(B,U,W,J,ee,ce,se){const de={},oe=ce.queryRenderedSymbols(J),fe=[];for(const Te of Object.keys(oe).map(Number))fe.push(se[Te]);fe.sort(Ic);for(const Te of fe){const be=Te.featureIndex.lookupSymbolFeatures(oe[Te.bucketInstanceId],U,Te.bucketIndex,Te.sourceLayerIndex,ee.filter,ee.layers,ee.availableImages,B);for(const Ee in be){const he=de[Ee]=de[Ee]||[],Ce=be[Ee];Ce.sort((Ne,Fe)=>{const G=Te.featureSortOrder;if(G){const R=G.indexOf(Ne.featureIndex);return G.indexOf(Fe.featureIndex)-R}return Fe.featureIndex-Ne.featureIndex});for(const Ne of Ce)he.push(Ne)}}for(const Te in de)de[Te].forEach(be=>{const Ee=be.feature,he=W(B[Te]);if(!he)return;const Ce=he.getFeatureState(Ee.layer["source-layer"],Ee.id);Ee.source=Ee.layer.source,Ee.layer["source-layer"]&&(Ee.sourceLayer=Ee.layer["source-layer"]),Ee.state=Ce});return de}(this._mergedLayers,k,this.getLayerSourceCache.bind(this),L.screenGeometry,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(c,h){h&&h.filter&&this._validate(at,"querySourceFeatures.filter",h.filter,null,h);const b=this.getOwnSourceCaches(c);let _=[];for(const w of b)_=_.concat(Is(w,h));return _}addSourceType(c,h,b){return ps.getSourceType(c)?b(new Error(`A source type called "${c}" already exists.`)):(ps.setSourceType(c,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:c,url:h.workerSourceURL},b):b(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(c,h,b={}){this._checkLoaded();const _=this.light.getLight();let w=!1;for(const D in c)if(!E(c[D],_[D])){w=!0;break}if(!w)return;const k=this._getTransitionParameters();this.light.setLight(c,h,b),this.light.updateTransitions(k)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(c,h=1){if(this._checkLoaded(),!c)return this.terrainSetForDrapingOnly()&&h!==0||delete this.terrain,c===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let b=c;const _=c.source==null;if(h===1){if(typeof b.source=="object"){const D="terrain-dem-src";this.addSource(D,b.source),b=a.c1(b),b=a.e(b,{source:D})}const w=a.e({},b),k={};if(this.terrain&&_){w.source=this.terrain.get().source;const D=this.terrain?this.getFragmentStyle(this.terrain.scope):null;D&&(k.style=D.serialize())}if(this._validate(pe,"terrain",w,k))return}if(!this.terrain||this.terrain.scope!==this.scope&&!_||this.terrain&&h!==this.terrain.drapeRenderMode){if(!b)return;this._createTerrain(b,h),this.fire(new a.b("data",{dataType:"style"}))}else{const w=this.terrain,k=w.get();for(const D of Object.keys(a.D.terrain))!b.hasOwnProperty(D)&&a.D.terrain[D].default&&(b[D]=a.D.terrain[D].default);for(const D in c)if(!E(c[D],k[D])){w.set(c,this.options),this.stylesheet.terrain=c;const L=this._getTransitionParameters({duration:0});w.updateTransitions(L),this.fire(new a.b("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(c){const h=this.fog=new Kt(c,this.map.transform,this.scope,this.options);this.stylesheet.fog=h.get();const b=this._getTransitionParameters({duration:0});h.updateTransitions(b)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const c of this.map._markers)c._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(c){if(this._checkLoaded(),!c)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const h=this.fog;if(!E(h.get(),c)){h.set(c,this.options),this.stylesheet.fog=h.get();const b=this._getTransitionParameters({duration:0});h.updateTransitions(b)}}else this._createFog(c);this._markersNeedUpdate=!0}_getTransitionParameters(c){return{now:a.f.now(),transition:a.e(this.transition,c)}}updateDrapeFirstLayers(){if(!this.terrain)return;const c=[],h=[];for(const b in this._mergedLayers)this.isLayerDraped(this._mergedLayers[b])?c.push(b):h.push(b);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...c),this._drapedFirstOrder.push(...h)}_createTerrain(c,h){const b=this.terrain=new Fr(c,h,this.scope,this.options);h===1&&(this.stylesheet.terrain=c),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const _=this._getTransitionParameters({duration:0});b.updateTransitions(_)}_force3DLayerUpdate(){for(const c in this._layers){const h=this._layers[c];h.type==="fill-extrusion"&&this._updateLayer(h)}}_forceSymbolLayerUpdate(){for(const c in this._layers){const h=this._layers[c];h.type==="symbol"&&this._updateLayer(h)}}_validate(c,h,b,_,w={}){if(w&&w.validate===!1)return!1;const k=a.e({},this.serialize());return Gl(this,c.call(Mr,a.e({key:h,style:k,value:b,styleSpec:a.D},_)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.c8.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._mergedLayers)this._mergedLayers[c].setEventedParent(null);for(const c in this._mergedSourceCaches)this._mergedSourceCaches[c].clearTiles(),this._mergedSourceCaches[c].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(c){const h=this.getSourceCaches(c);for(const b of h)b.clearTiles()}clearSources(){for(const c in this._mergedSourceCaches)this._mergedSourceCaches[c].clearTiles()}reloadSource(c){const h=this.getSourceCaches(c);for(const b of h)b.resume(),b.reload()}reloadSources(){for(const c of this.getSources())c.reload&&c.reload()}updateSources(c){let h;this.directionalLight&&(h=Ef(this.directionalLight));for(const b in this._mergedSourceCaches)this._mergedSourceCaches[b].update(c,void 0,void 0,h)}_generateCollisionBoxes(){for(const c in this._sourceCaches){const h=this._sourceCaches[c];h.resume(),h.reload()}}_updatePlacement(c,h,b,_,w=!1){let k=!1,D=!1;const L={},B={};for(const U of this._mergedOrder){const W=this._mergedLayers[U];if(W.type!=="symbol")continue;const J=a.ag(W.source,W.scope);let ee=L[J];if(!ee){const se=this.getLayerSourceCache(W);if(!se)continue;const de=se.getRenderableIds(!0).map(oe=>se.getTileByID(oe));B[J]=de.slice(),ee=L[J]=de.sort((oe,fe)=>fe.tileID.overscaledZ-oe.tileID.overscaledZ||(oe.tileID.isLessThan(fe.tileID)?-1:1))}const ce=this.crossTileSymbolIndex.addLayer(W,ee,c.center.lng,c.projection);k=k||ce}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),w=w||this._layerOrderChanged||b===0,this._layerOrderChanged&&this.fire(new a.b("neworder")),(w||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.f.now(),c.zoom))&&(this.pauseablePlacement=new _f(c,this._mergedOrder,w,h,b,_,this.placement,this.fog&&c.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,L,B),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.f.now()),D=!0),k&&this.pauseablePlacement.placement.setStale()),D||k){this._buildingIndex.onNewFrame(c.zoom);for(const U of this._mergedOrder){const W=this._mergedLayers[U];W.type==="symbol"&&this.placement.updateLayerOpacities(W,L[a.ag(W.source,W.scope)])}}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.f.now())}_releaseSymbolFadeTiles(){for(const c in this._sourceCaches)this._sourceCaches[c].releaseSymbolFadeTiles()}addImport(c,h){this._checkLoaded();const b=this.stylesheet.imports=this.stylesheet.imports||[];if(b.findIndex(({id:w})=>w===c.id)!==-1)return this.fire(new a.a(new Error(`Import with id '${c.id}' already exists in the map's style.`)));if(!h)return b.push(c),this._loadImports([c],!0),this;const _=b.findIndex(({id:w})=>w===h);return _===-1?this.fire(new a.a(new Error(`Import with id "${h}" does not exist on this map.`))):(this.stylesheet.imports=b.slice(0,_).concat(c).concat(b.slice(_)),this._loadImports([c],!0,h),this)}updateImport(c,h){this._checkLoaded();const b=this.stylesheet.imports||[],_=this.getImportIndex(c);return _===-1?this:typeof h=="string"?(this.setImportUrl(c,h),this):(h.url&&h.url!==b[_].url&&this.setImportUrl(c,h.url),E(h.config,b[_].config)||this.setImportConfig(c,h.config),E(h.data,b[_].data)||this.setImportData(c,h.data),this)}moveImport(c,h){this._checkLoaded();let b=this.stylesheet.imports||[];const _=this.getImportIndex(c);if(_===-1)return this;const w=this.getImportIndex(h);if(w===-1)return this;const k=b[_],D=this.fragments[_];return b=b.filter(({id:L})=>L!==c),this.fragments=this.fragments.filter(({id:L})=>L!==c),this.stylesheet.imports=b.slice(0,w).concat(k).concat(b.slice(w)),this.fragments=this.fragments.slice(0,w).concat(D).concat(this.fragments.slice(w)),this.mergeLayers(),this}setImportUrl(c,h){this._checkLoaded();const b=this.stylesheet.imports||[],_=this.getImportIndex(c);if(_===-1)return this;b[_].url=h;const w=this.fragments[_];return w.style=this._createFragmentStyle(b[_]),w.style.on("style.import.load",()=>this.mergeAll()),w.style.loadURL(h),this}setImportData(c,h){this._checkLoaded();const b=this.getImportIndex(c),_=this.stylesheet.imports||[];return b===-1?this:h?(this.fragments[b].style.setState(h),this._reloadImports(),this):(delete _[b].data,this.setImportUrl(c,_[b].url))}setImportConfig(c,h){this._checkLoaded();const b=this.getImportIndex(c),_=this.stylesheet.imports||[];if(b===-1)return this;h?_[b].config=h:delete _[b].config;const w=this.fragments[b],k=w.style.stylesheet&&w.style.stylesheet.schema;return w.config=h,w.style.setConfig(h,k),this.updateConfigDependencies(),this}removeImport(c){this._checkLoaded();const h=this.stylesheet.imports||[],b=this.getImportIndex(c);return b===-1||(h.splice(b,1),this.fragments[b].style._remove(),this.fragments.splice(b,1),this._reloadImports()),this}getImportIndex(c){const h=(this.stylesheet.imports||[]).findIndex(b=>b.id===c);return h===-1&&this.fire(new a.a(new Error(`Import '${c}' does not exist in the map's style and cannot be updated.`))),h}getLayer(c){return this._mergedLayers[c]}getSources(){const c=[];for(const h in this._mergedOtherSourceCaches){const b=this._mergedOtherSourceCaches[h];b&&c.push(b.getSource())}return c}getSource(c,h){const b=this.getSourceCache(c,h);return b&&b.getSource()}getLayerSource(c){const h=this.getLayerSourceCache(c);return h&&h.getSource()}getSourceCache(c,h){const b=a.ag(c,h);return this._mergedOtherSourceCaches[b]}getLayerSourceCache(c){const h=a.ag(c.source,c.scope);return c.type==="symbol"?this._mergedSymbolSourceCaches[h]:this._mergedOtherSourceCaches[h]}getSourceCaches(c){const h=[];return this._mergedOtherSourceCaches[c]&&h.push(this._mergedOtherSourceCaches[c]),this._mergedSymbolSourceCaches[c]&&h.push(this._mergedSymbolSourceCaches[c]),h}updateSourceCaches(){const c=this._changes.getUpdatedSourceCaches();for(const h in c){const b=c[h];b==="reload"?this.reloadSource(h):b==="clear"&&this.clearSource(h)}}updateLayers(c){const h=this._changes.getUpdatedPaintProperties();for(const b of h){const _=this.getLayer(b);_&&_.updateTransitions(c)}}getImages(c,h,b){this.imageManager.getImages(h.icons,h.scope,b),this._updateTilesForChangedImages();const _=w=>{w&&w.setDependencies(h.tileID.key,h.type,h.icons)};_(this._otherSourceCaches[h.source]),_(this._symbolSourceCaches[h.source])}getGlyphs(c,h,b){this.glyphManager.getGlyphs(h.stacks,h.scope,b)}getResource(c,h,b){return a.c9(h,b)}getOwnSourceCache(c){return this._otherSourceCaches[c]}getOwnLayerSourceCache(c){return c.type==="symbol"?this._symbolSourceCaches[c.source]:this._otherSourceCaches[c.source]}getOwnSourceCaches(c){const h=[];return this._otherSourceCaches[c]&&h.push(this._otherSourceCaches[c]),this._symbolSourceCaches[c]&&h.push(this._symbolSourceCaches[c]),h}_isSourceCacheLoaded(c){const h=this.getOwnSourceCaches(c);return h.length===0?(this.fire(new a.a(new Error(`There is no source with ID '${c}'`))),!1):h.every(b=>b.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(c=>{c.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}ps.getSourceType=function(g){return Rs[g]},ps.setSourceType=function(g,c){Rs[g]=c},ps.registerForPluginStateChange=a.bV;var Cf=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,kf=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec2 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color) {
#ifdef INDICATOR_CUTOUT
float holeMinOpacity=u_indicator_cutout_params.x;float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,vec2 pos,vec2 lod_coord) {vec2 size=vec2(textureSize(image,0));vec2 dx=dFdx(lod_coord.xy*size);vec2 dy=dFdy(lod_coord.xy*size);float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}`,Af=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,Fu="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Mf=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture(u_depth,uv-df.xz)),unpack_depth(texture(u_depth,uv+df.xz)),unpack_depth(texture(u_depth,uv-df.zy)),unpack_depth(texture(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,Df=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,kv=`highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {
#ifdef FOG_DITHERING
vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);
#else
return color;
#endif
}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Qa=`#ifdef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,ql=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform vec2 u_velocity_res;uniform float u_max_speed;const vec2 INVALID_VELOCITY=vec2(-1);uniform vec2 u_texture_offset;uniform float u_data_offset;uniform vec4 u_data_scale;vec2 lookup_velocity(vec2 uv) {uv=u_texture_offset.x+u_texture_offset.y*uv;vec2 fxy;ivec4 c=_raTexLinearCoord(uv,u_velocity_res,fxy);vec4 tl=texelFetch(u_velocity,c.yz,0);vec4 tr=texelFetch(u_velocity,c.xz,0);vec4 bl=texelFetch(u_velocity,c.yw,0);vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NODATA) {return INVALID_VELOCITY;}if (tr==NODATA) {return INVALID_VELOCITY;}if (bl==NODATA) {return INVALID_VELOCITY;}if (br==NODATA) {return INVALID_VELOCITY;}vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);
#ifdef DATA_FORMAT_UINT32
vec2 velocity=vec2(u_data_offset+dot(t,u_data_scale),0);return velocity;
#else
vec2 velocity=vec2(u_data_offset+dot(t.rg,u_data_scale.yx),-(u_data_offset+dot(t.ba,u_data_scale.yx)));
#endif
return velocity/max(u_max_speed,length(velocity));}
#endif`,Nm=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,ju=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef NATIVE
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const $u=[];Zl(Cf,$u),Zl(Af,$u),Zl(kf,$u);const Ea={"_prelude_fog.vertex.glsl":Df,"_prelude_terrain.vertex.glsl":Mf,"_prelude_shadow.vertex.glsl":Nm,"_prelude_fog.fragment.glsl":kv,"_prelude_shadow.fragment.glsl":ju,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":Qa,"_prelude_raster_particle.glsl":ql},Uu={};Tr("",Mf),Tr(kv,Df),Tr(ju,Nm),Tr(Qa,""),Tr(ql,"");const zm=Tr(kf,Af),Rf=Cf;var Bm={background:Tr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Tr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Tr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Tr("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Tr(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Tr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Tr("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in float a_size_scale;in vec2 a_padding;in float a_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(a_z_offset+elevation(a_anchor_pos)),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Tr("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Tr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Tr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Tr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Tr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Tr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Tr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
uniform float u_emissive_strength;in float v_height;void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,u_emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=max(0.01,cutoff_opacity(u_cutoff_params,ground.z));if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff < 0.01 && centroid_pos.x !=0.0));gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);v_flat=vec4(linearProduct(color.rgb,vec3(calculate_NdotL(normal))),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:Tr(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_vertical_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base);pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:Tr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
out vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:Tr(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0)).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:Tr(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(1.0,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:Tr(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Tr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Tr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=(border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {    
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color.rgb=mix(border_color.rgb*border_color.a*trimmed,out_color.rgb,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Tr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 v_uv;
#endif
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float pattern_x=v_linesofar/pattern_size.x*aspect;float x=mod(pattern_x,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {color=vec4(0,0,0,0);}}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_ground(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 a_packed;
#endif
in float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec4 v_uv;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
float a_uv_x=a_packed[0];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Tr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:Tr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;vec2 uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
vec2 uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:Tr("precision highp float;uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`precision highp float;
#include "_prelude_raster_array.glsl"
#include "_prelude_raster_particle.glsl"
in vec3 a_pos;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {vec2 pos=a_pos.xy+u_tile_offset;vec2 tex_coords=fract(pos);gl_PointSize=1.0;vec2 velocity=lookup_velocity(tex_coords);if (velocity==INVALID_VELOCITY) {v_particle_speed=0.0;gl_Position=vec4(2.0,2.0,2.0,1.0);} else {v_particle_speed=length(velocity);gl_Position=vec4(2.0*pos-vec2(1.0),0.0,1.0);}}`),rasterParticleTexture:Tr("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {v_tex_pos=0.5*a_pos+vec2(0.5);gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:Tr("void main() {}",`#include "_prelude_raster_array.glsl"
#include "_prelude_raster_particle.glsl"
in vec3 a_pos;uniform float u_speed_factor;uniform float u_lifetime_delta;uniform float u_rand_seed;out vec3 v_new_particle;const vec3 rand_constants=vec3(12.9898,78.233,4375.85453);float rand(const vec2 co) {float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {float lifetime=a_pos.z;vec2 pos=a_pos.xy;vec2 uv=clamp(pos,vec2(0.0),vec2(1.0));vec2 velocity=lookup_velocity(uv);float next_lifetime=lifetime-u_lifetime_delta;float t=step(0.0,next_lifetime);
#ifdef DATA_FORMAT_UINT32
vec2 dp=vec2(0);
#else
vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;
#endif
vec2 seed=pos*u_rand_seed;vec2 next_pos=pos+dp;vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));v_new_particle=vec3(
vec2(mix(random_pos,next_pos,t)),mix(1.0,next_lifetime,t)
);}`),symbolIcon:Tr(`#include "_prelude_lighting.glsl"
uniform sampler2D u_texture;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
in float v_fade_opacity;in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
uniform mediump float u_icon_saturation;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float emissive_strength
lowp float alpha=opacity*v_fade_opacity;vec4 out_color;
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b)*alpha;
#else
out_color=texture(u_texture,v_tex_a)*alpha;
#endif
#ifdef SATURATION
vec3 luma=vec3(dot(out_color.rgb,vec3(0.2126,0.7152,0.0722)));out_color.rgb=mix(luma,out_color.rgb,u_icon_saturation);
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
v_tex_a=a_tex/u_texsize;
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
v_fade_opacity=out_fade_opacity;}`),symbolSDF:Tr(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;in float v_draw_halo;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out float v_draw_halo;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,out_fade_opacity);}`),symbolTextAndIcon:Tr(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_halo;in float v_draw_halo;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out float v_draw_halo;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,out_fade_opacity,is_sdf);}`),terrainRaster:Tr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:Tr("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:Tr(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Fu),skyboxGradient:Tr(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Fu),skyboxCapture:Tr(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Tr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Tr(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;
#ifndef NATIVE
c=dither(c,gl_FragCoord.xy+u_temporal_offset);
#endif
glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:Tr(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform sampler2D u_depthTexture;uniform vec2 u_inv_depth_size;bool isOccluded() {vec2 coord=gl_FragCoord.xy*u_inv_depth_size;highp float depth=unpack_depth(texture(u_depthTexture,coord));return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
return vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);color=mix(color,v_color_mix.rgb,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=u_matrix*pos;pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 shadow_pos=local_pos;
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normalize(normal_3f));shadow_pos+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shadow_pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(shadow_pos,1);v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:Tr(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=u_matrix*pos;
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:Tr(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`)};function Zl(g,c){const h=g.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let b of h)if(b=b.trim(),b[0]==="#"&&b.includes("if")&&!b.includes("endif")){b=b.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const _=b.split(" ");for(const w of _)c.includes(w)||c.push(w)}}function Tr(g,c){const h=/#include\s+"([^"]+)"/g,b=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let _=c.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);_&&(_=_.map(B=>{const U=B.split(" ");return U[U.length-1]}),_=[...new Set(_)]);const w={},k=[],D=[];if(g=g.replace(h,(B,U)=>(D.push(U),"")),(c=c.replace(h,(B,U)=>(k.push(U),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let L=[...$u];Zl(g,L),Zl(c,L);for(const B of[...k,...D])Ea[B]||console.error(`Undefined include: ${B}`),Uu[B]||(Uu[B]=[],Zl(Ea[B],Uu[B])),L=[...L,...Uu[B]];return{fragmentSource:g=g.replace(b,(B,U,W,J,ee)=>(w[ee]=!0,U==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
in ${W} ${J} ${ee};
#else
uniform ${W} ${J} u_${ee};
#endif
`:U==="initialize"?`
#ifdef HAS_UNIFORM_u_${ee}
    ${W} ${J} ${ee} = u_${ee};
#endif
`:U==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ee}
    in ${W} ${J} ${ee};
#endif
`:U==="initialize-attribute"?"":void 0)),vertexSource:c=c.replace(b,(B,U,W,J,ee)=>{const ce=J==="float"?"vec2":J,se=ee.match(/color/)?"color":ce;return U==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${ee}
in ${W} ${J} a_${ee};
#endif
`:w[ee]?U==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
uniform lowp float u_${ee}_t;
in ${W} ${ce} a_${ee};
out ${W} ${J} ${ee};
#else
uniform ${W} ${J} u_${ee};
#endif
`:U==="initialize"?se==="vec4"?`
#ifndef HAS_UNIFORM_u_${ee}
    ${ee} = a_${ee};
#else
    ${W} ${J} ${ee} = u_${ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ee}
    ${ee} = unpack_mix_${se}(a_${ee}, u_${ee}_t);
#else
    ${W} ${J} ${ee} = u_${ee};
#endif
`:U==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ee}
    in ${W} ${J} a_${ee};
    out ${W} ${J} ${ee};
#endif
`:U==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ee}
    ${ee} = a_${ee};
#endif
`:void 0:U==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
uniform lowp float u_${ee}_t;
in ${W} ${ce} a_${ee};
#else
uniform ${W} ${J} u_${ee};
#endif
`:U==="define-instanced"?se==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${ee}0;
in vec4 a_${ee}1;
in vec4 a_${ee}2;
in vec4 a_${ee}3;
#else
uniform ${W} ${J} u_${ee};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${W} ${ce} a_${ee};
#else
uniform ${W} ${J} u_${ee};
#endif
`:U==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${ee}
    ${W} ${J} ${ee} = a_${ee};
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_${ee}
    ${W} ${J} ${ee} = a_${ee};
#else
    ${W} ${J} ${ee} = u_${ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ee}
    ${W} ${J} ${ee} = unpack_mix_${se}(a_${ee}, u_${ee}_t);
#else
    ${W} ${J} ${ee} = u_${ee};
#endif
`}),staticAttributes:_,usedDefines:L,vertexIncludes:k,fragmentIncludes:D}}class If{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(c,h,b,_,w,k,D,L){this.context=c;let B=this.boundPaintVertexBuffers.length!==_.length;for(let W=0;!B&&W<_.length;W++)this.boundPaintVertexBuffers[W]!==_[W]&&(B=!0);let U=this.boundDynamicVertexBuffers.length!==D.length;for(let W=0;!U&&W<D.length;W++)this.boundDynamicVertexBuffers[W]!==D[W]&&(U=!0);if(!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==b||B||U||this.boundIndexBuffer!==w||this.boundVertexOffset!==k)this.freshBind(h,b,_,w,k,D,L);else{c.bindVertexArrayOES.set(this.vao);for(const W of D)W&&(W.bind(),L&&W.instanceCount&&W.setVertexAttribDivisor(c.gl,h,L));w&&w.dynamicDraw&&w.bind()}}freshBind(c,h,b,_,w,k,D){const L=c.numAttributes,B=this.context,U=B.gl;this.vao&&this.destroy(),this.vao=B.gl.createVertexArray(),B.bindVertexArrayOES.set(this.vao),this.boundProgram=c,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=_,this.boundVertexOffset=w,this.boundDynamicVertexBuffers=k,h.enableAttributes(U,c),h.bind(),h.setVertexAttribPointers(U,c,w);for(const W of b)W.enableAttributes(U,c),W.bind(),W.setVertexAttribPointers(U,c,w);for(const W of k)W&&(W.enableAttributes(U,c),W.bind(),W.setVertexAttribPointers(U,c,w),D&&W.instanceCount&&W.setVertexAttribDivisor(U,c,D));_&&_.bind(),B.currentNumAttributes=L}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function Av(g,c){const h=Math.pow(2,c.canonical.z),b=c.canonical.y;return[new a.L(0,b/h).toLngLat().lat,new a.L(0,(b+1)/h).toLngLat().lat]}function il(g,c,h,b,_,w,k){const D=g.context,L=D.gl,B=h.hillshadeFBO;if(!B)return;g.prepareDrawTile();const U=g.isTileAffectedByFog(c),W=g.getOrCreateProgram("hillshade",{overrideFog:U});D.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,B.colorAttachment.get());const J=((de,oe,fe,Te)=>{const be=fe.paint.get("hillshade-shadow-color"),Ee=fe.paint.get("hillshade-highlight-color"),he=fe.paint.get("hillshade-accent-color"),Ce=fe.paint.get("hillshade-emissive-strength");let Ne=a.bj(fe.paint.get("hillshade-illumination-direction"));if(fe.paint.get("hillshade-illumination-anchor")==="viewport")Ne-=de.transform.angle;else if(de.style&&de.style.enable3dLights()&&de.style.directionalLight){const G=de.style.directionalLight.properties.get("direction"),R=a.bQ(G.x,G.y,G.z);Ne=a.bj(R[1])}const Fe=!de.options.moving;return{u_matrix:Te||de.transform.calculateProjMatrix(oe.tileID.toUnwrapped(),Fe),u_image:0,u_latrange:Av(0,oe.tileID),u_light:[fe.paint.get("hillshade-exaggeration"),Ne],u_shadow:be,u_highlight:Ee,u_emissive_strength:Ce,u_accent:he}})(g,h,b,g.terrain?c.projMatrix:null);g.uploadCommonUniforms(D,W,c.toUnwrapped());const{tileBoundsBuffer:ee,tileBoundsIndexBuffer:ce,tileBoundsSegments:se}=g.getTileBoundsBuffers(h);W.draw(g,L.TRIANGLES,_,w,k,Rn.disabled,J,b.id,ee,ce,se)}function U0(g,c,h){if(!c.needsDEMTextureUpload)return;const b=g.context,_=b.gl;b.pixelStoreUnpackPremultiplyAlpha.set(!1),c.demTexture=c.demTexture||g.getTileTexture(h.stride);const w=h.getPixels();c.demTexture?c.demTexture.update(w,{premultiply:!1}):c.demTexture=new a.T(b,w,_.R32F,{premultiply:!1}),c.needsDEMTextureUpload=!1}function Fm(g,c,h){const b=g.context,_=b.gl;if(!c.dem)return;const w=c.dem;if(b.activeTexture.set(_.TEXTURE1),U0(g,c,w),!c.demTexture)return;c.demTexture.bind(_.NEAREST,_.CLAMP_TO_EDGE);const k=w.dim;b.activeTexture.set(_.TEXTURE0);let D=c.hillshadeFBO;if(!D){const J=new a.T(b,{width:k,height:k,data:null},_.RGBA);J.bind(_.LINEAR,_.CLAMP_TO_EDGE),D=c.hillshadeFBO=b.createFramebuffer(k,k,!0,"renderbuffer"),D.colorAttachment.set(J.texture)}b.bindFramebuffer.set(D.framebuffer),b.viewport.set([0,0,k,k]);const{tileBoundsBuffer:L,tileBoundsIndexBuffer:B,tileBoundsSegments:U}=g.getMercatorTileBoundsBuffers(),W=[];g.linearFloatFilteringSupported()&&W.push("TERRAIN_DEM_FLOAT_FORMAT"),g.getOrCreateProgram("hillshadePrepare",{defines:W}).draw(g,_.TRIANGLES,gn.disabled,Dn.disabled,rr.unblended,Rn.disabled,((J,ee)=>{const ce=ee.stride,se=a.a6.create();return a.a6.ortho(se,0,a.V,-a.V,0,0,1),a.a6.translate(se,se,[0,-a.V,0]),{u_matrix:se,u_image:1,u_dimension:[ce,ce],u_zoom:J.overscaledZ}})(c.tileID,w),h.id,L,B,U),c.needsHillshadePrepare=!1}const V0=g=>({u_matrix:new a.bK(g),u_image0:new a.bO(g),u_skirt_height:new a.bN(g),u_ground_shadow_factor:new a.bM(g)}),Pf=(g,c,h)=>({u_matrix:g,u_image0:0,u_skirt_height:c,u_ground_shadow_factor:h}),H0=(g,c,h,b,_,w,k,D,L,B,U,W,J,ee,ce,se)=>({u_proj_matrix:Float32Array.from(g),u_globe_matrix:c,u_normalize_matrix:Float32Array.from(b),u_merc_matrix:h,u_zoom_transition:_,u_merc_center:w,u_image0:0,u_frustum_tl:k,u_frustum_tr:D,u_frustum_br:L,u_frustum_bl:B,u_globe_pos:U,u_globe_radius:W,u_viewport:J,u_grid_matrix:se?Float32Array.from(se):new Float32Array(9),u_skirt_height:ee,u_far_z_cutoff:ce});function ms(g,c){return g!=null&&c!=null&&!(!g.hasData()||!c.hasData())&&g.demTexture!=null&&c.demTexture!=null&&g.tileID.key!==c.tileID.key}const Vu=new class{constructor(){this.operations={}}newMorphing(g,c,h,b,_){if(g in this.operations){const w=this.operations[g];w.to.tileID.key!==h.tileID.key&&(w.queued=h)}else this.operations[g]={startTime:b,phase:0,duration:_,from:c,to:h,queued:null}}getMorphValuesForProxy(g){if(!(g in this.operations))return null;const c=this.operations[g];return{from:c.from,to:c.to,phase:c.phase}}update(g){for(const c in this.operations){const h=this.operations[c];for(h.phase=(g-h.startTime)/h.duration;h.phase>=1||!this._validOp(h);)if(!this._nextOp(h,g)){delete this.operations[c];break}}}_nextOp(g,c){return!!g.queued&&(g.from=g.to,g.to=g.queued,g.queued=null,g.phase=0,g.startTime=c,!0)}_validOp(g){return g.from.hasData()&&g.to.hasData()}},Hu={0:null,1:"TERRAIN_VERTEX_MORPHING"};function jm(g,c,h){if(c===0)return 0;const b=c<1&&h===514?.25/c:1;return 6*Math.pow(1.5,22-g)*Math.max(c,1)*b}function Wu(g,c){const h=1<<g.z;return!c&&(g.x===0||g.x===h-1)||g.y===0||g.y===h-1}const $m=g=>({u_matrix:g});function Um(g,c,h,b,_){if(_>0){const w=a.f.now(),k=(w-g.timeAdded)/_,D=c?(w-c.timeAdded)/_:-1,L=h.getSource(),B=b.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),U=!c||Math.abs(c.tileID.overscaledZ-B)>Math.abs(g.tileID.overscaledZ-B),W=U&&g.refreshedUponExpiration?1:a.aa(U?k:1-D,0,1);return g.refreshedUponExpiration&&k>=1&&(g.refreshedUponExpiration=!1),c?{opacity:1,mix:1-W}:{opacity:W,mix:0}}return{opacity:1,mix:0}}class Mv extends Ka{constructor(c){const h={type:"raster-dem",maxzoom:c.transform.maxZoom},b=new a.bW(a.bX(),null),_=Ko("mock-dem",h,b,c.style);super("mock-dem",_,!1),_.setEventedParent(this),this._sourceLoaded=!0}_loadTile(c,h){c.state="loaded",h(null)}}class Dv extends Ka{constructor(c){const h=Ko("proxy",{type:"geojson",maxzoom:c.transform.maxZoom},new a.bW(a.bX(),null),c.style);super("proxy",h,!1),h.setEventedParent(this),this.map=this.getSource().map=c,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(c,h,b){if(c.freezeTileCoverage)return;this.transform=c;const _=c.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((w,k)=>{if(w[k.key]="",!this._tiles[k.key]){const D=new Ds(k,this._source.tileSize*k.overscaleFactor(),c.tileZoom);D.state="loaded",this._tiles[k.key]=D}return w},{});for(const w in this._tiles)w in _||(this.freeFBO(w),this._tiles[w].unloadVectorData(),delete this._tiles[w])}freeFBO(c){const h=this.proxyCachedFBO[c];if(h!==void 0){const b=Object.values(h);this.renderCachePool.push(...b),delete this.proxyCachedFBO[c]}}deallocRenderCache(){this.renderCache.forEach(c=>c.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class W0 extends a.am{constructor(c,h,b){super(c.overscaledZ,c.wrap,c.canonical.z,c.canonical.x,c.canonical.y),this.proxyTileKey=h,this.projMatrix=b}}class Rv extends a.ck{constructor(c,h){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},c.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),c.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),c.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=c,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[b,_,w]=function(L){const B=new a.aN,U=new a.aw,W=131;B.reserve(17161),U.reserve(33800);const J=a.V/128,ee=a.V+J/2,ce=ee+J;for(let de=-J;de<ce;de+=J)for(let oe=-J;oe<ce;oe+=J){const fe=oe<0||oe>ee||de<0||de>ee?24575:0,Te=a.aa(Math.round(oe),0,a.V),be=a.aa(Math.round(de),0,a.V);B.emplaceBack(Te+fe,be)}const se=(de,oe)=>{const fe=oe*W+de;U.emplaceBack(fe+1,fe,fe+W),U.emplaceBack(fe+W,fe+W+1,fe+1)};for(let de=1;de<129;de++)for(let oe=1;oe<129;oe++)se(oe,de);return[0,129].forEach(de=>{for(let oe=0;oe<130;oe++)se(oe,de),se(de,oe)}),[B,U,32768]}(),k=c.context;this.gridBuffer=k.createVertexBuffer(b,a.aP.members),this.gridIndexBuffer=k.createIndexBuffer(_),this.gridSegments=a.aB.simpleSegment(0,0,b.length,_.length),this.gridNoSkirtSegments=a.aB.simpleSegment(0,0,b.length,w),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Dv(h.map),this.orthoMatrix=a.a6.create(),a.a6.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,a.V,0,a.V,0,1);const D=k.gl;this._overlapStencilMode=new Dn({func:D.GEQUAL,mask:255},0,255,D.KEEP,D.KEEP,D.REPLACE),this._previousZoom=c.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=h,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Mv(h.map),this._pendingGroundEffectLayers=[]}set style(c){c.on("data",this._onStyleDataEvent.bind(this)),this._style=c,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(c,h,b){if(c&&c.terrain){this._style!==c&&(this.style=c,this._evaluationZoom=void 0);const _=c.terrain.properties,w=c.terrain.drapeRenderMode===0,k=c.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=a.f.now();const D=c.terrain&&c.terrain.scope,L=_.get("source"),B=w?this._mockSourceCache:c.getSourceCache(L,D);if(!B)return void a.w(`Couldn't find terrain source "${L}".`);if(this.sourceCache=B,this._exaggeration=k?this.calculateExaggeration(h):_.get("exaggeration"),!h.projection.requiresDraping&&k&&this._exaggeration===0)return void this._disable();this.enabled=!0;const U=()=>{this.sourceCache.used&&a.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const W=this.getScaledDemTileSize();this.sourceCache.update(h,W,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,U(),this._initializing=!0),U(),h.updateElevation(!0,b),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(h),this._emptyDEMTextureDirty=!0,this._previousZoom=h.zoom}else this._disable()}calculateExaggeration(c){const h=this._previousCameraAltitude,b=c.getFreeCameraOptions().position.z/c.pixelsPerMeter*c.worldSize;this._previousCameraAltitude=b;const _=h!=null?b-h:Number.MAX_VALUE;if(Math.abs(_)<2)return this._exaggeration;const w=c.zoom,k=this._style.terrain;if(!this._previousUpdateTimestamp)return k.getExaggeration(w);let D=w-this._previousZoom;const L=this._previousUpdateTimestamp;let B=w;this._evaluationZoom!=null&&(B=this._evaluationZoom,Math.abs(w-B)>.5&&(D=.5*(w-B+D)),D*_<0&&(B+=D)),this._evaluationZoom=B;const U=k.getExaggeration(B),W=U===k.getExaggeration(Math.max(0,B-.1));if(W&&Math.abs(U-this._exaggeration)<.01)return U;let J=Math.min(.1,.00375*(this._updateTimestamp-L));return(W||U<.1||Math.abs(D)<1e-4)&&(J=Math.min(.2,4*J)),a.U(this._exaggeration,U,J)}resetTileLookupCache(c){this._findCoveringTileCache[c]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(c){c.coord&&c.dataType==="source"?this._clearRenderCacheForTile(c.sourceCacheId,c.coord):c.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const c in this._style._mergedSourceCaches)this._style._mergedSourceCaches[c].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(c=>c.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const c=2*this.proxySourceCache.getSource().tileSize;return[c,c]}set useVertexMorphing(c){this._useVertexMorphing=c}updateTileBinding(c){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const h=this.proxySourceCache,b=this.painter.transform;this._initializing&&(this._initializing=b._centerAltitude===0&&this.getAtPointOrZero(a.L.fromLngLat(b.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const _=this.proxyCoords=h.getIds().map(L=>{const B=h.getTileByID(L).tileID;return B.projMatrix=b.calculateProjMatrix(B.toUnwrapped()),B});(function(L,B){const U=B.transform.pointCoordinate(B.transform.getCameraPoint()),W=new a.P(U.x,U.y);L.sort((J,ee)=>{if(ee.overscaledZ-J.overscaledZ)return ee.overscaledZ-J.overscaledZ;const ce=new a.P(J.canonical.x+(1<<J.canonical.z)*J.wrap,J.canonical.y),se=new a.P(ee.canonical.x+(1<<ee.canonical.z)*ee.wrap,ee.canonical.y),de=W.mult(1<<J.canonical.z);return de.x-=.5,de.y-=.5,de.distSqr(ce)-de.distSqr(se)})})(_,this.painter);const w=this.proxyToSource||{};this.proxyToSource={},_.forEach(L=>{this.proxyToSource[L.key]={}}),this.terrainTileForTile={};const k=this._style._mergedSourceCaches;for(const L in k){const B=k[L];if(!B.used||(B!==this.sourceCache&&this.resetTileLookupCache(B.id),this._setupProxiedCoordsForOrtho(B,c[L],w),B.usedForTerrain))continue;const U=c[L];B.getSource().reparseOverscaled&&this._assignTerrainTiles(U)}this.proxiedCoords[h.id]=_.map(L=>new W0(L,L.key,this.orthoMatrix)),this._assignTerrainTiles(_),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(w),this.renderingToTexture=!1;const D={};this._visibleDemTiles=[];for(const L of this.proxyCoords){const B=this.terrainTileForTile[L.key];if(!B)continue;const U=B.tileID.key;U in D||(this._visibleDemTiles.push(B),D[U]=U)}}_assignTerrainTiles(c){this._initializing||c.forEach(h=>{if(this.terrainTileForTile[h.key])return;const b=this._findTileCoveringTileID(h,this.sourceCache);b&&(this.terrainTileForTile[h.key]=b)})}_prepareDEMTextures(){const c=this.painter.context,h=c.gl;for(const b in this.terrainTileForTile){const _=this.terrainTileForTile[b],w=_.dem;!w||_.demTexture&&!_.needsDEMTextureUpload||(c.activeTexture.set(h.TEXTURE1),U0(this.painter,_,w))}}_prepareDemTileUniforms(c,h,b,_){if(!h||h.demTexture==null)return!1;const w=c.tileID.canonical,k=Math.pow(2,h.tileID.canonical.z-w.z),D=_||"";return b[`u_dem_tl${D}`]=[w.x*k%1,w.y*k%1],b[`u_dem_scale${D}`]=k,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const c=this.painter.context,h=c.gl;if(!this._emptyDepthBufferTexture){const b=new a.h({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new a.T(c,b,h.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let c=0;const h=this._visibleDemTiles.reduce((b,_)=>{if(!_.dem)return b;const w=_.dem.tree.minimums[0];return w>0&&c++,b+w},0);return c?h/c:0}_updateEmptyDEMTexture(){const c=this.painter.context,h=c.gl;c.activeTexture.set(h.TEXTURE2);const b=this._getLoadedAreaMinimum(),[_,w]=(()=>{const D=new a.cm({width:1,height:1},new Float32Array([b]));return[h.R32F,D]})();this._emptyDEMTextureDirty=!1;let k=this._emptyDEMTexture;return k?k.update(w,{premultiply:!1}):k=this._emptyDEMTexture=new a.T(c,w,_,{premultiply:!1}),k}setupElevationDraw(c,h,b){const _=this.painter.context,w=_.gl,k={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0};k.u_exaggeration=this.exaggeration();let D=null,L=null,B=1;if(b&&b.morphing&&this._useVertexMorphing){const J=b.morphing.srcDemTile,ee=b.morphing.dstDemTile;B=b.morphing.phase,J&&ee&&(this._prepareDemTileUniforms(c,J,k,"_prev")&&(L=J),this._prepareDemTileUniforms(c,ee,k)&&(D=ee))}const U=J=>J&&J.demTexture&&this.painter.linearFloatFilteringSupported()?w.LINEAR:w.NEAREST,W=J=>{k.u_dem_size=J.size[0]===1?1:J.size[0]-2};if(L&&D)_.activeTexture.set(w.TEXTURE2),D.demTexture.bind(U(D),w.CLAMP_TO_EDGE),_.activeTexture.set(w.TEXTURE4),L.demTexture.bind(U(L),w.CLAMP_TO_EDGE),D.demTexture&&W(D.demTexture),k.u_dem_lerp=B;else{D=this.terrainTileForTile[c.tileID.key],_.activeTexture.set(w.TEXTURE2);const J=this._prepareDemTileUniforms(c,D,k)?D.demTexture:this.emptyDEMTexture;J.bind(U(D),w.CLAMP_TO_EDGE),W(J)}if(_.activeTexture.set(w.TEXTURE3),b&&b.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),this._depthFBO&&(k.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),k.u_depth_size_inv=[1,1]),b&&b.useMeterToDem&&D){const J=(1<<D.tileID.canonical.z)*a.bl(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;k.u_meter_to_dem=J}if(b&&b.labelPlaneMatrixInv&&(k.u_label_plane_matrix_inv=b.labelPlaneMatrixInv),h.setTerrainUniformValues(_,k),this.painter.transform.projection.name==="globe"){const J=this.globeUniformValues(this.painter.transform,c.tileID.canonical,b&&b.useDenormalizedUpVectorScale);h.setGlobeUniformValues(_,J)}}globeUniformValues(c,h,b){const _=c.projection;return{u_tile_tl_up:_.upVector(h,0,0),u_tile_tr_up:_.upVector(h,a.V,0),u_tile_br_up:_.upVector(h,a.V,a.V),u_tile_bl_up:_.upVector(h,0,a.V),u_tile_up_scale:b?a.cl(1):_.upVectorScale(h,c.center.lat,c.worldSize).metersToTile}}renderToBackBuffer(c){const h=this.painter,b=this.painter.context;c.length!==0&&(b.bindFramebuffer.set(null),b.viewport.set([0,0,h.width,h.height]),h.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(_,w,k,D,L){if(_.transform.projection.name==="globe")(function(B,U,W,J,ee){const ce=B.context,se=ce.gl;let de,oe;const fe=B.transform,Te=a.cd(B,ce,fe),be=(le,ge)=>{if(oe===ge)return;const Oe=[Hu[ge],"PROJECTION_GLOBE_VIEW"];Te&&Oe.push("CUSTOM_ANTIALIASING");const Se=B.isTileAffectedByFog(le);de=B.getOrCreateProgram("globeRaster",{defines:Oe,overrideFog:Se}),oe=ge},Ee=B.colorModeForRenderPass(),he=new gn(se.LEQUAL,gn.ReadWrite,B.depthRangeFor3D);Vu.update(ee);const Ce=a.ce(fe),Ne=[a.a5(fe.center.lng),a.ae(fe.center.lat)],Fe=B.globeSharedBuffers,G=[fe.width*a.f.devicePixelRatio,fe.height*a.f.devicePixelRatio],R=Float32Array.from(fe.globeMatrix),H={useDenormalizedUpVectorScale:!0};{const le=B.transform,ge=jm(le.zoom,U.exaggeration(),U.sourceCache._source.tileSize);oe=-1;const Oe=se.TRIANGLES;for(const Se of J){const Le=W.getTile(Se),ke=Dn.disabled,Ve=U.prevTerrainTileForTile[Se.key],Ye=U.terrainTileForTile[Se.key];ms(Ve,Ye)&&Vu.newMorphing(Se.key,Ve,Ye,ee,250),ce.activeTexture.set(se.TEXTURE0),Le.texture&&Le.texture.bind(se.LINEAR,se.CLAMP_TO_EDGE);const gt=Vu.getMorphValuesForProxy(Se.key),yt=gt?1:0;gt&&a.j(H,{morphing:{srcDemTile:gt.from,dstDemTile:gt.to,phase:a.cc(gt.phase)}});const vt=a.cf(Se.canonical),Wt=a.cg(vt.getCenter().lat),Vt=a.ch(Se.canonical,vt,Wt,le.worldSize/le._pixelsPerMercatorPixel),Ht=a.aT(a.ci(Se.canonical)),Zt=H0(le.expandedFarZProjMatrix,R,Ce,Ht,a.S(le.zoom),Ne,le.frustumCorners.TL,le.frustumCorners.TR,le.frustumCorners.BR,le.frustumCorners.BL,le.globeCenterInViewSpace,le.globeRadius,G,ge,le._farZ,Vt);if(be(Se,yt),de&&(U.setupElevationDraw(Le,de,H),B.uploadCommonUniforms(ce,de,Se.toUnwrapped()),Fe)){const[In,xn,on]=Fe.getGridBuffers(Wt,ge!==0);de.draw(B,Oe,he,ke,Ee,Rn.backCCW,Zt,"globe_raster",In,xn,on)}}}if(Fe&&(B.renderDefaultNorthPole||B.renderDefaultSouthPole)){const le=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Te&&le.push("CUSTOM_ANTIALIASING"),de=B.getOrCreateProgram("globeRaster",{defines:le});for(const ge of J){const{x:Oe,y:Se,z:Le}=ge.canonical,ke=Se===0,Ve=Se===(1<<Le)-1,[Ye,gt,yt,vt]=Fe.getPoleBuffers(Le,!1);if(vt&&(ke||Ve)){const Wt=W.getTile(ge);ce.activeTexture.set(se.TEXTURE0),Wt.texture&&Wt.texture.bind(se.LINEAR,se.CLAMP_TO_EDGE);let Vt=a.cj(Le,Oe,fe);const Ht=a.aT(a.ci(ge.canonical)),Zt=(In,xn)=>In.draw(B,se.TRIANGLES,he,Dn.disabled,Ee,Rn.disabled,H0(fe.expandedFarZProjMatrix,Vt,Vt,Ht,0,Ne,fe.frustumCorners.TL,fe.frustumCorners.TR,fe.frustumCorners.BR,fe.frustumCorners.BL,fe.globeCenterInViewSpace,fe.globeRadius,G,0,fe._farZ),"globe_pole_raster",xn,yt,vt);U.setupElevationDraw(Wt,de,H),B.uploadCommonUniforms(ce,de,ge.toUnwrapped()),ke&&B.renderDefaultNorthPole&&Zt(de,Ye),Ve&&B.renderDefaultSouthPole&&(Vt=a.a6.scale(a.a6.create(),Vt,[1,-1,1]),Zt(de,gt))}}}})(_,w,k,D,L);else{const B=_.context,U=B.gl;let W,J;const ee=_.shadowRenderer,ce=Ls(_,_.longestCutoffRange),se=Ee=>{if(J===Ee)return;const he=[];he.push(Hu[Ee]),ce.shouldRenderCutoff&&he.push("RENDER_CUTOFF"),W=_.getOrCreateProgram("terrainRaster",{defines:he}),J=Ee},de=_.colorModeForRenderPass(),oe=new gn(U.LEQUAL,gn.ReadWrite,_.depthRangeFor3D);Vu.update(L);const fe=_.transform,Te=jm(fe.zoom,w.exaggeration(),w.sourceCache._source.tileSize);let be=[0,0,0];if(ee){const Ee=_.style.directionalLight,he=_.style.ambientLight;Ee&&he&&(be=Yd(Ee,he))}{J=-1;const Ee=U.TRIANGLES,[he,Ce]=[w.gridIndexBuffer,w.gridSegments];for(const Ne of D){const Fe=k.getTile(Ne),G=Dn.disabled,R=w.prevTerrainTileForTile[Ne.key],H=w.terrainTileForTile[Ne.key];ms(R,H)&&Vu.newMorphing(Ne.key,R,H,L,250),B.activeTexture.set(U.TEXTURE0),Fe.texture&&Fe.texture.bind(U.LINEAR,U.CLAMP_TO_EDGE);const le=Vu.getMorphValuesForProxy(Ne.key),ge=le?1:0;let Oe;le&&(Oe={morphing:{srcDemTile:le.from,dstDemTile:le.to,phase:a.cc(le.phase)}});const Se=Pf(Ne.projMatrix,Wu(Ne.canonical,fe.renderWorldCopies)?Te/10:Te,be);if(se(ge),!W)continue;w.setupElevationDraw(Fe,W,Oe);const Le=Ne.toUnwrapped();ee&&ee.setupShadows(Le,W),_.uploadCommonUniforms(B,W,Le,null,ce),W.draw(_,Ee,oe,G,de,Rn.backCCW,Se,"terrain_raster",w.gridBuffer,he,Ce)}}}}(h,this,this.proxySourceCache,c,this._updateTimestamp),this.renderingToTexture=!0,h.gpuTimingDeferredRenderEnd(),c.splice(0,c.length))}renderBatch(c){if(this._drapedRenderBatches.length===0)return c+1;this.renderingToTexture=!0;const h=this.painter,b=this.painter.context,_=this.proxySourceCache,w=this.proxiedCoords[_.id],k=this._drapedRenderBatches.shift(),D=h.style.order,L=[];let B=0;for(const U of w){const W=_.getTileByID(U.proxyTileKey),J=_.proxyCachedFBO[U.key]?_.proxyCachedFBO[U.key][c]:void 0,ee=J!==void 0?_.renderCache[J]:this.pool[B++],ce=J!==void 0;if(W.texture=ee.tex,ce&&!ee.dirty){L.push(W.tileID);continue}let se;b.bindFramebuffer.set(ee.fb.framebuffer),this.renderedToTile=!1,ee.dirty&&(b.clear({color:a.ax.transparent,stencil:0}),ee.dirty=!1);for(let de=k.start;de<=k.end;++de){const oe=h.style._mergedLayers[D[de]];if(oe.isHidden(h.transform.zoom))continue;const fe=h.style.getLayerSourceCache(oe),Te=fe?this.proxyToSource[U.key][fe.id]:[U];if(!Te)continue;const be=Te;b.viewport.set([0,0,ee.fb.width,ee.fb.height]),se!==(fe?fe.id:null)&&(this._setupStencil(ee,Te,oe,fe),se=fe?fe.id:null),h.renderLayer(h,fe,oe,be)}if(this._drapedRenderBatches.length===0)for(const de of this._pendingGroundEffectLayers){const oe=h.style._mergedLayers[D[de]];if(oe.isHidden(h.transform.zoom))continue;const fe=h.style.getLayerSourceCache(oe),Te=fe?this.proxyToSource[U.key][fe.id]:[U];if(!Te)continue;const be=Te;b.viewport.set([0,0,ee.fb.width,ee.fb.height]),se!==(fe?fe.id:null)&&(this._setupStencil(ee,Te,oe,fe),se=fe?fe.id:null),h.renderLayer(h,fe,oe,be)}this.renderedToTile?(ee.dirty=!0,L.push(W.tileID)):ce||--B,B===5&&(B=0,this.renderToBackBuffer(L))}return this.renderToBackBuffer(L),this.renderingToTexture=!1,b.bindFramebuffer.set(null),b.viewport.set([0,0,h.width,h.height]),k.end+1}postRender(){}isLayerOrderingCorrect(c){const h=c.order.length;let b=-1,_=h;for(let w=0;w<h;++w)this._style.isLayerDraped(c._mergedLayers[c.order[w]])?b=Math.max(b,w):_=Math.min(_,w);return _>b}getMinElevationBelowMSL(){let c=0;return this._visibleDemTiles.filter(h=>h.dem).forEach(h=>{c=Math.min(c,h.dem.tree.minimums[0])}),c===0?c:(c-30)*this._exaggeration}raycast(c,h,b){if(!this._visibleDemTiles)return null;const _=this._visibleDemTiles.filter(w=>w.dem).map(w=>{const k=w.tileID,D=1<<k.overscaledZ,{x:L,y:B}=k.canonical,U=L/D,W=(L+1)/D,J=B/D,ee=(B+1)/D;return{minx:U,miny:J,maxx:W,maxy:ee,t:w.dem.tree.raycastRoot(U,J,W,ee,c,h,b),tile:w}});_.sort((w,k)=>(w.t!==null?w.t:Number.MAX_VALUE)-(k.t!==null?k.t:Number.MAX_VALUE));for(const w of _){if(w.t==null)return null;const k=w.tile.dem.tree.raycast(w.minx,w.miny,w.maxx,w.maxy,c,h,b);if(k!=null)return k}return null}_createFBO(){const c=this.painter.context,h=c.gl,b=this.drapeBufferSize;c.activeTexture.set(h.TEXTURE0);const _=new a.T(c,{width:b[0],height:b[1],data:null},h.RGBA);_.bind(h.LINEAR,h.CLAMP_TO_EDGE);const w=c.createFramebuffer(b[0],b[1],!0,null);return w.colorAttachment.set(_.texture),w.depthAttachment=new bi(c,w.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=c.createRenderbuffer(c.gl.DEPTH_STENCIL,b[0],b[1]),this._stencilRef=0,w.depthAttachment.set(this._sharedDepthStencil),c.clear({stencil:0})):w.depthAttachment.set(this._sharedDepthStencil),c.extTextureFilterAnisotropic&&h.texParameterf(h.TEXTURE_2D,c.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,c.extTextureFilterAnisotropicMax),{fb:w,tex:_,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const c in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[c].hasTransition())return!0;return this._style.order.some(c=>{const h=this._style._mergedLayers[c],b=h.isHidden(this.painter.transform.zoom);return h.type==="custom"?!b&&h.shouldRedrape():!b&&h.hasTransition()})}_clearLineLayersFromRenderCache(){let c=!1;for(const b of this._style.getSources())if(b instanceof kt){c=!0;break}if(!c)return;const h={};for(let b=0;b<this._style.order.length;++b){const _=this._style._mergedLayers[this._style.order[b]],w=this._style.getLayerSourceCache(_);if(w&&!h[w.id]&&!_.isHidden(this.painter.transform.zoom)&&_.type==="line"&&_.widthExpression()instanceof a.Z){h[w.id]=!0;for(const k of this.proxyCoords){const D=this.proxyToSource[k.key][w.id];if(D)for(const L of D)this._clearRenderCacheForTile(w.id,L)}}}}_clearRasterLayersFromRenderCache(){let c=!1;for(const b in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[b]._source instanceof Rt){c=!0;break}if(!c)return;const h={};for(let b=0;b<this._style.order.length;++b){const _=this._style._mergedLayers[this._style.order[b]],w=this._style.getLayerSourceCache(_);if(!w||h[w.id]||_.isHidden(this.painter.transform.zoom)||_.type!=="raster")continue;const k=_.paint.get("raster-fade-duration");for(const D of this.proxyCoords){const L=this.proxyToSource[D.key][w.id];if(L)for(const B of L){const U=Um(w.getTile(B),w.findLoadedParent(B,0),w,this.painter.transform,k);(U.opacity!==1||U.mix!==0)&&this._clearRenderCacheForTile(w.id,B)}}}}_setupDrapedRenderBatches(){const c=this._style.order,h=c.length;if(h===0)return;const b=[];this._pendingGroundEffectLayers=[];let _,w=0,k=this._style._mergedLayers[c[w]];for(;!this._style.isLayerDraped(k)&&k.isHidden(this.painter.transform.zoom)&&++w<h;)k=this._style._mergedLayers[c[w]];for(;w<h;++w){const D=this._style._mergedLayers[c[w]];D.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(D)?_===void 0&&(_=w):(D.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(w),_!==void 0&&(b.push({start:_,end:w-1}),_=void 0)))}if(_!==void 0&&b.push({start:_,end:w-1}),b.length!==0){const D=b[b.length-1];this._pendingGroundEffectLayers.every(L=>L>D.end)||a.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=b}_setupRenderCache(c){const h=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,h.renderCache.length>h.renderCachePool.length){const k=Object.values(h.proxyCachedFBO);h.proxyCachedFBO={};for(let D=0;D<k.length;++D){const L=Object.values(k[D]);h.renderCachePool.push(...L)}}return}this._clearRasterLayersFromRenderCache();const b=this.proxyCoords,_=this._tilesDirty;for(let k=b.length-1;k>=0;k--){const D=b[k];if(h.getTileByID(D.key),h.proxyCachedFBO[D.key]!==void 0){const L=c[D.key],B=this.proxyToSource[D.key];let U=0;for(const W in B){const J=B[W],ee=L[W];if(!ee||ee.length!==J.length||J.some((ce,se)=>ce!==ee[se]||_[W]&&_[W].hasOwnProperty(ce.key))){U=-1;break}++U}for(const W in h.proxyCachedFBO[D.key])h.renderCache[h.proxyCachedFBO[D.key][W]].dirty=U<0||U!==Object.values(L).length}}const w=[...this._drapedRenderBatches];w.sort((k,D)=>D.end-D.start-(k.end-k.start));for(const k of w)for(const D of b){if(h.proxyCachedFBO[D.key])continue;let L=h.renderCachePool.pop();L===void 0&&h.renderCache.length<50&&(L=h.renderCache.length,h.renderCache.push(this._createFBO())),L!==void 0&&(h.proxyCachedFBO[D.key]={},h.proxyCachedFBO[D.key][k.start]=L,h.renderCache[L].dirty=!0)}this._tilesDirty={}}_setupStencil(c,h,b,_){if(!_||!this._sourceTilesOverlap[_.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const w=this.painter.context,k=w.gl;if(h.length<=1)return void(this._overlapStencilType=!1);let D;if(b.isTileClipped())D=h.length,this._overlapStencilMode.test={func:k.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(h[0].overscaledZ>h[h.length-1].overscaledZ))return void(this._overlapStencilType=!1);D=1,this._overlapStencilMode.test={func:k.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+D>255&&(w.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=D,this._overlapStencilMode.ref=this._stencilRef,b.isTileClipped()&&this._renderTileClippingMasks(h,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(c){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[c.key]),this._overlapStencilMode):Dn.disabled}_renderTileClippingMasks(c,h){const b=this.painter,_=this.painter.context,w=_.gl;b._tileClippingMaskIDs={},_.setColorMode(rr.disabled),_.setDepthMode(gn.disabled);const k=b.getOrCreateProgram("clippingMask");for(const D of c){const L=b._tileClippingMaskIDs[D.key]=--h;k.draw(b,w.TRIANGLES,gn.disabled,new Dn({func:w.ALWAYS,mask:0},L,255,w.KEEP,w.KEEP,w.REPLACE),rr.disabled,Rn.disabled,$m(D.projMatrix),"$clipping",b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}}pointCoordinate(c){const h=this.painter.transform;if(c.x<0||c.x>h.width||c.y<0||c.y>h.height)return null;const b=[c.x,c.y,1,1];a.a7.transformMat4(b,b,h.pixelMatrixInverse),a.a7.scale(b,b,1/b[3]),b[0]/=h.worldSize,b[1]/=h.worldSize;const _=h._camera.position,w=a.bl(1,h.center.lat),k=[_[0],_[1],_[2]/w,0],D=a.N.subtract([],b.slice(0,3),k);a.N.normalize(D,D);const L=this.raycast(k,D,this._exaggeration);return L!==null&&L?(a.N.scaleAndAdd(k,k,D,L),k[3]=k[2],k[2]*=w,k):null}drawDepth(){const c=this.painter,h=c.context,b=this.proxySourceCache,_=Math.ceil(c.width),w=Math.ceil(c.height);if(!this._depthFBO||this._depthFBO.width===_&&this._depthFBO.height===w||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const k=h.gl,D=h.createFramebuffer(_,w,!0,"renderbuffer");h.activeTexture.set(k.TEXTURE0);const L=new a.T(h,{width:_,height:w,data:null},k.RGBA);L.bind(k.NEAREST,k.CLAMP_TO_EDGE),D.colorAttachment.set(L.texture);const B=h.createRenderbuffer(h.gl.DEPTH_COMPONENT16,_,w);D.depthAttachment.set(B),this._depthFBO=D,this._depthTexture=L}h.bindFramebuffer.set(this._depthFBO.framebuffer),h.viewport.set([0,0,_,w]),function(k,D,L,B){if(k.transform.projection.name==="globe")return;const U=k.context,W=U.gl;U.clear({depth:1});const J=k.getOrCreateProgram("terrainDepth"),ee=new gn(W.LESS,gn.ReadWrite,k.depthRangeFor3D);for(const ce of B){const se=L.getTile(ce),de=Pf(ce.projMatrix,0,[0,0,0]);D.setupElevationDraw(se,J),J.draw(k,W.TRIANGLES,ee,Dn.disabled,rr.unblended,Rn.backCCW,de,"terrain_depth",D.gridBuffer,D.gridIndexBuffer,D.gridNoSkirtSegments)}}(c,this,b,this.proxyCoords)}_setupProxiedCoordsForOrtho(c,h,b){if(c.getSource()instanceof a.ap)return this._setupProxiedCoordsForImageSource(c,h,b);this._findCoveringTileCache[c.id]=this._findCoveringTileCache[c.id]||{};const _=this.proxiedCoords[c.id]=[],w=this.proxyCoords;for(let L=0;L<w.length;L++){const B=w[L],U=this._findTileCoveringTileID(B,c);if(U){const W=this._createProxiedId(B,U,b[B.key]&&b[B.key][c.id]);_.push(W),this.proxyToSource[B.key][c.id]=[W]}}let k=!1;const D=new Set;for(let L=0;L<h.length;L++){const B=c.getTile(h[L]);if(!B||!B.hasData())continue;const U=this._findTileCoveringTileID(B.tileID,this.proxySourceCache);if(U&&U.tileID.canonical.z!==B.tileID.canonical.z){const W=this.proxyToSource[U.tileID.key][c.id],J=this._createProxiedId(U.tileID,B,b[U.tileID.key]&&b[U.tileID.key][c.id]);W?W.splice(W.length-1,0,J):this.proxyToSource[U.tileID.key][c.id]=[J];const ee=this.proxyToSource[U.tileID.key][c.id];D.has(ee)||D.add(ee),_.push(J),k=!0}}if(this._sourceTilesOverlap[c.id]=k,k&&this._debugParams.sortTilesHiZFirst)for(const L of D)L.sort((B,U)=>U.overscaledZ-B.overscaledZ)}_setupProxiedCoordsForImageSource(c,h,b){if(!c.getSource().loaded())return;const _=this.proxiedCoords[c.id]=[],w=this.proxyCoords,k=c.getSource(),D=k.tileID;if(!D)return;const L=new a.P(D.x,D.y)._div(1<<D.z),B=k.coordinates.map(a.L.fromLngLat).reduce((W,J)=>(W.min.x=Math.min(W.min.x,J.x-L.x),W.min.y=Math.min(W.min.y,J.y-L.y),W.max.x=Math.max(W.max.x,J.x-L.x),W.max.y=Math.max(W.max.y,J.y-L.y),W),{min:new a.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new a.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),U=(W,J)=>{const ee=W.wrap+W.canonical.x/(1<<W.canonical.z),ce=W.canonical.y/(1<<W.canonical.z),se=a.V/(1<<W.canonical.z),de=J.wrap+J.canonical.x/(1<<J.canonical.z),oe=J.canonical.y/(1<<J.canonical.z);return ee+se<de+B.min.x||ee>de+B.max.x||ce+se<oe+B.min.y||ce>oe+B.max.y};for(let W=0;W<w.length;W++){const J=w[W];for(let ee=0;ee<h.length;ee++){const ce=c.getTile(h[ee]);if(!ce||!ce.hasData()||U(J,ce.tileID))continue;const se=this._createProxiedId(J,ce,b[J.key]&&b[J.key][c.id]),de=this.proxyToSource[J.key][c.id];de?de.push(se):this.proxyToSource[J.key][c.id]=[se],_.push(se)}}}_createProxiedId(c,h,b){let _=this.orthoMatrix;if(b){const w=b.find(k=>k.key===h.tileID.key);if(w)return w}if(h.tileID.key!==c.key){const w=c.canonical.z-h.tileID.canonical.z;let k,D,L;_=a.a6.create();const B=h.tileID.wrap-c.wrap<<c.overscaledZ;w>0?(k=a.V>>w,D=k*((h.tileID.canonical.x<<w)-c.canonical.x+B),L=k*((h.tileID.canonical.y<<w)-c.canonical.y)):(k=a.V<<-w,D=a.V*(h.tileID.canonical.x-(c.canonical.x+B<<-w)),L=a.V*(h.tileID.canonical.y-(c.canonical.y<<-w))),a.a6.ortho(_,0,k,0,k,0,1),a.a6.translate(_,_,[D,L,0])}return new W0(h.tileID,c.key,_)}_findTileCoveringTileID(c,h){let b=h.getTile(c);if(b&&b.hasData())return b;const _=this._findCoveringTileCache[h.id],w=_[c.key];if(b=w?h.getTileByID(w):null,b&&b.hasData()||w===null)return b;let k=b?b.tileID:c,D=k.overscaledZ;const L=h.getSource().minzoom,B=[];if(!w){const W=h.getSource().maxzoom;if(c.canonical.z>=W){const J=c.canonical.z-W;h.getSource().reparseOverscaled?(D=Math.max(c.canonical.z+2,h.transform.tileZoom),k=new a.am(D,c.wrap,W,c.canonical.x>>J,c.canonical.y>>J)):J!==0&&(D=W,k=new a.am(D,c.wrap,W,c.canonical.x>>J,c.canonical.y>>J))}k.key!==c.key&&(B.push(k.key),b=h.getTile(k))}const U=W=>{B.forEach(J=>{_[J]=W}),B.length=0};for(D-=1;D>=L&&(!b||!b.hasData());D--){b&&U(b.tileID.key);const W=k.calculateScaledKey(D);if(b=h.getTileByID(W),b&&b.hasData())break;const J=_[W];if(J===null)break;J===void 0?B.push(W):b=h.getTileByID(J)}return U(b?b.tileID.key:null),b&&b.hasData()?b:null}findDEMTileFor(c){return this.enabled?this._findTileCoveringTileID(c,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(c,h){let b=this._tilesDirty[c];b||(b=this._tilesDirty[c]={}),b[h.key]=!0}}function Vm(g,c,h){const b=function(D,L,B){const U=a.N.dot(L,D),W=a.N.dot(B,[.2126,.7152,.0722]),J=(ce,se,de)=>(1-de)*ce+de*se,ee=J(1-.3*Math.min(W,1),1,Math.min(U+1,1));return J(.92,1,Math.asin(a.aa(L[2],-1,1))/Math.PI+.5)*ee}(g,[0,0,1],c),_=[0,0,0];a.N.scale(_,h.slice(0,3),b);const w=[0,0,0];a.N.scale(w,c.slice(0,3),g[2]);const k=[0,0,0];return a.N.add(k,_,w),a.bU(k)}const Hm=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],Y0=["stars","fillExtrusion","fillExtrusionGroundEffect","model","symbolSDF","symbolIcon","symbolTextAndIcon"];class Wm{static cacheKey(c,h,b,_){let w=`${h}${_?_.cacheKey:""}`;for(const k of b)c.usedDefines.includes(k)&&(w+=`/${k}`);return w}constructor(c,h,b,_,w,k,D){const L=c.gl;this.program=L.createProgram(),this.configuration=_,this.name=h,this.fixedDefines=[...k];const B=_?_.getBinderAttributes():[],U=(b.staticAttributes||[]).concat(B);let W=_?_.defines():[];W=W.concat(k.map(oe=>`#define ${oe}`));const J=`#version 300 es
`;let ee=J+W.concat("precision mediump float;",Rf,zm.fragmentSource).join(`
`);for(const oe of b.fragmentIncludes)ee+=`
${Ea[oe]}`;ee+=`
${b.fragmentSource}`;let ce=J+W.concat("precision highp float;",Rf,zm.vertexSource).join(`
`);for(const oe of b.vertexIncludes)ce+=`
${Ea[oe]}`;ce+=`
${b.vertexSource}`;const se=L.createShader(L.FRAGMENT_SHADER);if(L.isContextLost())return void(this.failedToCreate=!0);L.shaderSource(se,ee),L.compileShader(se),L.attachShader(this.program,se);const de=L.createShader(L.VERTEX_SHADER);if(L.isContextLost())this.failedToCreate=!0;else{L.shaderSource(de,ce),L.compileShader(de),L.attachShader(this.program,de),this.attributes={},this.numAttributes=U.length;for(let oe=0;oe<this.numAttributes;oe++)if(U[oe]){const fe=U[oe].startsWith("a_")?U[oe]:`a_${U[oe]}`;L.bindAttribLocation(this.program,oe,fe),this.attributes[fe]=oe}D&&D.shaderVaryings.length>0&&L.transformFeedbackVaryings(this.program,D.shaderVaryings,D.bufferMode),L.linkProgram(this.program),L.deleteShader(de),L.deleteShader(se),this.fixedUniforms=w(c),this.binderUniforms=_?_.getUniforms(c):[],k.includes("TERRAIN")&&(this.terrainUniforms=(oe=>({u_dem:new a.bO(oe),u_dem_prev:new a.bO(oe),u_dem_tl:new a.bL(oe),u_dem_scale:new a.bN(oe),u_dem_tl_prev:new a.bL(oe),u_dem_scale_prev:new a.bN(oe),u_dem_size:new a.bN(oe),u_dem_lerp:new a.bN(oe),u_exaggeration:new a.bN(oe),u_depth:new a.bO(oe),u_depth_size_inv:new a.bL(oe),u_meter_to_dem:new a.bN(oe),u_label_plane_matrix_inv:new a.bK(oe)}))(c)),k.includes("GLOBE")&&(this.globeUniforms=(oe=>({u_tile_tl_up:new a.bM(oe),u_tile_tr_up:new a.bM(oe),u_tile_br_up:new a.bM(oe),u_tile_bl_up:new a.bM(oe),u_tile_up_scale:new a.bN(oe)}))(c)),k.includes("FOG")&&(this.fogUniforms=(oe=>({u_fog_matrix:new a.bK(oe),u_fog_range:new a.bL(oe),u_fog_color:new a.bP(oe),u_fog_horizon_blend:new a.bN(oe),u_fog_vertical_limit:new a.bL(oe),u_fog_temporal_offset:new a.bN(oe),u_frustum_tl:new a.bM(oe),u_frustum_tr:new a.bM(oe),u_frustum_br:new a.bM(oe),u_frustum_bl:new a.bM(oe),u_globe_pos:new a.bM(oe),u_globe_radius:new a.bN(oe),u_globe_transition:new a.bN(oe),u_is_globe:new a.bO(oe),u_viewport:new a.bL(oe)}))(c)),k.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(oe=>({u_cutoff_params:new a.bP(oe)}))(c)),k.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(oe=>({u_lighting_ambient_color:new a.bM(oe),u_lighting_directional_dir:new a.bM(oe),u_lighting_directional_color:new a.bM(oe),u_ground_radiance:new a.bM(oe)}))(c)),k.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(oe=>({u_light_matrix_0:new a.bK(oe),u_light_matrix_1:new a.bK(oe),u_fade_range:new a.bL(oe),u_shadow_normal_offset:new a.bM(oe),u_shadow_intensity:new a.bN(oe),u_shadow_texel_size:new a.bN(oe),u_shadow_map_resolution:new a.bN(oe),u_shadow_direction:new a.bM(oe),u_shadow_bias:new a.bM(oe),u_shadowmap_0:new a.bO(oe),u_shadowmap_1:new a.bO(oe)}))(c))}}setTerrainUniformValues(c,h){if(!this.terrainUniforms)return;const b=this.terrainUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const _ in h)b[_]&&b[_].set(this.program,_,h[_])}}setGlobeUniformValues(c,h){if(!this.globeUniforms)return;const b=this.globeUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const _ in h)b[_]&&b[_].set(this.program,_,h[_])}}setFogUniformValues(c,h){if(!this.fogUniforms)return;const b=this.fogUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const _ in h)b[_].set(this.program,_,h[_])}}setCutoffUniformValues(c,h){if(!this.cutoffUniforms)return;const b=this.cutoffUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const _ in h)b[_].set(this.program,_,h[_])}}setLightsUniformValues(c,h){if(!this.lightsUniforms)return;const b=this.lightsUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const _ in h)b[_].set(this.program,_,h[_])}}setShadowUniformValues(c,h){if(this.failedToCreate||!this.shadowUniforms)return;const b=this.shadowUniforms;c.program.set(this.program);for(const _ in h)b[_].set(this.program,_,h[_])}_drawDebugWireframe(c,h,b,_,w,k,D,L,B,U){const W=c.options.wireframe;if(W.terrain===!1&&W.layers2D===!1&&W.layers3D===!1)return;const J=c.context;if(!(!(!W.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!W.layers2D||c._terrain&&c._terrain.renderingToTexture||!Hm.includes(this.name))||!(!W.layers3D||!Y0.includes(this.name))))return;const ee=J.gl,ce=c.wireframeDebugCache.getLinesFromTrianglesBuffer(c.frameCounter,w,J);if(!ce)return;const se=[...this.fixedDefines];se.push("DEBUG_WIREFRAME");const de=c.getOrCreateProgram(this.name,{config:this.configuration,defines:se});J.program.set(de.program);const oe=(be,Ee,he)=>{if(Ee[be]&&he[be])for(const Ce in Ee[be])he[be][Ce]&&he[be][Ce].set(he.program,Ce,Ee[be][Ce].current)};B&&B.setUniforms(de.program,J,de.binderUniforms,D,{zoom:L}),oe("fixedUniforms",this,de),oe("terrainUniforms",this,de),oe("globeUniforms",this,de),oe("fogUniforms",this,de),oe("lightsUniforms",this,de),oe("shadowUniforms",this,de),ce.bind(),J.setColorMode(new rr([ee.ONE,ee.ONE_MINUS_SRC_ALPHA,ee.ZERO,ee.ONE],a.ax.transparent,[!0,!0,!0,!1])),J.setDepthMode(new gn(h.func===ee.LESS?ee.LEQUAL:h.func,gn.ReadOnly,h.range)),J.setStencilMode(Dn.disabled);const fe=3*k.primitiveLength*2,Te=3*k.primitiveOffset*2*2;U&&U>1?ee.drawElementsInstanced(ee.LINES,fe,ee.UNSIGNED_SHORT,Te,U):ee.drawElements(ee.LINES,fe,ee.UNSIGNED_SHORT,Te),w.bind(),J.program.set(this.program),J.setDepthMode(h),J.setStencilMode(b),J.setColorMode(_)}draw(c,h,b,_,w,k,D,L,B,U,W,J,ee,ce,se,de,oe){const fe=c.context,Te=fe.gl;if(this.failedToCreate)return;fe.program.set(this.program),fe.setDepthMode(b),fe.setStencilMode(_),fe.setColorMode(w),fe.setCullFace(k);for(const Ce of Object.keys(this.fixedUniforms))this.fixedUniforms[Ce].set(this.program,Ce,D[Ce]);ce&&ce.setUniforms(this.program,fe,this.binderUniforms,J,{zoom:ee});const be={[Te.POINTS]:1,[Te.LINES]:2,[Te.TRIANGLES]:3,[Te.LINE_STRIP]:1}[h],Ee=oe&&oe.length>0;if(Ee){for(const Ce of oe)Te.bindBufferBase(Te.TRANSFORM_FEEDBACK_BUFFER,Ce.targetIndex,Ce.buffer.buffer);Te.beginTransformFeedback(h)}const he=de&&de>0?1:void 0;for(const Ce of W.get()){const Ne=Ce.vaos||(Ce.vaos={});(Ne[L]||(Ne[L]=new If)).bind(fe,this,B,ce?ce.getPaintVertexBuffers():[],U,Ce.vertexOffset,se||[],he),de&&de>1?Te.drawElementsInstanced(h,Ce.primitiveLength*be,Te.UNSIGNED_SHORT,Ce.primitiveOffset*be*2,de):U?Te.drawElements(h,Ce.primitiveLength*be,Te.UNSIGNED_SHORT,Ce.primitiveOffset*be*2):Te.drawArrays(h,Ce.vertexOffset,Ce.vertexLength),h===Te.TRIANGLES&&U&&this._drawDebugWireframe(c,b,_,w,U,Ce,J,ee,ce,de)}Ee&&Te.endTransformFeedback()}}function Ym(g,c){const h=Math.pow(2,c.tileID.overscaledZ),b=c.tileSize*Math.pow(2,g.transform.tileZoom)/h,_=b*(c.tileID.canonical.x+c.tileID.wrap*h),w=b*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture?c.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/a.a3(c,1,g.transform.tileZoom),u_pixel_coord_upper:[_>>16,w>>16],u_pixel_coord_lower:[65535&_,65535&w]}}const Ja=a.a6.create(),Of=(g,c,h,b,_,w,k,D,L,B,U,W,J,ee,ce,se)=>{const de=c.style.light,oe=de.properties.get("position"),fe=[oe.x,oe.y,oe.z],Te=a.co.create();de.properties.get("anchor")==="viewport"&&(a.co.fromRotation(Te,-c.transform.angle),a.N.transformMat3(fe,fe,Te));const be=de.properties.get("color"),Ee=c.transform,he={u_matrix:g,u_lightpos:fe,u_lightintensity:de.properties.get("intensity"),u_lightcolor:[be.r,be.g,be.b],u_vertical_gradient:+h,u_opacity:b,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ja,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:_,u_edge_radius:w,u_flood_light_color:W,u_vertical_scale:J,u_flood_light_intensity:ee,u_ground_shadow_factor:ce,u_emissive_strength:se};return Ee.projection.name==="globe"&&(he.u_tile_id=[k.canonical.x,k.canonical.y,1<<k.canonical.z],he.u_zoom_transition=L,he.u_inv_rot_matrix=U,he.u_merc_center=B,he.u_up_dir=Ee.projection.upVector(new a.bs(0,0,0),B[0]*a.V,B[1]*a.V),he.u_height_lift=D),he},Gm=(g,c,h)=>({u_matrix:g,u_edge_radius:c,u_vertical_scale:h}),Kl=(g,c,h,b,_,w,k,D,L,B,U,W,J,ee)=>{const ce=Of(g,c,h,b,_,w,k,L,B,U,W,J,ee,1,[0,0,0],0),se={u_height_factor:-Math.pow(2,k.overscaledZ)/D.tileSize/8};return a.e(ce,Ym(c,D),se)},Wc=(g,c)=>({u_matrix:g,u_emissive_strength:c}),qm=(g,c,h,b)=>a.e(Wc(g,c),Ym(h,b)),Yc=(g,c,h)=>({u_matrix:g,u_world:h,u_emissive_strength:c}),Zm=(g,c,h,b,_)=>a.e(qm(g,c,h,b),{u_world:_}),Lf=(g,c,h,b)=>{const _=a.V/h.tileSize;return{u_matrix:g,u_camera_to_center_distance:c.getCameraToCenterDistance(b),u_extrude_scale:[c.pixelsToGLUnits[0]/_,c.pixelsToGLUnits[1]/_]}},G0=(g,c,h=1)=>({u_matrix:g,u_color:c,u_overlay:0,u_overlay_scale:h}),Gd=a.a6.create(),Km=(g,c,h,b,_,w,k)=>{const D=g.transform,L=D.projection.name==="globe",B=L?a.cp(D.zoom,c.canonical)*D._pixelsPerMercatorPixel:a.a3(h,1,w),U={u_matrix:c.projMatrix,u_extrude_scale:B,u_intensity:k,u_inv_rot_matrix:Gd,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(L){U.u_inv_rot_matrix=b,U.u_merc_center=_,U.u_tile_id=[c.canonical.x,c.canonical.y,1<<c.canonical.z],U.u_zoom_transition=a.S(D.zoom);const W=_[0]*a.V,J=_[1]*a.V;U.u_up_dir=D.projection.upVector(new a.bs(0,0,0),W,J)}return U};function Nf(g,[c,h,b,_],[w,k]){if(w===k)return[0,0,0,0];const D=255*(g-1)/(g*(k-w));return[c*D,h*D,b*D,_*D]}function q0(g,c,[h,b]){return h===b?0:.5/g+(c-h)*(g-1)/(g*(b-h))}const Xm=(g,c,h,b,_,w,k,D,L,B,U,W,J,ee,ce,se,de,oe,fe,Te,be)=>{return{u_matrix:g,u_normalize_matrix:c,u_globe_matrix:h,u_merc_matrix:b,u_grid_matrix:_,u_tl_parent:w,u_scale_parent:B,u_fade_t:U.mix,u_opacity:U.opacity*W.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:W.paint.get("raster-brightness-min"),u_brightness_high:W.paint.get("raster-brightness-max"),u_saturation_factor:(he=W.paint.get("raster-saturation"),he>0?1-1/(1.001-he):-he),u_contrast_factor:(Ee=W.paint.get("raster-contrast"),Ee>0?1/(1-Ee):1+Ee),u_spin_weights:Yu(W.paint.get("raster-hue-rotate")),u_perspective_transform:J,u_raster_elevation:ee,u_zoom_transition:k,u_merc_center:D,u_cutoff_params:L,u_colorization_mix:Nf(a.cq,se,oe),u_colorization_offset:q0(a.cq,de,oe),u_color_ramp:ce,u_texture_offset:[Te/(fe+2*Te),fe/(fe+2*Te)],u_texture_res:[fe+2*Te,fe+2*Te],u_emissive_strength:be};var Ee,he};function Yu(g){g*=Math.PI/180;const c=Math.sin(g),h=Math.cos(g);return[(2*h+1)/3,(-Math.sqrt(3)*c-h+1)/3,(Math.sqrt(3)*c-h+1)/3]}const Iv=(g,c,h,b,_,w,k,D,L,B,U,W)=>({u_matrix:g,u_normalize_matrix:c,u_globe_matrix:h,u_merc_matrix:b,u_grid_matrix:_,u_tl_parent:w,u_scale_parent:B,u_fade_t:U.mix,u_opacity:U.opacity,u_image0:0,u_image1:1,u_raster_elevation:W,u_zoom_transition:k,u_merc_center:D,u_cutoff_params:L}),Pv=(g,c,h,b,_,w,k,D)=>({u_tile_offset:g,u_velocity:c,u_color_ramp:b,u_velocity_res:h,u_max_speed:_,u_texture_offset:w,u_data_scale:k,u_data_offset:D}),Qm=(g,c,h,b,_,w,k,D)=>({u_velocity:g,u_velocity_res:c,u_max_speed:h,u_speed_factor:b,u_lifetime_delta:_,u_rand_seed:Math.random(),u_texture_offset:w,u_data_scale:k,u_data_offset:D}),Jm=a.a6.create(),qd=(g,c,h,b,_,w,k,D,L,B,U,W,J,ee,ce,se,de,oe)=>{const fe=_.transform,Te={u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:fe.getCameraToCenterDistance(se),u_rotate_symbol:+h,u_aspect_ratio:fe.width/fe.height,u_fade_change:_.options.fadeDuration?_.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:k,u_coord_matrix:D,u_is_text:+L,u_pitch_with_map:+b,u_texsize:B,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Jm,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Jm,u_up_vector:[0,-1,0],u_icon_transition:oe||0,u_icon_saturation:de};return se.name==="globe"&&(Te.u_tile_id=[U.canonical.x,U.canonical.y,1<<U.canonical.z],Te.u_zoom_transition=W,Te.u_inv_rot_matrix=ee,Te.u_merc_center=J,Te.u_camera_forward=fe._camera.forward(),Te.u_ecef_origin=a.cr(fe.globeMatrix,U.toUnwrapped()),Te.u_tile_matrix=Float32Array.from(fe.globeMatrix),Te.u_up_vector=ce),Te},Xl=(g,c,h,b,_,w,k,D,L,B,U,W,J,ee,ce,se,de)=>a.e(qd(g,c,h,b,_,w,k,D,L,B,W,J,ee,ce,se,de,1),{u_gamma_scale:b?_.transform.getCameraToCenterDistance(de)*Math.cos(_.terrain?0:_.transform._pitch):1,u_device_pixel_ratio:a.f.devicePixelRatio,u_is_halo:+U,undefined:void 0}),Zd=(g,c,h,b,_,w,k,D,L,B,U,W,J,ee,ce,se)=>a.e(Xl(g,c,h,b,_,w,k,D,!0,L,!0,U,W,J,ee,ce,se),{u_texsize_icon:B,u_texture_icon:1}),Kd=(g,c,h,b)=>({u_matrix:g,u_emissive_strength:c,u_opacity:h,u_color:b}),Xd=(g,c,h,b,_,w,k)=>a.e(function(D,L,B,U){const W=B.imageManager.getPattern(D.toString(),L),{width:J,height:ee}=B.imageManager.getPixelSize(L),ce=Math.pow(2,U.tileID.overscaledZ),se=U.tileSize*Math.pow(2,B.transform.tileZoom)/ce,de=se*(U.tileID.canonical.x+U.tileID.wrap*ce),oe=se*U.tileID.canonical.y;return{u_image:0,u_pattern_tl:W.tl,u_pattern_br:W.br,u_texsize:[J,ee],u_pattern_size:W.displaySize,u_tile_units_to_pixels:1/a.a3(U,1,B.transform.tileZoom),u_pixel_coord_upper:[de>>16,oe>>16],u_pixel_coord_lower:[65535&de,65535&oe]}}(_,w,b,k),{u_matrix:g,u_emissive_strength:c,u_opacity:h}),eg=(g,c,h,b,_,w,k,D,L,B,U,W,J=[0,0,0],ee)=>{const ce=b.style.light,se=ce.properties.get("position"),de=[-se.x,-se.y,se.z],oe=a.co.create();ce.properties.get("anchor")==="viewport"&&(a.co.fromRotation(oe,-b.transform.angle),a.N.transformMat3(de,de,oe));const fe=B.alphaMode==="MASK",Te=ce.properties.get("color"),be=W.paint.get("model-ambient-occlusion-intensity"),Ee=W.paint.get("model-color").constantOr(a.ax.white),he=W.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:g,u_lighting_matrix:c,u_normal_matrix:h,u_lightpos:de,u_lightintensity:ce.properties.get("intensity"),u_lightcolor:[Te.r,Te.g,Te.b],u_camera_pos:J,u_opacity:_,u_baseTextureIsAlpha:0,u_alphaMask:+fe,u_alphaCutoff:B.alphaCutoff,u_baseColorFactor:[w.r,w.g,w.b,w.a],u_emissiveFactor:[k[0],k[1],k[2],1],u_metallicFactor:D,u_roughnessFactor:L,u_baseColorTexture:Pi.BaseColor,u_metallicRoughnessTexture:Pi.MetallicRoughness,u_normalTexture:Pi.Normal,u_occlusionTexture:Pi.Occlusion,u_emissionTexture:Pi.Emission,u_color_mix:[Ee.r,Ee.g,Ee.b,he],u_aoIntensity:be,u_emissive_strength:U,u_occlusionTextureTransform:ee||[0,0,0,0]}},ta=new Float32Array(16),Qd=(g,c=ta,h=ta)=>({u_matrix:g,u_instance:c,u_node_matrix:h}),Ov={fillExtrusion:g=>({u_matrix:new a.bK(g),u_lightpos:new a.bM(g),u_lightintensity:new a.bN(g),u_lightcolor:new a.bM(g),u_vertical_gradient:new a.bN(g),u_opacity:new a.bN(g),u_edge_radius:new a.bN(g),u_ao:new a.bL(g),u_tile_id:new a.bM(g),u_zoom_transition:new a.bN(g),u_inv_rot_matrix:new a.bK(g),u_merc_center:new a.bL(g),u_up_dir:new a.bM(g),u_height_lift:new a.bN(g),u_flood_light_color:new a.bM(g),u_vertical_scale:new a.bN(g),u_flood_light_intensity:new a.bN(g),u_ground_shadow_factor:new a.bM(g),u_emissive_strength:new a.bN(g)}),fillExtrusionDepth:g=>({u_matrix:new a.bK(g),u_edge_radius:new a.bN(g),u_vertical_scale:new a.bN(g)}),fillExtrusionPattern:g=>({u_matrix:new a.bK(g),u_lightpos:new a.bM(g),u_lightintensity:new a.bN(g),u_lightcolor:new a.bM(g),u_vertical_gradient:new a.bN(g),u_height_factor:new a.bN(g),u_edge_radius:new a.bN(g),u_ao:new a.bL(g),u_tile_id:new a.bM(g),u_zoom_transition:new a.bN(g),u_inv_rot_matrix:new a.bK(g),u_merc_center:new a.bL(g),u_up_dir:new a.bM(g),u_height_lift:new a.bN(g),u_image:new a.bO(g),u_texsize:new a.bL(g),u_pixel_coord_upper:new a.bL(g),u_pixel_coord_lower:new a.bL(g),u_tile_units_to_pixels:new a.bN(g),u_opacity:new a.bN(g)}),fillExtrusionGroundEffect:g=>({u_matrix:new a.bK(g),u_opacity:new a.bN(g),u_ao_pass:new a.bN(g),u_meter_to_tile:new a.bN(g),u_ao:new a.bL(g),u_flood_light_intensity:new a.bN(g),u_flood_light_color:new a.bM(g),u_attenuation:new a.bN(g),u_edge_radius:new a.bN(g),u_fb:new a.bO(g),u_fb_size:new a.bN(g)}),fill:g=>({u_matrix:new a.bK(g),u_emissive_strength:new a.bN(g)}),fillPattern:g=>({u_matrix:new a.bK(g),u_emissive_strength:new a.bN(g),u_image:new a.bO(g),u_texsize:new a.bL(g),u_pixel_coord_upper:new a.bL(g),u_pixel_coord_lower:new a.bL(g),u_tile_units_to_pixels:new a.bN(g)}),fillOutline:g=>({u_matrix:new a.bK(g),u_emissive_strength:new a.bN(g),u_world:new a.bL(g)}),fillOutlinePattern:g=>({u_matrix:new a.bK(g),u_emissive_strength:new a.bN(g),u_world:new a.bL(g),u_image:new a.bO(g),u_texsize:new a.bL(g),u_pixel_coord_upper:new a.bL(g),u_pixel_coord_lower:new a.bL(g),u_tile_units_to_pixels:new a.bN(g)}),circle:a.cs,collisionBox:g=>({u_matrix:new a.bK(g),u_camera_to_center_distance:new a.bN(g),u_extrude_scale:new a.bL(g)}),collisionCircle:g=>({u_matrix:new a.bK(g),u_inv_matrix:new a.bK(g),u_camera_to_center_distance:new a.bN(g),u_viewport_size:new a.bL(g)}),debug:g=>({u_color:new a.ca(g),u_matrix:new a.bK(g),u_overlay:new a.bO(g),u_overlay_scale:new a.bN(g)}),clippingMask:g=>({u_matrix:new a.bK(g)}),heatmap:g=>({u_extrude_scale:new a.bN(g),u_intensity:new a.bN(g),u_matrix:new a.bK(g),u_inv_rot_matrix:new a.bK(g),u_merc_center:new a.bL(g),u_tile_id:new a.bM(g),u_zoom_transition:new a.bN(g),u_up_dir:new a.bM(g)}),heatmapTexture:g=>({u_image:new a.bO(g),u_color_ramp:new a.bO(g),u_opacity:new a.bN(g)}),hillshade:g=>({u_matrix:new a.bK(g),u_image:new a.bO(g),u_latrange:new a.bL(g),u_light:new a.bL(g),u_shadow:new a.ca(g),u_highlight:new a.ca(g),u_emissive_strength:new a.bN(g),u_accent:new a.ca(g)}),hillshadePrepare:g=>({u_matrix:new a.bK(g),u_image:new a.bO(g),u_dimension:new a.bL(g),u_zoom:new a.bN(g)}),line:a.ct,linePattern:a.cu,raster:g=>({u_matrix:new a.bK(g),u_normalize_matrix:new a.bK(g),u_globe_matrix:new a.bK(g),u_merc_matrix:new a.bK(g),u_grid_matrix:new a.cb(g),u_tl_parent:new a.bL(g),u_scale_parent:new a.bN(g),u_fade_t:new a.bN(g),u_opacity:new a.bN(g),u_image0:new a.bO(g),u_image1:new a.bO(g),u_brightness_low:new a.bN(g),u_brightness_high:new a.bN(g),u_saturation_factor:new a.bN(g),u_contrast_factor:new a.bN(g),u_spin_weights:new a.bM(g),u_perspective_transform:new a.bL(g),u_raster_elevation:new a.bN(g),u_zoom_transition:new a.bN(g),u_merc_center:new a.bL(g),u_cutoff_params:new a.bP(g),u_colorization_mix:new a.bP(g),u_colorization_offset:new a.bN(g),u_color_ramp:new a.bO(g),u_texture_offset:new a.bL(g),u_texture_res:new a.bL(g),u_emissive_strength:new a.bN(g)}),rasterParticle:g=>({u_matrix:new a.bK(g),u_normalize_matrix:new a.bK(g),u_globe_matrix:new a.bK(g),u_merc_matrix:new a.bK(g),u_grid_matrix:new a.cb(g),u_tl_parent:new a.bL(g),u_scale_parent:new a.bN(g),u_fade_t:new a.bN(g),u_opacity:new a.bN(g),u_image0:new a.bO(g),u_image1:new a.bO(g),u_raster_elevation:new a.bN(g),u_zoom_transition:new a.bN(g),u_merc_center:new a.bL(g),u_cutoff_params:new a.bP(g)}),rasterParticleTexture:g=>({u_texture:new a.bO(g),u_opacity:new a.bN(g)}),rasterParticleDraw:g=>({u_tile_offset:new a.bL(g),u_velocity:new a.bO(g),u_color_ramp:new a.bO(g),u_velocity_res:new a.bL(g),u_max_speed:new a.bN(g),u_texture_offset:new a.bL(g),u_data_scale:new a.bP(g),u_data_offset:new a.bN(g)}),rasterParticleUpdate:g=>({u_velocity:new a.bO(g),u_velocity_res:new a.bL(g),u_max_speed:new a.bN(g),u_speed_factor:new a.bN(g),u_lifetime_delta:new a.bN(g),u_rand_seed:new a.bN(g),u_texture_offset:new a.bL(g),u_data_scale:new a.bP(g),u_data_offset:new a.bN(g)}),symbolIcon:g=>({u_is_size_zoom_constant:new a.bO(g),u_is_size_feature_constant:new a.bO(g),u_size_t:new a.bN(g),u_size:new a.bN(g),u_camera_to_center_distance:new a.bN(g),u_rotate_symbol:new a.bO(g),u_aspect_ratio:new a.bN(g),u_fade_change:new a.bN(g),u_matrix:new a.bK(g),u_label_plane_matrix:new a.bK(g),u_coord_matrix:new a.bK(g),u_is_text:new a.bO(g),u_pitch_with_map:new a.bO(g),u_texsize:new a.bL(g),u_tile_id:new a.bM(g),u_zoom_transition:new a.bN(g),u_inv_rot_matrix:new a.bK(g),u_merc_center:new a.bL(g),u_camera_forward:new a.bM(g),u_tile_matrix:new a.bK(g),u_up_vector:new a.bM(g),u_ecef_origin:new a.bM(g),u_texture:new a.bO(g),u_icon_transition:new a.bN(g),u_icon_saturation:new a.bN(g)}),symbolSDF:g=>({u_is_size_zoom_constant:new a.bO(g),u_is_size_feature_constant:new a.bO(g),u_size_t:new a.bN(g),u_size:new a.bN(g),u_camera_to_center_distance:new a.bN(g),u_rotate_symbol:new a.bO(g),u_aspect_ratio:new a.bN(g),u_fade_change:new a.bN(g),u_matrix:new a.bK(g),u_label_plane_matrix:new a.bK(g),u_coord_matrix:new a.bK(g),u_is_text:new a.bO(g),u_pitch_with_map:new a.bO(g),u_texsize:new a.bL(g),u_texture:new a.bO(g),u_gamma_scale:new a.bN(g),u_device_pixel_ratio:new a.bN(g),u_tile_id:new a.bM(g),u_zoom_transition:new a.bN(g),u_inv_rot_matrix:new a.bK(g),u_merc_center:new a.bL(g),u_camera_forward:new a.bM(g),u_tile_matrix:new a.bK(g),u_up_vector:new a.bM(g),u_ecef_origin:new a.bM(g),u_is_halo:new a.bO(g)}),symbolTextAndIcon:g=>({u_is_size_zoom_constant:new a.bO(g),u_is_size_feature_constant:new a.bO(g),u_size_t:new a.bN(g),u_size:new a.bN(g),u_camera_to_center_distance:new a.bN(g),u_rotate_symbol:new a.bO(g),u_aspect_ratio:new a.bN(g),u_fade_change:new a.bN(g),u_matrix:new a.bK(g),u_label_plane_matrix:new a.bK(g),u_coord_matrix:new a.bK(g),u_is_text:new a.bO(g),u_pitch_with_map:new a.bO(g),u_texsize:new a.bL(g),u_texsize_icon:new a.bL(g),u_texture:new a.bO(g),u_texture_icon:new a.bO(g),u_gamma_scale:new a.bN(g),u_device_pixel_ratio:new a.bN(g),u_is_halo:new a.bO(g)}),background:g=>({u_matrix:new a.bK(g),u_emissive_strength:new a.bN(g),u_opacity:new a.bN(g),u_color:new a.ca(g)}),backgroundPattern:g=>({u_matrix:new a.bK(g),u_emissive_strength:new a.bN(g),u_opacity:new a.bN(g),u_image:new a.bO(g),u_pattern_tl:new a.bL(g),u_pattern_br:new a.bL(g),u_texsize:new a.bL(g),u_pattern_size:new a.bL(g),u_pixel_coord_upper:new a.bL(g),u_pixel_coord_lower:new a.bL(g),u_tile_units_to_pixels:new a.bN(g)}),terrainRaster:V0,terrainDepth:V0,skybox:g=>({u_matrix:new a.bK(g),u_sun_direction:new a.bM(g),u_cubemap:new a.bO(g),u_opacity:new a.bN(g),u_temporal_offset:new a.bN(g)}),skyboxGradient:g=>({u_matrix:new a.bK(g),u_color_ramp:new a.bO(g),u_center_direction:new a.bM(g),u_radius:new a.bN(g),u_opacity:new a.bN(g),u_temporal_offset:new a.bN(g)}),skyboxCapture:g=>({u_matrix_3f:new a.cb(g),u_sun_direction:new a.bM(g),u_sun_intensity:new a.bN(g),u_color_tint_r:new a.bP(g),u_color_tint_m:new a.bP(g),u_luminance:new a.bN(g)}),globeRaster:g=>({u_proj_matrix:new a.bK(g),u_globe_matrix:new a.bK(g),u_normalize_matrix:new a.bK(g),u_merc_matrix:new a.bK(g),u_zoom_transition:new a.bN(g),u_merc_center:new a.bL(g),u_image0:new a.bO(g),u_grid_matrix:new a.cb(g),u_skirt_height:new a.bN(g),u_far_z_cutoff:new a.bN(g),u_frustum_tl:new a.bM(g),u_frustum_tr:new a.bM(g),u_frustum_br:new a.bM(g),u_frustum_bl:new a.bM(g),u_globe_pos:new a.bM(g),u_globe_radius:new a.bN(g),u_viewport:new a.bL(g)}),globeAtmosphere:g=>({u_frustum_tl:new a.bM(g),u_frustum_tr:new a.bM(g),u_frustum_br:new a.bM(g),u_frustum_bl:new a.bM(g),u_horizon:new a.bN(g),u_transition:new a.bN(g),u_fadeout_range:new a.bN(g),u_color:new a.bP(g),u_high_color:new a.bP(g),u_space_color:new a.bP(g),u_temporal_offset:new a.bN(g),u_horizon_angle:new a.bN(g)}),model:g=>({u_matrix:new a.bK(g),u_lighting_matrix:new a.bK(g),u_normal_matrix:new a.bK(g),u_lightpos:new a.bM(g),u_lightintensity:new a.bN(g),u_lightcolor:new a.bM(g),u_camera_pos:new a.bM(g),u_opacity:new a.bN(g),u_baseColorFactor:new a.bP(g),u_emissiveFactor:new a.bP(g),u_metallicFactor:new a.bN(g),u_roughnessFactor:new a.bN(g),u_baseTextureIsAlpha:new a.bO(g),u_alphaMask:new a.bO(g),u_alphaCutoff:new a.bN(g),u_baseColorTexture:new a.bO(g),u_metallicRoughnessTexture:new a.bO(g),u_normalTexture:new a.bO(g),u_occlusionTexture:new a.bO(g),u_emissionTexture:new a.bO(g),u_color_mix:new a.bP(g),u_aoIntensity:new a.bN(g),u_emissive_strength:new a.bN(g),u_occlusionTextureTransform:new a.bP(g)}),modelDepth:g=>({u_matrix:new a.bK(g),u_instance:new a.bK(g),u_node_matrix:new a.bK(g)}),groundShadow:g=>({u_matrix:new a.bK(g),u_ground_shadow_factor:new a.bM(g)}),stars:g=>({u_matrix:new a.bK(g),u_up:new a.bM(g),u_right:new a.bM(g),u_intensity_multiplier:new a.bN(g)})};let gs;function ys(g,c,h,b,_,w,k){const D=g.context,L=D.gl,B=g.transform,U=g.getOrCreateProgram("collisionBox"),W=[];let J=0,ee=0;for(let be=0;be<b.length;be++){const Ee=b[be],he=c.getTile(Ee),Ce=he.getBucket(h);if(!Ce)continue;const Ne=Sm(Ee,Ce,B);let Fe=Ne;_[0]===0&&_[1]===0||(Fe=g.translatePosMatrix(Ne,he,_,w));const G=k?Ce.textCollisionBox:Ce.iconCollisionBox,R=Ce.collisionCircleArray;if(R.length>0){const H=a.a6.create(),le=Fe;a.a6.mul(H,Ce.placementInvProjMatrix,B.glCoordMatrix),a.a6.mul(H,H,Ce.placementViewportMatrix),W.push({circleArray:R,circleOffset:ee,transform:le,invTransform:H,projection:Ce.getProjection()}),J+=R.length/4,ee=J}G&&(g.terrain&&g.terrain.setupElevationDraw(he,U),U.draw(g,L.LINES,gn.disabled,Dn.disabled,g.colorModeForRenderPass(),Rn.disabled,Lf(Fe,B,he,Ce.getProjection()),h.id,G.layoutVertexBuffer,G.indexBuffer,G.segments,null,B.zoom,null,[G.collisionVertexBuffer,G.collisionVertexBufferExt]))}if(!k||!W.length)return;const ce=g.getOrCreateProgram("collisionCircle"),se=new a.cv;se.resize(4*J),se._trim();let de=0;for(const be of W)for(let Ee=0;Ee<be.circleArray.length/4;Ee++){const he=4*Ee,Ce=be.circleArray[he+0],Ne=be.circleArray[he+1],Fe=be.circleArray[he+2],G=be.circleArray[he+3];se.emplace(de++,Ce,Ne,Fe,G,0),se.emplace(de++,Ce,Ne,Fe,G,1),se.emplace(de++,Ce,Ne,Fe,G,2),se.emplace(de++,Ce,Ne,Fe,G,3)}(!gs||gs.length<2*J)&&(gs=function(be){const Ee=2*be,he=new a.aw;he.resize(Ee),he._trim();for(let Ce=0;Ce<Ee;Ce++){const Ne=6*Ce;he.uint16[Ne+0]=4*Ce+0,he.uint16[Ne+1]=4*Ce+1,he.uint16[Ne+2]=4*Ce+2,he.uint16[Ne+3]=4*Ce+2,he.uint16[Ne+4]=4*Ce+3,he.uint16[Ne+5]=4*Ce+0}return he}(J));const oe=D.createIndexBuffer(gs,!0),fe=D.createVertexBuffer(se,a.cw.members,!0);for(const be of W){const Ee={u_matrix:be.transform,u_inv_matrix:be.invTransform,u_camera_to_center_distance:(Te=B).getCameraToCenterDistance(be.projection),u_viewport_size:[Te.width,Te.height]};ce.draw(g,L.TRIANGLES,gn.disabled,Dn.disabled,g.colorModeForRenderPass(),Rn.disabled,Ee,h.id,fe,oe,a.aB.simpleSegment(0,2*be.circleOffset,be.circleArray.length,be.circleArray.length/2),null,B.zoom)}var Te;fe.destroy(),oe.destroy()}const Ns=a.a6.create();function Gu(g){const c=g._camera.getWorldToCamera(g.worldSize,1),h=a.a6.multiply([],c,g.globeMatrix);a.a6.invert(h,h);const b=[0,0,0],_=[0,1,0,0];return a.a7.transformMat4(_,_,h),b[0]=_[0],b[1]=_[1],b[2]=_[2],a.N.normalize(b,b),b}function rn({width:g,height:c,anchor:h,textOffset:b,textScale:_},w){const{horizontalAlign:k,verticalAlign:D}=a.bf(h),L=-(k-.5)*g,B=-(D-.5)*c,U=a.bd(h,b);return new a.P((L/_+U[0])*w,(B/_+U[1])*w)}function Z0(g,c,h,b,_,w,k,D,L,B,U){const W=g.text.placedSymbolArray,J=g.text.dynamicLayoutVertexArray,ee=g.icon.dynamicLayoutVertexArray,ce={},se=g.getProjection(),de=jd(D,se,w),oe=w.elevation,fe=se.upVectorScale(D.canonical,w.center.lat,w.worldSize).metersToTile;J.clear();for(let Te=0;Te<W.length;Te++){const be=W.get(Te),{tileAnchorX:Ee,tileAnchorY:he,numGlyphs:Ce}=be,Ne=be.hidden||!be.crossTileID||g.allowVerticalPlacement&&!be.placedOrientation?null:b[be.crossTileID];if(Ne){let Fe=0,G=0,R=0;if(oe){const Ye=oe?oe.getAtTileOffset(D,Ee,he):0,[gt,yt,vt]=se.upVector(D.canonical,Ee,he);Fe=Ye*gt*fe,G=Ye*yt*fe,R=Ye*vt*fe}let[H,le,ge,Oe]=fa(be.projectedAnchorX+Fe,be.projectedAnchorY+G,be.projectedAnchorZ+R,h?de:k);const Se=xm(w.getCameraToCenterDistance(se),Oe);let Le=_.evaluateSizeForFeature(g.textSizeData,B,be)*Se/a.bc;h&&(Le*=g.tilePixelRatio/L);const ke=rn(Ne,Le);h?({x:H,y:le,z:ge}=se.projectTilePoint(Ee+ke.x,he+ke.y,D.canonical),[H,le,ge]=fa(H+Fe,le+G,ge+R,k)):(c&&ke._rotate(-w.angle),H+=ke.x,le+=ke.y,ge=0);const Ve=g.allowVerticalPlacement&&be.placedOrientation===a.b6.vertical?Math.PI/2:0;for(let Ye=0;Ye<Ce;Ye++)a.b9(J,H,le,ge,Ve);U&&be.associatedIconIndex>=0&&(ce[be.associatedIconIndex]={x:H,y:le,z:ge,angle:Ve})}else Hl(Ce,J)}if(U){ee.clear();const Te=g.icon.placedSymbolArray;for(let be=0;be<Te.length;be++){const Ee=Te.get(be),{numGlyphs:he}=Ee,Ce=ce[be];if(Ee.hidden||!Ce)Hl(he,ee);else{const{x:Ne,y:Fe,z:G,angle:R}=Ce;for(let H=0;H<he;H++)a.b9(ee,Ne,Fe,G,R)}}g.icon.dynamicLayoutVertexBuffer.updateData(ee)}g.text.dynamicLayoutVertexBuffer.updateData(J)}function zf(g,c,h,b,_,w,k={}){const D=h.paint.get("icon-translate"),L=h.paint.get("text-translate"),B=h.paint.get("icon-translate-anchor"),U=h.paint.get("text-translate-anchor"),W=h.layout.get("icon-rotation-alignment"),J=h.layout.get("text-rotation-alignment"),ee=h.layout.get("icon-pitch-alignment"),ce=h.layout.get("text-pitch-alignment"),se=h.layout.get("icon-keep-upright"),de=h.layout.get("text-keep-upright"),oe=h.paint.get("icon-color-saturation"),fe=g.context,Te=fe.gl,be=g.transform,Ee=W==="map",he=J==="map",Ce=ee==="map",Ne=ce==="map",Fe=h.layout.get("symbol-sort-key").constantOr(1)!==void 0;let G=!1;const R=g.depthModeForSublayer(0,gn.ReadOnly),H=[a.a5(be.center.lng),a.ae(be.center.lat)],le=h.layout.get("text-variable-anchor"),ge=be.projection.name==="globe",Oe=[],Se=[0,-1,0];for(const Le of b){const ke=c.getTile(Le),Ve=ke.getBucket(h);if(!Ve||Ve.projection.name==="mercator"&&ge||Ve.fullyClipped)continue;const Ye=Ve.projection.name==="globe",gt=Ye?a.S(be.zoom):0,yt=jd(Le,Ve.getProjection(),be),vt=be.calculatePixelsToTileUnitsMatrix(ke),Wt=le&&Ve.hasTextData(),Vt=Ve.hasIconTextFit()&&Wt&&Ve.hasIconData(),Ht=Ve.getProjection().createInversionMatrix(be,Le.canonical),Zt=()=>{const Dr=Ee&&h.layout.get("symbol-placement")!=="point",zn=[],Qn=Dr||Vt,qn=h.paint.get("icon-image-cross-fade").constantOr(0);g.terrainRenderModeElevated()&&Ce&&zn.push("PITCH_WITH_MAP_TERRAIN"),Ye&&(zn.push("PROJECTION_GLOBE_VIEW"),Qn&&zn.push("PROJECTED_POS_ON_VIEWPORT")),qn>0&&zn.push("ICON_TRANSITION"),Ve.icon.zOffsetVertexBuffer&&zn.push("Z_OFFSET"),oe<1&&zn.push("SATURATION");const Jn=Ve.icon.programConfigurations.get(h.id),Xr=g.getOrCreateProgram(Ve.sdfIcons?"symbolSDF":"symbolIcon",{config:Jn,defines:zn});let br;const uo=ke.imageAtlasTexture?ke.imageAtlasTexture.size:[0,0],Eo=Ve.iconSizeData,Ui=a.b5(Eo,be.zoom),oa=Ce||be.pitch!==0,Vi=Na(yt,ke.tileID.canonical,Ce,Ee,be,Ve.getProjection(),vt),Qo=Os(yt,ke.tileID.canonical,Ce,Ee,be,Ve.getProjection(),vt),Oo=g.translatePosMatrix(Qo,ke,D,B,!0),_i=g.translatePosMatrix(yt,ke,D,B),ui=Qn?Ns:Vi,ri=Ee&&!Ce&&!Dr;let Sa=Se;!ge&&!be.mercatorFromTransition||Ee||(Sa=Gu(be));const _s=Ye?Sa:Se;br=Ve.sdfIcons&&!Ve.iconsInText?Xl(Eo.kind,Ui,ri,Ce,g,_i,ui,Oo,!1,uo,!0,Le,gt,H,Ht,_s,Ve.getProjection()):qd(Eo.kind,Ui,ri,Ce,g,_i,ui,Oo,!1,uo,Le,gt,H,Ht,_s,Ve.getProjection(),oe,qn);const $a=ke.imageAtlasTexture?ke.imageAtlasTexture:null,Qc=h.layout.get("icon-size").constantOr(0)!==1||Ve.iconsNeedLinear,yh=Ve.sdfIcons||g.options.rotating||g.options.zooming||Qc||oa?Te.LINEAR:Te.NEAREST,bh=Ve.sdfIcons&&h.paint.get("icon-halo-width").constantOr(1)!==0,vh=g.terrain&&Ce&&Dr?a.a6.invert(a.a6.create(),Vi):Ns;if(Dr&&Ve.icon){const Jc=be.elevation,Kf=Jc?Jc.getAtTileOffsetFunc(Le,be.center.lat,be.worldSize,Ve.getProjection()):null,fl=_m(yt,ke.tileID.canonical,Ce,Ee,be,Ve.getProjection(),vt);Nc(Ve,yt,g,!1,fl,Qo,Ce,se,Kf,Le)}return{program:Xr,buffers:Ve.icon,uniformValues:br,atlasTexture:$a,atlasTextureIcon:null,atlasInterpolation:yh,atlasInterpolationIcon:null,isSDF:Ve.sdfIcons,hasHalo:bh,tile:ke,labelPlaneMatrixInv:vh}},In=()=>{const Dr=he&&h.layout.get("symbol-placement")!=="point",zn=[],Qn=Dr||le||Vt;g.terrainRenderModeElevated()&&Ne&&zn.push("PITCH_WITH_MAP_TERRAIN"),Ye&&(zn.push("PROJECTION_GLOBE_VIEW"),Qn&&zn.push("PROJECTED_POS_ON_VIEWPORT")),Ve.text.zOffsetVertexBuffer&&zn.push("Z_OFFSET");const qn=Ve.text.programConfigurations.get(h.id),Jn=g.getOrCreateProgram(Ve.iconsInText?"symbolTextAndIcon":"symbolSDF",{config:qn,defines:zn});let Xr,br=[0,0],uo=null;const Eo=Ve.textSizeData;Ve.iconsInText&&(br=ke.imageAtlasTexture?ke.imageAtlasTexture.size:[0,0],uo=ke.imageAtlasTexture?ke.imageAtlasTexture:null,Xr=Ne||be.pitch!==0||g.options.rotating||g.options.zooming||Eo.kind==="composite"||Eo.kind==="camera"?Te.LINEAR:Te.NEAREST);const Ui=ke.glyphAtlasTexture?ke.glyphAtlasTexture.size:[0,0],oa=a.b5(Eo,be.zoom),Vi=Na(yt,ke.tileID.canonical,Ne,he,be,Ve.getProjection(),vt),Qo=Os(yt,ke.tileID.canonical,Ne,he,be,Ve.getProjection(),vt),Oo=g.translatePosMatrix(Qo,ke,L,U,!0),_i=g.translatePosMatrix(yt,ke,L,U),ui=Qn?Ns:Vi,ri=he&&!Ne&&!Dr;let Sa=Se;!ge&&!be.mercatorFromTransition||he||(Sa=Gu(be));const _s=Ye?Sa:Se;let $a;$a=Ve.iconsInText?Zd(Eo.kind,oa,ri,Ne,g,_i,ui,Oo,Ui,br,Le,gt,H,Ht,_s,Ve.getProjection()):Xl(Eo.kind,oa,ri,Ne,g,_i,ui,Oo,!0,Ui,!0,Le,gt,H,Ht,_s,Ve.getProjection());const Qc=ke.glyphAtlasTexture?ke.glyphAtlasTexture:null,yh=Te.LINEAR,bh=h.paint.get("text-halo-width").constantOr(1)!==0,vh=g.terrain&&Ne&&Dr?a.a6.invert(a.a6.create(),Vi):Ns;if(Dr&&Ve.text){const Jc=be.elevation,Kf=Jc?Jc.getAtTileOffsetFunc(Le,be.center.lat,be.worldSize,Ve.getProjection()):null,fl=_m(yt,ke.tileID.canonical,Ne,he,be,Ve.getProjection(),vt);Nc(Ve,yt,g,!0,fl,Qo,Ne,de,Kf,Le)}return{program:Jn,buffers:Ve.text,uniformValues:$a,atlasTexture:Qc,atlasTextureIcon:uo,atlasInterpolation:yh,atlasInterpolationIcon:Xr,isSDF:!0,hasHalo:bh,tile:ke,labelPlaneMatrixInv:vh}},xn=Ve.icon.segments.get().length,on=Ve.text.segments.get().length,yn=xn&&!k.onlyText?Zt():null,Ln=on&&!k.onlyIcons?In():null,lr=h.paint.get("icon-opacity").constantOr(1),jn=h.paint.get("text-opacity").constantOr(1);if(Fe&&Ve.canOverlap){G=!0;const Dr=lr&&!k.onlyText?Ve.icon.segments.get():[],zn=jn&&!k.onlyIcons?Ve.text.segments.get():[];for(const Qn of Dr)Oe.push({segments:new a.aB([Qn]),sortKey:Qn.sortKey,state:yn});for(const Qn of zn)Oe.push({segments:new a.aB([Qn]),sortKey:Qn.sortKey,state:Ln})}else k.onlyText||Oe.push({segments:lr?Ve.icon.segments:new a.aB([]),sortKey:0,state:yn}),k.onlyIcons||Oe.push({segments:jn?Ve.text.segments:new a.aB([]),sortKey:0,state:Ln})}G&&Oe.sort((Le,ke)=>Le.sortKey-ke.sortKey);for(const Le of Oe){const ke=Le.state;if(ke)if(g.terrain&&g.terrain.setupElevationDraw(ke.tile,ke.program,{useDepthForOcclusion:be.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:ke.labelPlaneMatrixInv}),fe.activeTexture.set(Te.TEXTURE0),ke.atlasTexture&&ke.atlasTexture.bind(ke.atlasInterpolation,Te.CLAMP_TO_EDGE,!0),ke.atlasTextureIcon&&(fe.activeTexture.set(Te.TEXTURE1),ke.atlasTextureIcon&&ke.atlasTextureIcon.bind(ke.atlasInterpolationIcon,Te.CLAMP_TO_EDGE,!0)),g.uploadCommonLightUniforms(g.context,ke.program),ke.hasHalo){const Ve=ke.uniformValues;Ve.u_is_halo=1,Ql(ke.buffers,Le.segments,h,g,ke.program,R,_,w,Ve,2),Ve.u_is_halo=0}else{if(ke.isSDF){const Ve=ke.uniformValues;ke.hasHalo&&(Ve.u_is_halo=1,Ql(ke.buffers,Le.segments,h,g,ke.program,R,_,w,Ve,1)),Ve.u_is_halo=0}Ql(ke.buffers,Le.segments,h,g,ke.program,R,_,w,ke.uniformValues,1)}}}function Ql(g,c,h,b,_,w,k,D,L,B){const U=[g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer,g.iconTransitioningVertexBuffer,g.globeExtVertexBuffer,g.zOffsetVertexBuffer];_.draw(b,b.context.gl.TRIANGLES,w,k,D,Rn.disabled,L,h.id,g.layoutVertexBuffer,g.indexBuffer,c,h.paint,b.transform.zoom,g.programConfigurations.get(h.id),U,B)}function Gc(g,c,h,b,_,w,k){const D=g.context.gl,L=h.paint.get("fill-pattern"),B=L&&L.constantOr(1);let U,W,J,ee,ce;k?(W=B&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",U=D.LINES):(W=B?"fillPattern":"fill",U=D.TRIANGLES);for(const se of b){const de=c.getTile(se);if(B&&!de.patternsLoaded())continue;const oe=de.getBucket(h);if(!oe)continue;g.prepareDrawTile();const fe=oe.programConfigurations.get(h.id),Te=g.isTileAffectedByFog(se),be=g.getOrCreateProgram(W,{config:fe,overrideFog:Te});B&&(g.context.activeTexture.set(D.TEXTURE0),de.imageAtlasTexture&&de.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),fe.updatePaintBuffers());const Ee=L.constantOr(null);if(Ee&&de.imageAtlas){const Ne=de.imageAtlas.patternPositions[Ee.toString()];Ne&&fe.setConstantPatternPositions(Ne)}const he=g.translatePosMatrix(se.projMatrix,de,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor")),Ce=h.paint.get("fill-emissive-strength");if(k){ee=oe.indexBuffer2,ce=oe.segments2;const Ne=g.terrain&&g.terrain.renderingToTexture?g.terrain.drapeBufferSize:[D.drawingBufferWidth,D.drawingBufferHeight];J=W==="fillOutlinePattern"&&B?Zm(he,Ce,g,de,Ne):Yc(he,Ce,Ne)}else ee=oe.indexBuffer,ce=oe.segments,J=B?qm(he,Ce,g,de):Wc(he,Ce);g.uploadCommonUniforms(g.context,be,se.toUnwrapped()),be.draw(g,U,_,g.stencilModeForClipping(se),w,Rn.disabled,J,h.id,oe.layoutVertexBuffer,ee,ce,h.paint,g.transform.zoom,fe,void 0)}}function un(g,c,h,b,_,w,k,D){h.resetLayerRenderingStats(g);const L=g.context,B=L.gl,U=g.transform,W=h.paint.get("fill-extrusion-pattern"),J=W.constantOr(1),ee=h.paint.get("fill-extrusion-opacity"),ce=g.style.enable3dLights(),se=h.paint.get(ce&&!J?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),de=[h.paint.get("fill-extrusion-ambient-occlusion-intensity"),se],oe=h.layout.get("fill-extrusion-edge-radius"),fe=oe>0&&!h.paint.get("fill-extrusion-rounded-roof"),Te=fe?0:oe,be=U.projection.name==="globe"?a.cF():0,Ee=U.projection.name==="globe",he=Ee?a.S(U.zoom):0,Ce=[a.a5(U.center.lng),a.ae(U.center.lat)],Ne=h.paint.get("fill-extrusion-flood-light-color").toArray01().slice(0,3),Fe=h.paint.get("fill-extrusion-flood-light-intensity"),G=h.paint.get("fill-extrusion-vertical-scale"),R=Ls(g,h.paint.get("fill-extrusion-cutoff-fade-range")),H=h.paint.get("fill-extrusion-emissive-strength"),le=[];let ge;Ee&&le.push("PROJECTION_GLOBE_VIEW"),de[0]>0&&le.push("FAUX_AO"),fe&&le.push("ZERO_ROOF_RADIUS"),D&&le.push("HAS_CENTROID"),Fe>0&&le.push("FLOOD_LIGHT"),R.shouldRenderCutoff&&le.push("RENDER_CUTOFF");const Oe=g.renderPass==="shadow",Se=g.shadowRenderer,Le=Oe&&!!Se;g.shadowRenderer&&(g.shadowRenderer.useNormalOffset=!0);let ke=[0,0,0];if(Se){const gt=g.style.directionalLight,yt=g.style.ambientLight;gt&&yt&&(ke=Yd(gt,yt)),ge=le.concat(["SHADOWS_SINGLE_CASCADE"])}const Ve=Le?"fillExtrusionDepth":J?"fillExtrusionPattern":"fillExtrusion",Ye=h.getLayerRenderingStats();for(const gt of b){const yt=c.getTile(gt),vt=yt.getBucket(h);if(!vt||vt.projection.name!==U.projection.name)continue;let Wt=!1;Se&&(Wt=Se.getMaxCascadeForTile(gt.toUnwrapped())===0);const Vt=g.isTileAffectedByFog(gt),Ht=vt.programConfigurations.get(h.id),Zt=g.getOrCreateProgram(Ve,{config:Ht,defines:Wt?ge:le,overrideFog:Vt});if(g.terrain&&g.terrain.setupElevationDraw(yt,Zt,{useMeterToDem:!0}),!vt.centroidVertexBuffer){const lr=Zt.attributes.a_centroid_pos;lr!==void 0&&B.vertexAttrib2f(lr,0,0)}!Oe&&Se&&Se.setupShadows(yt.tileID.toUnwrapped(),Zt,"vector-tile",yt.tileID.overscaledZ),J&&(g.context.activeTexture.set(B.TEXTURE0),yt.imageAtlasTexture&&yt.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),Ht.updatePaintBuffers());const In=W.constantOr(null);if(In&&yt.imageAtlas){const lr=yt.imageAtlas.patternPositions[In.toString()];lr&&Ht.setConstantPatternPositions(lr)}const xn=h.paint.get("fill-extrusion-vertical-gradient");let on;if(Oe&&Se){if(Q0(yt.tileID,vt,g))continue;const lr=Se.calculateShadowPassMatrixFromTile(yt.tileID.toUnwrapped());on=Gm(lr,Te,G)}else{const lr=g.translatePosMatrix(gt.expandedProjMatrix,yt,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),jn=U.projection.createInversionMatrix(U,gt.canonical);on=J?Kl(lr,g,xn,ee,de,Te,gt,yt,be,he,Ce,jn,Ne,G):Of(lr,g,xn,ee,de,Te,gt,be,he,Ce,jn,Ne,G,Fe,ke,H)}g.uploadCommonUniforms(L,Zt,gt.toUnwrapped(),null,R);let yn=vt.segments;if(U.projection.name==="mercator"&&!Oe&&(yn=vt.getVisibleSegments(yt.tileID,g.terrain,g.transform.getFrustum(0)),!yn.get().length))continue;if(Ye)if(Oe)for(const lr of yn.get())Ye.numRenderedVerticesInShadowPass+=lr.primitiveLength;else for(const lr of yn.get())Ye.numRenderedVerticesInTransparentPass+=lr.primitiveLength;const Ln=[];(g.terrain||D)&&Ln.push(vt.centroidVertexBuffer),Ee&&Ln.push(vt.layoutVertexExtBuffer),Zt.draw(g,L.gl.TRIANGLES,_,w,k,Rn.backCCW,on,h.id,vt.layoutVertexBuffer,vt.indexBuffer,yn,h.paint,g.transform.zoom,Ht,Ln)}g.shadowRenderer&&(g.shadowRenderer.useNormalOffset=!1)}function al(g,c,h,b,_,w,k,D,L,B,U,W,J,ee,ce,se,de,oe,fe){const Te=g.context,be=Te.gl,Ee=g.transform,he=g.transform.zoom,Ce=[],Ne=Ls(g,h.paint.get("fill-extrusion-cutoff-fade-range"));B==="clear"?(Ce.push("CLEAR_SUBPASS"),fe&&(Ce.push("CLEAR_FROM_TEXTURE"),Te.activeTexture.set(be.TEXTURE0),fe.bind(be.LINEAR,be.CLAMP_TO_EDGE))):B==="sdf"&&Ce.push("SDF_SUBPASS"),de&&Ce.push("HAS_CENTROID"),Ne.shouldRenderCutoff&&Ce.push("RENDER_CUTOFF");const Fe=h.layout.get("fill-extrusion-edge-radius"),G=(R,H,le,ge,Oe)=>{const Se=H.programConfigurations.get(h.id),Le=g.isTileAffectedByFog(R),ke=g.getOrCreateProgram("fillExtrusionGroundEffect",{config:Se,defines:Ce,overrideFog:Le}),Ve=((gt,yt,vt,Wt,Vt,Ht,Zt,In,xn,on,yn)=>({u_matrix:yt,u_opacity:vt,u_ao_pass:Wt?1:0,u_meter_to_tile:Vt,u_ao:Ht,u_flood_light_intensity:Zt,u_flood_light_color:In,u_attenuation:xn,u_edge_radius:on,u_fb:0,u_fb_size:yn}))(0,ge,U,L,Oe,[W,J*Oe],ee,ce,se,he>=17?0:Fe*Oe,fe?fe.size[0]:0),Ye=[];de&&Ye.push(H.hiddenByLandmarkVertexBuffer),g.uploadCommonUniforms(Te,ke,R.toUnwrapped(),null,Ne),ke.draw(g,Te.gl.TRIANGLES,_,w,k,D,Ve,h.id,H.vertexBuffer,H.indexBuffer,le,h.paint,he,Se,Ye)};for(const R of b){const H=c.getTile(R),le=H.getBucket(h);if(!le||le.projection.name!==Ee.projection.name||!le.groundEffect||le.groundEffect&&!le.groundEffect.hasData())continue;const ge=le.groundEffect,Oe=1/le.tileToMeter;{const Se=g.translatePosMatrix(R.projMatrix,H,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),Le=ge.getDefaultSegment();G(R,ge,Le,Se,Oe)}if(oe)for(let Se=0;Se<4;Se++){const Le=a.cG[Se](R),ke=c.getTile(Le);if(!ke)continue;const Ve=ke.getBucket(h);if(!Ve||Ve.projection.name!==Ee.projection.name||!Ve.groundEffect||Ve.groundEffect&&!Ve.groundEffect.hasData())continue;const Ye=Ve.groundEffect;let gt,yt;Se===0?(gt=[-a.V,0,0],yt=1):Se===1?(gt=[a.V,0,0],yt=0):Se===2?(gt=[0,-a.V,0],yt=3):(gt=[0,a.V,0],yt=2);const vt=Ye.regionSegments[yt];if(!vt)continue;const Wt=new Float32Array(16);a.a6.translate(Wt,R.projMatrix,gt),G(R,Ye,vt,g.translatePosMatrix(Wt,H,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),Oe)}}}function Lv(g,c,h,b,_,w,k){b.centroidVertexArray.length===0&&b.createCentroidsBuffer();const D=w?w.findDEMTileFor(h):null;if(!(D&&D.dem||k))return;const L=oe=>new a.P(Math.ceil((oe+a.cJ)*a.cK),0),B=oe=>{const fe=c.getSource().minzoom,Te=Ee=>{const he=c.getTileByID(Ee);if(he&&he.hasData())return he.getBucket(_)},be=[0,-1,1];for(const Ee of be){if(oe.overscaledZ+Ee<fe)continue;const he=Te(oe.calculateScaledKey(oe.overscaledZ+Ee));if(he)return he}},U=[0,0,0],W=(oe,fe)=>(U[0]=Math.min(oe.min.y,fe.min.y),U[1]=Math.max(oe.max.y,fe.max.y),U[2]=a.V-fe.min.x>oe.max.x?fe.min.x-a.V:oe.max.x,U),J=(oe,fe)=>(U[0]=Math.min(oe.min.x,fe.min.x),U[1]=Math.max(oe.max.x,fe.max.x),U[2]=a.V-fe.min.y>oe.max.y?fe.min.y-a.V:oe.max.y,U),ee=[(oe,fe)=>W(oe,fe),(oe,fe)=>W(fe,oe),(oe,fe)=>J(oe,fe),(oe,fe)=>J(fe,oe)],ce=(oe,fe,Te,be,Ee,he,Ce)=>{if(!w)return 0;const Ne=[[he?Te:oe,he?oe:Te,0],[he?Te:fe,he?fe:Te,0]],Fe=Ce<0?a.V+Ce:Ce,G=[he?Fe:(oe+fe)/2,he?(oe+fe)/2:Fe,0];return Te===0&&Ce<0||Te!==0&&Ce>0?w.getForTilePoints(Ee,[G],!0,be):Ne.push(G),w.getForTilePoints(h,Ne,!0,D),Math.max(Ne[0][2],Ne[1][2],G[2])/w.exaggeration()};for(let oe=0;oe<4;oe++){const fe=b.borderFeatureIndices[oe];if(fe.length===0)continue;const Te=a.cG[oe](h),be=B(Te);if(!(be&&be instanceof a.cH)||b.borderDoneWithNeighborZ[oe]===be.canonical.z)continue;be.centroidVertexArray.length===0&&be.createCentroidsBuffer();const Ee=w?w.findDEMTileFor(Te):null;if(!(Ee&&Ee.dem||k))continue;const he=(oe<2?1:5)-oe,Ce=be.borderDoneWithNeighborZ[he]!==b.canonical.z,Ne=be.borderFeatureIndices[he];let Fe=0;if(b.canonical.z!==be.canonical.z){for(const G of fe)b.showCentroid(b.featuresOnBorder[G]);if(Ce)for(const G of Ne)be.showCentroid(be.featuresOnBorder[G]);b.borderDoneWithNeighborZ[oe]=be.canonical.z,be.borderDoneWithNeighborZ[he]=b.canonical.z}for(const G of fe){const R=b.featuresOnBorder[G],H=b.centroidData[R.centroidDataIndex],le=R.borders[oe];let ge;for(;Fe<Ne.length;){ge=be.featuresOnBorder[Ne[Fe]];const Oe=ge.borders[he];if(Oe[1]>le[0]+3||Oe[0]>le[0]-3)break;be.showCentroid(ge),Fe++}if(ge&&Fe<Ne.length){const Oe=Fe;let Se=0;for(;!(ge.borders[he][0]>le[1]-3)&&(Se++,++Fe!==Ne.length);)ge=be.featuresOnBorder[Ne[Fe]];if(ge=be.featuresOnBorder[Ne[Oe]],Se>1){const Ve=ge.borders[he];Math.abs(le[0]-Ve[0])<3&&Math.abs(le[1]-Ve[1])<3&&(Se=1,Fe=Oe+1)}else if(Se===0){b.showCentroid(R);continue}const Le=be.centroidData[ge.centroidDataIndex];k&&Se===1&&(((se=H).flags|(de=Le).flags)&a.cI?(se.flags|=a.cI,de.flags|=a.cI):(se.flags&=~a.cI,de.flags&=~a.cI));const ke=R.intersectsCount()>1||ge.intersectsCount()>1;if(Se>1)Fe=Oe,H.centroidXY=Le.centroidXY=new a.P(0,0);else if(Ee&&Ee.dem&&!ke){const Ve=ee[oe](H,Le),Ye=oe%2?a.V-1:0,gt=ce(Ve[0],Math.min(a.V-1,Ve[1]),Ye,Ee,Te,oe<2,Ve[2]);H.centroidXY=Le.centroidXY=L(gt)}else ke?H.centroidXY=Le.centroidXY=new a.P(0,0):(H.centroidXY=b.encodeBorderCentroid(R),Le.centroidXY=be.encodeBorderCentroid(ge));b.writeCentroidToBuffer(H),be.writeCentroidToBuffer(Le)}else b.showCentroid(R)}b.borderDoneWithNeighborZ[oe]=be.canonical.z,be.borderDoneWithNeighborZ[he]=b.canonical.z}var se,de;(b.needsCentroidUpdate||!b.centroidVertexBuffer&&b.centroidVertexArray.length!==0)&&b.uploadCentroid(g)}const K0=[1,0,0],Jd=[0,1,0],X0=[0,0,1];function Q0(g,c,h){const b=h.transform,_=h.shadowRenderer;if(!_)return!0;const w=g.toUnwrapped(),k=b.tileSize*_._cascades[h.currentShadowCascade].scale;let D=c.maxHeight;if(b.elevation){const se=b.elevation.getMinMaxForTile(g);se&&(D+=se.max)}const L=[..._.shadowDirection];L[2]=-L[2];const B=_.computeSimplifiedTileShadowVolume(w,D,k,L);if(!B)return!1;const U=[K0,Jd,X0,L,[L[0],0,L[2]],[0,L[1],L[2]]],W=b.projection.name==="globe",J=b.scaleZoom(k),ee=a.bq.fromInvProjectionMatrix(b.invProjMatrix,b.worldSize,J,!W),ce=_.getCurrentCascadeFrustum();return ee.intersectsPrecise(B.vertices,B.planes,U)===0||ce.intersectsPrecise(B.vertices,B.planes,U)===0}function J0(g){return[g[0]*a.cL,g[1]*a.cL,g[2]*a.cL,0]}function tg(g,c,h,b,_,w,k,D,L){const B=b.getSource(),U=h.globeSharedBuffers;if(!U)return;let W,J,ee;if(c&&(W=b.getTile(c)),B instanceof a.ap?(J=B.texture,ee=a.cj(0,0,h.transform)):W&&c&&(J=W.texture,ee=a.cj(c.canonical.z,c.canonical.x,h.transform)),!J||!ee)return;g||(ee=a.a6.scale(a.a6.create(),ee,[1,-1,1]));const ce=h.context,se=ce.gl,de=_.paint.get("raster-resampling")==="nearest"?se.NEAREST:se.LINEAR,oe=h.colorModeForDrapableLayerRenderPass(w),fe=k.defines;fe.push("GLOBE_POLES");const Te=new gn(se.LEQUAL,gn.ReadWrite,h.depthRangeFor3D),be=Float32Array.from(h.transform.expandedFarZProjMatrix),Ee=Float32Array.from(a.aT(a.ci(new a.bs(0,0,0))));h.terrain&&h.terrain.prepareDrawTile(),ce.activeTexture.set(se.TEXTURE0),J.bind(de,se.CLAMP_TO_EDGE),ce.activeTexture.set(se.TEXTURE1),J.bind(de,se.CLAMP_TO_EDGE),J.useMipmap&&ce.extTextureFilterAnisotropic&&h.transform.pitch>20&&se.texParameterf(se.TEXTURE_2D,ce.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ce.extTextureFilterAnisotropicMax);const[he,Ce,Ne,Fe]=c?U.getPoleBuffers(c.canonical.z,!1):U.getPoleBuffers(0,!0),G=_.paint.get("raster-elevation");let R;g?(R=he,h.renderDefaultNorthPole=G!==0):(R=Ce,h.renderDefaultSouthPole=G!==0);const H=J0(k.mix),le=((Oe,Se,Le,ke,Ve,Ye,gt,yt,vt,Wt,Vt,Ht,Zt)=>Xm(Oe,Se,Le,new Float32Array(16),new Float32Array(9),[0,0],ke,[0,0],[0,0,0,0],1,{opacity:1,mix:0},Ye,[0,0],yt,2,Wt,Vt,Ht,1,0,Zt))(be,Ee,ee,a.S(h.transform.zoom),0,_,0,G,0,H,k.offset,k.range,w),ge=h.getOrCreateProgram("raster",{defines:fe});h.uploadCommonUniforms(ce,ge,null),ge.draw(h,se.TRIANGLES,Te,L,oe,D,le,_.id,R,Ne,Fe)}function ng(g){const c=g._nearZ,h=g.projection.farthestPixelDistance(g),b=h-c,_=.2*g.height,w=c+_;return[c,h,(w-_-c)/b,(w-c)/b]}function rg(g,c,h,b){if(g)return c instanceof Bt&&g instanceof $l?c.getTextureDescriptor(g,h,!0):{texture:g.texture,mix:J0(b.mix),offset:b.offset,buffer:0,tileSize:1}}function sl(g,c,h){if(!g)return null;const b=c.getTextureDescriptor(g,h,!0);if(!b)return null;let{texture:_,mix:w,offset:k,tileSize:D,buffer:L,format:B}=b;if(!_||!B)return null;let U=!1;return B==="uint32"&&(U=!0,w[3]=0,w=Nf(a.cM,w,[0,h.paint.get("raster-particle-max-speed")]),k=q0(a.cM,k,[0,h.paint.get("raster-particle-max-speed")])),{texture:_,textureOffset:[L/(D+2*L),D/(D+2*L)],tileSize:D,scalarData:U,scale:w,offset:k,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[B]]}}function og(g){const c=g._nearZ,h=g.projection.farthestPixelDistance(g),b=h-c,_=.2*g.height,w=c+_;return[c,h,(w-_-c)/b,(w-c)/b]}const Ba=new a.ax(1,0,0,1),na=new a.ax(0,1,0,1),ig=new a.ax(0,0,1,1),ag=new a.ax(1,0,1,1),sg=new a.ax(0,1,1,1);function ll(g,c,h,b,_,w,k){const D=g.context,L=g.transform,B=D.gl,U=L.projection.name==="globe",W=U?["PROJECTION_GLOBE_VIEW"]:[];let J=a.a6.clone(h.projMatrix);if(U&&a.S(L.zoom)>0){const H=a.aS(h.canonical,L),le=a.cN(H);J=a.a6.multiply(new Float32Array(16),L.globeMatrix,le),a.a6.multiply(J,L.projMatrix,J)}const ee=a.a6.create();ee[12]+=2*_/(a.f.devicePixelRatio*L.width),ee[13]+=2*w/(a.f.devicePixelRatio*L.height),a.a6.multiply(J,ee,J);const ce=g.getOrCreateProgram("debug",{defines:W}),se=c.getTileByID(h.key);g.terrain&&g.terrain.setupElevationDraw(se,ce);const de=gn.disabled,oe=Dn.disabled,fe=g.colorModeForRenderPass(),Te="$debug";D.activeTexture.set(B.TEXTURE0),g.emptyTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),U?se._makeGlobeTileDebugBuffers(g.context,L):se._makeDebugTileBoundsBuffers(g.context,L.projection);const be=se._tileDebugBuffer||g.debugBuffer,Ee=se._tileDebugIndexBuffer||g.debugIndexBuffer,he=se._tileDebugSegments||g.debugSegments;if(ce.draw(g,B.LINE_STRIP,de,oe,fe,Rn.disabled,G0(J,b),Te,be,Ee,he,null,null,null,[se._globeTileDebugBorderBuffer]),k){const H=se.latestRawTileData,le=Math.floor((H&&H.byteLength||0)/1024);let ge=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(ge+=` => ${h.overscaledZ}`),ge+=` ${se.state}`,ge+=` ${le}kb`,function(Oe,Se){Oe.initDebugOverlayCanvas();const Le=Oe.debugOverlayCanvas,ke=Oe.context.gl,Ve=Oe.debugOverlayCanvas.getContext("2d");Ve.clearRect(0,0,Le.width,Le.height),Ve.shadowColor="white",Ve.shadowBlur=2,Ve.lineWidth=1.5,Ve.strokeStyle="white",Ve.textBaseline="top",Ve.font="bold 36px Open Sans, sans-serif",Ve.fillText(Se,5,5),Ve.strokeText(Se,5,5),Oe.debugOverlayTexture.update(Le),Oe.debugOverlayTexture.bind(ke.LINEAR,ke.CLAMP_TO_EDGE)}(g,ge)}const Ce=c.getTile(h).tileSize,Ne=512/Math.min(Ce,512)*(h.overscaledZ/L.zoom)*.5,Fe=se._tileDebugTextBuffer||g.debugBuffer,G=se._tileDebugTextIndexBuffer||g.quadTriangleIndexBuffer,R=se._tileDebugTextSegments||g.debugSegments;ce.draw(g,B.TRIANGLES,de,oe,rr.alphaBlended,Rn.disabled,G0(J,a.ax.transparent,Ne),Te,Fe,G,R,null,null,null,[se._globeTileDebugTextBuffer])}function Bf(g,c,h,b){xo(g,0,c+h/2,g.transform.width,h,b)}function Ta(g,c,h,b){xo(g,c-h/2,0,h,g.transform.height,b)}function xo(g,c,h,b,_,w){const k=g.context,D=k.gl;D.enable(D.SCISSOR_TEST),D.scissor(c*a.f.devicePixelRatio,h*a.f.devicePixelRatio,b*a.f.devicePixelRatio,_*a.f.devicePixelRatio),k.clear({color:w}),D.disable(D.SCISSOR_TEST)}const eh=a.ay([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:lg}=eh;function cl(g,c,h,b){g.emplaceBack(c,h,b)}class cg{constructor(c){this.vertexArray=new a.az,this.indices=new a.aw,cl(this.vertexArray,-1,-1,1),cl(this.vertexArray,1,-1,1),cl(this.vertexArray,-1,1,1),cl(this.vertexArray,1,1,1),cl(this.vertexArray,-1,-1,-1),cl(this.vertexArray,1,-1,-1),cl(this.vertexArray,-1,1,-1),cl(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=c.createVertexBuffer(this.vertexArray,lg),this.indexBuffer=c.createIndexBuffer(this.indices),this.segment=a.aB.simpleSegment(0,0,36,12)}}function Jl(g,c,h,b,_,w){const k=g.context.gl,D=c.paint.get("sky-atmosphere-color"),L=c.paint.get("sky-atmosphere-halo-color"),B=c.paint.get("sky-atmosphere-sun-intensity"),U=((W,J,ee,ce,se)=>({u_matrix_3f:W,u_sun_direction:J,u_sun_intensity:ee,u_color_tint_r:[ce.r,ce.g,ce.b,ce.a],u_color_tint_m:[se.r,se.g,se.b,se.a],u_luminance:5e-5}))(a.co.fromMat4(a.co.create(),b),_,B,D,L);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_CUBE_MAP_POSITIVE_X+w,c.skyboxTexture,0),h.draw(g,k.TRIANGLES,gn.disabled,Dn.disabled,rr.unblended,Rn.frontCW,U,"skyboxCapture",c.skyboxGeometry.vertexBuffer,c.skyboxGeometry.indexBuffer,c.skyboxGeometry.segment)}const ey=a.ay([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class qu{constructor(c){const h=new a.cO;h.emplaceBack(-1,1,1,0,0),h.emplaceBack(1,1,1,1,0),h.emplaceBack(1,-1,1,1,1),h.emplaceBack(-1,-1,1,0,1);const b=new a.aw;b.emplaceBack(0,1,2),b.emplaceBack(2,3,0),this.vertexBuffer=c.createVertexBuffer(h,ey.members),this.indexBuffer=c.createIndexBuffer(b),this.segments=a.aB.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const th=a.ay([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class $t{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class Cn{constructor(c){this.colorModeAlphaBlendedWriteRGB=new rr([1,ds,1,ds],a.ax.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new rr([1,0,1,0],a.ax.transparent,[!1,!1,!1,!0]),this.params=new $t,this.updateNeeded=!0,c.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),c.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),c.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),c.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(c){const h=c.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new qu(h);const b=this.params.sizeRange,_=this.params.intensityRange,w=function(U){const W=a.aA(30),J=[];for(let ee=0;ee<U;++ee){const ce=2*Math.PI*W(),se=Math.acos(1-2*W())-.5*Math.PI;J.push(a.N.fromValues(Math.cos(se)*Math.cos(ce),Math.cos(se)*Math.sin(ce),Math.sin(se)))}return J}(this.params.starsCount),k=a.aA(300),D=new a.cP,L=new a.aw;let B=0;for(let U=0;U<w.length;++U){const W=a.N.scale([],w[U],200),J=Math.max(0,1+.01*b*(1*k()-.5)),ee=Math.max(0,1+.01*_*(1*k()-.5));D.emplaceBack(W[0],W[1],W[2],-1,-1,J,ee),D.emplaceBack(W[0],W[1],W[2],1,-1,J,ee),D.emplaceBack(W[0],W[1],W[2],1,1,J,ee),D.emplaceBack(W[0],W[1],W[2],-1,1,J,ee),L.emplaceBack(B+0,B+1,B+2),L.emplaceBack(B+0,B+2,B+3),B+=4}this.starsVx=h.createVertexBuffer(D,th.members),this.starsIdx=h.createIndexBuffer(L),this.starsSegments=a.aB.simpleSegment(0,0,D.length,L.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(c,h){const b=c.context,_=b.gl,w=c.transform,k=new gn(_.LEQUAL,gn.ReadOnly,[0,1]),D=a.S(w.zoom),L=h.properties.get("color").toArray01(),B=h.properties.get("high-color").toArray01(),U=h.properties.get("space-color").toArray01PremultipliedAlpha(),W=5e-4,J=a.cQ(h.properties.get("horizon-blend"),0,1,W,.25),ee=a.cd(c,b,w)&&J===W?w.worldSize/(2*Math.PI*1.025)-1:w.globeRadius,ce=c.frameCounter/1e3%1,se=a.N.length(w.globeCenterInViewSpace),de=Math.sqrt(Math.pow(se,2)-Math.pow(ee,2)),oe=Math.acos(de/se),fe=Te=>{const be=w.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];Te&&be.push("ALPHA_PASS");const Ee=c.getOrCreateProgram("globeAtmosphere",{defines:be}),he=((Ne,Fe,G,R,H,le,ge,Oe,Se,Le,ke,Ve)=>({u_frustum_tl:Ne,u_frustum_tr:Fe,u_frustum_br:G,u_frustum_bl:R,u_horizon:H,u_transition:le,u_fadeout_range:ge,u_color:Oe,u_high_color:Se,u_space_color:Le,u_temporal_offset:ke,u_horizon_angle:Ve}))(w.frustumCorners.TL,w.frustumCorners.TR,w.frustumCorners.BR,w.frustumCorners.BL,w.frustumCorners.horizon,D,J,L,B,U,ce,oe);c.uploadCommonUniforms(b,Ee);const Ce=this.atmosphereBuffer;Ce&&Ee.draw(c,_.TRIANGLES,k,Dn.disabled,Te?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,Rn.backCW,he,Te?"atmosphere_glow_alpha":"atmosphere_glow",Ce.vertexBuffer,Ce.indexBuffer,Ce.segments)};fe(!1),fe(!0)}drawStars(c,h){const b=a.aa(h.properties.get("star-intensity"),0,1);if(b===0)return;const _=c.context,w=_.gl,k=c.transform,D=c.getOrCreateProgram("stars"),L=a.bi.identity([]);a.bi.rotateX(L,L,-k._pitch),a.bi.rotateZ(L,L,-k.angle),a.bi.rotateX(L,L,a.bj(k._center.lat)),a.bi.rotateY(L,L,-a.bj(k._center.lng));const B=a.a6.fromQuat(new Float32Array(16),L),U=a.a6.multiply([],k.starsProjMatrix,B),W=a.co.fromMat4([],B),J=a.co.invert([],W),ee=[0,1,0];a.N.transformMat3(ee,ee,J),a.N.scale(ee,ee,this.params.sizeMultiplier);const ce=[1,0,0];a.N.transformMat3(ce,ce,J),a.N.scale(ce,ce,this.params.sizeMultiplier);const se=(de=ee,oe=ce,fe=b,{u_matrix:Float32Array.from(U),u_up:de,u_right:oe,u_intensity_multiplier:fe});var de,oe,fe;c.uploadCommonUniforms(_,D),this.starsVx&&this.starsIdx&&D.draw(c,w.TRIANGLES,gn.disabled,Dn.disabled,this.colorModeAlphaBlendedWriteRGB,Rn.disabled,se,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function qc(g,c){const h=[...g],b=c.cameraWorldSizeForFog/c.worldSize,_=a.a6.identity([]);return a.a6.scale(_,_,[b,b,1]),a.a6.multiply(h,_,h),a.a6.multiply(h,c.worldToFogMatrix,h),h}function wo(g,c,h,b){const _=h.material,w=b.context,{baseColorTexture:k,metallicRoughnessTexture:D}=_.pbrMetallicRoughness,{normalTexture:L,occlusionTexture:B,emissionTexture:U}=_;function W(J,ee,ce){if(J&&(g.push(ee),w.activeTexture.set(w.gl.TEXTURE0+ce),J.gfxTexture)){const{minFilter:se,magFilter:de,wrapS:oe,wrapT:fe}=J.sampler;J.gfxTexture.bindExtraParam(se,de,oe,fe)}}W(k,"HAS_TEXTURE_u_baseColorTexture",Pi.BaseColor),W(D,"HAS_TEXTURE_u_metallicRoughnessTexture",Pi.MetallicRoughness),W(L,"HAS_TEXTURE_u_normalTexture",Pi.Normal),W(B,"HAS_TEXTURE_u_occlusionTexture",Pi.Occlusion),W(U,"HAS_TEXTURE_u_emissionTexture",Pi.Emission),h.texcoordBuffer&&(g.push("HAS_ATTRIBUTE_a_uv_2f"),c.push(h.texcoordBuffer)),h.colorBuffer&&(g.push(h.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),c.push(h.colorBuffer)),h.normalBuffer&&(g.push("HAS_ATTRIBUTE_a_normal_3f"),c.push(h.normalBuffer)),h.pbrBuffer&&(g.push("HAS_ATTRIBUTE_a_pbr"),g.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),c.push(h.pbrBuffer)),_.alphaMode!=="OPAQUE"&&_.alphaMode!=="MASK"||g.push("UNPREMULT_TEXTURE_IN_SHADER"),_.defined||g.push("DIFFUSE_SHADED"),g.push("USE_STANDARD_DERIVATIVES")}function Fa(g,c,h,b,_,w){const k=h.paint.get("model-opacity"),D=c.context,L=new gn(c.context.gl.LEQUAL,gn.ReadWrite,c.depthRangeFor3D),B=c.transform,U=g.mesh,W=U.material,J=W.pbrMetallicRoughness,ee=c.style.fog;let ce;ce=c.transform.projection.zAxisUnit==="pixels"?[...g.nodeModelMatrix]:a.a6.multiply([],b.zScaleMatrix,g.nodeModelMatrix),a.a6.multiply(ce,b.negCameraPosMatrix,ce);const se=a.a6.invert([],ce);a.a6.transpose(se,se);const de=h.paint.get("model-emissive-strength").constantOr(0),oe=eg(new Float32Array(g.worldViewProjection),new Float32Array(ce),new Float32Array(se),c,k,J.baseColorFactor,W.emissiveFactor,J.metallicFactor,J.roughnessFactor,W,de,h),fe={defines:[]},Te=[];wo(fe.defines,Te,U,c);const be=c.shadowRenderer;be&&(be.useNormalOffset=!1);let Ee=null;if(ee){const Ne=qc(g.nodeModelMatrix,c.transform);if(Ee=new Float32Array(Ne),B.projection.name!=="globe"){const Fe=U.aabb.min,G=U.aabb.max,[R,H]=ee.getOpacityForBounds(Ne,Fe[0],Fe[1],G[0],G[1]);fe.overrideFog=R>=Cr||H>=Cr}}const he=Ls(c,h.paint.get("model-cutoff-fade-range"));he.shouldRenderCutoff&&fe.defines.push("RENDER_CUTOFF");const Ce=c.getOrCreateProgram("model",fe);c.uploadCommonUniforms(D,Ce,null,Ee,he),c.renderPass!=="shadow"&&be&&be.setupShadowsFromMatrix(g.nodeModelMatrix,Ce),Ce.draw(c,D.gl.TRIANGLES,L,_,w,U.material.doubleSided?Rn.disabled:Rn.backCCW,oe,h.id,U.vertexBuffer,U.indexBuffer,U.segments,h.paint,c.transform.zoom,void 0,Te)}function Ff(g,c,h,b,_,w,k){let D;D=g.projection.name==="globe"?a.cS(h,g):[...h],a.a6.multiply(D,D,c.matrix);const L=a.a6.multiply([],b,D);if(c.meshes)for(const B of c.meshes){if(B.material.alphaMode!=="BLEND"){k.push({mesh:B,depth:0,modelIndex:_,worldViewProjection:L,nodeModelMatrix:D});continue}const U=a.N.transformMat4([],B.centroid,L);U[2]>0&&w.push({mesh:B,depth:U[2],modelIndex:_,worldViewProjection:L,nodeModelMatrix:D})}if(c.children)for(const B of c.children)Ff(g,B,h,b,_,w,k)}function et(g,c,h,b){const _=h.shadowRenderer;if(!_)return;const w=_.getShadowPassDepthMode(),k=_.getShadowPassColorMode(),D=_.calculateShadowPassMatrixFromMatrix(c),L=Qd(D);h.getOrCreateProgram("modelDepth",{defines:h._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(h,h.context.gl.TRIANGLES,w,Dn.disabled,k,Rn.backCCW,L,b.id,g.vertexBuffer,g.indexBuffer,g.segments,b.paint,h.transform.zoom,void 0,void 0)}function ug(g,c,h){const b=c.updateZoomBasedPaintProperties(),_=function(w,k,D){let L,B,U,W=w.terrain?w.terrain.exaggeration():0;if(w.terrain&&W>0){const J=w.terrain,ee=J.findDEMTileFor(D);ee&&ee.dem?L=a.cU.create(J,D,ee):W=0}if(W===0&&(k.terrainElevationMin=0,k.terrainElevationMax=0),W===k.validForExaggeration&&(W===0||L&&L._demTile&&L._demTile.tileID===k.validForDEMTile.id&&L._dem._timestamp===k.validForDEMTile.timestamp))return!1;for(const J in k.instancesPerModel){const ee=k.instancesPerModel[J];for(let ce=0;ce<ee.instancedDataArray.length;++ce){const se=(L?W*L.getElevationAt(0|ee.instancedDataArray.float32[16*ce],0|ee.instancedDataArray.float32[16*ce+1],!0,!0):0)+ee.instancesEvaluatedElevation[ce];ee.instancedDataArray.float32[16*ce+6]=se,B=B?Math.min(k.terrainElevationMin,se):se,U=U?Math.max(k.terrainElevationMax,se):se}}return k.terrainElevationMin=B||0,k.terrainElevationMax=U||0,k.validForExaggeration=W,k.validForDEMTile=L&&L._demTile?{id:L._demTile.tileID,timestamp:L._dem._timestamp}:{id:void 0,timestamp:0},!0}(g,c,h);(b||_)&&(c.uploaded=!1,c.upload(g.context))}const ja={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new a.bS([0,0,0],[a.V,a.V,0])};function ty(g,c){const h=1<<g.canonical.z,b=c.getFreeCameraOptions().position,_=c.elevation,w=g.canonical.x/h,k=(g.canonical.x+1)/h,D=g.canonical.y/h,L=(g.canonical.y+1)/h;let B=c._centerAltitude;if(_){const ee=_.getMinMaxForTile(g);ee&&ee.max>B&&(B=ee.max)}const U=a.aa(b.x,w,k)-b.x,W=a.aa(b.y,D,L)-b.y,J=a.bl(B,c.center.lat)-b.z;return c._zoomFromMercatorZ(Math.sqrt(U*U+W*W+J*J))}function dg(g,c,h,b,_,w,k){const D=g.context,L=g.renderPass==="shadow",B=g.shadowRenderer,U=L&&B?B.getShadowPassDepthMode():new gn(D.gl.LEQUAL,gn.ReadWrite,g.depthRangeFor3D),W=g.isTileAffectedByFog(w);if(h.meshes)for(const J of h.meshes){const ee=["MODEL_POSITION_ON_GPU"],ce=[];let se,de,oe;b.instancedDataArray.length>20&&ee.push("INSTANCED_ARRAYS");const fe=Ls(g,c.paint.get("model-cutoff-fade-range"));if(fe.shouldRenderCutoff&&ee.push("RENDER_CUTOFF"),L&&B)se=g.getOrCreateProgram("modelDepth",{defines:ee}),de=Qd(k.shadowTileMatrix,k.shadowTileMatrix,Float32Array.from(h.matrix)),oe=B.getShadowPassColorMode();else{wo(ee,ce,J,g),se=g.getOrCreateProgram("model",{defines:ee,overrideFog:W});const be=J.material,Ee=be.pbrMetallicRoughness,he=c.paint.get("model-opacity"),Ce=c.paint.get("model-emissive-strength").constantOr(0);de=eg(w.expandedProjMatrix,Float32Array.from(h.matrix),new Float32Array(16),g,he,Ee.baseColorFactor,be.emissiveFactor,Ee.metallicFactor,Ee.roughnessFactor,be,Ce,c,_),B&&(k.shadowUniformsInitialized?se.setShadowUniformValues(D,B.getShadowUniformValues()):(B.setupShadows(w.toUnwrapped(),se,"model-tile",w.overscaledZ),k.shadowUniformsInitialized=!0)),oe=fe.shouldRenderCutoff||he<1||be.alphaMode!=="OPAQUE"?rr.alphaBlended:rr.unblended}g.uploadCommonUniforms(D,se,w.toUnwrapped(),null,fe);const Te=J.material.doubleSided?Rn.disabled:Rn.backCCW;if(b.instancedDataArray.length>20)ce.push(b.instancedDataBuffer),se.draw(g,D.gl.TRIANGLES,U,Dn.disabled,oe,Te,de,c.id,J.vertexBuffer,J.indexBuffer,J.segments,c.paint,g.transform.zoom,void 0,ce,b.instancedDataArray.length);else{const be=L?"u_instance":"u_normal_matrix";for(let Ee=0;Ee<b.instancedDataArray.length;++Ee)de[be]=new Float32Array(b.instancedDataArray.arrayBuffer,64*Ee,16),se.draw(g,D.gl.TRIANGLES,U,Dn.disabled,oe,Te,de,c.id,J.vertexBuffer,J.indexBuffer,J.segments,c.paint,g.transform.zoom,void 0,ce)}}if(h.children)for(const J of h.children)dg(g,c,J,b,_,w,k)}const Zu=[1,-1,1];function Nv(g,c,h,b){if(!h.modelManager)return!0;const _=h.modelManager;if(!h.shadowRenderer)return!0;const w=h.shadowRenderer,k=c.aabb;let D=!0,L=g.maxHeight;if(L===0){let U=0;for(const W in g.instancesPerModel){const J=_.getModel(W,b);J?U=Math.max(U,Math.max(Math.max(J.aabb.max[0],J.aabb.max[1]),J.aabb.max[2])):D=!1}L=g.maxScale*U*1.41+g.maxVerticalOffset,D&&(g.maxHeight=L)}k.max[2]=L,k.min[2]+=g.terrainElevationMin,k.max[2]+=g.terrainElevationMax,a.N.transformMat4(k.min,k.min,c.tileMatrix),a.N.transformMat4(k.max,k.max,c.tileMatrix);const B=k.intersects(w.getCurrentCascadeFrustum());return h.currentShadowCascade===0&&(g.isInsideFirstShadowMapFrustum=B===2),B===0}class zv{}class ny{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(c,h,b){{const W=this._storage.get(h.id);if(W)return W.lastUsedFrameIdx=c,W.buf}const _=b.gl,w=_.getBufferParameter(_.ELEMENT_ARRAY_BUFFER,_.BUFFER_SIZE),k=new ArrayBuffer(w),D=new Int16Array(k);_.getBufferSubData(_.ELEMENT_ARRAY_BUFFER,0,new Int16Array(k));const L=new a.cW;for(let W=0;W<w/2;W+=3){const J=D[W],ee=D[W+1],ce=D[W+2];L.emplaceBack(J,ee),L.emplaceBack(ee,ce),L.emplaceBack(ce,J)}const B=b.bindVertexArrayOES.current,U=new zv;return U.buf=new Zr(b,L),U.lastUsedFrameIdx=c,this._storage.set(h.id,U),b.bindVertexArrayOES.set(B),U.buf}update(c){for(const[h,b]of this._storage)c-b.lastUsedFrameIdx>30&&(b.buf.destroy(),this._storage.delete(h))}destroy(){for(const[c,h]of this._storage)h.buf.destroy(),this._storage.delete(c)}}class nh{registerParameter(c,h,b,_,w){}registerButton(c,h,b){}}const rh={symbol:function(g,c,h,b,_){if(g.renderPass!=="translucent")return;const w=Dn.disabled,k=g.colorModeForRenderPass();h.layout.get("text-variable-anchor")&&function(B,U,W,J,ee,ce,se){const de=U.transform,oe=ee==="map",fe=ce==="map";for(const Te of B){const be=J.getTile(Te),Ee=be.getBucket(W);if(!Ee||!Ee.text||!Ee.text.segments.get().length)continue;const he=a.b5(Ee.textSizeData,de.zoom),Ce=jd(Te,Ee.getProjection(),de),Ne=de.calculatePixelsToTileUnitsMatrix(be),Fe=Na(Ce,be.tileID.canonical,fe,oe,de,Ee.getProjection(),Ne),G=Ee.hasIconTextFit()&&Ee.hasIconData();if(he){const R=Math.pow(2,de.zoom-be.tileID.overscaledZ);Z0(Ee,oe,fe,se,a.cx,de,Fe,Te,R,he,G)}}}(b,g,h,c,h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),_);const D=h.paint.get("icon-opacity").constantOr(1)!==0,L=h.paint.get("text-opacity").constantOr(1)!==0;h.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(D||L)?zf(g,c,h,b,w,k):(D&&zf(g,c,h,b,w,k,{onlyIcons:!0}),L&&zf(g,c,h,b,w,k,{onlyText:!0})),c.map.showCollisionBoxes&&(ys(g,c,h,b,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),!0),ys(g,c,h,b,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),!1))},circle:function(g,c,h,b){if(g.renderPass!=="translucent")return;const _=h.paint.get("circle-opacity"),w=h.paint.get("circle-stroke-width"),k=h.paint.get("circle-stroke-opacity"),D=h.layout.get("circle-sort-key").constantOr(1)!==void 0,L=h.paint.get("circle-emissive-strength");if(_.constantOr(1)===0&&(w.constantOr(1)===0||k.constantOr(1)===0))return;const B=g.context,U=B.gl,W=g.transform,J=g.depthModeForSublayer(0,gn.ReadOnly),ee=Dn.disabled,ce=g.colorModeForDrapableLayerRenderPass(L),se=W.projection.name==="globe",de=[a.a5(W.center.lng),a.ae(W.center.lat)],oe=[];for(let Te=0;Te<b.length;Te++){const be=b[Te],Ee=c.getTile(be),he=Ee.getBucket(h);if(!he||he.projection.name!==W.projection.name)continue;const Ce=he.programConfigurations.get(h.id),Ne=a.cy(h),Fe=g.isTileAffectedByFog(be);se&&Ne.push("PROJECTION_GLOBE_VIEW");const G=g.getOrCreateProgram("circle",{config:Ce,defines:Ne,overrideFog:Fe}),R=he.layoutVertexBuffer,H=he.globeExtVertexBuffer,le=he.indexBuffer,ge=W.projection.createInversionMatrix(W,be.canonical),Oe={programConfiguration:Ce,program:G,layoutVertexBuffer:R,globeExtVertexBuffer:H,indexBuffer:le,uniformValues:a.cz(g,be,Ee,ge,de,h),tile:Ee};if(D){const Se=he.segments.get();for(const Le of Se)oe.push({segments:new a.aB([Le]),sortKey:Le.sortKey,state:Oe})}else oe.push({segments:he.segments,sortKey:0,state:Oe})}D&&oe.sort((Te,be)=>Te.sortKey-be.sortKey);const fe={useDepthForOcclusion:W.depthOcclusionForSymbolsAndCircles};for(const Te of oe){const{programConfiguration:be,program:Ee,layoutVertexBuffer:he,globeExtVertexBuffer:Ce,indexBuffer:Ne,uniformValues:Fe,tile:G}=Te.state,R=Te.segments;g.terrain&&g.terrain.setupElevationDraw(G,Ee,fe),g.uploadCommonUniforms(B,Ee,G.tileID.toUnwrapped()),Ee.draw(g,U.TRIANGLES,J,ee,ce,Rn.disabled,Fe,h.id,he,Ne,R,h.paint,W.zoom,be,[Ce])}},heatmap:function(g,c,h,b){if(h.paint.get("heatmap-opacity")!==0)if(g.renderPass==="offscreen"){const _=g.context,w=_.gl,k=Dn.disabled,D=new rr([w.ONE,w.ONE,w.ONE,w.ONE],a.ax.transparent,[!0,!0,!0,!0]);(function(ee,ce,se,de){const oe=ee.gl,fe=ce.width*de,Te=ce.height*de;ee.activeTexture.set(oe.TEXTURE1),ee.viewport.set([0,0,fe,Te]);let be=se.heatmapFbo;if(!be||be&&(be.width!==fe||be.height!==Te)){be&&be.destroy();const Ee=oe.createTexture();oe.bindTexture(oe.TEXTURE_2D,Ee),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_S,oe.CLAMP_TO_EDGE),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_T,oe.CLAMP_TO_EDGE),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MIN_FILTER,oe.LINEAR),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MAG_FILTER,oe.LINEAR),be=se.heatmapFbo=ee.createFramebuffer(fe,Te,!0,null),function(he,Ce,Ne,Fe,G,R){const H=he.gl;H.texImage2D(H.TEXTURE_2D,0,he.extRenderToTextureHalfFloat?H.RGBA16F:H.RGBA,G,R,0,H.RGBA,he.extRenderToTextureHalfFloat?H.HALF_FLOAT:H.UNSIGNED_BYTE,null),Fe.colorAttachment.set(Ne)}(ee,0,Ee,be,fe,Te)}else oe.bindTexture(oe.TEXTURE_2D,be.colorAttachment.get()),ee.bindFramebuffer.set(be.framebuffer)})(_,g,h,g.transform.projection.name==="globe"?.5:.25),_.clear({color:a.ax.transparent});const L=g.transform,B=L.projection.name==="globe",U=B?["PROJECTION_GLOBE_VIEW"]:[],W=B?Rn.frontCCW:Rn.disabled,J=[a.a5(L.center.lng),a.ae(L.center.lat)];for(let ee=0;ee<b.length;ee++){const ce=b[ee];if(c.hasRenderableParent(ce))continue;const se=c.getTile(ce),de=se.getBucket(h);if(!de||de.projection.name!==L.projection.name)continue;const oe=g.isTileAffectedByFog(ce),fe=de.programConfigurations.get(h.id),Te=g.getOrCreateProgram("heatmap",{config:fe,defines:U,overrideFog:oe}),{zoom:be}=g.transform;g.terrain&&g.terrain.setupElevationDraw(se,Te),g.uploadCommonUniforms(_,Te,ce.toUnwrapped());const Ee=L.projection.createInversionMatrix(L,ce.canonical);Te.draw(g,w.TRIANGLES,gn.disabled,k,D,W,Km(g,ce,se,Ee,J,be,h.paint.get("heatmap-intensity")),h.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,h.paint,g.transform.zoom,fe,B?[de.globeExtVertexBuffer]:null)}_.viewport.set([0,0,g.width,g.height])}else g.renderPass==="translucent"&&(g.context.setColorMode(g.colorModeForRenderPass()),function(_,w){const k=_.context,D=k.gl,L=w.heatmapFbo;if(!L)return;k.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,L.colorAttachment.get()),k.activeTexture.set(D.TEXTURE1);let B=w.colorRampTexture;B||(B=w.colorRampTexture=new a.T(k,w.colorRamp,D.RGBA)),B.bind(D.LINEAR,D.CLAMP_TO_EDGE),_.getOrCreateProgram("heatmapTexture").draw(_,D.TRIANGLES,gn.disabled,Dn.disabled,_.colorModeForRenderPass(),Rn.disabled,((U,W,J,ee)=>({u_image:0,u_color_ramp:1,u_opacity:W.paint.get("heatmap-opacity")}))(0,w),w.id,_.viewportBuffer,_.quadTriangleIndexBuffer,_.viewportSegments,w.paint,_.transform.zoom)}(g,h))},line:function(g,c,h,b){if(g.renderPass!=="translucent")return;const _=h.paint.get("line-opacity"),w=h.paint.get("line-width");if(_.constantOr(1)===0||w.constantOr(1)===0)return;const k=h.paint.get("line-emissive-strength"),D=g.depthModeForSublayer(0,gn.ReadOnly),L=g.colorModeForDrapableLayerRenderPass(k),B=g.terrain&&g.terrain.renderingToTexture?1:a.f.devicePixelRatio,U=h.paint.get("line-dasharray"),W=U.constantOr(1),J=h.layout.get("line-cap"),ee=h.paint.get("line-pattern"),ce=ee.constantOr(1),se=h.paint.get("line-pattern").constantOr(1),de=h.paint.get("line-opacity").constantOr(1)!==1;let oe=!se&&de;const fe=h.paint.get("line-gradient"),Te=ce?"linePattern":"line",be=g.context,Ee=be.gl,he=a.cA(h);g.terrain&&g.terrain.clipOrMaskOverlapStencilType()&&(oe=!1);for(const Ce of b){const Ne=c.getTile(Ce);if(ce&&!Ne.patternsLoaded())continue;const Fe=Ne.getBucket(h);if(!Fe)continue;g.prepareDrawTile();const G=Fe.programConfigurations.get(h.id),R=g.isTileAffectedByFog(Ce),H=g.getOrCreateProgram(Te,{config:G,defines:he,overrideFog:R}),le=ee.constantOr(null);if(le&&Ne.imageAtlas){const gt=Ne.imageAtlas.patternPositions[le.toString()];gt&&G.setConstantPatternPositions(gt)}const ge=U.constantOr(null),Oe=J.constantOr(null);if(!ce&&ge&&Oe&&Ne.lineAtlas){const gt=Ne.lineAtlas.getDash(ge,Oe);gt&&G.setConstantPatternPositions(gt)}let[Se,Le]=h.paint.get("line-trim-offset");(Oe==="round"||Oe==="square")&&Se!==Le&&(Se===0&&(Se-=1),Le===1&&(Le+=1));const ke=g.terrain?Ce.projMatrix:null,Ve=ce?a.cB(g,Ne,h,ke,B,[Se,Le]):a.cC(g,Ne,h,ke,Fe.lineClipsArray.length,B,[Se,Le]);if(fe){const gt=Fe.gradients[h.id];let yt=gt.texture;if(h.gradientVersion!==gt.version){let vt=256;if(h.stepInterpolant){const Wt=c.getSource().maxzoom,Vt=Ce.canonical.z===Wt?Math.ceil(1<<g.transform.maxZoom-Ce.canonical.z):1;vt=a.aa(a.cD(Fe.maxLineLength/a.V*1024*Vt),256,be.maxTextureSize)}gt.gradient=a.cE({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:vt,image:gt.gradient||void 0,clips:Fe.lineClipsArray}),gt.texture?gt.texture.update(gt.gradient):gt.texture=new a.T(be,gt.gradient,Ee.RGBA),gt.version=h.gradientVersion,yt=gt.texture}be.activeTexture.set(Ee.TEXTURE1),yt.bind(h.stepInterpolant?Ee.NEAREST:Ee.LINEAR,Ee.CLAMP_TO_EDGE)}W&&(be.activeTexture.set(Ee.TEXTURE0),Ne.lineAtlasTexture&&Ne.lineAtlasTexture.bind(Ee.LINEAR,Ee.REPEAT),G.updatePaintBuffers()),ce&&(be.activeTexture.set(Ee.TEXTURE0),Ne.imageAtlasTexture&&Ne.imageAtlasTexture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),G.updatePaintBuffers()),g.uploadCommonUniforms(be,H,Ce.toUnwrapped());const Ye=gt=>{H.draw(g,Ee.TRIANGLES,D,gt,L,Rn.disabled,Ve,h.id,Fe.layoutVertexBuffer,Fe.indexBuffer,Fe.segments,h.paint,g.transform.zoom,G,[Fe.layoutVertexBuffer2])};if(oe){const gt=g.stencilModeForClipping(Ce).ref;gt===0&&g.terrain&&be.clear({stencil:0});const yt={func:Ee.EQUAL,mask:255};Ve.u_alpha_discard_threshold=.8,Ye(new Dn(yt,gt,255,Ee.KEEP,Ee.KEEP,Ee.INVERT)),Ve.u_alpha_discard_threshold=0,Ye(new Dn(yt,gt,255,Ee.KEEP,Ee.KEEP,Ee.KEEP))}else Ye(g.stencilModeForClipping(Ce))}oe&&(g.resetStencilClippingMasks(),g.terrain&&be.clear({stencil:0}))},fill:function(g,c,h,b){const _=h.paint.get("fill-color"),w=h.paint.get("fill-opacity");if(w.constantOr(1)===0)return;const k=h.paint.get("fill-emissive-strength"),D=g.colorModeForDrapableLayerRenderPass(k),L=h.paint.get("fill-pattern"),B=g.opaquePassEnabledForLayer()&&!L.constantOr(1)&&_.constantOr(a.ax.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(g.renderPass===B){const U=g.depthModeForSublayer(1,g.renderPass==="opaque"?gn.ReadWrite:gn.ReadOnly);Gc(g,c,h,b,U,D,!1)}if(g.renderPass==="translucent"&&h.paint.get("fill-antialias")){const U=g.depthModeForSublayer(h.getPaintProperty("fill-outline-color")?2:0,gn.ReadOnly);Gc(g,c,h,b,U,D,!0)}},"fill-extrusion":function(g,c,h,b){const _=h.paint.get("fill-extrusion-opacity"),w=g.context,k=w.gl,D=g.terrain,L=D&&D.renderingToTexture;if(_===0)return;const B=g.conflationActive&&g.layerUsedInConflation(h,c.getSource());if(B&&function(U,W,J,ee){for(const ce of ee){const se=W.getTile(ce).getBucket(J);se&&(se.updateReplacement(ce,U.replacementSource),se.uploadCentroid(U.context))}}(g,c,h,b),D||B)for(const U of b){const W=c.getTile(U).getBucket(h);W&&Lv(g.context,c,U,W,h,D,B)}if(g.renderPass==="shadow"&&g.shadowRenderer){const U=g.shadowRenderer;if(D&&_<.65&&h._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof a.Z)return;const W=U.getShadowPassDepthMode(),J=U.getShadowPassColorMode();un(g,c,h,b,W,Dn.disabled,J,B)}else if(g.renderPass==="translucent"){const U=!h.paint.get("fill-extrusion-pattern").constantOr(1),W=h.paint.get("fill-extrusion-color").constantOr(a.ax.white);if(!L&&W.a!==0){const J=new gn(g.context.gl.LEQUAL,gn.ReadWrite,g.depthRangeFor3D);_===1&&U?un(g,c,h,b,J,Dn.disabled,rr.unblended,B):(un(g,c,h,b,J,Dn.disabled,rr.disabled,B),un(g,c,h,b,J,g.stencilModeFor3D(),g.colorModeForRenderPass(),B),g.resetStencilClippingMasks())}if(g.style.enable3dLights()&&U&&(!D&&g.transform.projection.name!=="globe"||L)){const J=h.paint.get("fill-extrusion-opacity"),ee=h.paint.get("fill-extrusion-ambient-occlusion-intensity"),ce=h.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),se=h.paint.get("fill-extrusion-flood-light-intensity"),de=h.paint.get("fill-extrusion-flood-light-color").toArray01().slice(0,3),oe=ee>0&&ce>0,fe=se>0,Te=(Ee,he,Ce)=>(1-Ce)*Ee+Ce*he,be=Ee=>{const he=g.depthModeForSublayer(1,gn.ReadOnly,k.LEQUAL,!0),Ce=h.paint.get(Ee?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Ne=Te(.1,3,Ce),Fe=g._showOverdrawInspector;if(!Fe){const G=new Dn({func:k.ALWAYS,mask:255},255,255,k.KEEP,k.KEEP,k.REPLACE),R=new rr([k.ONE,k.ONE,k.ONE,k.ONE],a.ax.transparent,[!1,!1,!1,!0],k.MIN);al(g,c,h,b,he,G,R,Rn.disabled,Ee,"sdf",J,ee,ce,se,de,Ne,B,!1)}{const G=Fe?Dn.disabled:new Dn({func:k.EQUAL,mask:255},255,255,k.KEEP,k.DECR,k.DECR),R=Fe?g.colorModeForRenderPass():new rr([k.ONE_MINUS_DST_ALPHA,k.DST_ALPHA,k.ONE,k.ONE],a.ax.transparent,[!0,!0,!0,!0]);al(g,c,h,b,he,G,R,Rn.disabled,Ee,"color",J,ee,ce,se,de,Ne,B,!1)}};if(L){const Ee=(he,Ce,Ne)=>{const Fe=g.depthModeForSublayer(1,gn.ReadOnly,k.LEQUAL,!1),G=h.paint.get(he?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),R=Te(.1,3,G);{const H=new rr([k.ONE,k.ONE,k.ONE,k.ONE],a.ax.transparent,[!1,!1,!1,!0]);al(g,c,h,b,Fe,Dn.disabled,H,Rn.disabled,he,"clear",J,ee,ce,se,de,R,B,Ce)}{const H=new Dn({func:k.ALWAYS,mask:255},255,255,k.KEEP,k.KEEP,k.REPLACE),le=new rr([k.ONE,k.ONE,k.ONE,k.ONE],a.ax.transparent,[!1,!1,!1,!0],k.MIN);al(g,c,h,b,Fe,H,le,Rn.disabled,he,"sdf",J,ee,ce,se,de,R,B,Ce)}{const H=he?k.ZERO:k.ONE_MINUS_DST_ALPHA,le=new Dn({func:k.EQUAL,mask:255},255,255,k.KEEP,k.DECR,k.DECR),ge=new rr([H,k.DST_ALPHA,k.ONE_MINUS_DST_ALPHA,k.ZERO],a.ax.transparent,[!0,!0,!0,!0]);al(g,c,h,b,Fe,le,ge,Rn.disabled,he,"color",J,ee,ce,se,de,R,B,Ce)}{const H=new rr([k.ONE,k.ONE,k.ONE,he?k.ZERO:k.ONE],a.ax.transparent,[!1,!1,!1,!0],he?k.FUNC_ADD:k.MAX);al(g,c,h,b,Fe,Dn.disabled,H,Rn.disabled,he,"clear",J,ee,ce,se,de,R,B,Ce,Ne)}};if(oe||fe){let he;if(g.prepareDrawTile(),D){const Ce=D.drapeBufferSize[0],Ne=D.drapeBufferSize[1];he=D.framebufferCopyTexture,he&&(!he||he.size[0]===Ce&&he.size[1]===Ne)||(he&&he.destroy(),he=D.framebufferCopyTexture=new a.T(w,new a.h({width:Ce,height:Ne}),k.RGBA)),he.bind(k.LINEAR,k.CLAMP_TO_EDGE),k.copyTexImage2D(k.TEXTURE_2D,0,k.RGBA,0,0,Ce,Ne,0)}oe&&Ee(!0,!1,he),fe&&Ee(!1,!0,he)}}else oe&&be(!0),fe&&be(!1)}}},hillshade:function(g,c,h,b){if(g.renderPass!=="offscreen"&&g.renderPass!=="translucent"||g.style.disableElevatedTerrain)return;const _=g.context,w=g.terrain&&g.terrain.renderingToTexture,[k,D]=g.renderPass!=="translucent"||w?[{},b]:g.stencilConfigForOverlap(b);for(const L of D){const B=c.getTile(L);if(B.needsHillshadePrepare&&g.renderPass==="offscreen")Fm(g,B,h);else if(g.renderPass==="translucent"){const U=g.depthModeForSublayer(0,gn.ReadOnly),W=h.paint.get("hillshade-emissive-strength"),J=g.colorModeForDrapableLayerRenderPass(W),ee=w&&g.terrain?g.terrain.stencilModeForRTTOverlap(L):k[L.overscaledZ];il(g,L,B,h,U,ee,J)}}_.viewport.set([0,0,g.width,g.height]),g.resetStencilClippingMasks()},raster:function(g,c,h,b,_,w){if(g.renderPass!=="translucent"||h.paint.get("raster-opacity")===0)return;const k=g.transform.projection.name==="globe",D=h.paint.get("raster-elevation")!==0,L=D&&k;if(g.renderElevatedRasterBackface&&!L)return;const B=g.context,U=B.gl,W=c.getSource(),J=function(he,Ce,Ne,Fe){const G=Ce.paint.get("raster-color"),R=he.type==="raster-array",H=[],le=Ce.paint.get("raster-resampling"),ge=Ce.paint.get("raster-color-mix");let Oe=Ce.paint.get("raster-color-range");const Se=[ge[0],ge[1],ge[2],0],Le=ge[3];let ke=le==="nearest"?Fe.NEAREST:Fe.LINEAR;if(R&&(H.push("RASTER_ARRAY"),G||H.push("RASTER_COLOR"),le==="linear"&&H.push("RASTER_ARRAY_LINEAR"),ke=Fe.NEAREST,!Oe&&he.rasterLayers)){const Ve=he.rasterLayers.find(({id:Ye})=>Ye===Ce.sourceLayer);Ve&&Ve.fields&&Ve.fields.range&&(Oe=Ve.fields.range)}if(Oe=Oe||[0,1],G){H.push("RASTER_COLOR"),Ne.activeTexture.set(Fe.TEXTURE2),Ce.updateColorRamp(Oe);let Ve=Ce.colorRampTexture;Ve||(Ve=Ce.colorRampTexture=new a.T(Ne,Ce.colorRamp,Fe.RGBA)),Ve.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE)}return{mix:Se,range:Oe,offset:Le,defines:H,resampling:ke}}(W,h,B,U);if(W instanceof a.ap&&!b.length&&!k)return;const ee=h.paint.get("raster-emissive-strength"),ce=g.colorModeForDrapableLayerRenderPass(ee),se=g.terrain&&g.terrain.renderingToTexture,de=!g.options.moving,oe=h.paint.get("raster-resampling")==="nearest"?U.NEAREST:U.LINEAR;if(W instanceof a.ap&&!b.length&&(W.onNorthPole||W.onSouthPole)){const he=D?g.stencilModeFor3D():Dn.disabled;return void tg(!!W.onNorthPole,null,g,c,h,ee,J,Rn.disabled,he)}if(!b.length)return;const[fe,Te]=W instanceof a.ap||se?[{},b]:g.stencilConfigForOverlap(b),be=Te[Te.length-1].overscaledZ;L&&J.defines.push("PROJECTION_GLOBE_VIEW"),D&&J.defines.push("RENDER_CUTOFF");const Ee=(he,Ce,Ne)=>{for(const Fe of he){const G=Fe.toUnwrapped(),R=c.getTile(Fe);if(se&&(!R||!R.hasData()))continue;B.activeTexture.set(U.TEXTURE0);const H=rg(R,W,h,J);if(!H||!H.texture)continue;const{texture:le,mix:ge,offset:Oe,tileSize:Se,buffer:Le}=H;let ke,Ve;se?(ke=gn.disabled,Ve=Fe.projMatrix):D?(ke=new gn(U.LEQUAL,gn.ReadWrite,g.depthRangeFor3D),Ve=k?Float32Array.from(g.transform.expandedFarZProjMatrix):g.transform.calculateProjMatrix(G,de)):(ke=g.depthModeForSublayer(Fe.overscaledZ-be,h.paint.get("raster-opacity")===1?gn.ReadWrite:gn.ReadOnly,U.LESS),Ve=g.transform.calculateProjMatrix(G,de));const Ye=g.terrain&&se?g.terrain.stencilModeForRTTOverlap(Fe):fe[Fe.overscaledZ],gt=w?0:h.paint.get("raster-fade-duration");R.registerFadeDuration(gt);const yt=c.findLoadedParent(Fe,0),vt=Um(R,yt,c,g.transform,gt);let Wt,Vt;g.terrain&&g.terrain.prepareDrawTile(),B.activeTexture.set(U.TEXTURE0),le.bind(oe,U.CLAMP_TO_EDGE),B.activeTexture.set(U.TEXTURE1),yt?(yt.texture&&yt.texture.bind(oe,U.CLAMP_TO_EDGE),Wt=Math.pow(2,yt.tileID.overscaledZ-R.tileID.overscaledZ),Vt=[R.tileID.canonical.x*Wt%1,R.tileID.canonical.y*Wt%1]):le.bind(oe,U.CLAMP_TO_EDGE),le.useMipmap&&B.extTextureFilterAnisotropic&&g.transform.pitch>20&&U.texParameterf(U.TEXTURE_2D,B.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,B.extTextureFilterAnisotropicMax);const Ht=g.transform;let Zt;const In=D?ng(Ht):[0,0,0,0];let xn,on,yn,Ln,lr,jn=0;if(L&&W instanceof a.ap&&W.coordinates.length>3)xn=Float32Array.from(a.aT(a.ci(new a.bs(0,0,0)))),on=Float32Array.from(Ht.globeMatrix),yn=Float32Array.from(a.ce(Ht)),Ln=[a.a5(Ht.center.lng),a.ae(Ht.center.lat)],Zt=W.elevatedGlobePerspectiveTransform,lr=W.elevatedGlobeGridMatrix||new Float32Array(9);else if(L){const qn=a.cf(Fe.canonical);jn=a.cg(qn.getCenter().lat),xn=Float32Array.from(a.aT(a.ci(Fe.canonical))),on=Float32Array.from(Ht.globeMatrix),yn=Float32Array.from(a.ce(Ht)),Ln=[a.a5(Ht.center.lng),a.ae(Ht.center.lat)],Zt=[0,0],lr=Float32Array.from(a.ch(Fe.canonical,qn,jn,Ht.worldSize/Ht._pixelsPerMercatorPixel))}else Zt=W instanceof a.ap?W.perspectiveTransform:[0,0],xn=new Float32Array(16),on=new Float32Array(9),yn=new Float32Array(16),Ln=[0,0],lr=new Float32Array(9);const Dr=Xm(Ve,xn,on,yn,lr,Vt||[0,0],a.S(g.transform.zoom),Ln,In,Wt||1,vt,h,Zt,D?h.paint.get("raster-elevation"):0,2,ge,Oe,J.range,Se,Le,ee),zn=g.isTileAffectedByFog(Fe),Qn=g.getOrCreateProgram("raster",{defines:J.defines,overrideFog:zn});if(g.uploadCommonUniforms(B,Qn,G),W instanceof a.ap){const qn=W.elevatedGlobeVertexBuffer,Jn=W.elevatedGlobeIndexBuffer;if(se||!k)W.boundsBuffer&&W.boundsSegments&&Qn.draw(g,U.TRIANGLES,ke,Dn.disabled,ce,Rn.disabled,Dr,h.id,W.boundsBuffer,g.quadTriangleIndexBuffer,W.boundsSegments);else if(qn&&Jn){const Xr=Ht.zoom<=a.bG?W.elevatedGlobeSegments:W.getSegmentsForLongitude(Ht.center.lng);Xr&&Qn.draw(g,U.TRIANGLES,ke,Dn.disabled,ce,Ce,Dr,h.id,qn,Jn,Xr)}}else if(L){ke=new gn(U.LEQUAL,gn.ReadOnly,g.depthRangeFor3D);const qn=g.globeSharedBuffers;if(qn){const[Jn,Xr,br]=qn.getGridBuffers(jn,!1);Qn.draw(g,U.TRIANGLES,ke,Ne||Ye,g.colorModeForRenderPass(),Ce,Dr,h.id,Jn,Xr,br)}}else{const{tileBoundsBuffer:qn,tileBoundsIndexBuffer:Jn,tileBoundsSegments:Xr}=g.getTileBoundsBuffers(R);Qn.draw(g,U.TRIANGLES,ke,Ye,ce,Rn.disabled,Dr,h.id,qn,Jn,Xr)}}if(!(W instanceof a.ap)&&L)for(const Fe of he){const G=Fe.canonical.y===(1<<Fe.canonical.z)-1;Fe.canonical.y===0&&tg(!0,Fe,g,c,h,ee,J,Ce,Ne||Dn.disabled),G&&tg(!1,Fe,g,c,h,ee,J,Ce===Rn.frontCW?Rn.backCW:Rn.frontCW,Ne||Dn.disabled)}};L?Ee(Te,g.renderElevatedRasterBackface?Rn.backCW:Rn.frontCW,g.stencilModeFor3D()):Ee(Te,Rn.disabled,void 0),g.resetStencilClippingMasks()},"raster-particle":function(g,c,h,b,_,w){g.renderPass==="offscreen"&&function(k,D,L,B){if(!B.length)return;const U=k.context,W=U.gl,J=D.getSource();if(!(J instanceof Bt))return;const ee=[];for(const de of B){const oe=D.getTile(de);if(!(oe instanceof $l))continue;const fe=sl(oe,J,L);if(!fe)continue;const Te=[fe.tileSize,fe.tileSize];let be=L.tileFramebuffer;be||(be=L.tileFramebuffer=U.createFramebuffer(Te[0],Te[1],!0,null));let Ee=oe.rasterParticleState;const he=L.paint.get("raster-particle-count");Ee||(Ee=oe.rasterParticleState=new Zo(U,de,Te,he));const Ce=Ee.update(L.lastInvalidatedAt);Ee.numParticles!==he&&Ee.setNumParticles(de,he);const Ne=Ee.targetColorTexture;Ee.targetColorTexture=Ee.backgroundColorTexture,Ee.backgroundColorTexture=Ne;const Fe=Ee.particleVertices0;Ee.particleVertices0=Ee.particleVertices1,Ee.particleVertices1=Fe,ee.push([de,fe,Ee,Ce])}if(ee.length===0)return;const ce=a.f.now(),se=L.previousDrawTimestamp?.001*(ce-L.previousDrawTimestamp):.0167;if(L.previousDrawTimestamp=ce,L.hasColorMap()){U.activeTexture.set(W.TEXTURE0+2);let de=L.colorRampTexture;de||(de=L.colorRampTexture=new a.T(U,L.colorRamp,W.RGBA)),de.bind(W.LINEAR,W.CLAMP_TO_EDGE)}U.bindFramebuffer.set(L.tileFramebuffer.framebuffer),U.activeTexture.set(W.TEXTURE0),function(de,oe,fe){const Te=de.context,be=Te.gl,Ee=oe.tileFramebuffer;Te.activeTexture.set(be.TEXTURE0);const he={u_texture:0,u_opacity:1.05*(Ne=oe.paint.get("raster-particle-fade-opacity-factor"))/(Ne+.05)},Ce=de.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var Ne;for(const Fe of fe){const[,,G,R]=Fe;Ee.colorAttachment.set(G.targetColorTexture.texture),Te.viewport.set([0,0,Ee.width,Ee.height]),Te.clear({color:a.ax.transparent}),R&&(G.backgroundColorTexture.bind(be.NEAREST,be.CLAMP_TO_EDGE),Ce.draw(de,be.TRIANGLES,gn.disabled,Dn.disabled,rr.alphaBlended,Rn.disabled,he,oe.id,de.viewportBuffer,de.quadTriangleIndexBuffer,de.viewportSegments))}}(k,L,ee),function(de,oe,fe,Te){const be=de.context.gl,Ee=fe.tileFramebuffer,he=de.transform.projection.name==="globe",Ce=fe.paint.get("raster-particle-max-speed");for(const Ne of Te){const[Fe,G,R]=Ne;G.texture.bind(be.LINEAR,be.CLAMP_TO_EDGE),Ee.colorAttachment.set(R.targetColorTexture.texture);const H=de.getOrCreateProgram("rasterParticleDraw",{defines:G.defines,overrideFog:!1}),le=G.scalarData?[]:[0,1,2,3].map(Se=>a.cG[Se](Fe));le.push(Fe);const ge=Fe.canonical.x,Oe=Fe.canonical.y;for(const Se of le){const Le=oe.getTile(he?Se.wrapped():Se);if(!Le)continue;const ke=Le.rasterParticleState;if(!ke)continue;const Ve=Pv([Se.canonical.x+(1<<Se.canonical.z)*(Se.wrap-Fe.wrap)-ge,Se.canonical.y-Oe],0,G.texture.size,2,Ce,G.textureOffset,G.scale,G.offset);H.draw(de,be.POINTS,gn.disabled,Dn.disabled,rr.alphaBlended,Rn.disabled,Ve,fe.id,ke.particleVertices0,void 0,ke.particleSegment)}}}(k,D,L,ee),function(de,oe,fe,Te){const be=de.context.gl;let Ee=oe.transformFeedbackObject;Ee||(Ee=oe.transformFeedbackObject=be.createTransformFeedback()),be.bindTransformFeedback(be.TRANSFORM_FEEDBACK,oe.transformFeedbackObject);const he=oe.paint.get("raster-particle-max-speed"),Ce=Te*oe.paint.get("raster-particle-speed-factor")*.3,Ne=(Fe=oe.paint.get("raster-particle-reset-rate-factor"),Math.pow(Fe,6));var Fe;for(const G of fe){const[,R,H]=G;R.texture.bind(be.LINEAR,be.CLAMP_TO_EDGE);const le=Qm(0,R.texture.size,he,Ce,Ne,R.textureOffset,R.scale,R.offset);de.getOrCreateProgram("rasterParticleUpdate",{defines:R.defines,transformFeedback:{bufferMode:be.SEPARATE_ATTRIBS,shaderVaryings:["v_new_particle"]}}).draw(de,be.POINTS,gn.disabled,Dn.disabled,rr.disabled,Rn.disabled,le,oe.id,H.particleVertices0,void 0,H.particleSegment,{},void 0,void 0,void 0,void 0,[{buffer:H.particleVertices1,targetIndex:0}])}be.bindTransformFeedback(be.TRANSFORM_FEEDBACK,null)}(k,L,ee,se)}(g,c,h,b),g.renderPass==="translucent"&&(function(k,D,L,B,U){const W=k.context,J=W.gl,ee=!k.options.moving,ce=k.transform.projection.name==="globe";if(!B.length)return;const[se,de]=k.stencilConfigForOverlap(B),oe=[];ce&&oe.push("PROJECTION_GLOBE_VIEW");for(const fe of de){const Te=fe.toUnwrapped(),be=D.getTile(fe);if(!be.rasterParticleState)continue;const Ee=be.rasterParticleState,he=100;be.registerFadeDuration(he);const Ce=D.findLoadedParent(fe,0),Ne=Um(be,Ce,D,k.transform,he);let Fe,G;k.terrain&&k.terrain.prepareDrawTile(),W.activeTexture.set(J.TEXTURE0),Ee.targetColorTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),W.activeTexture.set(J.TEXTURE1),Ce&&Ce.rasterParticleState?(Ce.rasterParticleState.targetColorTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),Fe=Math.pow(2,Ce.tileID.overscaledZ-be.tileID.overscaledZ),G=[be.tileID.canonical.x*Fe%1,be.tileID.canonical.y*Fe%1]):Ee.targetColorTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE);const R=ce?Float32Array.from(k.transform.expandedFarZProjMatrix):k.transform.calculateProjMatrix(Te,ee),H=k.transform,le=og(H),ge=a.cf(fe.canonical),Oe=a.cg(ge.getCenter().lat);let Se,Le,ke,Ve,Ye;ce?(Se=Float32Array.from(a.aT(a.ci(fe.canonical))),Le=Float32Array.from(H.globeMatrix),ke=Float32Array.from(a.ce(H)),Ve=[a.a5(H.center.lng),a.ae(H.center.lat)],Ye=Float32Array.from(a.ch(fe.canonical,ge,Oe,H.worldSize/H._pixelsPerMercatorPixel))):(Se=new Float32Array(16),Le=new Float32Array(9),ke=new Float32Array(16),Ve=[0,0],Ye=new Float32Array(9));const gt=Iv(R,Se,Le,ke,Ye,G||[0,0],a.S(k.transform.zoom),Ve,le,Fe||1,Ne,250),yt=k.isTileAffectedByFog(fe),vt=k.getOrCreateProgram("rasterParticle",{defines:oe,overrideFog:yt});if(k.uploadCommonUniforms(W,vt,Te),ce){const Wt=new gn(J.LEQUAL,gn.ReadWrite,k.depthRangeFor3D),Vt=0,Ht=k.globeSharedBuffers;if(Ht){const[Zt,In,xn]=Ht.getGridBuffers(Oe,Vt!==0);vt.draw(k,J.TRIANGLES,Wt,Dn.disabled,rr.alphaBlended,Rn.backCCW,gt,L.id,Zt,In,xn)}}else{const Wt=k.depthModeForSublayer(0,gn.ReadOnly),Vt=se[fe.overscaledZ],{tileBoundsBuffer:Ht,tileBoundsIndexBuffer:Zt,tileBoundsSegments:In}=k.getTileBoundsBuffers(be);vt.draw(k,J.TRIANGLES,Wt,Vt,rr.alphaBlended,Rn.disabled,gt,L.id,Ht,Zt,In)}}k.resetStencilClippingMasks()}(g,c,h,b),g.style.map.triggerRepaint())},background:function(g,c,h,b){const _=h.paint.get("background-color"),w=h.paint.get("background-opacity"),k=h.paint.get("background-emissive-strength");if(w===0)return;const D=g.context,L=D.gl,B=g.transform,U=B.tileSize,W=h.paint.get("background-pattern");if(g.isPatternMissing(W,h.scope))return;const J=!W&&_.a===1&&w===1&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass!==J)return;const ee=Dn.disabled,ce=g.depthModeForSublayer(0,J==="opaque"?gn.ReadWrite:gn.ReadOnly),se=g.colorModeForDrapableLayerRenderPass(k),de=W?"backgroundPattern":"background";let oe,fe=b;fe||(oe=g.getBackgroundTiles(),fe=Object.values(oe).map(Te=>Te.tileID)),W&&(D.activeTexture.set(L.TEXTURE0),g.imageManager.bind(g.context,h.scope));for(const Te of fe){const be=g.isTileAffectedByFog(Te),Ee=g.getOrCreateProgram(de,{overrideFog:be}),he=Te.toUnwrapped(),Ce=b?Te.projMatrix:g.transform.calculateProjMatrix(he);g.prepareDrawTile();const Ne=c?c.getTile(Te):oe?oe[Te.key]:new Ds(Te,U,B.zoom,g),Fe=W?Xd(Ce,k,w,g,W,h.scope,{tileID:Te,tileSize:U}):Kd(Ce,k,w,_);g.uploadCommonUniforms(D,Ee,he);const{tileBoundsBuffer:G,tileBoundsIndexBuffer:R,tileBoundsSegments:H}=g.getTileBoundsBuffers(Ne);Ee.draw(g,L.TRIANGLES,ce,ee,se,Rn.disabled,Fe,h.id,G,R,H)}},sky:function(g,c,h){const b=g._atmosphere?a.S(g.transform.zoom):1,_=h.paint.get("sky-opacity")*b;if(_===0)return;const w=g.context,k=h.paint.get("sky-type"),D=new gn(w.gl.LEQUAL,gn.ReadOnly,[0,1]),L=g.frameCounter/1e3%1;k==="atmosphere"?g.renderPass==="offscreen"?h.needsSkyboxCapture(g)&&(function(B,U,W,J){const ee=B.context,ce=ee.gl;let se=U.skyboxFbo;if(!se){se=U.skyboxFbo=ee.createFramebuffer(32,32,!0,null),U.skyboxGeometry=new cg(ee),U.skyboxTexture=ee.gl.createTexture(),ce.bindTexture(ce.TEXTURE_CUBE_MAP,U.skyboxTexture),ce.texParameteri(ce.TEXTURE_CUBE_MAP,ce.TEXTURE_WRAP_S,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_CUBE_MAP,ce.TEXTURE_WRAP_T,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_CUBE_MAP,ce.TEXTURE_MIN_FILTER,ce.LINEAR),ce.texParameteri(ce.TEXTURE_CUBE_MAP,ce.TEXTURE_MAG_FILTER,ce.LINEAR);for(let Te=0;Te<6;++Te)ce.texImage2D(ce.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,ce.RGBA,32,32,0,ce.RGBA,ce.UNSIGNED_BYTE,null)}ee.bindFramebuffer.set(se.framebuffer),ee.viewport.set([0,0,32,32]);const de=U.getCenter(B,!0),oe=B.getOrCreateProgram("skyboxCapture"),fe=new Float64Array(16);a.a6.identity(fe),a.a6.rotateY(fe,fe,.5*-Math.PI),Jl(B,U,oe,fe,de,0),a.a6.identity(fe),a.a6.rotateY(fe,fe,.5*Math.PI),Jl(B,U,oe,fe,de,1),a.a6.identity(fe),a.a6.rotateX(fe,fe,.5*-Math.PI),Jl(B,U,oe,fe,de,2),a.a6.identity(fe),a.a6.rotateX(fe,fe,.5*Math.PI),Jl(B,U,oe,fe,de,3),a.a6.identity(fe),Jl(B,U,oe,fe,de,4),a.a6.identity(fe),a.a6.rotateY(fe,fe,Math.PI),Jl(B,U,oe,fe,de,5),ee.viewport.set([0,0,B.width,B.height])}(g,h),h.markSkyboxValid(g)):g.renderPass==="sky"&&function(B,U,W,J,ee){const ce=B.context,se=ce.gl,de=B.transform,oe=B.getOrCreateProgram("skybox");ce.activeTexture.set(se.TEXTURE0),se.bindTexture(se.TEXTURE_CUBE_MAP,U.skyboxTexture);const fe=((Te,be,Ee,he,Ce)=>({u_matrix:Te,u_sun_direction:be,u_cubemap:0,u_opacity:he,u_temporal_offset:Ce}))(de.skyboxMatrix,U.getCenter(B,!1),0,J,ee);B.uploadCommonUniforms(ce,oe),oe.draw(B,se.TRIANGLES,W,Dn.disabled,B.colorModeForRenderPass(),Rn.backCW,fe,"skybox",U.skyboxGeometry.vertexBuffer,U.skyboxGeometry.indexBuffer,U.skyboxGeometry.segment)}(g,h,D,_,L):k==="gradient"&&g.renderPass==="sky"&&function(B,U,W,J,ee){const ce=B.context,se=ce.gl,de=B.transform,oe=B.getOrCreateProgram("skyboxGradient");U.skyboxGeometry||(U.skyboxGeometry=new cg(ce)),ce.activeTexture.set(se.TEXTURE0);let fe=U.colorRampTexture;fe||(fe=U.colorRampTexture=new a.T(ce,U.colorRamp,se.RGBA)),fe.bind(se.LINEAR,se.CLAMP_TO_EDGE);const Te=((be,Ee,he,Ce,Ne)=>({u_matrix:be,u_color_ramp:0,u_center_direction:Ee,u_radius:a.bj(he),u_opacity:Ce,u_temporal_offset:Ne}))(de.skyboxMatrix,U.getCenter(B,!1),U.paint.get("sky-gradient-radius"),J,ee);B.uploadCommonUniforms(ce,oe),oe.draw(B,se.TRIANGLES,W,Dn.disabled,B.colorModeForRenderPass(),Rn.backCW,Te,"skyboxGradient",U.skyboxGeometry.vertexBuffer,U.skyboxGeometry.indexBuffer,U.skyboxGeometry.segment)}(g,h,D,_,L)},debug:function(g,c,h,b,_,w){for(let k=0;k<h.length;k++)if(_){const B=new a.ax(b.r*.8,b.g*.8,b.b*.8,1);ll(g,c,h[k],b,-1,-1,w),ll(g,c,h[k],b,-1,1,w),ll(g,c,h[k],b,1,1,w),ll(g,c,h[k],b,1,-1,w),ll(g,c,h[k],B,0,0,w)}else ll(g,c,h[k],b,0,0,w)},custom:function(g,c,h,b){const _=g.context,w=h.implementation;if(!g.transform.projection.unsupportedLayers||!g.transform.projection.unsupportedLayers.includes("custom")||g.terrain&&(g.terrain.renderingToTexture||g.renderPass==="offscreen")&&h.isLayerDraped(c)){if(g.renderPass==="offscreen"){const k=w.prerender;if(k){if(g.setCustomLayerDefaults(),_.setColorMode(g.colorModeForRenderPass()),g.transform.projection.name==="globe"){const D=g.transform.pointMerc;k.call(w,_.gl,g.transform.customLayerMatrix(),g.transform.getProjection(),g.transform.globeToMercatorMatrix(),a.S(g.transform.zoom),[D.x,D.y],g.transform.pixelsPerMeterRatio)}else k.call(w,_.gl,g.transform.customLayerMatrix());_.setDirty(),g.setBaseState()}}else if(g.renderPass==="translucent"){if(g.terrain&&g.terrain.renderingToTexture){const D=w.renderToTile;if(D){const L=b[0].canonical,B=new a.L(L.x+b[0].wrap*(1<<L.z),L.y,L.z);_.setDepthMode(gn.disabled),_.setStencilMode(Dn.disabled),_.setColorMode(g.colorModeForRenderPass()),g.setCustomLayerDefaults(),D.call(w,_.gl,B),_.setDirty(),g.setBaseState()}return}g.setCustomLayerDefaults(),_.setColorMode(g.colorModeForRenderPass()),_.setStencilMode(Dn.disabled);const k=w.renderingMode==="3d"?new gn(g.context.gl.LEQUAL,gn.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,gn.ReadOnly);if(_.setDepthMode(k),g.transform.projection.name==="globe"){const D=g.transform.pointMerc;w.render(_.gl,g.transform.customLayerMatrix(),g.transform.getProjection(),g.transform.globeToMercatorMatrix(),a.S(g.transform.zoom),[D.x,D.y],g.transform.pixelsPerMeterRatio)}else w.render(_.gl,g.transform.customLayerMatrix());_.setDirty(),g.setBaseState(),_.bindFramebuffer.set(null)}}else a.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(g,c,h,b){if(g.renderPass==="opaque")return;const _=h.paint.get("model-opacity");if(_===0)return;const w=h.paint.get("model-cast-shadows");if(g.renderPass==="shadow"&&(!w||g.terrain&&_<.65&&h._transitionablePaint._values["model-opacity"].value.expression instanceof a.Z))return;const k=g.shadowRenderer,D=h.paint.get("model-receive-shadows");k&&(k.useNormalOffset=!0,D||(k.enabled=!1));const L=()=>{k&&(k.useNormalOffset=!0,D||(k.enabled=!0))},B=c.getSource();if(g.renderPass==="light-beam"&&B.type!=="batched-model")return;if(B.type==="vector"||B.type==="geojson")return function(oe,fe,Te,be){const Ee=oe.transform;if(Ee.projection.name!=="mercator")return void a.w(`Drawing 3D models for ${Ee.projection.name} projection is not yet implemented`);const he=Ee.getFreeCameraOptions().position;if(!oe.modelManager)return;const Ce=oe.modelManager;Te.modelManager=Ce;const Ne=oe.shadowRenderer;if(!Te._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const Fe=Te._unevaluatedLayout._values["model-id"],G={...Te.layout.get("model-id").parameters};for(const R of be){const H=fe.getTile(R).getBucket(Te);if(!H||H.projection.name!==Ee.projection.name)continue;const le=ty(R,Ee);G.zoom=le;const ge=Fe.possiblyEvaluate(G);if(ug(oe,H,R),ja.shadowUniformsInitialized=!1,ja.useSingleShadowCascade=!!Ne&&Ne.getMaxCascadeForTile(R.toUnwrapped())===0,oe.renderPass==="shadow"&&Ne){if(oe.currentShadowCascade===1&&H.isInsideFirstShadowMapFrustum)continue;const Le=Ee.calculatePosMatrix(R.toUnwrapped(),Ee.worldSize);if(ja.tileMatrix.set(Le),ja.shadowTileMatrix=Float32Array.from(Ne.calculateShadowPassMatrixFromMatrix(Le)),ja.aabb.min.fill(0),ja.aabb.max[0]=ja.aabb.max[1]=a.V,ja.aabb.max[2]=0,Nv(H,ja,oe,Te.scope))continue}const Oe=1<<R.canonical.z,Se=[((he.x-R.wrap)*Oe-R.canonical.x)*a.V,(he.y*Oe-R.canonical.y)*a.V,he.z*Oe*a.V];for(let Le in H.instancesPerModel){const ke=H.instancesPerModel[Le];ke.features.length>0&&(Le=ge.evaluate(ke.features[0].feature,{}));const Ve=Ce.getModel(Le,Te.scope);if(Ve&&Ve.uploaded)for(const Ye of Ve.nodes)dg(oe,Te,Ye,ke,Se,R,ja)}}}(g,c,h,b),void L();if(!B.loaded())return;if(B.type==="batched-model")return function(oe,fe,Te,be){Te.resetLayerRenderingStats(oe);const Ee=oe.context,he=oe.transform,Ce=oe.style.fog,Ne=oe.shadowRenderer;if(he.projection.name!=="mercator")return void a.w(`Drawing 3D landmark models for ${he.projection.name} projection is not yet implemented`);const Fe=oe.transform.getFreeCameraOptions().position,G=a.N.scale([],[Fe.x,Fe.y,Fe.z],oe.transform.worldSize);a.N.negate(G,G);const R=a.a6.identity([]),H=a.cR(he.center.lat,he.zoom),le=a.a6.fromScaling([],[1,1,1/H]);a.a6.translate(R,R,G);const ge=Te.paint.get("model-opacity"),Oe=new gn(Ee.gl.LEQUAL,gn.ReadWrite,oe.depthRangeFor3D),Se=new gn(Ee.gl.LEQUAL,gn.ReadOnly,oe.depthRangeFor3D),Le=new a.bS([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),ke=oe.renderPass==="shadow",Ve=ke&&Ne?Ne.getCurrentCascadeFrustum():he.getFrustum(he.scaleZoom(he.worldSize)),Ye=Te.getLayerRenderingStats(),gt=function(yt,vt){for(const Wt of be){const Vt=fe.getTile(Wt).getBucket(Te);if(!Vt||!Vt.uploaded)continue;let Ht=!1;Ne&&(Ht=Ne.getMaxCascadeForTile(Wt.toUnwrapped())===0);const Zt=he.calculatePosMatrix(Wt.toUnwrapped(),he.worldSize),In=Vt.modelTraits;for(const xn of Vt.getNodesInfo()){if(xn.hiddenByReplacement||!xn.node.meshes)continue;const on=xn.evaluatedScale,yn=xn.node;let Ln=0;if(oe.terrain&&yn.elevation&&(Ln=yn.elevation*oe.terrain.exaggeration()),on[0]<=1&&on[1]<=1&&on[2]<=1&&(()=>{const Xr=xn.getLocalBounds();return Le.min=[...Xr.min],Le.max=[...Xr.max],Le.min[2]+=Ln,Le.max[2]+=Ln,a.N.transformMat4(Le.min,Le.min,Zt),a.N.transformMat4(Le.max,Le.max,Zt),Le})().intersects(Ve)===0)continue;const lr=oe.renderPass==="light-beam",jn=[...Zt];a.a6.translate(jn,jn,[(yn.anchor?yn.anchor[0]:0)*(on[0]-1),(yn.anchor?yn.anchor[1]:0)*(on[1]-1),Ln]),a.N.exactEquals(on,a.cT)||a.a6.scale(jn,jn,on),a.a6.multiply(jn,jn,yn.matrix);const Dr=a.a6.multiply([],le,jn);a.a6.multiply(Dr,R,Dr);const zn=a.a6.invert([],Dr);a.a6.transpose(zn,zn),a.a6.scale(zn,zn,Zu);const Qn=a.a6.multiply([],he.expandedFarZProjMatrix,jn),qn=In&a.cV.HasMapboxMeshFeatures,Jn=qn?0:xn.evaluatedRMEA[0][2];for(let Xr=0;Xr<yn.meshes.length;++Xr){const br=yn.meshes[Xr],uo=Xr===yn.lightMeshIndex;if(uo){if(!lr&&!oe.terrain&&oe.shadowRenderer){oe.currentLayer<oe.firstLightBeamLayer&&(oe.firstLightBeamLayer=oe.currentLayer);continue}}else if(lr)continue;const Eo={defines:[]},Ui=[];if(wo(Eo.defines,Ui,br,oe),qn||Eo.defines.push("DIFFUSE_SHADED"),Ht&&Eo.defines.push("SHADOWS_SINGLE_CASCADE"),Ye&&(ke?Ye.numRenderedVerticesInShadowPass+=br.vertexArray.length:Ye.numRenderedVerticesInTransparentPass+=br.vertexArray.length),ke){et(br,jn,oe,Te);continue}let oa=null;if(Ce){const ri=qc(jn,oe.transform);if(oa=new Float32Array(ri),he.projection.name!=="globe"){const Sa=br.aabb.min,_s=br.aabb.max,[$a,Qc]=Ce.getOpacityForBounds(ri,Sa[0],Sa[1],_s[0],_s[1]);Eo.overrideFog=$a>=Cr||Qc>=Cr}}const Vi=br.material;let Qo;Vi.occlusionTexture&&Vi.occlusionTexture.offsetScale&&(Qo=Vi.occlusionTexture.offsetScale,Eo.defines.push("OCCLUSION_TEXTURE_TRANSFORM")),!ke&&Ne&&(Ne.useNormalOffset=!!br.normalBuffer);const Oo=oe.getOrCreateProgram("model",Eo);!ke&&Ne&&Ne.setupShadowsFromMatrix(jn,Oo,Ne.useNormalOffset),oe.uploadCommonUniforms(Ee,Oo,Wt.toUnwrapped(),oa);const _i=Vi.pbrMetallicRoughness;_i.metallicFactor=.9,_i.roughnessFactor=.5;const ui=eg(new Float32Array(Qn),new Float32Array(Dr),new Float32Array(zn),oe,ge,_i.baseColorFactor,Vi.emissiveFactor,_i.metallicFactor,_i.roughnessFactor,Vi,Jn,Te,[0,0,0],Qo);Oo.draw(oe,Ee.gl.TRIANGLES,vt&&!uo?Oe:Se,Dn.disabled,yt?uo||ge<1||xn.hasTranslucentParts?rr.alphaBlended:rr.unblended:rr.disabled,Rn.backCCW,ui,Te.id,br.vertexBuffer,br.indexBuffer,br.segments,Te.paint,oe.transform.zoom,void 0,Ui)}}}};(function(yt,vt,Wt,Vt){const Ht=yt.terrain?yt.terrain.exaggeration():0,Zt=yt.transform.zoom;for(const In of Vt){const xn=vt.getTile(In).getBucket(Wt);xn&&(yt.conflationActive&&xn.updateReplacement(In,yt.replacementSource),xn.evaluateScale(yt,Wt),yt.terrain&&Ht>0&&xn.elevationUpdate(yt.terrain,Ht,In,Wt.source),xn.needsReEvaluation(yt,Zt,Wt)&&xn.evaluate(Wt))}})(oe,fe,Te,be),ge===1?gt(!0,!0):(gt(!1,!0),gt(!0,!1))}(g,c,h,b),void L();const U=B.getModels(),W=[],J=g.transform.getFreeCameraOptions().position,ee=a.N.scale([],[J.x,J.y,J.z],g.transform.worldSize);a.N.negate(ee,ee);const ce=[],se=[];let de=0;for(const oe of U){const fe=h.paint.get("model-rotation").constantOr(null),Te=h.paint.get("model-scale").constantOr(null),be=h.paint.get("model-translation").constantOr(null);oe.computeModelMatrix(g,fe,Te,be,!0,!0,!1);const Ee=a.a6.identity([]),he=a.cR(oe.position.lat,g.transform.zoom),Ce=a.a6.fromScaling([],[1,1,1/he]);a.a6.translate(Ee,Ee,ee),W.push({zScaleMatrix:Ce,negCameraPosMatrix:Ee});for(const Ne of oe.nodes)Ff(g.transform,Ne,oe.matrix,g.transform.expandedFarZProjMatrix,de,ce,se);de++}if(ce.sort((oe,fe)=>fe.depth-oe.depth),g.renderPass!=="shadow"){if(_===1)for(const oe of se)Fa(oe,g,h,W[oe.modelIndex],Dn.disabled,g.colorModeForRenderPass());else{for(const oe of se)Fa(oe,g,h,W[oe.modelIndex],Dn.disabled,rr.disabled);for(const oe of se)Fa(oe,g,h,W[oe.modelIndex],g.stencilModeFor3D(),g.colorModeForRenderPass());g.resetStencilClippingMasks()}for(const oe of ce)Fa(oe,g,h,W[oe.modelIndex],Dn.disabled,g.colorModeForRenderPass());L()}else{for(const oe of se)et(oe.mesh,oe.nodeModelMatrix,g,h);for(const oe of ce)et(oe.mesh,oe.nodeModelMatrix,g,h);L()}}},hg={model:function(g,c,h){const b=g.scope,_=c.getSource();if(!_.loaded())return;if(_.type==="vector"||_.type==="geojson")return void(h.modelManager&&h.modelManager.upload(h,b));if(_.type==="batched-model")return;const w=_.getModels();for(const k of w)k.upload(h.context)},raster:function(g,c,h){const b=c.getSource();if(!(b instanceof Bt&&b.loaded()))return;const _=g.sourceLayer||b.rasterLayerIds&&b.rasterLayerIds[0];if(!_)return;const w=g.paint.get("raster-array-band")||b.getInitialBand(_);if(w==null)return;const k=c.getIds().map(D=>c.getTileByID(D));for(const D of k)D.updateNeeded(_,w)&&b.prepareTile(D,_,w)},"raster-particle":function(g,c,h){const b=c.getSource();if(!(b instanceof Bt&&b.loaded()))return;const _=g.sourceLayer||b.rasterLayerIds&&b.rasterLayerIds[0];if(!_)return;const w=g.paint.get("raster-particle-array-band")||b.getInitialBand(_);if(w==null)return;const k=c.getIds().map(D=>c.getTileByID(D));for(const D of k)D.updateNeeded(_,w)&&b.prepareTile(D,_,w)}};class jf{constructor(c,h,b,_){this.context=new ff(c,h),this.transform=b,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=_,this._debugParams={showTerrainProxyTiles:!1},_.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),this.setup(),this.numSublayers=Ka.maxUnderzooming+Ka.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new a.cX,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new Om(this),this._wireframeDebugCache=new ny,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0}updateTerrain(c,h){const b=!!c&&!!c.terrain&&this.transform.projection.supportsTerrain;if(!(b||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Rv(this,c));const _=this._terrain;this.transform.elevation=b?_:null,_.update(c,this.transform,h),this.transform.elevation&&!_.enabled&&(this.transform.elevation=null)}_updateFog(c){const h=c.fog;if(!h||this.transform.projection.name==="globe"||h.getOpacity(this.transform.pitch)<1||h.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[b,_]=h.getFovAdjustedRange(this.transform._fov);if(b>_)return void(this.transform.fogCullDistSq=null);const w=b+.78*(_-b);this.transform.fogCullDistSq=w*w}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(c,h){if(this.width=c*a.f.devicePixelRatio,this.height=h*a.f.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style.order)this.style._mergedLayers[b].resize()}setup(){const c=this.context,h=new a.aN;h.emplaceBack(0,0),h.emplaceBack(a.V,0),h.emplaceBack(0,a.V),h.emplaceBack(a.V,a.V),this.tileExtentBuffer=c.createVertexBuffer(h,a.aP.members),this.tileExtentSegments=a.aB.simpleSegment(0,0,4,2);const b=new a.aN;b.emplaceBack(0,0),b.emplaceBack(a.V,0),b.emplaceBack(0,a.V),b.emplaceBack(a.V,a.V),this.debugBuffer=c.createVertexBuffer(b,a.aP.members),this.debugSegments=a.aB.simpleSegment(0,0,4,5);const _=new a.aN;_.emplaceBack(-1,-1),_.emplaceBack(1,-1),_.emplaceBack(-1,1),_.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(_,a.aP.members),this.viewportSegments=a.aB.simpleSegment(0,0,4,2);const w=new a.av;w.emplaceBack(0,0,0,0),w.emplaceBack(a.V,0,a.V,0),w.emplaceBack(0,a.V,0,a.V),w.emplaceBack(a.V,a.V,a.V,a.V),this.mercatorBoundsBuffer=c.createVertexBuffer(w,a.aR.members),this.mercatorBoundsSegments=a.aB.simpleSegment(0,0,4,2);const k=new a.aw;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(k);const D=new a.aO;for(const B of[0,1,3,2,0])D.emplaceBack(B);this.debugIndexBuffer=c.createIndexBuffer(D),this.emptyTexture=new a.T(c,new a.h({width:1,height:1},Uint8Array.of(0,0,0,0)),c.gl.RGBA),this.identityMat=a.a6.create();const L=this.context.gl;this.stencilClearMode=new Dn({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(c){return c._makeTileBoundsBuffers(this.context,this.transform.projection),c._tileBoundsBuffer?{tileBoundsBuffer:c._tileBoundsBuffer,tileBoundsIndexBuffer:c._tileBoundsIndexBuffer,tileBoundsSegments:c._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const c=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,c.TRIANGLES,gn.disabled,this.stencilClearMode,rr.disabled,Rn.disabled,$m(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(c,h,b){if(!h||this.currentStencilSource===h.id||!c.isTileClipped()||!b||b.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let D=!1;for(const L of b)if(this._tileClippingMaskIDs[L.key]===void 0){D=!0;break}if(!D)return}this.currentStencilSource=h.id;const _=this.context,w=_.gl;this.nextStencilID+b.length>256&&this.clearStencil(),_.setColorMode(rr.disabled),_.setDepthMode(gn.disabled);const k=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const D of b){const L=h.getTile(D),B=this._tileClippingMaskIDs[D.key]=this.nextStencilID++,{tileBoundsBuffer:U,tileBoundsIndexBuffer:W,tileBoundsSegments:J}=this.getTileBoundsBuffers(L);k.draw(this,w.TRIANGLES,gn.disabled,new Dn({func:w.ALWAYS,mask:0},B,255,w.KEEP,w.KEEP,w.REPLACE),rr.disabled,Rn.disabled,$m(D.projMatrix),"$clipping",U,W,J)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const c=this.nextStencilID++,h=this.context.gl;return new Dn({func:h.NOTEQUAL,mask:255},c,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(c){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(c);const h=this.context.gl;return new Dn({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(c){const h=this.context.gl,b=c.sort((k,D)=>D.overscaledZ-k.overscaledZ),_=b[b.length-1].overscaledZ,w=b[0].overscaledZ-_+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const k={};for(let D=0;D<w;D++)k[D+_]=new Dn({func:h.GEQUAL,mask:255},D+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=w,[k,b]}return[{[_]:Dn.disabled},b]}colorModeForRenderPass(){const c=this.context.gl;return this._showOverdrawInspector?new rr([c.CONSTANT_COLOR,c.ONE,c.CONSTANT_COLOR,c.ONE],new a.ax(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?rr.unblended:rr.alphaBlended}colorModeForDrapableLayerRenderPass(c){const h=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new rr([h.ONE,h.ONE_MINUS_SRC_ALPHA,h.CONSTANT_ALPHA,h.ONE_MINUS_SRC_ALPHA],new a.ax(0,0,0,c===void 0?0:c),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(c,h,b,_=!1){if(!this.opaquePassEnabledForLayer()&&!_)return gn.disabled;const w=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new gn(b||this.context.gl.LEQUAL,h,[w,w])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(c,h){this._wireframeDebugCache.update(this.frameCounter),this.style=c,this.options=h;const b=this.style._mergedLayers,_=this.style.order,w=_.map(he=>b[he]),k=this.style._mergedSourceCaches;this.imageManager=c.imageManager,this.modelManager=c.modelManager,this.symbolFadeChange=c.placement.symbolFadeChange(a.f.now()),this.imageManager.beginFrame();let D=0,L=!1;for(const he in k){const Ce=k[he];Ce.used&&(Ce.prepare(this.context),Ce.getSource().usedInConflation&&++D)}for(const he of w)he.isHidden(this.transform.zoom)||this.prepareLayer(he);const B={},U={},W={},J={},ee={};for(const he in k){const Ce=k[he];B[he]=Ce.getVisibleCoordinates(),U[he]=B[he].slice().reverse(),W[he]=Ce.getVisibleCoordinates(!0).reverse(),J[he]=Ce.getShadowCasterCoordinates(),ee[he]=Ce.sortCoordinatesByDistance(B[he])}const ce=he=>{const Ce=this.style.getLayerSourceCache(he);return Ce&&Ce.used?Ce.getSource():null};if(D){const he=[];for(const Ce of w)this.layerUsedInConflation(Ce,ce(Ce))&&he.push(Ce);if(he&&he.length>1){const Ce=[];for(const Ne of he){const Fe=this.style.getLayerSourceCache(Ne);Fe&&Fe.used&&Fe.getSource().usedInConflation&&Ce.push({layer:Ne.fqid,cache:Fe})}this.replacementSource.setSources(Ce),L=!0}}L||this.replacementSource.clear(),this.conflationActive=L,this.minCutoffZoom=0,this.longestCutoffRange=0;for(const he of w){const Ce=he.cutoffRange();if(this.longestCutoffRange=Math.max(Ce,this.longestCutoffRange),Ce>0){const Ne=ce(he);Ne&&(this.minCutoffZoom=Math.max(Ne.minzoom,this.minCutoffZoom)),he.minzoom&&(this.minCutoffZoom=Math.max(he.minzoom,this.minCutoffZoom))}}this.opaquePassCutoff=1/0;for(let he=0;he<w.length;he++)if(w[he].is3D()){this.opaquePassCutoff=he;break}const se=this.style&&this.style.fog;se?(this._fogVisible=se.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=se.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(W),this.opaquePassCutoff=0);const de=this._shadowRenderer;if(de){de.updateShadowParameters(this.transform,this.style.directionalLight);for(const he in k)for(const Ce of B[he]){let Ne={min:0,max:0};this.terrain&&(Ne=this.terrain.getMinMaxForTile(Ce)||Ne),de.addShadowReceiver(Ce.toUnwrapped(),Ne.min,Ne.max)}}if(this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new a.cY(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new Cn(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),!a.cZ(this.context.gl))return;this.renderPass="offscreen";for(const he of w){const Ce=c.getLayerSourceCache(he);if(!he.hasOffscreenPass()||he.isHidden(this.transform.zoom))continue;const Ne=Ce?U[Ce.id]:void 0;(he.type==="custom"||he.type==="raster"||he.type==="raster-particle"||he.isSky()||Ne&&Ne.length)&&this.renderLayer(this,Ce,he,Ne)}this.depthRangeFor3D=[0,1-(w.length+2)*this.numSublayers*this.depthEpsilon];const oe=this.terrain;oe&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&!this.transform.isOrthographic&&oe.drawDepth(),this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,J)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const fe=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),Te=(()=>{if(h.showOverdrawInspector)return a.ax.black;if(this.style.fog&&this.transform.projection.supportsFog&&!fe){const he=this.style.fog.properties.get("color").toArray01();return new a.ax(...he)}if(this.style.fog&&this.transform.projection.supportsFog&&fe){const he=this.style.fog.properties.get("space-color").toArray01();return new a.ax(...he)}return a.ax.transparent})();if(this.context.clear({color:Te,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&fe&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=_.length-1;this.currentLayer>=0;this.currentLayer--){const he=w[this.currentLayer],Ce=c.getLayerSourceCache(he);if(he.isSky())continue;const Ne=Ce?(he.is3D()?ee:U)[Ce.id]:void 0;this._renderTileClippingMasks(he,Ce,Ne),this.renderLayer(this,Ce,he,Ne)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&fe&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||a.S(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<_.length;this.currentLayer++){const he=w[this.currentLayer],Ce=c.getLayerSourceCache(he);he.isSky()&&this.renderLayer(this,Ce,he,Ce?U[Ce.id]:void 0)}function be(he,Ce){let Ne;return Ce&&(Ne=(he.type==="symbol"?W:he.is3D()?ee:U)[Ce.id]),Ne}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<_.length;){const he=w[this.currentLayer];if(he.type==="raster"){const Ce=c.getLayerSourceCache(he);this.renderLayer(this,Ce,he,be(he,Ce))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let Ee=0;for(de&&(Ee=de.getShadowCastingLayerCount());this.currentLayer<_.length;){const he=w[this.currentLayer],Ce=c.getLayerSourceCache(he);if(he.isSky())++this.currentLayer;else if(oe&&this.style.isLayerDraped(he)){if(he.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=oe.renderBatch(this.currentLayer)}else{if(this._renderTileClippingMasks(he,Ce,Ce?B[Ce.id]:void 0),this.renderLayer(this,Ce,he,be(he,Ce)),!oe&&de&&Ee>0&&he.hasShadowPass()&&--Ee==0&&(de.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const Ne=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=Ne;this.currentLayer++){const Fe=w[this.currentLayer];if(!Fe.hasLightBeamPass())continue;const G=c.getLayerSourceCache(Fe);this.renderLayer(this,G,Fe,G?U[G.id]:void 0)}this.currentLayer=Ne,this.renderPass="translucent"}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let he=null;w.forEach(Ce=>{const Ne=c.getLayerSourceCache(Ce);Ne&&!Ce.isHidden(this.transform.zoom)&&Ne.getVisibleCoordinates().length&&(!he||he.getSource().maxzoom<Ne.getSource().maxzoom)&&(he=Ne)}),he&&this.options.showTileBoundaries&&rh.debug(this,he,he.getVisibleCoordinates(),a.ax.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&rh.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new a.ax(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(he){const Ce=he.transform.padding;Bf(he,he.transform.height-(Ce.top||0),3,Ba),Bf(he,Ce.bottom||0,3,na),Ta(he,Ce.left||0,3,ig),Ta(he,he.transform.width-(Ce.right||0),3,ag);const Ne=he.transform.centerPoint;(function(Fe,G,R,H){xo(Fe,G-1,R-10,2,20,H),xo(Fe,G-10,R-1,20,2,H)})(he,Ne.x,he.transform.height-Ne.y,sg)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),L||(this.conflationActive=!1)}prepareLayer(c){this.gpuTimingStart(c);const{unsupportedLayers:h}=this.transform.projection,b=!h||!h.includes(c.type);if(hg[c.type]&&(b||this.terrain&&c.type==="custom")){const _=this.style.getLayerSourceCache(c);hg[c.type](c,_,this)}this.gpuTimingEnd()}renderLayer(c,h,b,_){b.isHidden(this.transform.zoom)||(b.type==="background"||b.type==="sky"||b.type==="custom"||b.type==="model"||b.type==="raster"||b.type==="raster-particle"||_&&_.length)&&(this.id=b.id,this.gpuTimingStart(b),(!c.transform.projection.unsupportedLayers||!c.transform.projection.unsupportedLayers.includes(b.type)||c.terrain&&b.type==="custom")&&rh[b.type](c,h,b,_,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(c){if(!this.options.gpuTiming)return;const h=this.context.extTimerQuery,b=this.context.gl;let _=this.gpuTimers[c.id];_||(_=this.gpuTimers[c.id]={calls:0,cpuTime:0,query:b.createQuery()}),_.calls++,b.beginQuery(h.TIME_ELAPSED_EXT,_.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const c=this.context.extTimerQuery,h=this.context.gl,b=h.createQuery();this.deferredRenderGpuTimeQueries.push(b),h.beginQuery(c.TIME_ELAPSED_EXT,b)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const c=this.gpuTimers;return this.gpuTimers={},c}collectDeferredRenderGpuQueries(){const c=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],c}queryGpuTimers(c){const h={};for(const b in c){const _=c[b],w=this.context.extTimerQuery,k=w.getQueryParameter(_.query,this.context.gl.QUERY_RESULT)/1e6;w.deleteQueryEXT(_.query),h[b]=k}return h}queryGpuTimeDeferredRender(c){if(!this.options.gpuTimingDeferredRender)return 0;const h=this.context.extTimerQuery,b=this.context.gl;let _=0;for(const w of c)_+=h.getQueryParameter(w,b.QUERY_RESULT)/1e6,h.deleteQueryEXT(w);return _}translatePosMatrix(c,h,b,_,w){if(!b[0]&&!b[1])return c;const k=w?_==="map"?this.transform.angle:0:_==="viewport"?-this.transform.angle:0;if(k){const B=Math.sin(k),U=Math.cos(k);b=[b[0]*U-b[1]*B,b[0]*B+b[1]*U]}const D=[w?b[0]:a.a3(h,b[0],this.transform.zoom),w?b[1]:a.a3(h,b[1],this.transform.zoom),0],L=new Float32Array(16);return a.a6.translate(L,c,D),L}saveTileTexture(c){const h=c.size[0],b=this._tileTextures[h];b?b.push(c):this._tileTextures[h]=[c]}getTileTexture(c){const h=this._tileTextures[c];return h&&h.length>0?h.pop():null}isPatternMissing(c,h){return c===null||c!==void 0&&!this.imageManager.getPattern(c.toString(),h)}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(c,h,b){const _=b===void 0?this.terrain&&this.terrain.renderingToTexture:b,w=this.terrain&&this.terrain.exaggeration()===0,k=[];return this.style&&this.style.enable3dLights()&&(c==="globeRaster"||c==="terrainRaster"?(k.push("LIGHTING_3D_MODE"),k.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):_||k.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"?this._shadowMapDebug||k.push("DEPTH_TEXTURE"):this.shadowRenderer&&(this.shadowRenderer.useNormalOffset?k.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"):k.push("RENDER_SHADOWS","DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(k.push("TERRAIN"),this.linearFloatFilteringSupported()&&k.push("TERRAIN_DEM_FLOAT_FORMAT"),w&&k.push("ZERO_EXAGGERATION")),this.transform.projection.name==="globe"&&k.push("GLOBE"),!this._fogVisible||_||h!==void 0&&!h||k.push("FOG","FOG_DITHERING"),_&&k.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&k.push("OVERDRAW_INSPECTOR"),k}getOrCreateProgram(c,h){this.cache=this.cache||{};const b=h&&h.defines||[],_=h&&h.config,w=h&&h.transformFeedback,k=this.currentGlobalDefines(c,h&&h.overrideFog,h&&h.overrideRtt).concat(b),D=Wm.cacheKey(Bm[c],c,k,_);return this.cache[D]||(this.cache[D]=new Wm(this.context,c,Bm[c],_,Ov[c],k,w)),this.cache[D]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(c,h){if(this.style.enable3dLights()){const b=this.style.directionalLight,_=this.style.ambientLight;if(b&&_){const w=((k,D)=>{const L=k.properties.get("direction"),B=k.properties.get("color").toArray01(),U=k.properties.get("intensity"),W=D.properties.get("color").toArray01(),J=D.properties.get("intensity"),ee=[L.x,L.y,L.z],ce=a.cn(W,J),se=a.cn(B,U);return{u_lighting_ambient_color:ce,u_lighting_directional_dir:ee,u_lighting_directional_color:se,u_ground_radiance:Vm(ee,se,ce)}})(b,_);h.setLightsUniformValues(c,w)}}}uploadCommonUniforms(c,h,b,_,w){if(this.uploadCommonLightUniforms(c,h),this.terrain&&this.terrain.renderingToTexture)return;const k=this.style.fog;if(k){const D=k.getOpacity(this.transform.pitch),L=((B,U,W,J,ee,ce,se,de,oe,fe,Te,be)=>{const Ee=B.transform,he=U.properties.get("color").toArray01();he[3]=J;const Ce=B.frameCounter/1e3%1,[Ne,Fe]=U.properties.get("vertical-range");return{u_fog_matrix:W?Ee.calculateFogTileMatrix(W):be||B.identityMat,u_fog_range:U.getFovAdjustedRange(Ee._fov),u_fog_color:he,u_fog_horizon_blend:U.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(Ne,Fe),Fe],u_fog_temporal_offset:Ce,u_frustum_tl:ee,u_frustum_tr:ce,u_frustum_br:se,u_frustum_bl:de,u_globe_pos:oe,u_globe_radius:fe,u_viewport:Te,u_globe_transition:a.S(Ee.zoom),u_is_globe:+(Ee.projection.name==="globe")}})(this,k,b,D,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*a.f.devicePixelRatio,this.transform.height*a.f.devicePixelRatio],_);h.setFogUniformValues(c,L)}w&&h.setCutoffUniformValues(c,w.uniformValues)}setTileLoadedFlag(c){this.tileLoaded=c}saveCanvasCopy(){const c=this.canvasCopy();c&&(this.frameCopies.push(c),this.tileLoaded=!1)}canvasCopy(){const c=this.context.gl,h=c.createTexture();return c.bindTexture(c.TEXTURE_2D,h),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGBA,0,0,c.drawingBufferWidth,c.drawingBufferHeight,0),h}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const c=this.style&&this.style.fog;return!!c&&c.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const c=this._backgroundTiles,h=this._backgroundTiles={},b=this.transform.coveringTiles({tileSize:512});for(const _ of b)h[_.key]=c[_.key]||new Ds(_,512,this.transform.tileZoom,this);return h}clearBackgroundTiles(){this._backgroundTiles={}}layerUsedInConflation(c,h){return!(!c.is3D()||c.minzoom&&c.minzoom>this.transform.zoom||c.sourceLayer!=="building"&&(!h||h.type!=="batched-model"))}isTileAffectedByFog(c){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let h=this._cachedTileFogOpacities[c.key];return h||(this._cachedTileFogOpacities[c.key]=h=this.style.fog.getOpacityForTile(c)),h[0]>=Cr||h[1]>=Cr}}function oh(g,c){let h=!1,b=null;const _=()=>{b=null,h&&(g(),b=setTimeout(_,c),h=!1)};return()=>(h=!0,b||_(),b)}class Zc{constructor(c){this._hashName=c&&encodeURIComponent(c),a.aY(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=oh(this._updateHashUnthrottled.bind(this),300)}addTo(c){return this._map=c,window.addEventListener("hashchange",this._onHashChange,!1),c.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const c=this._map;if(!c)return"";const h=fg(c);if(this._hashName){const b=this._hashName;let _=!1;const w=location.hash.slice(1).split("&").map(k=>{const D=k.split("=")[0];return D===b?(_=!0,`${D}=${h}`):k}).filter(k=>k);return _||w.push(`${b}=${h}`),`#${w.join("&")}`}return`#${h}`}_getCurrentHash(){const c=location.hash.replace("#","");if(this._hashName){let h;return c.split("&").map(b=>b.split("=")).forEach(b=>{b[0]===this._hashName&&(h=b)}),(h&&h[1]||"").split("/")}return c.split("/")}_onHashChange(){const c=this._map;if(!c)return!1;const h=this._getCurrentHash();if(h.length>=3&&!h.some(b=>isNaN(b))){const b=c.dragRotate.isEnabled()&&c.touchZoomRotate.isEnabled()?+(h[3]||0):c.getBearing();return c.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:b,pitch:+(h[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function fg(g,c){const h=g.getCenter(),b=Math.round(100*g.getZoom())/100,_=Math.ceil((b*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,_),k=Math.round(h.lng*w)/w,D=Math.round(h.lat*w)/w,L=g.getBearing(),B=g.getPitch();let U=c?`/${k}/${D}/${b}`:`${b}/${D}/${k}`;return(L||B)&&(U+="/"+Math.round(10*L)/10),B&&(U+=`/${Math.round(B)}`),U}const Ku={linearity:.3,easing:a.c_(0,0,.3,1)},ma=a.e({deceleration:2500,maxSpeed:1400},Ku),ih=a.e({deceleration:20,maxSpeed:1400},Ku),Xu=a.e({deceleration:1e3,maxSpeed:360},Ku),yo=a.e({deceleration:1e3,maxSpeed:90},Ku);class Yr{constructor(c){this._map=c,this.clear()}clear(){this._inertiaBuffer=[]}record(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.f.now(),settings:c})}_drainInertiaBuffer(){const c=this._inertiaBuffer,h=a.f.now();for(;c.length>0&&h-c[0].time>160;)c.shift()}_onMoveEnd(c){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const h={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)h.zoom+=w.zoomDelta||0,h.bearing+=w.bearingDelta||0,h.pitch+=w.pitchDelta||0,w.panDelta&&h.pan._add(w.panDelta),w.around&&(h.around=w.around),w.pinchAround&&(h.pinchAround=w.pinchAround);const b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(h.pan.mag()){const w=bs(h.pan.mag(),b,a.e({},ma,c||{}));_.offset=h.pan.mult(w.amount/h.pan.mag()),_.center=this._map.transform.center,ah(_,w)}if(h.zoom){const w=bs(h.zoom,b,ih);_.zoom=this._map.transform.zoom+w.amount,ah(_,w)}if(h.bearing){const w=bs(h.bearing,b,Xu);_.bearing=this._map.transform.bearing+a.aa(w.amount,-179,179),ah(_,w)}if(h.pitch){const w=bs(h.pitch,b,yo);_.pitch=this._map.transform.pitch+w.amount,ah(_,w)}if(_.zoom||_.bearing){const w=h.pinchAround===void 0?h.around:h.pinchAround;_.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),_.noMoveStart=!0,_}}function ah(g,c){(!g.duration||g.duration<c.duration)&&(g.duration=c.duration,g.easing=c.easing)}function bs(g,c,h){const{maxSpeed:b,linearity:_,deceleration:w}=h,k=a.aa(g*_/(c/1e3),-b,b),D=Math.abs(k)/(w*_);return{easing:h.easing,duration:1e3*D,amount:k*(D/2)}}class ga extends a.b{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,h,b,_={}){const w=ue(h.getCanvasContainer(),b),k=h.unproject(w);super(c,a.e({point:w,lngLat:k,originalEvent:b},_)),this._defaultPrevented=!1,this.target=h}}class ul extends a.b{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,h,b){const _=c==="touchend"?b.changedTouches:b.touches,w=re(h.getCanvasContainer(),_),k=w.map(L=>h.unproject(L)),D=w.reduce((L,B,U,W)=>L.add(B.div(W.length)),new a.P(0,0));super(c,{points:w,point:D,lngLats:k,lngLat:h.unproject(D),originalEvent:b}),this._defaultPrevented=!1}}class pg extends a.b{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,h,b){super(c,{originalEvent:b}),this._defaultPrevented=!1}}class mg{constructor(c,h){this._map=c,this._clickTolerance=h.clickTolerance}reset(){this._mousedownPos=void 0}wheel(c){return this._firePreventable(new pg(c.type,this._map,c))}mousedown(c,h){return this._mousedownPos=h,this._firePreventable(new ga(c.type,this._map,c))}mouseup(c){this._map.fire(new ga(c.type,this._map,c))}preclick(c){const h=a.e({},c);h.type="preclick",this._map.fire(new ga(h.type,this._map,h))}click(c,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||(this.preclick(c),this._map.fire(new ga(c.type,this._map,c)))}dblclick(c){return this._firePreventable(new ga(c.type,this._map,c))}mouseover(c){this._map.fire(new ga(c.type,this._map,c))}mouseout(c){this._map.fire(new ga(c.type,this._map,c))}touchstart(c){return this._firePreventable(new ul(c.type,this._map,c))}touchmove(c){this._map.fire(new ul(c.type,this._map,c))}touchend(c){this._map.fire(new ul(c.type,this._map,c))}touchcancel(c){this._map.fire(new ul(c.type,this._map,c))}_firePreventable(c){if(this._map.fire(c),c.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ec{constructor(c){this._map=c}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(c){this._map.fire(new ga(c.type,this._map,c))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ga("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(c){this._delayContextMenu?this._contextMenuEvent=c:this._map.fire(new ga(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class tc{constructor(c,h){this._map=c,this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(c,h){this.isEnabled()&&c.shiftKey&&c.button===0&&(K(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(c,h){if(!this._active)return;const b=h,_=this._startPos,w=this._lastPos;if(!_||!w||w.equals(b)||!this._box&&b.dist(_)<this._clickTolerance)return;this._lastPos=b,this._box||(this._box=N("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",c));const k=Math.min(_.x,b.x),D=Math.max(_.x,b.x),L=Math.min(_.y,b.y),B=Math.max(_.y,b.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${k}px,${L}px)`,this._box.style.width=D-k+"px",this._box.style.height=B-L+"px")})}mouseupWindow(c,h){if(!this._active)return;const b=this._startPos,_=h;if(b&&c.button===0){if(this.reset(),ie(),b.x!==_.x||b.y!==_.y)return this._map.fire(new a.b("boxzoomend",{originalEvent:c})),{cameraAnimation:w=>w.fitScreenCoordinates(b,_,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",c)}}keydown(c){this._active&&c.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",c))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Q(),delete this._startPos,delete this._lastPos}_fireEvent(c,h){return this._map.fire(new a.b(c,{originalEvent:h}))}}function Qu(g,c){const h={};for(let b=0;b<g.length;b++)h[g[b].identifier]=c[b];return h}class $f{constructor(c){this.reset(),this.numTouches=c.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(c,h,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=c.timeStamp),b.length===this.numTouches&&(this.centroid=function(_){const w=new a.P(0,0);for(const k of _)w._add(k);return w.div(_.length)}(h),this.touches=Qu(b,h)))}touchmove(c,h,b){if(this.aborted||!this.centroid)return;const _=Qu(b,h);for(const w in this.touches){const k=_[w];(!k||k.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(c,h,b){if((!this.centroid||c.timeStamp-this.startTime>500)&&(this.aborted=!0),b.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class sh{constructor(c){this.singleTap=new $f(c),this.numTaps=c.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(c,h,b){this.singleTap.touchstart(c,h,b)}touchmove(c,h,b){this.singleTap.touchmove(c,h,b)}touchend(c,h,b){const _=this.singleTap.touchend(c,h,b);if(_){const w=c.timeStamp-this.lastTime<500,k=!this.lastTap||this.lastTap.dist(_)<30;if(w&&k||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class gg{constructor(){this._zoomIn=new sh({numTouches:1,numTaps:2}),this._zoomOut=new sh({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(c,h,b){this._zoomIn.touchstart(c,h,b),this._zoomOut.touchstart(c,h,b)}touchmove(c,h,b){this._zoomIn.touchmove(c,h,b),this._zoomOut.touchmove(c,h,b)}touchend(c,h,b){const _=this._zoomIn.touchend(c,h,b),w=this._zoomOut.touchend(c,h,b);return _?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:k.getZoom()+1,around:k.unproject(_)},{originalEvent:c})}):w?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:k.getZoom()-1,around:k.unproject(w)},{originalEvent:c})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const yg={0:1,2:2};class ra{constructor(c){this.reset(),this._clickTolerance=c.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(c,h){return!1}_move(c,h){return{}}mousedown(c,h){if(this._lastPoint)return;const b=me(c);this._correctButton(c,b)&&(this._lastPoint=h,this._eventButton=b)}mousemoveWindow(c,h){const b=this._lastPoint;if(b){if(c.preventDefault(),this._eventButton!=null&&function(_,w){const k=yg[w];return _.buttons===void 0||(_.buttons&k)!==k}(c,this._eventButton))this.reset();else if(this._moved||!(h.dist(b)<this._clickTolerance))return this._moved=!0,this._lastPoint=h,this._move(b,h)}}mouseupWindow(c){this._lastPoint&&me(c)===this._eventButton&&(this._moved&&ie(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bg extends ra{mousedown(c,h){super.mousedown(c,h),this._lastPoint&&(this._active=!0)}_correctButton(c,h){return h===0&&!c.ctrlKey}_move(c,h){return{around:h,panDelta:h.sub(c)}}}class lh extends ra{_correctButton(c,h){return h===0&&c.ctrlKey||h===2}_move(c,h){const b=.8*(h.x-c.x);if(b)return this._active=!0,{bearingDelta:b}}contextmenu(c){c.preventDefault()}}class Uf extends ra{_correctButton(c,h){return h===0&&c.ctrlKey||h===2}_move(c,h){const b=-.5*(h.y-c.y);if(b)return this._active=!0,{pitchDelta:b}}contextmenu(c){c.preventDefault()}}class vg{constructor(c,h){this._map=c,this._el=c.getCanvasContainer(),this._minTouches=1,this._clickTolerance=h.clickTolerance||1,this.reset(),a.aY(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}touchstart(c,h,b){return this._calculateTransform(c,h,b)}touchmove(c,h,b){if(this._active&&!(b.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(b.length===1&&!a.c$())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return c.cancelable&&c.preventDefault(),this._calculateTransform(c,h,b)}}touchend(c,h,b){this._calculateTransform(c,h,b),this._active&&b.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(c,h,b){b.length>0&&(this._active=!0);const _=Qu(b,h),w=new a.P(0,0),k=new a.P(0,0);let D=0;for(const B in _){const U=_[B],W=this._touches[B];W&&(w._add(U),k._add(U.sub(W)),D++,_[B]=U)}if(this._touches=_,D<this._minTouches||!k.mag())return;const L=k.div(D);return this._sum._add(L),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(D),panDelta:L}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=N("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class ci{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(c){}_move(c,h,b){return{}}touchstart(c,h,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([h[0],h[1]]))}touchmove(c,h,b){const _=this._firstTwoTouches;if(!_)return;c.preventDefault();const[w,k]=_,D=dl(b,h,w),L=dl(b,h,k);if(!D||!L)return;const B=this._aroundCenter?null:D.add(L).div(2);return this._move([D,L],B,c)}touchend(c,h,b){if(!this._firstTwoTouches)return;const[_,w]=this._firstTwoTouches,k=dl(b,h,_),D=dl(b,h,w);k&&D||(this._active&&ie(),this.reset())}touchcancel(){this.reset()}enable(c){this._enabled=!0,this._aroundCenter=!!c&&c.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function dl(g,c,h){for(let b=0;b<g.length;b++)if(g[b].identifier===h)return c[b]}function Vf(g,c){return Math.log(g/c)/Math.LN2}class Hf extends ci{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(c){this._startDistance=this._distance=c[0].dist(c[1])}_move(c,h){const b=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(Vf(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Vf(this._distance,b),pinchAround:h}}}function zs(g,c){return 180*g.angleWith(c)/Math.PI}class _g extends ci{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])}_move(c,h){const b=this._vector;if(this._vector=c[0].sub(c[1]),b&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:zs(this._vector,b),pinchAround:h}}_isBelowThreshold(c){this._minDiameter=Math.min(this._minDiameter,c.mag());const h=25/(Math.PI*this._minDiameter)*360,b=this._startVector;if(!b)return!1;const _=zs(c,b);return Math.abs(_)<h}}function ch(g){return Math.abs(g.y)>Math.abs(g.x)}class Wf extends ci{constructor(c){super(),this._map=c}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(c){this._lastPoints=c,ch(c[0].sub(c[1]))&&(this._valid=!1)}_move(c,h,b){const _=this._lastPoints;if(!_)return;const w=c[0].sub(_[0]),k=c[1].sub(_[1]);return this._map._cooperativeGestures&&!a.c$()&&b.touches.length<3||(this._valid=this.gestureBeginsVertically(w,k,b.timeStamp),!this._valid)?void 0:(this._lastPoints=c,this._active=!0,{pitchDelta:(w.y+k.y)/2*-.5})}gestureBeginsVertically(c,h,b){if(this._valid!==void 0)return this._valid;const _=c.mag()>=2,w=h.mag()>=2;if(!_&&!w)return;if(!_||!w)return this._firstMove==null&&(this._firstMove=b),b-this._firstMove<100&&void 0;const k=c.y>0==h.y>0;return ch(c)&&ch(h)&&k}}const Kc={panStep:100,bearingStep:15,pitchStep:10};class uh{constructor(){const c=Kc;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(c){if(c.altKey||c.ctrlKey||c.metaKey)return;let h=0,b=0,_=0,w=0,k=0;switch(c.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:c.shiftKey?b=-1:(c.preventDefault(),w=-1);break;case 39:c.shiftKey?b=1:(c.preventDefault(),w=1);break;case 38:c.shiftKey?_=1:(c.preventDefault(),k=-1);break;case 40:c.shiftKey?_=-1:(c.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(b=0,_=0),{cameraAnimation:D=>{const L=D.getZoom();D.easeTo({duration:300,easeId:"keyboardHandler",easing:nc,zoom:h?Math.round(L)+h*(c.shiftKey?2:1):L,bearing:D.getBearing()+b*this._bearingStep,pitch:D.getPitch()+_*this._pitchStep,offset:[-w*this._panStep,-k*this._panStep],center:D.getCenter()},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function nc(g){return g*(2-g)}const dh=4.000244140625,hh=1/450;class ry{constructor(c,h){this._map=c,this._el=c.getCanvasContainer(),this._handler=h,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=hh,a.aY(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(c){this._defaultZoomRate=c}setWheelZoomRate(c){this._wheelZoomRate=c}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!c&&c.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(c){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(c.ctrlKey||c.metaKey||this.isZooming()||a.c$()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let h=c.deltaMode===WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY;const b=a.f.now(),_=b-(this._lastWheelEventTime||0);this._lastWheelEventTime=b,h!==0&&h%dh==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(_*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),c.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=c,this._delta-=h,this._active||this._start(c)),c.preventDefault()}_onTimeout(c){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)}_start(c){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=ue(this._el,c);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:h,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const c=this._map.transform;this._type==="wheel"&&c.projection.wrap&&(c._center.lng>=180||c._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const h=()=>c._terrainEnabled()&&this._aroundCoord?c.computeZoomRelativeTo(this._aroundCoord):c.zoom;if(this._delta!==0){const B=this._type==="wheel"&&Math.abs(this._delta)>dh?this._wheelZoomRate:this._defaultZoomRate;let U=2/(1+Math.exp(-Math.abs(this._delta*B)));this._delta<0&&U!==0&&(U=1/U);const W=h(),J=Math.pow(2,W),ee=typeof this._targetZoom=="number"?c.zoomScale(this._targetZoom):J;this._targetZoom=Math.min(c.maxZoom,Math.max(c.minZoom,c.scaleZoom(ee*U))),this._type==="wheel"&&(this._startZoom=W,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const b=typeof this._targetZoom=="number"?this._targetZoom:h(),_=this._startZoom,w=this._easing;let k,D=!1;if(this._type==="wheel"&&_&&w){const B=Math.min((a.f.now()-this._lastWheelEventTime)/200,1),U=w(B);k=a.U(_,b,U),B<1?this._frameId||(this._frameId=!0):D=!0}else k=b,D=!0;this._active=!0,D&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let L=k-h();return L*this._lastDelta<0&&(L=0),{noInertia:!0,needsRenderFrame:!D,zoomDelta:L,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(c){let h=a.d0;if(this._prevEase){const b=this._prevEase,_=(a.f.now()-b.start)/b.duration,w=b.easing(_+.01)-b.easing(_),k=.27/Math.sqrt(w*w+1e-4)*.01,D=Math.sqrt(.0729-k*k);h=a.c_(k,D,.25,1)}return this._prevEase={start:a.f.now(),duration:c,easing:h},h}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=N("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class xg{constructor(c,h){this._clickZoom=c,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Bv{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(c,h){return c.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:b.getZoom()+(c.shiftKey?-1:1),around:b.unproject(h)},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fv{constructor(){this._tap=new sh({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(c,h,b){this._swipePoint||(this._tapTime&&c.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?b.length>0&&(this._swipePoint=h[0],this._swipeTouch=b[0].identifier):this._tap.touchstart(c,h,b))}touchmove(c,h,b){if(this._tapTime){if(this._swipePoint){if(b[0].identifier!==this._swipeTouch)return;const _=h[0],w=_.y-this._swipePoint.y;return this._swipePoint=_,c.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(c,h,b)}touchend(c,h,b){this._tapTime?this._swipePoint&&b.length===0&&this.reset():this._tap.touchend(c,h,b)&&(this._tapTime=c.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class oy{constructor(c,h,b){this._el=c,this._mousePan=h,this._touchPan=b}enable(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class iy{constructor(c,h,b){this._pitchWithRotate=c.pitchWithRotate,this._mouseRotate=h,this._mousePitch=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ay{constructor(c,h,b,_){this._el=c,this._touchZoom=h,this._touchRotate=b,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const fh=g=>g.zoom||g.drag||g.pitch||g.rotate;class sy extends a.b{}class Ju{constructor(){this.constants=[1,1,.01],this.radius=0}setup(c,h){const b=a.N.sub([],h,c);this.radius=a.N.length(b[2]<0?a.N.div([],b,this.constants):[b[0],b[1],0])}projectRay(c){a.N.div(c,c,this.constants),a.N.normalize(c,c),a.N.mul(c,c,this.constants);const h=a.N.scale([],c,this.radius);if(h[2]>0){const b=a.N.scale([],[0,0,1],a.N.dot(h,[0,0,1])),_=a.N.scale([],a.N.normalize([],[h[0],h[1],0]),this.radius),w=a.N.add([],h,a.N.scale([],a.N.sub([],a.N.add([],_,b),h),2));h[0]=w[0],h[1]=w[1]}return h}}function ph(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class Xx{constructor(c,h){this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Yr(c),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Ju,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(h),a.aY(["handleEvent","handleWindowEvent"],this);const b=this._el;this._listeners=[[b,"touchstart",{passive:!0}],[b,"touchmove",{passive:!1}],[b,"touchend",void 0],[b,"touchcancel",void 0],[b,"mousedown",void 0],[b,"mousemove",void 0],[b,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[b,"mouseover",void 0],[b,"mouseout",void 0],[b,"dblclick",void 0],[b,"click",void 0],[b,"keydown",{capture:!1}],[b,"keyup",void 0],[b,"wheel",{passive:!1}],[b,"contextmenu",void 0],[window,"blur",void 0]];for(const[_,w,k]of this._listeners){const D=_===document?this.handleWindowEvent:this.handleEvent;_.addEventListener(w,D,k)}}destroy(){for(const[c,h,b]of this._listeners){const _=c===document?this.handleWindowEvent:this.handleEvent;c.removeEventListener(h,_,b)}}_addDefaultHandlers(c){const h=this._map,b=h.getCanvasContainer();this._add("mapEvent",new mg(h,c));const _=h.boxZoom=new tc(h,c);this._add("boxZoom",_);const w=new gg,k=new Bv;h.doubleClickZoom=new xg(k,w),this._add("tapZoom",w),this._add("clickZoom",k);const D=new Fv;this._add("tapDragZoom",D);const L=h.touchPitch=new Wf(h);this._add("touchPitch",L);const B=new lh(c),U=new Uf(c);h.dragRotate=new iy(c,B,U),this._add("mouseRotate",B,["mousePitch"]),this._add("mousePitch",U,["mouseRotate"]);const W=new bg(c),J=new vg(h,c);h.dragPan=new oy(b,W,J),this._add("mousePan",W),this._add("touchPan",J,["touchZoom","touchRotate"]);const ee=new _g,ce=new Hf;h.touchZoomRotate=new ay(b,ce,ee,D),this._add("touchRotate",ee,["touchPan","touchZoom"]),this._add("touchZoom",ce,["touchPan","touchRotate"]),this._add("blockableMapEvent",new ec(h));const se=h.scrollZoom=new ry(h,this);this._add("scrollZoom",se,["mousePan"]);const de=h.keyboard=new uh;this._add("keyboard",de);for(const oe of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])c.interactive&&c[oe]&&h[oe].enable(c[oe])}_add(c,h,b){this._handlers.push({handlerName:c,handler:h,allowed:b}),this._handlersById[c]=h}stop(c){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:c}of this._handlers)if(c.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!fh(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(c,h,b){for(const _ in c)if(_!==b&&(!h||h.indexOf(_)<0))return!0;return!1}handleWindowEvent(c){this.handleEvent(c,`${c.type}Window`)}_getMapTouches(c){const h=[];for(const b of c)this._el.contains(b.target)&&h.push(b);return h}handleEvent(c,h){this._updatingCamera=!0;const b=c.type==="renderFrame",_=b?void 0:c,w={needsRenderFrame:!1},k={},D={},L=c.touches?this._getMapTouches(c.touches):void 0,B=L?re(this._el,L):b?void 0:ue(this._el,c);for(const{handlerName:J,handler:ee,allowed:ce}of this._handlers){if(!ee.isEnabled())continue;let se;this._blockedByActive(D,ce,J)?ee.reset():ee[h||c.type]&&(se=ee[h||c.type](c,B,L),this.mergeHandlerResult(w,k,se,J,_),se&&se.needsRenderFrame&&this._triggerRenderFrame()),(se||ee.isActive())&&(D[J]=ee)}const U={};for(const J in this._previousActiveHandlers)D[J]||(U[J]=_);this._previousActiveHandlers=D,(Object.keys(U).length||ph(w))&&(this._changes.push([w,k,U]),this._triggerRenderFrame()),(Object.keys(D).length||ph(w))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:W}=w;W&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],W(this._map))}mergeHandlerResult(c,h,b,_,w){if(!b)return;a.e(c,b);const k={handlerName:_,originalEvent:b.originalEvent||w};b.zoomDelta!==void 0&&(h.zoom=k),b.panDelta!==void 0&&(h.drag=k),b.pitchDelta!==void 0&&(h.pitch=k),b.bearingDelta!==void 0&&(h.rotate=k)}_applyChanges(){const c={},h={},b={};for(const[_,w,k]of this._changes)_.panDelta&&(c.panDelta=(c.panDelta||new a.P(0,0))._add(_.panDelta)),_.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+_.pitchDelta),_.around!==void 0&&(c.around=_.around),_.aroundCoord!==void 0&&(c.aroundCoord=_.aroundCoord),_.pinchAround!==void 0&&(c.pinchAround=_.pinchAround),_.noInertia&&(c.noInertia=_.noInertia),a.e(h,w),a.e(b,k);this._updateMapTransform(c,h,b),this._changes=[]}_updateMapTransform(c,h,b){const _=this._map,w=_.transform,k=fe=>[fe.x,fe.y,fe.z];if((fe=>{const Te=this._eventsInProgress.drag;return Te&&!this._handlersById[Te.handlerName].isActive()})()&&!ph(c)){const fe=w.zoom;w.cameraElevationReference="sea",this._originalZoom!=null&&w._orthographicProjectionAtLowPitch&&w.projection.name!=="globe"&&w.pitch===0?(w.cameraElevationReference="ground",w.zoom=this._originalZoom):(w.recenterOnTerrain(),w.cameraElevationReference="ground"),fe!==w.zoom&&this._map._update(!0)}if(w._isCameraConstrained&&_._stop(!0),!ph(c))return void this._fireEvents(h,b,!0);let{panDelta:D,zoomDelta:L,bearingDelta:B,pitchDelta:U,around:W,aroundCoord:J,pinchAround:ee}=c;w._isCameraConstrained&&(L>0&&(L=0),w._isCameraConstrained=!1),ee!==void 0&&(W=ee),(L||(fe=>h[fe]&&!this._eventsInProgress[fe])("drag"))&&W&&(this._dragOrigin=k(w.pointCoordinate3D(W)),this._originalZoom=w.zoom,this._trackingEllipsoid.setup(w._camera.position,this._dragOrigin)),w.cameraElevationReference="sea",_._stop(!0),W=W||_.transform.centerPoint,B&&(w.bearing+=B),U&&(w.pitch+=U),w._updateCameraState();const ce=[0,0,0];if(D)if(w.projection.name==="mercator"){const fe=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(W).dir),Te=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(W.sub(D)).dir);ce[0]=Te[0]-fe[0],ce[1]=Te[1]-fe[1]}else{const fe=w.pointCoordinate(W);if(w.projection.name==="globe"){D=D.rotate(-w.angle);const Te=w._pixelsPerMercatorPixel/w.worldSize;ce[0]=-D.x*a.d1(a.au(fe.y))*Te,ce[1]=-D.y*a.d1(w.center.lat)*Te}else{const Te=w.pointCoordinate(W.sub(D));fe&&Te&&(ce[0]=Te.x-fe.x,ce[1]=Te.y-fe.y)}}const se=w.zoom,de=[0,0,0];if(L){const fe=k(J||w.pointCoordinate3D(W)),Te={dir:a.N.normalize([],a.N.sub([],fe,w._camera.position))};if(Te.dir[2]<0){const be=w.zoomDeltaToMovement(fe,L);a.N.scale(de,Te.dir,be)}}const oe=a.N.add(ce,ce,de);w._translateCameraConstrained(oe),L&&Math.abs(w.zoom-se)>1e-4&&w.recenterOnTerrain(),w.cameraElevationReference="ground",this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(h,b,!0)}_fireEvents(c,h,b){const _=fh(this._eventsInProgress),w=fh(c),k={};for(const U in c){const{originalEvent:W}=c[U];this._eventsInProgress[U]||(k[`${U}start`]=W),this._eventsInProgress[U]=c[U]}!_&&w&&this._fireEvent("movestart",w.originalEvent);for(const U in k)this._fireEvent(U,k[U]);w&&this._fireEvent("move",w.originalEvent);for(const U in c){const{originalEvent:W}=c[U];this._fireEvent(U,W)}const D={};let L;for(const U in this._eventsInProgress){const{handlerName:W,originalEvent:J}=this._eventsInProgress[U];this._handlersById[W].isActive()||(delete this._eventsInProgress[U],L=h[W]||J,D[`${U}end`]=L)}for(const U in D)this._fireEvent(U,D[U]);const B=fh(this._eventsInProgress);if(b&&(_||w)&&!B){this._updatingCamera=!0;const U=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),W=J=>J!==0&&-this._bearingSnap<J&&J<this._bearingSnap;U?(W(U.bearing||this._map.getBearing())&&(U.bearing=0),this._map.easeTo(U,{originalEvent:L})):(this._map.fire(new a.b("moveend",{originalEvent:L})),W(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(c,h){this._map.fire(new a.b(c,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(c=>{this._frameId=void 0,this.handleEvent(new sy("renderFrame",{timeStamp:c})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const rc="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Po extends a.E{constructor(c,h){super(),this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=h.bearingSnap,this._respectPrefersReducedMotion=h.respectPrefersReducedMotion!==!1,a.aY(["_renderFrameCallback"],this)}getCenter(){return new a.bn(this.transform.center.lng,this.transform.center.lat)}setCenter(c,h){return this.jumpTo({center:c},h)}panBy(c,h,b){return c=a.P.convert(c).mult(-1),this.panTo(this.transform.center,a.e({offset:c},h),b)}panTo(c,h,b){return this.easeTo(a.e({center:c},h),b)}getZoom(){return this.transform.zoom}setZoom(c,h){return this.jumpTo({zoom:c},h),this}zoomTo(c,h,b){return this.easeTo(a.e({zoom:c},h),b)}zoomIn(c,h){return this.zoomTo(this.getZoom()+1,c,h),this}zoomOut(c,h){return this.zoomTo(this.getZoom()-1,c,h),this}getBearing(){return this.transform.bearing}setBearing(c,h){return this.jumpTo({bearing:c},h),this}getPadding(){return this.transform.padding}setPadding(c,h){return this.jumpTo({padding:c},h),this}rotateTo(c,h,b){return this.easeTo(a.e({bearing:c},h),b)}resetNorth(c,h){return this.rotateTo(0,a.e({duration:1e3},c),h),this}resetNorthPitch(c,h){return this.easeTo(a.e({bearing:0,pitch:0,duration:1e3},c),h),this}snapToNorth(c,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,h):this}getPitch(){return this.transform.pitch}setPitch(c,h){return this.jumpTo({pitch:c},h),this}cameraForBounds(c,h){c=a.ad.convert(c);const b=h&&h.bearing||0,_=h&&h.pitch||0,w=c.getNorthWest(),k=c.getSouthEast();return this._cameraForBounds(this.transform,w,k,b,_,h)}_extendCameraOptions(c){const h={top:0,bottom:0,right:0,left:0};if(typeof(c=a.e({padding:h,offset:[0,0],maxZoom:this.transform.maxZoom},c)).padding=="number"){const b=c.padding;c.padding={top:b,bottom:b,right:b,left:b}}return c.padding=a.e(h,c.padding),c}_minimumAABBFrustumDistance(c,h){const b=h.max[0]-h.min[0],_=h.max[1]-h.min[1];return b/_>c.aspect?b/(2*Math.tan(.5*c.fovX)*c.aspect):_/(2*Math.tan(.5*c.fovY)*c.aspect)}_cameraForBoundsOnGlobe(c,h,b,_,w,k){const D=c.clone(),L=this._extendCameraOptions(k);D.bearing=_,D.pitch=w;const B=a.bn.convert(h),U=a.bn.convert(b),W=.5*(B.lat+U.lat),J=.5*(B.lng+U.lng),ee=a.d2(W,J),ce=a.N.normalize([],ee),se=a.N.normalize([],a.N.cross([],ce,[0,1,0])),de=a.N.cross([],se,ce),oe=[se[0],se[1],se[2],0,de[0],de[1],de[2],0,ce[0],ce[1],ce[2],0,0,0,0,1],fe=[ee,a.d2(B.lat,B.lng),a.d2(U.lat,B.lng),a.d2(U.lat,U.lng),a.d2(B.lat,U.lng),a.d2(W,B.lng),a.d2(W,U.lng),a.d2(B.lat,J),a.d2(U.lat,J)];let Te=a.bS.fromPoints(fe.map(Ve=>[a.N.dot(se,Ve),a.N.dot(de,Ve),a.N.dot(ce,Ve)]));const be=a.N.transformMat4([],Te.center,oe);a.N.squaredLength(be)===0&&a.N.set(be,0,0,1),a.N.normalize(be,be),a.N.scale(be,be,a.ab),D.center=a.d3(be);const Ee=D.getWorldToCameraMatrix(),he=a.a6.invert(new Float64Array(16),Ee);Te=a.bS.applyTransform(Te,a.a6.multiply([],Ee,oe)),a.N.transformMat4(be,be,Ee);const Ce=.5*(Te.max[2]-Te.min[2]),Ne=this._minimumAABBFrustumDistance(D,Te),Fe=a.N.scale([],[0,0,1],Ce),G=a.N.add(Fe,be,Fe),R=Ne+(D.pitch===0?0:a.N.distance(be,G)),H=D.globeCenterInViewSpace,le=a.N.sub([],be,[H[0],H[1],H[2]]);a.N.normalize(le,le),a.N.scale(le,le,R);const ge=a.N.add([],be,le);a.N.transformMat4(ge,ge,he);const Oe=a.d4/a.ab,Se=a.N.length(ge),Le=a.bl(Math.max(Se*Oe-a.d4,Number.EPSILON),0),ke=Math.min(D.zoomFromMercatorZAdjusted(Le),L.maxZoom);return ke>.5*(a.bG+a.bx)?(D.setProjection({name:"mercator"}),D.zoom=ke,this._cameraForBounds(D,h,b,_,w,k)):{center:D.center,zoom:ke,bearing:_,pitch:w}}queryTerrainElevation(c,h){const b=this.transform.elevation;return b?(h=a.e({},{exaggerated:!0},h),b.getAtPoint(a.L.fromLngLat(c),null,h.exaggerated)):null}_cameraForBounds(c,h,b,_,w,k){if(c.projection.name==="globe")return this._cameraForBoundsOnGlobe(c,h,b,_,w,k);const D=c.clone(),L=this._extendCameraOptions(k),B=D.padding;D.bearing=_,D.pitch=w;const U=a.bn.convert(h),W=a.bn.convert(b),J=new a.bn(U.lng,W.lat),ee=new a.bn(W.lng,U.lat),ce=D.project(U),se=D.project(W),de=this.queryTerrainElevation(U),oe=this.queryTerrainElevation(W),fe=this.queryTerrainElevation(J),Te=this.queryTerrainElevation(ee),be=[[ce.x,ce.y,Math.min(de||0,oe||0,fe||0,Te||0)],[se.x,se.y,Math.max(de||0,oe||0,fe||0,Te||0)]];let Ee=a.bS.fromPoints(be);const he=D.getWorldToCameraMatrix(),Ce=a.a6.invert(new Float64Array(16),he);Ee=a.bS.applyTransform(Ee,he);const Ne=a.N.sub([],Ee.max,Ee.min),Fe=B.left||0,G=B.right||0,R=B.bottom||0,H=B.top||0,{left:le,right:ge,top:Oe,bottom:Se}=L.padding,Le=.5*(Fe+G),ke=.5*(H+R),Ve=Math.min(D.scaleZoom(D.scale*Math.min((D.width-(Fe+G+le+ge))/Ne[0],(D.height-(R+H+Se+Oe))/Ne[1])),L.maxZoom),Ye=D.scale/D.zoomScale(Ve);Ee=new a.bS([Ee.min[0]-(le+Le)*Ye,Ee.min[1]-(Se+ke)*Ye,Ee.min[2]],[Ee.max[0]+(ge+Le)*Ye,Ee.max[1]+(Oe+ke)*Ye,Ee.max[2]]);const gt=.5*Ne[2],yt=this._minimumAABBFrustumDistance(D,Ee),vt=[0,0,1,0];a.a7.transformMat4(vt,vt,he),a.a7.normalize(vt,vt);const Wt=a.N.scale([],vt,yt+gt),Vt=a.N.add([],Ee.center,Wt),Ht=(typeof L.offset.x=="number"&&typeof L.offset.y=="number"?new a.P(L.offset.x,L.offset.y):a.P.convert(L.offset)).rotate(-a.bj(_));Ee.center[0]-=Ht.x*Ye,Ee.center[1]+=Ht.y*Ye,a.N.transformMat4(Ee.center,Ee.center,Ce),a.N.transformMat4(Vt,Vt,Ce);const Zt=[Ee.center[0],Ee.center[1],Vt[2]*D.pixelsPerMeter];a.N.scale(Zt,Zt,1/D.worldSize);const In=a.at(Zt[0]),xn=a.au(Zt[1]),on=Math.min(D._zoomFromMercatorZ(Zt[2]),L.maxZoom),yn=new a.bn(In,xn);return D.mercatorFromTransition&&on<.5*(a.bG+a.bx)?(D.setProjection({name:"globe"}),D.zoom=on,this._cameraForBounds(D,h,b,_,w,k)):{center:yn,zoom:on,bearing:_,pitch:w}}fitBounds(c,h,b){const _=this.cameraForBounds(c,h);return this._fitInternal(_,h,b)}fitScreenCoordinates(c,h,b,_,w){const k=a.P.convert(c),D=a.P.convert(h),L=new a.P(Math.min(k.x,D.x),Math.min(k.y,D.y)),B=new a.P(Math.max(k.x,D.x),Math.max(k.y,D.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(k,D))return this;const U=this.transform.pointLocation3D(L),W=this.transform.pointLocation3D(B),J=this.transform.pointLocation3D(new a.P(L.x,B.y)),ee=this.transform.pointLocation3D(new a.P(B.x,L.y)),ce=[Math.min(U.lng,W.lng,J.lng,ee.lng),Math.min(U.lat,W.lat,J.lat,ee.lat)],se=[Math.max(U.lng,W.lng,J.lng,ee.lng),Math.max(U.lat,W.lat,J.lat,ee.lat)],de=_&&_.pitch?_.pitch:this.getPitch(),oe=this._cameraForBounds(this.transform,ce,se,b,de,_);return this._fitInternal(oe,_,w)}_fitInternal(c,h,b){return c?(delete(h=a.e(c,h)).padding,h.linear?this.easeTo(h,b):this.flyTo(h,b)):this}jumpTo(c,h){this.stop();const b=c.preloadOnly?this.transform.clone():this.transform;let _=!1,w=!1,k=!1;return"zoom"in c&&b.zoom!==+c.zoom&&(_=!0,b.zoom=+c.zoom),c.center!==void 0&&(b.center=a.bn.convert(c.center)),"bearing"in c&&b.bearing!==+c.bearing&&(w=!0,b.bearing=+c.bearing),"pitch"in c&&b.pitch!==+c.pitch&&(k=!0,b.pitch=+c.pitch),c.padding==null||b.isPaddingEqual(c.padding)||(b.padding=c.padding),c.preloadOnly?(this._preloadTiles(b),this):(this.fire(new a.b("movestart",h)).fire(new a.b("move",h)),_&&this.fire(new a.b("zoomstart",h)).fire(new a.b("zoom",h)).fire(new a.b("zoomend",h)),w&&this.fire(new a.b("rotatestart",h)).fire(new a.b("rotate",h)).fire(new a.b("rotateend",h)),k&&this.fire(new a.b("pitchstart",h)).fire(new a.b("pitch",h)).fire(new a.b("pitchend",h)),this.fire(new a.b("moveend",h)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||a.w(rc),this.transform.getFreeCameraOptions()}setFreeCameraOptions(c,h){const b=this.transform;if(!b.projection.supportsFreeCamera)return a.w(rc),this;this.stop();const _=b.zoom,w=b.pitch,k=b.bearing;b.setFreeCameraOptions(c);const D=_!==b.zoom,L=w!==b.pitch,B=k!==b.bearing;return this.fire(new a.b("movestart",h)).fire(new a.b("move",h)),D&&this.fire(new a.b("zoomstart",h)).fire(new a.b("zoom",h)).fire(new a.b("zoomend",h)),B&&this.fire(new a.b("rotatestart",h)).fire(new a.b("rotate",h)).fire(new a.b("rotateend",h)),L&&this.fire(new a.b("pitchstart",h)).fire(new a.b("pitch",h)).fire(new a.b("pitchend",h)),this.fire(new a.b("moveend",h)),this}easeTo(c,h){this._stop(!1,c.easeId),((c=a.e({offset:[0,0],duration:500,easing:a.d0},c)).animate===!1||this._prefersReducedMotion(c))&&(c.duration=0);const b=this.transform,_=this.getZoom(),w=this.getBearing(),k=this.getPitch(),D=this.getPadding(),L="zoom"in c?+c.zoom:_,B="bearing"in c?this._normalizeBearing(c.bearing,w):w,U="pitch"in c?+c.pitch:k,W="padding"in c?c.padding:b.padding,J=a.P.convert(c.offset);let ee,ce,se;if(b.projection.name==="globe"){const Fe=a.L.fromLngLat(b.center),G=J.rotate(-b.angle);Fe.x+=G.x/b.worldSize,Fe.y+=G.y/b.worldSize;const R=Fe.toLngLat(),H=a.bn.convert(c.center||R);this._normalizeCenter(H),ee=b.centerPoint.add(G),ce=new a.P(Fe.x,Fe.y).mult(b.worldSize),se=new a.P(a.a5(H.lng),a.ae(H.lat)).mult(b.worldSize).sub(ce)}else{ee=b.centerPoint.add(J);const Fe=b.pointLocation(ee),G=a.bn.convert(c.center||Fe);this._normalizeCenter(G),ce=b.project(Fe),se=b.project(G).sub(ce)}const de=b.zoomScale(L-_);let oe,fe;c.around&&(oe=a.bn.convert(c.around),fe=b.locationPoint(oe));const Te=this._zooming||L!==_,be=this._rotating||w!==B,Ee=this._pitching||U!==k,he=!b.isPaddingEqual(W),Ce=Fe=>G=>{if(Te&&(Fe.zoom=a.U(_,L,G)),be&&(Fe.bearing=a.U(w,B,G)),Ee&&(Fe.pitch=a.U(k,U,G)),he&&(Fe.interpolatePadding(D,W,G),ee=Fe.centerPoint.add(J)),oe)Fe.setLocationAtPoint(oe,fe);else{const R=Fe.zoomScale(Fe.zoom-_),H=L>_?Math.min(2,de):Math.max(.5,de),le=Math.pow(H,1-G),ge=Fe.unproject(ce.add(se.mult(G*le)).mult(R));Fe.setLocationAtPoint(Fe.renderWorldCopies?ge.wrap():ge,ee)}return c.preloadOnly||this._fireMoveEvents(h),Fe};if(c.preloadOnly){const Fe=this._emulate(Ce,c.duration,b);return this._preloadTiles(Fe),this}const Ne={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Te,this._rotating=be,this._pitching=Ee,this._easeId=c.easeId,this._prepareEase(h,c.noMoveStart,Ne),this._ease(Ce(b),Fe=>{b.cameraElevationReference==="sea"&&b.recenterOnTerrain(),this._afterEase(h,Fe)},c),this}_prepareEase(c,h,b={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),h||b.moving||this.fire(new a.b("movestart",c)),this._zooming&&!b.zooming&&this.fire(new a.b("zoomstart",c)),this._rotating&&!b.rotating&&this.fire(new a.b("rotatestart",c)),this._pitching&&!b.pitching&&this.fire(new a.b("pitchstart",c))}_fireMoveEvents(c){this.fire(new a.b("move",c)),this._zooming&&this.fire(new a.b("zoom",c)),this._rotating&&this.fire(new a.b("rotate",c)),this._pitching&&this.fire(new a.b("pitch",c))}_afterEase(c,h){if(this._easeId&&h&&this._easeId===h)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const b=this._zooming,_=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,b&&this.fire(new a.b("zoomend",c)),_&&this.fire(new a.b("rotateend",c)),w&&this.fire(new a.b("pitchend",c)),this.fire(new a.b("moveend",c))}flyTo(c,h){if(this._prefersReducedMotion(c)){const Se=a.ac(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Se,h)}this.stop(),c=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.d0},c);const b=this.transform,_=this.getZoom(),w=this.getBearing(),k=this.getPitch(),D="zoom"in c?a.aa(+c.zoom,b.minZoom,b.maxZoom):_,L="bearing"in c?this._normalizeBearing(c.bearing,w):w,B="pitch"in c?+c.pitch:k,U=b.zoomScale(D-_),W=a.P.convert(c.offset),J=b.centerPoint.add(W),ee=b.pointLocation(J);let ce=c.center;if(ce&&c.padding){const Se=this._cameraForBounds(this.transform,ce,ce,L,B,c);Se&&(ce=Se.center)}ce=a.bn.convert(ce||ee),this._normalizeCenter(ce);const se=b.project(ee),de=b.project(ce).sub(se);let oe=c.curve;const fe=Math.max(b.width,b.height),Te=fe/U,be=de.mag();if("minZoom"in c){const Se=a.aa(Math.min(c.minZoom,_,D),b.minZoom,b.maxZoom),Le=fe/b.zoomScale(Se-_);oe=Math.sqrt(Le/be*2)}const Ee=oe*oe;function he(Se){const Le=(Te*Te-fe*fe+(Se?-1:1)*Ee*Ee*be*be)/(2*(Se?Te:fe)*Ee*be);return Math.log(Math.sqrt(Le*Le+1)-Le)}function Ce(Se){return(Math.exp(Se)-Math.exp(-Se))/2}function Ne(Se){return(Math.exp(Se)+Math.exp(-Se))/2}const Fe=he(0);let G=function(Se){return Ne(Fe)/Ne(Fe+oe*Se)},R=function(Se){return fe*((Ne(Fe)*(Ce(Le=Fe+oe*Se)/Ne(Le))-Ce(Fe))/Ee)/be;var Le},H=(he(1)-Fe)/oe;if(Math.abs(be)<1e-6||!isFinite(H)){if(Math.abs(fe-Te)<1e-6)return this.easeTo(c,h);const Se=Te<fe?-1:1;H=Math.abs(Math.log(Te/fe))/oe,R=function(){return 0},G=function(Le){return Math.exp(Se*oe*Le)}}c.duration="duration"in c?+c.duration:1e3*H/("screenSpeed"in c?+c.screenSpeed/oe:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0);const le=w!==L,ge=B!==k,Oe=Se=>Le=>{const ke=Le*H,Ve=1/G(ke);Se.zoom=Le===1?D:_+Se.scaleZoom(Ve),le&&(Se.bearing=a.U(w,L,Le)),ge&&(Se.pitch=a.U(k,B,Le));const Ye=Le===1?ce:Se.unproject(se.add(de.mult(R(ke))).mult(Ve));return Se.setLocationAtPoint(Se.renderWorldCopies?Ye.wrap():Ye,J),Se._updateCameraOnTerrain(),c.preloadOnly||this._fireMoveEvents(h),Se};if(c.preloadOnly){const Se=this._emulate(Oe,c.duration,b);return this._preloadTiles(Se),this}return this._zooming=!0,this._rotating=le,this._pitching=ge,this._prepareEase(h,!1),this._ease(Oe(b),()=>this._afterEase(h),c),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(c,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const b=this._onEaseEnd;this._onEaseEnd=void 0,b.call(this,h)}if(!c){const b=this.handlers;b&&b.stop(!1)}return this}_ease(c,h,b){b.animate===!1||b.duration===0?(c(1),h()):(this._easeStart=a.f.now(),this._easeOptions=b,this._onEaseFrame=c,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const c=Math.min((a.f.now()-this._easeStart)/this._easeOptions.duration,1),h=this._onEaseFrame;h&&h(this._easeOptions.easing(c)),c<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(c,h){c=a.bh(c,-180,180);const b=Math.abs(c-h);return Math.abs(c-360-h)<b&&(c-=360),Math.abs(c+360-h)<b&&(c+=360),c}_normalizeCenter(c){const h=this.transform;if(h.maxBounds||h.projection.name!=="globe"&&!h.renderWorldCopies)return;const b=c.lng-h.center.lng;c.lng+=b>180?-360:b<-180?360:0}_prefersReducedMotion(c){return this._respectPrefersReducedMotion&&a.f.prefersReducedMotion&&!(c&&c.essential)}_emulate(c,h,b){const _=Math.ceil(15*h/1e3),w=[],k=c(b.clone());for(let D=0;D<=_;D++){const L=k(D/_);w.push(L.clone())}return w}}class wg{constructor(c={}){this.options=c,a.aY(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(c){const h=this.options&&this.options.compact;return this._map=c,this._container=N("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=N("button","mapboxgl-ctrl-attrib-button",this._container),N("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=N("div","mapboxgl-ctrl-attrib-inner",this._container),h&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),h===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(c,h){const b=this._map._getUIString(`AttributionControl.${h}`);c.removeAttribute("title"),c.firstElementChild&&c.firstElementChild.setAttribute("title",b)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let c=this._editLink;c||(c=this._editLink=this._container.querySelector(".mapbox-improve-map"));const h=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.d5.ACCESS_TOKEN}];if(c){const b=h.reduce((_,w,k)=>(w.value&&(_+=`${w.key}=${w.value}${k<h.length-1?"&":""}`),_),"?");c.href=`${a.d5.FEEDBACK_URL}/${b}#${fg(this._map,!0)}`,c.rel="noopener nofollow",this._setElementTitle(c,"MapFeedback")}}_updateData(c){!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let c=[];if(this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const h=this._map.style._mergedSourceCaches;for(const _ in h){const w=h[_];if(w.used){const k=w.getSource();k.attribution&&c.indexOf(k.attribution)<0&&c.push(k.attribution)}}c.sort((_,w)=>_.length-w.length),c=c.filter((_,w)=>{for(let k=w+1;k<c.length;k++)if(c[k].indexOf(_)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=[...this.options.customAttribution,...c]:c.unshift(this.options.customAttribution));const b=c.join(" | ");b!==this._attribHTML&&(this._attribHTML=b,c.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class ly{constructor(){a.aY(["_updateLogo","_updateCompact"],this)}onAdd(c){this._map=c,this._container=N("div","mapboxgl-ctrl");const h=N("a","mapboxgl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://www.mapbox.com/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(c){c&&c.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const c=this._map.style._sourceCaches;if(Object.entries(c).length===0)return!0;for(const h in c){const b=c[h].getSource();if(b.hasOwnProperty("mapbox_logo")&&!b.mapbox_logo)return!1}return!0}_updateCompact(){const c=this._container.children;if(c.length){const h=c[0];this._map.getCanvasContainer().offsetWidth<250?h.classList.add("mapboxgl-compact"):h.classList.remove("mapboxgl-compact")}}}class cy{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(c){const h=++this._id;return this._queue.push({callback:c,id:h,cancelled:!1}),h}remove(c){const h=this._currentlyRunning,b=h?this._queue.concat(h):this._queue;for(const _ of b)if(_.id===c)return void(_.cancelled=!0)}run(c=0){const h=this._currentlyRunning=this._queue;this._queue=[];for(const b of h)if(!b.cancelled&&(b.callback(c),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function mh(g,c,h){if(g=new a.bn(g.lng,g.lat),c){const b=new a.bn(g.lng-360,g.lat),_=new a.bn(g.lng+360,g.lat),w=360*Math.ceil(Math.abs(g.lng-h.center.lng)/360),k=h.locationPoint(g).distSqr(c),D=c.x<0||c.y<0||c.x>h.width||c.y>h.height;h.locationPoint(b).distSqr(c)<k&&(D||Math.abs(b.lng-h.center.lng)<w)?g=b:h.locationPoint(_).distSqr(c)<k&&(D||Math.abs(_.lng-h.center.lng)<w)&&(g=_)}for(;Math.abs(g.lng-h.center.lng)>180;){const b=h.locationPoint(g);if(b.x>=0&&b.y>=0&&b.x<=h.width&&b.y<=h.height)break;g.lng>h.center.lng?g.lng-=360:g.lng+=360}return g}const Yf={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Eg extends a.E{constructor(c,h){if(super(),(c instanceof HTMLElement||h)&&(c=a.e({element:c},h)),a.aY(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=c&&c.occludedOpacity||.2,c&&c.element)this._element=c.element,this._offset=a.P.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=N("div");const w=41,k=27,D=F("svg",{display:"block",height:w*this._scale+"px",width:k*this._scale+"px",viewBox:`0 0 ${k} ${w}`},this._element),L=F("radialGradient",{id:"shadowGradient"},F("defs",{},D));F("stop",{offset:"10%","stop-opacity":.4},L),F("stop",{offset:"100%","stop-opacity":.05},L),F("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},D),F("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},D),F("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},D),F("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},D),this._offset=a.P.convert(c&&c.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",w=>{w.preventDefault()}),this._element.addEventListener("mousedown",w=>{w.preventDefault()});const b=this._element.classList;for(const w in Yf)b.remove(`mapboxgl-marker-anchor-${w}`);b.add(`mapboxgl-marker-anchor-${this._anchor}`);const _=c&&c.className?c.className.trim().split(/\s+/):[];b.add(..._),this._popup=null}addTo(c){return c===this._map||(this.remove(),this._map=c,c.getCanvasContainer().appendChild(this._element),c.on("move",this._updateMoving),c.on("moveend",this._update),c.on("remove",this._clearFadeTimer),c._addMarker(this),this.setDraggable(this._draggable),this._update(),c.on("click",this._onMapClick)),this}remove(){const c=this._map;return c&&(c.off("click",this._onMapClick),c.off("move",this._updateMoving),c.off("moveend",this._update),c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler),c.off("mouseup",this._onUp),c.off("touchend",this._onUp),c.off("mousemove",this._onMove),c.off("touchmove",this._onMove),c.off("remove",this._clearFadeTimer),c._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(c){return this._lngLat=a.bn.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){const _=Math.sqrt(Math.pow(13.5,2)/2);c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=c,c._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(c){const h=c.code,b=c.charCode||c.keyCode;h!=="Space"&&h!=="Enter"&&b!==32&&b!==13||this.togglePopup()}_onMapClick(c){const h=c.originalEvent.target,b=this._element;this._popup&&(h===b||b.contains(h))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const c=this._popup;return c?(c.isOpen()?(c.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(c.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const c=this._map,h=this._pos;if(!c||!h)return!1;const b=c.unproject(h),_=c.getFreeCameraOptions();if(!_.position)return!1;const w=_.position.toLngLat();return w.distanceTo(b)<.9*w.distanceTo(this._lngLat)}_evaluateOpacity(){const c=this._map;if(!c)return;const h=this._pos;if(!h||h.x<0||h.x>c.transform.width||h.y<0||h.y>c.transform.height)return void this._clearFadeTimer();const b=c.unproject(h);let _;c._showingGlobe()&&a.d6(c.transform,this._lngLat)?_=0:(_=1-c._queryFogOpacity(b),c.transform._terrainEnabled()&&c.getTerrain()&&this._behindTerrain()&&(_*=this._occludedOpacity)),this._element.style.opacity=`${_}`,this._element.style.pointerEvents=_>0?"auto":"none",this._popup&&this._popup._setOpacity(_),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const c=this._pos;if(!c||!this._map)return;const h=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${c.x}px,${c.y}px)
            ${Yf[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${h.x}px,${h.y}px)
        `}_calculateXYTransform(){const c=this._pos,h=this._map,b=this.getPitchAlignment();if(!h||!c||b!=="map")return"";if(!h._showingGlobe()){const L=h.getPitch();return L?`rotateX(${L}deg)`:""}const _=a.bF(a.d7(h.transform,this._lngLat)),w=c.sub(a.d8(h.transform)),k=Math.abs(w.x)+Math.abs(w.y);if(k===0)return"";const D=_/k;return`rotateX(${-w.y*D}deg) rotateY(${w.x*D}deg)`}_calculateZTransform(){const c=this._pos,h=this._map;if(!h||!c)return"";let b=0;const _=this.getRotationAlignment();if(_==="map")if(h._showingGlobe()){const w=h.project(new a.bn(this._lngLat.lng,this._lngLat.lat+.001)),k=h.project(new a.bn(this._lngLat.lng,this._lngLat.lat-.001)).sub(w);b=a.bF(Math.atan2(k.y,k.x))-90}else b=-h.getBearing();else if(_==="horizon"){const w=a.O(4,6,h.getZoom()),k=a.d8(h.transform);k.y+=w*h.transform.height;const D=c.sub(k),L=a.bF(Math.atan2(D.y,D.x));b=(L>90?L-270:L+90)*(1-w)}return b+=this._rotation,b?`rotateZ(${b}deg)`:""}_update(c){cancelAnimationFrame(this._updateFrameId);const h=this._map;h&&(h.transform.renderWorldCopies&&(this._lngLat=mh(this._lngLat,this._pos,h.transform)),this._pos=h.project(this._lngLat),c===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),h._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(h._showingGlobe()||h.getTerrain()||h.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(c){return this._offset=a.P.convert(c),this._update(),this}addClassName(c){return this._element.classList.add(c),this}removeClassName(c){return this._element.classList.remove(c),this}toggleClassName(c){return this._element.classList.toggle(c)}_onMove(c){const h=this._map;if(!h)return;const b=this._pointerdownPos,_=this._positionDelta;if(b&&_){if(!this._isDragging){const w=this._clickTolerance||h._clickTolerance;if(c.point.dist(b)<w)return;this._isDragging=!0}this._pos=c.point.sub(_),this._lngLat=h.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.b("dragstart"))),this.fire(new a.b("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const c=this._map;c&&(c.off("mousemove",this._onMove),c.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new a.b("dragend")),this._state="inactive"}_addDragHandler(c){const h=this._map,b=this._pos;h&&b&&this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(b),this._pointerdownPos=c.point,this._state="pending",h.on("mousemove",this._onMove),h.on("touchmove",this._onMove),h.once("mouseup",this._onUp),h.once("touchend",this._onUp))}setDraggable(c){this._draggable=!!c;const h=this._map;return h&&(c?(h.on("mousedown",this._addDragHandler),h.on("touchstart",this._addDragHandler)):(h.off("mousedown",this._addDragHandler),h.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(c){return this._rotation=c||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(c){return this._rotationAlignment=c||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(c){return this._pitchAlignment=c||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(c){return this._occludedOpacity=c||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const uy={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Tg=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function dy(g=new a.P(0,0),c="bottom"){if(typeof g=="number"){const h=Math.round(Math.sqrt(.5*Math.pow(g,2)));switch(c){case"top":return new a.P(0,g);case"top-left":return new a.P(h,h);case"top-right":return new a.P(-h,h);case"bottom":return new a.P(0,-g);case"bottom-left":return new a.P(h,-h);case"bottom-right":return new a.P(-h,-h);case"left":return new a.P(g,0);case"right":return new a.P(-g,0)}return new a.P(0,0)}return g instanceof a.P||Array.isArray(g)?a.P.convert(g):a.P.convert(g[c]||[0,0])}class Gf{constructor(c){this.jumpTo(c)}getValue(c){if(c<=this._startTime)return this._start;if(c>=this._endTime)return this._end;const h=a.cc((c-this._startTime)/(this._endTime-this._startTime));return this._start*(1-h)+this._end*h}isEasing(c){return c>=this._startTime&&c<=this._endTime}jumpTo(c){this._startTime=-1/0,this._endTime=-1/0,this._start=c,this._end=c}easeTo(c,h,b){this._start=this.getValue(h),this._end=c,this._startTime=h,this._endTime=h+b}}const Xc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Sg={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1};class hl{constructor(){this.showOverdrawInspector=!1,this.showTileBoundaries=!1,this.showParseStatus=!1,this.continuousRedraw=!1,this.showTileAABBs=!1,this.showPadding=!1,this.showTerrainWireframe=!1,this.showLayers2DWireframe=!1,this.showLayers3DWireframe=!1}}const gh={showCompass:!0,showZoom:!0,visualizePitch:!1};class vs{constructor(c,h,b=!1){this._clickTolerance=10,this.element=h,this.mouseRotate=new lh({clickTolerance:c.dragRotate._mouseRotate._clickTolerance}),this.map=c,b&&(this.mousePitch=new Uf({clickTolerance:c.dragRotate._mousePitch._clickTolerance})),a.aY(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),h.addEventListener("mousedown",this.mousedown),h.addEventListener("touchstart",this.touchstart,{passive:!1}),h.addEventListener("touchmove",this.touchmove),h.addEventListener("touchend",this.touchend),h.addEventListener("touchcancel",this.reset)}down(c,h){this.mouseRotate.mousedown(c,h),this.mousePitch&&this.mousePitch.mousedown(c,h),K()}move(c,h){const b=this.map,_=this.mouseRotate.mousemoveWindow(c,h),w=_&&_.bearingDelta;if(w&&b.setBearing(b.getBearing()+w),this.mousePitch){const k=this.mousePitch.mousemoveWindow(c,h),D=k&&k.pitchDelta;D&&b.setPitch(b.getPitch()+D)}}off(){const c=this.element;c.removeEventListener("mousedown",this.mousedown),c.removeEventListener("touchstart",this.touchstart,{passive:!1}),c.removeEventListener("touchmove",this.touchmove),c.removeEventListener("touchend",this.touchend),c.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Q(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(c){this.down(a.e({},c,{ctrlKey:!0,preventDefault:()=>c.preventDefault()}),ue(this.element,c)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(c){this.move(c,ue(this.element,c))}mouseup(c){this.mouseRotate.mouseupWindow(c),this.mousePitch&&this.mousePitch.mouseupWindow(c),this.offTemp()}touchstart(c){c.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=re(this.element,c.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>c.preventDefault()},this._startPos))}touchmove(c){c.targetTouches.length!==1?this.reset():(this._lastPos=re(this.element,c.targetTouches)[0],this.move({preventDefault:()=>c.preventDefault()},this._lastPos))}touchend(c){c.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const qf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},$i={maxWidth:100,unit:"metric"},oc={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"};return{version:a.dk,supported:C,setRTLTextPlugin:a.dm,getRTLTextPluginStatus:a.dn,Map:class extends Po{constructor(g){const c=g;if((g=a.e({},Sg,g)).minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&g.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(g.antialias&&a.d9(window)&&(g.antialias=!1,a.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new zu(g.minZoom,g.maxZoom,g.minPitch,g.maxPitch,g.renderWorldCopies),g),this._repaint=!1,this._interactive=g.interactive,this._minTileCacheSize=g.minTileCacheSize,this._maxTileCacheSize=g.maxTileCacheSize,this._failIfMajorPerformanceCaveat=g.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=g.preserveDrawingBuffer,this._antialias=g.antialias,this._trackResize=g.trackResize,this._bearingSnap=g.bearingSnap,this._refreshExpiredTiles=g.refreshExpiredTiles,this._fadeDuration=g.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=g.crossSourceCollisions,this._collectResourceTiming=g.collectResourceTiming,this._language=this._parseLanguage(g.language),this._worldview=g.worldview,this._renderTaskQueue=new cy,this._domRenderTaskQueue=new cy,this._controls=[],this._markers=[],this._popups=[],this._mapId=a.aC(),this._locale=a.e({},Xc,g.locale),this._clickTolerance=g.clickTolerance,this._cooperativeGestures=g.cooperativeGestures,this._performanceMetricsCollection=g.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Gf(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new a.da(g.transformRequest,g.accessToken,g.testMode),this._silenceAuthErrors=!!g.testMode,this._contextCreateOptions=g.contextCreateOptions?{...g.contextCreateOptions}:{},typeof g.container=="string"){const h=document.getElementById(g.container);if(!h)throw new Error(`Container '${g.container.toString()}' not found.`);this._container=h}else{if(!(g.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(this._container.childNodes.length>0&&a.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),g.maxBounds&&this.setMaxBounds(g.maxBounds),a.aY(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._debugParams=new hl,this._tp=g.devtools?new nh(this):new nh,this._tp.registerParameter(this._debugParams,["Debug"],"showOverdrawInspector",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug"],"showTileBoundaries",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug"],"showParseStatus",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug"],"continuousRedraw",void 0,h=>{this.repaint=h}),this._tp.registerParameter(this._debugParams,["Debug"],"showTileAABBs",void 0,h=>{this.showTileAABBs=h}),this._tp.registerParameter(this._debugParams,["Debug"],"showPadding",void 0,h=>{this.showPadding=h}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showTerrainWireframe",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showLayers2DWireframe",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showLayers3DWireframe",void 0,()=>{this._update()}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new Xx(this,g),this._localFontFamily=g.localFontFamily,this._localIdeographFontFamily=g.localIdeographFontFamily,(g.style||!g.testMode)&&this.setStyle(g.style||a.d5.DEFAULT_STYLE,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),g.projection&&this.setProjection(g.projection),g.hash&&(this._hash=new Zc(typeof g.hash=="string"&&g.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){c.center==null&&c.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch});const h=g.bounds;h&&(this.resize(),this.fitBounds(h,a.e({},g.fitBoundsOptions,{duration:0})))}this.resize(),g.attributionControl&&this.addControl(new wg({customAttribution:g.customAttribution})),this._logoControl=new ly,this.addControl(this._logoControl,g.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",h=>{this._update(h.dataType==="style"),this.fire(new a.b(`${h.dataType}data`,h))}),this.on("dataloading",h=>{this.fire(new a.b(`${h.dataType}dataloading`,h))})}_getMapId(){return this._mapId}addControl(g,c){if(c===void 0&&(c=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new a.a(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=g.onAdd(this);this._controls.push(g);const b=this._controlPositions[c];return c.indexOf("bottom")!==-1?b.insertBefore(h,b.firstChild):b.appendChild(h),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new a.a(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const c=this._controls.indexOf(g);return c>-1&&this._controls.splice(c,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(g){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const c=!this._moving;return c&&this.fire(new a.b("movestart",g)).fire(new a.b("move",g)),this.fire(new a.b("resize",g)),c&&this.fire(new a.b("moveend",g)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(g){return this.transform.setMaxBounds(a.ad.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g?this.setZoom(g):this.fire(new a.b("zoomstart")).fire(new a.b("zoom")).fire(new a.b("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g?this.setZoom(g):this.fire(new a.b("zoomstart")).fire(new a.b("zoom")).fire(new a.b("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g?this.setPitch(g):this.fire(new a.b("pitchstart")).fire(new a.b("pitch")).fire(new a.b("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g?this.setPitch(g):this.fire(new a.b("pitchstart")).fire(new a.b("pitch")).fire(new a.b("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(g){return g==="auto"?navigator.language:Array.isArray(g)?g.length===0?void 0:g.map(c=>c==="auto"?navigator.language:c):g}setLanguage(g){const c=this._parseLanguage(g);if(!this.style||c===this._language)return this;this._language=c,this.style.reloadSources();for(const h of this._controls)h._setLanguage&&h._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(g){return this.style&&g!==this._worldview?(this._worldview=g,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(g){return this._lazyInitEmptyStyle(),g?typeof g=="string"&&(g={name:g}):g=null,this._useExplicitProjection=!!g,this._prioritizeAndUpdateProjection(g,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const g=this.transform,c=g.projection.name;let h;c==="globe"&&g.zoom>=a.bx?(g.setMercatorFromTransition(),h=!0):c==="mercator"&&g.zoom<a.bx&&(g.setProjection({name:"globe"}),h=!0),h&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(g,c){return this._updateProjection(g||c||{name:"mercator"})}_updateProjection(g){let c;return c=g.name==="globe"&&this.transform.zoom>=a.bx?this.transform.setMercatorFromTransition():this.transform.setProjection(g),this.style.applyProjectionUpdate(),c&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(g){return this.transform.locationPoint3D(a.bn.convert(g))}unproject(g){return this.transform.pointLocation3D(a.P.convert(g))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(g,c,h){if(g==="mouseenter"||g==="mouseover"){let b=!1;const _=k=>{const D=c.filter(B=>this.getLayer(B)),L=D.length?this.queryRenderedFeatures(k.point,{layers:D}):[];L.length?b||(b=!0,h.call(this,new ga(g,this,k.originalEvent,{features:L}))):b=!1},w=()=>{b=!1};return{layers:new Set(c),listener:h,delegates:{mousemove:_,mouseout:w}}}if(g==="mouseleave"||g==="mouseout"){let b=!1;const _=k=>{const D=c.filter(L=>this.getLayer(L));(D.length?this.queryRenderedFeatures(k.point,{layers:D}):[]).length?b=!0:b&&(b=!1,h.call(this,new ga(g,this,k.originalEvent)))},w=k=>{b&&(b=!1,h.call(this,new ga(g,this,k.originalEvent)))};return{layers:new Set(c),listener:h,delegates:{mousemove:_,mouseout:w}}}{const b=_=>{const w=c.filter(D=>this.getLayer(D)),k=w.length?this.queryRenderedFeatures(_.point,{layers:w}):[];k.length&&(_.features=k,h.call(this,_),delete _.features)};return{layers:new Set(c),listener:h,delegates:{[g]:b}}}}on(g,c,h){if(h===void 0)return super.on(g,c);if(Array.isArray(c)||(c=[c]),c){for(const _ of c)if(!this._isValidId(_))return this}const b=this._createDelegatedListener(g,c,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(b);for(const _ in b.delegates)this.on(_,b.delegates[_]);return this}once(g,c,h){if(h===void 0)return super.once(g,c);if(Array.isArray(c)||(c=[c]),c){for(const _ of c)if(!this._isValidId(_))return this}const b=this._createDelegatedListener(g,c,h);for(const _ in b.delegates)this.once(_,b.delegates[_]);return this}off(g,c,h){if(h===void 0)return super.off(g,c);c=new Set(Array.isArray(c)?c:[c]);for(const w of c)if(!this._isValidId(w))return this;const b=(w,k)=>{if(w.size!==k.size)return!1;for(const D of w)if(!k.has(D))return!1;return!0},_=this._delegatedListeners?this._delegatedListeners[g]:void 0;return _&&(w=>{for(let k=0;k<w.length;k++){const D=w[k];if(D.listener===h&&b(D.layers,c)){for(const L in D.delegates)this.off(L,D.delegates[L]);return w.splice(k,1),this}}})(_),this}queryRenderedFeatures(g,c){if(!this.style)return[];if(c!==void 0||g===void 0||g instanceof a.P||Array.isArray(g)||(c=g,g=void 0),g=g||[[0,0],[this.transform.width,this.transform.height]],(c=c||{}).layers&&Array.isArray(c.layers)){for(const h of c.layers)if(!this._isValidId(h))return[]}return this.style.queryRenderedFeatures(g,c,this.transform)}querySourceFeatures(g,c){return this._isValidId(g)?this.style.querySourceFeatures(g,c):[]}isPointOnSurface(g){const{name:c}=this.transform.projection;return c!=="globe"&&c!=="mercator"&&a.w(`${c} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(a.P.convert(g))}setStyle(g,c){return(c=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},c)).diff!==!1&&c.localIdeographFontFamily===this._localIdeographFontFamily&&c.localFontFamily===this._localFontFamily&&this.style&&g?(this._diffStyle(g,c),this):(this._localIdeographFontFamily=c.localIdeographFontFamily,this._localFontFamily=c.localFontFamily,this._updateStyle(g,c))}_getUIString(g){const c=this._locale[g];if(c==null)throw new Error(`Missing UI string '${g}'`);return c}_updateStyle(g,c){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),g&&(this.style=new ps(this,c||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g):this.style.loadJSON(g)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new ps(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,c){if(typeof g=="string"){const h=this._requestManager.normalizeStyleURL(g),b=this._requestManager.transformRequest(h,a.R.Style);a.g(b,(_,w)=>{_?this.fire(new a.a(_)):w&&this._updateDiff(w,c)})}else typeof g=="object"&&this._updateDiff(g,c)}_updateDiff(g,c){try{this.style.setState(g)&&this._update(!0)}catch(h){a.w(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(g,c)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(a.w("There is no style added to the map."),!1)}_isValidId(g){return g==null?(this.fire(new a.a(new Error("IDs can't be empty."))),!1):!a.c4(g)||(this.fire(new a.a(new Error(`IDs can't contain special symbols: "${g}".`))),!1)}addSource(g,c){return this._isValidId(g)?(this._lazyInitEmptyStyle(),this.style.addSource(g,c),this._update(!0)):this}isSourceLoaded(g){return!!this._isValidId(g)&&!!this.style&&this.style._isSourceCacheLoaded(g)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(g,c,h){this._lazyInitEmptyStyle(),this.style.addSourceType(g,c,h)}removeSource(g){return this._isValidId(g)?(this.style.removeSource(g),this._updateTerrain(),this._update(!0)):this}getSource(g){return this._isValidId(g)?this.style.getOwnSource(g):null}addImage(g,c,{pixelRatio:h=1,sdf:b=!1,stretchX:_,stretchY:w,content:k}={}){if(this._lazyInitEmptyStyle(),c instanceof HTMLImageElement||ImageBitmap&&c instanceof ImageBitmap){const{width:D,height:L,data:B}=a.f.getImageData(c);this.style.addImage(g,{data:new a.h({width:D,height:L},B),pixelRatio:h,stretchX:_,stretchY:w,content:k,sdf:b,version:0})}else if(c.width===void 0||c.height===void 0)this.fire(new a.a(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:D,height:L}=c,B=c;this.style.addImage(g,{data:new a.h({width:D,height:L},new Uint8Array(B.data)),pixelRatio:h,stretchX:_,stretchY:w,content:k,sdf:b,version:0,userImage:B}),B.onAdd&&B.onAdd(this,g)}}updateImage(g,c){this._lazyInitEmptyStyle();const h=this.style.getImage(g);if(!h)return void this.fire(new a.a(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=c instanceof HTMLImageElement||ImageBitmap&&c instanceof ImageBitmap?a.f.getImageData(c):c,{width:_,height:w}=b,k=b.data;if(_===void 0||w===void 0)return void this.fire(new a.a(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==h.data.width||w!==h.data.height)return void this.fire(new a.a(new Error(`The width and height of the updated image (${_}, ${w})
                must be that same as the previous version of the image
                (${h.data.width}, ${h.data.height})`)));const D=!(c instanceof HTMLImageElement||ImageBitmap&&c instanceof ImageBitmap);h.data.replace(k,D),this.style.updateImage(g,h)}hasImage(g){return g?!!this.style&&!!this.style.getImage(g):(this.fire(new a.a(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g,c){a.d(this._requestManager.transformRequest(g,a.R.Image),(h,b)=>{c(h,b instanceof HTMLImageElement?a.f.getImageData(b):b)})}listImages(){return this.style.listImages()}addModel(g,c){this._lazyInitEmptyStyle(),this.style.addModel(g,c)}hasModel(g){return g?this.style.hasModel(g):(this.fire(new a.a(new Error("Missing required model id"))),!1)}removeModel(g){this.style.removeModel(g)}listModels(){return this.style.listModels()}addLayer(g,c){return this._isValidId(g.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(g,c),this._update(!0)):this}getSlot(g){const c=this.getLayer(g);return c&&c.slot||null}setSlot(g,c){return this.style.setSlot(g,c),this.style.mergeLayers(),this._update(!0)}addImport(g,c){return this.style.addImport(g,c),this}updateImport(g,c){return typeof c!="string"&&c.id!==g?(this.removeImport(g),this.addImport(c)):(this.style.updateImport(g,c),this._update(!0))}removeImport(g){return this.style.removeImport(g),this}moveImport(g,c){return this.style.moveImport(g,c),this._update(!0)}moveLayer(g,c){return this._isValidId(g)?(this.style.moveLayer(g,c),this._update(!0)):this}removeLayer(g){return this._isValidId(g)?(this.style.removeLayer(g),this._update(!0)):this}getLayer(g){return this._isValidId(g)?this.style.getOwnLayer(g):null}setLayerZoomRange(g,c,h){return this._isValidId(g)?(this.style.setLayerZoomRange(g,c,h),this._update(!0)):this}setFilter(g,c,h={}){return this._isValidId(g)?(this.style.setFilter(g,c,h),this._update(!0)):this}getFilter(g){return this._isValidId(g)?this.style.getFilter(g):null}setPaintProperty(g,c,h,b={}){return this._isValidId(g)?(this.style.setPaintProperty(g,c,h,b),this._update(!0)):this}getPaintProperty(g,c){return this._isValidId(g)?this.style.getPaintProperty(g,c):null}setLayoutProperty(g,c,h,b={}){return this._isValidId(g)?(this.style.setLayoutProperty(g,c,h,b),this._update(!0)):this}getLayoutProperty(g,c){return this._isValidId(g)?this.style.getLayoutProperty(g,c):null}getConfigProperty(g,c){return this.style.getConfigProperty(g,c)}setConfigProperty(g,c,h){return this.style.setConfigProperty(g,c,h),this._update(!0)}setLights(g){if(this._lazyInitEmptyStyle(),g&&g.length===1&&g[0].type==="flat"){const c=g[0];c.properties?this.style.setFlatLight(c.properties,c.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(g),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const g=this.style.getLights()||[];return g.length===0&&g.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),g}setLight(g,c={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:g}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(g){return this._lazyInitEmptyStyle(),!g&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(g),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(g){return this._lazyInitEmptyStyle(),this.style.setFog(g),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setCamera(g){return this.style.setCamera(g),this._triggerCameraUpdate(g)}_triggerCameraUpdate(g){return this._update(this.transform.setOrthographicProjectionAtLowPitch(g["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(g){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(a.bn.convert(g),this.transform):0}setFeatureState(g,c){return this._isValidId(g.source)?(this.style.setFeatureState(g,c),this._update()):this}removeFeatureState(g,c){return this._isValidId(g.source)?(this.style.removeFeatureState(g,c),this._update()):this}getFeatureState(g){return this._isValidId(g.source)?this.style.getFeatureState(g):null}_updateContainerDimensions(){if(!this._container)return;const g=this._container.getBoundingClientRect().width||400,c=this._container.getBoundingClientRect().height||300;let h,b,_,w=this._container;for(;w&&(!b||!_);){const k=window.getComputedStyle(w).transform;k&&k!=="none"&&(h=k.match(/matrix.*\((.+)\)/)[1].split(", "),h[0]&&h[0]!=="0"&&h[0]!=="1"&&(b=h[0]),h[3]&&h[3]!=="0"&&h[3]!=="1"&&(_=h[3])),w=w.parentElement}this._containerWidth=b?Math.abs(g/b):g,this._containerHeight=_?Math.abs(c/_):c}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const g=this._container;g.classList.add("mapboxgl-map"),(this._missingCSSCanary=N("div","mapboxgl-canary",g)).style.visibility="hidden",this._detectMissingCSS();const c=this._canvasContainer=N("div","mapboxgl-canvas-container",g);this._canvas=N("canvas","mapboxgl-canvas",c),this._interactive&&(c.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const h=this._controlContainer=N("div","mapboxgl-control-container",g),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(_=>{b[_]=N("div",`mapboxgl-ctrl-${_}`,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(g,c){const h=a.f.devicePixelRatio||1;this._canvas.width=h*Math.ceil(g),this._canvas.height=h*Math.ceil(c),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${c}px`}_addMarker(g){this._markers.push(g)}_removeMarker(g){const c=this._markers.indexOf(g);c!==-1&&this._markers.splice(c,1)}_addPopup(g){this._popups.push(g)}_removePopup(g){const c=this._popups.indexOf(g);c!==-1&&this._popups.splice(c,1)}_setupPainter(){const g=a.e({},C.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),c=this._canvas.getContext("webgl2",g);c?(a.db(c,!0),this.painter=new jf(c,this._contextCreateOptions,this.transform,this._tp),this.on("data",h=>{h.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),a.dc.testSupport(c)):this.fire(new a.a(new Error("Failed to initialize WebGL")))}_contextLost(g){g.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.b("webglcontextlost",{originalEvent:g}))}_contextRestored(g){this._setupPainter(),this.resize(),this._update(),this.fire(new a.b("webglcontextrestored",{originalEvent:g}))}_onMapScroll(g){if(g.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_requestDomTask(g){!this.loaded()||this.loaded()&&!this.isMoving()?g():this._domRenderTaskQueue.add(g)}_render(g){let c;this.fire(new a.b("renderstart"));const h=this.painter.context.extTimerQuery,b=a.f.now(),_=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(c=_.createQuery(),_.beginQuery(h.TIME_ELAPSED_EXT,c)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(g),this._domRenderTaskQueue.run(g),this._removed)return;this._updateProjectionTransition();const w=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const L=this.transform.zoom,B=this.transform.pitch,U=a.f.now(),W=new a.K(L,{now:U,fadeDuration:w,pitch:B,transition:this.style.transition});this.style.update(W)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let k=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),k=this._updateAverageElevation(b),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):k=this._updateAverageElevation(b),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,w,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries||this._debugParams.showTileBoundaries,showParseStatus:this.showParseStatus||this._debugParams.showParseStatus,wireframe:{terrain:this.showTerrainWireframe||this._debugParams.showTerrainWireframe,layers2D:this.showLayers2DWireframe||this._debugParams.showLayers2DWireframe,layers3D:this.showLayers3DWireframe||this._debugParams.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector||this._debugParams.showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs||this._debugParams.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:w,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding||this._debugParams.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new a.b("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.b("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),c){const L=a.f.now()-b;_.endQuery(h.TIME_ELAPSED_EXT),setTimeout(()=>{const B=_.getQueryParameter(c,_.QUERY_RESULT)/1e6;_.deleteQuery(c),this.fire(new a.b("gpu-timing-frame",{cpuTime:L,gpuTime:B}))},50)}if(this.listens("gpu-timing-layer")){const L=this.painter.collectGpuTimers();setTimeout(()=>{const B=this.painter.queryGpuTimers(L);this.fire(new a.b("gpu-timing-layer",{layerTimes:B}))},50)}if(this.listens("gpu-timing-deferred-render")){const L=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const B=this.painter.queryGpuTimeDeferredRender(L);this.fire(new a.b("gpu-timing-deferred-render",{gpuTime:B}))},50)}const D=this._sourcesDirty||this._styleDirty||this._placementDirty||k;if(D||this._repaint)this.triggerRepaint();else{const L=!this.isMoving()&&this.loaded();if(L&&(k=this._updateAverageElevation(b,!0)),k)this.triggerRepaint();else if(this._triggerFrame(!1),L&&(this.fire(new a.b("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const B=this._calculateSpeedIndex();this.fire(new a.b("speedindexcompleted",{speedIndex:B})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||D||(this._fullyLoaded=!0,this._performanceMetricsCollection&&a.dd(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(g){for(const c of this._markers)g&&!this.getRenderWorldCopies()&&(c._lngLat=c._lngLat.wrap()),c._update();for(const c of this._popups)!g||this.getRenderWorldCopies()||c._trackPointer||(c._lngLat=c._lngLat.wrap()),c._update()}_updateAverageElevation(g,c=!1){const h=_=>(this.transform.averageElevation=_,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&h(0);const b=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(b||(c||g-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(g)){const _=this.transform.averageElevation;let w=this.transform.sampleAverageElevation();this.transform.elevation&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(w)?w=0:this._averageElevationLastSampledAt=g;const k=Math.abs(_-w);if(k>1){if(this._isInitialLoad||b)return this._averageElevation.jumpTo(w),h(w);this._averageElevation.easeTo(w,g,300)}else if(k>1e-4)return this._averageElevation.jumpTo(w),h(w)}return!!this._averageElevation.isEasing(g)&&h(this._averageElevation.getValue(g))}_authenticate(){a.de(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,g=>{if(g&&(g.message===a.df||g.status===401)){const c=this.painter.context.gl;a.db(c,!1),this._logoControl instanceof ly&&this._logoControl._updateLogo(),c&&c.clear(c.DEPTH_BUFFER_BIT|c.COLOR_BUFFER_BIT|c.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new a.a(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),a.dg(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const g=this._isDragging();this.painter.updateTerrain(this.style,g)}_calculateSpeedIndex(){const g=this.painter.canvasCopy(),c=this.painter.getCanvasCopiesAndTimestamps();c.timeStamps.push(performance.now());const h=this.painter.context.gl,b=h.createFramebuffer();function _(w){h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,w,0);const k=new Uint8Array(h.drawingBufferWidth*h.drawingBufferHeight*4);return h.readPixels(0,0,h.drawingBufferWidth,h.drawingBufferHeight,h.RGBA,h.UNSIGNED_BYTE,k),k}return h.bindFramebuffer(h.FRAMEBUFFER,b),this._canvasPixelComparison(_(g),c.canvasCopies.map(_),c.timeStamps)}_canvasPixelComparison(g,c,h){let b=h[1]-h[0];const _=g.length/4;for(let w=0;w<c.length;w++){const k=c[w];let D=0;for(let L=0;L<k.length;L+=4)k[L]===g[L]&&k[L+1]===g[L+1]&&k[L+2]===g[L+2]&&k[L+3]===g[L+3]&&(D+=1);b+=(h[w+2]-h[w+1])*(1-D/_)}return b}remove(){this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const g=this.painter.context.gl.getExtension("WEBGL_lose_context");g&&g.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),a.dh(this.painter.context.gl),a.di.remove(),a.dj.remove(),this._removed=!0,this.fire(new a.b("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(g){this._renderNextFrame=this._renderNextFrame||g,this.style&&!this._frame&&(this._frame=a.f.frame(c=>{const h=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,h&&this._render(c)}))}_preloadTiles(g){const c=this.style?Object.values(this.style._sourceCaches):[];return a.b1(c,(h,b)=>h._preloadTiles(g,b),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(g){this._trackResize&&this.resize({originalEvent:g})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(g){this._showParseStatus!==g&&(this._showParseStatus=g,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(g){this._showTerrainWireframe!==g&&(this._showTerrainWireframe=g,this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(g){this._showLayers2DWireframe!==g&&(this._showLayers2DWireframe=g,this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(g){this._showLayers3DWireframe!==g&&(this._showLayers3DWireframe=g,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(g){this._speedIndexTiming!==g&&(this._speedIndexTiming=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(g){this._showTileAABBs!==g&&(this._showTileAABBs=g,g&&this._update())}_setCacheLimits(g,c){a.dl(g,c)}get version(){return a.dk}},NavigationControl:class{constructor(g){this.options=a.e({},gh,g),this._container=N("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",c=>c.preventDefault()),this.options.showZoom&&(a.aY(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",c=>{this._map&&this._map.zoomIn({},{originalEvent:c})}),N("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",c=>{this._map&&this._map.zoomOut({},{originalEvent:c})}),N("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(a.aY(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",c=>{const h=this._map;h&&(this.options.visualizePitch?h.resetNorthPitch({},{originalEvent:c}):h.resetNorth({},{originalEvent:c}))}),this._compassIcon=N("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const g=this._map;if(!g)return;const c=g.getZoom(),h=c===g.getMaxZoom(),b=c===g.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=b,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",b.toString())}_rotateCompassArrow(){const g=this._map;if(!g)return;const c=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(g.transform.pitch*(Math.PI/180)),.5)}) rotateX(${g.transform.pitch}deg) rotateZ(${g.transform.angle*(180/Math.PI)}deg)`:`rotate(${g.transform.angle*(180/Math.PI)}deg)`;g._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=c)})}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),g.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&g.on("pitch",this._rotateCompassArrow),g.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new vs(g,this._compass,this.options.visualizePitch)),this._container}onRemove(){const g=this._map;g&&(this._container.remove(),this.options.showZoom&&g.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&g.off("pitch",this._rotateCompassArrow),g.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(g,c){const h=N("button",g,this._container);return h.type="button",h.addEventListener("click",c),h}_setButtonTitle(g,c){if(!this._map)return;const h=this._map._getUIString(`NavigationControl.${c}`);g.setAttribute("aria-label",h),g.firstElementChild&&g.firstElementChild.setAttribute("title",h)}},GeolocateControl:class extends a.E{constructor(g){super();const c=navigator.geolocation;this.options=a.e({geolocation:c},qf,g),a.aY(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=oh(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(g){return this._map=g,this._container=N("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(g){const c=(h=!!this.options.geolocation)=>{this._supportsGeolocation=h,g(h)};this._supportsGeolocation!==void 0?g(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(h=>c(h.state!=="denied")).catch(()=>c()):c()}_isOutOfMapMaxBounds(g){const c=this._map.getMaxBounds(),h=g.coords;return!!c&&(h.longitude<c.getWest()||h.longitude>c.getEast()||h.latitude<c.getSouth()||h.latitude>c.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(g){if(this._map){if(this._isOutOfMapMaxBounds(g))return this._setErrorState(),this.fire(new a.b("outofmaxbounds",g)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=g,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(g),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(g),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new a.b("geolocate",g)),this._finish()}}_updateCamera(g){const c=new a.bn(g.coords.longitude,g.coords.latitude),h=g.coords.accuracy,b=this._map.getBearing(),_=a.e({bearing:b},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(h),_,{geolocateSource:!0})}_updateMarker(g){if(g){const c=new a.bn(g.coords.longitude,g.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=g.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const g=this._map.transform,c=a.bl(1,g._center.lat)*g.worldSize,h=Math.ceil(2*this._accuracy*c);this._circleElement.style.width=`${h}px`,this._circleElement.style.height=`${h}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(g){if(this._map){if(this.options.trackUserLocation)if(g.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(g.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new a.b("error",g)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(g){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=N("button","mapboxgl-ctrl-geolocate",this._container),N("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",g===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=N("div","mapboxgl-user-location"),this._dotElement.appendChild(N("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(N("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Eg({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=N("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Eg({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new a.b("trackuserlocationend")))})}}_onDeviceOrientation(g){this._userLocationDotMarker&&(g.webkitCompassHeading?this._heading=g.webkitCompassHeading:g.absolute===!0&&(this._heading=-1*g.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.b("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.b("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.b("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(g={maximumAge:6e5,timeout:0},this._noTimeout=!0):(g=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,g),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const g=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(c=>{c==="granted"&&g()}).catch(console.error):g()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:wg,ScaleControl:class{constructor(g){this.options=a.e({},$i,g),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),a.aY(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const g=this.options.maxWidth||100,c=this._map,h=c._containerHeight/2,b=c._containerWidth/2-g/2,_=c.unproject([b,h]),w=c.unproject([b+g,h]),k=_.distanceTo(w);if(this.options.unit==="imperial"){const D=3.2808*k;D>5280?this._setScale(g,D/5280,"mile"):this._setScale(g,D,"foot")}else this.options.unit==="nautical"?this._setScale(g,k/1852,"nautical-mile"):k>=1e3?this._setScale(g,k/1e3,"kilometer"):this._setScale(g,k,"meter")}_setScale(g,c,h){this._map._requestDomTask(()=>{const b=function(w){const k=Math.pow(10,`${Math.floor(w)}`.length-1);let D=w/k;return D=D>=10?10:D>=5?5:D>=3?3:D>=2?2:D>=1?1:function(L){const B=Math.pow(10,Math.ceil(-Math.log(L)/Math.LN10));return Math.round(L*B)/B}(D),k*D}(c),_=b/c;this._container.innerHTML=this._isNumberFormatSupported&&h!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:h}).format(b):`${b}&nbsp;${oc[h]}`,this._container.style.width=g*_+"px"})}onAdd(g){return this._map=g,this._language=g.getLanguage(),this._container=N("div","mapboxgl-ctrl mapboxgl-ctrl-scale",g.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(g){this._language=g,this._update()}setUnit(g){this.options.unit=g,this._update()}},FullscreenControl:class{constructor(g){this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:a.w("Full screen control 'container' must be a DOM element.")),a.aY(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=N("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const g=this._fullscreenButton=N("button","mapboxgl-ctrl-fullscreen",this._controlContainer);N("span","mapboxgl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",g)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends a.E{constructor(g){super(),this.options=a.e(Object.create(uy),g),a.aY(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(g&&g.className?g.className.trim().split(/\s+/):[])}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&g.on("preclick",this._onClose),this.options.closeOnMove&&g.on("move",this._onClose),g.on("remove",this.remove),this._update(),g._addPopup(this),this._focusFirstElement(),this._trackPointer?(g.on("mousemove",this._onMouseEvent),g.on("mouseup",this._onMouseEvent),g._canvasContainer.classList.add("mapboxgl-track-pointer")):g.on("move",this._update),this.fire(new a.b("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const g=this._map;return g&&(g.off("move",this._update),g.off("move",this._onClose),g.off("preclick",this._onClose),g.off("click",this._onClose),g.off("remove",this.remove),g.off("mousemove",this._onMouseEvent),g.off("mouseup",this._onMouseEvent),g.off("drag",this._onMouseEvent),g._canvasContainer&&g._canvasContainer.classList.remove("mapboxgl-track-pointer"),g._removePopup(this),this._map=void 0),this.fire(new a.b("close")),this}getLngLat(){return this._lngLat}setLngLat(g){this._lngLat=a.bn.convert(g),this._pos=null,this._trackPointer=!1,this._update();const c=this._map;return c&&(c.on("move",this._update),c.off("mousemove",this._onMouseEvent),c._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const g=this._map;return g&&(g.off("move",this._update),g.on("mousemove",this._onMouseEvent),g.on("drag",this._onMouseEvent),g._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){const c=document.createDocumentFragment(),h=document.createElement("body");let b;for(h.innerHTML=g;b=h.firstChild,b;)c.appendChild(b);return this.setDOMContent(c)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){let c=this._content;if(c)for(;c.hasChildNodes();)c.firstChild&&c.removeChild(c.firstChild);else c=this._content=N("div","mapboxgl-popup-content",this._container||void 0);if(c.appendChild(g),this.options.closeButton){const h=this._closeButton=N("button","mapboxgl-popup-close-button",c);h.type="button",h.setAttribute("aria-label","Close popup"),h.setAttribute("aria-hidden","true"),h.innerHTML="&#215;",h.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(g){return this._classList.add(g),this._updateClassList(),this}removeClassName(g){return this._classList.delete(g),this._updateClassList(),this}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){let c;return this._classList.delete(g)?c=!1:(this._classList.add(g),c=!0),this._updateClassList(),c}_onMouseEvent(g){this._update(g.point)}_getAnchor(g){if(this.options.anchor)return this.options.anchor;const c=this._map,h=this._container,b=this._pos;if(!c||!h||!b)return"bottom";const _=h.offsetWidth,w=h.offsetHeight,k=b.x<_/2,D=b.x>c.transform.width-_/2;if(b.y+g<w)return k?"top-left":D?"top-right":"top";if(b.y>c.transform.height-w){if(k)return"bottom-left";if(D)return"bottom-right"}return k?"left":D?"right":"bottom"}_updateClassList(){const g=this._container;if(!g)return;const c=[...this._classList];c.push("mapboxgl-popup"),this._anchor&&c.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&c.push("mapboxgl-popup-track-pointer"),g.className=c.join(" ")}_update(g){const c=this._map,h=this._content;if(!c||!this._lngLat&&!this._trackPointer||!h)return;let b=this._container;if(b||(b=this._container=N("div","mapboxgl-popup",c.getContainer()),this._tip=N("div","mapboxgl-popup-tip",b),b.appendChild(h)),this.options.maxWidth&&b.style.maxWidth!==this.options.maxWidth&&(b.style.maxWidth=this.options.maxWidth),c.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=mh(this._lngLat,this._pos,c.transform)),!this._trackPointer||g){const _=this._pos=this._trackPointer&&g?g:c.project(this._lngLat),w=dy(this.options.offset),k=this._anchor=this._getAnchor(w.y),D=dy(this.options.offset,k),L=_.add(D).round();c._requestDomTask(()=>{this._container&&k&&(this._container.style.transform=`${Yf[k]} translate(${L.x}px,${L.y}px)`)})}if(!this._marker&&c._showingGlobe()){const _=a.d6(c.transform,this._lngLat)?0:1;this._setOpacity(_)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(Tg);g&&g.focus()}_onClose(){this.remove()}_setOpacity(g){this._container&&(this._container.style.opacity=`${g}`),this._content&&(this._content.style.pointerEvents=g?"auto":"none")}},Marker:Eg,Style:ps,LngLat:a.bn,LngLatBounds:a.ad,Point:a.P,MercatorCoordinate:a.L,FreeCameraOptions:Hd,Evented:a.E,config:a.d5,prewarm:a.dp,clearPrewarmedResources:a.dq,get accessToken(){return a.d5.ACCESS_TOKEN},set accessToken(g){a.d5.ACCESS_TOKEN=g},get baseApiUrl(){return a.d5.API_URL},set baseApiUrl(g){a.d5.API_URL=g},get workerCount(){return a.dr.workerCount},set workerCount(g){a.dr.workerCount=g},get maxParallelImageRequests(){return a.d5.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(g){a.d5.MAX_PARALLEL_IMAGE_REQUESTS=g},clearStorage(g){a.ds(g)},get workerUrl(){return a.dt.workerUrl},set workerUrl(g){a.dt.workerUrl=g},get workerClass(){return a.dt.workerClass},set workerClass(g){a.dt.workerClass=g},get workerParams(){return a.dt.workerParams},set workerParams(g){a.dt.workerParams=g},get dracoUrl(){return a.du()},set dracoUrl(g){a.dv(g)},get meshoptUrl(){return a.dw()},set meshoptUrl(g){a.dx(g)},setNow:a.f.setNow,restoreNow:a.f.restoreNow}});var y=d;return y})})(JH);var iye=JH.exports;const Al=w0(iye);var Ev=sye,aye=Object.prototype.hasOwnProperty;function sye(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)aye.call(n,r)&&(e[r]=n[r])}return e}var tW={exports:{}};(function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(r,l){return l.filter(function(d){return n.test(r,d)})},n.test=function(r,l){return n.match(r,l)!==null},n.match=function(r,l,d){d=d||{};var f=0,y=[],a=l.length,E=0,C=0,M=d.pre||"",P=d.post||"",N=d.caseSensitive&&l||l.toLowerCase(),F;r=d.caseSensitive&&r||r.toLowerCase();for(var $=0;$<a;$++)F=l[$],N[$]===r[f]?(F=M+F+P,f+=1,C+=1+C):C=0,E+=C,y[y.length]=F;return f===r.length?(E=N===r?1/0:E,{rendered:y.join(""),score:E}):null},n.filter=function(r,l,d){return!l||l.length===0?[]:typeof r!="string"?l:(d=d||{},l.reduce(function(f,y,a,E){var C=y;d.extract&&(C=d.extract(y));var M=n.match(r,C,d);return M!=null&&(f[f.length]={string:M.rendered,score:M.score,index:a,original:y}),f},[]).sort(function(f,y){var a=y.score-f.score;return a||f.index-y.index}))}})()})(tW);var lye=tW.exports,Js=function(e){return this.component=e,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};Js.prototype.show=function(){this.element.style.display="block"};Js.prototype.hide=function(){this.element.style.display="none"};Js.prototype.add=function(e){this.items.push(e)};Js.prototype.clear=function(){this.items=[],this.active=0};Js.prototype.isEmpty=function(){return!this.items.length};Js.prototype.isVisible=function(){return this.element.style.display==="block"};Js.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()};Js.prototype.drawItem=function(e,t){var n=document.createElement("li"),r=document.createElement("a");t&&(n.className+=" active"),r.innerHTML=e.string,n.appendChild(r),this.element.appendChild(n),n.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),n.addEventListener("mouseup",function(){this.handleMouseUp.call(this,e)}.bind(this))};Js.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()};Js.prototype.move=function(e){this.active=e,this.draw()};Js.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};Js.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};Js.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()};var cye=Js,uye=Ev,dye=lye,hye=cye,us=function(e,t,n){return n=n||{},this.options=uye({minLength:2,limit:5,filter:!0,hideOnBlur:!0},n),this.el=e,this.data=t||[],this.list=new hye(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(r){this.handleKeyUp(r.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(r){this.handleKeyDown(r)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(r){this.handlePaste(r)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};us.prototype.handleKeyUp=function(e){e===40||e===38||e===27||e===13||e===9||this.handleInputChange(this.el.value)};us.prototype.handleKeyDown=function(e){switch(e.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&e.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};us.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};us.prototype.handlePaste=function(e){if(e.clipboardData)this.handleInputChange(e.clipboardData.getData("Text"));else{var t=this;setTimeout(function(){t.handleInputChange(e.target.value)},100)}};us.prototype.handleInputChange=function(e){if(this.query=this.normalize(e),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates(function(t){for(var n=0;n<t.length&&(this.list.add(t[n]),n!==this.options.limit-1);n++);this.list.draw()}.bind(this))};us.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};us.prototype.update=function(e){this.data=e,this.handleKeyUp()};us.prototype.clear=function(){this.data=[],this.list.clear()};us.prototype.normalize=function(e){return e=e.toLowerCase(),e};us.prototype.match=function(e,t){return e.indexOf(t)>-1};us.prototype.value=function(e){if(this.selected=e,this.el.value=this.getItemValue(e),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.el.dispatchEvent(t)}else this.el.fireEvent("onchange")};us.prototype.getCandidates=function(e){var t={pre:"<strong>",post:"</strong>",extract:function(r){return this.getItemValue(r)}.bind(this)},n;this.options.filter?(n=dye.filter(this.query,this.data,t),n=n.map(function(r){return{original:r.original,string:this.render(r.original,r.string)}}.bind(this))):n=this.data.map(function(r){var l=this.render(r);return{original:r,string:l}}.bind(this)),e(n)};us.prototype.getItemValue=function(e){return e};us.prototype.render=function(e,t){if(t)return t;for(var n=e.original?this.getItemValue(e.original):this.getItemValue(e),r=this.normalize(n),l=r.lastIndexOf(this.query);l>-1;){var d=l+this.query.length;n=n.slice(0,l)+"<strong>"+n.slice(l,d)+"</strong>"+n.slice(d),l=r.slice(0,l).lastIndexOf(this.query)}return n};us.prototype.renderError=function(e){this.list.drawError(e)};var fye=us,nW=fye,pye=nW;typeof window<"u"&&(window.Suggestions=nW);var mye="Expected a function",k8=NaN,gye="[object Symbol]",yye=/^\s+|\s+$/g,bye=/^[-+]0x[0-9a-f]+$/i,vye=/^0b[01]+$/i,_ye=/^0o[0-7]+$/i,xye=parseInt,wye=typeof pc=="object"&&pc&&pc.Object===Object&&pc,Eye=typeof self=="object"&&self&&self.Object===Object&&self,Tye=wye||Eye||Function("return this")(),Sye=Object.prototype,Cye=Sye.toString,kye=Math.max,Aye=Math.min,Y3=function(){return Tye.Date.now()};function Mye(e,t,n){var r,l,d,f,y,a,E=0,C=!1,M=!1,P=!0;if(typeof e!="function")throw new TypeError(mye);t=A8(t)||0,i5(n)&&(C=!!n.leading,M="maxWait"in n,d=M?kye(A8(n.maxWait)||0,t):d,P="trailing"in n?!!n.trailing:P);function N(ue){var re=r,me=l;return r=l=void 0,E=ue,f=e.apply(me,re),f}function F(ue){return E=ue,y=setTimeout(q,t),C?N(ue):f}function $(ue){var re=ue-a,me=ue-E,ve=t-re;return M?Aye(ve,d-me):ve}function Z(ue){var re=ue-a,me=ue-E;return a===void 0||re>=t||re<0||M&&me>=d}function q(){var ue=Y3();if(Z(ue))return K(ue);y=setTimeout(q,$(ue))}function K(ue){return y=void 0,P&&r?N(ue):(r=l=void 0,f)}function Q(){y!==void 0&&clearTimeout(y),E=0,r=a=l=y=void 0}function te(){return y===void 0?f:K(Y3())}function ie(){var ue=Y3(),re=Z(ue);if(r=arguments,l=this,a=ue,re){if(y===void 0)return F(a);if(M)return y=setTimeout(q,t),N(a)}return y===void 0&&(y=setTimeout(q,t)),f}return ie.cancel=Q,ie.flush=te,ie}function i5(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Dye(e){return!!e&&typeof e=="object"}function Rye(e){return typeof e=="symbol"||Dye(e)&&Cye.call(e)==gye}function A8(e){if(typeof e=="number")return e;if(Rye(e))return k8;if(i5(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=i5(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(yye,"");var n=vye.test(e);return n||_ye.test(e)?xye(e.slice(2),n?2:8):bye.test(e)?k8:+e}var Iye=Mye,JI={exports:{}},xb=typeof Reflect=="object"?Reflect:null,M8=xb&&typeof xb.apply=="function"?xb.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},mT;xb&&typeof xb.ownKeys=="function"?mT=xb.ownKeys:Object.getOwnPropertySymbols?mT=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:mT=function(t){return Object.getOwnPropertyNames(t)};function Pye(e){console&&console.warn&&console.warn(e)}var rW=Number.isNaN||function(t){return t!==t};function Go(){Go.init.call(this)}JI.exports=Go;JI.exports.once=zye;Go.EventEmitter=Go;Go.prototype._events=void 0;Go.prototype._eventsCount=0;Go.prototype._maxListeners=void 0;var D8=10;function bk(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Go,"defaultMaxListeners",{enumerable:!0,get:function(){return D8},set:function(e){if(typeof e!="number"||e<0||rW(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");D8=e}});Go.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Go.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||rW(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function oW(e){return e._maxListeners===void 0?Go.defaultMaxListeners:e._maxListeners}Go.prototype.getMaxListeners=function(){return oW(this)};Go.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var l=t==="error",d=this._events;if(d!==void 0)l=l&&d.error===void 0;else if(!l)return!1;if(l){var f;if(n.length>0&&(f=n[0]),f instanceof Error)throw f;var y=new Error("Unhandled error."+(f?" ("+f.message+")":""));throw y.context=f,y}var a=d[t];if(a===void 0)return!1;if(typeof a=="function")M8(a,this,n);else for(var E=a.length,C=cW(a,E),r=0;r<E;++r)M8(C[r],this,n);return!0};function iW(e,t,n,r){var l,d,f;if(bk(n),d=e._events,d===void 0?(d=e._events=Object.create(null),e._eventsCount=0):(d.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),d=e._events),f=d[t]),f===void 0)f=d[t]=n,++e._eventsCount;else if(typeof f=="function"?f=d[t]=r?[n,f]:[f,n]:r?f.unshift(n):f.push(n),l=oW(e),l>0&&f.length>l&&!f.warned){f.warned=!0;var y=new Error("Possible EventEmitter memory leak detected. "+f.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");y.name="MaxListenersExceededWarning",y.emitter=e,y.type=t,y.count=f.length,Pye(y)}return e}Go.prototype.addListener=function(t,n){return iW(this,t,n,!1)};Go.prototype.on=Go.prototype.addListener;Go.prototype.prependListener=function(t,n){return iW(this,t,n,!0)};function Oye(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function aW(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},l=Oye.bind(r);return l.listener=n,r.wrapFn=l,l}Go.prototype.once=function(t,n){return bk(n),this.on(t,aW(this,t,n)),this};Go.prototype.prependOnceListener=function(t,n){return bk(n),this.prependListener(t,aW(this,t,n)),this};Go.prototype.removeListener=function(t,n){var r,l,d,f,y;if(bk(n),l=this._events,l===void 0)return this;if(r=l[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete l[t],l.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(d=-1,f=r.length-1;f>=0;f--)if(r[f]===n||r[f].listener===n){y=r[f].listener,d=f;break}if(d<0)return this;d===0?r.shift():Lye(r,d),r.length===1&&(l[t]=r[0]),l.removeListener!==void 0&&this.emit("removeListener",t,y||n)}return this};Go.prototype.off=Go.prototype.removeListener;Go.prototype.removeAllListeners=function(t){var n,r,l;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var d=Object.keys(r),f;for(l=0;l<d.length;++l)f=d[l],f!=="removeListener"&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(l=n.length-1;l>=0;l--)this.removeListener(t,n[l]);return this};function sW(e,t,n){var r=e._events;if(r===void 0)return[];var l=r[t];return l===void 0?[]:typeof l=="function"?n?[l.listener||l]:[l]:n?Nye(l):cW(l,l.length)}Go.prototype.listeners=function(t){return sW(this,t,!0)};Go.prototype.rawListeners=function(t){return sW(this,t,!1)};Go.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):lW.call(e,t)};Go.prototype.listenerCount=lW;function lW(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Go.prototype.eventNames=function(){return this._eventsCount>0?mT(this._events):[]};function cW(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function Lye(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Nye(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function zye(e,t){return new Promise(function(n,r){function l(f){e.removeListener(t,d),r(f)}function d(){typeof e.removeListener=="function"&&e.removeListener("error",l),n([].slice.call(arguments))}uW(e,t,d,{once:!0}),t!=="error"&&Bye(e,l,{once:!0})})}function Bye(e,t,n){typeof e.on=="function"&&uW(e,"error",t,n)}function uW(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function l(d){r.once&&e.removeEventListener(t,l),n(d)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Fye=JI.exports,jye={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function $ye(e){var t=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return t?{key:t[1],value:t[2]}:null}function Uye(e){var t=e.match(/<?([^>]*)>(.*)/);if(!t)return null;var n=t[1],r=t[2].split(";"),l=null,d=r.reduce(function(f,y){var a=$ye(y);return a?a.key==="rel"?(l||(l=a.value),f):(f[a.key]=a.value,f):f},{});return l?{url:n,rel:l,params:d}:null}function Vye(e){return e?e.split(/,\s*</).reduce(function(t,n){var r=Uye(n);if(!r)return t;var l=r.rel.split(/\s+/);return l.forEach(function(d){t[d]||(t[d]={url:r.url,params:r.params})}),t},{}):{}}var Hye=Vye,Wye=Hye;function e4(e,t){this.request=e,this.headers=t.headers,this.rawBody=t.body,this.statusCode=t.statusCode;try{this.body=JSON.parse(t.body||"{}")}catch{this.body=t.body}this.links=Wye(this.headers.link)}e4.prototype.hasNextPage=function(){return!!this.links.next};e4.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var Yye=e4,vk={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},R8=vk;function Gye(e){var t=e.type||R8.ERROR_HTTP,n;if(e.body)try{n=JSON.parse(e.body)}catch{n=e.body}else n=null;var r=e.message||null;r||(typeof n=="string"?r=n:n&&typeof n.message=="string"?r=n.message:t===R8.ERROR_REQUEST_ABORTED&&(r="Request aborted")),this.message=r,this.type=t,this.statusCode=e.statusCode||null,this.request=e.request,this.body=n}var qye=Gye;function Zye(e){var t=e.indexOf(":"),n=e.substring(0,t).trim().toLowerCase(),r=e.substring(t+1).trim();return{name:n,value:r}}function Kye(e){var t={};return e&&e.trim().split(/[\r|\n]+/).forEach(function(n){var r=Zye(n);t[r.name]=r.value}),t}var Xye=Kye,Qye=Yye,I8=qye,G3=vk,Jye=Xye,fS={};function ebe(e){var t=fS[e.id];t&&(t.abort(),delete fS[e.id])}function tbe(e,t){return new Qye(e,{body:t.response,headers:Jye(t.getAllResponseHeaders()),statusCode:t.status})}function P8(e){var t=e.total,n=e.loaded,r=100*n/t;return{total:t,transferred:n,percent:r}}function dW(e,t){return new Promise(function(n,r){t.onprogress=function(f){e.emitter.emit(G3.EVENT_PROGRESS_DOWNLOAD,P8(f))};var l=e.file;l&&(t.upload.onprogress=function(f){e.emitter.emit(G3.EVENT_PROGRESS_UPLOAD,P8(f))}),t.onerror=function(f){r(f)},t.onabort=function(){var f=new I8({request:e,type:G3.ERROR_REQUEST_ABORTED});r(f)},t.onload=function(){if(delete fS[e.id],t.status<200||t.status>=400){var f=new I8({request:e,body:t.response,statusCode:t.status});r(f);return}n(t)};var d=e.body;typeof d=="string"?t.send(d):d?t.send(JSON.stringify(d)):l?t.send(l):t.send(),fS[e.id]=t}).then(function(n){return tbe(e,n)})}function hW(e,t){var n=e.url(t),r=new window.XMLHttpRequest;return r.open(e.method,n),Object.keys(e.headers).forEach(function(l){r.setRequestHeader(l,e.headers[l])}),r}function nbe(e){return Promise.resolve().then(function(){var t=hW(e,e.client.accessToken);return dW(e,t)})}var rbe={browserAbort:ebe,sendRequestXhr:dW,browserSend:nbe,createRequestXhr:hW},pS={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */pS.exports;(function(e,t){(function(n){var r=t,l=e&&e.exports==r&&e,d=typeof pc=="object"&&pc;(d.global===d||d.window===d)&&(n=d);var f=function(F){this.message=F};f.prototype=new Error,f.prototype.name="InvalidCharacterError";var y=function(F){throw new f(F)},a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=/[\t\n\f\r ]/g,C=function(F){F=String(F).replace(E,"");var $=F.length;$%4==0&&(F=F.replace(/==?$/,""),$=F.length),($%4==1||/[^+a-zA-Z0-9/]/.test(F))&&y("Invalid character: the string to be decoded is not correctly encoded.");for(var Z=0,q,K,Q="",te=-1;++te<$;)K=a.indexOf(F.charAt(te)),q=Z%4?q*64+K:K,Z++%4&&(Q+=String.fromCharCode(255&q>>(-2*Z&6)));return Q},M=function(F){F=String(F),/[^\0-\xFF]/.test(F)&&y("The string to be encoded contains characters outside of the Latin1 range.");for(var $=F.length%3,Z="",q=-1,K,Q,te,ie,ue=F.length-$;++q<ue;)K=F.charCodeAt(q)<<16,Q=F.charCodeAt(++q)<<8,te=F.charCodeAt(++q),ie=K+Q+te,Z+=a.charAt(ie>>18&63)+a.charAt(ie>>12&63)+a.charAt(ie>>6&63)+a.charAt(ie&63);return $==2?(K=F.charCodeAt(q)<<8,Q=F.charCodeAt(++q),ie=K+Q,Z+=a.charAt(ie>>10)+a.charAt(ie>>4&63)+a.charAt(ie<<2&63)+"="):$==1&&(ie=F.charCodeAt(q),Z+=a.charAt(ie>>2)+a.charAt(ie<<4&63)+"=="),Z},P={encode:M,decode:C,version:"0.1.0"};if(r&&!r.nodeType)if(l)l.exports=P;else for(var N in P)P.hasOwnProperty(N)&&(r[N]=P[N]);else n.base64=P})(pc)})(pS,pS.exports);var obe=pS.exports,ibe=obe,q3={};function abe(e){if(q3[e])return q3[e];var t=e.split("."),n=t[0],r=t[1];if(!r)throw new Error("Invalid token");var l=sbe(r),d={usage:n,user:l.u};return Lg(l,"a")&&(d.authorization=l.a),Lg(l,"exp")&&(d.expires=l.exp*1e3),Lg(l,"iat")&&(d.created=l.iat*1e3),Lg(l,"scopes")&&(d.scopes=l.scopes),Lg(l,"client")&&(d.client=l.client),Lg(l,"ll")&&(d.lastLogin=l.ll),Lg(l,"iu")&&(d.impersonator=l.iu),q3[e]=d,d}function sbe(e){try{return JSON.parse(ibe.decode(e))}catch{throw new Error("Invalid token")}}function Lg(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var fW=abe,pW={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function l(a,E,C){this.fn=a,this.context=E,this.once=C||!1}function d(a,E,C,M,P){if(typeof C!="function")throw new TypeError("The listener must be a function");var N=new l(C,M||a,P),F=n?n+E:E;return a._events[F]?a._events[F].fn?a._events[F]=[a._events[F],N]:a._events[F].push(N):(a._events[F]=N,a._eventsCount++),a}function f(a,E){--a._eventsCount===0?a._events=new r:delete a._events[E]}function y(){this._events=new r,this._eventsCount=0}y.prototype.eventNames=function(){var E=[],C,M;if(this._eventsCount===0)return E;for(M in C=this._events)t.call(C,M)&&E.push(n?M.slice(1):M);return Object.getOwnPropertySymbols?E.concat(Object.getOwnPropertySymbols(C)):E},y.prototype.listeners=function(E){var C=n?n+E:E,M=this._events[C];if(!M)return[];if(M.fn)return[M.fn];for(var P=0,N=M.length,F=new Array(N);P<N;P++)F[P]=M[P].fn;return F},y.prototype.listenerCount=function(E){var C=n?n+E:E,M=this._events[C];return M?M.fn?1:M.length:0},y.prototype.emit=function(E,C,M,P,N,F){var $=n?n+E:E;if(!this._events[$])return!1;var Z=this._events[$],q=arguments.length,K,Q;if(Z.fn){switch(Z.once&&this.removeListener(E,Z.fn,void 0,!0),q){case 1:return Z.fn.call(Z.context),!0;case 2:return Z.fn.call(Z.context,C),!0;case 3:return Z.fn.call(Z.context,C,M),!0;case 4:return Z.fn.call(Z.context,C,M,P),!0;case 5:return Z.fn.call(Z.context,C,M,P,N),!0;case 6:return Z.fn.call(Z.context,C,M,P,N,F),!0}for(Q=1,K=new Array(q-1);Q<q;Q++)K[Q-1]=arguments[Q];Z.fn.apply(Z.context,K)}else{var te=Z.length,ie;for(Q=0;Q<te;Q++)switch(Z[Q].once&&this.removeListener(E,Z[Q].fn,void 0,!0),q){case 1:Z[Q].fn.call(Z[Q].context);break;case 2:Z[Q].fn.call(Z[Q].context,C);break;case 3:Z[Q].fn.call(Z[Q].context,C,M);break;case 4:Z[Q].fn.call(Z[Q].context,C,M,P);break;default:if(!K)for(ie=1,K=new Array(q-1);ie<q;ie++)K[ie-1]=arguments[ie];Z[Q].fn.apply(Z[Q].context,K)}}return!0},y.prototype.on=function(E,C,M){return d(this,E,C,M,!1)},y.prototype.once=function(E,C,M){return d(this,E,C,M,!0)},y.prototype.removeListener=function(E,C,M,P){var N=n?n+E:E;if(!this._events[N])return this;if(!C)return f(this,N),this;var F=this._events[N];if(F.fn)F.fn===C&&(!P||F.once)&&(!M||F.context===M)&&f(this,N);else{for(var $=0,Z=[],q=F.length;$<q;$++)(F[$].fn!==C||P&&!F[$].once||M&&F[$].context!==M)&&Z.push(F[$]);Z.length?this._events[N]=Z.length===1?Z[0]:Z:f(this,N)}return this},y.prototype.removeAllListeners=function(E){var C;return E?(C=n?n+E:E,this._events[C]&&f(this,C)):(this._events=new r,this._eventsCount=0),this},y.prototype.off=y.prototype.removeListener,y.prototype.addListener=y.prototype.on,y.prefixed=n,y.EventEmitter=y,e.exports=y})(pW);var lbe=pW.exports;function cbe(e){return e.map(encodeURIComponent).join(",")}function mW(e){return Array.isArray(e)?cbe(e):encodeURIComponent(String(e))}function gW(e,t,n){if(n===!1||n===null)return e;var r=/\?/.test(e)?"&":"?",l=encodeURIComponent(t);return n!==void 0&&n!==""&&n!==!0&&(l+="="+mW(n)),""+e+r+l}function ube(e,t){if(!t)return e;var n=e;return Object.keys(t).forEach(function(r){var l=t[r];l!==void 0&&(Array.isArray(l)&&(l=l.filter(function(d){return d!=null}).join(",")),n=gW(n,r,l))}),n}function dbe(e,t){if(!t||e.slice(0,4)==="http")return e;var n=e[0]==="/"?"":"/";return""+t.replace(/\/$/,"")+n+e}function hbe(e,t){return t?e.replace(/\/:([a-zA-Z0-9]+)/g,function(n,r){var l=t[r];if(l===void 0)throw new Error("Unspecified route parameter "+r);var d=mW(l);return"/"+d}):e}var fbe={appendQueryObject:ube,appendQueryParam:gW,prependOrigin:dbe,interpolateRouteParams:hbe},pbe=fW,t4=Ev,mbe=lbe,_E=fbe,O8=vk,gbe=1;function Xp(e,t){if(!e)throw new Error("MapiRequest requires a client");if(!t||!t.path||!t.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};t.body&&(n["content-type"]="application/json");var r=t4(n,t.headers),l=Object.keys(r).reduce(function(d,f){return d[f.toLowerCase()]=r[f],d},{});this.id=gbe++,this._options=t,this.emitter=new mbe,this.client=e,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=t.path,this.method=t.method,this.origin=t.origin||e.origin,this.query=t.query||{},this.params=t.params||{},this.body=t.body||null,this.file=t.file||null,this.encoding=t.encoding||"utf8",this.sendFileAs=t.sendFileAs||null,this.headers=l}Xp.prototype.url=function(t){var n=_E.prependOrigin(this.path,this.origin);n=_E.appendQueryObject(n,this.query);var r=this.params,l=t??this.client.accessToken;if(l){n=_E.appendQueryParam(n,"access_token",l);var d=pbe(l).user;r=t4({ownerId:d},r)}return n=_E.interpolateRouteParams(n,r),n};Xp.prototype.send=function(){var t=this;if(t.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return t.sent=!0,t.client.sendRequest(t).then(function(n){return t.response=n,t.emitter.emit(O8.EVENT_RESPONSE,n),n},function(n){throw t.error=n,t.emitter.emit(O8.EVENT_ERROR,n),n})};Xp.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};Xp.prototype.eachPage=function(t){var n=this;function r(f){function y(){delete n._nextPageRequest;var a=f.nextPage();a&&(n._nextPageRequest=a,d(a))}t(null,f,y)}function l(f){t(f,null,function(){})}function d(f){f.send().then(r,l)}d(this)};Xp.prototype.clone=function(){return this._extend()};Xp.prototype._extend=function(t){var n=t4(this._options,t);return new Xp(this.client,n)};var ybe=Xp,bbe=fW,vbe=ybe,_be=vk;function yW(e){if(!e||!e.accessToken)throw new Error("Cannot create a client without an access token");bbe(e.accessToken),this.accessToken=e.accessToken,this.origin=e.origin||_be.API_ORIGIN}yW.prototype.createRequest=function(t){return new vbe(this,t)};var bW=yW,vW=rbe,_W=bW;function Jb(e){_W.call(this,e)}Jb.prototype=Object.create(_W.prototype);Jb.prototype.constructor=Jb;Jb.prototype.sendRequest=vW.browserSend;Jb.prototype.abortRequest=vW.browserAbort;function xbe(e){return new Jb(e)}var xW=xbe,wbe=xW,Ebe=wbe,Tbe=Object.prototype.toString,Sbe=function(e){var t;return Tbe.call(e)==="[object Object]"&&(t=Object.getPrototypeOf(e),t===null||t===Object.getPrototypeOf({}))},Cbe=Sbe,kbe=Ev,wW="value",Z3=`
  `,ei={};ei.assert=function(e,t){return t=t||{},function(n){var r=Qp(e,n);if(r){var l=n4(r,t);throw t.apiName&&(l=t.apiName+": "+l),new Error(l)}}};ei.shape=function(t){var n=Rbe(t);return function(l){var d=Qp(ei.plainObject,l);if(d)return d;for(var f,y,a=[],E=0;E<n.length;E++)f=n[E].key,y=n[E].value,d=Qp(y,l[f]),d&&a.push([f].concat(d));return a.length<2?a[0]:function(C){a=a.map(function(N){var F=N[0],$=n4(N,C).split(`
`).join(Z3);return"- "+F+": "+$});var M=C.path.join("."),P=M===wW?"":" of "+M;return"The following properties"+P+" have invalid values:"+Z3+a.join(Z3)}}};ei.strictShape=function(t){var n=ei.shape(t);return function(l){var d=n(l);if(d)return d;var f=Object.keys(l).reduce(function(y,a){return t[a]===void 0&&y.push(a),y},[]);if(f.length!==0)return function(){return"The following keys are invalid: "+f.join(", ")}}};ei.arrayOf=function(t){return EW(t)};ei.tuple=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return EW(t)};function EW(e){var t=Array.isArray(e),n=function(r){return t?e[r]:e};return function(l){var d=Qp(ei.plainArray,l);if(d)return d;if(t&&l.length!==e.length)return"an array with "+e.length+" items";for(var f=0;f<l.length;f++)if(d=Qp(n(f),l[f]),d)return[f].concat(d)}}ei.required=function(t){function n(r){return r==null?function(l){return TW(l,SW(l.path)?"cannot be undefined/null.":"is required.")}:t.apply(this,arguments)}return n.__required=!0,n};ei.oneOfType=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(r){var l=t.map(function(d){return Qp(d,r)}).filter(Boolean);if(l.length===t.length)return l.every(function(d){return d.length===1&&typeof d[0]=="string"})?Abe(l.map(function(d){return d[0]})):l.reduce(function(d,f){return f.length>d.length?f:d})}};ei.equal=function(t){return function(r){if(r!==t)return JSON.stringify(t)}};ei.oneOf=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),n=t.map(function(r){return ei.equal(r)});return ei.oneOfType.apply(this,n)};ei.range=function(t){var n=t[0],r=t[1];return function(d){var f=Qp(ei.number,d);if(f||d<n||d>r)return"number between "+n+" & "+r+" (inclusive)"}};ei.any=function(){};ei.boolean=function(t){if(typeof t!="boolean")return"boolean"};ei.number=function(t){if(typeof t!="number")return"number"};ei.plainArray=function(t){if(!Array.isArray(t))return"array"};ei.plainObject=function(t){if(!Cbe(t))return"object"};ei.string=function(t){if(typeof t!="string")return"string"};ei.func=function(t){if(typeof t!="function")return"function"};function Qp(e,t){if(!(t==null&&!e.hasOwnProperty("__required"))){var n=e(t);if(n)return Array.isArray(n)?n:[n]}}function n4(e,t){var n=e.length,r=e[n-1],l=e.slice(0,n-1);return l.length===0&&(l=[wW]),t=kbe(t,{path:l}),typeof r=="function"?r(t):TW(t,Mbe(r))}function Abe(e){return e.length<2?e[0]:e.length===2?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e.slice(-1)}function Mbe(e){return"must be "+Dbe(e)+"."}function Dbe(e){return/^an? /.test(e)?e:/^[aeiou]/i.test(e)?"an "+e:/^[a-z]/i.test(e)?"a "+e:e}function TW(e,t){var n=SW(e.path),r=e.path.join(".")+" "+t,l=n?"Item at position ":"";return l+r}function SW(e){return typeof e[e.length-1]=="number"||typeof e[0]=="number"}function Rbe(e){return Object.keys(e||{}).map(function(t){return{key:t,value:e[t]}})}ei.validate=Qp;ei.processMessage=n4;var Ibe=ei,Pbe=Ev,wb=Ibe;function Obe(e){if(typeof window<"u")return e instanceof pc.Blob||e instanceof pc.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof e=="string"||e.pipe!==void 0))return"Filename or Readable stream"}function Lbe(e,t){return wb.assert(wb.strictShape(e),t)}function Nbe(e){var t="date";if(typeof e=="boolean")return t;try{var n=new Date(e);if(n.getTime&&isNaN(n.getTime()))return t}catch{return t}}function zbe(e){return wb.tuple(wb.number,wb.number)(e)}var Bbe=Pbe(wb,{file:Obe,date:Nbe,coordinates:zbe,assertShape:Lbe});function Fbe(e,t){var n=function(r,l){return t.indexOf(r)!==-1&&l!==void 0};return typeof t=="function"&&(n=t),Object.keys(e).filter(function(r){return n(r,e[r])}).reduce(function(r,l){return r[l]=e[l],r},{})}var jbe=Fbe;function $be(e,t){return Object.keys(e).reduce(function(n,r){return n[r]=t(r,e[r]),n},{})}var Ube=$be,Vbe=Ube;function Hbe(e){return Vbe(e,function(t,n){return typeof n=="boolean"?JSON.stringify(n):n})}var Wbe=Hbe,Ybe=bW,Gbe=xW;function qbe(e){return function(t){var n;Ybe.prototype.isPrototypeOf(t)?n=t:n=Gbe(t);var r=Object.create(e);return r.client=n,r}}var Zbe=qbe,CW=Ev,po=Bbe,mS=jbe,kW=Wbe,Kbe=Zbe,r4={},AW=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];r4.forwardGeocode=function(e){po.assertShape({query:po.required(po.string),mode:po.oneOf("mapbox.places","mapbox.places-permanent"),countries:po.arrayOf(po.string),proximity:po.oneOf(po.coordinates,"ip"),types:po.arrayOf(po.oneOf(AW)),autocomplete:po.boolean,bbox:po.arrayOf(po.number),limit:po.number,language:po.arrayOf(po.string),routing:po.boolean,fuzzyMatch:po.boolean,worldview:po.string})(e),e.mode=e.mode||"mapbox.places";var t=kW(CW({country:e.countries},mS(e,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:mS(e,["mode","query"]),query:t})};r4.reverseGeocode=function(e){po.assertShape({query:po.required(po.coordinates),mode:po.oneOf("mapbox.places","mapbox.places-permanent"),countries:po.arrayOf(po.string),types:po.arrayOf(po.oneOf(AW)),bbox:po.arrayOf(po.number),limit:po.number,language:po.arrayOf(po.string),reverseMode:po.oneOf("distance","score"),routing:po.boolean,worldview:po.string})(e),e.mode=e.mode||"mapbox.places";var t=kW(CW({country:e.countries},mS(e,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:mS(e,["mode","query"]),query:t})};var Xbe=Kbe(r4);let Qbe="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",MW=e=>crypto.getRandomValues(new Uint8Array(e)),DW=(e,t,n)=>{let r=(2<<Math.log(e.length-1)/Math.LN2)-1,l=-~(1.6*r*t/e.length);return(d=t)=>{let f="";for(;;){let y=n(l),a=l;for(;a--;)if(f+=e[y[a]&r]||"",f.length===d)return f}}},Jbe=(e,t=21)=>DW(e,t,MW),eve=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const tve=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:Jbe,customRandom:DW,nanoid:eve,random:MW,urlAlphabet:Qbe},Symbol.toStringTag,{value:"Module"})),nve=Dd(tve);var rve=nve.nanoid;function RW(e){this.origin=e.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=e.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=e,this.send=this.send.bind(this),this.countries=e.countries?e.countries.split(","):null,this.types=e.types?e.types.split(","):null,this.bbox=e.bbox?e.bbox:null,this.language=e.language?e.language.split(","):null,this.limit=e.limit?+e.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(e),this.eventQueue=new Array,this.flushInterval=e.flushInterval||1e3,this.maxQueueSize=e.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}RW.prototype={select:function(e,t){var n=this.getSelectedIndex(e,t),r=this.getEventPayload("search.select",t);if(r.resultIndex=n,r.resultPlaceName=e.place_name,r.resultId=e.id,!(n===this.lastSentIndex&&r.queryString===this.lastSentInput||n==-1)&&(this.lastSentIndex=n,this.lastSentInput=r.queryString,!!r.queryString))return this.push(r)},start:function(e){var t=this.getEventPayload("search.start",e);if(t.queryString)return this.push(t)},keyevent:function(e,t){if(e.key&&!(e.metaKey||[9,27,37,39,13,38,40].indexOf(e.keyCode)!==-1)){var n=this.getEventPayload("search.keystroke",t);if(n.lastAction=e.key,!!n.queryString)return this.push(n)}},send:function(e,t){if(!this.enableEventLogging)return t?t():void 0;var n=this.getRequestOptions(e);this.request(n,function(r){if(r)return this.handleError(r,t);if(t)return t()}.bind(this))},getRequestOptions:function(e){Array.isArray(e)||(e=[e]);var t={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return t},getEventPayload:function(e,t){var n;t.options.proximity?typeof t.options.proximity=="object"?n=[t.options.proximity.longitude,t.options.proximity.latitude]:t.options.proximity==="ip"?n=[999,999]:n=t.options.proximity:n=null;var r=t._map?t._map.getZoom():void 0,l={event:e,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:t.options.autocomplete,fuzzyMatch:t.options.fuzzyMatch,proximity:n,limit:t.options.limit,routing:t.options.routing,worldview:t.options.worldview,mapZoom:r,keyboardLocale:this.locale};return e==="search.select"?l.queryString=t.inputString:e!="search.select"&&t._inputEl?l.queryString=t._inputEl.value:l.queryString=t.inputString,l},request:function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(this.readyState==4)return this.status==204?t(null):t(this.statusText)},n.open(e.method,e.host+"/"+e.path,!0);for(var r in e.headers){var l=e.headers[r];n.setRequestHeader(r,l)}n.send(e.body)},handleError:function(e,t){if(t)return t(e)},generateSessionID:function(){return rve()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(e,t){if(t._typeahead){var n=t._typeahead.data,r=e.id,l=n.map(function(f){return f.id}),d=l.indexOf(r);return d}},shouldEnableLogging:function(e){return!(e.enableEventLogging===!1||e.origin&&e.origin!=="https://api.mapbox.com"||e.localGeocoder||e.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(e,t){this.eventQueue.push(e),(this.eventQueue.length>=this.maxQueueSize||t)&&this.flush()},remove:function(){this.flush()}};var ove=RW,ive={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"לחפש",ja:"サーチ",lv:"Meklēt",pt:"Procurar",sr:"Претрага",zh:"搜索",cs:"Vyhledávání",hu:"Keresés",ka:"ძიება",nb:"Søke",sk:"Vyhľadávanie",th:"ค้นหา",fi:"Hae",is:"Leita",ko:"수색",pl:"Szukaj",sl:"Iskanje",fa:"جستجو",ru:"Поиск"},ave={placeholder:ive},IW={exports:{}};(function(e){(function(t,n,r){e.exports?e.exports=r():t[n]=r()})(pc,"subtag",function(){var t="",n=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(a){return a.match(n)||[]}function l(a){return r(a).filter(function(E,C){return E&&C})}function d(a){return a=r(a),{language:a[1]||t,extlang:a[2]||t,script:a[3]||t,region:a[4]||t}}function f(a,E,C){Object.defineProperty(a,E,{value:C,enumerable:!0})}function y(a,E,C){function M(P){return r(P)[a]||t}f(M,"pattern",E),f(d,C,M)}return y(1,/^[a-zA-Z]{2,3}$/,"language"),y(2,/^[a-zA-Z]{3}$/,"extlang"),y(3,/^[a-zA-Z]{4}$/,"script"),y(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),f(d,"split",l),d})})(IW);var sve=IW.exports;function PW(){}PW.prototype={isSupport:function(){return!!window.navigator.geolocation},getCurrentPosition:function(){const e={enableHighAccuracy:!0};return new Promise(function(t,n){window.navigator.geolocation.getCurrentPosition(t,n,e)})}};var lve=PW;function cve(e,t){const n=OW(e),r=["address","street","place","country"];var l;if(typeof t=="function")return t(n);const d=r.indexOf(t);return d===-1?l=r:l=r.slice(d),l.reduce(function(f,y){return n[y]?(f!==""&&(f=f+", "),f+n[y]):f},"")}function OW(e){const t=e.address||"",n=e.text||"",r=e.place_name||"",d={address:r.split(",")[0],houseNumber:t,street:n,placeName:r};return e.context.forEach(function(f){const y=f.id.split(".")[0];d[y]=f.text}),d}const uve=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var dve={transformFeatureToGeolocationText:cve,getAddressInfo:OW,REVERSE_GEOCODE_COORD_RGX:uve},hve=pye,fve=Iye,Fg=Ev,pve=Fye.EventEmitter,L8=jye,K3=Ebe,X3=Xbe,mve=ove,gve=ave,yve=sve,bve=lve,N8=dve;const pp={FORWARD:0,LOCAL:1,REVERSE:2};function vve(){var e=document.createElement("div");return e.className="mapboxgl-ctrl-geocoder--powered-by",e.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',e}function LW(e){this._eventEmitter=new pve,this.options=Fg({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new bve}LW.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(e){return e.place_name},render:function(e){var t=e.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+t[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+t.splice(1,t.length).join(",")+"</div></div>"}},addTo:function(e){function t(n,r){if(!document.body.contains(r))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const l=n.onAdd();r.appendChild(l)}if(e._controlContainer)e.addControl(this);else if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const n=document.querySelectorAll(e);if(n.length===0)throw new Error("Element ",e,"not found.");if(n.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,n[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=X3(K3({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new mve(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var t=this.container=document.createElement("div");t.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",fve(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(E){this.eventManager.keyevent(E,this)}.bind(this));var r=document.createElement("div");r.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var l=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(l),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),r.appendChild(this._clearEl),r.appendChild(this._loadingEl),t.appendChild(n),t.appendChild(this._inputEl),t.appendChild(r),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var d=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(d),r.appendChild(this._geolocateEl),this._showGeolocateButton()}var f=this._typeahead=new hve(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),f.getItemValue=this.options.getItemValue;var y=f.list.draw,a=this._footerNode=vve();return f.list.draw=function(){y.call(this),a.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),a.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(a)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),t},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(e){this._hideLoadingIcon();const t={geometry:{type:"Point",coordinates:[e.coords.longitude,e.coords.latitude]}};this._handleMarker(t),this._fly(t),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(t),this._showClearButton(),this.fresh=!1;const n={limit:1,language:[this.options.language],query:t.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const r=t.geometry.coordinates[0]+","+t.geometry.coordinates[1];this._setInputValue(r),this._eventEmitter.emit("result",{result:t})}else this.geocoderService.reverseGeocode(n).send().then(function(r){const l=r.body.features[0];if(l){const d=N8.transformFeatureToGeolocationText(l,this.options.addressAccuracy);this._setInputValue(d),l.user_coordinates=t.geometry.coordinates,this._eventEmitter.emit("result",{result:l})}else this._eventEmitter.emit("result",{result:{user_coordinates:t.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(e){e.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+e),n.setAttribute("viewBox","0 0 18 18"),n.setAttribute("xml:space","preserve"),n.setAttribute("width",18),n.setAttribute("height",18),n.innerHTML=t,n},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(e){this._inputEl.value=e,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(e){var t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this._geocode(t)},_onKeyDown:function(e){var t=27,n=9;if(e.keyCode===t&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();var r=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target,l=r?r.value:"";if(!l)return this.fresh=!0,e.keyCode!==n&&this.clear(e),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(e.metaKey||[n,t,37,39,13,38,40].indexOf(e.keyCode)!==-1)&&r.value.length>=this.options.minLength&&this._geocode(r.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()},_onChange:function(){var e=this._typeahead.selected;e&&JSON.stringify(e)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(e),this.options.marker&&this._mapboxgl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._eventEmitter.emit("result",{result:e}),this.eventManager.select(e,this))},_fly:function(e){var t;if(e.properties&&L8[e.properties.short_code])t=Fg({},this.options.flyTo),this._map&&this._map.fitBounds(L8[e.properties.short_code].bbox,t);else if(e.bbox){var n=e.bbox;t=Fg({},this.options.flyTo),this._map&&this._map.fitBounds([[n[0],n[1]],[n[2],n[3]]],t)}else{var r={zoom:this.options.zoom};t=Fg({},r,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}},_requestType:function(e,t){var n;return e.localGeocoderOnly?n=pp.LOCAL:e.reverseGeocode&&N8.REVERSE_GEOCODE_COORD_RGX.test(t)?n=pp.REVERSE:n=pp.FORWARD,n},_setupConfig:function(e,t){const n=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],r=/[\s,]+/;var l=this,d=n.reduce(function(y,a){if(l.options[a]===void 0||l.options[a]===null)return y;["countries","types","language"].indexOf(a)>-1?y[a]=l.options[a].split(r):y[a]=l.options[a];const E=typeof l.options[a].longitude=="number"&&typeof l.options[a].latitude=="number";if(a==="proximity"&&E){const C=l.options[a].longitude,M=l.options[a].latitude;y[a]=[C,M]}return y},{});switch(e){case pp.REVERSE:{var f=t.split(r).map(function(y){return parseFloat(y,10)});l.options.flipCoordinates||f.reverse(),d.types&&d.types[0],d=Fg(d,{query:f,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(y){y in d&&delete d[y]})}break;case pp.FORWARD:{const y=t.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(y)&&(t=t.replace(/,/g," ")),d=Fg(d,{query:t})}break}return d},_geocode:function(e){this.inputString=e,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:e});const t=this._requestType(this.options,e),n=this._setupConfig(t,e);var r;switch(t){case pp.LOCAL:r=Promise.resolve();break;case pp.FORWARD:r=this.geocoderService.forwardGeocode(n).send();break;case pp.REVERSE:r=this.geocoderService.reverseGeocode(n).send();break}var l=this.options.localGeocoder?this.options.localGeocoder(e)||[]:[],d=[],f=null;return r.catch(function(y){f=y}.bind(this)).then(function(y){this._hideLoadingIcon();var a={};return y?y.statusCode=="200"&&(a=y.body,a.request=y.request,a.headers=y.headers):a={type:"FeatureCollection",features:[]},a.config=n,this.fresh&&(this.eventManager.start(this),this.fresh=!1),a.features=a.features?l.concat(a.features):l,this.options.externalGeocoder?(d=this.options.externalGeocoder(e,a.features)||Promise.resolve([]),d.then(function(E){return a.features=a.features?E.concat(a.features):E,a},function(){return a})):a}.bind(this)).then(function(y){if(f)throw f;this.options.filter&&y.features.length&&(y.features=y.features.filter(this.options.filter)),y.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",y),this._typeahead.update(y.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",y))}.bind(this)).catch(function(y){this._hideLoadingIcon(),this._hideAttribution(),l.length&&this.options.localGeocoder||d.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(l)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:l}),this._eventEmitter.emit("error",{error:y})}.bind(this)),r},_clear:function(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(e){this._clear(e),this._inputEl.focus()},_clearOnBlur:function(e){var t=this;e.relatedTarget&&t._clear(e)},_onQueryResult:function(e){var t=e.body;if(t.features.length){var n=t.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(e){return this._geocode(e).then(this._onQueryResult),this},_renderError:function(){var e="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(e)},_renderLocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(e)},_renderNoResults:function(){var e="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(e)},_renderUserDeniedGeolocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(e)},_renderMessage:function(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var e=this.options.language.split(",")[0],t=yve.language(e),n=gve.placeholder[t];if(n)return n}return"Search"},setInput:function(e,t){return t===void 0&&(t=!1),this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&(t?this._geocode(e):this._onChange()),this},setProximity:function(e,t=!0){return this.options.proximity=e,t&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(e){var t=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=e||this.options.language||t,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(e){return this.options.zoom=e,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(e){return this.options.flyTo=e,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(e){return this.options.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.options.placeholder,this._inputEl.setAttribute("aria-label",this.options.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(e){return this.options.bbox=e,this},getCountries:function(){return this.options.countries},setCountries:function(e){return this.options.countries=e,this},getTypes:function(){return this.options.types},setTypes:function(e){return this.options.types=e,this},getMinLength:function(){return this.options.minLength},setMinLength:function(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this},getLimit:function(){return this.options.limit},setLimit:function(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this},getFilter:function(){return this.options.filter},setFilter:function(e){return this.options.filter=e,this},setOrigin:function(e){return this.options.origin=e,this.geocoderService=X3(K3({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(e){return this.options.accessToken=e,this.geocoderService=X3(K3({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(e){return this.options.autocomplete=e,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(e){return this.options.fuzzyMatch=e,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(e){return this.options.routing=e,this},getRouting:function(){return this.options.routing},setWorldview:function(e){return this.options.worldview=e,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(e){if(this._map){this._removeMarker();var t={color:"#4668F2"},n=Fg({},t,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(n),e.center?this.mapMarker.setLngLat(e.center).addTo(this._map):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(e,t){return this._eventEmitter.on(e,t),this},off:function(e,t){return this._eventEmitter.removeListener(e,t),this.eventManager.remove(),this}};var _ve=LW;const o4=w0(_ve);Al.accessToken="pk.eyJ1IjoiY3J5c3RhbGpvYmUiLCJhIjoiY2x2Y3VkMzFxMG13ZzJrcGY5dDB0bGJvYyJ9.PV_ZgI2EhyhNfcRHmp2OPw";function NW({setAddress:e,setCoords:t}){const n=j.useRef(null),r=j.useRef(null),[l,d]=j.useState(-72.9),[f,y]=j.useState(42.35),[a,E]=j.useState(11);return j.useEffect(()=>{r.current||("geolocation"in navigator?navigator.geolocation.getCurrentPosition(C=>{r.current=new Al.Map({container:n.current,style:"mapbox://styles/mapbox/streets-v12",center:[C.coords.longitude,C.coords.latitude],zoom:a}),r.current.on("move",()=>{d(r.current.getCenter().lng.toFixed(4)),y(r.current.getCenter().lat.toFixed(4)),E(r.current.getZoom().toFixed(2))});const M=new o4({accessToken:Al.accessToken,mapboxgl:Al,marker:!0,placeholder:"Search location",proximity:{longitude:l,latitude:f},countries:"us",language:"en",autocomplete:!1,type:"address, street, secondary_address, region",limit:3});r.current.addControl(M),M.on("result",P=>{const N=P.result;e(N.place_name),t(N.geometry.coordinates)})}):console.log("error retrieving location data"))},[]),O.jsx(O.Fragment,{children:O.jsx("div",{ref:n,className:"location-search-map-container"})})}const zW=async e=>(await ho.get(`events/${e}`)).data,z8=async e=>{const t=Object.entries(e).filter(([r,l])=>l!==""&&l!==null&&l!==void 0).map(([r,l])=>`${encodeURIComponent(r)}=${encodeURIComponent(l)}`).join("&");return(await ho.get(`events/?${t}`)).data},xve=async(e,t,n,r,l,d,f,y,a,E,C,M,P,N)=>{let F=await ho.post("events/",{title:e,event_start:t,event_end:n,time_zone:r,event_type:l,event_venue:d,event_venue_address:f,description:y,category:a,event_photo:E,virtual_event_link:C||null,location:M||null,coordinates:P||null,attendees_needed:N});if(F.status===201)return!0;console.log("error:",F.data)},wve=async(e,t)=>{let n=await ho.put(`events/${e}/`,{rsvp:t});return n.status===200?!0:(console.log("error:",n.data,"status:",n.status),!1)},Eve=async(e,t,n,r,l,d,f,y,a,E,C,M,P,N,F)=>{try{if((await ho.put(`events/${e}/`,{title:t,event_start:n,event_end:r,time_zone:l,event_type:d,event_venue:f,event_venue_address:y,description:a,category:E,event_photo:C,virtual_event_link:M||null,location:P||null,coordinates:N||null,attendees_needed:F})).status===200)return!0}catch($){return console.error("Exception when updating event details:",$),!1}},Tve=async(e,t)=>{if((await ho.delete(`events/${e}/`,{event:t})).status===204)return!0},Sve=async e=>{let n=(await ho.get(`events/${e}/iCal/`)).data;return console.log(n),n},i4=["America/Adak","America/Anchorage","America/Chicago","America/Denver","America/Halifax","America/Los_Angeles","America/New_York","America/Noronha","America/St_Johns","Asia/Bangkok","Asia/Dhaka","Asia/Dubai","Asia/Istanbul","Asia/Kabul","Asia/Karachi","Asia/Kathmandu","Asia/Kolkata","Asia/Tehran","Atlantic/Azores","Europe/Kiev","Europe/Lisbon","Europe/London","Europe/Moscow","Europe/Paris","GMT","Pacific/Honolulu","Pacific/Niue"],Cve=async e=>(await ho.get(`events/admin/${e}/`)).data,kve=async e=>(await ho.get(`events/collaboration/${e}/`)).data,Ave=async(e,t,n)=>{const r=await ho.put(`events/${e}/`,{hosts:t,host_invite:n});return console.log("utility funct",t,n,e),r.status===200?!0:(console.log("Cannot add hosts:",r.status),!1)},Mve=async(e,t)=>(await ho.get(`events/${e}/posts/${t}/`)).data,Dve=async(e,t,n)=>{let l=(await ho.post(`events/${e}/posts/${t}/`,n)).data;return console.log("RETURN DATA",l),l},Rve=async(e,t,n)=>{let l=(await ho.post(`events/${e}/posts/${t}/comments/`,n)).data;return console.log("RETURN DATA",l),l},Ive=async(e,t)=>{const n=await ho.delete(`events/${e}/posts/comment/${t}/`);console.log(n);let r=n.data;return console.log("RETURN DATA",r),r},Pve=async(e,t)=>{let r=(await ho.delete(`events/${e}/posts/${t}/`)).data;return console.log("RETURN DATA",r),r},Ove=async(e,t)=>(await ho.post(`volunteer_applications/${e}/`,t)).data;function BW({title:e,eventStart:t,eventEnd:n,timeZone:r,eventType:l,eventVenue:d,eventVenueAddress:f,virtualEventLink:y,description:a,category:E,interestCategories:C,photoPreview:M,handleImageChange:P,onTitleChange:N,onEventStartChange:F,onEventEndChange:$,onTimeZoneChange:Z,onEventTypeChange:q,onEventVenueChange:K,onEventVenueAddressChange:Q,onVirtualLinkChange:te,onDescriptionChange:ie,onCategoryChange:ue,volunteersNeeded:re,attendeesNeeded:me,onVolunteersNeededChange:ve,onAttendeesNeededChange:De,setEventCoordinates:je,handleSubmit:Be,setEventVenueAddress:Ue}){const Ge={label:{fontWeight:"bold"}},ze=ot=>{Q({target:{value:ot}})};return O.jsx(Sn,{onSubmit:Be,className:"p-3",children:O.jsxs(io,{className:"shadow-sm",children:[O.jsx(io.Header,{as:"h5",className:"text-white bg-dark",children:"Event Details"}),O.jsxs(io.Body,{children:[O.jsxs(Jr,{children:[O.jsxs(Ir,{sm:12,md:6,children:[O.jsxs(Sn.Group,{className:"mb-2",controlId:"title",children:[O.jsxs(Sn.Label,{style:Ge.label,children:["Enter an Event Title:"," ",O.jsx("span",{style:{fontStyle:"italic",fontWeight:"normal"},children:"(ex. City Park Clean-up, Silent Auction Fundraiser for..)"})]}),O.jsx(Sn.Control,{type:"text",placeholder:"Enter event title",value:e,onChange:N})]}),O.jsxs(Sn.Group,{className:"mb-2",controlId:"event_type",children:[O.jsx(Sn.Label,{className:"mt-2",style:Ge.label,children:"Will the Event be In-person or Virtual?"}),O.jsxs(Sn.Control,{as:"select",value:l,onChange:q,children:[O.jsx("option",{value:"In-person",children:"In-person"}),O.jsx("option",{value:"Virtual",children:"Virtual"})]})]})]}),O.jsx(Ir,{sm:12,md:6,children:O.jsxs(Sn.Group,{className:"mb-2",controlId:"date",children:[O.jsx(Sn.Label,{style:Ge.label,children:"Event Start Time:"}),O.jsx(Sn.Control,{type:"datetime-local",value:t,onChange:F}),O.jsx(Sn.Label,{className:"mt-3",style:Ge.label,children:"Event End Time:"}),O.jsx(Sn.Control,{type:"datetime-local",value:n,onChange:$})]})})]}),O.jsxs(Jr,{children:[O.jsxs(Ir,{sm:12,md:6,children:[l==="Virtual"&&O.jsxs(Sn.Group,{className:"mb-2",controlId:"virtual_event_link",children:[O.jsx(Sn.Label,{className:"mt-2",style:Ge.label,children:"Enter the Virtual Event Link attendees will use to join your event:"}),O.jsx(Sn.Control,{type:"url",placeholder:"Enter virtual event link",value:y,onChange:te})]}),!l.includes("Virtual")&&O.jsxs(Jr,{children:[O.jsxs(Sn.Group,{className:"mb-2",controlId:"event_venue",children:[O.jsxs(Sn.Label,{className:"mt-2",children:[" ",O.jsx("span",{style:Ge.label,children:"Event Venue:"})," ",O.jsx("span",{style:{fontStyle:"italic"},children:"(ex. Westside Community Center, Memorial Park)"})]}),O.jsx(Sn.Control,{type:"text",placeholder:"Enter event venue",value:d,onChange:K})]}),O.jsxs(Sn.Group,{className:"mb-2",controlId:"event_venue_address",children:[O.jsx(Jr,{children:O.jsxs(Sn.Label,{className:"mt-2",style:{fontWeight:"bold",marginBottom:"0"},children:["Venue Address:","  ",O.jsx("span",{style:{fontWeight:"normal",fontStyle:"italic"},children:"(Enter address in search box below)"})," "]})}),O.jsx(Jr,{style:{paddingLeft:"12px"},children:O.jsx(Sn.Control,{style:{fontStyle:"italic",marginTop:"0",paddingTop:"0"},type:"text",value:f,plaintext:!0,readOnly:!0})})]}),O.jsx(Jr,{className:"mb-3",style:{justifyContent:"center"},children:O.jsx(NW,{setCoords:je,setEventVenueAddress:ze,setAddress:Ue})})]})]}),O.jsxs(Ir,{sm:12,md:6,children:[O.jsxs(Sn.Group,{className:"mb-2",controlId:"timeZone",children:[O.jsx(Sn.Label,{className:"mt-2",style:Ge.label,children:"Event Timezone:"}),O.jsx(Sn.Control,{as:"select",value:r,onChange:Z,children:i4.map((ot,st)=>O.jsx("option",{value:ot,children:ot},st))})]}),O.jsxs(Sn.Group,{className:"mb-2",controlId:"category",children:[O.jsx(Sn.Label,{className:"mt-2",style:Ge.label,children:"Select a Category that best fits your event:"}),O.jsx(Sn.Control,{as:"select",value:E,onChange:ue,children:C.map(ot=>O.jsx("option",{value:ot.id,children:ot.category},ot.id))})]}),O.jsx(Jr,{className:"mt-3",children:O.jsxs(Sn.Group,{controlId:"eventManagementBooleans",children:[O.jsx(Sn.Label,{className:"mt-2",style:Ge.label,children:"Please click the corresponding checkboxes below if your event will need volunteers and/or event attendees:"}),O.jsxs(Sn.Check,{id:"volunteersBoolean",type:"checkbox",className:"mt-3",style:{marginLeft:"30px"},children:[O.jsx(Sn.Check.Input,{isValid:!0,type:"checkbox",checked:re,onChange:ve}),O.jsx(Sn.Check.Label,{style:Ge.label,children:"My event requires volunteers."}),O.jsx(Jr,{children:re&&O.jsx(Sn.Text,{children:"Volunteers it is! Once you submit this event you'll be able to manage your volunteer needs on your Event Admin Page."})})]}),O.jsxs(Sn.Check,{id:"attendeesBoolean",type:"checkbox",className:"mt-3",style:{marginLeft:"30px"},children:[O.jsx(Sn.Check.Input,{isValid:!0,type:"checkbox",checked:me,onChange:De}),O.jsx(Sn.Check.Label,{style:Ge.label,children:"My event requires event attendees."}),O.jsx(Jr,{children:me&&O.jsx(Sn.Text,{children:"You got it! As soon as you submit this event other ChangeMate users will be able to view the details and RSVP!"})})]})]})})]})]}),O.jsxs(Sn.Group,{className:"mb-2",controlId:"description",children:[O.jsx(Sn.Label,{className:"mt-3",style:Ge.label,children:"Enter a brief description about your event and why others should attend:"}),O.jsx(Sn.Control,{as:"textarea",rows:8,placeholder:"Describe your event",value:a,onChange:ie})]}),O.jsxs(Sn.Group,{controlId:"eventImage",className:"mb-3",children:[O.jsx(Sn.Label,{className:"mt-3",style:Ge.label,children:"Event Image:"}),O.jsx(Sn.Control,{type:"file",accept:"image/*",onChange:P}),M&&O.jsx("img",{src:M,alt:"Event Preview",className:"img-fluid mt-3"})]})]})]})})}const _k=async()=>(await ho.get("interests/")).data;function Lve(){const e=Ac(),[t,n]=j.useState([]),[r,l]=j.useState(""),[d,f]=j.useState(""),[y,a]=j.useState(""),[E,C]=j.useState("America/Adak"),[M,P]=j.useState("In-person"),[N,F]=j.useState(""),[$,Z]=j.useState(""),[q,K]=j.useState(""),[Q,te]=j.useState(""),[ie,ue]=j.useState(1),[re,me]=j.useState(""),[ve,De]=j.useState(""),[je,Be]=j.useState(""),[Ue,Ge]=j.useState(""),[ze,ot]=j.useState(!1),[st,Re]=j.useState(!1);j.useEffect(()=>{(async()=>{const Nt=await _k();n(Nt)})()},[]);const bt=Ct=>{const Nt=Ct.target.files[0];if(Nt){const tn=new FileReader;tn.onloadend=()=>{De(tn.result),me(tn.result)},tn.readAsDataURL(Nt)}},Lt=async Ct=>{Ct.preventDefault();try{await xve(r,d,y,E,M,$,q,Q,ie,re,N,je,Ue,st),e("/profile")}catch(Nt){console.error("Failed to create event:",Nt)}};return O.jsxs(Zi,{children:[O.jsx(BW,{title:r,eventStart:d,eventEnd:y,timeZone:E,eventType:M,eventVenue:$,eventVenueAddress:q,virtualEventLink:N,description:Q,category:ie,interestCategories:t,photoPreview:ve,handleImageChange:bt,onTitleChange:Ct=>l(Ct.target.value),onEventStartChange:Ct=>f(Ct.target.value),onEventEndChange:Ct=>a(Ct.target.value),onTimeZoneChange:Ct=>C(Ct.target.value),onEventTypeChange:Ct=>P(Ct.target.value),onEventVenueChange:Ct=>Z(Ct.target.value),onEventVenueAddressChange:Ct=>K(Ct.target.value),onVirtualLinkChange:Ct=>F(Ct.target.value),onDescriptionChange:Ct=>te(Ct.target.value),onCategoryChange:Ct=>ue(Ct.target.value),volunteersNeeded:ze,attendeesNeeded:st,onVolunteersNeededChange:Ct=>ot(!ze),onAttendeesNeededChange:Ct=>Re(!st),setEventCoordinates:Ge,setLocation:Be,setEventVenueAddress:K,timeZoneAbbreviations:i4,handleSubmit:Lt}),O.jsx(Ts,{variant:"primary",size:"lg",style:{paddingLeft:"28px",paddingRight:"28px"},onClick:Lt,children:"Create Event"})]})}function Nve(){const{eventID:e}=cm(),t=Ac(),[n,r]=j.useState([]),[l,d]=j.useState(""),[f,y]=j.useState(""),[a,E]=j.useState(""),[C,M]=j.useState(""),[P,N]=j.useState("In-person"),[F,$]=j.useState(""),[Z,q]=j.useState(""),[K,Q]=j.useState(""),[te,ie]=j.useState(""),[ue,re]=j.useState(""),[me,ve]=j.useState(""),[De,je]=j.useState(""),[Be,Ue]=j.useState(""),[Ge,ze]=j.useState(""),[ot,st]=j.useState(!1),[Re,bt]=j.useState(!1);console.log(Be,Ge,K),j.useEffect(()=>{(async()=>{const cn=await _k();r(cn);const Mt=await zW(e);d(Mt.title),y(Lt(Mt.event_start)),E(Lt(Mt.event_end)),M(Mt.time_zone),N(Mt.event_type),$(Mt.virtual_event_link),q(Mt.event_venue),Q(Mt.event_venue_address),ie(Mt.description),re(Mt.category.id),ve(Mt.event_photo),je(Mt.event_photo),ze([Mt.lat,Mt.lon]),Ue(Mt.location),bt(Mt.attendees_needed)})()},[e]);const Lt=Dt=>new Date(Dt).toISOString().slice(0,16),Ct=Dt=>{const cn=Dt.target.files[0];if(cn){const Mt=new FileReader;Mt.onloadend=()=>{je(Mt.result),ve(Mt.result)},Mt.readAsDataURL(cn)}},Nt=async Dt=>{Dt.preventDefault(),await Eve(e,l,f,a,C,P,Z,K,te,ue,me,F,Be,Ge,Re)&&t(`/admin/${e}`)},tn=async()=>{await Tve(e)&&t(`/admin/${e}`)};return O.jsxs(Zi,{children:[O.jsx(BW,{title:l,eventStart:f,eventEnd:a,timeZone:C,eventType:P,eventVenue:Z,eventVenueAddress:K,virtualEventLink:F,description:te,category:ue,interestCategories:n,photoPreview:De,handleImageChange:Ct,onTitleChange:Dt=>d(Dt.target.value),onEventStartChange:Dt=>y(Dt.target.value),onEventEndChange:Dt=>E(Dt.target.value),onTimeZoneChange:Dt=>M(Dt.target.value),onEventTypeChange:Dt=>N(Dt.target.value),onEventVenueChange:Dt=>q(Dt.target.value),onEventVenueAddressChange:Dt=>Q(Dt.target.value),onVirtualLinkChange:Dt=>$(Dt.target.value),onDescriptionChange:Dt=>ie(Dt.target.value),onCategoryChange:Dt=>re(Dt.target.value),setEventCoordinates:ze,setLocation:Ue,setEventVenueAddress:Q,volunteersNeeded:ot,attendeesNeeded:Re,onVolunteersNeededChange:Dt=>st(!ot),onAttendeesNeededChange:Dt=>bt(!Re),timeZoneAbbreviations:i4,handleSubmit:Nt,handleDelete:tn}),O.jsxs("div",{className:"text-center",style:{marginTop:"8px",marginBottom:"20px"},children:[O.jsx(Ts,{variant:"success",size:"lg",style:{marginRight:"40px",paddingLeft:"28px",paddingRight:"28px"},onClick:Nt,children:"Save Changes"}),O.jsx(Ts,{variant:"danger",size:"lg",style:{marginLeft:"40px",paddingLeft:"31px",paddingRight:"31px"},onClick:tn,children:"Delete Event"})]})]})}function zve({user:e}){const{userProfileData:t,setUserProfileData:n}=Eu(),[r,l]=j.useState([]),[d,f]=j.useState([]),[y,a]=j.useState([]),[E,C]=j.useState([]),[M,P]=j.useState(""),[N,F]=j.useState([]),[$,Z]=j.useState(""),[q,K]=j.useState(""),Q=Ac();console.log(N);const te=async()=>{const ve=await _k();l(ve)},ie=async()=>{const ve=await CU();P(ve.location),F(ie.coordinates),C(ve.display_name),f(ve.interests.map(De=>De.category)),K(ve.profileImage),Z(ve.profileImage)},ue=async()=>{const De=await use({interests:y,display_name:E,location:M,image:$,coordinates:N});De&&(n(De),Q("/profile"))},re=ve=>{const De=ve.target.files[0];if(De){const je=new FileReader;je.onloadend=()=>{K(je.result),Z(je.result)},je.readAsDataURL(De)}};function me(ve){ve.preventDefault(),ue()}return j.useEffect(()=>{ie(),te()},[]),O.jsx(Zi,{fluid:!0,children:O.jsxs(Jr,{className:"justify-content-md-center mt-4 mb-3",children:[O.jsx(Ir,{md:2}),O.jsx(Ir,{md:8,className:"d-flex justify-content-center",children:O.jsx(io,{children:O.jsxs(io.Body,{children:[O.jsx(io.Title,{as:"h3",className:"text-center mb-3",style:{fontWeight:"bold",color:"#6840DF"},children:"Edit Profile"}),O.jsxs(Sn,{onSubmit:me,children:[O.jsxs(Sn.Group,{className:"mb-3",controlId:"display_name",children:[O.jsxs(Sn.Label,{style:{fontWeight:"bold",fontSize:"18px"},children:[O.jsx("i",{className:"bi bi-person-fill"})," Display Name: "]}),O.jsx(Sn.Control,{type:"text",placeholder:"Enter your display name",value:E,onChange:ve=>C(ve.target.value)})]}),O.jsxs(Sn.Group,{className:"mb-3",controlId:"location",children:[O.jsxs(Sn.Label,{style:{fontWeight:"bold",fontSize:"18px"},children:[O.jsx("i",{className:"bi bi-geo-alt-fill"})," Location: "]}),O.jsx(NW,{setCoords:F,setAddress:P})]}),O.jsxs(Sn.Group,{className:"mb-3",controlId:"interests",children:[O.jsxs(Sn.Label,{style:{fontWeight:"bold",fontSize:"18px"},children:[O.jsx("i",{className:"bi bi-bookmark-star-fill"})," Interests: ",O.jsx("span",{style:{fontStyle:"italic",fontWeight:"normal",fontSize:"16px"},children:"To select multiple interests hold down ctrl button."})]}),O.jsx(Sn.Control,{as:"select",multiple:!0,value:d,onChange:ve=>{const De=Array.from(ve.target.selectedOptions),je=De.map(Ue=>Ue.value),Be=De.map(Ue=>parseInt(Ue.getAttribute("data-key")));f(je),a(Be)},children:r.map((ve,De)=>O.jsx("option",{"data-key":ve.id,value:ve.category,children:ve.category},De))})]}),O.jsxs(Sn.Group,{className:"mb-3",controlId:"profileImage",children:[O.jsxs(Sn.Label,{style:{fontWeight:"bold",fontSize:"18px"},children:[O.jsx("i",{className:"bi bi-image-fill"})," Profile Image: "]}),O.jsxs(Bg,{children:[O.jsx(qU,{type:"file",accept:"image/*",onChange:re}),q&&O.jsx("img",{src:q,alt:"Profile Preview",className:"img-fluid mt-3"})]})]}),O.jsx("div",{className:"text-center",children:O.jsx(Ts,{variant:"primary",type:"submit",children:"Submit Changes"})})]})]})})}),O.jsx(Ir,{md:2})]})})}const FW="/assets/Default-Event-jwrgyou-.png";var jW={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},B8=dt.createContext&&dt.createContext(jW),Bve=["attr","size","title"];function Fve(e,t){if(e==null)return{};var n=jve(e,t),r,l;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(l=0;l<d.length;l++)r=d[l],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function jve(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function gS(){return gS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gS.apply(this,arguments)}function F8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function yS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?F8(Object(n),!0).forEach(function(r){$ve(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $ve(e,t,n){return t=Uve(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uve(e){var t=Vve(e,"string");return typeof t=="symbol"?t:t+""}function Vve(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $W(e){return e&&e.map((t,n)=>dt.createElement(t.tag,yS({key:n},t.attr),$W(t.child)))}function hm(e){return t=>dt.createElement(Hve,gS({attr:yS({},e.attr)},t),$W(e.child))}function Hve(e){var t=n=>{var{attr:r,size:l,title:d}=e,f=Fve(e,Bve),y=l||n.size||"1em",a;return n.className&&(a=n.className),e.className&&(a=(a?a+" ":"")+e.className),dt.createElement("svg",gS({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,f,{className:a,style:yS(yS({color:e.color||n.color},n.style),e.style),height:y,width:y,xmlns:"http://www.w3.org/2000/svg"}),d&&dt.createElement("title",null,d),e.children)};return B8!==void 0?dt.createElement(B8.Consumer,null,n=>t(n)):t(jW)}function j8(e){return hm({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#CFD8DC",d:"M5,38V14h38v24c0,2.2-1.8,4-4,4H9C6.8,42,5,40.2,5,38z"},child:[]},{tag:"path",attr:{fill:"#F44336",d:"M43,10v6H5v-6c0-2.2,1.8-4,4-4h30C41.2,6,43,7.8,43,10z"},child:[]},{tag:"g",attr:{fill:"#B71C1C"},child:[{tag:"circle",attr:{cx:"33",cy:"10",r:"3"},child:[]},{tag:"circle",attr:{cx:"15",cy:"10",r:"3"},child:[]}]},{tag:"g",attr:{fill:"#B0BEC5"},child:[{tag:"path",attr:{d:"M33,3c-1.1,0-2,0.9-2,2v5c0,1.1,0.9,2,2,2s2-0.9,2-2V5C35,3.9,34.1,3,33,3z"},child:[]},{tag:"path",attr:{d:"M15,3c-1.1,0-2,0.9-2,2v5c0,1.1,0.9,2,2,2s2-0.9,2-2V5C17,3.9,16.1,3,15,3z"},child:[]}]},{tag:"g",attr:{fill:"#90A4AE"},child:[{tag:"rect",attr:{x:"13",y:"20",width:"4",height:"4"},child:[]},{tag:"rect",attr:{x:"19",y:"20",width:"4",height:"4"},child:[]},{tag:"rect",attr:{x:"25",y:"20",width:"4",height:"4"},child:[]},{tag:"rect",attr:{x:"31",y:"20",width:"4",height:"4"},child:[]},{tag:"rect",attr:{x:"13",y:"26",width:"4",height:"4"},child:[]},{tag:"rect",attr:{x:"19",y:"26",width:"4",height:"4"},child:[]},{tag:"rect",attr:{x:"25",y:"26",width:"4",height:"4"},child:[]},{tag:"rect",attr:{x:"31",y:"26",width:"4",height:"4"},child:[]},{tag:"rect",attr:{x:"13",y:"32",width:"4",height:"4"},child:[]},{tag:"rect",attr:{x:"19",y:"32",width:"4",height:"4"},child:[]},{tag:"rect",attr:{x:"25",y:"32",width:"4",height:"4"},child:[]},{tag:"rect",attr:{x:"31",y:"32",width:"4",height:"4"},child:[]}]}]})(e)}function Wve(e){return hm({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"circle",attr:{fill:"#00ACC1",cx:"24",cy:"24",r:"20"},child:[]},{tag:"circle",attr:{fill:"#eee",cx:"24",cy:"24",r:"16"},child:[]},{tag:"rect",attr:{x:"23",y:"11",width:"2",height:"13"},child:[]},{tag:"rect",attr:{x:"26.1",y:"22.7",transform:"matrix(-.707 .707 -.707 -.707 65.787 27.25)",width:"2.3",height:"9.2"},child:[]},{tag:"circle",attr:{cx:"24",cy:"24",r:"2"},child:[]},{tag:"circle",attr:{fill:"#00ACC1",cx:"24",cy:"24",r:"1"},child:[]}]})(e)}function Yve(e){return hm({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M258.9 48C141.92 46.42 46.42 141.92 48 258.9c1.56 112.19 92.91 203.54 205.1 205.1 117 1.6 212.48-93.9 210.88-210.88C462.44 140.91 371.09 49.56 258.9 48zm-3.68 152.11c.21-1.2.44-2.4.71-3.59a66.46 66.46 0 0 1 16.29-31.21c12.89-13.73 31.16-21.31 51.45-21.31a74.05 74.05 0 0 1 25.06 4.26 66.69 66.69 0 0 1 26.27 17.2 68.15 68.15 0 0 1 18 42.14 78.46 78.46 0 0 1 0 11.4 86.19 86.19 0 0 1-8.2 31q-.76 1.59-1.59 3.15c-1.11 2.07-2.3 4.1-3.58 6.06a79.47 79.47 0 0 1-8.63 11c-13.12 14-29.92 21.73-47.31 21.73a59.61 59.61 0 0 1-19.17-3.18 63.47 63.47 0 0 1-6.1-2.43 70.76 70.76 0 0 1-22.07-16.12 83.76 83.76 0 0 1-22-51.32q-.27-3.88-.18-7.68a75.62 75.62 0 0 1 1.05-11.08zm-149.73 24.34a59.87 59.87 0 0 1 5.2-20.64 56.76 56.76 0 0 1 2.78-5.3 54.49 54.49 0 0 1 7.19-9.56 55.62 55.62 0 0 1 14-10.82 56.84 56.84 0 0 1 8.11-3.64 63.85 63.85 0 0 1 33.35-2.39 57 57 0 0 1 30.78 17 57.86 57.86 0 0 1 15.41 38.62c.05 2.11 0 4.23-.15 6.38a71.58 71.58 0 0 1-6 23.84 69.49 69.49 0 0 1-5.73 10.42 65.39 65.39 0 0 1-15.76 16.57c-1.5 1.07-3.06 2.07-4.67 3.07a54.21 54.21 0 0 1-10 4.65 49.31 49.31 0 0 1-16.2 2.76c-.93 0-1.86 0-2.78-.08a47.6 47.6 0 0 1-5.48-.62 51.19 51.19 0 0 1-5.35-1.23 53.54 53.54 0 0 1-7.72-2.89c-.84-.39-1.66-.8-2.48-1.23-18-9.49-31.57-29.16-34.23-52.12-.12-1.05-.22-2.1-.29-3.16a66.59 66.59 0 0 1 .02-9.63zm53.92 178.6a177.27 177.27 0 0 1-61.94-70.65 4 4 0 0 1 1.62-5.26C117.67 316.69 141.4 311 163.82 311c17 0 30.7 2 42.69 5.88a8 8 0 0 1 2.59 13.77c-23.35 19-38.4 42.54-45.47 70.75a2.77 2.77 0 0 1-4.22 1.65zM256 432a175.12 175.12 0 0 1-65.7-12.72 4 4 0 0 1-2.4-4.46c.4-2.05.84-3.92 1.23-5.48 7.12-28.43 24.76-52 51-68.18 23.29-14.35 53-22.25 83.52-22.25 31.16 0 60 7.58 83.48 21.91a2.72 2.72 0 0 1 .91 3.67A176.1 176.1 0 0 1 256 432z"},child:[]},{tag:"path",attr:{d:"M161 295.28a47.6 47.6 0 0 1-5.48-.62 47.6 47.6 0 0 0 5.48.62zm-26.36-117.15a55.62 55.62 0 0 0-14 10.82 54.49 54.49 0 0 0-7.19 9.56 54.49 54.49 0 0 1 7.19-9.56 55.62 55.62 0 0 1 14-10.82zm81.53 79.76a71.58 71.58 0 0 0 6-23.84c.15-2.15.2-4.27.15-6.38q.08 3.15-.15 6.38a71.58 71.58 0 0 1-6 23.84zm-81.53-79.76a56.84 56.84 0 0 1 8.11-3.64 56.84 56.84 0 0 0-8.11 3.64zm15.57 115.3a53.54 53.54 0 0 1-7.72-2.89 53.54 53.54 0 0 0 7.72 2.89zm-44.43-56.24c2.66 23 16.26 42.63 34.23 52.12-18.01-9.49-31.57-29.16-34.23-52.12zM254.34 219a83.76 83.76 0 0 0 22 51.32 70.76 70.76 0 0 0 22.07 16.12 70.76 70.76 0 0 1-22.07-16.12 83.76 83.76 0 0 1-22-51.32q-.27-3.88-.18-7.68-.09 3.75.18 7.68zm50.16 69.82a63.47 63.47 0 0 1-6.1-2.43 63.47 63.47 0 0 0 6.1 2.43zm-48.57-92.28a66.46 66.46 0 0 1 16.29-31.21 66.46 66.46 0 0 0-16.29 31.21zM375 165.46a68.15 68.15 0 0 1 18 42.14 68.15 68.15 0 0 0-18-42.14 66.69 66.69 0 0 0-26.27-17.2 66.69 66.69 0 0 1 26.27 17.2zM393 219a86.19 86.19 0 0 1-8.2 31 86.19 86.19 0 0 0 8.2-31zm-138.84-7.73a75.62 75.62 0 0 1 1.06-11.14 75.62 75.62 0 0 0-1.06 11.14zm129.03 41.89zm-176.31-64.11a57.86 57.86 0 0 1 15.41 38.62 57.86 57.86 0 0 0-15.41-38.62 57 57 0 0 0-30.78-17 57 57 0 0 1 30.78 17zM190 288a54.21 54.21 0 0 1-10 4.65 54.21 54.21 0 0 0 10-4.65zm-84.51-63.55a59.87 59.87 0 0 1 5.2-20.64 59.87 59.87 0 0 0-5.2 20.64zm89.19 60.43C193.17 286 191.61 287 190 288c1.61-1 3.17-2 4.68-3.12zm21.49-26.99a69.49 69.49 0 0 1-5.73 10.42 69.49 69.49 0 0 0 5.73-10.42zm-105.48-54.08a56.76 56.76 0 0 1 2.78-5.3 56.76 56.76 0 0 0-2.78 5.3zm83.99 81.07a65.39 65.39 0 0 0 15.76-16.57 65.39 65.39 0 0 1-15.76 16.57z"},child:[]}]})(e)}function Gve(e){return hm({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M73 25v238h366V25H283v16h140v192H89V41h140V25H73zm174 0v16h18V25h-18zM107 59v156h298V59H107zM71.03 281l-43.5 174H484.5L441 281h-29.9l20 96h-99.6l16 64H163.8l20-64H80.93l19.97-96H71.03zm48.27 0l-2.9 14H147l2.3-14h-30zm48.4 0l-2.3 14h30.7l1.7-14h-30.1zm48.2 0l-1.7 14H247v-14h-31.1zm49.1 0v14h32.8l-1.7-14H265zm49.2 0l1.7 14h30.7l-2.3-14h-30.1zm48.5 0l2.3 14h30.6l-2.9-14h-30zm-250 32l-3 14h31.9l2.4-14h-31.3zm49.7 0l-2.4 14h32.1l1.7-14h-31.4zm49.5 0l-1.7 14H247v-14h-35.1zm53.1 0v14h36.8l-1.7-14H265zm53.2 0l1.7 14H352l-2.4-14h-31.4zm49.8 0l2.4 14h31.9l-3-14H368zm-262 32l-2.9 14h33.2l2.3-14H106zm51 0l-2.3 14h33.4l1.7-14H157zm50.9 0l-1.7 14H247v-14h-39.1zm57.1 0v14h40.8l-1.7-14H265zm57.2 0l1.7 14h33.4l-2.3-14h-32.8zm51.2 0l2.3 14h33.2l-2.9-14h-32.6zm-170.8 32l-14.4 46h136.3L313 377H202.6zM28 473v18h456v-18H28z"},child:[]}]})(e)}function qve(e){return hm({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"},child:[]}]})(e)}function Zve(e){return hm({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M248,208H232V96a8,8,0,0,0,0-16H184V48a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16V208H24a8,8,0,0,0,0,16H248a8,8,0,0,0,0-16ZM80,72H96a8,8,0,0,1,0,16H80a8,8,0,0,1,0-16Zm-8,48a8,8,0,0,1,8-8H96a8,8,0,0,1,0,16H80A8,8,0,0,1,72,120Zm64,88H88V160h48Zm8-80H128a8,8,0,0,1,0-16h16a8,8,0,0,1,0,16Zm0-40H128a8,8,0,0,1,0-16h16a8,8,0,0,1,0,16Zm72,120H184V96h32Z"},child:[]}]})(e)}function Kve(e){return hm({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(e)}function Xve(){const[e,t]=j.useState([]);let{eventID:n}=cm();const r=async()=>{const l=await Sve(n);t(l)};return j.useEffect(()=>{r()},[n]),O.jsx("div",{className:"d-flex justify-content-center",children:e.title&&O.jsx("add-to-calendar-button",{buttonsList:!0,hideTextLabelButton:!0,buttonStyle:"round",lightMode:"bodyScheme",options:"'Apple','Google','iCal','Outlook.com','Microsoft 365','Microsoft Teams','Yahoo'",name:e.title,location:e.event_type==="Virtual"?e.virtual_event_link:`${e.event_venue} - ${e.event_venue_address}`,startDate:e.startDate,endDate:e.endDate,startTime:e.startTime,endTime:e.endTime,timeZone:e.time_zone,description:e.description})})}/*!
 *  @preserve
 *
 * ++++++++++++++++++++++++++++++++++++++
 * Add to Calendar TimeZones iCal Library
 * ++++++++++++++++++++++++++++++++++++++
 *
 * Version: 1.8.2
 * Creator: Jens Kuerschner (https://jenskuerschner.de)
 * Project: https://github.com/add2cal/timezones-ical-library
 * License: Apache-2.0
 *
 */const _l={Zulu:["Etc/UTC",0],WET:["",1],"W-SU":["Europe/Moscow",2],Universal:["Etc/UTC",0],UTC:["Etc/UTC",0],UCT:["Etc/UTC",0],Turkey:["Europe/Istanbul",3],Singapore:["Asia/Singapore",4],ROK:["Asia/Seoul",5],ROC:["Asia/Taipei",6],Portugal:["Europe/Lisbon",7],Poland:["Europe/Warsaw",8],PST8PDT:["",9],PRC:["Asia/Shanghai",6],Navajo:["America/Denver",10],NZ:["Pacific/Auckland",11],"NZ-CHAT":["Pacific/Chatham",12],MST7MDT:["",10],MST:["",13],MET:["",14],Libya:["Africa/Tripoli",15],Kwajalein:["Pacific/Kwajalein",16],Japan:["Asia/Tokyo",17],Jamaica:["America/Jamaica",18],Israel:["Asia/Jerusalem",19],Iran:["Asia/Tehran",20],Iceland:["Africa/Abidjan",21],Hongkong:["Asia/Hong_Kong",22],HST:["",23],Greenwich:["Etc/GMT",24],GMT0:["Etc/GMT",24],GMT:["Etc/GMT",24],"GMT-0":["Etc/GMT",24],"GMT+0":["Etc/GMT",24],GB:["Europe/London",25],"GB-Eire":["Europe/London",25],Eire:["Europe/Dublin",26],Egypt:["Africa/Cairo",27],EST5EDT:["",28],EST:["",18],EET:["",29],Cuba:["America/Havana",30],CST6CDT:["",31],CET:["",8],US:{Samoa:["Pacific/Pago_Pago",32],Pacific:["America/Los_Angeles",9],Mountain:["America/Denver",10],Michigan:["America/Detroit",28],"Indiana-Starke":["America/Indiana/Knox",31],Hawaii:["Pacific/Honolulu",23],Eastern:["America/New_York",28],"East-Indiana":["America/Indiana/Indianapolis",28],Central:["America/Chicago",31],Arizona:["America/Phoenix",13],Aleutian:["America/Adak",33],Alaska:["America/Anchorage",34]},Pacific:{Yap:["Pacific/Port_Moresby",35],Wallis:["Pacific/Tarawa",16],Wake:["Pacific/Tarawa",16],Truk:["Pacific/Port_Moresby",35],Tongatapu:["",36],Tarawa:["",16],Tahiti:["",37],Samoa:["Pacific/Pago_Pago",32],Saipan:["Pacific/Guam",38],Rarotonga:["",37],Port_Moresby:["",35],Ponape:["Pacific/Guadalcanal",39],Pohnpei:["Pacific/Guadalcanal",39],Pitcairn:["",40],Palau:["",41],Pago_Pago:["",32],Noumea:["",39],Norfolk:["",42],Niue:["",43],Nauru:["",16],Midway:["Pacific/Pago_Pago",32],Marquesas:["",44],Majuro:["Pacific/Tarawa",16],Kwajalein:["",16],Kosrae:["",39],Kiritimati:["",45],Kanton:["",36],Johnston:["Pacific/Honolulu",23],Honolulu:["",23],Guam:["",38],Guadalcanal:["",39],Gambier:["",46],Galapagos:["",47],Funafuti:["Pacific/Tarawa",16],Fiji:["",16],Fakaofo:["",36],Enderbury:["Pacific/Kanton",36],Efate:["",39],Easter:["",48],Chuuk:["Pacific/Port_Moresby",35],Chatham:["",12],Bougainville:["",39],Auckland:["",11],Apia:["",36]},Mexico:{General:["America/Mexico_City",49],BajaSur:["America/Mazatlan",13],BajaNorte:["America/Tijuana",9]},Indian:{Reunion:["Asia/Dubai",50],Mayotte:["Africa/Nairobi",51],Mauritius:["",50],Maldives:["",52],Mahe:["Asia/Dubai",50],Kerguelen:["Indian/Maldives",52],Comoro:["Africa/Nairobi",51],Cocos:["Asia/Yangon",53],Christmas:["Asia/Bangkok",54],Chagos:["",55],Antananarivo:["Africa/Nairobi",51]},Europe:{Zurich:["",8],Zaporozhye:["Europe/Kyiv",56],Zagreb:["Europe/Belgrade",8],Warsaw:["",8],Volgograd:["",2],Vilnius:["",29],Vienna:["",8],Vatican:["Europe/Rome",8],Vaduz:["Europe/Zurich",8],Uzhgorod:["Europe/Kyiv",56],Ulyanovsk:["",50],Tiraspol:["Europe/Chisinau",57],Tirane:["",8],Tallinn:["",29],Stockholm:["Europe/Berlin",8],Sofia:["",29],Skopje:["Europe/Belgrade",8],Simferopol:["",2],Saratov:["",50],Sarajevo:["Europe/Belgrade",8],San_Marino:["Europe/Rome",8],Samara:["",50],Rome:["",8],Riga:["",29],Prague:["",8],Podgorica:["Europe/Belgrade",8],Paris:["",8],Oslo:["Europe/Berlin",8],Nicosia:["Asia/Nicosia",56],Moscow:["",2],Monaco:["Europe/Paris",8],Minsk:["",3],Mariehamn:["Europe/Helsinki",29],Malta:["",8],Madrid:["",8],Luxembourg:["Europe/Brussels",8],London:["",25],Ljubljana:["Europe/Belgrade",8],Lisbon:["",7],Kyiv:["",56],Kirov:["",2],Kiev:["Europe/Kyiv",56],Kaliningrad:["",15],Jersey:["Europe/London",25],Istanbul:["",3],Isle_of_Man:["Europe/London",25],Helsinki:["",29],Guernsey:["Europe/London",25],Gibraltar:["",8],Dublin:["",26],Copenhagen:["Europe/Berlin",8],Chisinau:["",57],Busingen:["Europe/Zurich",8],Budapest:["",8],Bucharest:["",29],Brussels:["",8],Bratislava:["Europe/Prague",8],Berlin:["",8],Belgrade:["",8],Belfast:["Europe/London",25],Athens:["",29],Astrakhan:["",50],Andorra:["",8],Amsterdam:["Europe/Brussels",8]},Etc:{Zulu:["Etc/UTC",0],Universal:["Etc/UTC",0],UTC:["",0],UCT:["Etc/UTC",0],Greenwich:["Etc/GMT",24],GMT0:["Etc/GMT",24],GMT:["",24],"GMT-9":["",58],"GMT-8":["",59],"GMT-7":["",60],"GMT-6":["",61],"GMT-5":["",62],"GMT-4":["",63],"GMT-3":["",64],"GMT-2":["",65],"GMT-14":["",66],"GMT-13":["",67],"GMT-12":["",68],"GMT-11":["",69],"GMT-10":["",70],"GMT-1":["",71],"GMT-0":["Etc/GMT",24],"GMT+9":["",72],"GMT+8":["",73],"GMT+7":["",74],"GMT+6":["",47],"GMT+5":["",75],"GMT+4":["",76],"GMT+3":["",77],"GMT+2":["",78],"GMT+12":["",79],"GMT+11":["",80],"GMT+10":["",81],"GMT+1":["",82],"GMT+0":["Etc/GMT",24]},Chile:{EasterIsland:["Pacific/Easter",48],Continental:["America/Santiago",83]},Canada:{Yukon:["America/Whitehorse",13],Saskatchewan:["America/Regina",49],Pacific:["America/Vancouver",9],Newfoundland:["America/St_Johns",84],Mountain:["America/Edmonton",10],Eastern:["America/Toronto",28],Central:["America/Winnipeg",31],Atlantic:["America/Halifax",85]},Brazil:{West:["America/Manaus",86],East:["America/Sao_Paulo",87],DeNoronha:["America/Noronha",88],Acre:["America/Rio_Branco",89]},Australia:{Yancowinna:["Australia/Broken_Hill",90],West:["Australia/Perth",91],Victoria:["Australia/Melbourne",92],Tasmania:["Australia/Hobart",93],Sydney:["",92],South:["Australia/Adelaide",90],Queensland:["Australia/Brisbane",94],Perth:["",91],North:["Australia/Darwin",95],NSW:["Australia/Sydney",92],Melbourne:["",92],Lord_Howe:["",96],Lindeman:["",94],LHI:["Australia/Lord_Howe",96],Hobart:["",93],Eucla:["",97],Darwin:["",95],Currie:["Australia/Hobart",93],Canberra:["Australia/Sydney",92],Broken_Hill:["",90],Brisbane:["",94],Adelaide:["",90],ACT:["Australia/Sydney",92]},Atlantic:{Stanley:["",77],St_Helena:["Africa/Abidjan",21],South_Georgia:["",78],Reykjavik:["Africa/Abidjan",21],Madeira:["",1],Jan_Mayen:["Europe/Berlin",8],Faroe:["",1],Faeroe:["Atlantic/Faroe",1],Cape_Verde:["",98],Canary:["",1],Bermuda:["",85],Azores:["",99]},Asia:{Yerevan:["",50],Yekaterinburg:["",52],Yangon:["",53],Yakutsk:["",41],Vladivostok:["",35],Vientiane:["Asia/Bangkok",54],"Ust-Nera":["",35],Urumqi:["",55],Ulan_Bator:["Asia/Ulaanbaatar",4],Ulaanbaatar:["",4],Ujung_Pandang:["Asia/Makassar",100],Tomsk:["",54],Tokyo:["",17],Thimphu:["",55],Thimbu:["Asia/Thimphu",55],Tel_Aviv:["Asia/Jerusalem",19],Tehran:["",20],Tbilisi:["",50],Tashkent:["",52],Taipei:["",6],Srednekolymsk:["",39],Singapore:["",4],Shanghai:["",6],Seoul:["",5],Samarkand:["",52],Sakhalin:["",39],Saigon:["Asia/Ho_Chi_Minh",54],Riyadh:["",3],Rangoon:["Asia/Yangon",53],Qyzylorda:["",52],Qostanay:["",52],Qatar:["",3],Pyongyang:["",5],Pontianak:["",101],Phnom_Penh:["Asia/Bangkok",54],Oral:["",52],Omsk:["",55],Novosibirsk:["",54],Novokuznetsk:["",54],Nicosia:["",56],Muscat:["Asia/Dubai",50],Manila:["",102],Makassar:["",100],Magadan:["",39],Macau:["",6],Macao:["Asia/Macau",6],Kuwait:["Asia/Riyadh",3],Kuching:["",4],Kuala_Lumpur:["Asia/Singapore",4],Krasnoyarsk:["",54],Kolkata:["",103],Khandyga:["",41],Katmandu:["Asia/Kathmandu",104],Kathmandu:["",104],Kashgar:["Asia/Urumqi",55],Karachi:["",105],Kamchatka:["",16],Kabul:["",106],Jerusalem:["",19],Jayapura:["",107],Jakarta:["",101],Istanbul:["Europe/Istanbul",3],Irkutsk:["",4],Hovd:["",54],Hong_Kong:["",22],Ho_Chi_Minh:["",54],Hebron:["",108],Harbin:["Asia/Shanghai",6],Gaza:["",108],Famagusta:["",29],Dushanbe:["",52],Dubai:["",50],Dili:["",41],Dhaka:["",55],Damascus:["",3],Dacca:["Asia/Dhaka",55],Colombo:["",109],Chungking:["Asia/Shanghai",6],Chongqing:["Asia/Shanghai",6],Choibalsan:["",4],Chita:["",41],Calcutta:["Asia/Kolkata",103],Brunei:["Asia/Kuching",4],Bishkek:["",55],Beirut:["",110],Barnaul:["",54],Bangkok:["",54],Baku:["",50],Bahrain:["Asia/Qatar",3],Baghdad:["",3],Atyrau:["",52],Ashkhabad:["Asia/Ashgabat",52],Ashgabat:["",52],Aqtobe:["",52],Aqtau:["",52],Anadyr:["",16],Amman:["",3],Almaty:["",52],Aden:["Asia/Riyadh",3]},Arctic:{Longyearbyen:["Europe/Berlin",8]},Antarctica:{Vostok:["",52],Troll:["",111],Syowa:["Asia/Riyadh",3],South_Pole:["Pacific/Auckland",11],Rothera:["",87],Palmer:["",77],McMurdo:["Pacific/Auckland",11],Mawson:["",52],Macquarie:["",92],DumontDUrville:["Pacific/Port_Moresby",35],Davis:["",54],Casey:["",4]},America:{Yellowknife:["America/Edmonton",10],Yakutat:["",34],Winnipeg:["",31],Whitehorse:["",13],Virgin:["America/Puerto_Rico",112],Vancouver:["",9],Tortola:["America/Puerto_Rico",112],Toronto:["",28],Tijuana:["",9],Thunder_Bay:["America/Toronto",28],Thule:["",85],Tegucigalpa:["",49],Swift_Current:["",49],St_Vincent:["America/Puerto_Rico",112],St_Thomas:["America/Puerto_Rico",112],St_Lucia:["America/Puerto_Rico",112],St_Kitts:["America/Puerto_Rico",112],St_Johns:["",84],St_Barthelemy:["America/Puerto_Rico",112],Sitka:["",34],Shiprock:["America/Denver",10],Scoresbysund:["",113],Sao_Paulo:["",87],Santo_Domingo:["",112],Santiago:["",83],Santarem:["",87],Santa_Isabel:["America/Tijuana",9],Rosario:["America/Argentina/Cordoba",87],Rio_Branco:["",89],Resolute:["",114],Regina:["",49],Recife:["",87],Rankin_Inlet:["",31],Rainy_River:["America/Winnipeg",31],Punta_Arenas:["",87],Puerto_Rico:["",112],Porto_Velho:["",86],Porto_Acre:["America/Rio_Branco",89],Port_of_Spain:["America/Puerto_Rico",112],"Port-au-Prince":["",28],Phoenix:["",13],Paramaribo:["",77],Pangnirtung:["America/Iqaluit",28],Panama:["",18],Ojinaga:["",31],Nuuk:["",115],Noronha:["",88],Nome:["",34],Nipigon:["America/Toronto",28],New_York:["",28],Nassau:["America/Toronto",28],Montserrat:["America/Puerto_Rico",112],Montreal:["America/Toronto",28],Montevideo:["",77],Monterrey:["",49],Moncton:["",85],Miquelon:["",116],Mexico_City:["",49],Metlakatla:["",34],Merida:["",49],Menominee:["",31],Mendoza:["America/Argentina/Mendoza",87],Mazatlan:["",13],Matamoros:["",31],Martinique:["",112],Marigot:["America/Puerto_Rico",112],Manaus:["",86],Managua:["",49],Maceio:["",87],Lower_Princes:["America/Puerto_Rico",112],Louisville:["America/Kentucky/Louisville",28],Los_Angeles:["",9],Lima:["",75],La_Paz:["",86],Kralendijk:["America/Puerto_Rico",112],Knox_IN:["America/Indiana/Knox",31],Juneau:["",34],Jujuy:["America/Argentina/Jujuy",87],Jamaica:["",18],Iqaluit:["",28],Inuvik:["",10],Indianapolis:["America/Indiana/Indianapolis",28],Hermosillo:["",13],Havana:["",30],Halifax:["",85],Guyana:["",76],Guayaquil:["",75],Guatemala:["",49],Guadeloupe:["America/Puerto_Rico",112],Grenada:["America/Puerto_Rico",112],Grand_Turk:["",117],Goose_Bay:["",118],Godthab:["America/Nuuk",115],Glace_Bay:["",85],Fortaleza:["",87],Fort_Wayne:["America/Indiana/Indianapolis",28],Fort_Nelson:["",13],Ensenada:["America/Tijuana",9],El_Salvador:["",49],Eirunepe:["",89],Edmonton:["",10],Dominica:["America/Puerto_Rico",112],Detroit:["",28],Denver:["",10],Dawson_Creek:["",13],Dawson:["",13],Danmarkshavn:["",21],Curacao:["America/Puerto_Rico",112],Cuiaba:["",86],Creston:["America/Phoenix",13],Costa_Rica:["",49],Cordoba:["America/Argentina/Cordoba",87],Coral_Harbour:["America/Panama",18],Ciudad_Juarez:["",10],Chihuahua:["",49],Chicago:["",31],Cayman:["America/Panama",18],Cayenne:["",77],Catamarca:["America/Argentina/Catamarca",87],Caracas:["",76],Cancun:["",18],Campo_Grande:["",86],Cambridge_Bay:["",10],Buenos_Aires:["America/Argentina/Buenos_Aires",87],Boise:["",10],Bogota:["",75],Boa_Vista:["",86],"Blanc-Sablon":["America/Puerto_Rico",112],Belize:["",49],Belem:["",87],Barbados:["",112],Bahia_Banderas:["",49],Bahia:["",87],Atka:["America/Adak",33],Atikokan:["America/Panama",18],Asuncion:["",119],Aruba:["America/Puerto_Rico",112],Araguaina:["",87],Antigua:["America/Puerto_Rico",112],Anguilla:["America/Puerto_Rico",112],Anchorage:["",34],Adak:["",33],North_Dakota:{New_Salem:["",31],Center:["",31],Beulah:["",31]},Kentucky:{Monticello:["",28],Louisville:["",28]},Indiana:{Winamac:["",117],Vincennes:["",28],Vevay:["",28],Tell_City:["",31],Petersburg:["",28],Marengo:["",28],Knox:["",31],Indianapolis:["",28]},Argentina:{Ushuaia:["",87],Tucuman:["",87],San_Luis:["",87],San_Juan:["",87],Salta:["",87],Rio_Gallegos:["",87],Mendoza:["",87],La_Rioja:["",87],Jujuy:["",87],Cordoba:["",87],ComodRivadavia:["America/Argentina/Catamarca",87],Catamarca:["",87],Buenos_Aires:["",87]}},Africa:{Windhoek:["",120],Tunis:["",121],Tripoli:["",15],Timbuktu:["Africa/Abidjan",21],Sao_Tome:["",21],"Porto-Novo":["Africa/Lagos",122],Ouagadougou:["Africa/Abidjan",21],Nouakchott:["Africa/Abidjan",21],Niamey:["Africa/Lagos",122],Ndjamena:["",122],Nairobi:["",51],Monrovia:["",21],Mogadishu:["Africa/Nairobi",51],Mbabane:["Africa/Johannesburg",123],Maseru:["Africa/Johannesburg",123],Maputo:["",120],Malabo:["Africa/Lagos",122],Lusaka:["Africa/Maputo",120],Lubumbashi:["Africa/Maputo",120],Luanda:["Africa/Lagos",122],Lome:["Africa/Abidjan",21],Libreville:["Africa/Lagos",122],Lagos:["",122],Kinshasa:["Africa/Lagos",122],Kigali:["Africa/Maputo",120],Khartoum:["",120],Kampala:["Africa/Nairobi",51],Juba:["",120],Johannesburg:["",123],Harare:["Africa/Maputo",120],Gaborone:["Africa/Maputo",120],Freetown:["Africa/Abidjan",21],El_Aaiun:["",124],Douala:["Africa/Lagos",122],Djibouti:["Africa/Nairobi",51],Dar_es_Salaam:["Africa/Nairobi",51],Dakar:["Africa/Abidjan",21],Conakry:["Africa/Abidjan",21],Ceuta:["",8],Casablanca:["",124],Cairo:["",27],Bujumbura:["Africa/Maputo",120],Brazzaville:["Africa/Lagos",122],Blantyre:["Africa/Maputo",120],Bissau:["",21],Banjul:["Africa/Abidjan",21],Bangui:["Africa/Lagos",122],Bamako:["Africa/Abidjan",21],Asmera:["Africa/Nairobi",51],Asmara:["Africa/Nairobi",51],Algiers:["",121],Addis_Ababa:["Africa/Nairobi",51],Accra:["Africa/Abidjan",21],Abidjan:["",21]}},Q3=["20240205T192835Z<n><bs><n><tz>UTC<n><of>+0000<n><ot>+0000<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bd><n><tz>WEST<n><of>+0000<n><ot>+0100<n><s>19700329T010000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU<n><ed><n><bs><n><tz>WET<n><of>+0100<n><ot>+0000<n><s>19701025T020000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU<n><es><n>","20240205T192834Z<n><bs><n><tz>MSK<n><of>+0300<n><ot>+0300<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>+03<n><of>+0300<n><ot>+0300<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>+08<n><of>+0800<n><ot>+0800<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>KST<n><of>+0900<n><ot>+0900<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>CST<n><of>+0800<n><ot>+0800<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>WET<n><of>+0100<n><ot>+0000<n><s>19701025T020000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU<n><es><n><bd><n><tz>WEST<n><of>+0000<n><ot>+0100<n><s>19700329T010000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU<n><ed><n>","20240205T192834Z<n><bd><n><tz>CEST<n><of>+0100<n><ot>+0200<n><s>19700329T020000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU<n><ed><n><bs><n><tz>CET<n><of>+0200<n><ot>+0100<n><s>19701025T030000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU<n><es><n>","20240205T192834Z<n><bd><n><tz>PDT<n><of>-0800<n><ot>-0700<n><s>19700308T020000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=2SU<n><ed><n><bs><n><tz>PST<n><of>-0700<n><ot>-0800<n><s>19701101T020000<n><r>FREQ=YEARLY;BYMONTH=11;BYDAY=1SU<n><es><n>","20240205T192834Z<n><bd><n><tz>MDT<n><of>-0700<n><ot>-0600<n><s>19700308T020000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=2SU<n><ed><n><bs><n><tz>MST<n><of>-0600<n><ot>-0700<n><s>19701101T020000<n><r>FREQ=YEARLY;BYMONTH=11;BYDAY=1SU<n><es><n>","20240205T192834Z<n><bd><n><tz>NZDT<n><of>+1200<n><ot>+1300<n><s>19700927T020000<n><r>FREQ=YEARLY;BYMONTH=9;BYDAY=-1SU<n><ed><n><bs><n><tz>NZST<n><of>+1300<n><ot>+1200<n><s>19700405T030000<n><r>FREQ=YEARLY;BYMONTH=4;BYDAY=1SU<n><es><n>","20240205T192834Z<n><bd><n><tz>+1345<n><of>+1245<n><ot>+1345<n><s>19700927T024500<n><r>FREQ=YEARLY;BYMONTH=9;BYDAY=-1SU<n><ed><n><bs><n><tz>+1245<n><of>+1345<n><ot>+1245<n><s>19700405T034500<n><r>FREQ=YEARLY;BYMONTH=4;BYDAY=1SU<n><es><n>","20240205T192834Z<n><bs><n><tz>MST<n><of>-0700<n><ot>-0700<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bd><n><tz>MEST<n><of>+0100<n><ot>+0200<n><s>19700329T020000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU<n><ed><n><bs><n><tz>MET<n><of>+0200<n><ot>+0100<n><s>19701025T030000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU<n><es><n>","20240205T192834Z<n><bs><n><tz>EET<n><of>+0200<n><ot>+0200<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>+12<n><of>+1200<n><ot>+1200<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>JST<n><of>+0900<n><ot>+0900<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>EST<n><of>-0500<n><ot>-0500<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bd><n><tz>IDT<n><of>+0200<n><ot>+0300<n><s>19700327T020000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=-1FR<n><ed><n><bs><n><tz>IST<n><of>+0300<n><ot>+0200<n><s>19701025T020000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU<n><es><n>","20240205T192834Z<n><bs><n><tz>+0330<n><of>+0330<n><ot>+0330<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>GMT<n><of>+0000<n><ot>+0000<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>HKT<n><of>+0800<n><ot>+0800<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>HST<n><of>-1000<n><ot>-1000<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>GMT<n><of>+0000<n><ot>+0000<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bd><n><tz>BST<n><of>+0000<n><ot>+0100<n><s>19700329T010000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU<n><ed><n><bs><n><tz>GMT<n><of>+0100<n><ot>+0000<n><s>19701025T020000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU<n><es><n>","20240205T192834Z<n><bs><n><tz>IST<n><of>+0000<n><ot>+0100<n><s>19700329T010000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU<n><es><n><bd><n><tz>GMT<n><of>+0100<n><ot>+0000<n><s>19701025T020000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU<n><ed><n>","20240205T192834Z<n><bd><n><tz>EEST<n><of>+0200<n><ot>+0300<n><s>19700424T000000<n><r>FREQ=YEARLY;BYMONTH=4;BYDAY=-1FR<n><ed><n><bs><n><tz>EET<n><of>+0300<n><ot>+0200<n><s>19701030T000000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=-1FR<n><es><n>","20240205T192834Z<n><bd><n><tz>EDT<n><of>-0500<n><ot>-0400<n><s>19700308T020000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=2SU<n><ed><n><bs><n><tz>EST<n><of>-0400<n><ot>-0500<n><s>19701101T020000<n><r>FREQ=YEARLY;BYMONTH=11;BYDAY=1SU<n><es><n>","20240205T192834Z<n><bd><n><tz>EEST<n><of>+0200<n><ot>+0300<n><s>19700329T030000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU<n><ed><n><bs><n><tz>EET<n><of>+0300<n><ot>+0200<n><s>19701025T040000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU<n><es><n>","20240205T192834Z<n><bs><n><tz>CST<n><of>-0400<n><ot>-0500<n><s>19701101T010000<n><r>FREQ=YEARLY;BYMONTH=11;BYDAY=1SU<n><es><n><bd><n><tz>CDT<n><of>-0500<n><ot>-0400<n><s>19700308T000000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=2SU<n><ed><n>","20240205T192834Z<n><bd><n><tz>CDT<n><of>-0600<n><ot>-0500<n><s>19700308T020000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=2SU<n><ed><n><bs><n><tz>CST<n><of>-0500<n><ot>-0600<n><s>19701101T020000<n><r>FREQ=YEARLY;BYMONTH=11;BYDAY=1SU<n><es><n>","20240205T192834Z<n><bs><n><tz>SST<n><of>-1100<n><ot>-1100<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bd><n><tz>HDT<n><of>-1000<n><ot>-0900<n><s>19700308T020000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=2SU<n><ed><n><bs><n><tz>HST<n><of>-0900<n><ot>-1000<n><s>19701101T020000<n><r>FREQ=YEARLY;BYMONTH=11;BYDAY=1SU<n><es><n>","20240205T192834Z<n><bd><n><tz>AKDT<n><of>-0900<n><ot>-0800<n><s>19700308T020000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=2SU<n><ed><n><bs><n><tz>AKST<n><of>-0800<n><ot>-0900<n><s>19701101T020000<n><r>FREQ=YEARLY;BYMONTH=11;BYDAY=1SU<n><es><n>","20240205T192834Z<n><bs><n><tz>+10<n><of>+1000<n><ot>+1000<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>+13<n><of>+1300<n><ot>+1300<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>-10<n><of>-1000<n><ot>-1000<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>ChST<n><of>+1000<n><ot>+1000<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>+11<n><of>+1100<n><ot>+1100<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>-08<n><of>-0800<n><ot>-0800<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>+09<n><of>+0900<n><ot>+0900<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bd><n><tz>+12<n><of>+1100<n><ot>+1200<n><s>19701004T020000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=1SU<n><ed><n><bs><n><tz>+11<n><of>+1200<n><ot>+1100<n><s>19700405T030000<n><r>FREQ=YEARLY;BYMONTH=4;BYDAY=1SU<n><es><n>","20240205T192834Z<n><bs><n><tz>-11<n><of>-1100<n><ot>-1100<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>-0930<n><of>-0930<n><ot>-0930<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>+14<n><of>+1400<n><ot>+1400<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>-09<n><of>-0900<n><ot>-0900<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>-06<n><of>-0600<n><ot>-0600<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>-06<n><of>-0500<n><ot>-0600<n><s>19700404T220000<n><r>FREQ=YEARLY;BYMONTH=4;BYDAY=1SA<n><es><n><bd><n><tz>-05<n><of>-0600<n><ot>-0500<n><s>19700905T220000<n><r>FREQ=YEARLY;BYMONTH=9;BYDAY=1SA<n><ed><n>","20240205T192834Z<n><bs><n><tz>CST<n><of>-0600<n><ot>-0600<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>+04<n><of>+0400<n><ot>+0400<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>EAT<n><of>+0300<n><ot>+0300<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>+05<n><of>+0500<n><ot>+0500<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>+0630<n><of>+0630<n><ot>+0630<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>+07<n><of>+0700<n><ot>+0700<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>+06<n><of>+0600<n><ot>+0600<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>EET<n><of>+0300<n><ot>+0200<n><s>19701025T040000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU<n><es><n><bd><n><tz>EEST<n><of>+0200<n><ot>+0300<n><s>19700329T030000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU<n><ed><n>","20240205T192834Z<n><bd><n><tz>EEST<n><of>+0200<n><ot>+0300<n><s>19700329T020000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU<n><ed><n><bs><n><tz>EET<n><of>+0300<n><ot>+0200<n><s>19701025T030000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU<n><es><n>","20240205T192835Z<n><bs><n><tz>+09<n><of>+0900<n><ot>+0900<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>+08<n><of>+0800<n><ot>+0800<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>+07<n><of>+0700<n><ot>+0700<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>+06<n><of>+0600<n><ot>+0600<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>+05<n><of>+0500<n><ot>+0500<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>+04<n><of>+0400<n><ot>+0400<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>+03<n><of>+0300<n><ot>+0300<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>+02<n><of>+0200<n><ot>+0200<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>+14<n><of>+1400<n><ot>+1400<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>+13<n><of>+1300<n><ot>+1300<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>+12<n><of>+1200<n><ot>+1200<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>+11<n><of>+1100<n><ot>+1100<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>+10<n><of>+1000<n><ot>+1000<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>+01<n><of>+0100<n><ot>+0100<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>-09<n><of>-0900<n><ot>-0900<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>-08<n><of>-0800<n><ot>-0800<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>-07<n><of>-0700<n><ot>-0700<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>-05<n><of>-0500<n><ot>-0500<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>-04<n><of>-0400<n><ot>-0400<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>-03<n><of>-0300<n><ot>-0300<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>-02<n><of>-0200<n><ot>-0200<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>-12<n><of>-1200<n><ot>-1200<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>-11<n><of>-1100<n><ot>-1100<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>-10<n><of>-1000<n><ot>-1000<n><s>19700101T000000<n><es><n>","20240205T192835Z<n><bs><n><tz>-01<n><of>-0100<n><ot>-0100<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>-04<n><of>-0300<n><ot>-0400<n><s>19700405T000000<n><r>FREQ=YEARLY;BYMONTH=4;BYDAY=1SU<n><es><n><bd><n><tz>-03<n><of>-0400<n><ot>-0300<n><s>19700906T000000<n><r>FREQ=YEARLY;BYMONTH=9;BYDAY=1SU<n><ed><n>","20240205T192834Z<n><bs><n><tz>NST<n><of>-0230<n><ot>-0330<n><s>19701101T020000<n><r>FREQ=YEARLY;BYMONTH=11;BYDAY=1SU<n><es><n><bd><n><tz>NDT<n><of>-0330<n><ot>-0230<n><s>19700308T020000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=2SU<n><ed><n>","20240205T192834Z<n><bd><n><tz>ADT<n><of>-0400<n><ot>-0300<n><s>19700308T020000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=2SU<n><ed><n><bs><n><tz>AST<n><of>-0300<n><ot>-0400<n><s>19701101T020000<n><r>FREQ=YEARLY;BYMONTH=11;BYDAY=1SU<n><es><n>","20240205T192834Z<n><bs><n><tz>-04<n><of>-0400<n><ot>-0400<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>-03<n><of>-0300<n><ot>-0300<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>-02<n><of>-0200<n><ot>-0200<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>-05<n><of>-0500<n><ot>-0500<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>ACST<n><of>+1030<n><ot>+0930<n><s>19700405T030000<n><r>FREQ=YEARLY;BYMONTH=4;BYDAY=1SU<n><es><n><bd><n><tz>ACDT<n><of>+0930<n><ot>+1030<n><s>19701004T020000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=1SU<n><ed><n>","20240205T192834Z<n><bs><n><tz>AWST<n><of>+0800<n><ot>+0800<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>AEST<n><of>+1100<n><ot>+1000<n><s>19700405T030000<n><r>FREQ=YEARLY;BYMONTH=4;BYDAY=1SU<n><es><n><bd><n><tz>AEDT<n><of>+1000<n><ot>+1100<n><s>19701004T020000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=1SU<n><ed><n>","20240205T192834Z<n><bd><n><tz>AEDT<n><of>+1000<n><ot>+1100<n><s>19701004T020000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=1SU<n><ed><n><bs><n><tz>AEST<n><of>+1100<n><ot>+1000<n><s>19700405T030000<n><r>FREQ=YEARLY;BYMONTH=4;BYDAY=1SU<n><es><n>","20240205T192834Z<n><bs><n><tz>AEST<n><of>+1000<n><ot>+1000<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>ACST<n><of>+0930<n><ot>+0930<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>+1030<n><of>+1100<n><ot>+1030<n><s>19700405T020000<n><r>FREQ=YEARLY;BYMONTH=4;BYDAY=1SU<n><es><n><bd><n><tz>+11<n><of>+1030<n><ot>+1100<n><s>19701004T020000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=1SU<n><ed><n>","20240205T192834Z<n><bs><n><tz>+0845<n><of>+0845<n><ot>+0845<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>-01<n><of>-0100<n><ot>-0100<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bd><n><tz>+00<n><of>-0100<n><ot>+0000<n><s>19700329T000000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU<n><ed><n><bs><n><tz>-01<n><of>+0000<n><ot>-0100<n><s>19701025T010000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU<n><es><n>","20240205T192834Z<n><bs><n><tz>WITA<n><of>+0800<n><ot>+0800<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>WIB<n><of>+0700<n><ot>+0700<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>PST<n><of>+0800<n><ot>+0800<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>IST<n><of>+0530<n><ot>+0530<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>+0545<n><of>+0545<n><ot>+0545<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>PKT<n><of>+0500<n><ot>+0500<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>+0430<n><of>+0430<n><ot>+0430<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>WIT<n><of>+0900<n><ot>+0900<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bd><n><tz>EEST<n><of>+0200<n><ot>+0300<n><s>19700328T020000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=-1SA<n><ed><n><bs><n><tz>EET<n><of>+0300<n><ot>+0200<n><s>19701024T020000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=-1SA<n><es><n>","20240205T192834Z<n><bs><n><tz>+0530<n><of>+0530<n><ot>+0530<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bd><n><tz>EEST<n><of>+0200<n><ot>+0300<n><s>19700329T000000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU<n><ed><n><bs><n><tz>EET<n><of>+0300<n><ot>+0200<n><s>19701025T000000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU<n><es><n>","20240205T192834Z<n><bd><n><tz>+02<n><of>+0000<n><ot>+0200<n><s>19700329T010000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU<n><ed><n><bs><n><tz>+00<n><of>+0200<n><ot>+0000<n><s>19701025T030000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU<n><es><n>","20240205T192834Z<n><bs><n><tz>AST<n><of>-0400<n><ot>-0400<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>-02<n><of>-0100<n><ot>-0200<n><s>19701025T000000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU<n><es><n><bd><n><tz>-01<n><of>-0200<n><ot>-0100<n><s>19700328T230000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=-1SA<n><ed><n>","20240205T192834Z<n><bs><n><tz>CST<n><of>-0500<n><ot>-0600<n><s>19701101T020000<n><r>FREQ=YEARLY;BYMONTH=11;BYDAY=1SU<n><es><n><bd><n><tz>CDT<n><of>-0600<n><ot>-0500<n><s>19700308T020000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=2SU<n><ed><n>","20240205T192834Z<n><bd><n><tz>-01<n><of>-0200<n><ot>-0100<n><s>19700328T230000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=-1SA<n><ed><n><bs><n><tz>-02<n><of>-0100<n><ot>-0200<n><s>19701025T000000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU<n><es><n>","20240205T192834Z<n><bd><n><tz>-02<n><of>-0300<n><ot>-0200<n><s>19700308T020000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=2SU<n><ed><n><bs><n><tz>-03<n><of>-0200<n><ot>-0300<n><s>19701101T020000<n><r>FREQ=YEARLY;BYMONTH=11;BYDAY=1SU<n><es><n>","20240205T192834Z<n><bs><n><tz>EST<n><of>-0400<n><ot>-0500<n><s>19701101T020000<n><r>FREQ=YEARLY;BYMONTH=11;BYDAY=1SU<n><es><n><bd><n><tz>EDT<n><of>-0500<n><ot>-0400<n><s>19700308T020000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=2SU<n><ed><n>","20240205T192834Z<n><bs><n><tz>AST<n><of>-0300<n><ot>-0400<n><s>19701101T020000<n><r>FREQ=YEARLY;BYMONTH=11;BYDAY=1SU<n><es><n><bd><n><tz>ADT<n><of>-0400<n><ot>-0300<n><s>19700308T020000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=2SU<n><ed><n>","20240205T192835Z<n><bd><n><tz>-03<n><of>-0400<n><ot>-0300<n><s>19701004T000000<n><r>FREQ=YEARLY;BYMONTH=10;BYDAY=1SU<n><ed><n><bs><n><tz>-04<n><of>-0300<n><ot>-0400<n><s>19700322T000000<n><r>FREQ=YEARLY;BYMONTH=3;BYDAY=4SU<n><es><n>","20240205T192834Z<n><bs><n><tz>CAT<n><of>+0200<n><ot>+0200<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>CET<n><of>+0100<n><ot>+0100<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>WAT<n><of>+0100<n><ot>+0100<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>SAST<n><of>+0200<n><ot>+0200<n><s>19700101T000000<n><es><n>","20240205T192834Z<n><bs><n><tz>+01<n><of>+0100<n><ot>+0100<n><s>19700101T000000<n><es><n>"];function UW(e){const t=e.split("/");return t.length===3&&(!_l[`${t[0]}`]||!_l[`${t[0]}`][`${t[1]}`]||!_l[`${t[0]}`][`${t[1]}`][`${t[2]}`])||t.length===2&&(!_l[`${t[0]}`]||!_l[`${t[0]}`][`${t[1]}`])||t.length===1&&!_l[`${t[0]}`]?(console.error("Given timezone not valid."),""):t.length===3?[_l[`${t[0]}`][`${t[1]}`][`${t[2]}`][0],J3(Q3[_l[`${t[0]}`][`${t[1]}`][`${t[2]}`][1]])]:t.length===2?[_l[`${t[0]}`][`${t[1]}`][0],J3(Q3[_l[`${t[0]}`][`${t[1]}`][1]])]:[_l[`${t[0]}`][0],J3(Q3[_l[`${t[0]}`][1]])]}function J3(e){const t={"<br>":"<n>","TZNAME:":"<tz>","TZOFFSETFROM:":"<of>","TZOFFSETTO:":"<ot>","DTSTART:":"<s>","RRULE:":"<r>","BEGIN:DAYLIGHT":"<bd>","END:DAYLIGHT":"<ed>","BEGIN:STANDARD":"<bs>","END:STANDARD":"<es>"};for(const[n,r]of Object.entries(t))e=e.replaceAll(r,n);return e}function Qve(e,t=!1){const n=UW(e);if(n[1]==null||n[1]=="")return"";const r=function(){return n[0]==""?e:n[0]}(),l="TZID="+r,d=[`BEGIN:VTIMEZONE\r
TZID:`+r+`\r
X-LIC-LOCATION:`+r+`\r
LAST-MODIFIED:`+n[1].replace(/[^\w_\-:,;=+/<br>]/g,"").replace(/<br>/g,`\r
`)+"END:VTIMEZONE",l];return t?JSON.stringify(d):d}function bS(e,t,n){const r=UW(e);if(r[1]==null||r[1]=="")return"";if(!t.match(/^\d{4}-\d{2}-\d{2}$/))return console.error("offset calculation failed: date misspelled [-> YYYY-MM-DD]"),"";if(!n.match(/^\d{2}:\d{2}$/))return console.error("offset calculation failed: time misspelled [-> hh:mm]"),"";if(!r[1].match(/BEGIN:DAYLIGHT/i))return r[1].match(/TZOFFSETTO:([+|-]\d{4})/i)[1];const l=t+"T"+n+":00",d=new Date(l),f=d.getFullYear(),y=d.getMonth()+1,a=d.getDate(),E=d.getHours(),C=r[1].replace(/[^\w_\-:,;=+/<br>]/g,"").split("<br>"),M={1:{},2:{}};let P=0;for(let te=0;te<C.length;te++)if(C[`${te}`].startsWith("TZOFFSETTO")&&(P++,M[`${P}`].offset=C[`${te}`].split(":")[1]),C[`${te}`].startsWith("DTSTART")&&(M[`${P}`].hour=parseInt(C[`${te}`].substr(17,2))),C[`${te}`].startsWith("RRULE")){let ie=C[`${te}`].split(";"),ue=parseInt(ie[1].split("=")[1]);M[`${P}`].month=parseInt(ue),M[`${P}`].day=ie[2].split("=")[1]}if(M[1].month>M[2].month&&([M[1],M[2]]=[M[2],M[1]]),y!=M[1].month&&y!=M[2].month)return y<M[1].month||y>M[2].month?M[2].offset:M[1].offset;const N=function(){return Object.keys(M).find(te=>M[`${te}`].month==y)}(),F=["SU","MO","TU","WE","TH","FR","SA"],$=new Date(f,y,0).getDate();let Z=new Date(f,y-1,1).getDay();const q={SU:{},MO:{},TU:{},WE:{},TH:{},FR:{},SA:{}};for(let te=1;te<=$;te++){const ie=Object.keys(q[F[`${Z}`]]).length+1;q[F[`${Z}`]][`${ie}`]=te,Z++,Z==7&&(Z=0)}const K=function(){if(M[`${N}`].day[0]=="-"){const te=M[`${N}`].day.substr(2,2),ie=Object.keys(q[`${te}`]).length+1-parseInt(M[`${N}`].day[1]);return q[`${te}`][`${ie}`]}else{const te=M[`${N}`].day.substr(1,2);return q[`${te}`][M[`${N}`].day[0]]}}();if(a>K||a==K&&E>=M[`${N}`].hour)return M[`${N}`].offset;const Q=function(){return N==1?2:1}();return M[`${Q}`].offset}let xE=[];function Jve(e=!1){return xE.length==0&&(xE=function(){let t=[];for(const[n,r]of Object.entries(_l))if(typeof r=="object"&&!Array.isArray(r))for(const[l,d]of Object.entries(r))if(typeof d=="object"&&!Array.isArray(d))for(const[f]of Object.entries(d))t.push(n+"/"+l+"/"+f);else t.push(n+"/"+l);else t.push(n);return t}()),e?JSON.stringify(xE):xE}/*!
 *  @preserve
 *
 *  ++++++++++++++++++++++
 *  Add to Calendar Button
 *  ++++++++++++++++++++++
 *
 *  Version: 2.6.13
 *  Creator: Jens Kuerschner (https://jekuer.com)
 *  Project: https://github.com/add2cal/add-to-calendar-button
 *  License: Elastic License 2.0 (ELv2) (https://github.com/add2cal/add-to-calendar-button/blob/main/LICENSE.txt)
 *  Note:    DO NOT REMOVE THE COPYRIGHT NOTICE ABOVE!
 *
 */const VW="2.6.13",$8={default:`:host{width:fit-content;--base-font-size-l:16px;--base-font-size-m:16px;--base-font-size-s:16px;--font:arial,helvetica,sans-serif;--accent-color:#1e90ff;--wrapper-padding:1px;--buttonslist-gap:5px;--btn-background:#f5f5f5;--btn-hover-background:#fff;--btn-border:#d2d2d2;--btn-border-radius:6px;--btn-padding-x:1em;--btn-padding-y:.65em;--btn-font-weight:600;--btn-text:#333;--btn-hover-text:#000;--btn-shadow:rgba(0 0 0 / 10%) 0 4px 10px -2px,rgba(0 0 0 / 15%) 0 2px 2px -1px;--btn-hover-shadow:rgba(0 0 0 / 25%) 0 5px 12px -2px,rgba(0 0 0 / 25%) 0 3px 5px -2px;--btn-active-shadow:rgba(0 0 0 / 30%) 0 6px 13px -2px,rgba(0 0 0 / 25%) 0 4px 5px -2px;--list-background:#f5f5f5;--list-hover-background:#fff;--list-text:#333;--list-font-weight:400;--list-hover-text:#000;--list-close-background:#e5e5e5;--list-close-text:#777;--list-border-radius:6px;--list-padding:.8em;--list-shadow:rgba(0 0 0 / 20%) 0 4px 13px -2px,rgba(0 0 0 / 23%) 0 2px 4px -1px;--list-modal-shadow:rgba(0 0 0 / 50%) 0 4px 30px -3px,rgba(0 0 0 / 30%) 0 2px 8px -2px;--input-border-radius:6px;--input-background:#fff;--status-active-text:#fff;--form-error:#c5372c;--form-success:#338a36;--modal-text:#000;--modal-text-align:left;--modal-text-align-rtl:right;--modal-background:#f5f5f5;--modal-border-radius:6px;--modal-shadow:drop-shadow(3px 6px 25px rgba(0 0 0 / 65%));--modal-btn-bar:#c6c8cd;--modal-btn-background:#f5f5f5;--modal-btn-secondary-background:#e2e1e6;--modal-btn-hover-background:#fff;--modal-btn-border:#d2d2d2;--modal-btn-font-weight:600;--modal-btn-text:#2e2e2e;--modal-btn-hover-text:#161616;--modal-btn-secondary-text:#666567;--modal-btn-shadow:rgba(0 0 0 / 10%) 0 4px 10px -2px,rgba(0 0 0 / 10%) 0 2px 3px -1px;--modal-btn-hover-shadow:rgba(0 0 0 / 25%) 0 5px 13px -2px,rgba(0 0 0 / 20%) 0 3px 5px -2px;--modal-headline-text-align:center;--modal-headline-text-transform:none;--date-btn-text:#1d1d1e;--date-btn-text-secondary:#3a3a3f;--date-btn-cal-day-text:#fff;--date-btn-cal-month-text:#d3d2d7;--date-btn-cal-background:#313132;--date-btn-background:#eae9ed;--date-btn-hover-background:#fff;--date-btn-headline-line-clamp:1;--date-btn-shadow:rgba(0 0 0 / 10%) 0 4px 10px -2px,rgba(0 0 0 / 15%) 0 2px 3px -1px;--date-btn-hover-shadow:rgba(0 0 0 / 20%) 0 5px 12px -2px,rgba(0 0 0 / 20%) 0 3px 4px -2px;--checkmark-background:drop-shadow(0 0 3px #fff);--overlay-background:rgba(20 20 20 / 25%);--overlay-cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23777' width='16' height='16' viewBox='0 0 122.878 122.88'%3E%3Cpath d='M1.426 8.313a4.87 4.87 0 0 1 0-6.886 4.87 4.87 0 0 1 6.886 0l53.127 53.127 53.127-53.127a4.87 4.87 0 0 1 6.887 0 4.87 4.87 0 0 1 0 6.886L68.324 61.439l53.128 53.128a4.87 4.87 0 0 1-6.887 6.886L61.438 68.326 8.312 121.453a4.87 4.87 0 0 1-6.886 0 4.87 4.87 0 0 1 0-6.886l53.127-53.128L1.426 8.313h0z'/%3E%3C/svg%3E") 16 16,crosshair;--icon-ms365-color:#ea3e23;--icon-yahoo-color:#5f01d1;--icon-filter:none}:host(.atcb-dark){--btn-background:#2e2e2e;--btn-hover-background:#373737;--btn-border:#3d3d3d;--btn-text:#dedede;--btn-hover-text:#f1f1f1;--btn-shadow:rgba(255 255 255 / 5%) -3px -3px 30px -1px,rgba(0 0 0 / 40%) 2px 3px 10px -2px,rgba(0 0 0 / 40%) 1px 2px 3px -1px;--btn-hover-shadow:rgba(0 0 0 / 90%) 2px 5px 20px -4px,rgba(0 0 0 / 50%) 1px 2px 6px -2px;--btn-active-shadow:rgba(0 0 0 / 90%) 2px 5px 20px -4px,rgba(0 0 0 / 50%) 1px 2px 6px -2px;--list-background:#2e2e2e;--list-hover-background:#373737;--list-text:#dedede;--list-hover-text:#f1f1f1;--list-close-background:#282828;--list-shadow:rgba(0 0 0 / 60%) 0 4px 20px -2px,rgba(0 0 0 / 40%) 0 2px 4px -1px;--list-modal-shadow:rgba(0 0 0 / 40%) -1px 3px 30px 2px;--modal-text:#f1f1f1;--modal-background:#242424;--modal-shadow:drop-shadow(3px 6px 25px rgba(0 0 0 / 90%));--modal-btn-bar:#38383a;--modal-btn-background:#181819;--modal-btn-secondary-background:#2e2d30;--modal-btn-hover-background:#434246;--modal-btn-border:#434246;--modal-btn-text:#dbdbdb;--modal-btn-hover-text:#fff;--modal-btn-secondary-text:#b8b8b8;--modal-btn-shadow:rgba(255 255 255 / 5%) -2px -2px 10px,rgba(0 0 0 / 40%) 3px 3px 10px -2px,rgba(0 0 0 / 40%) 1px 2px 5px -1px;--input-background:#434246;--status-active-text:#000;--form-error:#db8680;--form-success:#99de9c;--date-btn-text:#ebebf0;--date-btn-text-secondary:#b5b5bd;--date-btn-cal-day-text:#101010;--date-btn-cal-month-text:#3e3e3f;--date-btn-cal-background:#c7c7cd;--date-btn-background:#363636;--date-btn-hover-background:#474747;--date-btn-shadow:rgba(0 0 0 / 60%) 0 0 20px -2px,rgba(0 0 0 / 30%) 1px 2px 3px -1px;--checkmark-background:drop-shadow(0 0 3px #0a0a0a);--overlay-background:rgba(20 20 20 / 60%);--icon-ms365-color:#ea3e23;--icon-yahoo-color:#bebebe;--icon-filter:grayscale(.2)}.atcb-button-wrapper,.atcb-list,.atcb-modal-box{font-size:var(--base-font-size-l)}@media (width <= 991px){.atcb-button-wrapper,.atcb-list,.atcb-modal-box{font-size:var(--base-font-size-m)}}@media (width <= 575px){.atcb-button-wrapper,.atcb-list,.atcb-modal-box{font-size:var(--base-font-size-s)}}.atcb-initialized.atcb-buttons-list{gap:var(--buttonslist-gap)}.atcb-button-wrapper{display:block;padding:var(--wrapper-padding);position:relative}.atcb-button{align-items:center;background-color:var(--btn-background);border:1px solid var(--btn-border);border-radius:var(--btn-border-radius);box-shadow:var(--btn-shadow);box-sizing:content-box;color:var(--btn-text);cursor:pointer;display:flex;font-family:var(--font);font-size:1em;font-weight:var(--btn-font-weight);justify-content:center;line-height:1.5em;margin:.13em;max-width:300px;padding:var(--btn-padding-y) var(--btn-padding-x);position:relative;text-align:center;touch-action:manipulation;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;width:auto;z-index:1}.atcb-button:not(.atcb-no-text,.atcb-modal-style,.atcb-dropoverlay,.atcb-single){min-width:calc(11.6em - 2 * var(--btn-padding-x))}.atcb-button.atcb-no-text{display:flex;place-content:center center;align-items:center;height:3em;width:3em;padding:0}.atcb-rtl .atcb-button{direction:rtl;text-align:right}.atcb-button:focus-visible{outline:2px solid var(--accent-color)}.atcb-button:not([disabled]):focus,.atcb-button:not([disabled]):hover{background-color:var(--btn-hover-background);box-shadow:var(--btn-hover-shadow);color:var(--btn-hover-text);margin:0;padding:calc(var(--btn-padding-y) + .13em) calc(var(--btn-padding-x) + .13em)}.atcb-button.atcb-active:not(.atcb-modal-style,.atcb-dropoverlay){z-index:15000000}.atcb-button.atcb-active:not(.atcb-modal-style,.atcb-dropoverlay),.atcb-button.atcb-single:not([disabled]):focus,.atcb-button.atcb-single:not([disabled]):hover{background-color:var(--btn-hover-background);box-shadow:var(--btn-active-shadow);color:var(--btn-hover-text);margin:0;padding:calc(var(--btn-padding-y) + .13em) calc(var(--btn-padding-x) + .13em)}.atcb-button.atcb-no-text.atcb-active,.atcb-button.atcb-no-text:focus,.atcb-button.atcb-no-text:hover{height:3.26em;width:3.26em;padding:0!important}.atcb-button.atcb-active.atcb-dropoverlay{z-index:14000090}.atcb-icon{flex-grow:0;flex-shrink:0;height:1em;line-height:1em;margin-right:.8em;width:1em}.atcb-rtl .atcb-icon{margin-right:0;margin-left:.8em}.atcb-no-text .atcb-icon{margin-right:0;margin-left:0}.atcb-icon svg{fill:currentcolor;height:100%;width:100%}.atcb-text{overflow-wrap:anywhere}.atcb-dropdown-anchor{bottom:4px;height:1px;width:100%;opacity:0;position:absolute}.atcb-list-wrapper{box-sizing:border-box;font-weight:var(--list-font-weight);padding:0 4px;position:absolute;z-index:14000090}.atcb-list-wrapper.atcb-dropoverlay{z-index:15000000;max-width:max-content}.atcb-list{background-color:var(--list-background);border-radius:0 0 var(--list-border-radius) var(--list-border-radius);box-sizing:border-box;box-shadow:var(--list-shadow);color:var(--list-text);display:block;font-family:var(--font);min-width:100%;position:relative;user-select:none;-webkit-user-select:none;width:fit-content}.atcb-list-item{align-items:center;background-color:var(--list-background);box-sizing:border-box;cursor:pointer;display:flex;font-size:1em;line-height:1.75em;padding:var(--list-padding);text-align:left;touch-action:manipulation;-webkit-tap-highlight-color:transparent}.atcb-rtl .atcb-list-item{direction:rtl;text-align:right}.atcb-list-item:hover{background-color:var(--list-hover-background);color:var(--list-hover-text)}.atcb-list-item:focus-visible{background-color:var(--list-hover-background);color:var(--accent-color);outline:0}.atcb-list-item:last-child{border-radius:0 0 var(--list-border-radius) var(--list-border-radius)}.atcb-dropup .atcb-list-item:last-child{border-radius:0;padding-bottom:calc(var(--list-padding) + .45em)}.atcb-dropoverlay .atcb-list .atcb-list-item:first-child,.atcb-dropup .atcb-list,.atcb-dropup .atcb-list-item:first-child,.atcb-list.atcb-modal .atcb-list-item:first-child{border-radius:var(--list-border-radius) var(--list-border-radius) 0 0}.atcb-dropoverlay .atcb-list .atcb-list-item:only-child,.atcb-list.atcb-modal .atcb-list-item:only-child{border-radius:var(--list-border-radius)}.atcb-list.atcb-generated-button:not(.atcb-modal) .atcb-list-item:first-child{padding-top:calc(var(--list-padding) + .45em)}.atcb-dropoverlay .atcb-list.atcb-generated-button:not(.atcb-modal) .atcb-list-item:first-child,.atcb-dropup .atcb-list.atcb-generated-button:not(.atcb-modal) .atcb-list-item:first-child{padding-top:var(--list-padding)}.atcb-dropoverlay .atcb-list,.atcb-list.atcb-modal{border-radius:var(--list-border-radius)}.atcb-list.atcb-modal{box-shadow:var(--list-modal-shadow)}.atcb-list-item .atcb-icon{margin:0 auto}.atcb-list-item .atcb-icon+.atcb-text{margin-left:.7em;width:100%}.atcb-rtl .atcb-list-item .atcb-icon+.atcb-text{margin-left:0;margin-right:.7em}.atcb-list-item-close{background-color:var(--list-close-background)}.atcb-list-item.atcb-list-item-close:not(:focus-visible){color:var(--list-close-text)}.atcb-list-item-close svg{fill:currentcolor}.atcb-modal{display:block;margin:auto;width:auto;min-width:auto;position:relative;z-index:14000090}.atcb-modal-box{filter:var(--modal-shadow);color:var(--modal-text);cursor:default;box-sizing:border-box;font-family:var(--font);line-height:1.5em;text-align:var(--modal-text-align);user-select:none;-webkit-user-select:none;touch-action:manipulation;width:100%;margin-bottom:20px;-webkit-tap-highlight-color:transparent}@media (width > 575px){.atcb-modal-box{width:32em}}.atcb-modal-box.atcb-rtl{text-align:var(--modal-text-align-rtl);direction:rtl;padding:1.25em 1em 1.25em 2em}.atcb-modal-icon{height:2.5em;width:2.5em;border-radius:100%;background-color:var(--modal-background);padding:1.75em;margin:auto}.atcb-modal-icon svg{fill:currentcolor;height:100%;width:100%}.atcb-modal-headline{background-color:var(--modal-background);border-radius:var(--modal-border-radius) var(--modal-border-radius) 0 0;font-size:1.3em;font-weight:600;line-height:1.5em;padding:1.8em 1.5em 1.3em;text-transform:var(--modal-headline-text-transform);text-align:var(--modal-headline-text-align)}.atcb-modal-icon+.atcb-modal-headline{margin-top:-2.6em;padding-top:2.6em}.atcb-modal-content{background-color:var(--modal-background);font-size:1em;padding:.3em 2em 2.2em}.atcb-modal-content-subevents{margin:auto;width:fit-content}.atcb-modal-icon+.atcb-modal-content{border-radius:var(--modal-border-radius) var(--modal-border-radius) 0 0;margin-top:-2.6em;padding-top:2.6em}@media (width <= 575px){.atcb-modal-headline{padding:1.8em 1em 1em}.atcb-modal-content{padding:.3em 1.5em 1.5em}.atcb-modal-icon+.atcb-modal-content{padding-top:1.8em}}.atcb-modal-buttons{background-color:var(--modal-btn-bar);border-radius:0 0 var(--modal-border-radius) var(--modal-border-radius);box-sizing:border-box;padding:.6em;text-align:center;width:100%;display:flex;justify-content:center;flex-flow:row-reverse wrap;align-items:center}a.atcb-modal-btn,button.atcb-modal-btn{background-color:var(--modal-btn-secondary-background);border:0;border-radius:var(--btn-border-radius);box-shadow:var(--modal-btn-shadow);color:var(--modal-btn-secondary-text);cursor:pointer;display:inline-block;font-family:var(--font);font-size:.9em;font-weight:var(--modal-btn-font-weight);line-height:1em;margin:.625em;padding:1em 1.25em;position:relative;text-align:center;text-decoration:none;touch-action:manipulation;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent}a.atcb-modal-btn.btn-small,button.atcb-modal-btn.btn-small{padding:.6em .8em}a.atcb-modal-btn.atcb-modal-btn-primary,button.atcb-modal-btn.atcb-modal-btn-primary{background-color:var(--modal-btn-background);color:var(--modal-btn-text)}a.atcb-modal-btn.atcb-modal-btn-border,button.atcb-modal-btn.atcb-modal-btn-border{border:1px solid var(--modal-btn-border)}a.atcb-modal-btn:focus-visible,button.atcb-modal-btn:focus-visible{background-color:var(--modal-btn-hover-background);outline:2px solid var(--accent-color)}a.atcb-modal-btn:disabled,button.atcb-button:disabled,button.atcb-modal-btn:disabled,button.atcb-subevent-btn:disabled{cursor:not-allowed;opacity:.75;filter:brightness(95%);border-style:dashed;box-shadow:none}a.atcb-modal-btn:not([disabled]):hover,button.atcb-modal-btn:not([disabled]):hover{background-color:var(--modal-btn-hover-background);box-shadow:var(--modal-btn-hover-shadow);color:var(--modal-btn-hover-text);text-decoration:none}.atcb-subevent-btn{display:flex;align-items:flex-start;cursor:pointer;font-family:var(--font);font-size:1em;box-shadow:var(--date-btn-shadow);background-color:var(--date-btn-background);border:0;border-radius:7px 4px 4px 7px;padding:0;margin:0;touch-action:manipulation;position:relative;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;width:100%}.atcb-subevent-btn:hover{align-items:center}.atcb-subevent-btn:focus,.atcb-subevent-btn:hover{background-color:var(--date-btn-hover-background);box-shadow:var(--date-btn-hover-shadow)}.atcb-subevent-btn:focus-visible{outline:2px solid var(--accent-color)}.atcb-subevent-btn+.atcb-subevent-btn{margin-top:30px}.atcb-date-btn-left{border-radius:4px 0 0 4px;align-self:stretch;background-color:var(--date-btn-cal-background);color:var(--date-btn-hover-background);padding:.7em .8em .8em;width:2.7em;align-items:center;display:flex;flex-direction:column;flex-shrink:0}.atcb-rtl .atcb-date-btn-left{border-radius:0 4px 4px 0}.atcb-subevent-btn:hover .atcb-date-btn-left{opacity:.8}.atcb-date-btn-day{color:var(--date-btn-cal-day-text);font-weight:400;font-size:2em;word-break:keep-all;padding-bottom:.1em}.atcb-initialized[lang=ja] .atcb-date-btn-day,.atcb-initialized[lang=ko] .atcb-date-btn-day,.atcb-initialized[lang=zh] .atcb-date-btn-day{font-size:1.3em}.atcb-date-btn-month{color:var(--date-btn-cal-month-text);font-weight:600;font-size:1em}.atcb-date-btn-right{position:relative;color:var(--date-btn-text);min-width:13.5em;overflow-wrap:anywhere}.atcb-subevent-btn .atcb-date-btn-right{width:100%}.atcb-date-btn-details{opacity:1;padding:.7em .8em;text-align:left}.atcb-rtl .atcb-date-btn-details{text-align:right}.atcb-date-btn-hover{position:absolute;top:0;left:0;width:100%;opacity:0;height:100%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:1em;padding:.4em .7em;box-sizing:border-box}.atcb-subevent-btn:hover .atcb-date-btn-details{opacity:0}.atcb-subevent-btn:hover .atcb-date-btn-hover{opacity:1}.atcb-date-btn-headline{font-weight:600;font-size:.9em;margin-bottom:.5em;overflow:hidden;display:-webkit-box;-webkit-line-clamp:var(--date-btn-headline-line-clamp);-webkit-box-orient:vertical}.atcb-date-btn-content{display:flex;align-items:flex-start;font-size:.8em;color:var(--date-btn-text-secondary)}.atcb-date-btn-content.atcb-date-btn-cancelled{color:var(--form-error);font-weight:700}.atcb-date-btn-content-location{overflow:hidden;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;word-break:break-all}.atcb-date-btn-content-icon{display:inline-block;height:.8em;margin-right:.4em;margin-left:0;width:.9em;flex-shrink:0}.atcb-rtl .atcb-date-btn-content-icon{margin-right:0;margin-left:.4em}.atcb-initialized[lang=ja] .atcb-date-btn-content:not(.atcb-date-btn-content-location) .atcb-date-btn-content-icon,.atcb-initialized[lang=ko] .atcb-date-btn-content:not(.atcb-date-btn-content-location) .atcb-date-btn-content-icon,.atcb-initialized[lang=zh] .atcb-date-btn-content:not(.atcb-date-btn-content-location) .atcb-date-btn-content-icon{margin-top:.15em}.atcb-date-btn-content-icon svg{height:100%;fill:currentcolor;width:100%}.atcb-date-btn-content+.atcb-date-btn-content{margin-top:.3em}.atcb-date-btn-content-text span:not(.atcb-icon-ical){padding-right:.3em;display:inline-block}.atcb-checkmark{display:none}.atcb-saved .atcb-checkmark{box-sizing:content-box;color:var(--btn-text);display:block;position:absolute;top:-.9em;right:-.5em;padding:.5em;border-radius:100%;height:1.2em}.atcb-button.atcb-active:not(.atcb-modal-style,.atcb-dropoverlay) .atcb-checkmark,.atcb-button.atcb-single:focus .atcb-checkmark,.atcb-button.atcb-single:hover .atcb-checkmark{top:-.77em;right:-.37em}.atcb-checkmark svg{height:100%;filter:var(--checkmark-background);width:auto}#atcb-bgoverlay{backdrop-filter:blur(2px);-webkit-backdrop-filter:blur(2px);background-color:var(--overlay-background);border:0;box-sizing:border-box;display:flex;height:calc(100vh + 100px);inset-inline:0;left:0;right:0;top:0;min-height:100%;min-width:100%;overflow-y:auto;padding:20px 20px 130px;position:fixed;width:100vw;z-index:14000000}#atcb-bgoverlay:not(dialog){animation:atcb-bgoverlay-animate .2s ease 0s 1 normal forwards;opacity:0}#atcb-bgoverlay.atcb-no-bg{animation:none;backdrop-filter:none;-webkit-backdrop-filter:none;opacity:1;background-color:transparent}@keyframes atcb-bgoverlay-animate{0%{opacity:0}100%{opacity:1}}#atcb-bgoverlay.atcb-click:hover{cursor:var(--overlay-cursor)}.atcb-icon-outlookcom,.atcb-icon.atcb-icon-ms365{padding-bottom:.05em}.atcb-icon.atcb-icon-apple,.atcb-icon.atcb-icon-ical{padding-bottom:.15em}.atcb-icon.atcb-icon-trigger{padding-bottom:.15em}.atcb-icon.atcb-icon-rsvp{height:1.5em;width:1.5em}.atcb-icon.atcb-icon-apple svg{fill:currentcolor}.atcb-icon.atcb-icon-ical svg{fill:currentcolor}.atcb-icon.atcb-icon-ms365 svg{fill:var(--icon-ms365-color)}.atcb-icon.atcb-icon-yahoo svg{fill:var(--icon-yahoo-color)}.atcb-icon.atcb-icon-google svg,.atcb-icon.atcb-icon-msteams svg,.atcb-icon.atcb-icon-outlookcom svg{filter:var(--icon-filter)}.rsvp-inline-wrapper{filter:none;min-width:100%;margin-bottom:0}.atcb-modal-content.no-headline{border-radius:var(--modal-border-radius) var(--modal-border-radius) 0 0;padding-top:1.8em}.rsvp-inline-wrapper .atcb-modal-content,.rsvp-inline-wrapper .atcb-modal-headline,.rsvp-inline-wrapper.atcb-modal-box{background-color:transparent;border-radius:0;box-sizing:border-box;padding:0;width:100%}.rsvp-inline-wrapper .atcb-modal-headline{padding-bottom:1.5em}.pro{text-align:center}.pro ol,.pro ul{margin:auto;text-align:left;width:fit-content}.pro a:not(.atcb-modal-btn),.pro a:not(.atcb-modal-btn):active,.pro a:not(.atcb-modal-btn):visited{color:var(--modal-btn-text);text-decoration:underline;text-decoration-thickness:2px;text-decoration-color:var(--accent-color)}.pro a:not(.atcb-modal-btn):hover{color:var(--accent-color);text-decoration:none}.pro .pro-share-buttons{display:flex;flex-wrap:wrap;justify-content:center}.pro #rsvp-atcb{display:flex;flex-wrap:wrap;gap:.4em}.pro-form{text-align:left}.pro-form:not(.no-intro){border-top:1px solid var(--modal-btn-border);margin-top:1.5em;padding-top:1.5em}.pro-form.no-intro:not(.no-headline){padding-top:.5em}.pro-field+.pro-field{padding-top:1.3em}.pro-field-type-label+.pro-field-type-radio{padding-top:0}.pro-field-type-checkbox,.pro-field-type-radio div{align-items:center;display:flex}.pro-field-type-checkbox input,.pro-field-type-radio input{cursor:pointer}.pro-field label{display:block;font-size:.9em;opacity:.7}.pro-field-type-checkbox label,.pro-field-type-radio label{cursor:pointer;opacity:.8;padding-left:.3em}.pro-field input[type=email],.pro-field input[type=number],.pro-field input[type=text]{background-color:var(--input-background);border:1px solid var(--modal-btn-border);border-radius:var(--input-border-radius);box-sizing:border-box;caret-color:var(--accent-color);color:var(--modal-text);font-size:.9em;opacity:.8;padding:.7em;transition:all .1s ease-in-out;width:100%}.pro-field input[type=checkbox],.pro-field input[type=radio]{accent-color:var(--accent-color);height:1.2rem;opacity:.8;transition:all .1s ease-in-out;width:1.2em}.pro-field input:disabled,.pro-field input:disabled+label{cursor:not-allowed;opacity:.75;filter:brightness(95%)}.pro-field input:not([disabled]):hover{opacity:1}.pro-field input[type=email]:focus,.pro-field input[type=number]:focus,.pro-field input[type=text]:focus{border-color:var(--accent-color);outline:1px solid var(--accent-color)}.pro-field input[type=checkbox]:focus,.pro-field input[type=radio]:focus{outline-color:var(--accent-color);outline-width:2px}#submit-error{color:var(--form-error);display:none;font-weight:700;padding-top:1.5em;text-align:center}.pro-form.form-error #submit-error{display:block}.pro-field input.error{accent-color:var(--form-error);border:2px solid var(--form-error)}.pro-field input.error+label,.pro-field:has(input.error) label{color:var(--form-error);opacity:1}#rsvp-status-group{border-bottom:1px solid var(--modal-btn-border);font-weight:700;margin-bottom:1.5em;padding-bottom:2em;text-align:center}#rsvp-status-group .pro-field{align-items:center;display:flex;flex-wrap:wrap;gap:1.2em;justify-content:center;margin-top:1em}@media (width <= 575px){#rsvp-status-group .pro-field{flex-direction:column}#rsvp-status-group .pro-field div{width:80%}}#rsvp-status-group .pro-field div{min-width:28%;position:relative}#rsvp-status-group input{opacity:0;position:absolute;top:0;left:0;height:100%;width:100%;margin:0;cursor:pointer}#rsvp-status-group label{align-items:center;border:1px solid var(--modal-btn-text);border-radius:var(--input-border-radius);box-shadow:var(--btn-shadow);color:var(--modal-btn-text);display:flex;flex-direction:column;font-weight:700;text-transform:uppercase;justify-content:center;opacity:.6;padding:.8em;transition:all .1s ease-in-out;width:100%}#rsvp-status-group label.status-confirmed{border-color:var(--form-success);color:var(--form-success)}#rsvp-status-group label.status-declined{border-color:var(--form-error);color:var(--form-error)}#rsvp-status-group input:checked+label{background-color:var(--modal-text);box-shadow:var(--btn-hover-shadow);color:var(--status-active-text);opacity:1;transform:scale(1.08)}#rsvp-status-group input:focus-visible+label{outline:2px solid var(--accent-color);outline-offset:2px}#rsvp-status-group input:not([disabled])+label:hover,#rsvp-status-group input:not([disabled]):hover+label{box-shadow:var(--btn-hover-shadow);opacity:1;transform:scale(1.08)}#rsvp-status-group input:checked+label.status-confirmed{background-color:var(--form-success)}#rsvp-status-group input:checked+label.status-declined{background-color:var(--form-error)}#rsvp-success-msg,#rsvp-success-msg-demo,#rsvp-success-msg-doi,#rsvp-success-msg-email,#ty-success-msg{display:none;font-weight:700;line-height:1.6em;padding-top:.5em;text-align:center}#rsvp-success-msg,#rsvp-success-msg-demo,#ty-success-msg{padding:1.5em 0}#rsvp-success-msg-demo,#rsvp-success-msg-email{color:var(--form-success)}#rsvp-success-msg-doi{color:var(--form-error);padding-top:1em;font-size:.8em}#pro-form-submit{display:block;margin:auto;min-width:150px}.pro-waiting{background-color:var(--modal-btn-background);border:1px solid var(--modal-btn-border);border-radius:var(--btn-border-radius);box-sizing:border-box;color:var(--modal-btn-text);cursor:wait;display:none;line-height:.5em;margin:auto;min-width:150px;padding:.5em 1.25em 1.2em;text-align:center;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;width:fit-content}@media (width > 575px){#pro-form-submit,.pro-waiting{min-width:200px}}.pro-waiting span:not(.atcb-icon-ical){animation-name:blink;animation-duration:1s;animation-iteration-count:infinite;animation-fill-mode:both;font-size:2.5em}.pro-field label span:not(.atcb-icon-ical){color:var(--form-error);font-weight:700;padding-left:2px}.pro-waiting span:not(.atcb-icon-ical):nth-child(2){animation-delay:.15s}.pro-waiting span:not(.atcb-icon-ical):nth-child(3){animation-delay:.3s}@keyframes blink{0%{opacity:.2}20%{opacity:1}100%{opacity:.2}}.pro #rsvp-sent-content{align-items:center;display:flex;flex-direction:column;gap:1.5em}#rsvp-status-group span{color:inherit}.atcb-modal-content .pro p{margin:0}.atcb-modal-content .pro p.pro-pt{margin-top:1.5em}.atcb-modal-content .pro .pro-field p{font-size:.9em}.pro .btn-flex{align-items:center;display:flex}.pro .atcb-modal-btn svg{fill:none;height:1.5em;margin-right:.5em;stroke:currentcolor;width:auto}#atcb-reference{box-sizing:border-box;filter:drop-shadow(0 0 3px rgba(255 255 255 / 80%));height:auto;padding:8px 0;transform:translate3d(0,0,0);width:100%;z-index:15000000}#atcb-reference.fixed-ref{position:fixed;bottom:10px;right:40px;width:auto}#atcb-reference.atcb-dropup{position:absolute}:host(.atcb-dark) #atcb-reference{filter:drop-shadow(0 0 5px #000)}#atcb-reference a,#atcb-reference a:active,#atcb-reference a:visited{opacity:.4;width:150px;max-width:100%;margin:auto;display:block;text-decoration:none}#atcb-reference.fixed-ref a{opacity:.6}#atcb-reference a:hover{opacity:.9;text-decoration:none}#atcb-reference svg{fill:var(--list-text)}`,"3d":`:host{width:fit-content;--base-font-size-l:16px;--base-font-size-m:16px;--base-font-size-s:16px;--font:arial,helvetica,sans-serif;--accent-color:#1e90ff;--wrapper-padding:0px;--buttonslist-gap:5px;--btn-background:#f5f5f5;--btn-hover-background:#fff;--btn-border:#d2d2d2;--btn-border-radius:6px;--btn-padding-x:1em;--btn-padding-y:.65em;--btn-font-weight:600;--btn-text:#333;--btn-hover-text:#000;--btn-shadow:rgba(0 0 0 / 10%) 0 4px 10px -2px,rgba(0 0 0 / 15%) 0 2px 2px -1px;--btn-hover-shadow:rgba(0 0 0 / 25%) 0 5px 12px -2px,rgba(0 0 0 / 25%) 0 3px 5px -2px;--btn-active-shadow:rgba(0 0 0 / 40%) 0 8px 13px -2px,rgba(0 0 0 / 30%) 0 5px 5px -3px;--btn-active-shadow-up:rgba(0 0 0 / 30%) 0 6px 13px -2px,rgba(0 0 0 / 15%) 0 2px 2px -1px,rgba(0 0 0 / 25%) 0 -3px 10px -1px;--list-background:#f5f5f5;--list-hover-background:#fff;--list-text:#333;--list-hover-text:#000;--list-close-background:#e5e5e5;--list-close-text:#777;--list-border-radius:6px;--list-padding:.8em;--list-shadow:rgba(0 0 0 / 20%) 0 4px 13px -2px,rgba(0 0 0 / 23%) 0 2px 4px -1px;--list-modal-shadow:rgba(0 0 0 / 50%) 0 4px 30px -3px,rgba(0 0 0 / 30%) 0 2px 8px -2px;--modal-text:#000;--modal-text-align:left;--modal-text-align-rtl:right;--modal-background:#f5f5f5;--modal-border-radius:6px;--modal-shadow:drop-shadow(3px 6px 25px rgba(0 0 0 / 65%));--modal-btn-bar:#c6c8cd;--modal-btn-background:#f5f5f5;--modal-btn-secondary-background:#e2e1e6;--modal-btn-hover-background:#fff;--modal-btn-border:#d2d2d2;--modal-btn-font-weight:600;--modal-btn-text:#2e2e2e;--modal-btn-hover-text:#161616;--modal-btn-secondary-text:#666567;--modal-btn-shadow:rgba(0 0 0 / 10%) 0 4px 10px -2px,rgba(0 0 0 / 10%) 0 2px 3px -1px;--modal-btn-hover-shadow:rgba(0 0 0 / 25%) 0 5px 13px -2px,rgba(0 0 0 / 20%) 0 3px 5px -2px;--modal-headline-text-align:center;--modal-headline-text-transform:none;--input-border-radius:6px;--input-background:#fff;--status-active-text:#fff;--form-error:#c5372c;--form-success:#338a36;--date-btn-text:#1d1d1e;--date-btn-text-secondary:#3a3a3f;--date-btn-cal-day-text:#fff;--date-btn-cal-month-text:#d3d2d7;--date-btn-cal-background:#313132;--date-btn-background:#eae9ed;--date-btn-hover-background:#fff;--date-btn-headline-line-clamp:1;--date-btn-shadow:rgba(0 0 0 / 10%) 0 4px 10px -2px,rgba(0 0 0 / 15%) 0 2px 3px -1px;--date-btn-hover-shadow:rgba(0 0 0 / 20%) 0 5px 12px -2px,rgba(0 0 0 / 20%) 0 3px 4px -2px;--checkmark-background:drop-shadow(0 0 3px #fff);--overlay-background:rgba(20 20 20 / 25%);--overlay-cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23777' width='16' height='16' viewBox='0 0 122.878 122.88'%3E%3Cpath d='M1.426 8.313a4.87 4.87 0 0 1 0-6.886 4.87 4.87 0 0 1 6.886 0l53.127 53.127 53.127-53.127a4.87 4.87 0 0 1 6.887 0 4.87 4.87 0 0 1 0 6.886L68.324 61.439l53.128 53.128a4.87 4.87 0 0 1-6.887 6.886L61.438 68.326 8.312 121.453a4.87 4.87 0 0 1-6.886 0 4.87 4.87 0 0 1 0-6.886l53.127-53.128L1.426 8.313h0z'/%3E%3C/svg%3E") 16 16,crosshair;--icon-ms365-color:#ea3e23;--icon-yahoo-color:#5f01d1;--icon-filter:none}:host(.atcb-dark){--btn-background:#2e2e2e;--btn-hover-background:#373737;--btn-border:#4d4d4d;--btn-text:#dedede;--btn-hover-text:#f1f1f1;--btn-shadow:rgba(255 255 255 / 5%) -3px -3px 30px -1px,rgba(0 0 0 / 40%) 2px 3px 10px -2px,rgba(0 0 0 / 40%) 1px 2px 3px -1px;--btn-hover-shadow:rgba(0 0 0 / 90%) 2px 5px 20px -4px,rgba(0 0 0 / 50%) 1px 2px 6px -2px;--btn-active-shadow:rgba(0 0 0 / 90%) 2px 5px 20px -4px,rgba(0 0 0 / 50%) 1px 2px 6px -2px;--btn-active-shadow-up:rgba(0 0 0 / 80%) 2px 4px 20px -4px,rgba(0 0 0 / 30%) 1px 1px 3px -1px,rgba(0 0 0 / 45%) 0 -3px 10px -1px;--list-background:#2e2e2e;--list-hover-background:#373737;--list-text:#dedede;--list-hover-text:#f1f1f1;--list-close-background:#282828;--list-shadow:rgba(0 0 0 / 60%) 0 4px 20px -2px,rgba(0 0 0 / 40%) 0 2px 4px -1px;--list-modal-shadow:rgba(0 0 0 / 40%) -1px 3px 30px 2px;--modal-text:#f1f1f1;--modal-background:#242424;--modal-shadow:drop-shadow(3px 6px 25px rgba(0 0 0 / 90%));--modal-btn-bar:#38383a;--modal-btn-background:#181819;--modal-btn-secondary-background:#2e2d30;--modal-btn-hover-background:#434246;--modal-btn-border:#434246;--modal-btn-text:#dbdbdb;--modal-btn-hover-text:#fff;--modal-btn-secondary-text:#b8b8b8;--modal-btn-shadow:rgba(255 255 255 / 5%) -2px -2px 10px,rgba(0 0 0 / 40%) 3px 3px 10px -2px,rgba(0 0 0 / 40%) 1px 2px 5px -1px;--modal-btn-hover-shadow:none;--input-background:#434246;--status-active-text:#000;--form-error:#db8680;--form-success:#99de9c;--date-btn-text:#ebebf0;--date-btn-text-secondary:#b5b5bd;--date-btn-cal-day-text:#101010;--date-btn-cal-month-text:#3e3e3f;--date-btn-cal-background:#c7c7cd;--date-btn-background:#363636;--date-btn-hover-background:#474747;--date-btn-shadow:rgba(0 0 0 / 60%) 0 0 20px -2px,rgba(0 0 0 / 30%) 1px 2px 3px -1px;--date-btn-hover-shadow:none;--checkmark-background:drop-shadow(0 0 3px #0a0a0a);--overlay-background:rgba(20 20 20 / 60%);--icon-ms365-color:#ea3e23;--icon-yahoo-color:#bebebe;--icon-filter:grayscale(.2)}.atcb-button-wrapper,.atcb-list,.atcb-modal-box{font-size:var(--base-font-size-l)}@media (width <= 991px){.atcb-button-wrapper,.atcb-list,.atcb-modal-box{font-size:var(--base-font-size-m)}}@media (width <= 575px){.atcb-button-wrapper,.atcb-list,.atcb-modal-box{font-size:var(--base-font-size-s)}}.atcb-initialized.atcb-buttons-list{gap:var(--buttonslist-gap)}.atcb-button-wrapper{display:block;padding:var(--wrapper-padding);position:relative}.atcb-button{align-items:center;background-color:var(--btn-background);border:1px solid var(--btn-border);border-radius:var(--btn-border-radius);box-shadow:var(--btn-shadow);box-sizing:content-box;color:var(--btn-text);cursor:pointer;display:flex;font-family:var(--font);font-size:1em;font-weight:var(--btn-font-weight);justify-content:center;line-height:1.5em;margin:0;max-width:300px;padding:var(--btn-padding-y) var(--btn-padding-x);position:relative;text-align:center;touch-action:manipulation;transform:translate3d(0,0,-12px);user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;width:auto;z-index:1}.atcb-button:not(.atcb-no-text,.atcb-modal-style,.atcb-dropoverlay,.atcb-single){min-width:calc(11.6em - 2 * var(--btn-padding-x))}.atcb-button.atcb-no-text{display:flex;place-content:center center;align-items:center;height:3em;width:3em;padding:0}.atcb-rtl .atcb-button{direction:rtl;text-align:right}.atcb-button:focus-visible{outline:2px solid var(--accent-color)}.atcb-button:not([disabled]):focus,.atcb-button:not([disabled]):hover{background-color:var(--btn-hover-background);box-shadow:var(--btn-hover-shadow);color:var(--btn-hover-text)}.atcb-button.atcb-active:not(.atcb-modal-style,.atcb-dropoverlay){background-color:var(--btn-hover-background);z-index:15000000}.atcb-button.atcb-single:not([disabled]):focus,.atcb-button.atcb-single:not([disabled]):hover{background-color:var(--btn-hover-background);box-shadow:var(--btn-active-shadow);color:var(--btn-hover-text)}.atcb-button.atcb-active:not(.atcb-modal-style,.atcb-dropup,.atcb-dropoverlay){box-shadow:var(--btn-active-shadow);transform:perspective(100px) rotateX(12deg) translate3d(0,0,2px);transition:transform .1s linear}.atcb-button.atcb-active.atcb-dropup:not(.atcb-modal-style,.atcb-dropoverlay){box-shadow:var(--btn-active-shadow-up);transform:perspective(100px) rotateX(348deg) translate3d(0,0,2px);transition:transform .1s linear}.atcb-button.atcb-active.atcb-dropoverlay{transform:translate3d(0,0,0);z-index:14000090}.atcb-icon{flex-grow:0;flex-shrink:0;height:1em;line-height:1em;margin-right:.8em;width:1em}.atcb-rtl .atcb-icon{margin-right:0;margin-left:.8em}.atcb-no-text .atcb-icon{margin-right:0;margin-left:0}.atcb-icon svg{fill:currentcolor;height:100%;width:100%}.atcb-text{overflow-wrap:anywhere}.atcb-dropdown-anchor{bottom:6px;height:1px;width:100%;opacity:0;position:absolute}.atcb-list-wrapper{box-sizing:border-box;padding:0 4px;position:absolute;transform:translate3d(0,0,0);z-index:14000090}.atcb-list{background-color:var(--list-background);border-radius:0 0 var(--list-border-radius) var(--list-border-radius);box-sizing:border-box;box-shadow:var(--list-shadow);color:var(--list-text);display:block;font-family:var(--font);min-width:100%;position:relative;user-select:none;-webkit-user-select:none;width:fit-content}.atcb-list-wrapper.atcb-dropdown:not(.atcb-dropup,.atcb-dropoverlay){animation:atcb-list-slide-down .4s ease 50ms 1 normal both;opacity:0}.atcb-list-wrapper.atcb-dropup:not(.atcb-dropoverlay){animation:atcb-list-slide-up .4s ease 50ms 1 normal both;opacity:0}.atcb-list-wrapper.atcb-dropoverlay{transform:translate3d(0,0,2px);z-index:15000000;animation:atcb-list-slide-center .3s ease 0s 1 normal both;opacity:0}@keyframes atcb-list-slide-down{0%{opacity:0;transform:rotateX(70deg);transform-origin:top}100%{opacity:1;transform:rotateX(0);transform-origin:top}}@keyframes atcb-list-slide-up{0%{opacity:0;transform:rotateX(70deg);transform-origin:bottom}100%{opacity:1;transform:rotateX(0);transform-origin:bottom}}@keyframes atcb-list-slide-center{0%{opacity:0;transform:scaleY(1)}1%{opacity:1;transform:scaleY(0)}100%{opacity:1;transform:scaleY(1)}}.atcb-list-item{align-items:center;background-color:var(--list-background);box-sizing:border-box;cursor:pointer;display:flex;font-size:1em;line-height:1.75em;padding:var(--list-padding);text-align:left;touch-action:manipulation;-webkit-tap-highlight-color:transparent}.atcb-rtl .atcb-list-item{direction:rtl;text-align:right}.atcb-list-item:hover{background-color:var(--list-hover-background);color:var(--list-hover-text)}.atcb-list-item:focus-visible{background-color:var(--list-hover-background);color:var(--accent-color);outline:0}.atcb-list-item:last-child{border-radius:0 0 var(--list-border-radius) var(--list-border-radius)}.atcb-dropup .atcb-list-item:last-child{border-radius:0;padding-bottom:calc(var(--list-padding) + .7em)}.atcb-dropoverlay .atcb-list .atcb-list-item:first-child,.atcb-dropup .atcb-list,.atcb-dropup .atcb-list-item:first-child,.atcb-list.atcb-modal .atcb-list-item:first-child{border-radius:var(--list-border-radius) var(--list-border-radius) 0 0}.atcb-dropoverlay .atcb-list .atcb-list-item:only-child,.atcb-list.atcb-modal .atcb-list-item:only-child{border-radius:var(--list-border-radius)}.atcb-list.atcb-generated-button:not(.atcb-modal) .atcb-list-item:first-child{padding-top:calc(var(--list-padding) + .7em)}.atcb-dropoverlay .atcb-list.atcb-generated-button:not(.atcb-modal) .atcb-list-item:first-child,.atcb-dropup .atcb-list.atcb-generated-button:not(.atcb-modal) .atcb-list-item:first-child{padding-top:var(--list-padding)}.atcb-dropoverlay .atcb-list,.atcb-list.atcb-modal{border-radius:var(--list-border-radius)}.atcb-list.atcb-modal{box-shadow:var(--list-modal-shadow)}.atcb-list-item .atcb-icon{margin:0 auto}.atcb-list-item .atcb-icon+.atcb-text{margin-left:.7em;width:100%}.atcb-rtl .atcb-list-item .atcb-icon+.atcb-text{margin-left:0;margin-right:.7em}.atcb-list-item-close{background-color:var(--list-close-background)}.atcb-list-item.atcb-list-item-close:not(:focus-visible){color:var(--list-close-text)}.atcb-list-item-close svg{fill:currentcolor}.atcb-modal{display:block;margin:auto;width:auto;min-width:auto;position:relative;z-index:14000090}.atcb-modal-box{filter:var(--modal-shadow);color:var(--modal-text);cursor:default;box-sizing:border-box;font-family:var(--font);line-height:1.5em;text-align:var(--modal-text-align);user-select:none;-webkit-user-select:none;touch-action:manipulation;width:100%;margin-bottom:20px;-webkit-tap-highlight-color:transparent}@media (width > 575px){.atcb-modal-box{width:32em}}.atcb-modal-box.atcb-rtl{text-align:var(--modal-text-align-rtl);direction:rtl;padding:1.25em 1em 1.25em 2em}.atcb-modal-icon{height:2.5em;width:2.5em;border-radius:100%;background-color:var(--modal-background);padding:1.75em;margin:auto}.atcb-modal-icon svg{fill:currentcolor;height:100%;width:100%}.atcb-modal-headline{background-color:var(--modal-background);border-radius:var(--modal-border-radius) var(--modal-border-radius) 0 0;font-size:1.3em;font-weight:600;line-height:1.5em;padding:1.8em 1.5em 1.3em;text-transform:var(--modal-headline-text-transform);text-align:var(--modal-headline-text-align)}.atcb-modal-icon+.atcb-modal-headline{margin-top:-2.6em;padding-top:2.6em}.atcb-modal-content{background-color:var(--modal-background);font-size:1em;padding:.3em 2em 2.2em}.atcb-modal-content-subevents{margin:auto;width:fit-content}.atcb-modal-icon+.atcb-modal-content{border-radius:var(--modal-border-radius) var(--modal-border-radius) 0 0;margin-top:-2.6em;padding-top:2.6em}@media (width <= 575px){.atcb-modal-headline{padding:1.8em 1em 1em}.atcb-modal-content{padding:.3em 1.5em 1.5em}.atcb-modal-icon+.atcb-modal-content{padding-top:1.8em}}.atcb-modal-buttons{background-color:var(--modal-btn-bar);border-radius:0 0 var(--modal-border-radius) var(--modal-border-radius);box-sizing:border-box;padding:.6em;text-align:center;width:100%;display:flex;justify-content:center;flex-flow:row-reverse wrap;align-items:center}a.atcb-modal-btn,button.atcb-modal-btn{background-color:var(--modal-btn-secondary-background);border:0;border-radius:var(--btn-border-radius);box-shadow:var(--modal-btn-shadow);color:var(--modal-btn-secondary-text);cursor:pointer;display:inline-block;font-family:var(--font);font-size:.9em;font-weight:var(--modal-btn-font-weight);line-height:1em;margin:.625em;padding:1em 1.25em;position:relative;text-align:center;text-decoration:none;touch-action:manipulation;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent}a.atcb-modal-btn.btn-small,button.atcb-modal-btn.btn-small{padding:.6em .8em}a.atcb-modal-btn.atcb-modal-btn-primary,button.atcb-modal-btn.atcb-modal-btn-primary{background-color:var(--modal-btn-background);color:var(--modal-btn-text)}a.atcb-modal-btn.atcb-modal-btn-border,button.atcb-modal-btn.atcb-modal-btn-border{border:1px solid var(--modal-btn-border)}a.atcb-modal-btn:focus-visible,button.atcb-modal-btn:focus-visible{background-color:var(--modal-btn-hover-background);outline:2px solid var(--accent-color)}a.atcb-modal-btn:disabled,button.atcb-button:disabled,button.atcb-modal-btn:disabled,button.atcb-subevent-btn:disabled{cursor:not-allowed;opacity:.75;filter:brightness(95%);border-style:dashed;box-shadow:none}a.atcb-modal-btn:not([disabled]):hover,button.atcb-modal-btn:not([disabled]):hover{background-color:var(--modal-btn-hover-background);box-shadow:var(--modal-btn-hover-shadow);color:var(--modal-btn-hover-text);text-decoration:none}.atcb-subevent-btn{display:flex;align-items:flex-start;cursor:pointer;font-family:var(--font);font-size:1em;box-shadow:var(--date-btn-shadow);background-color:var(--date-btn-background);border:0;border-radius:7px 4px 4px 7px;padding:0;margin:0;touch-action:manipulation;position:relative;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;width:100%}.atcb-subevent-btn:hover{align-items:center}.atcb-subevent-btn:focus,.atcb-subevent-btn:hover{background-color:var(--date-btn-hover-background);box-shadow:var(--date-btn-hover-shadow)}.atcb-subevent-btn:focus-visible{outline:2px solid var(--accent-color)}.atcb-subevent-btn+.atcb-subevent-btn{margin-top:30px}.atcb-date-btn-left{border-radius:4px 0 0 4px;align-self:stretch;background-color:var(--date-btn-cal-background);color:var(--date-btn-hover-background);padding:.7em .8em .8em;width:2.7em;align-items:center;display:flex;flex-direction:column;flex-shrink:0}.atcb-rtl .atcb-date-btn-left{border-radius:0 4px 4px 0}.atcb-subevent-btn:hover .atcb-date-btn-left{opacity:.8}.atcb-date-btn-day{color:var(--date-btn-cal-day-text);font-weight:400;font-size:2em;word-break:keep-all;padding-bottom:.1em}.atcb-initialized[lang=ja] .atcb-date-btn-day,.atcb-initialized[lang=ko] .atcb-date-btn-day,.atcb-initialized[lang=zh] .atcb-date-btn-day{font-size:1.3em}.atcb-date-btn-month{color:var(--date-btn-cal-month-text);font-weight:600;font-size:1em}.atcb-date-btn-right{position:relative;color:var(--date-btn-text);min-width:13.5em;overflow-wrap:anywhere}.atcb-subevent-btn .atcb-date-btn-right{width:100%}.atcb-date-btn-details{opacity:1;padding:.7em .8em;text-align:left}.atcb-rtl .atcb-date-btn-details{text-align:right}.atcb-date-btn-hover{position:absolute;top:0;left:0;width:100%;opacity:0;height:100%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:1em;padding:.4em .7em;box-sizing:border-box}.atcb-subevent-btn:hover .atcb-date-btn-details{opacity:0}.atcb-subevent-btn:hover .atcb-date-btn-hover{opacity:1}.atcb-date-btn-headline{font-weight:600;font-size:.9em;margin-bottom:.5em;overflow:hidden;display:-webkit-box;-webkit-line-clamp:var(--date-btn-headline-line-clamp);-webkit-box-orient:vertical}.atcb-date-btn-content{display:flex;align-items:flex-start;font-size:.8em;color:var(--date-btn-text-secondary)}.atcb-date-btn-content.atcb-date-btn-cancelled{color:var(--form-error);font-weight:700}.atcb-date-btn-content-location{overflow:hidden;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;word-break:break-all}.atcb-date-btn-content-icon{display:inline-block;height:.8em;margin-right:.4em;margin-left:0;width:.9em;flex-shrink:0}.atcb-rtl .atcb-date-btn-content-icon{margin-right:0;margin-left:.4em}.atcb-initialized[lang=ja] .atcb-date-btn-content:not(.atcb-date-btn-content-location) .atcb-date-btn-content-icon,.atcb-initialized[lang=ko] .atcb-date-btn-content:not(.atcb-date-btn-content-location) .atcb-date-btn-content-icon,.atcb-initialized[lang=zh] .atcb-date-btn-content:not(.atcb-date-btn-content-location) .atcb-date-btn-content-icon{margin-top:.15em}.atcb-date-btn-content-icon svg{height:100%;fill:currentcolor;width:100%}.atcb-date-btn-content+.atcb-date-btn-content{margin-top:.3em}.atcb-date-btn-content-text span:not(.atcb-icon-ical){padding-right:.3em;display:inline-block}.atcb-checkmark{display:none}.atcb-saved .atcb-checkmark{box-sizing:content-box;color:var(--btn-text);display:block;position:absolute;top:-.9em;right:-.5em;padding:.5em;border-radius:100%;height:1.2em}.atcb-checkmark svg{height:100%;filter:var(--checkmark-background);width:auto}#atcb-bgoverlay{backdrop-filter:blur(2px);-webkit-backdrop-filter:blur(2px);background-color:var(--overlay-background);border:0;box-sizing:border-box;display:flex;height:calc(100vh + 100px);inset-inline:0;left:0;right:0;top:0;min-height:100%;min-width:100%;overflow-y:auto;padding:20px 20px 130px;position:fixed;width:100vw;z-index:14000000}#atcb-bgoverlay:not(dialog){animation:atcb-bgoverlay-animate .2s ease 0s 1 normal forwards;opacity:0}#atcb-bgoverlay.atcb-no-bg{animation:none;backdrop-filter:none;-webkit-backdrop-filter:none;opacity:1;background-color:transparent}@keyframes atcb-bgoverlay-animate{0%{opacity:0}100%{opacity:1}}#atcb-bgoverlay.atcb-click:hover{cursor:var(--overlay-cursor)}.atcb-icon-outlookcom,.atcb-icon.atcb-icon-ms365{padding-bottom:.05em}.atcb-icon.atcb-icon-apple,.atcb-icon.atcb-icon-ical{padding-bottom:.15em}.atcb-icon.atcb-icon-trigger{padding-bottom:.15em}.atcb-icon.atcb-icon-rsvp{height:1.5em;width:1.5em}.atcb-icon.atcb-icon-apple svg{fill:currentcolor}.atcb-icon.atcb-icon-ical svg{fill:currentcolor}.atcb-icon.atcb-icon-ms365 svg{fill:var(--icon-ms365-color)}.atcb-icon.atcb-icon-yahoo svg{fill:var(--icon-yahoo-color)}.atcb-icon.atcb-icon-google svg,.atcb-icon.atcb-icon-msteams svg,.atcb-icon.atcb-icon-outlookcom svg{filter:var(--icon-filter)}.rsvp-inline-wrapper{filter:none;min-width:100%;margin-bottom:0}.atcb-modal-content.no-headline{border-radius:var(--modal-border-radius) var(--modal-border-radius) 0 0;padding-top:1.8em}.rsvp-inline-wrapper .atcb-modal-content,.rsvp-inline-wrapper .atcb-modal-headline,.rsvp-inline-wrapper.atcb-modal-box{background-color:transparent;border-radius:0;box-sizing:border-box;padding:0;width:100%}.rsvp-inline-wrapper .atcb-modal-headline{padding-bottom:1.5em}.pro{text-align:center}.pro ol,.pro ul{margin:auto;text-align:left;width:fit-content}.pro a:not(.atcb-modal-btn),.pro a:not(.atcb-modal-btn):active,.pro a:not(.atcb-modal-btn):visited{color:var(--modal-btn-text);text-decoration:underline;text-decoration-thickness:2px;text-decoration-color:var(--accent-color)}.pro a:not(.atcb-modal-btn):hover{color:var(--accent-color);text-decoration:none}.pro .pro-share-buttons{display:flex;flex-wrap:wrap;justify-content:center}.pro #rsvp-atcb{display:flex;flex-wrap:wrap;gap:.4em}.pro-form{text-align:left}.pro-form:not(.no-intro){border-top:1px solid var(--modal-btn-border);margin-top:1.5em;padding-top:1.5em}.pro-form.no-intro:not(.no-headline){padding-top:.5em}.pro-field+.pro-field{padding-top:1.3em}.pro-field-type-label+.pro-field-type-radio{padding-top:0}.pro-field-type-checkbox,.pro-field-type-radio div{align-items:center;display:flex}.pro-field-type-checkbox input,.pro-field-type-radio input{cursor:pointer}.pro-field label{display:block;font-size:.9em;opacity:.7}.pro-field-type-checkbox label,.pro-field-type-radio label{cursor:pointer;opacity:.8;padding-left:.3em}.pro-field input[type=email],.pro-field input[type=number],.pro-field input[type=text]{background-color:var(--input-background);border:1px solid var(--modal-btn-border);border-radius:var(--input-border-radius);box-sizing:border-box;caret-color:var(--accent-color);color:var(--modal-text);font-size:.9em;opacity:.8;padding:.7em;transition:all .1s ease-in-out;width:100%}.pro-field input[type=checkbox],.pro-field input[type=radio]{accent-color:var(--accent-color);height:1.2rem;opacity:.8;transition:all .1s ease-in-out;width:1.2em}.pro-field input:disabled,.pro-field input:disabled+label{cursor:not-allowed;opacity:.75;filter:brightness(95%)}.pro-field input:not([disabled]):hover{opacity:1}.pro-field input[type=email]:focus,.pro-field input[type=number]:focus,.pro-field input[type=text]:focus{border-color:var(--accent-color);outline:1px solid var(--accent-color)}.pro-field input[type=checkbox]:focus,.pro-field input[type=radio]:focus{outline-color:var(--accent-color);outline-width:2px}#submit-error{color:var(--form-error);display:none;font-weight:700;padding-top:1.5em;text-align:center}.pro-form.form-error #submit-error{display:block}.pro-field input.error{accent-color:var(--form-error);border:2px solid var(--form-error)}.pro-field input.error+label,.pro-field:has(input.error) label{color:var(--form-error);opacity:1}#rsvp-status-group{border-bottom:1px solid var(--modal-btn-border);font-weight:700;margin-bottom:1.5em;padding-bottom:2em;text-align:center}#rsvp-status-group .pro-field{align-items:center;display:flex;flex-wrap:wrap;gap:1.2em;justify-content:center;margin-top:1em}@media (width <= 575px){#rsvp-status-group .pro-field{flex-direction:column}#rsvp-status-group .pro-field div{width:80%}}#rsvp-status-group .pro-field div{min-width:28%;position:relative}#rsvp-status-group input{opacity:0;position:absolute;top:0;left:0;height:100%;width:100%;margin:0;cursor:pointer}#rsvp-status-group label{align-items:center;border:1px solid var(--modal-btn-text);border-radius:var(--input-border-radius);box-shadow:var(--btn-shadow);color:var(--modal-btn-text);display:flex;flex-direction:column;font-weight:700;text-transform:uppercase;justify-content:center;opacity:.6;padding:.8em;transition:all .1s ease-in-out;width:100%}#rsvp-status-group label.status-confirmed{border-color:var(--form-success);color:var(--form-success)}#rsvp-status-group label.status-declined{border-color:var(--form-error);color:var(--form-error)}#rsvp-status-group input:checked+label{background-color:var(--modal-text);box-shadow:var(--btn-hover-shadow);color:var(--status-active-text);opacity:1;transform:scale(1.08)}#rsvp-status-group input:focus-visible+label{outline:2px solid var(--accent-color);outline-offset:2px}#rsvp-status-group input:not([disabled])+label:hover,#rsvp-status-group input:not([disabled]):hover+label{box-shadow:var(--btn-hover-shadow);opacity:1;transform:scale(1.08)}#rsvp-status-group input:checked+label.status-confirmed{background-color:var(--form-success)}#rsvp-status-group input:checked+label.status-declined{background-color:var(--form-error)}#rsvp-success-msg,#rsvp-success-msg-demo,#rsvp-success-msg-doi,#rsvp-success-msg-email,#ty-success-msg{display:none;font-weight:700;line-height:1.6em;padding-top:.5em;text-align:center}#rsvp-success-msg,#rsvp-success-msg-demo,#ty-success-msg{padding:1.5em 0}#rsvp-success-msg-demo,#rsvp-success-msg-email{color:var(--form-success)}#rsvp-success-msg-doi{color:var(--form-error);padding-top:1em;font-size:.8em}#pro-form-submit{display:block;margin:auto;min-width:150px}.pro-waiting{background-color:var(--modal-btn-background);border:1px solid var(--modal-btn-border);border-radius:var(--btn-border-radius);box-sizing:border-box;color:var(--modal-btn-text);cursor:wait;display:none;line-height:.5em;margin:auto;min-width:150px;padding:.5em 1.25em 1.2em;text-align:center;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;width:fit-content}@media (width > 575px){#pro-form-submit,.pro-waiting{min-width:200px}}.pro-waiting span:not(.atcb-icon-ical){animation-name:blink;animation-duration:1s;animation-iteration-count:infinite;animation-fill-mode:both;font-size:2.5em}.pro-field label span:not(.atcb-icon-ical){color:var(--form-error);font-weight:700;padding-left:2px}.pro-waiting span:not(.atcb-icon-ical):nth-child(2){animation-delay:.15s}.pro-waiting span:not(.atcb-icon-ical):nth-child(3){animation-delay:.3s}@keyframes blink{0%{opacity:.2}20%{opacity:1}100%{opacity:.2}}.pro #rsvp-sent-content{align-items:center;display:flex;flex-direction:column;gap:1.5em}#rsvp-status-group span{color:inherit}.atcb-modal-content .pro p{margin:0}.atcb-modal-content .pro p.pro-pt{margin-top:1.5em}.atcb-modal-content .pro .pro-field p{font-size:.9em}.pro .btn-flex{align-items:center;display:flex}.pro .atcb-modal-btn svg{fill:none;height:1.5em;margin-right:.5em;stroke:currentcolor;width:auto}#atcb-reference{box-sizing:border-box;filter:drop-shadow(0 0 3px rgba(255 255 255 / 80%));height:auto;padding:8px 0;transform:translate3d(0,0,0);width:100%;z-index:15000000}#atcb-reference.fixed-ref{position:fixed;bottom:10px;right:40px;width:auto}#atcb-reference.atcb-dropup{position:absolute}:host(.atcb-dark) #atcb-reference{filter:drop-shadow(0 0 5px #000)}#atcb-reference a,#atcb-reference a:active,#atcb-reference a:visited{opacity:.4;width:150px;max-width:100%;margin:auto;display:block;text-decoration:none}#atcb-reference.fixed-ref a{opacity:.6}#atcb-reference a:hover{opacity:.9;text-decoration:none}#atcb-reference svg{fill:var(--list-text)}`,flat:`:host{width:fit-content;--base-font-size-l:16px;--base-font-size-m:16px;--base-font-size-s:16px;--font:arial,helvetica,sans-serif;--accent-color:#1e90ff;--wrapper-padding:0px;--buttonslist-gap:8px;--btn-background:#f5f5f5;--btn-hover-background:#fff;--btn-border:#545454;--btn-padding-x:1.2em;--btn-padding-y:.8em;--btn-shadow:#333;--btn-font-weight:600;--btn-text:#333;--btn-hover-text:#000;--list-background:#f5f5f5;--list-hover-background:#fff;--list-border:#545454;--list-text:#333;--list-font-weight:400;--list-hover-text:#000;--list-close-background:#545454;--list-close-text:#b0b0b0;--list-close-text-hover:#777;--list-padding:.8em;--modal-text:#000;--modal-text-align:left;--modal-text-align-rtl:right;--modal-background:#f5f5f5;--modal-btn-bar:#bababa;--modal-btn-background:#f5f5f5;--modal-btn-secondary-background:#e2e1e6;--modal-btn-hover-background:#fff;--modal-btn-border:#545454;--modal-btn-font-weight:600;--modal-btn-text:#2e2e2e;--modal-btn-hover-text:#161616;--modal-btn-secondary-text:#676767;--modal-headline-text-align:center;--modal-headline-text-transform:uppercase;--input-background:#fff;--status-active-text:#fff;--form-error:#c5372c;--form-success:#338a36;--date-btn-text:#1d1d1e;--date-btn-text-secondary:#414141;--date-btn-cal-day-text:#fff;--date-btn-cal-month-text:#d3d2d7;--date-btn-cal-background:#313132;--date-btn-background:#eae9ed;--date-btn-hover-background:#fff;--date-btn-headline-line-clamp:1;--overlay-background:rgba(20 20 20 / 40%);--overlay-cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23777' width='16' height='16' viewBox='0 0 122.878 122.88'%3E%3Cpath d='M1.426 8.313a4.87 4.87 0 0 1 0-6.886 4.87 4.87 0 0 1 6.886 0l53.127 53.127 53.127-53.127a4.87 4.87 0 0 1 6.887 0 4.87 4.87 0 0 1 0 6.886L68.324 61.439l53.128 53.128a4.87 4.87 0 0 1-6.887 6.886L61.438 68.326 8.312 121.453a4.87 4.87 0 0 1-6.886 0 4.87 4.87 0 0 1 0-6.886l53.127-53.128L1.426 8.313h0z'/%3E%3C/svg%3E") 16 16,crosshair;--icon-ms365-color:#ea3e23;--icon-yahoo-color:#5f01d1;--icon-filter:none}:host(.atcb-dark){--btn-background:#222;--btn-hover-background:#373737;--btn-border:#515151;--btn-shadow:#000;--btn-text:#dedede;--btn-hover-text:#f1f1f1;--list-background:#222;--list-hover-background:#373737;--list-border:#515151;--list-text:#dedede;--list-hover-text:#f1f1f1;--list-close-background:#111;--list-close-text:#777;--list-close-text-hover:#f1f1f1;--modal-text:#f1f1f1;--modal-background:#242424;--modal-btn-bar:#313131;--modal-btn-background:#181819;--modal-btn-secondary-background:#2e2d30;--modal-btn-hover-background:#434246;--modal-btn-border:#434246;--modal-btn-text:#dbdbdb;--modal-btn-hover-text:#fff;--modal-btn-secondary-text:#b8b8b8;--input-background:#434246;--status-active-text:#000;--form-error:#db8680;--form-success:#99de9c;--date-btn-text:#ebebf0;--date-btn-text-secondary:#b5b5bd;--date-btn-cal-day-text:#101010;--date-btn-cal-month-text:#414141;--date-btn-cal-background:#c7c7cd;--date-btn-background:#2d2d2d;--date-btn-hover-background:#474747;--overlay-background:rgba(20 20 20 / 75%);--icon-ms365-color:#ea3e23;--icon-yahoo-color:#bebebe;--icon-filter:grayscale(0.2)}.atcb-button-wrapper,.atcb-list,.atcb-modal-box{font-size:var(--base-font-size-l)}@media (width <= 991px){.atcb-button-wrapper,.atcb-list,.atcb-modal-box{font-size:var(--base-font-size-m)}}@media (width <= 575px){.atcb-button-wrapper,.atcb-list,.atcb-modal-box{font-size:var(--base-font-size-s)}}.atcb-initialized.atcb-buttons-list{gap:var(--buttonslist-gap)}.atcb-button-wrapper{display:block;padding:var(--wrapper-padding);position:relative}.atcb-button{align-items:center;background-color:var(--btn-background);border:.2em solid var(--btn-border);box-sizing:content-box;color:var(--btn-text);cursor:pointer;display:flex;font-family:var(--font);font-size:1em;font-weight:var(--btn-font-weight);justify-content:center;line-height:1.5em;margin:0;max-width:300px;padding:var(--btn-padding-y) var(--btn-padding-x);top:0;left:0;box-shadow:0 0 0 0 var(--btn-shadow);position:relative;text-align:center;touch-action:manipulation;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;width:auto;z-index:1}.atcb-button:not(.atcb-no-text,.atcb-modal-style,.atcb-dropoverlay,.atcb-single){min-width:calc(11.6em - 2 * var(--btn-padding-x))}.atcb-button.atcb-no-text{display:flex;place-content:center center;align-items:center;height:3em;width:3em;padding:0}.atcb-button.atcb-click:not([disabled]){top:-3px;left:-3px;box-shadow:3px 3px 0 0 var(--btn-shadow)}.atcb-rtl .atcb-button{direction:rtl;text-align:right}.atcb-button:focus-visible{outline:2px solid var(--accent-color)}.atcb-button:not([disabled]):focus,.atcb-button:not([disabled]):hover{background-color:var(--btn-hover-background);top:0;left:0;box-shadow:0 0 0 0 var(--btn-shadow);color:var(--btn-hover-text)}.atcb-button.atcb-active:not(.atcb-modal-style,.atcb-dropoverlay){z-index:15000000}.atcb-button.atcb-active:not(.atcb-modal-style,.atcb-dropoverlay),.atcb-button.atcb-single:not([disabled]):focus,.atcb-button.atcb-single:not([disabled]):hover{background-color:var(--btn-hover-background);top:-5px;left:-5px;box-shadow:5px 5px 0 0 var(--btn-shadow);color:var(--btn-hover-text)}.atcb-button.atcb-active.atcb-dropoverlay{z-index:14000090}.atcb-icon{flex-grow:0;flex-shrink:0;height:.9em;line-height:1em;margin-right:.8em;width:.9em}.atcb-rtl .atcb-icon{margin-right:0;margin-left:1em}.atcb-no-text .atcb-icon{margin-right:0;margin-left:0}.atcb-icon svg{fill:currentcolor;height:100%;width:100%}.atcb-icon-trigger svg{display:none}.atcb-button .atcb-icon-trigger::after{content:"+";font-family:Arial,Helvetica,sans-serif;font-size:1.5em}.atcb-text{overflow-wrap:anywhere}.atcb-dropdown-anchor{bottom:0;height:0;width:100%;opacity:0;position:absolute}.atcb-list-wrapper{box-sizing:border-box;font-weight:var(--list-font-weight);padding:0 2px 0 6px;position:absolute;z-index:16000090}.atcb-list-wrapper.atcb-no-text.atcb-dropdown{padding:0}.atcb-list-wrapper:not(.atcb-dropup,.atcb-dropoverlay){animation:list-entrance-bottom .2s ease 0s 1 normal forwards}.atcb-list-wrapper.atcb-dropup{animation:list-entrance-top .2s ease 0s 1 normal forwards}.atcb-list-wrapper.atcb-dropoverlay{z-index:15000000}@keyframes list-entrance-bottom{0%{opacity:0;transform:translateY(150px)}100%{opacity:1;transform:translateY(0)}}@keyframes list-entrance-top{0%{opacity:0;transform:translateY(-150px)}100%{opacity:1;transform:translateY(0)}}.atcb-list{background:var(--list-background);box-sizing:border-box;border:.15em solid var(--list-border);color:var(--list-text);display:block;font-family:var(--font);min-width:100%;position:relative;user-select:none;-webkit-user-select:none;width:fit-content}.atcb-list-item{align-items:center;background-color:var(--list-background);box-sizing:border-box;cursor:pointer;display:flex;font-size:1em;line-height:1.75em;padding:var(--list-padding);text-align:left;touch-action:manipulation;-webkit-tap-highlight-color:transparent}.atcb-rtl .atcb-list-item{direction:rtl;text-align:right}.atcb-list-item:hover{background-color:var(--list-hover-background);color:var(--list-hover-text)}.atcb-list-item:focus-visible{background-color:var(--list-hover-background);color:var(--accent-color);outline:0}.atcb-dropup .atcb-list-item:last-child{border-bottom-width:0}.atcb-list.atcb-generated-button:not(.atcb-modal) .atcb-list-item:first-child{border-top-width:0}.atcb-dropoverlay .atcb-list.atcb-generated-button:not(.atcb-modal) .atcb-list-item:first-child,.atcb-dropup .atcb-list.atcb-generated-button:not(.atcb-modal) .atcb-list-item:first-child{border-top-width:.15em}.atcb-list-item .atcb-icon{margin:0 auto;height:1em;width:1em}.atcb-list-item .atcb-icon+.atcb-text{margin-left:.7em;width:100%}.atcb-rtl .atcb-list-item .atcb-icon+.atcb-text{margin-left:0;margin-right:.7em}.atcb-list-item-close{background-color:var(--list-close-background)}.atcb-list-item.atcb-list-item-close:not(:focus-visible){color:var(--list-close-text)}.atcb-list-item.atcb-list-item-close:hover{color:var(--list-close-text-hover)}.atcb-list-item-close svg{fill:currentcolor}.atcb-modal{display:block;margin:auto;width:auto;min-width:auto;position:relative;z-index:14000090}.atcb-modal-box{border:.15em solid var(--btn-border);background-color:var(--modal-background);color:var(--modal-text);cursor:default;box-sizing:border-box;font-family:var(--font);line-height:1.5em;text-align:var(--modal-text-align);user-select:none;-webkit-user-select:none;touch-action:manipulation;width:100%;margin-bottom:20px;-webkit-tap-highlight-color:transparent}@media (width > 575px){.atcb-modal-box{width:32em}}.atcb-modal-box.atcb-rtl{text-align:var(--modal-text-align-rtl);direction:rtl;padding:1.25em 1em 1.25em 2em}.atcb-modal-icon{height:2.5em;width:2.5em;padding:1.75em;margin:auto}.atcb-modal-icon svg{fill:currentcolor;height:100%;width:100%}.atcb-modal-headline{font-size:1.3em;font-weight:600;line-height:1.5em;padding:1.8em 1.5em 1.3em;text-transform:var(--modal-headline-text-transform);text-align:var(--modal-headline-text-align)}.atcb-modal-icon+.atcb-modal-headline{padding-top:0}.atcb-modal-content{font-size:1em;padding:.3em 2em 2.2em}.atcb-modal-content-subevents{margin:auto;width:fit-content}.atcb-modal-icon+.atcb-modal-content{padding-top:0}@media (width <= 575px){.atcb-modal-headline{padding:1.8em 1em 1em}.atcb-modal-content{padding:.3em 1.5em 1.5em}}.atcb-modal-buttons{background-color:var(--modal-btn-bar);box-sizing:border-box;padding:.6em;text-align:center;width:100%;display:flex;justify-content:center;flex-flow:row-reverse wrap;align-items:center}a.atcb-modal-btn,button.atcb-modal-btn{border:.2em solid var(--btn-border);background-color:var(--modal-btn-secondary-background);color:var(--modal-btn-secondary-text);cursor:pointer;display:inline-block;font-family:var(--font);font-size:.9em;font-weight:var(--modal-btn-font-weight);line-height:1em;margin:.625em;padding:1em 1.25em;position:relative;text-align:center;text-decoration:none;touch-action:manipulation;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;top:0;left:0;box-shadow:0 0 0 0 var(--btn-shadow)}a.atcb-modal-btn.btn-small,button.atcb-modal-btn.btn-small{padding:.6em .8em}a.atcb-modal-btn.atcb-modal-btn-primary,button.atcb-modal-btn.atcb-modal-btn-primary{background-color:var(--modal-btn-background);color:var(--modal-btn-text)}a.atcb-modal-btn:focus-visible,button.atcb-modal-btn:focus-visible{background-color:var(--modal-btn-hover-background);outline:2px solid var(--accent-color)}a.atcb-modal-btn:disabled,button.atcb-button:disabled,button.atcb-modal-btn:disabled,button.atcb-subevent-btn:disabled{cursor:not-allowed;opacity:.75;filter:brightness(95%);border-style:dashed;box-shadow:none}a.atcb-modal-btn:not([disabled]):hover,button.atcb-modal-btn:not([disabled]):hover{background-color:var(--modal-btn-hover-background);color:var(--modal-btn-hover-text);text-decoration:none;top:-3px;left:-3px;box-shadow:3px 3px 0 0 var(--btn-shadow)}.atcb-subevent-btn{border:.15em solid var(--btn-border);display:flex;align-items:flex-start;cursor:pointer;font-family:var(--font);font-size:1em;background-color:var(--date-btn-background);padding:0;margin:0;touch-action:manipulation;position:relative;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;top:0;left:0;box-shadow:0 0 0 0 var(--btn-shadow);width:100%}.atcb-subevent-btn:hover{align-items:center;top:-3px;left:-3px;box-shadow:3px 3px 0 0 var(--btn-shadow)}.atcb-subevent-btn:focus,.atcb-subevent-btn:hover{background-color:var(--date-btn-hover-background)}.atcb-subevent-btn:focus-visible{outline:2px solid var(--accent-color)}.atcb-subevent-btn+.atcb-subevent-btn{margin-top:30px}.atcb-date-btn-left{align-self:stretch;background-color:var(--date-btn-cal-background);color:var(--date-btn-hover-background);padding:.7em .8em .8em;width:2.7em;align-items:center;display:flex;flex-direction:column;flex-shrink:0}.atcb-subevent-btn:hover .atcb-date-btn-left{opacity:.8}.atcb-date-btn-day{color:var(--date-btn-cal-day-text);font-weight:400;font-size:2em;word-break:keep-all;padding-bottom:.1em}.atcb-initialized[lang=ja] .atcb-date-btn-day,.atcb-initialized[lang=ko] .atcb-date-btn-day,.atcb-initialized[lang=zh] .atcb-date-btn-day{font-size:1.3em}.atcb-date-btn-month{color:var(--date-btn-cal-month-text);font-weight:600;font-size:1em}.atcb-date-btn-right{position:relative;color:var(--date-btn-text);min-width:13.5em;overflow-wrap:anywhere}.atcb-subevent-btn .atcb-date-btn-right{width:100%}.atcb-date-btn-details{opacity:1;padding:.7em .8em;text-align:left}.atcb-rtl .atcb-date-btn-details{text-align:right}.atcb-date-btn-hover{position:absolute;top:0;left:0;width:100%;opacity:0;height:100%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:1em;padding:.4em .7em;box-sizing:border-box}.atcb-subevent-btn:hover .atcb-date-btn-details{opacity:0}.atcb-subevent-btn:hover .atcb-date-btn-hover{opacity:1}.atcb-date-btn-headline{font-weight:600;font-size:.9em;margin-bottom:.5em;overflow:hidden;display:-webkit-box;-webkit-line-clamp:var(--date-btn-headline-line-clamp);-webkit-box-orient:vertical}.atcb-date-btn-content{display:flex;align-items:flex-start;font-size:.8em;color:var(--date-btn-text-secondary)}.atcb-date-btn-content.atcb-date-btn-cancelled{color:var(--form-error);font-weight:700}.atcb-date-btn-content-location{overflow:hidden;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;word-break:break-all}.atcb-date-btn-content-icon{display:inline-block;height:.8em;margin-right:.4em;margin-left:0;width:.9em;flex-shrink:0}.atcb-rtl .atcb-date-btn-content-icon{margin-right:0;margin-left:.4em}.atcb-initialized[lang=ja] .atcb-date-btn-content:not(.atcb-date-btn-content-location) .atcb-date-btn-content-icon,.atcb-initialized[lang=ko] .atcb-date-btn-content:not(.atcb-date-btn-content-location) .atcb-date-btn-content-icon,.atcb-initialized[lang=zh] .atcb-date-btn-content:not(.atcb-date-btn-content-location) .atcb-date-btn-content-icon{margin-top:.15em}.atcb-date-btn-content-icon svg{height:100%;fill:currentcolor;width:100%}.atcb-date-btn-content+.atcb-date-btn-content{margin-top:.3em}.atcb-date-btn-content-text span:not(.atcb-icon-ical){padding-right:.3em;display:inline-block}.atcb-checkmark{display:none}.atcb-saved .atcb-checkmark{box-sizing:content-box;color:var(--btn-text);display:block;position:absolute;top:-2.1em;right:-2em;padding:.5em;border-radius:100%;height:1.5em}.atcb-checkmark svg{height:100%;width:auto}#atcb-bgoverlay{backdrop-filter:blur(2px);-webkit-backdrop-filter:blur(2px);background-color:var(--overlay-background);border:0;box-sizing:border-box;display:flex;height:calc(100vh + 100px);inset-inline:0;left:0;right:0;top:0;min-height:100%;min-width:100%;overflow-y:auto;padding:20px 20px 130px;position:fixed;width:100vw;z-index:14000000}#atcb-bgoverlay:not(dialog){animation:atcb-bgoverlay-animate .2s ease 0s 1 normal forwards;opacity:0}#atcb-bgoverlay.atcb-no-bg{animation:none;backdrop-filter:none;-webkit-backdrop-filter:none;opacity:1;background-color:transparent}@keyframes atcb-bgoverlay-animate{0%{opacity:0}100%{opacity:1}}#atcb-bgoverlay.atcb-click:hover{cursor:var(--overlay-cursor)}.atcb-icon-outlookcom,.atcb-icon.atcb-icon-ms365{padding-bottom:.05em}.atcb-icon.atcb-icon-apple,.atcb-icon.atcb-icon-ical{padding-bottom:.15em}.atcb-icon.atcb-icon-rsvp{height:1.5em;width:1.5em}.atcb-icon.atcb-icon-apple svg{fill:currentcolor}.atcb-icon.atcb-icon-ical svg{fill:currentcolor}.atcb-icon.atcb-icon-ms365 svg{fill:var(--icon-ms365-color)}.atcb-icon.atcb-icon-yahoo svg{fill:var(--icon-yahoo-color)}.atcb-icon.atcb-icon-google svg,.atcb-icon.atcb-icon-msteams svg,.atcb-icon.atcb-icon-outlookcom svg{filter:var(--icon-filter)}.rsvp-inline-wrapper{background-color:transparent;border:0;filter:none;min-width:100%;margin-bottom:0}.atcb-modal-content.no-headline{padding-top:1.8em}.rsvp-inline-wrapper .atcb-modal-content,.rsvp-inline-wrapper .atcb-modal-headline,.rsvp-inline-wrapper.atcb-modal-box{background-color:transparent;border-radius:0;box-sizing:border-box;padding:0;width:100%}.rsvp-inline-wrapper .atcb-modal-headline{padding-bottom:1.5em}.pro{text-align:center}.pro ol,.pro ul{margin:auto;text-align:left;width:fit-content}.pro a:not(.atcb-modal-btn),.pro a:not(.atcb-modal-btn):active,.pro a:not(.atcb-modal-btn):visited{color:var(--modal-btn-text);text-decoration:underline;text-decoration-thickness:2px;text-decoration-color:var(--accent-color)}.pro a:not(.atcb-modal-btn):hover{color:var(--accent-color);text-decoration:none}.pro .pro-share-buttons{display:flex;flex-wrap:wrap;justify-content:center}.pro #rsvp-atcb{display:flex;flex-wrap:wrap;gap:.4em}.pro-form{text-align:left}.pro-form:not(.no-intro){border-top:2px solid var(--modal-btn-border);margin-top:1.5em;padding-top:1.5em}.pro-form.no-intro:not(.no-headline){padding-top:.5em}.pro-field+.pro-field{padding-top:1.3em}.pro-field-type-label+.pro-field-type-radio{padding-top:0}.pro-field-type-checkbox,.pro-field-type-radio div{align-items:center;display:flex}.pro-field-type-checkbox input,.pro-field-type-radio input{cursor:pointer}.pro-field label{display:block;font-size:.9em;opacity:.7}.pro-field-type-checkbox label,.pro-field-type-radio label{cursor:pointer;opacity:.8;padding-left:.3em}.pro-field input[type=email],.pro-field input[type=number],.pro-field input[type=text]{background-color:var(--input-background);border:2px solid var(--modal-btn-border);border-radius:var(--input-border-radius);box-sizing:border-box;caret-color:var(--accent-color);color:var(--modal-text);font-size:.9em;opacity:.8;padding:.7em;transition:all .1s ease-in-out;width:100%}.pro-field input[type=checkbox],.pro-field input[type=radio]{accent-color:var(--accent-color);height:1.2rem;opacity:.8;transition:all .1s ease-in-out;width:1.2em}.pro-field input:disabled,.pro-field input:disabled+label{cursor:not-allowed;opacity:.75;filter:brightness(95%)}.pro-field input:not([disabled]):hover{opacity:1}.pro-field input[type=email]:focus,.pro-field input[type=number]:focus,.pro-field input[type=text]:focus{border-color:var(--accent-color);outline:1px solid var(--accent-color)}.pro-field input[type=checkbox]:focus,.pro-field input[type=radio]:focus{outline-color:var(--accent-color);outline-width:2px}#submit-error{color:var(--form-error);display:none;font-weight:700;padding-top:1.5em;text-align:center}.pro-form.form-error #submit-error{display:block}.pro-field input.error{accent-color:var(--form-error);border:2px solid var(--form-error)}.pro-field input.error+label,.pro-field:has(input.error) label{color:var(--form-error);opacity:1}#rsvp-status-group{border-bottom:2px solid var(--modal-btn-border);font-weight:700;margin-bottom:1.5em;padding-bottom:2em;text-align:center}#rsvp-status-group .pro-field{align-items:center;display:flex;flex-wrap:wrap;gap:1.2em;justify-content:center;margin-top:1em}@media (width <= 575px){#rsvp-status-group .pro-field{flex-direction:column}#rsvp-status-group .pro-field div{width:80%}}#rsvp-status-group .pro-field div{min-width:28%;position:relative}#rsvp-status-group input{opacity:0;position:absolute;top:0;left:0;height:100%;width:100%;margin:0;cursor:pointer}#rsvp-status-group label{align-items:center;border:2px solid var(--modal-btn-text);border-radius:var(--input-border-radius);color:var(--modal-btn-text);display:flex;flex-direction:column;font-weight:700;text-transform:uppercase;justify-content:center;opacity:.6;padding:.8em;transition:all .1s ease-in-out;width:100%}#rsvp-status-group label.status-confirmed{border-color:var(--form-success);color:var(--form-success)}#rsvp-status-group label.status-declined{border-color:var(--form-error);color:var(--form-error)}#rsvp-status-group input:checked+label{background-color:var(--modal-text);color:var(--status-active-text);opacity:1;transform:scale(1.1)}#rsvp-status-group input:focus-visible+label{outline:2px solid var(--accent-color);outline-offset:2px}#rsvp-status-group input:not([disabled])+label:hover,#rsvp-status-group input:not([disabled]):hover+label{opacity:1;transform:scale(1.08)}#rsvp-status-group input:checked+label.status-confirmed{background-color:var(--form-success)}#rsvp-status-group input:checked+label.status-declined{background-color:var(--form-error)}#rsvp-success-msg,#rsvp-success-msg-demo,#rsvp-success-msg-doi,#rsvp-success-msg-email,#ty-success-msg{display:none;font-weight:700;line-height:1.6em;padding-top:.5em;text-align:center}#rsvp-success-msg,#rsvp-success-msg-demo,#ty-success-msg{padding:1.5em 0}#rsvp-success-msg-demo,#rsvp-success-msg-email{color:var(--form-success)}#rsvp-success-msg-doi{color:var(--form-error);padding-top:1em;font-size:.8em}#pro-form-submit{display:block;margin:auto;min-width:150px}.pro-waiting{background-color:var(--modal-btn-background);border:.2em solid var(--modal-btn-border);border-radius:var(--btn-border-radius);box-sizing:border-box;color:var(--modal-btn-text);cursor:wait;display:none;line-height:.5em;margin:auto;min-width:150px;padding:.5em 1.25em 1.2em;text-align:center;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;width:fit-content}@media (width > 575px){#pro-form-submit,.pro-waiting{min-width:200px}}.pro-waiting span:not(.atcb-icon-ical){animation-name:blink;animation-duration:1s;animation-iteration-count:infinite;animation-fill-mode:both;font-size:2.5em}.pro-field label span:not(.atcb-icon-ical){color:var(--form-error);font-weight:700;padding-left:2px}.pro-waiting span:not(.atcb-icon-ical):nth-child(2){animation-delay:.15s}.pro-waiting span:not(.atcb-icon-ical):nth-child(3){animation-delay:.3s}@keyframes blink{0%{opacity:.2}20%{opacity:1}100%{opacity:.2}}.pro #rsvp-sent-content{align-items:center;display:flex;flex-direction:column;gap:1.5em}#rsvp-status-group span{color:inherit}.atcb-modal-content .pro p{margin:0}.atcb-modal-content .pro p.pro-pt{margin-top:1.5em}.atcb-modal-content .pro .pro-field p{font-size:.9em}.pro .btn-flex{align-items:center;display:flex}.pro .atcb-modal-btn svg{fill:none;height:1.5em;margin-right:.5em;stroke:currentcolor;width:auto}#atcb-reference{box-sizing:border-box;filter:drop-shadow(0 0 3px rgba(255 255 255 / 80%));height:auto;padding:8px 0;transform:translate3d(0,0,0);width:100%;z-index:15000000}#atcb-reference.fixed-ref{position:fixed;bottom:10px;right:40px;width:auto}#atcb-reference.atcb-dropup{position:absolute}:host(.atcb-dark) #atcb-reference{filter:drop-shadow(0 0 5px #000)}#atcb-reference a,#atcb-reference a:active,#atcb-reference a:visited{opacity:.4;width:150px;max-width:100%;margin:auto;display:block;text-decoration:none}#atcb-reference.fixed-ref a{opacity:.6}#atcb-reference a:hover{opacity:.9;text-decoration:none}#atcb-reference svg{fill:var(--list-text)}`,round:`:host{width:fit-content;--base-font-size-l:16px;--base-font-size-m:16px;--base-font-size-s:16px;--font:arial,helvetica,sans-serif;--accent-color:#1e90ff;--wrapper-padding:1px;--buttonslist-gap:5px;--btn-background:#f5f5f5;--btn-hover-background:#fff;--btn-border:#d2d2d2;--btn-border-radius:500px;--btn-padding-x:1.3em;--btn-padding-y:.65em;--btn-font-weight:600;--btn-text:#333;--btn-hover-text:#000;--btn-shadow:rgba(0 0 0 / 15%) 0 4px 10px -2px,rgba(0 0 0 / 20%) 0 2px 3px -1px;--btn-hover-shadow:rgba(0 0 0 / 30%) 0 5px 15px -3px,rgba(0 0 0 / 25%) 0 3px 5px -2px;--btn-active-shadow:rgba(0 0 0 / 35%) 0 6px 15px -3px,rgba(0 0 0 / 25%) 0 4px 6px -2px;--list-background:#f5f5f5;--list-hover-background:#fff;--list-text:#333;--list-font-weight:400;--list-hover-text:#000;--list-close-background:#e5e5e5;--list-close-text:#777;--list-border-radius:11px;--list-padding:.8em 1.2em;--list-min-width:100%;--list-shadow:rgba(0 0 0 / 20%) 0 4px 13px -2px,rgba(0 0 0 / 23%) 0 2px 4px -1px;--list-modal-shadow:rgba(0 0 0 / 50%) 0 4px 30px -3px,rgba(0 0 0 / 30%) 0 2px 8px -2px;--modal-text:#000;--modal-text-align:left;--modal-text-align-rtl:right;--modal-background:#f5f5f5;--modal-border-radius:9px;--modal-shadow:drop-shadow(3px 6px 25px rgba(0 0 0 / 65%));--modal-btn-bar:#c6c8cd;--modal-btn-background:#f5f5f5;--modal-btn-secondary-background:#e2e1e6;--modal-btn-hover-background:#fff;--modal-btn-border:#d2d2d2;--modal-btn-font-weight:600;--modal-btn-text:#2e2e2e;--modal-btn-hover-text:#161616;--modal-btn-secondary-text:#666567;--modal-btn-shadow:rgba(0 0 0 / 10%) 2px 3px 10px -3px,rgba(0 0 0 / 25%) 1px 1px 8px -4px;--modal-btn-hover-shadow:rgba(0 0 0 / 35%) 3px 5px 15px -2px,rgba(0 0 0 / 20%) 2px 4px 25px -6px;--modal-headline-text-align:center;--modal-headline-text-transform:none;--input-border-radius:6px;--input-background:#fff;--status-active-text:#fff;--form-error:#c5372c;--form-success:#338a36;--date-btn-text:#1d1d1e;--date-btn-text-secondary:#3a3a3f;--date-btn-cal-day-text:#fff;--date-btn-cal-month-text:#d3d2d7;--date-btn-cal-background:#313132;--date-btn-background:#eae9ed;--date-btn-hover-background:#fff;--date-btn-headline-line-clamp:1;--date-btn-shadow:rgba(0 0 0 / 10%) 0 4px 10px -2px,rgba(0 0 0 / 15%) 0 2px 3px -1px;--date-btn-hover-shadow:rgba(0 0 0 / 20%) 0 5px 12px -2px,rgba(0 0 0 / 20%) 0 3px 4px -2px;--checkmark-background:drop-shadow(0 0 3px #fff);--overlay-background:rgba(20 20 20 / 25%);--overlay-cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23777' width='16' height='16' viewBox='0 0 122.878 122.88'%3E%3Cpath d='M1.426 8.313a4.87 4.87 0 0 1 0-6.886 4.87 4.87 0 0 1 6.886 0l53.127 53.127 53.127-53.127a4.87 4.87 0 0 1 6.887 0 4.87 4.87 0 0 1 0 6.886L68.324 61.439l53.128 53.128a4.87 4.87 0 0 1-6.887 6.886L61.438 68.326 8.312 121.453a4.87 4.87 0 0 1-6.886 0 4.87 4.87 0 0 1 0-6.886l53.127-53.128L1.426 8.313h0z'/%3E%3C/svg%3E") 16 16,crosshair;--icon-ms365-color:#ea3e23;--icon-yahoo-color:#5f01d1;--icon-filter:none}:host(.atcb-dark){--btn-background:#2e2e2e;--btn-hover-background:#373737;--btn-border:#4d4d4d;--btn-text:#dedede;--btn-hover-text:#f1f1f1;--btn-shadow:rgba(255 255 255 / 5%) -3px -3px 30px -1px,rgba(0 0 0 / 40%) 2px 3px 10px -2px,rgba(0 0 0 / 40%) 1px 2px 3px -1px;--btn-hover-shadow:rgba(0 0 0 / 90%) 2px 5px 20px -4px,rgba(0 0 0 / 50%) 1px 2px 6px -2px;--btn-active-shadow:rgba(0 0 0 / 90%) 2px 5px 20px -4px,rgba(0 0 0 / 50%) 1px 2px 6px -2px;--list-background:#2e2e2e;--list-hover-background:#373737;--list-text:#dedede;--list-hover-text:#f1f1f1;--list-close-background:#282828;--list-shadow:rgba(0 0 0 / 60%) 0 4px 20px -2px,rgba(0 0 0 / 40%) 0 2px 4px -1px;--list-modal-shadow:rgba(0 0 0 / 40%) -1px 3px 30px 2px;--modal-text:#f1f1f1;--modal-background:#242424;--modal-shadow:drop-shadow(3px 6px 25px rgba(0 0 0 / 90%));--modal-btn-bar:#38383a;--modal-btn-background:#181819;--modal-btn-secondary-background:#2e2d30;--modal-btn-hover-background:#434246;--modal-btn-border:#434246;--modal-btn-text:#dbdbdb;--modal-btn-hover-text:#fff;--modal-btn-secondary-text:#b8b8b8;--modal-btn-shadow:rgba(255 255 255 / 5%) -2px -2px 10px,rgba(0 0 0 / 40%) 3px 3px 10px -2px,rgba(0 0 0 / 40%) 1px 2px 5px -1px;--input-background:#434246;--status-active-text:#000;--form-error:#db8680;--form-success:#99de9c;--date-btn-text:#ebebf0;--date-btn-text-secondary:#b5b5bd;--date-btn-cal-day-text:#101010;--date-btn-cal-month-text:#3e3e3f;--date-btn-cal-background:#c7c7cd;--date-btn-background:#363636;--date-btn-hover-background:#474747;--date-btn-shadow:rgba(0 0 0 / 60%) 0 0 20px -2px,rgba(0 0 0 / 30%) 1px 2px 3px -1px;--checkmark-background:drop-shadow(0 0 3px #0a0a0a);--overlay-background:rgba(20 20 20 / 60%);--icon-ms365-color:#ea3e23;--icon-yahoo-color:#bebebe;--icon-filter:grayscale(.2)}.atcb-button-wrapper,.atcb-list,.atcb-modal-box{font-size:var(--base-font-size-l)}@media (width <= 991px){.atcb-button-wrapper,.atcb-list,.atcb-modal-box{font-size:var(--base-font-size-m)}}@media (width <= 575px){.atcb-button-wrapper,.atcb-list,.atcb-modal-box{font-size:var(--base-font-size-s)}}.atcb-initialized.atcb-buttons-list{gap:var(--buttonslist-gap)}.atcb-button-wrapper{display:block;padding:var(--wrapper-padding);position:relative}.atcb-button{align-items:center;background-color:var(--btn-background);border:1px solid var(--btn-border);border-radius:var(--btn-border-radius);box-shadow:var(--btn-shadow);color:var(--btn-text);cursor:pointer;display:flex;font-family:var(--font);font-size:1em;font-weight:var(--btn-font-weight);justify-content:center;line-height:1.5em;margin:.13em;max-width:350px;padding:var(--btn-padding-y) var(--btn-padding-x);position:relative;text-align:center;touch-action:manipulation;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;width:auto;z-index:1}.atcb-button.atcb-no-text{min-width:0;border-radius:100%;display:flex;place-content:center center;align-items:center;height:3em;width:3em;padding:0}.atcb-rtl .atcb-button{direction:rtl;text-align:right}.atcb-button:focus-visible{outline:2px solid var(--accent-color)}.atcb-button:not([disabled]):focus,.atcb-button:not([disabled]):hover{background-color:var(--btn-hover-background);box-shadow:var(--btn-hover-shadow);color:var(--btn-hover-text);margin:0;padding:calc(var(--btn-padding-y) + .13em) calc(var(--btn-padding-x) + .13em)}.atcb-button.atcb-no-text.atcb-active,.atcb-button.atcb-no-text:focus,.atcb-button.atcb-no-text:hover{height:3.26em;width:3.26em;padding:0}.atcb-button.atcb-active:not(.atcb-modal-style,.atcb-dropoverlay){z-index:15000000}.atcb-button.atcb-active:not(.atcb-modal-style,.atcb-dropoverlay,.atcb-no-text),.atcb-button.atcb-single:not(.atcb-no-text,[disabled]):focus,.atcb-button.atcb-single:not(.atcb-no-text,[disabled]):hover{background-color:var(--btn-hover-background);box-shadow:var(--btn-active-shadow);color:var(--btn-hover-text);margin:0;padding:calc(var(--btn-padding-y) + .13em) calc(var(--btn-padding-x) + .13em)}.atcb-button.atcb-active.atcb-no-text:not(.atcb-modal-style,.atcb-dropoverlay),.atcb-button.atcb-single.atcb-no-text:not([disabled]):focus,.atcb-button.atcb-single.atcb-no-text:not([disabled]):hover{background-color:var(--btn-hover-background);box-shadow:var(--btn-active-shadow);color:var(--btn-hover-text);margin:0;padding:calc(var(--btn-padding-y) + .28em) calc(var(--btn-padding-x) + .13em)}.atcb-button.atcb-dropup::after,.atcb-button:not(.atcb-modal-style,.atcb-dropoverlay,.atcb-dropup)::before{content:"";width:0;height:0;position:absolute;left:0;right:0;margin:0 auto}.atcb-button:not(.atcb-modal-style,.atcb-dropoverlay,.atcb-dropup)::before{top:100%;border:0 solid transparent;border-bottom:none;border-top-color:var(--btn-border)}.atcb-button.atcb-dropup::after{bottom:100%;border:0 solid transparent;border-top:none;border-bottom-color:var(--btn-border)}.atcb-button.atcb-active.atcb-dropup::after,.atcb-button.atcb-active:not(.atcb-modal-style,.atcb-dropoverlay,.atcb-dropup)::before{border-width:.35em;transition:border-width .1s linear .1s}.atcb-button.atcb-active.atcb-dropoverlay{z-index:14000090}.atcb-icon{flex-grow:0;flex-shrink:0;height:1em;line-height:1em;margin-right:.8em;width:1em}.atcb-rtl .atcb-icon{margin-right:0;margin-left:.8em}.atcb-no-text .atcb-icon{margin-right:0;margin-left:0}.atcb-icon svg{fill:currentcolor;height:100%;width:100%}.atcb-text{overflow-wrap:anywhere}.atcb-dropdown-anchor{bottom:-15px;height:0;width:100%;opacity:0;position:absolute}.atcb-list-wrapper{box-sizing:border-box;font-weight:var(--list-font-weight);position:absolute;z-index:14000090;width:auto}.atcb-list-wrapper:not(.atcb-dropup,.atcb-dropoverlay){animation:list-entrance-bottom .2s ease 0s 1 normal forwards}.atcb-list-wrapper.atcb-dropup{animation:list-entrance-top .2s ease 0s 1 normal forwards}.atcb-list-wrapper.atcb-dropoverlay{animation:list-entrance-center .2s ease 0s 1 normal forwards;z-index:15000000}@keyframes list-entrance-bottom{0%{opacity:0;transform:translateY(250px)}100%{opacity:1;transform:translateY(0)}}@keyframes list-entrance-top{0%{opacity:0;transform:translateY(-250px)}100%{opacity:1;transform:translateY(0)}}@keyframes list-entrance-center{0%{opacity:0;transform:scaleY(1)}1%{opacity:1;transform:scaleY(0)}100%{opacity:1;transform:scaleY(1)}}.atcb-list{background-color:var(--list-background);border-radius:var(--list-border-radius);box-sizing:border-box;box-shadow:var(--list-shadow);color:var(--list-text);display:block;font-family:var(--font);min-width:var(--list-min-width);position:relative;user-select:none;-webkit-user-select:none;width:fit-content}.atcb-list-item{align-items:center;background-color:var(--list-background);box-sizing:border-box;cursor:pointer;display:flex;font-size:1em;line-height:1.75em;padding:var(--list-padding);text-align:left;touch-action:manipulation;-webkit-tap-highlight-color:transparent}.atcb-rtl .atcb-list-item{direction:rtl;text-align:right}.atcb-list-item:hover{background-color:var(--list-hover-background);color:var(--list-hover-text)}.atcb-list-item:focus-visible{background-color:var(--list-hover-background);color:var(--accent-color);outline:0}.atcb-list-item:last-child{border-radius:0 0 var(--list-border-radius) var(--list-border-radius)}.atcb-list-item:first-child{border-radius:var(--list-border-radius) var(--list-border-radius) 0 0}.atcb-list-item:only-child{border-radius:var(--list-border-radius)}.atcb-list.atcb-modal{box-shadow:var(--list-modal-shadow)}.atcb-list-item .atcb-icon{margin:0 auto}.atcb-list-item .atcb-icon+.atcb-text{margin-left:.7em;width:100%}.atcb-rtl .atcb-list-item .atcb-icon+.atcb-text{margin-left:0;margin-right:.7em}.atcb-list-item-close{background-color:var(--list-close-background)}.atcb-list-item.atcb-list-item-close:not(:focus-visible){color:var(--list-close-text)}.atcb-list-item-close svg{fill:currentcolor}.atcb-modal{display:block;margin:auto;width:auto;min-width:auto;position:relative;z-index:14000090}.atcb-modal-box{filter:var(--modal-shadow);color:var(--modal-text);cursor:default;box-sizing:border-box;font-family:var(--font);line-height:1.5em;text-align:var(--modal-text-align);user-select:none;-webkit-user-select:none;touch-action:manipulation;width:100%;margin-bottom:20px;-webkit-tap-highlight-color:transparent}@media (width > 575px){.atcb-modal-box{width:32em}}.atcb-modal-box.atcb-rtl{text-align:var(--modal-text-align-rtl);direction:rtl;padding:1.25em 1em 1.25em 2em}.atcb-modal-icon{height:2.5em;width:2.5em;border-radius:100%;background-color:var(--modal-background);padding:1.75em;margin:auto}.atcb-modal-icon svg{fill:currentcolor;height:100%;width:100%}.atcb-modal-headline{background-color:var(--modal-background);border-radius:var(--modal-border-radius) var(--modal-border-radius) 0 0;font-size:1.3em;font-weight:600;line-height:1.5em;padding:1.8em 1.5em 1.3em;text-transform:var(--modal-headline-text-transform);text-align:var(--modal-headline-text-align)}.atcb-modal-icon+.atcb-modal-headline{margin-top:-2.6em;padding-top:2.6em}.atcb-modal-content{background-color:var(--modal-background);font-size:1em;padding:.3em 2em 2.2em}.atcb-modal-icon+.atcb-modal-content{border-radius:var(--modal-border-radius) var(--modal-border-radius) 0 0;margin-top:-2.6em;padding-top:2.6em}.atcb-modal-content-subevents{margin:auto;width:fit-content}@media (width <= 575px){.atcb-modal-headline{padding:1.8em 1em 1em}.atcb-modal-content{padding:.3em 1.5em 1.5em}.atcb-modal-icon+.atcb-modal-content{padding-top:1.8em}}.atcb-modal-buttons{background-color:var(--modal-btn-bar);border-radius:0 0 var(--modal-border-radius) var(--modal-border-radius);box-sizing:border-box;padding:.6em;text-align:center;width:100%;display:flex;justify-content:center;flex-flow:row-reverse wrap;align-items:center}a.atcb-modal-btn,button.atcb-modal-btn{background-color:var(--modal-btn-secondary-background);border:0;border-radius:var(--btn-border-radius);box-shadow:var(--modal-btn-shadow);color:var(--modal-btn-secondary-text);cursor:pointer;display:inline-block;font-family:var(--font);font-size:.9em;font-weight:var(--modal-btn-font-weight);line-height:1em;margin:.625em;padding:1em 1.25em;position:relative;text-align:center;text-decoration:none;touch-action:manipulation;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent}a.atcb-modal-btn.btn-small,button.atcb-modal-btn.btn-small{padding:.6em .8em}a.atcb-modal-btn.atcb-modal-btn-primary,button.atcb-modal-btn.atcb-modal-btn-primary{background-color:var(--modal-btn-background);color:var(--modal-btn-text)}a.atcb-modal-btn.atcb-modal-btn-border,button.atcb-modal-btn.atcb-modal-btn-border{border:1px solid var(--modal-btn-border)}a.atcb-modal-btn:focus-visible,button.atcb-modal-btn:focus-visible{background-color:var(--modal-btn-hover-background);outline:2px solid var(--accent-color)}a.atcb-modal-btn:disabled,button.atcb-button:disabled,button.atcb-modal-btn:disabled,button.atcb-subevent-btn:disabled{cursor:not-allowed;opacity:.75;filter:brightness(95%);border-style:dashed;box-shadow:none}a.atcb-modal-btn:not([disabled]):hover,button.atcb-modal-btn:not([disabled]):hover{background-color:var(--modal-btn-hover-background);box-shadow:var(--modal-btn-hover-shadow);color:var(--modal-btn-hover-text);text-decoration:none}.atcb-subevent-btn{display:flex;align-items:flex-start;cursor:pointer;font-family:var(--font);font-size:1em;box-shadow:var(--date-btn-shadow);background-color:var(--date-btn-background);border:0;border-radius:7px 4px 4px 7px;padding:0;margin:0;touch-action:manipulation;position:relative;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;width:100%}.atcb-subevent-btn:hover{align-items:center}.atcb-subevent-btn:focus,.atcb-subevent-btn:hover{background-color:var(--date-btn-hover-background);box-shadow:var(--date-btn-hover-shadow)}.atcb-subevent-btn:focus-visible{outline:2px solid var(--accent-color)}.atcb-subevent-btn+.atcb-subevent-btn{margin-top:30px}.atcb-date-btn-left{border-radius:4px 0 0 4px;align-self:stretch;background-color:var(--date-btn-cal-background);color:var(--date-btn-hover-background);padding:.7em .8em .8em;width:2.7em;align-items:center;display:flex;flex-direction:column;flex-shrink:0}.atcb-rtl .atcb-date-btn-left{border-radius:0 4px 4px 0}.atcb-subevent-btn:hover .atcb-date-btn-left{opacity:.8}.atcb-date-btn-day{color:var(--date-btn-cal-day-text);font-weight:400;font-size:2em;word-break:keep-all;padding-bottom:.1em}.atcb-initialized[lang=ja] .atcb-date-btn-day,.atcb-initialized[lang=ko] .atcb-date-btn-day,.atcb-initialized[lang=zh] .atcb-date-btn-day{font-size:1.3em}.atcb-date-btn-month{color:var(--date-btn-cal-month-text);font-weight:600;font-size:1em}.atcb-date-btn-right{position:relative;color:var(--date-btn-text);min-width:13.5em;overflow-wrap:anywhere}.atcb-subevent-btn .atcb-date-btn-right{width:100%}.atcb-date-btn-details{opacity:1;padding:.7em .8em;text-align:left}.atcb-rtl .atcb-date-btn-details{text-align:right}.atcb-date-btn-hover{position:absolute;top:0;left:0;width:100%;opacity:0;height:100%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:1em;padding:.4em .7em;box-sizing:border-box}.atcb-subevent-btn:hover .atcb-date-btn-details{opacity:0}.atcb-subevent-btn:hover .atcb-date-btn-hover{opacity:1}.atcb-date-btn-headline{font-weight:600;font-size:.9em;margin-bottom:.5em;overflow:hidden;display:-webkit-box;-webkit-line-clamp:var(--date-btn-headline-line-clamp);-webkit-box-orient:vertical}.atcb-date-btn-content{display:flex;align-items:flex-start;font-size:.8em;color:var(--date-btn-text-secondary)}.atcb-date-btn-content.atcb-date-btn-cancelled{color:var(--form-error);font-weight:700}.atcb-date-btn-content-location{overflow:hidden;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;word-break:break-all}.atcb-date-btn-content-icon{display:inline-block;height:.8em;margin-right:.4em;margin-left:0;width:.9em;flex-shrink:0}.atcb-rtl .atcb-date-btn-content-icon{margin-right:0;margin-left:.4em}.atcb-initialized[lang=ja] .atcb-date-btn-content:not(.atcb-date-btn-content-location) .atcb-date-btn-content-icon,.atcb-initialized[lang=ko] .atcb-date-btn-content:not(.atcb-date-btn-content-location) .atcb-date-btn-content-icon,.atcb-initialized[lang=zh] .atcb-date-btn-content:not(.atcb-date-btn-content-location) .atcb-date-btn-content-icon{margin-top:.15em}.atcb-date-btn-content-icon svg{height:100%;fill:currentcolor;width:100%}.atcb-date-btn-content+.atcb-date-btn-content{margin-top:.3em}.atcb-date-btn-content-text span:not(.atcb-icon-ical){padding-right:.3em;display:inline-block}.atcb-checkmark{display:none}.atcb-saved .atcb-checkmark{box-sizing:content-box;color:var(--btn-text);display:block;position:absolute;top:-.9em;right:-.5em;padding:.5em;border-radius:100%;height:1.2em}.atcb-button.atcb-active:not(.atcb-modal-style,.atcb-dropoverlay) .atcb-checkmark,.atcb-button:focus .atcb-checkmark,.atcb-button:hover .atcb-checkmark{top:-.77em;right:-.37em}.atcb-checkmark svg{height:100%;filter:var(--checkmark-background);width:auto}#atcb-bgoverlay{backdrop-filter:blur(2px);-webkit-backdrop-filter:blur(2px);background-color:var(--overlay-background);border:0;box-sizing:border-box;display:flex;height:calc(100vh + 100px);inset-inline:0;left:0;right:0;top:0;min-height:100%;min-width:100%;overflow-y:auto;padding:20px 20px 130px;position:fixed;width:100vw;z-index:14000000}#atcb-bgoverlay:not(dialog){animation:atcb-bgoverlay-animate .2s ease 0s 1 normal forwards;opacity:0}#atcb-bgoverlay.atcb-no-bg{animation:none;backdrop-filter:none;-webkit-backdrop-filter:none;opacity:1;background-color:transparent}@keyframes atcb-bgoverlay-animate{0%{opacity:0}100%{opacity:1}}#atcb-bgoverlay.atcb-click:hover{cursor:var(--overlay-cursor)}.atcb-icon-outlookcom,.atcb-icon.atcb-icon-ms365{padding-bottom:.05em}.atcb-icon.atcb-icon-apple,.atcb-icon.atcb-icon-ical{padding-bottom:.15em}.atcb-icon.atcb-icon-trigger{padding-bottom:.15em}.atcb-icon.atcb-icon-rsvp{height:1.5em;width:1.5em}.atcb-icon.atcb-icon-apple svg{fill:currentcolor}.atcb-icon.atcb-icon-ical svg{fill:currentcolor}.atcb-icon.atcb-icon-ms365 svg{fill:var(--icon-ms365-color)}.atcb-icon.atcb-icon-yahoo svg{fill:var(--icon-yahoo-color)}.atcb-icon.atcb-icon-google svg,.atcb-icon.atcb-icon-msteams svg,.atcb-icon.atcb-icon-outlookcom svg{filter:var(--icon-filter)}.rsvp-inline-wrapper{filter:none;min-width:100%;margin-bottom:0}.atcb-modal-content.no-headline{border-radius:var(--modal-border-radius) var(--modal-border-radius) 0 0;padding-top:1.8em}.rsvp-inline-wrapper .atcb-modal-content,.rsvp-inline-wrapper .atcb-modal-headline,.rsvp-inline-wrapper.atcb-modal-box{background-color:transparent;border-radius:0;box-sizing:border-box;padding:0;width:100%}.rsvp-inline-wrapper .atcb-modal-headline{padding-bottom:1.5em}.pro{text-align:center}.pro ol,.pro ul{margin:auto;text-align:left;width:fit-content}.pro a:not(.atcb-modal-btn),.pro a:not(.atcb-modal-btn):active,.pro a:not(.atcb-modal-btn):visited{color:var(--modal-btn-text);text-decoration:underline;text-decoration-thickness:2px;text-decoration-color:var(--accent-color)}.pro a:not(.atcb-modal-btn):hover{color:var(--accent-color);text-decoration:none}.pro .pro-share-buttons{display:flex;flex-wrap:wrap;justify-content:center}.pro #rsvp-atcb{display:flex;flex-wrap:wrap;gap:.4em}.pro-form{text-align:left}.pro-form:not(.no-intro){border-top:1px solid var(--modal-btn-border);margin-top:1.5em;padding-top:1.5em}.pro-form.no-intro:not(.no-headline){padding-top:.5em}.pro-field+.pro-field{padding-top:1.3em}.pro-field-type-label+.pro-field-type-radio{padding-top:0}.pro-field-type-checkbox,.pro-field-type-radio div{align-items:center;display:flex}.pro-field-type-checkbox input,.pro-field-type-radio input{cursor:pointer}.pro-field label{display:block;font-size:.9em;opacity:.7}.pro-field-type-checkbox label,.pro-field-type-radio label{cursor:pointer;opacity:.8;padding-left:.3em}.pro-field input[type=email],.pro-field input[type=number],.pro-field input[type=text]{background-color:var(--input-background);border:1px solid var(--modal-btn-border);border-radius:var(--input-border-radius);box-sizing:border-box;caret-color:var(--accent-color);color:var(--modal-text);font-size:.9em;opacity:.8;padding:.7em;transition:all .1s ease-in-out;width:100%}.pro-field input[type=checkbox],.pro-field input[type=radio]{accent-color:var(--accent-color);height:1.2rem;opacity:.8;transition:all .1s ease-in-out;width:1.2em}.pro-field input:disabled,.pro-field input:disabled+label{cursor:not-allowed;opacity:.75;filter:brightness(95%)}.pro-field input:not([disabled]):hover{opacity:1}.pro-field input[type=email]:focus,.pro-field input[type=number]:focus,.pro-field input[type=text]:focus{border-color:var(--accent-color);outline:1px solid var(--accent-color)}.pro-field input[type=checkbox]:focus,.pro-field input[type=radio]:focus{outline-color:var(--accent-color);outline-width:2px}#submit-error{color:var(--form-error);display:none;font-weight:700;padding-top:1.5em;text-align:center}.pro-form.form-error #submit-error{display:block}.pro-field input.error{accent-color:var(--form-error);border:2px solid var(--form-error)}.pro-field input.error+label,.pro-field:has(input.error) label{color:var(--form-error);opacity:1}#rsvp-status-group{border-bottom:1px solid var(--modal-btn-border);font-weight:700;margin-bottom:1.5em;padding-bottom:2em;text-align:center}#rsvp-status-group .pro-field{align-items:center;display:flex;flex-wrap:wrap;gap:1.2em;justify-content:center;margin-top:1em}@media (width <= 575px){#rsvp-status-group .pro-field{flex-direction:column}#rsvp-status-group .pro-field div{width:80%}}#rsvp-status-group .pro-field div{min-width:28%;position:relative}#rsvp-status-group input{opacity:0;position:absolute;top:0;left:0;height:100%;width:100%;margin:0;cursor:pointer}#rsvp-status-group label{align-items:center;border:1px solid var(--modal-btn-text);border-radius:var(--input-border-radius);box-shadow:var(--btn-shadow);color:var(--modal-btn-text);display:flex;flex-direction:column;font-weight:700;text-transform:uppercase;justify-content:center;opacity:.6;padding:.8em;transition:all .1s ease-in-out;width:100%}#rsvp-status-group label.status-confirmed{border-color:var(--form-success);color:var(--form-success)}#rsvp-status-group label.status-declined{border-color:var(--form-error);color:var(--form-error)}#rsvp-status-group input:checked+label{background-color:var(--modal-text);box-shadow:var(--btn-hover-shadow);color:var(--status-active-text);opacity:1;transform:scale(1.08)}#rsvp-status-group input:focus-visible+label{outline:2px solid var(--accent-color);outline-offset:2px}#rsvp-status-group input:not([disabled])+label:hover,#rsvp-status-group input:not([disabled]):hover+label{box-shadow:var(--btn-hover-shadow);opacity:1;transform:scale(1.08)}#rsvp-status-group input:checked+label.status-confirmed{background-color:var(--form-success)}#rsvp-status-group input:checked+label.status-declined{background-color:var(--form-error)}#rsvp-success-msg,#rsvp-success-msg-demo,#rsvp-success-msg-doi,#rsvp-success-msg-email,#ty-success-msg{display:none;font-weight:700;line-height:1.6em;padding-top:.5em;text-align:center}#rsvp-success-msg,#rsvp-success-msg-demo,#ty-success-msg{padding:1.5em 0}#rsvp-success-msg-demo,#rsvp-success-msg-email{color:var(--form-success)}#rsvp-success-msg-doi{color:var(--form-error);padding-top:1em;font-size:.8em}#pro-form-submit{display:block;margin:auto;min-width:150px}.pro-waiting{background-color:var(--modal-btn-background);border:1px solid var(--modal-btn-border);border-radius:var(--btn-border-radius);box-sizing:border-box;color:var(--modal-btn-text);cursor:wait;display:none;line-height:.5em;margin:auto;min-width:150px;padding:.5em 1.25em 1.2em;text-align:center;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;width:fit-content}@media (width > 575px){#pro-form-submit,.pro-waiting{min-width:200px}}.pro-waiting span:not(.atcb-icon-ical){animation-name:blink;animation-duration:1s;animation-iteration-count:infinite;animation-fill-mode:both;font-size:2.5em}.pro-field label span:not(.atcb-icon-ical){color:var(--form-error);font-weight:700;padding-left:2px}.pro-waiting span:not(.atcb-icon-ical):nth-child(2){animation-delay:.15s}.pro-waiting span:not(.atcb-icon-ical):nth-child(3){animation-delay:.3s}@keyframes blink{0%{opacity:.2}20%{opacity:1}100%{opacity:.2}}.pro #rsvp-sent-content{align-items:center;display:flex;flex-direction:column;gap:1.5em}#rsvp-status-group span{color:inherit}.atcb-modal-content .pro p{margin:0}.atcb-modal-content .pro p.pro-pt{margin-top:1.5em}.atcb-modal-content .pro .pro-field p{font-size:.9em}.pro .btn-flex{align-items:center;display:flex}.pro .atcb-modal-btn svg{fill:none;height:1.5em;margin-right:.5em;stroke:currentcolor;width:auto}#atcb-reference{box-sizing:border-box;filter:drop-shadow(0 0 3px rgba(255 255 255 / 80%));height:auto;padding:8px 0;transform:translate3d(0,0,0);width:100%;z-index:15000000}#atcb-reference.fixed-ref{position:fixed;bottom:10px;right:40px;width:auto}#atcb-reference.atcb-dropup{position:absolute}:host(.atcb-dark) #atcb-reference{filter:drop-shadow(0 0 5px #000)}#atcb-reference a,#atcb-reference a:active,#atcb-reference a:visited{opacity:.4;width:150px;max-width:100%;margin:auto;display:block;text-decoration:none}#atcb-reference.fixed-ref a{opacity:.6}#atcb-reference a:hover{opacity:.9;text-decoration:none}#atcb-reference svg{fill:var(--list-text)}`,neumorphism:`:host{width:fit-content;--base-font-size-l:16px;--base-font-size-m:16px;--base-font-size-s:16px;--font:arial,helvetica,sans-serif;--accent-color:#1e90ff;--wrapper-padding:0px;--buttonslist-gap:5px;--btn-background:#f5f5f5;--btn-hover-background:#fff;--btn-font-weight:600;--btn-text:#444;--btn-hover-text:#111;--btn-border-radius:15px;--btn-padding-x:1.2em;--btn-padding-y:1em;--btn-shadow:rgba(40 40 40 / 30%) 0.3em 0.3em 0.6em,rgba(255 255 255 / 70%) -0.1em -0.1em 0.3em;--btn-hover-shadow:rgba(40 40 40 / 50%) 0.4em 0.4em 0.8em,rgba(255 255 255 / 90%) -0.2em -0.2em 0.5em;--btn-active-shadow:inset rgba(40 40 40 / 40%) 0.15em 0.15em 0.3em,inset rgba(255 255 255 / 90%) -0.2em -0.2em 0.5em;--list-background:#f5f5f5;--list-hover-background:#fff;--list-text:#444;--list-font-weight:400;--list-hover-text:#111;--list-close-background:#e5e5e5;--list-close-text:#777;--list-border-radius:11px;--list-padding:1em;--list-min-width:100%;--list-shadow:rgba(40 40 40 / 30%) 0.4em 0.4em 0.8em,rgba(255 255 255 / 80%) -0.2em -0.2em 0.5em;--modal-text:#111;--modal-text-align:left;--modal-text-align-rtl:right;--modal-background:#f5f5f5;--modal-border-radius:9px;--modal-shadow:drop-shadow(5px 8px 30px rgba(0 0 0 / 70%));--modal-btn-bar:#c6c8cd;--modal-btn-background:#f5f5f5;--modal-btn-secondary-background:#e2e1e6;--modal-btn-hover-background:#fff;--modal-btn-font-weight:600;--modal-btn-text:#2e2e2e;--modal-btn-hover-text:#222;--modal-btn-secondary-text:#666567;--modal-btn-shadow:rgba(40 40 40 / 15%) 0.2em 0.2em 0.4em,rgba(255 255 255 / 30%) -0.1em -0.1em 0.3em;--modal-btn-hover-shadow:rgba(40 40 40 / 40%) 0.4em 0.4em 0.7em,rgba(255 255 255 / 70%) -0.2em -0.2em 0.5em;--modal-headline-text-align:center;--modal-headline-text-transform:none;--input-border-radius:6px;--input-background:#fff;--status-active-text:#fff;--form-error:#c5372c;--form-success:#338a36;--date-btn-text:#1d1d1e;--date-btn-text-secondary:#3a3a3f;--date-btn-cal-day-text:#fff;--date-btn-cal-month-text:#d3d2d7;--date-btn-cal-background:#313132;--date-btn-background:#e3e5ea;--date-btn-hover-background:#fff;--date-btn-headline-line-clamp:1;--date-btn-shadow:rgba(0 0 0 / 10%) 0 4px 10px -2px,rgba(0 0 0 / 15%) 0 2px 3px -1px;--date-btn-hover-shadow:rgba(0 0 0 / 20%) 0 5px 12px -2px,rgba(0 0 0 / 20%) 0 3px 4px -2px;--checkmark-background:drop-shadow(0 0 3px #fff);--overlay-background:#dcdcdc;--overlay-cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23777' width='16' height='16' viewBox='0 0 122.878 122.88'%3E%3Cpath d='M1.426 8.313a4.87 4.87 0 0 1 0-6.886 4.87 4.87 0 0 1 6.886 0l53.127 53.127 53.127-53.127a4.87 4.87 0 0 1 6.887 0 4.87 4.87 0 0 1 0 6.886L68.324 61.439l53.128 53.128a4.87 4.87 0 0 1-6.887 6.886L61.438 68.326 8.312 121.453a4.87 4.87 0 0 1-6.886 0 4.87 4.87 0 0 1 0-6.886l53.127-53.128L1.426 8.313h0z'/%3E%3C/svg%3E") 16 16,crosshair;--icon-ms365-color:#ea3e23;--icon-yahoo-color:#5f01d1;--icon-filter:none}:host(.atcb-dark){--btn-background:#2e2e2e;--btn-hover-background:#373737;--btn-text:#dedede;--btn-hover-text:#f1f1f1;--btn-shadow:rgba(0 0 0 / 70%) 0.3em 0.3em 0.6em,rgba(230 230 230 / 20%) -0.05em -0.05em 0.4em;--btn-hover-shadow:rgba(0 0 0 / 90%) 0.4em 0.4em 0.9em,rgba(230 230 230 / 25%) -0.08em -0.08em 0.6em -0.1em;--btn-active-shadow:inset rgba(0 0 0 / 80%) 0.15em 0.15em 0.25em,inset rgba(230 230 230 / 10%) -0.2em -0.2em 0.7em -0.1em;--list-background:#2e2e2e;--list-hover-background:#373737;--list-text:#dedede;--list-hover-text:#f1f1f1;--list-close-background:#282828;--list-shadow:rgba(0 0 0) 0.3em 0.3em 1em,rgba(230 230 230 / 40%) -0.08em -0.08em 0.6em;--modal-text:#f1f1f1;--modal-background:#242424;--modal-shadow:drop-shadow(5px 8px 35px rgba(0 0 0 / 90%));--modal-btn-bar:#38383a;--modal-btn-background:#181819;--modal-btn-secondary-background:#2e2d30;--modal-btn-hover-background:#434246;--modal-btn-text:#dbdbdb;--modal-btn-hover-text:#fff;--modal-btn-secondary-text:#b8b8b8;--modal-btn-shadow:rgba(0 0 0 / 60%) 0.2em 0.2em 0.6em,rgba(230 230 230 / 15%) -0.1em -0.1em 0.4em;--modal-btn-hover-shadow:rgba(0 0 0 / 80%) 0.3em 0.3em 0.8em,rgba(230 230 230 / 15%) -0.1em -0.1em 0.6em;--input-background:#434246;--status-active-text:#000;--form-error:#db8680;--form-success:#99de9c;--date-btn-text:#ebebf0;--date-btn-text-secondary:#b5b5bd;--date-btn-cal-day-text:#101010;--date-btn-cal-month-text:#3e3e3f;--date-btn-cal-background:#c7c7cd;--date-btn-background:#363636;--date-btn-hover-background:#474747;--date-btn-shadow:rgba(0 0 0 / 70%) 0.2em 0.2em 0.8em,rgba(230 230 230 / 15%) -0.1em -0.1em 0.5em;--date-btn-hover-shadow:rgba(0 0 0) 0.3em 0.4em 1em,rgba(230 230 230 / 15%) -0.2em -0.2em 0.8em;--checkmark-background:drop-shadow(0 0 3px #0a0a0a);--overlay-background:#141414;--icon-ms365-color:#ea3e23;--icon-yahoo-color:#bebebe;--icon-filter:grayscale(0.2)}.atcb-button-wrapper,.atcb-list,.atcb-modal-box{font-size:var(--base-font-size-l)}@media (width <= 991px){.atcb-button-wrapper,.atcb-list,.atcb-modal-box{font-size:var(--base-font-size-m)}}@media (width <= 575px){.atcb-button-wrapper,.atcb-list,.atcb-modal-box{font-size:var(--base-font-size-s)}}.atcb-initialized.atcb-buttons-list{gap:var(--buttonslist-gap)}.atcb-button-wrapper{display:block;padding:var(--wrapper-padding);position:relative}.atcb-button{align-items:center;background-color:var(--btn-background);border:0;border-radius:var(--btn-border-radius);box-shadow:var(--btn-shadow);color:var(--btn-text);cursor:pointer;display:flex;font-family:var(--font);font-size:1em;font-weight:var(--btn-font-weight);justify-content:center;line-height:1.5em;margin:0;max-width:350px;padding:var(--btn-padding-y) var(--btn-padding-x);position:relative;text-align:center;touch-action:manipulation;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;width:auto;transition:box-shadow .1s ease-in-out,background-color .1s ease-in-out;z-index:1}.atcb-button.atcb-no-text{min-width:0;border-radius:100%;display:flex;place-content:center center;align-items:center;height:3em;width:3em;padding:0}.atcb-rtl .atcb-button{direction:rtl;text-align:right}.atcb-button:focus-visible{outline:2px solid var(--accent-color)}.atcb-button:not([disabled]):focus,.atcb-button:not([disabled]):hover{background-color:var(--btn-hover-background);box-shadow:var(--btn-hover-shadow);color:var(--btn-hover-text)}.atcb-button.atcb-active:not(.atcb-modal-style,.atcb-dropoverlay){z-index:15000000}.atcb-button.atcb-active:not(.atcb-modal-style,.atcb-dropoverlay),.atcb-button.atcb-single:not([disabled]):focus,.atcb-button.atcb-single:not([disabled]):hover{background-color:var(--btn-hover-background);box-shadow:var(--btn-active-shadow);color:var(--btn-hover-text)}.atcb-button.atcb-active.atcb-dropoverlay{z-index:14000090}.atcb-icon{flex-grow:0;flex-shrink:0;height:1em;line-height:1em;margin-right:.8em;width:1em}.atcb-rtl .atcb-icon{margin-right:0;margin-left:.8em}.atcb-no-text .atcb-icon{margin-right:0;margin-left:0}.atcb-icon svg{fill:currentcolor;height:100%;width:100%}.atcb-text{overflow-wrap:anywhere}.atcb-dropdown-anchor{bottom:-15px;height:0;width:100%;opacity:0;position:absolute}.atcb-list-wrapper{box-sizing:border-box;font-weight:var(--list-font-weight);position:absolute;width:auto;animation:list-entrance .6s ease 0s 1 normal forwards;z-index:15000000}@keyframes list-entrance{0%{opacity:0}100%{opacity:1}}.atcb-list{background-color:var(--list-background);border-radius:var(--list-border-radius);box-sizing:border-box;box-shadow:var(--list-shadow);color:var(--list-text);display:block;font-family:var(--font);min-width:var(--list-min-width);position:relative;user-select:none;-webkit-user-select:none;width:fit-content}.atcb-list-item{box-shadow:none;align-items:center;background-color:var(--list-background);box-sizing:border-box;cursor:pointer;display:flex;font-size:1em;line-height:1.75em;padding:var(--list-padding);text-align:left;touch-action:manipulation;-webkit-tap-highlight-color:transparent;transition:box-shadow .15s ease-in-out,padding .15s ease-in-out,margin .15s ease-in-out}.atcb-rtl .atcb-list-item{direction:rtl;text-align:right}.atcb-list-item:hover{box-shadow:var(--btn-shadow);background-color:var(--list-hover-background);color:var(--list-hover-text);padding:calc(var(--list-padding) + .2em);margin:-.2em;position:relative;z-index:15000010}.atcb-list-item:focus-visible{box-shadow:var(--btn-shadow);background-color:var(--list-hover-background);color:var(--accent-color);padding:calc(var(--list-padding) + .2em);margin:-.2em;position:relative;z-index:15000010;outline:0}.atcb-list-item:last-child{border-radius:0 0 var(--list-border-radius) var(--list-border-radius)}.atcb-list-item:first-child{border-radius:var(--list-border-radius) var(--list-border-radius) 0 0}.atcb-list-item:only-child{border-radius:var(--list-border-radius)}.atcb-list-item .atcb-icon{margin:0 auto}.atcb-list-item .atcb-icon+.atcb-text{margin-left:.7em;width:100%}.atcb-rtl .atcb-list-item .atcb-icon+.atcb-text{margin-left:0;margin-right:.7em}.atcb-list-item-close{background-color:var(--list-close-background)}.atcb-list-item.atcb-list-item-close:not(:focus-visible){color:var(--list-close-text)}.atcb-list-item-close svg{fill:currentcolor}.atcb-modal{display:block;margin:auto;width:auto;min-width:auto;position:relative;z-index:14000090}.atcb-modal-box{animation:list-entrance .6s ease 0s 1 normal forwards;filter:var(--modal-shadow);color:var(--modal-text);cursor:default;box-sizing:border-box;font-family:var(--font);line-height:1.5em;text-align:var(--modal-text-align);user-select:none;-webkit-user-select:none;touch-action:manipulation;width:100%;margin-bottom:20px;-webkit-tap-highlight-color:transparent}@media (width > 575px){.atcb-modal-box{width:32em}}.atcb-modal-box.atcb-rtl{text-align:var(--modal-text-align-rtl);direction:rtl;padding:1.25em 1em 1.25em 2em}.atcb-modal-icon{height:2.5em;width:2.5em;border-radius:100%;background-color:var(--modal-background);padding:1.75em;margin:auto}.atcb-modal-icon svg{fill:currentcolor;height:100%;width:100%}.atcb-modal-headline{background-color:var(--modal-background);border-radius:var(--modal-border-radius) var(--modal-border-radius) 0 0;font-size:1.3em;font-weight:600;line-height:1.5em;padding:1.8em 1.5em 1.3em;text-transform:var(--modal-headline-text-transform);text-align:var(--modal-headline-text-align)}.atcb-modal-icon+.atcb-modal-headline{margin-top:-2.6em;padding-top:2.6em}.atcb-modal-content{background-color:var(--modal-background);font-size:1em;padding:.3em 2em 2.2em}.atcb-modal-content-subevents{margin:auto;width:fit-content}.atcb-modal-icon+.atcb-modal-content{border-radius:var(--modal-border-radius) var(--modal-border-radius) 0 0;margin-top:-2.6em;padding-top:2.6em}@media (width <= 575px){.atcb-modal-headline{padding:1.8em 1em 1em}.atcb-modal-content{padding:.3em 1.5em 1.5em}.atcb-modal-icon+.atcb-modal-content{padding-top:1.8em}}.atcb-modal-buttons{background-color:var(--modal-btn-bar);border-radius:0 0 var(--modal-border-radius) var(--modal-border-radius);box-sizing:border-box;padding:.6em;text-align:center;width:100%;display:flex;justify-content:center;flex-flow:row-reverse wrap;align-items:center}a.atcb-modal-btn,button.atcb-modal-btn{background-color:var(--modal-btn-secondary-background);border:0;border-radius:var(--btn-border-radius);box-shadow:var(--modal-btn-shadow);color:var(--modal-btn-secondary-text);cursor:pointer;display:inline-block;font-family:var(--font);font-size:.9em;font-weight:var(--modal-btn-font-weight);line-height:1em;margin:.625em;padding:1em 1.25em;position:relative;text-align:center;text-decoration:none;touch-action:manipulation;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent}a.atcb-modal-btn.btn-small,button.atcb-modal-btn.btn-small{padding:.6em .8em}a.atcb-modal-btn.atcb-modal-btn-primary,button.atcb-modal-btn.atcb-modal-btn-primary{background-color:var(--modal-btn-background);color:var(--modal-btn-text)}a.atcb-modal-btn:focus-visible,button.atcb-modal-btn:focus-visible{background-color:var(--modal-btn-hover-background);outline:2px solid var(--accent-color)}a.atcb-modal-btn:disabled,button.atcb-button:disabled,button.atcb-modal-btn:disabled,button.atcb-subevent-btn:disabled{cursor:not-allowed;opacity:.75;filter:brightness(95%);border-style:dashed;box-shadow:none}a.atcb-modal-btn:not([disabled]):hover,button.atcb-modal-btn:not([disabled]):hover{background-color:var(--modal-btn-hover-background);box-shadow:var(--modal-btn-hover-shadow);color:var(--modal-btn-hover-text);text-decoration:none}.atcb-subevent-btn{display:flex;align-items:flex-start;cursor:pointer;font-family:var(--font);font-size:1em;box-shadow:var(--date-btn-shadow);background-color:var(--date-btn-background);border:0;border-radius:7px 4px 4px 7px;padding:0;margin:0;touch-action:manipulation;position:relative;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;width:100%}.atcb-subevent-btn:hover{align-items:center}.atcb-subevent-btn:focus,.atcb-subevent-btn:hover{background-color:var(--date-btn-hover-background);box-shadow:var(--date-btn-hover-shadow)}.atcb-subevent-btn:focus-visible{outline:2px solid var(--accent-color)}.atcb-subevent-btn+.atcb-subevent-btn{margin-top:30px}.atcb-date-btn-left{border-radius:4px 0 0 4px;align-self:stretch;background-color:var(--date-btn-cal-background);color:var(--date-btn-hover-background);padding:.7em .8em .8em;width:2.7em;align-items:center;display:flex;flex-direction:column;flex-shrink:0}.atcb-rtl .atcb-date-btn-left{border-radius:0 4px 4px 0}.atcb-subevent-btn:hover .atcb-date-btn-left{opacity:.8}.atcb-date-btn-day{color:var(--date-btn-cal-day-text);font-weight:400;font-size:2em;word-break:keep-all;padding-bottom:.1em}.atcb-initialized[lang=ja] .atcb-date-btn-day,.atcb-initialized[lang=ko] .atcb-date-btn-day,.atcb-initialized[lang=zh] .atcb-date-btn-day{font-size:1.3em}.atcb-date-btn-month{color:var(--date-btn-cal-month-text);font-weight:600;font-size:1em}.atcb-date-btn-right{position:relative;color:var(--date-btn-text);min-width:13.5em;overflow-wrap:anywhere}.atcb-subevent-btn .atcb-date-btn-right{width:100%}.atcb-date-btn-details{opacity:1;padding:.7em .8em;text-align:left}.atcb-rtl .atcb-date-btn-details{text-align:right}.atcb-date-btn-hover{position:absolute;top:0;left:0;width:100%;opacity:0;height:100%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:1em;padding:.4em .7em;box-sizing:border-box}.atcb-subevent-btn:hover .atcb-date-btn-details{opacity:0}.atcb-subevent-btn:hover .atcb-date-btn-hover{opacity:1}.atcb-date-btn-headline{font-weight:600;font-size:.9em;margin-bottom:.5em;overflow:hidden;display:-webkit-box;-webkit-line-clamp:var(--date-btn-headline-line-clamp);-webkit-box-orient:vertical}.atcb-date-btn-content{display:flex;align-items:flex-start;font-size:.8em;color:var(--date-btn-text-secondary)}.atcb-date-btn-content.atcb-date-btn-cancelled{color:var(--form-error);font-weight:700}.atcb-date-btn-content-location{overflow:hidden;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;word-break:break-all}.atcb-date-btn-content-icon{display:inline-block;height:.8em;margin-right:.4em;margin-left:0;width:.9em;flex-shrink:0}.atcb-rtl .atcb-date-btn-content-icon{margin-right:0;margin-left:.4em}.atcb-initialized[lang=ja] .atcb-date-btn-content:not(.atcb-date-btn-content-location) .atcb-date-btn-content-icon,.atcb-initialized[lang=ko] .atcb-date-btn-content:not(.atcb-date-btn-content-location) .atcb-date-btn-content-icon,.atcb-initialized[lang=zh] .atcb-date-btn-content:not(.atcb-date-btn-content-location) .atcb-date-btn-content-icon{margin-top:.15em}.atcb-date-btn-content-icon svg{height:100%;fill:currentcolor;width:100%}.atcb-date-btn-content+.atcb-date-btn-content{margin-top:.3em}.atcb-date-btn-content-text span:not(.atcb-icon-ical){padding-right:.3em;display:inline-block}.atcb-checkmark{display:none}.atcb-saved .atcb-checkmark{box-sizing:content-box;color:var(--btn-text);display:block;position:absolute;top:-.9em;right:-.5em;padding:.5em;border-radius:100%;height:1.2em}.atcb-button.atcb-active:not(.atcb-modal-style,.atcb-dropoverlay) .atcb-checkmark,.atcb-button.atcb-single:focus .atcb-checkmark,.atcb-button.atcb-single:hover .atcb-checkmark{top:-.77em;right:-.37em}.atcb-checkmark svg{height:100%;filter:var(--checkmark-background);width:auto}#atcb-bgoverlay{background-color:var(--overlay-background);border:0;box-sizing:border-box;display:flex;height:calc(100vh + 100px);inset-inline:0;left:0;right:0;top:0;min-height:100%;min-width:100%;overflow-y:auto;padding:20px 20px 130px;position:fixed;width:100vw;z-index:14000000}#atcb-bgoverlay:not(dialog){animation:atcb-bgoverlay-animate .1s ease 0s 1 normal forwards;opacity:0}#atcb-bgoverlay.atcb-no-bg{animation:none;backdrop-filter:none;-webkit-backdrop-filter:none;opacity:1;background-color:transparent}@keyframes atcb-bgoverlay-animate{0%{opacity:0}100%{opacity:1}}#atcb-bgoverlay.atcb-click:hover{cursor:var(--overlay-cursor)}.atcb-icon-outlookcom,.atcb-icon.atcb-icon-ms365{padding-bottom:.05em}.atcb-icon.atcb-icon-apple,.atcb-icon.atcb-icon-ical{padding-bottom:.15em}.atcb-icon.atcb-icon-trigger{padding-bottom:.15em}.atcb-icon.atcb-icon-rsvp{height:1.5em;width:1.5em}.atcb-icon.atcb-icon-apple svg{fill:currentcolor}.atcb-icon.atcb-icon-ical svg{fill:currentcolor}.atcb-icon.atcb-icon-ms365 svg{fill:var(--icon-ms365-color)}.atcb-icon.atcb-icon-yahoo svg{fill:var(--icon-yahoo-color)}.atcb-icon.atcb-icon-google svg,.atcb-icon.atcb-icon-msteams svg,.atcb-icon.atcb-icon-outlookcom svg{filter:var(--icon-filter)}.rsvp-inline-wrapper{filter:none;min-width:100%;margin-bottom:0}.atcb-modal-content.no-headline{border-radius:var(--modal-border-radius) var(--modal-border-radius) 0 0;padding-top:1.8em}.rsvp-inline-wrapper .atcb-modal-content,.rsvp-inline-wrapper .atcb-modal-headline,.rsvp-inline-wrapper.atcb-modal-box{background-color:transparent;border-radius:0;box-sizing:border-box;padding:0;width:100%}.rsvp-inline-wrapper .atcb-modal-headline{padding-bottom:1.5em}.pro{text-align:center}.pro ol,.pro ul{margin:auto;text-align:left;width:fit-content}.pro a:not(.atcb-modal-btn),.pro a:not(.atcb-modal-btn):active,.pro a:not(.atcb-modal-btn):visited{color:var(--modal-btn-text);text-decoration:underline;text-decoration-thickness:2px;text-decoration-color:var(--accent-color)}.pro a:not(.atcb-modal-btn):hover{color:var(--accent-color);text-decoration:none}.pro .pro-share-buttons{display:flex;flex-wrap:wrap;justify-content:center}.pro #rsvp-atcb{display:flex;flex-wrap:wrap;gap:.4em}.pro-form{text-align:left}.pro-form:not(.no-intro){border-top:1px solid var(--modal-btn-border);margin-top:1.5em;padding-top:1.5em}.pro-form.no-intro:not(.no-headline){padding-top:.5em}.pro-field+.pro-field{padding-top:1.3em}.pro-field-type-label+.pro-field-type-radio{padding-top:0}.pro-field-type-checkbox,.pro-field-type-radio div{align-items:center;display:flex}.pro-field-type-checkbox input,.pro-field-type-radio input{cursor:pointer}.pro-field label{display:block;font-size:.9em;opacity:.7}.pro-field-type-checkbox label,.pro-field-type-radio label{cursor:pointer;opacity:.8;padding-left:.3em}.pro-field input[type=email],.pro-field input[type=number],.pro-field input[type=text]{background-color:var(--input-background);border:1px solid var(--modal-btn-border);border-radius:var(--input-border-radius);box-sizing:border-box;box-shadow:var(--btn-shadow);caret-color:var(--accent-color);color:var(--modal-text);font-size:.9em;opacity:.8;padding:.7em;transition:all .1s ease-in-out;width:100%}.pro-field input[type=checkbox],.pro-field input[type=radio]{accent-color:var(--accent-color);height:1.2rem;opacity:.8;transition:all .1s ease-in-out;width:1.2em}.pro-field input:disabled,.pro-field input:disabled+label{cursor:not-allowed;opacity:.75;filter:brightness(95%)}.pro-field input:not([disabled]):hover{opacity:1}.pro-field input:not([disabled],[type=checkbox],[type=radio]):hover{box-shadow:var(--btn-active-shadow)}.pro-field input[type=email]:focus,.pro-field input[type=number]:focus,.pro-field input[type=text]:focus{box-shadow:var(--btn-active-shadow)}.pro-field input[type=email]:focus-visible,.pro-field input[type=number]:focus-visible,.pro-field input[type=text]:focus-visible{border-color:var(--accent-color);outline:1px solid var(--accent-color)}.pro-field input[type=checkbox]:focus,.pro-field input[type=radio]:focus{outline-color:var(--accent-color);outline-width:2px}#submit-error{color:var(--form-error);display:none;font-weight:700;padding-top:1.5em;text-align:center}.pro-form.form-error #submit-error{display:block}.pro-field input.error{accent-color:var(--form-error);border:2px solid var(--form-error)}.pro-field input.error+label,.pro-field:has(input.error) label{color:var(--form-error);opacity:1}#rsvp-status-group{border-bottom:1px solid var(--modal-btn-border);font-weight:700;margin-bottom:1.5em;padding-bottom:2em;text-align:center}#rsvp-status-group .pro-field{align-items:center;display:flex;flex-wrap:wrap;gap:1.2em;justify-content:center;margin-top:1em}@media (width <= 575px){#rsvp-status-group .pro-field{flex-direction:column}#rsvp-status-group .pro-field div{width:80%}}#rsvp-status-group .pro-field div{min-width:28%;position:relative}#rsvp-status-group input{opacity:0;position:absolute;top:0;left:0;height:100%;width:100%;margin:0;cursor:pointer}#rsvp-status-group label{align-items:center;background-color:var(--input-background);border-radius:var(--input-border-radius);box-shadow:var(--btn-shadow);color:var(--modal-btn-text);display:flex;flex-direction:column;font-weight:700;text-transform:uppercase;justify-content:center;opacity:.6;padding:.8em;transition:all .1s ease-in-out;width:100%}#rsvp-status-group label.status-confirmed{color:var(--form-success)}#rsvp-status-group label.status-declined{color:var(--form-error)}#rsvp-status-group input:checked+label{background-color:var(--modal-text);box-shadow:var(--btn-hover-shadow);color:var(--status-active-text);opacity:1;transform:scale(1.08)}#rsvp-status-group input:focus-visible+label{outline:2px solid var(--accent-color);outline-offset:2px}#rsvp-status-group input:not([disabled])+label:hover,#rsvp-status-group input:not([disabled]):hover+label{box-shadow:var(--btn-hover-shadow);opacity:1;transform:scale(1.08)}#rsvp-status-group input:checked+label.status-confirmed{background-color:var(--form-success)}#rsvp-status-group input:checked+label.status-declined{background-color:var(--form-error)}#rsvp-success-msg,#rsvp-success-msg-demo,#rsvp-success-msg-doi,#rsvp-success-msg-email,#ty-success-msg{display:none;font-weight:700;line-height:1.6em;padding-top:.5em;text-align:center}#rsvp-success-msg,#rsvp-success-msg-demo,#ty-success-msg{padding:1.5em 0}#rsvp-success-msg-demo,#rsvp-success-msg-email{color:var(--form-success)}#rsvp-success-msg-doi{color:var(--form-error);padding-top:1em;font-size:.8em}#pro-form-submit{background-color:var(--btn-hover-background);display:block;margin:auto;min-width:150px}.pro-waiting{background-color:var(--modal-btn-background);border:1px solid var(--modal-btn-border);border-radius:var(--btn-border-radius);box-sizing:border-box;color:var(--modal-btn-text);cursor:wait;display:none;line-height:.5em;margin:auto;min-width:150px;padding:.5em 1.25em 1.2em;text-align:center;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;width:fit-content}@media (width > 575px){#pro-form-submit,.pro-waiting{min-width:200px}}.pro-waiting span:not(.atcb-icon-ical){animation-name:blink;animation-duration:1s;animation-iteration-count:infinite;animation-fill-mode:both;font-size:2.5em}.pro-field label span:not(.atcb-icon-ical){color:var(--form-error);font-weight:700;padding-left:2px}.pro-waiting span:not(.atcb-icon-ical):nth-child(2){animation-delay:.15s}.pro-waiting span:not(.atcb-icon-ical):nth-child(3){animation-delay:.3s}@keyframes blink{0%{opacity:.2}20%{opacity:1}100%{opacity:.2}}.pro #rsvp-sent-content{align-items:center;display:flex;flex-direction:column;gap:1.5em}#rsvp-status-group span{color:inherit}.atcb-modal-content .pro p{margin:0}.atcb-modal-content .pro p.pro-pt{margin-top:1.5em}.atcb-modal-content .pro .pro-field p{font-size:.9em}.pro .btn-flex{align-items:center;display:flex}.pro .atcb-modal-btn svg{fill:none;height:1.5em;margin-right:.5em;stroke:currentcolor;width:auto}#atcb-reference{box-sizing:border-box;filter:drop-shadow(0 0 3px rgba(255 255 255 / 80%));height:auto;padding:8px 0;transform:translate3d(0,0,0);width:100%;z-index:15000000}#atcb-reference.fixed-ref{position:fixed;bottom:10px;right:40px;width:auto}#atcb-reference.atcb-dropup{position:absolute}:host(.atcb-dark) #atcb-reference{filter:drop-shadow(0 0 5px #000)}#atcb-reference a,#atcb-reference a:active,#atcb-reference a:visited{opacity:.4;width:150px;max-width:100%;margin:auto;display:block;text-decoration:none}#atcb-reference.fixed-ref a{opacity:.6}#atcb-reference a:hover{opacity:.9;text-decoration:none}#atcb-reference svg{fill:var(--list-text)}`,text:`:host{width:fit-content;--base-font-size-l:16px;--base-font-size-m:16px;--base-font-size-s:16px;--font:arial,helvetica,sans-serif;--accent-color:#1e90ff;--wrapper-padding:0px;--buttonslist-gap:5px;--btn-underline:#a9ceff;--btn-border:#a8a8a8;--btn-padding-x:.75em;--btn-padding-y:.75em;--btn-background:#f5f5f5;--btn-hover-background:#fff;--btn-font-weight:600;--btn-text:#333;--btn-hover-text:#000;--btn-hover-shadow:rgba(0 0 0 / 10%) 0 4px 10px -2px,rgba(0 0 0 / 15%) 0 2px 2px -1px;--btn-text-shadow:#fff;--list-background:#f5f5f5;--list-hover-background:#fff;--list-text:#333;--list-font-weight:400;--list-hover-text:#000;--list-close-background:#e5e5e5;--list-close-text:#777;--list-border-radius:11px;--list-padding:.8em 1.2em;--list-min-width:100%;--list-shadow:rgba(0 0 0 / 20%) 0 4px 13px -2px,rgba(0 0 0 / 23%) 0 2px 4px -1px;--list-modal-shadow:rgba(0 0 0 / 50%) 0 4px 30px -3px,rgba(0 0 0 / 30%) 0 2px 8px -2px;--modal-text:#000;--modal-text-align:left;--modal-text-align-rtl:right;--modal-background:#f5f5f5;--modal-btn-bar:#c6c8cd;--modal-btn-background:#f5f5f5;--modal-border-radius:9px;--modal-shadow:drop-shadow(3px 6px 25px rgba(0 0 0 / 65%));--modal-btn-secondary-background:#e2e1e6;--modal-btn-hover-background:#fff;--modal-btn-border:#d2d2d2;--modal-btn-font-weight:600;--modal-btn-text:#2e2e2e;--modal-btn-hover-text:#161616;--modal-btn-secondary-text:#666567;--modal-btn-shadow:rgba(0 0 0 / 10%) 0 4px 10px -2px,rgba(0 0 0 / 15%) 0 2px 3px -1px;--modal-btn-hover-shadow:rgba(0 0 0 / 25%) 0 5px 13px -2px,rgba(0 0 0 / 25%) 0 3px 5px -2px;--modal-headline-text-align:center;--modal-headline-text-transform:none;--input-border-radius:6px;--input-background:#fff;--status-active-text:#fff;--form-error:#c5372c;--form-success:#338a36;--date-btn-text:#1d1d1e;--date-btn-text-secondary:#3a3a3f;--date-btn-cal-day-text:#fff;--date-btn-cal-month-text:#d3d2d7;--date-btn-cal-background:#313132;--date-btn-background:#eae9ed;--date-btn-hover-background:#fff;--date-btn-headline-line-clamp:1;--date-btn-shadow:rgba(0 0 0 / 10%) 0 4px 10px -2px,rgba(0 0 0 / 15%) 0 2px 3px -1px;--date-btn-hover-shadow:rgba(0 0 0 / 20%) 0 5px 12px -2px,rgba(0 0 0 / 20%) 0 3px 4px -2px;--checkmark-background:drop-shadow(0 0 3px #fff);--overlay-background:rgba(200 200 200 / 25%);--overlay-cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23777' width='16' height='16' viewBox='0 0 122.878 122.88'%3E%3Cpath d='M1.426 8.313a4.87 4.87 0 0 1 0-6.886 4.87 4.87 0 0 1 6.886 0l53.127 53.127 53.127-53.127a4.87 4.87 0 0 1 6.887 0 4.87 4.87 0 0 1 0 6.886L68.324 61.439l53.128 53.128a4.87 4.87 0 0 1-6.887 6.886L61.438 68.326 8.312 121.453a4.87 4.87 0 0 1-6.886 0 4.87 4.87 0 0 1 0-6.886l53.127-53.128L1.426 8.313h0z'/%3E%3C/svg%3E") 16 16,crosshair;--icon-ms365-color:#ea3e23;--icon-yahoo-color:#5f01d1;--icon-filter:none}:host(.atcb-dark){--btn-underline:#336db9;--btn-border:#888;--btn-background:#2e2e2e;--btn-hover-background:#373737;--btn-text:#dedede;--btn-hover-text:#fff;--btn-text-shadow:#000;--list-background:#2e2e2e;--list-hover-background:#373737;--list-text:#dedede;--list-hover-text:#fff;--list-close-background:#282828;--list-shadow:rgba(255 255 255 / 5%) -12px -5px 20px -8px,rgba(255 255 255 / 6%) -7px -5px 15px -3px,rgba(0 0 0 / 50%) 2px 5px 18px -1px,rgba(0 0 0 / 40%) 3px 3px 20px -3px;--list-modal-shadow:rgba(255 255 255 / 8%) -12px -5px 30px -8px,rgba(255 255 255 / 8%) -7px -5px 15px -3px,rgba(0 0 0 / 60%) 4px 6px 50px -4px,rgba(0 0 0 / 90%) 8px 12px 40px -2px;--modal-text:#f1f1f1;--modal-background:#242424;--modal-shadow:drop-shadow(3px 6px 25px rgba(0 0 0 / 90%));--modal-btn-bar:#38383a;--modal-btn-background:#181819;--modal-btn-secondary-background:#2e2d30;--modal-btn-hover-background:#434246;--modal-btn-border:#434246;--modal-btn-text:#dbdbdb;--modal-btn-hover-text:#fff;--modal-btn-secondary-text:#b8b8b8;--modal-btn-shadow:rgba(255 255 255 / 5%) -2px -2px 10px,rgba(0 0 0 / 40%) 3px 3px 10px -2px,rgba(0 0 0 / 40%) 1px 2px 5px -1px;--input-background:#434246;--status-active-text:#000;--form-error:#db8680;--form-success:#99de9c;--date-btn-text:#ebebf0;--date-btn-text-secondary:#b5b5bd;--date-btn-cal-day-text:#101010;--date-btn-cal-month-text:#3e3e3f;--date-btn-cal-background:#c7c7cd;--date-btn-background:#363636;--date-btn-hover-background:#474747;--date-btn-shadow:rgba(0 0 0 / 60%) 0 0 20px -2px,rgba(0 0 0 / 30%) 1px 2px 3px -1px;--checkmark-background:drop-shadow(0 0 3px #0a0a0a);--overlay-background:rgba(20 20 20 / 60%);--icon-ms365-color:#ea3e23;--icon-yahoo-color:#bebebe;--icon-filter:grayscale(0.2)}.atcb-button-wrapper,.atcb-list,.atcb-modal-box{font-size:var(--base-font-size-l)}@media (width <= 991px){.atcb-button-wrapper,.atcb-list,.atcb-modal-box{font-size:var(--base-font-size-m)}}@media (width <= 575px){.atcb-button-wrapper,.atcb-list,.atcb-modal-box{font-size:var(--base-font-size-s)}}.atcb-initialized.atcb-buttons-list{gap:var(--buttonslist-gap)}.atcb-button-wrapper{display:block;padding:var(--wrapper-padding);position:relative}.atcb-button{background-image:linear-gradient(120deg,var(--btn-underline) 0,var(--btn-underline) 100%);background-repeat:no-repeat;background-size:100% 8%;background-position:0 100%;background-color:transparent;border:0;border-radius:0;transition:background-size .1s ease-in,border-radius .2s ease-in,box-shadow .1s ease-in;align-items:center;color:var(--btn-text);cursor:pointer;display:flex;font-family:var(--font);font-size:1em;font-weight:var(--btn-font-weight);justify-content:center;line-height:1.2em;margin:0 .2em;padding:var(--btn-padding-y) var(--btn-padding-x);position:relative;text-align:left;touch-action:manipulation;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;width:auto;z-index:1}.atcb-button.atcb-no-text{min-width:0;display:flex;place-content:center center;align-items:center;height:3em;width:3em;padding:0}.atcb-rtl .atcb-button{direction:rtl;text-align:right}.atcb-button:focus-visible{outline:2px solid var(--accent-color)}.atcb-button:not([disabled]):focus,.atcb-button:not([disabled]):hover{background-size:100% 100%;box-shadow:var(--btn-hover-shadow);color:var(--btn-hover-text);text-shadow:0 0 .7em var(--btn-text-shadow);border-radius:21px}.atcb-button.atcb-active:not(.atcb-modal-style,.atcb-dropoverlay){background-size:100% 10%;border-radius:3px 3px 11px 11px;background-position:0 0;background-color:var(--btn-background);color:var(--btn-text);text-shadow:none;z-index:15000000}.atcb-button.atcb-single:not([disabled]):focus,.atcb-button.atcb-single:not([disabled]):hover{background-size:100% 10%;background-position:0 100%;border-radius:11px 11px 3px 3px;background-color:var(--btn-background);color:var(--btn-text);text-shadow:none}.atcb-button.atcb-active.atcb-dropup{background-position:0 100%;border-radius:11px 11px 3px 3px}.atcb-button.atcb-dropup::after,.atcb-button:not(.atcb-modal-style,.atcb-dropoverlay,.atcb-dropup)::before{content:"";width:0;height:0;position:absolute;left:0;right:0;margin:0 auto}.atcb-button:not(.atcb-modal-style,.atcb-dropoverlay,.atcb-dropup)::before{top:100%;border:0 solid transparent;border-bottom:none;border-top-color:var(--btn-background)}.atcb-button.atcb-dropup::after{bottom:100%;border:0 solid transparent;border-top:none;border-bottom-color:var(--btn-background)}.atcb-button.atcb-active.atcb-dropup::after,.atcb-button.atcb-active:not(.atcb-modal-style,.atcb-dropoverlay,.atcb-dropup)::before{border-width:.35em;transition:border-width .1s linear .1s}.atcb-button.atcb-active.atcb-dropoverlay{z-index:14000090}.atcb-icon{flex-grow:0;flex-shrink:0;height:1em;line-height:1em;margin-right:.8em;width:.9em}.atcb-rtl .atcb-icon{margin-right:0;margin-left:1em}.atcb-no-text .atcb-icon{margin-right:0;margin-left:0}.atcb-icon svg{fill:currentcolor;height:100%;width:100%}.atcb-icon-trigger svg{display:none}.atcb-button .atcb-icon-trigger::after{content:"+";font-family:Arial,Helvetica,sans-serif;font-size:1.5em}.atcb-text{overflow-wrap:anywhere}.atcb-dropdown-anchor{bottom:-15px;height:0;width:100%;opacity:0;position:absolute}.atcb-list-wrapper{box-sizing:border-box;font-weight:var(--list-font-weight);position:absolute;z-index:14000090;width:auto}.atcb-list-wrapper:not(.atcb-dropup,.atcb-dropoverlay){animation:list-entrance-bottom .2s ease 0s 1 normal forwards}.atcb-list-wrapper.atcb-dropup{animation:list-entrance-top .2s ease 0s 1 normal forwards}.atcb-list-wrapper.atcb-dropoverlay{animation:list-entrance-center .2s ease 0s 1 normal forwards;z-index:15000000}@keyframes list-entrance-bottom{0%{opacity:0;transform:translateY(250px)}100%{opacity:1;transform:translateY(0)}}@keyframes list-entrance-top{0%{opacity:0;transform:translateY(-250px)}100%{opacity:1;transform:translateY(0)}}@keyframes list-entrance-center{0%{opacity:0;transform:scaleY(1)}1%{opacity:1;transform:scaleY(0)}100%{opacity:1;transform:scaleY(1)}}.atcb-list{background-color:var(--list-background);border-radius:var(--list-border-radius);box-sizing:border-box;box-shadow:var(--list-shadow);color:var(--list-text);display:block;font-family:var(--font);min-width:var(--list-min-width);position:relative;user-select:none;-webkit-user-select:none;width:fit-content}.atcb-list-item{align-items:center;background-color:var(--list-background);box-sizing:border-box;cursor:pointer;display:flex;font-size:1em;line-height:1.75em;padding:var(--list-padding);text-align:left;touch-action:manipulation;-webkit-tap-highlight-color:transparent}.atcb-rtl .atcb-list-item{direction:rtl;text-align:right}.atcb-list-item:hover{background-color:var(--list-hover-background);color:var(--list-hover-text)}.atcb-list-item:focus-visible{background-color:var(--list-hover-background);color:var(--accent-color);outline:0}.atcb-list-item:last-child{border-radius:0 0 var(--list-border-radius) var(--list-border-radius)}.atcb-list-item:first-child{border-radius:var(--list-border-radius) var(--list-border-radius) 0 0}.atcb-list-item:only-child{border-radius:var(--list-border-radius)}.atcb-list.atcb-modal{box-shadow:var(--list-modal-shadow)}.atcb-list-item .atcb-icon{margin:0 auto;height:1em;width:1em}.atcb-list-item .atcb-icon+.atcb-text{margin-left:.7em;width:100%}.atcb-rtl .atcb-list-item .atcb-icon+.atcb-text{margin-left:0;margin-right:.7em}.atcb-list-item-close{background-color:var(--list-close-background)}.atcb-list-item.atcb-list-item-close:not(:focus-visible){color:var(--list-close-text)}.atcb-list-item-close svg{fill:currentcolor}.atcb-modal{display:block;margin:auto;width:auto;min-width:auto;position:relative;z-index:14000090}.atcb-modal-box{filter:var(--modal-shadow);color:var(--modal-text);cursor:default;box-sizing:border-box;font-family:var(--font);line-height:1.5em;text-align:var(--modal-text-align);user-select:none;-webkit-user-select:none;touch-action:manipulation;width:100%;margin-bottom:20px;-webkit-tap-highlight-color:transparent}@media (width > 575px){.atcb-modal-box{width:32em}}.atcb-modal-box.atcb-rtl{text-align:var(--modal-text-align-rtl);direction:rtl;padding:1.25em 1em 1.25em 2em}.atcb-modal-icon{height:2.5em;width:2.5em;border-radius:100%;background-color:var(--modal-background);padding:1.75em;margin:auto}.atcb-modal-icon svg{fill:currentcolor;height:100%;width:100%}.atcb-modal-headline{background-color:var(--modal-background);border-radius:var(--modal-border-radius) var(--modal-border-radius) 0 0;font-size:1.3em;font-weight:600;line-height:1.5em;padding:1.8em 1.5em 1.3em;text-transform:var(--modal-headline-text-transform);text-align:var(--modal-headline-text-align)}.atcb-modal-icon+.atcb-modal-headline{margin-top:-2.6em;padding-top:2.6em}.atcb-modal-content{background-color:var(--modal-background);font-size:1em;padding:.3em 2em 2.2em}.atcb-modal-content-subevents{margin:auto;width:fit-content}.atcb-modal-icon+.atcb-modal-content{border-radius:var(--modal-border-radius) var(--modal-border-radius) 0 0;margin-top:-2.6em;padding-top:2.6em}@media (width <= 575px){.atcb-modal-headline{padding:1.8em 1em 1em}.atcb-modal-content{padding:.3em 1.5em 1.5em}.atcb-modal-icon+.atcb-modal-content{padding-top:1.8em}}.atcb-modal-buttons{background-color:var(--modal-btn-bar);border-radius:0 0 var(--modal-border-radius) var(--modal-border-radius);box-sizing:border-box;padding:.6em;text-align:center;width:100%;display:flex;justify-content:center;flex-flow:row-reverse wrap;align-items:center}a.atcb-modal-btn,button.atcb-modal-btn{background-color:var(--modal-btn-secondary-background);border:0;border-radius:21px;box-shadow:var(--modal-btn-shadow);color:var(--modal-btn-secondary-text);cursor:pointer;display:inline-block;font-family:var(--font);font-size:.9em;font-weight:var(--modal-btn-font-weight);line-height:1em;margin:.625em;padding:1em 1.25em;position:relative;text-align:center;text-decoration:none;touch-action:manipulation;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent}a.atcb-modal-btn.btn-small,button.atcb-modal-btn.btn-small{padding:.6em .8em}a.atcb-modal-btn.atcb-modal-btn-primary,button.atcb-modal-btn.atcb-modal-btn-primary{background-color:var(--modal-btn-background);color:var(--modal-btn-text)}a.atcb-modal-btn.atcb-modal-btn-border,button.atcb-modal-btn.atcb-modal-btn-border{border:1px solid var(--modal-btn-border)}a.atcb-modal-btn:focus-visible,button.atcb-modal-btn:focus-visible{background-color:var(--modal-btn-hover-background);outline:2px solid var(--accent-color)}a.atcb-modal-btn:disabled,button.atcb-button:disabled,button.atcb-modal-btn:disabled,button.atcb-subevent-btn:disabled{cursor:not-allowed;opacity:.75;filter:brightness(95%);border-style:dashed;box-shadow:none}a.atcb-modal-btn:not([disabled]):hover,button.atcb-modal-btn:not([disabled]):hover{background-color:var(--modal-btn-hover-background);box-shadow:var(--modal-btn-hover-shadow);color:var(--modal-btn-hover-text);text-decoration:none}.atcb-subevent-btn{display:flex;align-items:flex-start;cursor:pointer;font-family:var(--font);font-size:1em;box-shadow:var(--date-btn-shadow);background-color:var(--date-btn-background);border:0;border-radius:7px 4px 4px 7px;padding:0;margin:0;touch-action:manipulation;position:relative;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;width:100%}.atcb-subevent-btn:hover{align-items:center}.atcb-subevent-btn:focus,.atcb-subevent-btn:hover{background-color:var(--date-btn-hover-background);box-shadow:var(--date-btn-hover-shadow)}.atcb-subevent-btn:focus-visible{outline:2px solid var(--accent-color)}.atcb-subevent-btn+.atcb-subevent-btn{margin-top:30px}.atcb-date-btn-left{border-radius:4px 0 0 4px;align-self:stretch;background-color:var(--date-btn-cal-background);color:var(--date-btn-hover-background);padding:.7em .8em .8em;width:2.7em;align-items:center;display:flex;flex-direction:column;flex-shrink:0}.atcb-rtl .atcb-date-btn-left{border-radius:0 4px 4px 0}.atcb-subevent-btn:hover .atcb-date-btn-left{opacity:.8}.atcb-date-btn-day{color:var(--date-btn-cal-day-text);font-weight:400;font-size:2em;word-break:keep-all;padding-bottom:.1em}.atcb-initialized[lang=ja] .atcb-date-btn-day,.atcb-initialized[lang=ko] .atcb-date-btn-day,.atcb-initialized[lang=zh] .atcb-date-btn-day{font-size:1.3em}.atcb-date-btn-month{color:var(--date-btn-cal-month-text);font-weight:600;font-size:1em}.atcb-date-btn-right{position:relative;color:var(--date-btn-text);min-width:13.5em;overflow-wrap:anywhere}.atcb-subevent-btn .atcb-date-btn-right{width:100%}.atcb-date-btn-details{opacity:1;padding:.7em .8em;text-align:left}.atcb-rtl .atcb-date-btn-details{text-align:right}.atcb-date-btn-hover{position:absolute;top:0;left:0;width:100%;opacity:0;height:100%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:1em;padding:.4em .7em;box-sizing:border-box}.atcb-subevent-btn:hover .atcb-date-btn-details{opacity:0}.atcb-subevent-btn:hover .atcb-date-btn-hover{opacity:1}.atcb-date-btn-headline{font-weight:600;font-size:.9em;margin-bottom:.5em;overflow:hidden;display:-webkit-box;-webkit-line-clamp:var(--date-btn-headline-line-clamp);-webkit-box-orient:vertical}.atcb-date-btn-content{display:flex;align-items:flex-start;font-size:.8em;color:var(--date-btn-text-secondary)}.atcb-date-btn-content.atcb-date-btn-cancelled{color:var(--form-error);font-weight:700}.atcb-date-btn-content-location{overflow:hidden;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;word-break:break-all}.atcb-date-btn-content-icon{display:inline-block;height:.8em;margin-right:.4em;margin-left:0;width:.9em;flex-shrink:0}.atcb-rtl .atcb-date-btn-content-icon{margin-right:0;margin-left:.4em}.atcb-initialized[lang=ja] .atcb-date-btn-content:not(.atcb-date-btn-content-location) .atcb-date-btn-content-icon,.atcb-initialized[lang=ko] .atcb-date-btn-content:not(.atcb-date-btn-content-location) .atcb-date-btn-content-icon,.atcb-initialized[lang=zh] .atcb-date-btn-content:not(.atcb-date-btn-content-location) .atcb-date-btn-content-icon{margin-top:.15em}.atcb-date-btn-content-icon svg{height:100%;fill:currentcolor;width:100%}.atcb-date-btn-content+.atcb-date-btn-content{margin-top:.3em}.atcb-date-btn-content-text span:not(.atcb-icon-ical){padding-right:.3em;display:inline-block}.atcb-checkmark{display:none}.atcb-saved .atcb-checkmark{box-sizing:content-box;color:var(--btn-text);display:block;position:absolute;top:-.9em;right:-.5em;padding:.5em;border-radius:100%;height:1.2em}.atcb-checkmark svg{height:100%;filter:var(--checkmark-background);width:auto}#atcb-bgoverlay{backdrop-filter:blur(2px);-webkit-backdrop-filter:blur(2px);background-color:var(--overlay-background);border:0;box-sizing:border-box;display:flex;height:calc(100vh + 100px);inset-inline:0;left:0;right:0;top:0;min-height:100%;min-width:100%;overflow-y:auto;padding:20px 20px 130px;position:fixed;width:100vw;z-index:14000000}#atcb-bgoverlay:not(dialog){animation:atcb-bgoverlay-animate .2s ease 0s 1 normal forwards;opacity:0}#atcb-bgoverlay.atcb-no-bg{animation:none;backdrop-filter:none;-webkit-backdrop-filter:none;opacity:1;background-color:transparent}@keyframes atcb-bgoverlay-animate{0%{opacity:0}100%{opacity:1}}#atcb-bgoverlay.atcb-click:hover{cursor:var(--overlay-cursor)}.atcb-icon-outlookcom,.atcb-icon.atcb-icon-ms365{padding-bottom:.05em}.atcb-icon.atcb-icon-apple,.atcb-icon.atcb-icon-ical{padding-bottom:.15em}.atcb-icon.atcb-icon-rsvp{height:1.5em;width:1.5em}.atcb-icon.atcb-icon-apple svg{fill:currentcolor}.atcb-icon.atcb-icon-ical svg{fill:currentcolor}.atcb-icon.atcb-icon-ms365 svg{fill:var(--icon-ms365-color)}.atcb-icon.atcb-icon-yahoo svg{fill:var(--icon-yahoo-color)}.atcb-icon.atcb-icon-google svg,.atcb-icon.atcb-icon-msteams svg,.atcb-icon.atcb-icon-outlookcom svg{filter:var(--icon-filter)}.rsvp-inline-wrapper{filter:none;min-width:100%;margin-bottom:0}.atcb-modal-content.no-headline{border-radius:var(--modal-border-radius) var(--modal-border-radius) 0 0;padding-top:1.8em}.rsvp-inline-wrapper .atcb-modal-content,.rsvp-inline-wrapper .atcb-modal-headline,.rsvp-inline-wrapper.atcb-modal-box{background-color:transparent;border-radius:0;box-sizing:border-box;padding:0;width:100%}.rsvp-inline-wrapper .atcb-modal-headline{padding-bottom:1.5em}.pro{text-align:center}.pro ol,.pro ul{margin:auto;text-align:left;width:fit-content}.pro a:not(.atcb-modal-btn),.pro a:not(.atcb-modal-btn):active,.pro a:not(.atcb-modal-btn):visited{color:var(--modal-btn-text);text-decoration:underline;text-decoration-thickness:2px;text-decoration-color:var(--accent-color)}.pro a:not(.atcb-modal-btn):hover{color:var(--accent-color);text-decoration:none}.pro .pro-share-buttons{display:flex;flex-wrap:wrap;justify-content:center}.pro #rsvp-atcb{display:flex;flex-wrap:wrap;gap:.4em}.pro-form{text-align:left}.pro-form:not(.no-intro){border-top:1px solid var(--modal-btn-border);margin-top:1.5em;padding-top:1.5em}.pro-form.no-intro:not(.no-headline){padding-top:.5em}.pro-field+.pro-field{padding-top:1.3em}.pro-field-type-label+.pro-field-type-radio{padding-top:0}.pro-field-type-checkbox,.pro-field-type-radio div{align-items:center;display:flex}.pro-field-type-checkbox input,.pro-field-type-radio input{cursor:pointer}.pro-field label{display:block;font-size:.9em;opacity:.7}.pro-field-type-checkbox label,.pro-field-type-radio label{cursor:pointer;opacity:.8;padding-left:.3em}.pro-field input[type=email],.pro-field input[type=number],.pro-field input[type=text]{background-color:var(--input-background);border:1px solid var(--modal-btn-border);border-radius:var(--input-border-radius);box-sizing:border-box;caret-color:var(--accent-color);color:var(--modal-text);font-size:.9em;opacity:.8;padding:.7em;transition:all .1s ease-in-out;width:100%}.pro-field input[type=checkbox],.pro-field input[type=radio]{accent-color:var(--accent-color);height:1.2rem;opacity:.8;transition:all .1s ease-in-out;width:1.2em}.pro-field input:disabled,.pro-field input:disabled+label{cursor:not-allowed;opacity:.75;filter:brightness(95%)}.pro-field input:not([disabled]):hover{opacity:1}.pro-field input[type=email]:focus,.pro-field input[type=number]:focus,.pro-field input[type=text]:focus{border-color:var(--accent-color);outline:1px solid var(--accent-color)}.pro-field input[type=checkbox]:focus,.pro-field input[type=radio]:focus{outline-color:var(--accent-color);outline-width:2px}#submit-error{color:var(--form-error);display:none;font-weight:700;padding-top:1.5em;text-align:center}.pro-form.form-error #submit-error{display:block}.pro-field input.error{accent-color:var(--form-error);border:2px solid var(--form-error)}.pro-field input.error+label,.pro-field:has(input.error) label{color:var(--form-error);opacity:1}#rsvp-status-group{border-bottom:1px solid var(--modal-btn-border);font-weight:700;margin-bottom:1.5em;padding-bottom:2em;text-align:center}#rsvp-status-group .pro-field{align-items:center;display:flex;flex-wrap:wrap;gap:1.2em;justify-content:center;margin-top:1em}@media (width <= 575px){#rsvp-status-group .pro-field{flex-direction:column}#rsvp-status-group .pro-field div{width:80%}}#rsvp-status-group .pro-field div{min-width:28%;position:relative}#rsvp-status-group input{opacity:0;position:absolute;top:0;left:0;height:100%;width:100%;margin:0;cursor:pointer}#rsvp-status-group label{align-items:center;border:1px solid var(--modal-btn-text);border-radius:var(--input-border-radius);color:var(--modal-btn-text);display:flex;flex-direction:column;font-weight:700;text-transform:uppercase;justify-content:center;opacity:.6;padding:.8em;transition:all .1s ease-in-out;width:100%}#rsvp-status-group label.status-confirmed{border-color:var(--form-success);color:var(--form-success)}#rsvp-status-group label.status-declined{border-color:var(--form-error);color:var(--form-error)}#rsvp-status-group input:checked+label{background-color:var(--modal-text);box-shadow:var(--btn-hover-shadow);color:var(--status-active-text);opacity:1;transform:scale(1.08)}#rsvp-status-group input:focus-visible+label{outline:2px solid var(--accent-color);outline-offset:2px}#rsvp-status-group input:not([disabled])+label:hover,#rsvp-status-group input:not([disabled]):hover+label{box-shadow:var(--btn-hover-shadow);opacity:1;transform:scale(1.08)}#rsvp-status-group input:checked+label.status-confirmed{background-color:var(--form-success)}#rsvp-status-group input:checked+label.status-declined{background-color:var(--form-error)}#rsvp-success-msg,#rsvp-success-msg-demo,#rsvp-success-msg-doi,#rsvp-success-msg-email,#ty-success-msg{display:none;font-weight:700;line-height:1.6em;padding-top:.5em;text-align:center}#rsvp-success-msg,#rsvp-success-msg-demo,#ty-success-msg{padding:1.5em 0}#rsvp-success-msg-demo,#rsvp-success-msg-email{color:var(--form-success)}#rsvp-success-msg-doi{color:var(--form-error);padding-top:1em;font-size:.8em}#pro-form-submit{display:block;margin:auto;min-width:150px}.pro-waiting{background-color:var(--modal-btn-background);border:1px solid var(--modal-btn-border);border-radius:var(--btn-border-radius);box-sizing:border-box;color:var(--modal-btn-text);cursor:wait;display:none;line-height:.5em;margin:auto;min-width:150px;padding:.5em 1.25em 1.2em;text-align:center;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;width:fit-content}@media (width > 575px){#pro-form-submit,.pro-waiting{min-width:200px}}.pro-waiting span:not(.atcb-icon-ical){animation-name:blink;animation-duration:1s;animation-iteration-count:infinite;animation-fill-mode:both;font-size:2.5em}.pro-field label span:not(.atcb-icon-ical){color:var(--form-error);font-weight:700;padding-left:2px}.pro-waiting span:not(.atcb-icon-ical):nth-child(2){animation-delay:.15s}.pro-waiting span:not(.atcb-icon-ical):nth-child(3){animation-delay:.3s}@keyframes blink{0%{opacity:.2}20%{opacity:1}100%{opacity:.2}}.pro #rsvp-sent-content{align-items:center;display:flex;flex-direction:column;gap:1.5em}#rsvp-status-group span{color:inherit}.atcb-modal-content .pro p{margin:0}.atcb-modal-content .pro p.pro-pt{margin-top:1.5em}.atcb-modal-content .pro .pro-field p{font-size:.9em}.pro .btn-flex{align-items:center;display:flex}.pro .atcb-modal-btn svg{fill:none;height:1.5em;margin-right:.5em;stroke:currentcolor;width:auto}#atcb-reference{box-sizing:border-box;filter:drop-shadow(0 0 3px rgba(255 255 255 / 80%));height:auto;padding:8px 0;transform:translate3d(0,0,0);width:100%;z-index:15000000}#atcb-reference.fixed-ref{position:fixed;bottom:10px;right:40px;width:auto}#atcb-reference.atcb-dropup{position:absolute}:host(.atcb-dark) #atcb-reference{filter:drop-shadow(0 0 5px #000)}#atcb-reference a,#atcb-reference a:active,#atcb-reference a:visited{opacity:.4;width:150px;max-width:100%;margin:auto;display:block;text-decoration:none}#atcb-reference.fixed-ref a{opacity:.6}#atcb-reference a:hover{opacity:.9;text-decoration:none}#atcb-reference svg{fill:var(--list-text)}`,date:`:host{width:fit-content;--base-font-size-l:16px;--base-font-size-m:16px;--base-font-size-s:16px;--font:arial,helvetica,sans-serif;--accent-color:#1e90ff;--wrapper-padding:0px;--buttonslist-gap:5px;--btn-background:#f5f5f5;--btn-hover-background:#fff;--btn-border:#d2d2d2;--btn-border-radius:4px;--btn-text:#333;--btn-hover-text:#000;--btn-shadow:rgba(0 0 0 / 13%) 0 4px 10px -2px,rgba(0 0 0 / 18%) 0 2px 3px -1px;--btn-hover-shadow:rgba(0 0 0 / 25%) 0 5px 12px -2px,rgba(0 0 0 / 25%) 0 3px 5px -2px;--list-background:#f5f5f5;--list-hover-background:#fff;--list-text:#333;--list-font-weight:400;--list-hover-text:#000;--list-close-background:#e5e5e5;--list-close-text:#777;--list-shadow:rgba(0 0 0 / 20%) 0 4px 13px -2px,rgba(0 0 0 / 23%) 0 2px 4px -1px;--list-modal-shadow:rgba(0 0 0 / 50%) 0 4px 30px -3px,rgba(0 0 0 / 30%) 0 2px 8px -2px;--modal-text:#000;--modal-text-align:left;--modal-text-align-rtl:right;--modal-background:#f5f5f5;--modal-shadow:drop-shadow(3px 6px 25px rgba(0 0 0 / 65%));--modal-btn-bar:#c6c8cd;--modal-btn-background:#f5f5f5;--modal-btn-secondary-background:#e2e1e6;--modal-btn-hover-background:#fff;--modal-btn-border:#d2d2d2;--modal-btn-font-weight:600;--modal-btn-text:#2e2e2e;--modal-btn-hover-text:#161616;--modal-btn-secondary-text:#666567;--modal-btn-shadow:rgba(0 0 0 / 10%) 0 4px 10px -2px,rgba(0 0 0 / 10%) 0 2px 3px -1px;--modal-btn-hover-shadow:rgba(0 0 0 / 25%) 0 5px 13px -2px,rgba(0 0 0 / 20%) 0 3px 5px -2px;--modal-headline-text-align:center;--modal-headline-text-transform:none;--input-border-radius:3px;--input-background:#fff;--status-active-text:#fff;--form-error:#c5372c;--form-success:#338a36;--date-btn-text:#1d1d1e;--date-btn-text-secondary:#3a3a3f;--date-btn-cal-day-text:#fff;--date-btn-cal-month-text:#d3d2d7;--date-btn-cal-background:#313132;--date-btn-background:#eae9ed;--date-btn-hover-background:#fff;--date-btn-headline-line-clamp:1;--date-btn-shadow:rgba(0 0 0 / 10%) 0 4px 10px -2px,rgba(0 0 0 / 15%) 0 2px 3px -1px;--date-btn-hover-shadow:rgba(0 0 0 / 20%) 0 5px 12px -2px,rgba(0 0 0 / 20%) 0 3px 4px -2px;--checkmark-background:drop-shadow(0 0 3px #fff);--overlay-background:rgba(20 20 20 / 25%);--overlay-cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23777' width='16' height='16' viewBox='0 0 122.878 122.88'%3E%3Cpath d='M1.426 8.313a4.87 4.87 0 0 1 0-6.886 4.87 4.87 0 0 1 6.886 0l53.127 53.127 53.127-53.127a4.87 4.87 0 0 1 6.887 0 4.87 4.87 0 0 1 0 6.886L68.324 61.439l53.128 53.128a4.87 4.87 0 0 1-6.887 6.886L61.438 68.326 8.312 121.453a4.87 4.87 0 0 1-6.886 0 4.87 4.87 0 0 1 0-6.886l53.127-53.128L1.426 8.313h0z'/%3E%3C/svg%3E") 16 16,crosshair;--icon-ms365-color:#ea3e23;--icon-yahoo-color:#5f01d1;--icon-filter:none}:host(.atcb-dark){--btn-background:#2e2e2e;--btn-hover-background:#474747;--btn-border:#4d4d4d;--btn-text:#dedede;--btn-hover-text:#f1f1f1;--btn-shadow:rgba(0 0 0 / 70%) 0 0 25px -2px,rgba(0 0 0 / 40%) 1px 2px 4px -1px;--btn-hover-shadow:rgba(0 0 0 / 90%) 2px 3px 25px -3px,rgba(0 0 0 / 50%) 1px 4px 6px -2px;--list-background:#2e2e2e;--list-hover-background:#474747;--list-text:#dedede;--list-hover-text:#f1f1f1;--list-close-background:#282828;--list-shadow:rgba(0 0 0 / 60%) 0 4px 20px -2px,rgba(0 0 0 / 40%) 0 2px 4px -1px;--list-modal-shadow:rgba(0 0 0 / 40%) -1px 3px 30px 2px;--modal-text:#f1f1f1;--modal-background:#242424;--modal-shadow:drop-shadow(3px 6px 25px rgba(0 0 0 / 90%));--modal-btn-bar:#38383a;--modal-btn-background:#181819;--modal-btn-secondary-background:#2e2d30;--modal-btn-hover-background:#434246;--modal-btn-border:#434246;--modal-btn-text:#dbdbdb;--modal-btn-hover-text:#fff;--modal-btn-secondary-text:#b8b8b8;--modal-btn-shadow:rgba(255 255 255 / 5%) -2px -2px 10px,rgba(0 0 0 / 40%) 3px 3px 10px -2px,rgba(0 0 0 / 40%) 1px 2px 5px -1px;--input-background:#434246;--status-active-text:#000;--form-error:#db8680;--form-success:#99de9c;--date-btn-text:#ebebf0;--date-btn-text-secondary:#b5b5bd;--date-btn-cal-day-text:#101010;--date-btn-cal-month-text:#3e3e3f;--date-btn-cal-background:#c7c7cd;--date-btn-background:#363636;--date-btn-hover-background:#474747;--date-btn-shadow:rgba(0 0 0 / 60%) 0 0 20px -2px,rgba(0 0 0 / 30%) 1px 2px 3px -1px;--checkmark-background:drop-shadow(0 0 3px #0a0a0a);--overlay-background:rgba(20 20 20 / 60%);--icon-ms365-color:#ea3e23;--icon-yahoo-color:#bebebe;--icon-filter:grayscale(.2)}.atcb-button-wrapper,.atcb-list,.atcb-modal-box{font-size:var(--base-font-size-l)}@media (width <= 991px){.atcb-button-wrapper,.atcb-list,.atcb-modal-box{font-size:var(--base-font-size-m)}}@media (width <= 575px){.atcb-button-wrapper,.atcb-list,.atcb-modal-box{font-size:var(--base-font-size-s)}}.atcb-button-wrapper{display:block;padding:var(--wrapper-padding);position:relative}.atcb-button,.atcb-subevent-btn{display:flex;align-items:flex-start;cursor:pointer;font-family:var(--font);font-size:1em;box-shadow:var(--date-btn-shadow);background-color:var(--date-btn-background);border:0;border-radius:var(--btn-border-radius);padding:0;margin:0;touch-action:manipulation;position:relative;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent}.atcb-subevent-btn{width:100%}.atcb-button{box-shadow:var(--btn-shadow);min-width:16em;max-width:18em;position:relative;z-index:1}.atcb-rtl .atcb-button{direction:rtl;text-align:right}.atcb-button:focus,.atcb-button:hover{background-color:var(--btn-hover-background);box-shadow:var(--btn-hover-shadow)}.atcb-button:focus-visible,.atcb-subevent-btn:focus-visible{outline:2px solid var(--accent-color)}.atcb-button:not(.atcb-active):hover,.atcb-subevent-btn:hover{align-items:center}.atcb-subevent-btn:focus,.atcb-subevent-btn:hover{background-color:var(--date-btn-hover-background);box-shadow:var(--date-btn-hover-shadow)}.atcb-button.atcb-active:not(.atcb-modal-style,.atcb-dropoverlay){z-index:15000000}.atcb-button.atcb-active.atcb-dropoverlay{z-index:14000090}.atcb-subevent-btn+.atcb-subevent-btn{margin-top:30px}.atcb-date-btn-left{border-radius:var(--btn-border-radius) 0 0 var(--btn-border-radius);align-self:stretch;background-color:var(--date-btn-cal-background);color:var(--date-btn-hover-background);padding:.7em .8em .8em;width:2.7em;align-items:center;display:flex;flex-direction:column;flex-shrink:0}.atcb-rtl .atcb-date-btn-left{border-radius:0 var(--btn-border-radius) var(--btn-border-radius) 0}.atcb-button:hover .atcb-date-btn-left,.atcb-subevent-btn:hover .atcb-date-btn-left{opacity:.8}.atcb-date-btn-day{color:var(--date-btn-cal-day-text);font-weight:400;font-size:2em;word-break:keep-all;padding-bottom:.1em}.atcb-initialized[lang=ja] .atcb-date-btn-day,.atcb-initialized[lang=ko] .atcb-date-btn-day,.atcb-initialized[lang=zh] .atcb-date-btn-day{font-size:1.3em}.atcb-date-btn-month{color:var(--date-btn-cal-month-text);font-weight:600;font-size:1em}.atcb-date-btn-right{position:relative;color:var(--date-btn-text);min-width:13.5em;overflow-wrap:anywhere}.atcb-subevent-btn .atcb-date-btn-right{width:100%}.atcb-date-btn-details{opacity:1;padding:.7em .8em;text-align:left}.atcb-rtl .atcb-date-btn-details{text-align:right}.atcb-date-btn-hover{position:absolute;top:0;left:0;width:100%;opacity:0;height:100%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:1em;padding:.4em .7em;box-sizing:border-box}.atcb-button:not(.atcb-active):hover .atcb-date-btn-hover,.atcb-subevent-btn:hover .atcb-date-btn-hover{opacity:1}.atcb-button:not(.atcb-active):hover .atcb-date-btn-details,.atcb-subevent-btn:hover .atcb-date-btn-details{opacity:0}.atcb-date-btn-headline{font-weight:600;font-size:.9em;margin-bottom:.5em;overflow:hidden;display:-webkit-box;-webkit-line-clamp:var(--date-btn-headline-line-clamp);-webkit-box-orient:vertical}.atcb-date-btn-content{display:flex;align-items:flex-start;font-size:.8em;color:var(--date-btn-text-secondary)}.atcb-date-btn-content.atcb-date-btn-cancelled{color:var(--form-error);font-weight:700}.atcb-date-btn-content-location{overflow:hidden;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;word-break:break-all}.atcb-date-btn-content-icon{display:inline-block;height:.8em;margin-right:.4em;margin-left:0;width:.9em;flex-shrink:0}.atcb-rtl .atcb-date-btn-content-icon{margin-right:0;margin-left:.4em}.atcb-initialized[lang=ja] .atcb-date-btn-content:not(.atcb-date-btn-content-location) .atcb-date-btn-content-icon,.atcb-initialized[lang=ko] .atcb-date-btn-content:not(.atcb-date-btn-content-location) .atcb-date-btn-content-icon,.atcb-initialized[lang=zh] .atcb-date-btn-content:not(.atcb-date-btn-content-location) .atcb-date-btn-content-icon{margin-top:.15em}.atcb-date-btn-content-icon svg{height:100%;fill:currentcolor;width:100%}.atcb-date-btn-content+.atcb-date-btn-content{margin-top:.3em}.atcb-date-btn-content-text span:not(.atcb-icon-ical){padding-right:.3em;display:inline-block}.atcb-icon{flex-grow:0;flex-shrink:0;height:1em;line-height:1em;margin-right:.8em;width:1em}.atcb-rtl .atcb-icon{margin-right:0;margin-left:.8em}.atcb-no-text .atcb-icon{margin-right:0;margin-left:0}.atcb-icon svg{fill:currentcolor;height:100%;width:100%}.atcb-text{overflow-wrap:anywhere}.atcb-dropdown-anchor{bottom:4px;height:1px;width:100%;opacity:0;position:absolute}.atcb-list-wrapper{box-sizing:border-box;font-weight:var(--list-font-weight);padding:0 4px;position:absolute;z-index:14000090}.atcb-list-wrapper.atcb-dropoverlay{z-index:15000000}.atcb-list{border-radius:0 0 var(--btn-border-radius) var(--btn-border-radius);box-sizing:border-box;box-shadow:var(--list-shadow);color:var(--list-text);display:block;font-family:var(--font);min-width:100%;position:relative;user-select:none;-webkit-user-select:none;width:fit-content}.atcb-list-item{align-items:center;background-color:var(--list-background);box-sizing:border-box;cursor:pointer;display:flex;font-size:1em;line-height:1.75em;padding:.8em;text-align:left;touch-action:manipulation;-webkit-tap-highlight-color:transparent}.atcb-rtl .atcb-list-item{direction:rtl;text-align:right}.atcb-list-item:hover{background-color:var(--list-hover-background);color:var(--list-hover-text)}.atcb-list-item:focus-visible{background-color:var(--list-hover-background);color:var(--accent-color);outline:0}.atcb-list-item:last-child{border-radius:0 0 var(--btn-border-radius) var(--btn-border-radius)}.atcb-dropup .atcb-list-item:last-child{border-radius:0;padding-bottom:1.25em}.atcb-dropoverlay .atcb-list .atcb-list-item:first-child,.atcb-dropup .atcb-list-item:first-child,.atcb-list.atcb-modal .atcb-list-item:first-child{border-radius:var(--btn-border-radius) var(--btn-border-radius) 0 0}.atcb-dropoverlay .atcb-list .atcb-list-item:only-child,.atcb-list.atcb-modal .atcb-list-item:only-child{border-radius:var(--btn-border-radius)}.atcb-list.atcb-generated-button:not(.atcb-modal) .atcb-list-item:first-child{padding-top:1.25em}.atcb-dropoverlay .atcb-list.atcb-generated-button:not(.atcb-modal) .atcb-list-item:first-child,.atcb-dropup .atcb-list.atcb-generated-button:not(.atcb-modal) .atcb-list-item:first-child{padding-top:.8em}.atcb-dropoverlay .atcb-list,.atcb-list.atcb-modal{border-radius:var(--btn-border-radius)}.atcb-list.atcb-modal{box-shadow:var(--list-modal-shadow)}.atcb-list-item .atcb-icon{margin:0 auto}.atcb-list-item .atcb-icon+.atcb-text{margin-left:.7em;width:100%}.atcb-rtl .atcb-list-item .atcb-icon+.atcb-text{margin-left:0;margin-right:.7em}.atcb-list-item-close{background-color:var(--list-close-background)}.atcb-list-item.atcb-list-item-close:not(:focus-visible){color:var(--list-close-text)}.atcb-list-item-close svg{fill:currentcolor}.atcb-modal{display:block;margin:auto;width:auto;min-width:auto;position:relative;z-index:14000090}.atcb-modal-box{filter:var(--modal-shadow);color:var(--modal-text);cursor:default;box-sizing:border-box;font-family:var(--font);line-height:1.5em;text-align:var(--modal-text-align);user-select:none;-webkit-user-select:none;touch-action:manipulation;width:100%;margin-bottom:20px;-webkit-tap-highlight-color:transparent}@media (width > 575px){.atcb-modal-box{width:32em}}.atcb-modal-box.atcb-rtl{text-align:var(--modal-text-align-rtl);direction:rtl;padding:1.25em 1em 1.25em 2em}.atcb-modal-icon{height:2.5em;width:2.5em;border-radius:100%;background-color:var(--modal-background);padding:1.75em;margin:auto}.atcb-modal-icon svg{fill:currentcolor;height:100%;width:100%}.atcb-modal-headline{background-color:var(--modal-background);border-radius:var(--btn-border-radius) var(--btn-border-radius) 0 0;font-size:1.3em;font-weight:600;line-height:1.5em;padding:1.8em 1.5em 1.3em;text-transform:var(--modal-headline-text-transform);text-align:var(--modal-headline-text-align)}.atcb-modal-icon+.atcb-modal-headline{margin-top:-2.6em;padding-top:2.6em}.atcb-modal-content{background-color:var(--modal-background);font-size:1em;padding:.3em 2em 2.2em}.atcb-modal-content-subevents{margin:auto;width:fit-content}.atcb-modal-icon+.atcb-modal-content{border-radius:var(--btn-border-radius) var(--btn-border-radius) 0 0;margin-top:-2.6em;padding-top:2.6em}@media (width <= 575px){.atcb-modal-headline{padding:1.8em 1em 1em}.atcb-modal-content{padding:.3em 1.5em 1.5em}.atcb-modal-icon+.atcb-modal-content{padding-top:1.8em}}.atcb-modal-buttons{background-color:var(--modal-btn-bar);border-radius:0 0 var(--btn-border-radius) var(--btn-border-radius);box-sizing:border-box;padding:.6em;text-align:center;width:100%;display:flex;justify-content:center;flex-flow:row-reverse wrap;align-items:center}a.atcb-modal-btn,button.atcb-modal-btn{background-color:var(--modal-btn-secondary-background);border:0;border-radius:var(--btn-border-radius);box-shadow:var(--modal-btn-shadow);color:var(--modal-btn-secondary-text);cursor:pointer;display:inline-block;font-family:var(--font);font-size:.9em;font-weight:var(--modal-btn-font-weight);line-height:1em;margin:.625em;padding:1em 1.25em;position:relative;text-align:center;text-decoration:none;touch-action:manipulation;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent}a.atcb-modal-btn.btn-small,button.atcb-modal-btn.btn-small{padding:.6em .8em}a.atcb-modal-btn.atcb-modal-btn-primary,button.atcb-modal-btn.atcb-modal-btn-primary{background-color:var(--modal-btn-background);color:var(--modal-btn-text)}a.atcb-modal-btn.atcb-modal-btn-border,button.atcb-modal-btn.atcb-modal-btn-border{border:1px solid var(--modal-btn-border)}a.atcb-modal-btn:focus-visible,button.atcb-modal-btn:focus-visible{background-color:var(--modal-btn-hover-background);outline:2px solid var(--accent-color)}a.atcb-modal-btn:disabled,button.atcb-button:disabled,button.atcb-modal-btn:disabled,button.atcb-subevent-btn:disabled{cursor:not-allowed;opacity:.75;filter:brightness(95%);border-style:dashed;box-shadow:none}a.atcb-modal-btn:not([disabled]):hover,button.atcb-modal-btn:not([disabled]):hover{background-color:var(--modal-btn-hover-background);box-shadow:var(--modal-btn-hover-shadow);color:var(--modal-btn-hover-text);text-decoration:none}.atcb-checkmark{display:none}.atcb-saved .atcb-checkmark{box-sizing:content-box;color:var(--btn-text);display:block;position:absolute;top:-.9em;right:-.5em;padding:.5em;border-radius:100%;height:1.2em}.atcb-checkmark svg{height:100%;filter:var(--checkmark-background);width:auto}#atcb-bgoverlay{backdrop-filter:blur(2px);-webkit-backdrop-filter:blur(2px);background-color:var(--overlay-background);border:0;box-sizing:border-box;display:flex;height:calc(100vh + 100px);inset-inline:0;left:0;right:0;top:0;min-height:100%;min-width:100%;overflow-y:auto;padding:20px 20px 130px;position:fixed;width:100vw;z-index:14000000}#atcb-bgoverlay:not(dialog){animation:atcb-bgoverlay-animate .2s ease 0s 1 normal forwards;opacity:0}#atcb-bgoverlay.atcb-no-bg{animation:none;backdrop-filter:none;-webkit-backdrop-filter:none;opacity:1;background-color:transparent}@keyframes atcb-bgoverlay-animate{0%{opacity:0}100%{opacity:1}}#atcb-bgoverlay.atcb-click:hover{cursor:var(--overlay-cursor)}.atcb-icon-outlookcom,.atcb-icon.atcb-icon-ms365{padding-bottom:.05em}.atcb-icon.atcb-icon-apple,.atcb-icon.atcb-icon-ical{padding-bottom:.15em}.atcb-icon.atcb-icon-apple svg{fill:currentcolor}.atcb-icon.atcb-icon-ical svg{fill:currentcolor}.atcb-icon.atcb-icon-ms365 svg{fill:var(--icon-ms365-color)}.atcb-icon.atcb-icon-yahoo svg{fill:var(--icon-yahoo-color)}.atcb-icon.atcb-icon-google svg,.atcb-icon.atcb-icon-msteams svg,.atcb-icon.atcb-icon-outlookcom svg{filter:var(--icon-filter)}.pro{text-align:center}.pro ol,.pro ul{margin:auto;text-align:left;width:fit-content}.pro a:not(.atcb-modal-btn),.pro a:not(.atcb-modal-btn):active,.pro a:not(.atcb-modal-btn):visited{color:var(--modal-btn-text);text-decoration:underline;text-decoration-thickness:2px;text-decoration-color:var(--accent-color)}.pro a:not(.atcb-modal-btn):hover{color:var(--accent-color);text-decoration:none}.pro .pro-share-buttons{display:flex;flex-wrap:wrap;justify-content:center}.pro-form{border-top:1px solid var(--modal-btn-border);margin-top:1.5em;padding-top:1.5em;text-align:left}.pro-field+.pro-field{padding-top:1.3em}.pro-field-type-label+.pro-field-type-radio{padding-top:0}.pro-field-type-checkbox,.pro-field-type-radio div{align-items:center;display:flex}.pro-field-type-checkbox input,.pro-field-type-radio input{cursor:pointer}.pro-field label{display:block;font-size:.9em;opacity:.7}.pro-field-type-checkbox label,.pro-field-type-radio label{cursor:pointer;opacity:.8;padding-left:.3em}.pro-field input[type=email],.pro-field input[type=number],.pro-field input[type=text]{background-color:var(--input-background);border:1px solid var(--modal-btn-border);border-radius:var(--input-border-radius);box-sizing:border-box;caret-color:var(--accent-color);color:var(--modal-text);font-size:.9em;opacity:.8;padding:.7em;transition:all .1s ease-in-out;width:100%}.pro-field input[type=checkbox],.pro-field input[type=radio]{accent-color:var(--accent-color);height:1.2rem;opacity:.8;transition:all .1s ease-in-out;width:1.2em}.pro-field input:disabled,.pro-field input:disabled+label{cursor:not-allowed;opacity:.75;filter:brightness(95%)}.pro-field input:not([disabled]):hover{opacity:1}.pro-field input[type=email]:focus,.pro-field input[type=number]:focus,.pro-field input[type=text]:focus{border-color:var(--accent-color);outline:1px solid var(--accent-color)}.pro-field input[type=checkbox]:focus,.pro-field input[type=radio]:focus{outline-color:var(--accent-color);outline-width:2px}#submit-error{color:var(--form-error);display:none;font-weight:700;padding-top:1.5em;text-align:center}.pro-form.form-error #submit-error{display:block}.pro-field input.error{accent-color:var(--form-error);border:2px solid var(--form-error)}.pro-field input.error+label,.pro-field:has(input.error) label{color:var(--form-error);opacity:1}#ty-success-msg{display:none;font-weight:700;line-height:1.6em;padding:1.5em 0;text-align:center}#pro-form-submit{display:block;margin:auto;min-width:150px}.pro-waiting{background-color:var(--modal-btn-background);border:1px solid var(--modal-btn-border);border-radius:var(--btn-border-radius);box-sizing:border-box;color:var(--modal-btn-text);cursor:wait;display:none;line-height:.5em;margin:auto;min-width:150px;padding:.5em 1.25em 1.2em;text-align:center;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;width:fit-content}@media (width > 575px){#pro-form-submit,.pro-waiting{min-width:200px}}.pro-waiting span:not(.atcb-icon-ical){animation-name:blink;animation-duration:1s;animation-iteration-count:infinite;animation-fill-mode:both;font-size:2.5em}.pro-field label span:not(.atcb-icon-ical){color:var(--form-error);font-weight:700;padding-left:2px}.pro-waiting span:not(.atcb-icon-ical):nth-child(2){animation-delay:.15s}.pro-waiting span:not(.atcb-icon-ical):nth-child(3){animation-delay:.3s}@keyframes blink{0%{opacity:.2}20%{opacity:1}100%{opacity:.2}}.atcb-modal-content .pro p{margin:0}.atcb-modal-content .pro p.pro-pt{margin-top:1.5em}.atcb-modal-content .pro .pro-field p{font-size:.9em}.pro .btn-flex{align-items:center;display:flex}.pro .atcb-modal-btn svg{fill:none;height:1.5em;margin-right:.5em;stroke:currentcolor;width:auto}#atcb-reference{box-sizing:border-box;filter:drop-shadow(0 0 3px rgba(255 255 255 / 80%));height:auto;padding:8px 0;transform:translate3d(0,0,0);width:100%;z-index:15000000}#atcb-reference.fixed-ref{position:fixed;bottom:10px;right:40px;width:auto}#atcb-reference.atcb-dropup{position:absolute}:host(.atcb-dark) #atcb-reference{filter:drop-shadow(0 0 5px #000)}#atcb-reference a,#atcb-reference a:active,#atcb-reference a:visited{opacity:.4;width:150px;max-width:100%;margin:auto;display:block;text-decoration:none}#atcb-reference.fixed-ref a{opacity:.6}#atcb-reference a:hover{opacity:.9;text-decoration:none}#atcb-reference svg{fill:var(--list-text)}`},cf=()=>!(typeof window>"u"),Sl=cf()?()=>!!(/iPad|iPhone|iPod/i.test(navigator.userAgent)&&!/MSStream/i.test(navigator.userAgent)):()=>!1,r0=cf()?()=>!!(/android/i.test(navigator.userAgent)&&!/MSStream/i.test(navigator.userAgent)):()=>!1,a4=cf()?()=>!!/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent):()=>!1,ev=()=>!!(r0()||Sl()),a5=cf()?()=>!!/(; ?wv|(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari))/i.test(navigator.userAgent):()=>!1,e_e=cf()?()=>!!/(Instagram)/i.test(navigator.userAgent):()=>!1,s4=a5()?"_system":"_blank",t_e=["apple","google","ical","ms365","outlookcom","msteams","yahoo"],n_e=["apple","google","ical"],r_e=["msteams"],o_e=["ical"],i_e=["apple"],gi=[],HW=["debug","cspnonce","identifier","name","dates","description","startDate","startTime","endDate","endTime","timeZone","useUserTZ","location","status","uid","organizer","attendee","icsFile","images","recurrence","recurrence_until","recurrence_byDay","recurrence_byMonth","recurrence_byMonthDay","recurrence_weekstart","sequence","recurrence_interval","recurrence_count","availability","created","updated","subscribe","options","optionsMobile","optionsIOS","iCalFileName","listStyle","buttonStyle","trigger","hideIconButton","hideIconList","hideIconModal","hideTextLabelButton","hideTextLabelList","buttonsList","hideBackground","hideCheckmark","hideBranding","size","label","inline","inlineRsvp","customLabels","customCss","lightMode","language","hideRichData","bypassWebViewCheck","blockInteraction","styleLight","styleDark","disabled","hidden","hideButton","pastDateHandling","proxy","fakeMobile","fakeIOS","fakeAndroid","forceOverlay","rsvp","ty","customVar","dev"],s5=["debug","cspnonce","attendee","images","size","inline","inlineRsvp","customLabels","customCss","lightMode","language","bypassWebViewCheck","blockInteraction","styleLight","styleDark","disabled","hidden","fakeMobile","fakeIOS","fakeAndroid","forceOverlay","customVar","proxy","dev"],l5=["debug","useUserTZ","hideIconButton","hideIconList","hideIconModal","hideTextLabelButton","hideTextLabelList","subscribe","hideBackground","hideCheckmark","hideBranding","inlineRsvp","hideRichData","buttonsList","inline","bypassWebViewCheck","blockInteraction","disabled","hidden","hideButton","proxy","fakeMobile","fakeIOS","fakeAndroid","forceOverlay","dev"],a_e=["customLabels","ty","rsvp","customVar"],s_e=["dates"],l_e=["images","options","optionsMobile","optionsIOS"],c_e=["sequence","recurrence_interval","recurrence_count"],Eb={trigger:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200.016"><path d="M132.829 7.699c0-4.248 4.199-7.699 9.391-7.699s9.391 3.451 9.391 7.699v33.724c0 4.248-4.199 7.699-9.391 7.699s-9.391-3.451-9.391-7.699zm-5.941 123.747c2.979 0 5.404 2.425 5.404 5.404s-2.425 5.404-5.404 5.404l-21.077-.065-.065 21.045c0 2.979-2.425 5.404-5.404 5.404s-5.404-2.425-5.404-5.404l.065-21.061-21.045-.081c-2.979 0-5.404-2.425-5.404-5.404s2.425-5.404 5.404-5.404l21.061.065.065-21.045c0-2.979 2.425-5.404 5.404-5.404s5.404 2.425 5.404 5.404l-.065 21.077 21.061.065zM48.193 7.699C48.193 3.451 52.393 0 57.585 0s9.391 3.451 9.391 7.699v33.724c0 4.248-4.199 7.699-9.391 7.699s-9.391-3.451-9.391-7.699zM10.417 73.763h179.167V34.945c0-1.302-.537-2.49-1.4-3.369-.863-.863-2.051-1.4-3.369-1.4h-17.171c-2.881 0-5.208-2.327-5.208-5.208s2.327-5.208 5.208-5.208h17.171c4.183 0 7.975 1.709 10.726 4.46S200 30.762 200 34.945v44.043 105.843c0 4.183-1.709 7.975-4.46 10.726s-6.543 4.46-10.726 4.46H15.186c-4.183 0-7.975-1.709-10.726-4.46C1.709 192.79 0 188.997 0 184.814V78.988 34.945c0-4.183 1.709-7.975 4.46-10.726s6.543-4.46 10.726-4.46h18.343c2.881 0 5.208 2.327 5.208 5.208s-2.327 5.208-5.208 5.208H15.186c-1.302 0-2.49.537-3.369 1.4-.863.863-1.4 2.051-1.4 3.369zm179.167 10.433H10.417v100.618c0 1.302.537 2.49 1.4 3.369.863.863 2.051 1.4 3.369 1.4h169.629c1.302 0 2.49-.537 3.369-1.4.863-.863 1.4-2.051 1.4-3.369zM82.08 30.176c-2.881 0-5.208-2.327-5.208-5.208s2.327-5.208 5.208-5.208h34.977c2.881 0 5.208 2.327 5.208 5.208s-2.327 5.208-5.208 5.208z"/></svg>',apple:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 245.657"><path d="M167.084 130.514c-.308-31.099 25.364-46.022 26.511-46.761-14.429-21.107-36.91-24.008-44.921-24.335-19.13-1.931-37.323 11.27-47.042 11.27-9.692 0-24.67-10.98-40.532-10.689-20.849.308-40.07 12.126-50.818 30.799-21.661 37.581-5.54 93.281 15.572 123.754 10.313 14.923 22.612 31.688 38.764 31.089 15.549-.612 21.433-10.073 40.242-10.073s24.086 10.073 40.546 9.751c16.737-.308 27.34-15.214 37.585-30.187 11.855-17.318 16.714-34.064 17.009-34.925-.372-.168-32.635-12.525-32.962-49.68l.045-.013zm-30.917-91.287C144.735 28.832 150.524 14.402 148.942 0c-12.344.503-27.313 8.228-36.176 18.609-7.956 9.216-14.906 23.904-13.047 38.011 13.786 1.075 27.862-7.004 36.434-17.376z"/></svg>',google:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><path d="M152.637 47.363H47.363v105.273h105.273z" fill="#fff"/><path d="M152.637 200L200 152.637h-47.363z" fill="#f72a25"/><path d="M200 47.363h-47.363v105.273H200z" fill="#fbbc04"/><path d="M152.637 152.637H47.363V200h105.273z" fill="#34a853"/><path d="M0 152.637v31.576A15.788 15.788 0 0 0 15.788 200h31.576v-47.363z" fill="#188038"/><path d="M200 47.363V15.788A15.79 15.79 0 0 0 184.212 0h-31.575v47.363z" fill="#1967d2"/><path d="M15.788 0A15.79 15.79 0 0 0 0 15.788v136.849h47.363V47.363h105.274V0z" fill="#4285f4"/><path d="M68.962 129.02c-3.939-2.653-6.657-6.543-8.138-11.67l9.131-3.76c.83 3.158 2.279 5.599 4.346 7.341 2.051 1.742 4.557 2.588 7.471 2.588 2.995 0 5.55-.911 7.699-2.718 2.148-1.823 3.223-4.134 3.223-6.934 0-2.865-1.139-5.208-3.402-7.031s-5.111-2.718-8.496-2.718h-5.273v-9.033h4.736c2.913 0 5.387-.781 7.389-2.376 2.002-1.579 2.995-3.743 2.995-6.494 0-2.441-.895-4.395-2.686-5.859s-4.053-2.197-6.803-2.197c-2.686 0-4.818.716-6.396 2.148s-2.767 3.255-3.451 5.273l-9.033-3.76c1.204-3.402 3.402-6.396 6.624-8.984s7.34-3.89 12.337-3.89c3.695 0 7.031.716 9.977 2.148s5.257 3.418 6.934 5.941c1.676 2.539 2.507 5.387 2.507 8.545 0 3.223-.781 5.941-2.327 8.187-1.546 2.23-3.467 3.955-5.729 5.143v.537a17.39 17.39 0 0 1 7.34 5.729c1.904 2.572 2.865 5.632 2.865 9.212s-.911 6.771-2.718 9.57c-1.823 2.799-4.329 5.013-7.52 6.624s-6.787 2.425-10.775 2.425c-4.622 0-8.887-1.318-12.826-3.988zm56.087-45.312l-10.026 7.243-5.013-7.601 17.985-12.972h6.901v61.198h-9.847z" fill="#1a73e8"/></svg>',ical:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200.016"><path d="M132.829 7.699c0-4.248 4.199-7.699 9.391-7.699s9.391 3.451 9.391 7.699v33.724c0 4.248-4.199 7.699-9.391 7.699s-9.391-3.451-9.391-7.699zm-25.228 161.263c-.553 0-.993-2.327-.993-5.208s.439-5.208.993-5.208h25.7c.553 0 .993 2.327.993 5.208s-.439 5.208-.993 5.208zm-81.803-59.766c-.553 0-.993-2.327-.993-5.208s.439-5.208.993-5.208h25.7c.553 0 .993 2.327.993 5.208s-.439 5.208-.993 5.208zm40.902 0c-.553 0-.993-2.327-.993-5.208s.439-5.208.993-5.208h25.7c.553 0 .993 2.327.993 5.208s-.439 5.208-.993 5.208zm40.902 0c-.553 0-.993-2.327-.993-5.208s.439-5.208.993-5.208h25.7c.553 0 .993 2.327.993 5.208s-.439 5.208-.993 5.208zm40.918 0c-.553 0-.993-2.327-.993-5.208s.439-5.208.993-5.208h25.7c.553 0 .993 2.327.993 5.208s-.439 5.208-.993 5.208zM25.798 139.079c-.553 0-.993-2.327-.993-5.208s.439-5.208.993-5.208h25.7c.553 0 .993 2.327.993 5.208s-.439 5.208-.993 5.208zm40.902 0c-.553 0-.993-2.327-.993-5.208s.439-5.208.993-5.208h25.7c.553 0 .993 2.327.993 5.208s-.439 5.208-.993 5.208zm40.902 0c-.553 0-.993-2.327-.993-5.208s.439-5.208.993-5.208h25.7c.553 0 .993 2.327.993 5.208s-.439 5.208-.993 5.208zm40.918 0c-.553 0-.993-2.327-.993-5.208s.439-5.208.993-5.208h25.7c.553 0 .993 2.327.993 5.208s-.439 5.208-.993 5.208zM25.798 168.962c-.553 0-.993-2.327-.993-5.208s.439-5.208.993-5.208h25.7c.553 0 .993 2.327.993 5.208s-.439 5.208-.993 5.208zm40.902 0c-.553 0-.993-2.327-.993-5.208s.439-5.208.993-5.208h25.7c.553 0 .993 2.327.993 5.208s-.439 5.208-.993 5.208zM48.193 7.699C48.193 3.451 52.393 0 57.585 0s9.391 3.451 9.391 7.699v33.724c0 4.248-4.199 7.699-9.391 7.699s-9.391-3.451-9.391-7.699zM10.417 73.763h179.15V34.945c0-1.302-.537-2.49-1.4-3.369-.863-.863-2.051-1.4-3.369-1.4h-17.155c-2.881 0-5.208-2.327-5.208-5.208s2.327-5.208 5.208-5.208h17.171c4.183 0 7.975 1.709 10.726 4.46S200 30.762 200 34.945v44.043 105.843c0 4.183-1.709 7.975-4.46 10.726s-6.543 4.46-10.726 4.46H15.186c-4.183 0-7.975-1.709-10.726-4.46C1.709 192.79 0 188.997 0 184.814V78.971 34.945c0-4.183 1.709-7.975 4.46-10.726s6.543-4.46 10.726-4.46h18.343c2.881 0 5.208 2.327 5.208 5.208s-2.327 5.208-5.208 5.208H15.186c-1.302 0-2.49.537-3.369 1.4-.863.863-1.4 2.051-1.4 3.369zm179.167 10.433H10.417v100.618c0 1.302.537 2.49 1.4 3.369.863.863 2.051 1.4 3.369 1.4h169.629c1.302 0 2.49-.537 3.369-1.4.863-.863 1.4-2.051 1.4-3.369zM82.08 30.176c-2.881 0-5.208-2.327-5.208-5.208s2.327-5.208 5.208-5.208h34.977c2.881 0 5.208 2.327 5.208 5.208s-2.327 5.208-5.208 5.208z"/></svg>',msteams:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 200 186.047"><path d="M195.349 39.535a20.93 20.93 0 1 1-41.86 0 20.93 20.93 0 1 1 41.86 0zm-55.847 30.233h51.66A8.84 8.84 0 0 1 200 78.605v47.056c0 17.938-14.541 32.479-32.479 32.479h0-.154c-17.938.003-32.481-14.537-32.484-32.474v-.005-51.274a4.62 4.62 0 0 1 4.619-4.619z" fill="#5059c9"/><path d="M149.614 69.767H64.34c-4.823.119-8.637 4.122-8.526 8.944v53.67c-.673 28.941 22.223 52.957 51.163 53.665 28.94-.708 51.836-24.725 51.163-53.665v-53.67c.112-4.823-3.703-8.825-8.526-8.944zm-10.079-39.535a30.233 30.233 0 0 1-60.465 0 30.233 30.233 0 0 1 60.465 0z" fill="#7b83eb"/><path opacity=".1" d="M111.628 69.767v75.209c-.023 3.449-2.113 6.547-5.302 7.86-1.015.43-2.107.651-3.209.651H59.907l-1.628-4.651c-1.628-5.337-2.459-10.885-2.465-16.465V78.698c-.112-4.815 3.697-8.811 8.512-8.93z"/><path opacity=".2" d="M106.977 69.767v79.86a8.241 8.241 0 0 1-.651 3.209c-1.313 3.189-4.412 5.279-7.86 5.302H62.093l-2.186-4.651a46.13 46.13 0 0 1-1.628-4.651 56.647 56.647 0 0 1-2.465-16.465V78.698c-.112-4.815 3.697-8.811 8.512-8.93z"/><path opacity=".2" d="M102.326 69.767v70.558a8.58 8.58 0 0 1-8.512 8.512H58.279a56.647 56.647 0 0 1-2.465-16.465V78.698c-.112-4.815 3.697-8.811 8.512-8.93z"/><path opacity=".1" d="M111.628 45.721v14.651l-2.326.093c-.791 0-1.535-.046-2.326-.093-1.57-.104-3.127-.353-4.651-.744a30.233 30.233 0 0 1-20.93-17.767 25.845 25.845 0 0 1-1.488-4.651h23.209c4.693.018 8.494 3.818 8.512 8.512z"/><use xlink:href="#B" opacity=".2" transform="scale(.08973306)"/><path d="M106.977 50.372v10c-1.57-.104-3.127-.353-4.651-.744a30.233 30.233 0 0 1-20.93-17.767h17.07c4.693.018 8.494 3.818 8.512 8.512zm0 19.395v70.558a8.58 8.58 0 0 1-8.512 8.512H58.279a56.647 56.647 0 0 1-2.465-16.465V78.698c-.112-4.815 3.697-8.811 8.512-8.93z" opacity=".2"/><path opacity=".2" d="M102.326 50.372v9.256a30.233 30.233 0 0 1-20.93-17.767h12.419c4.693.018 8.494 3.818 8.512 8.512z"/><linearGradient id="A" gradientUnits="userSpaceOnUse" x1="17.776" y1="35.199" x2="84.55" y2="150.848"><stop offset="0" stop-color="#5a62c3"/><stop offset=".5" stop-color="#4d55bd"/><stop offset="1" stop-color="#3940ab"/></linearGradient><path fill="url(#A)" d="M8.526 41.86H93.8a8.53 8.53 0 0 1 8.526 8.526v85.274a8.53 8.53 0 0 1-8.526 8.526H8.526A8.53 8.53 0 0 1 0 135.66V50.386a8.53 8.53 0 0 1 8.526-8.526z"/><path fill="#fff" d="M73.6 74.316H56.553v46.419h-10.86V74.316H28.726v-9.005H73.6z"/><defs><path id="B" d="M1192.167 561.355v111.442c-17.496-1.161-34.848-3.937-51.833-8.293a336.92 336.92 0 0 1-233.25-198.003h190.228c52.304.198 94.656 42.55 94.855 94.854z"/></defs></svg>',ms365:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 239.766"><path d="M200 219.785l-.021-.012V20.591L128.615 0 .322 48.172 0 48.234.016 192.257l43.78-17.134V57.943l84.819-20.279-.012 172.285L.088 192.257l128.515 47.456v.053l71.376-19.753v-.227z"/></svg>',outlookcom:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 175"><path d="M178.725 0H71.275A8.775 8.775 0 0 0 62.5 8.775v9.975l60.563 18.75L187.5 18.75V8.775A8.775 8.775 0 0 0 178.725 0z" fill="#0364b8"/><path d="M197.813 96.281c.915-2.878 2.187-5.855 2.187-8.781-.002-1.485-.795-2.857-1.491-3.26l-68.434-38.99a9.37 9.37 0 0 0-9.244-.519c-.312.154-.614.325-.906.512l-67.737 38.6-.025.013-.075.044a4.16 4.16 0 0 0-2.088 3.6c.541 2.971 1.272 5.904 2.188 8.781l71.825 52.532z" fill="#0a2767"/><path d="M150 18.75h-43.75L93.619 37.5l12.631 18.75L150 93.75h37.5v-37.5z" fill="#28a8ea"/><path d="M150 18.75h37.5v37.5H150z" fill="#50d9ff"/><path d="M150 93.75l-43.75-37.5H62.5v37.5l43.75 37.5 67.7 11.05z" fill="#0364b8"/><path d="M106.25 56.25v37.5H150v-37.5zM150 93.75v37.5h37.5v-37.5zm-87.5-75h43.75v37.5H62.5z" fill="#0078d4"/><path d="M62.5 93.75h43.75v37.5H62.5z" fill="#064a8c"/><path d="M126.188 145.113l-73.706-53.75 3.094-5.438 68.181 38.825a3.3 3.3 0 0 0 2.625-.075l68.331-38.937 3.1 5.431z" fill="#0a2767" opacity=".5"/><path d="M197.919 91.106l-.088.05-.019.013-67.738 38.588c-2.736 1.764-6.192 1.979-9.125.569l23.588 31.631 51.588 11.257v-.001c2.434-1.761 3.876-4.583 3.875-7.587V87.5c.001 1.488-.793 2.862-2.081 3.606z" fill="#1490df"/><path d="M200 165.625v-4.613l-62.394-35.55-7.531 4.294a9.356 9.356 0 0 1-9.125.569l23.588 31.631 51.588 11.231v.025a9.362 9.362 0 0 0 3.875-7.588z" opacity=".05"/><path d="M199.688 168.019l-68.394-38.956-1.219.688c-2.734 1.766-6.19 1.984-9.125.575l23.588 31.631 51.587 11.256v.001a9.38 9.38 0 0 0 3.562-5.187z" opacity=".1"/><path d="M51.455 90.721c-.733-.467-1.468-1.795-1.455-3.221v78.125c-.007 5.181 4.194 9.382 9.375 9.375h131.25c1.395-.015 2.614-.366 3.813-.813.638-.258 1.252-.652 1.687-.974z" fill="#28a8ea"/><path d="M112.5 141.669V39.581a8.356 8.356 0 0 0-8.331-8.331H62.687v46.6l-10.5 5.987-.031.012-.075.044A4.162 4.162 0 0 0 50 87.5v.031-.031V150h54.169a8.356 8.356 0 0 0 8.331-8.331z" opacity=".1"/><path d="M106.25 147.919V45.831a8.356 8.356 0 0 0-8.331-8.331H62.687v40.35l-10.5 5.987-.031.012-.075.044A4.162 4.162 0 0 0 50 87.5v.031-.031 68.75h47.919a8.356 8.356 0 0 0 8.331-8.331z" opacity=".2"/><path d="M106.25 135.419V45.831a8.356 8.356 0 0 0-8.331-8.331H62.687v40.35l-10.5 5.987-.031.012-.075.044A4.162 4.162 0 0 0 50 87.5v.031-.031 56.25h47.919a8.356 8.356 0 0 0 8.331-8.331z" opacity=".2"/><path d="M100 135.419V45.831a8.356 8.356 0 0 0-8.331-8.331H62.687v40.35l-10.5 5.987-.031.012-.075.044A4.162 4.162 0 0 0 50 87.5v.031-.031 56.25h41.669a8.356 8.356 0 0 0 8.331-8.331z" opacity=".2"/><path d="M8.331 37.5h83.337A8.331 8.331 0 0 1 100 45.831v83.338a8.331 8.331 0 0 1-8.331 8.331H8.331A8.331 8.331 0 0 1 0 129.169V45.831A8.331 8.331 0 0 1 8.331 37.5z" fill="#0078d4"/><path d="M24.169 71.675a26.131 26.131 0 0 1 10.263-11.337 31.031 31.031 0 0 1 16.313-4.087 28.856 28.856 0 0 1 15.081 3.875 25.875 25.875 0 0 1 9.988 10.831 34.981 34.981 0 0 1 3.5 15.938 36.881 36.881 0 0 1-3.606 16.662 26.494 26.494 0 0 1-10.281 11.213 30 30 0 0 1-15.656 3.981 29.556 29.556 0 0 1-15.425-3.919 26.275 26.275 0 0 1-10.112-10.85 34.119 34.119 0 0 1-3.544-15.744 37.844 37.844 0 0 1 3.481-16.563zm10.938 26.613a16.975 16.975 0 0 0 5.769 7.463 15.069 15.069 0 0 0 9.019 2.719 15.831 15.831 0 0 0 9.631-2.806 16.269 16.269 0 0 0 5.606-7.481 28.913 28.913 0 0 0 1.787-10.406 31.644 31.644 0 0 0-1.687-10.538 16.681 16.681 0 0 0-5.413-7.75 14.919 14.919 0 0 0-9.544-2.956 15.581 15.581 0 0 0-9.231 2.744 17.131 17.131 0 0 0-5.9 7.519 29.85 29.85 0 0 0-.044 21.5z" fill="#fff"/></svg>',yahoo:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 177.803"><path d="M0 43.284h38.144l22.211 56.822 22.5-56.822h37.135L64.071 177.803H26.694l15.308-35.645L.001 43.284zm163.235 45.403H121.64L158.558 0 200 .002zm-30.699 8.488c12.762 0 23.108 10.346 23.108 23.106s-10.345 23.106-23.108 23.106a23.11 23.11 0 0 1-23.104-23.106 23.11 23.11 0 0 1 23.104-23.106z"/></svg>',close:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><path d="M2.321 13.529a7.927 7.927 0 0 1 0-11.208 7.927 7.927 0 0 1 11.208 0l86.471 86.471L186.47 2.321a7.927 7.927 0 0 1 11.209 0 7.927 7.927 0 0 1 0 11.208l-86.474 86.469 86.472 86.473a7.927 7.927 0 0 1-11.209 11.208l-86.471-86.471-86.469 86.471a7.927 7.927 0 0 1-11.208-11.208l86.471-86.473z"/></svg>',location:'<svg viewBox="0 0 200 266.42" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="m148.54 230.43c-12.12 13.291-26.234 25.193-42.083 34.82-1.9513 1.431-4.5964 1.6044-6.7645 0.21681-23.416-14.895-43.08-32.782-58.539-52.23-21.334-26.755-34.755-56.414-39.351-84.99-4.6831-28.966-0.30354-56.848 14.114-79.505 5.6805-8.9543 12.944-17.106 21.79-24.153 20.337-16.196 43.557-24.76 66.713-24.586 22.288 0.17345 44.295 8.4773 63.309 25.844 6.6778 6.0707 12.293 13.03 16.89 20.575 15.502 25.54 18.841 58.105 12.033 91.104-6.7212 32.608-23.416 65.737-48.11 92.839zm-48.544-178.91c27.492 0 49.758 22.288 49.758 49.758 0 27.492-22.288 49.758-49.758 49.758-27.492 0-49.758-22.267-49.758-49.758-0.02168-27.492 22.267-49.758 49.758-49.758z" stroke-width="2.1681"/></svg>',warning:'<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><path d="m100 0c27.613 0 52.613 11.195 70.711 29.293 18.094 18.094 29.289 43.098 29.289 70.707 0 27.613-11.195 52.613-29.289 70.711-18.098 18.094-43.098 29.289-70.711 29.289-27.609 0-52.613-11.195-70.707-29.289-18.098-18.098-29.293-43.098-29.293-70.711 0-27.609 11.195-52.613 29.293-70.707 18.094-18.098 43.098-29.293 70.707-29.293zm57.66 42.34c-14.758-14.754-35.145-23.883-57.66-23.883-22.516 0-42.902 9.1289-57.66 23.883-14.754 14.758-23.883 35.145-23.883 57.66 0 22.516 9.1289 42.902 23.883 57.66 14.758 14.754 35.145 23.883 57.66 23.883 22.516 0 42.902-9.1289 57.66-23.883 14.754-14.758 23.883-35.145 23.883-57.66 0-22.516-9.1289-42.902-23.883-57.66z" fill="#f44336" fill-rule="nonzero" stroke-width=".39062"/><g transform="matrix(3.8384 0 0 3.8384 2277.8 -576.85)" style="shape-inside:url(#rect7396);white-space:pre" aria-label="!"><path d="m-563.8 161.59-0.65341 20.185h-5.8381l-0.65341-20.185zm-3.5796 29.503q-1.5199 0-2.6136-1.0795-1.0796-1.0796-1.0796-2.6136 0-1.5057 1.0796-2.571 1.0938-1.0796 2.6136-1.0796 1.4631 0 2.571 1.0796 1.1222 1.0653 1.1222 2.571 0 1.0227-0.52557 1.8608-0.51137 0.83807-1.3494 1.3352-0.82387 0.49715-1.8182 0.49715z"/></g></svg>',checkmark:'<svg version="1.1" viewBox="0 0 87.41 79.72" xmlns="http://www.w3.org/2000/svg"><path d="m2.076 33.666s6.0748-0.59297 17.413 4.2983c9.3883 4.5751 11.891 8.3955 11.891 8.3955 5.38-8.65 11.11-16.6 17.16-23.9 10.412-12.578 24.613-22.448 24.613-22.448l14.257-0.012228s-19.308 19.294-32.483 38.51-22.877 41.21-22.877 41.21-9.3948-18.164-14.53-24.53-10.77-11.59-17.52-16.22z" fill="#45b555"/></svg>',rsvp:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 104.31 122.88"><g><path d="M25.85,63.15c-0.04-0.12-0.08-0.28-0.1-0.42c-0.22-1.89-0.43-3.98-0.62-5.78c-0.26-2.64-0.55-5.69-0.76-7.83 c-0.14-1.45-0.6-2.83-1.27-3.86c-0.45-0.66-0.95-1.15-1.51-1.39c-0.45-0.18-1-0.2-1.57,0.02c-0.78,0.3-1.65,0.93-2.62,2.03 c-0.86,0.98-1.53,2.29-2.09,3.68c-0.79,2.03-1.26,4.19-1.45,5.67c-0.02,0.1-0.02,0.18-0.06,0.26L8.42,86.07 c-0.08,0.4-0.24,0.76-0.48,1.04c-1.81,2.33-2.95,4.33-3.28,5.95c-0.24,1.19,0,2.15,0.79,2.9l19.8,19.8 c1.26,1.21,2.72,1.97,4.47,2.29c1.91,0.36,4.14,0.16,6.7-0.54c0.04,0,0.1-0.02,0.14-0.02c0.97-0.26,2.24-0.57,3.46-0.88 c5.31-1.29,9.94-2.43,14.23-6.33l5.52-5.76c0.05-0.1,0.14-0.18,0.22-0.26s0.62-0.62,1.35-1.31c3.78-3.69,8.45-8.25,5.61-12.24 l-2.21-2.21c-1.07,1.04-2.21,2.05-3.3,3.02c-1,0.88-1.93,1.69-2.78,2.55c-0.91,0.91-2.38,0.91-3.3,0c-0.91-0.92-0.91-2.38,0-3.3 c0.86-0.86,1.91-1.79,3-2.76c3.74-3.3,8.03-7.07,5.73-10.38l-2.19-2.19c-0.12-0.12-0.22-0.26-0.31-0.4c-1.26,1.29-2.64,2.52-4,3.72 c-1,0.88-1.93,1.69-2.78,2.55c-0.91,0.91-2.38,0.91-3.3,0s-0.91-2.38,0-3.3c0.86-0.86,1.91-1.79,3-2.76 c3.74-3.3,8.03-7.07,5.73-10.38l-2.19-2.19c-0.16-0.16-0.28-0.31-0.38-0.5l-6.42,6.42c-0.91,0.91-2.38,0.91-3.3,0s-0.91-2.38,0-3.3 l17.22-17.25c2.88-2.88,3.54-5.88,2.78-8.15c-0.28-0.83-0.74-1.57-1.31-2.14s-1.31-1.03-2.14-1.31c-2.24-0.74-5.23-0.06-8.19,2.9 l-30.2,30.2c-0.91,0.91-2.38,0.91-3.3,0s-0.91-2.38,0-3.3l3.07-3.07L25.85,63.15L25.85,63.15L25.85,63.15z M83.23,24.31 c-1.22,1.3-3.24,1.34-4.52,0.14c-1.3-1.22-1.34-3.24-0.14-4.52l8.82-9.39c1.22-1.3,3.25-1.34,4.52-0.14 c1.3,1.22,1.34,3.24,0.14,4.52L83.23,24.31L83.23,24.31L83.23,24.31L83.23,24.31z M43.96,23.65c1.3,1.22,1.34,3.25,0.14,4.52 c-1.22,1.3-3.25,1.34-4.52,0.14l-9.4-8.82c-1.29-1.23-1.33-3.25-0.14-4.52c1.22-1.3,3.25-1.34,4.52-0.14L43.96,23.65L43.96,23.65 L43.96,23.65z M63.69,15.96c0.05,1.76-1.34,3.24-3.09,3.3s-3.24-1.34-3.3-3.09L56.91,3.3c-0.06-1.75,1.34-3.24,3.09-3.3 c1.76-0.05,3.24,1.34,3.29,3.09L63.69,15.96L63.69,15.96L63.69,15.96z M76.88,63.31c-1.3-1.22-1.34-3.25-0.14-4.52 c1.22-1.3,3.24-1.34,4.52-0.14l9.39,8.82c1.3,1.22,1.34,3.24,0.14,4.52c-1.22,1.3-3.24,1.34-4.52,0.14L76.88,63.31L76.88,63.31 L76.88,63.31z M88.36,44.35c-1.75,0.06-3.24-1.34-3.3-3.09c-0.05-1.75,1.34-3.24,3.09-3.3l12.86-0.43c1.75-0.06,3.24,1.34,3.3,3.09 s-1.34,3.24-3.09,3.3L88.36,44.35L88.36,44.35L88.36,44.35z M60.88,58.97c0.17,0.1,0.34,0.22,0.5,0.38l2.29,2.29 c0.12,0.12,0.24,0.28,0.34,0.42c2.57,3.52,2.17,6.66,0.42,9.52c0.31,0.12,0.62,0.29,0.86,0.54l2.29,2.29 c0.12,0.12,0.24,0.28,0.34,0.42c2.76,3.8,2.07,7.12,0,10.14c0.1,0.05,0.17,0.14,0.28,0.24l2.29,2.29c0.12,0.12,0.24,0.28,0.34,0.42 c5.31,7.26-1.02,13.42-6.1,18.39l-1.31,1.31l-5.67,5.95l-0.18,0.17c-5.19,4.71-10.33,5.97-16.28,7.42c-1,0.24-2,0.5-3.4,0.86 c-0.04,0-0.06,0.02-0.1,0.02c-3.22,0.88-6.14,1.09-8.76,0.62c-2.66-0.48-4.97-1.67-6.9-3.56L2.31,99.29 c-2-1.93-2.69-4.31-2.12-7.14c0.43-2.26,1.75-4.77,3.81-7.47L9.3,54.74v-0.12c0.24-1.71,0.78-4.24,1.71-6.68 c0.71-1.83,1.67-3.62,2.92-5.07c1.51-1.71,3-2.76,4.47-3.32c1.81-0.69,3.54-0.6,5.07,0.06c1.43,0.6,2.64,1.69,3.56,3.08 c1.12,1.67,1.85,3.8,2.05,6.02c0.16,1.83,0.48,4.85,0.78,7.81l0.24,2.47L53,36.07c4.4-4.4,9.16-5.27,12.97-4.02 c1.53,0.5,2.88,1.33,4,2.45s1.95,2.47,2.45,4c1.26,3.8,0.4,8.63-3.92,12.95l-7.59,7.59L60.88,58.97L60.88,58.97L60.88,58.97z"/></g></svg>'};async function WW(e){return e=u_e(e),e.timeZone=YW(e.timeZone),e=d_e(e),e=h_e(e),e=f_e(e),e.sizes=p_e(e.size),e.lightMode=m_e(e.lightMode),e=g_e(e),e=GW(e),e=y_e(e),e=v_e(e),e=x_e(e),e=await w_e(e),e}function u_e(e){for(let t=0;t<l5.length;t++){const n=l5[`${t}`];if(e[`${n}`]){if(typeof e[`${n}`]!="boolean"){const r=e[`${n}`].toString().trim().toLowerCase()||"";e[`${n}`]=r===""||r==="true"}}else e[`${n}`]=!1}return e}function YW(e=null){return!e||e===""?"GMT":e}function d_e(e){if(e.recurrence&&e.recurrence!=="")if(e.recurrence=e.recurrence.replace(/\s+/g,"").toUpperCase(),!/^(RRULE:[\w=;,:+-/\\]+|daily|weekly|monthly|yearly)$/im.test(e.recurrence))e.recurrence="!wrong rrule format!";else if(/^RRULE:/i.test(e.recurrence)){e.recurrence_simplyfied=!1;const t=e.recurrence.substring(6).split(";"),n=new Object;t.forEach(function(r){n[r.split("=")[0]]=r.split("=")[1]}),e.recurrence_until=n.UNTIL?n.UNTIL:"",e.recurrence_count=n.COUNT?n.COUNT:"",e.recurrence_byDay=n.BYDAY?n.BYDAY:"",e.recurrence_byMonth=n.BYMONTH?n.BYMONTH:"",e.recurrence_byMonthDay=n.BYMONTHDAY?n.BYMONTHDAY:"",e.recurrence_interval=n.INTERVAL?n.INTERVAL:1,e.recurrence_frequency=n.FREQ?n.FREQ:""}else e.recurrence_simplyfied=!0,(!e.recurrence_interval||e.recurrence_interval==="")&&(e.recurrence_interval=1),(!e.recurrence_weekstart||e.recurrence_weekstart===""|e.recurrence_weekstart.length>2)&&(e.recurrence_weekstart="MO"),e.recurrence_frequency=e.recurrence,e.recurrence="RRULE:FREQ="+e.recurrence+";WKST="+e.recurrence_weekstart+";INTERVAL="+e.recurrence_interval,e.recurrence_until&&e.recurrence_until!==""&&(e.endTime&&e.endTime!==""?e.recurrence=e.recurrence+";UNTIL="+e.recurrence_until.replace(/-/g,"").slice(0,8)+"T"+e.endTime.replace(":","")+"00":e.recurrence=e.recurrence+";UNTIL="+e.recurrence_until.replace(/-/g,"").slice(0,8)),e.recurrence_count&&e.recurrence_count!==""&&(e.recurrence=e.recurrence+";COUNT="+e.recurrence_count),e.recurrence_byDay&&e.recurrence_byDay!==""&&(e.recurrence=e.recurrence+";BYDAY="+e.recurrence_byDay),e.recurrence_byMonth&&e.recurrence_byMonth!==""&&(e.recurrence=e.recurrence+";BYMONTH="+e.recurrence_byMonth),e.recurrence_byMonthDay&&e.recurrence_byMonthDay!==""&&(e.recurrence=e.recurrence+";BYMONTHDAY="+e.recurrence_byMonthDay);return e}function h_e(e){const t=function(){if(Sl()||e.fakeIOS){if(e.optionsIOS&&e.optionsIOS.length>0)return e.optionsIOS;if(e.optionsMobile&&e.optionsMobile.length>0)return e.optionsMobile}return(r0()||e.fakeMobile||e.fakeAndroid)&&e.optionsMobile&&e.optionsMobile.length>0?e.optionsMobile:e.options||["ical"]}();let n=[],r=!1,l=!1;for(let d=0;d<t.length;d++){const y=t[`${d}`].split("|")[0].toLowerCase().replace("microsoft","ms").replace(/\./,"");y==="apple"&&(l=!0),y==="ical"&&(r=!0),!((Sl()||e.fakeIOS)&&o_e.includes(y)||(r0()||e.fakeAndroid)&&i_e.includes(y)||e.recurrence&&e.recurrence!==""&&(!n_e.includes(y)||e.recurrence_until&&e.recurrence_until!==""&&(y==="apple"||y==="ical")||(Sl()||e.fakeIOS)&&y==="google")||e.subscribe&&r_e.includes(y))&&((ev()||e.fakeMobile)&&e.subscribe&&(y==="ms365"||y==="outlookcom")||n.push(y))}return e.subscribe&&e.icsFile&&e.icsFile.startsWith("https://calendar.google.com/calendar/")&&!e.icsFile.endsWith(".ics")&&(n=["google"]),n.length===0&&(!Sl()&&!e.fakeIOS&&n.push("ical"),r=!0),(Sl()||e.fakeIOS)&&r&&!l&&n.push("apple"),(r0()||e.fakeAndroid)&&l&&!r&&n.push("ical"),e.options=n,e}function f_e(e){return e.inlineRSVP&&(e.inline=!0),(!e.listStyle||e.listStyle==="")&&(e.listStyle="dropdown"),e.listStyle==="modal"&&(e.trigger="click"),e.buttonStyle&&e.buttonStyle!==""&&e.buttonStyle!="default"?(e.buttonStyle=="round"||e.buttonStyle=="text"||e.buttonStyle=="date"||e.buttonStyle=="neumorphism")&&(e.trigger="click"):e.buttonStyle="default",(e.buttonStyle=="default"||e.buttonStyle=="3d"||e.buttonStyle=="flat")&&!e.hideTextLabelList&&e.hideTextLabelButton&&(e.listStyle=="dropdown"||e.listStyle=="dropdown-static"||e.listStyle=="dropup-static")&&(e.listStyle="overlay"),e.buttonsList&&e.buttonStyle=="date"&&(e.buttonsList=!1),e}function p_e(e){const t=[];if(t.l=t.m=t.s=16,e&&e!==""){const n=e.split("|");for(let r=0;r<n.length;r++)n[`${r}`]=parseInt(n[`${r}`]);n[0]>=0&&n[0]<11&&(t.l=t.m=t.s=10+n[0]),n.length>2?(n[1]>=0&&n[1]<11&&(t.m=10+n[1]),n[2]>=0&&n[2]<11&&(t.s=10+n[2])):n.length==2&&n[1]>=0&&n[1]<11&&(t.m=t.s=10+n[1])}return t}function m_e(e=""){return e=="system"&&cf()?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e!="bodyScheme"&&e!="dark"?"light":e}function g_e(e){return(!e.language||e.language===""||!a1e.includes(e.language))&&(e.language="en"),e.language.length>2&&(e.language=e.language.substring(0,2)),i1e.includes(e.language)?e.rtl=!0:e.rtl=!1,e}function GW(e){if(e.dates&&e.dates.length>0)for(let n=0;n<e.dates.length;n++){!e.dates[`${n}`].timeZone&&e.timeZone&&(e.dates[`${n}`].timeZone=e.timeZone),!e.dates[`${n}`].useUserTZ&&e.useUserTZ&&(e.dates[`${n}`].useUserTZ=e.useUserTZ);const r=U8(e.dates[`${n}`]);e.dates[`${n}`].startDate=r.startDate,e.dates[`${n}`].endDate=r.endDate,e.dates[`${n}`].startTime=r.startTime,e.dates[`${n}`].endTime=r.endTime,e.dates[`${n}`].timeZone=r.timeZone,e.dates[`${n}`].timestamp=eM("timestamp",e.dates[`${n}`].startDate,e.dates[`${n}`].startTime,e.dates[`${n}`].timeZone),e.dates[`${n}`].overdue=eM("overdue",e.dates[`${n}`].endDate,e.dates[`${n}`].endTime,e.dates[`${n}`].timeZone)}else{e.dates=[],e.dates[0]=new Object,e.useUserTZ&&(e.dates[0].useUserTZ=e.useUserTZ);const n=U8(e);e.startDate=e.dates[0].startDate=n.startDate,e.endDate=e.dates[0].endDate=n.endDate,e.startTime=e.dates[0].startTime=n.startTime,e.endTime=e.dates[0].endTime=n.endTime,e.timeZone=e.dates[0].timeZone=n.timeZone,e.recurrence?e.dates[0].overdue=!1:e.dates[0].overdue=eM("overdue",e.endDate,e.endTime,e.timeZone)}const t=new Date;return(!e.created||e.created==="")&&(e.created=xl(t,"clean",!0)),(!e.updated||e.updated==="")&&(e.updated=xl(t,"clean",!0)),e}function y_e(e){return(!e.status||e.status==="")&&(e.status="CONFIRMED"),(!e.sequence||e.sequence==="")&&(e.sequence=0),e}function b_e(e,t){const n=l=>l.replace(/(\\r\\n|\\n|\\r|<br(\s*\/?)>)/g,"");let r=e.dates[`${t}`].description||e.description||"";if(r){if(r=n(r),e.customVar)for(const f in e.customVar){const y=f.replace(/[^a-zA-Z0-9\-_.]/g,"");r=r.replace(new RegExp(`%%${y}%%`,"g"),e.customVar[`${f}`])}const l=Sb(r,!0),d=Sb(r,!0,!0);r=Sb(r),e.dates[`${t}`]={...e.dates[`${t}`],description:r,descriptionHtmlFree:l,descriptionHtmlFreeICal:d}}else e.dates[`${t}`].descriptionHtmlFree=e.dates[`${t}`].descriptionHtmlFreeICal=e.dates[`${t}`].description="";return e}function v_e(e){for(let t=0;t<e.dates.length;t++)if(e=b_e(e,t),(!e.dates[`${t}`].name||e.dates[`${t}`].name==="")&&(e.dates[`${t}`].name=e.name),e.dates[`${t}`].status?e.dates[`${t}`].status=e.dates[`${t}`].status.toUpperCase():e.dates[`${t}`].status=e.status.toUpperCase(),e.dates[`${t}`].sequence||(e.dates[`${t}`].sequence=e.sequence),!e.dates[`${t}`].organizer&&e.organizer&&(e.dates[`${t}`].organizer=e.organizer),!e.dates[`${t}`].attendee&&e.attendee&&(e.dates[`${t}`].attendee=e.attendee),!e.dates[`${t}`].availability&&e.availability?e.dates[`${t}`].availability=e.availability.toLowerCase():e.dates[`${t}`].availability&&(e.dates[`${t}`].availability=e.dates[`${t}`].availability.toLowerCase()),!e.dates[`${t}`].location&&e.location&&(e.dates[`${t}`].location=e.location),e.dates[`${t}`].location&&e.dates[`${t}`].location.startsWith("http")?e.dates[`${t}`].onlineEvent=!0:e.dates[`${t}`].onlineEvent=!1,e.dates[`${t}`].uid||(t===0&&e.uid&&e.uid!==""?e.dates[0].uid=e.uid:e.uid&&e.uid!==""?e.dates[`${t}`].uid=e.uid+"-"+(t+1):e.dates[`${t}`].uid=rY()),e.customVar)for(const n in e.customVar){const r=n.replace(/[^a-zA-Z0-9\-_.]/g,"");e.dates[`${t}`].name=e.dates[`${t}`].name.replace(new RegExp(`%%${r}%%`,"g"),e.customVar[`${n}`]),e.dates[`${t}`].location=e.dates[`${t}`].location.replace(new RegExp(`%%${r}%%`,"g"),e.customVar[`${n}`])}return e.recurrence&&e.recurrence!==""&&(e.dates[0].recurrence=e.recurrence),e.dates.length>1&&e.dates.sort((t,n)=>t.timestamp-n.timestamp),e}function U8(e){if((!e.endDate||e.endDate==="")&&(e.endDate=e.startDate),["start","end"].forEach(function(n){if(!/^(\d{4}-\d{2}-\d{2}T?(?:\d{2}:\d{2}|)Z?|today(?:\+\d{1,4}|))$/i.test(e[n+"Date"]))e[n+"Date"]="badly-formed";else{if(e[n+"Date"]=__e(e[n+"Date"]),e[n+"Date"]){e[n+"Date"]=e[n+"Date"].replace(/\.\d{3}/,"").replace("Z","");const r=e[n+"Date"].split("T");r[1]&&(e[n+"Date"]=r[0],e[n+"Time"]=r[1])}if(e[n+"Time"]&&e[n+"Time"].length===8){const r=e[n+"Time"];e[n+"Time"]=r.substring(0,r.length-3)}}}),e.timeZone==="currentBrowser"||e.useUserTZ){const n=Intl.DateTimeFormat().resolvedOptions().timeZone||"GMT";if(e.useUserTZ&&e.startTime&&e.startTime!==""&&e.endTime&&e.endTime!==""){const r=Q8(e.startDate,e.startTime,e.timeZone,n),l=Q8(e.endDate,e.endTime,e.timeZone,n);e.startDate=r[0],e.startTime=r[1],e.endDate=l[0],e.endTime=l[1]}e.timeZone=n}return e}function eM(e,t,n=null,r){try{const l=function(){if(n){const f=bS(r,t,n);return new Date(t+" "+n+":00 GMT"+f)}return new Date(t)}();if(e==="timestamp")return l.getTime();n||l.setDate(l.getDate()+1);const d=new Date().toISOString();return l.getTime()<new Date(d).getTime()}catch{return!1}}function __e(e){const t=new Date,n=t.getUTCFullYear()+"-"+(t.getUTCMonth()+1)+"-"+t.getUTCDate();e=e.replace(/today/gi,n);const r=e.split("+"),l=r[0].split("-");let d=function(){return l[0].length<4?new Date(Date.UTC(l[2],l[0]-1,l[1])):new Date(Date.UTC(l[0],l[1]-1,l[2]))}();r[1]&&r[1]>0&&d.setDate(d.getDate()+parseInt(r[1]));try{return d.toISOString().replace(/T(\d{2}:\d{2}:\d{2}\.\d{3})Z/g,"")}catch{return!1}}function x_e(e){return(!e.pastDateHandling||e.pastDateHandling!="disable"&&e.pastDateHandling!="hide")&&(e.pastDateHandling="none"),e.allOverdue=function(){for(let t=0;t<e.dates.length;t++)if(!e.dates[`${t}`].overdue)return!1;return!0}(),e.allOverdue&&(e.pastDateHandling=="disable"?e.disabled=!0:e.pastDateHandling=="hide"&&(e.hidden=!0)),e.allCancelled=function(){for(let t=0;t<e.dates.length;t++)if(!e.dates[`${t}`].status||e.dates[`${t}`].status.toLowerCase()!=="cancelled")return!1;return!0}(),(e.disabled||e.hidden)&&(e.blockInteraction=!0),e}async function w_e(e){return typeof Y8!="function"||!e.rsvp||Object.keys(e.rsvp).length===0||(e.rsvp.expired=function(){return!!(e.rsvp&&e.rsvp.expires&&new Date(e.rsvp.expires)<new Date)}(),e.rsvp.bookedOut=await Y8(e),(e.rsvp.expired||e.rsvp.bookedOut)&&(e.blockInteraction=!0),e.blockInteraction&&(e.disabled=!0)),e}async function V8(e){if(!e.name||e.name==="")throw new Error("Add to Calendar Button generation failed: required name information missing");if(e.dates!=null&&e.dates.length>0){if(e.subscribe===!0&&e.dates.length>1)throw new Error("Add to Calendar Button generation failed: a subscription calendar cannot be a multi-date setup");const t=["name","startDate"],n=["name"];return t.every(function(r){for(let l=0;l<e.dates.length;l++)if(!n.includes(`${r}`)&&(!e.dates[`${l}`][`${r}`]||e.dates[`${l}`][`${r}`]==="")||n.includes(`${r}`)&&(!e.dates[`${l}`][`${r}`]||e.dates[`${l}`][`${r}`]==="")&&(!e[`${r}`]||e[`${r}`]==="")){if(!e.subscribe||r!=="startDate")throw new Error("Add to Calendar Button generation failed: required setting missing [dates array object #"+(l+1)+"/"+e.dates.length+"] => ["+r+"]");e.dates[`${l}`].startDate="today"}return!0})}else return["startDate"].every(function(n){if(!e[`${n}`]||e[`${n}`]===""){if(!e.subscribe||n!=="startDate")throw new Error("Add to Calendar Button generation failed: required setting missing ["+n+"]");e.startDate="today"}return!0})}async function E_e(e){const t="Add to Calendar Button generation ("+e.identifier+")";try{return await qW(e,t),await T_e(e,t),await S_e(e,t),await C_e(e,t),await k_e(e,t),await A_e(e,t),await M_e(e,t),await B_e(e,t),e.recurrence_simplyfied&&await F_e(e,t),!0}catch(n){throw new Error(n.message)}}async function qW(e,t,n="",r=""){const l=function(){return n!==""&&e.dates[`${n}`].icsFile?e.dates[`${n}`].icsFile:n===""&&e.icsFile?e.icsFile:""}();if(l!==""&&(!sx(l,!1)||!e.icsFile.startsWith("https://")&&!e.icsFile.startsWith("http://")))throw new Error(t+" failed: explicit ics file path not valid"+r);return!0}async function T_e(e,t){if(!["default","3d","flat","round","neumorphism","text","date","custom","none"].includes(e.buttonStyle))throw new Error(t+" failed: provided buttonStyle invalid");if(e.customCss&&e.customCss!==""&&(!sx(e.customCss,!1)||!/\.css($|\?)/.test(e.customCss)))throw new Error(t+" failed: customCss provided, but no valid url");if((!e.customCss||e.customCss==="")&&e.buttonStyle==="custom")throw new Error(t+' failed: buttonStyle "custom" selected, but no customCss file provided');if(e.rsvp&&(e.buttonStyle==="date"||e.buttonStyle==="none"))throw new Error(t+" failed: buttonStyle "+e.buttonStyle+" is not compatible with the RSVP functionality");return!0}async function S_e(e,t){if(e.subscribe===!0&&(!e.icsFile||e.icsFile===""))throw new Error(t+" failed: a subscription calendar requires a valid explicit ics file as well");return!0}async function C_e(e,t){if(!/^\d{8}T\d{6}Z$/.test(e.created))throw new Error(t+" failed: created date format not valid. Needs to be a full ISO-8601 UTC date and time string, formatted YYYYMMDDTHHMMSSZ");return!0}async function k_e(e,t){if(!/^\d{8}T\d{6}Z$/.test(e.updated))throw new Error(t+" failed: updated date format not valid. Needs to be a full ISO-8601 UTC date and time string, formatted YYYYMMDDTHHMMSSZ");return!0}async function A_e(e,t){return e.options.every(r=>{if(!t_e.includes(r))throw new Error(`${t} failed: invalid option [${r}]`);return!0})}async function M_e(e,t){try{for(let n=0;n<e.dates.length;n++){const r=function(){return e.dates.length===1?"":" [dates array object #"+(n+1)+"/"+e.dates.length+"] "}();await qW(e,t,n,r),await D_e(e,t,n,r),await R_e(e,t,n,r),await I_e(e,t,n,r),await P_e(e,t,n,r),await O_e(e,t,n,r),await L_e(e,t,n,r),await N_e(e,t,n,r),await z_e(e,t,n,r)}return!0}catch(n){throw new Error(n.message)}}async function D_e(e,t,n,r){if(!["tentative","confirmed","cancelled"].includes(e.dates[`${n}`].status.toLowerCase()))throw new Error(t+" failed: event status needs to be TENTATIVE, CONFIRMED, or CANCELLED"+r);return!0}async function R_e(e,t,n,r){if(e.dates[`${n}`].availability&&e.dates[`${n}`].availability!==""&&e.dates[`${n}`].availability!=="free"&&e.dates[`${n}`].availability!=="busy")throw new Error(t+' failed: event availability needs to be "free" or "busy"'+r);return!0}async function I_e(e,t,n,r){if(e.dates[`${n}`].organizer&&e.dates[`${n}`].organizer!==""){const l=e.dates[`${n}`].organizer.split("|");if(l.length!==2||l[0].length>50||l[1].length>80||!_S(l[1]))throw new Error(t+' failed: organizer needs to match the schema "NAME|EMAIL" with a valid email address'+r)}return!0}async function P_e(e,t,n,r){if(e.dates[`${n}`].attendee&&e.dates[`${n}`].attendee!==""){if(!e.dates[`${n}`].organizer||e.dates[`${n}`].organizer==="")throw new Error(t+" failed: if an attendee is set, you also need to set the organizer"+r);const l=e.dates[`${n}`].attendee.split("|");if(l.length===1&&_S(l[0]))return!0;if(l.length!==2||l[0].length>50||l[1].length>80||!_S(l[1]))throw new Error(t+' failed: attendee needs to be a valid email address or match the schema "NAME|EMAIL" with EMAIL being a valid email address'+r)}return!0}async function O_e(e,t,n,r){return/^(\w|-){1,254}$/.test(e.dates[`${n}`].uid)||(e.debug&&console.warn(t+": UID not valid. May only contain alpha, digits, and dashes; and be less than 255 characters. Falling back to an automated value!"+r),e.dates[`${n}`].uid=rY()),!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e.dates[`${n}`].uid)&&e.debug&&console.warn(t+": UID is highly recommended to be a hex-encoded random Universally Unique Identifier (UUID)!"+r),!0}async function L_e(e,t,n,r){return e.dates[`${n}`].sequence&&(e.dates[`${n}`].sequence<0||e.dates[`${n}`].sequence%1!==0)&&(e.debug&&console.log(t+": sequence needs to be a full number >= 0. Used the default 0 instead"+r),e.dates[`${n}`].sequence=0),!0}async function N_e(e,t,n,r){if(!Jve().includes(e.dates[`${n}`].timeZone))throw new Error(t+" failed: invalid time zone given"+r);return!0}async function z_e(e,t,n,r){const l=e.dates[`${n}`],d=["startDate","endDate"],f={};if(d.forEach(a=>{const E=l[`${a}`];if(E.length!==10)throw new Error(`${t} failed: date misspelled [-> YYYY-MM-DD]${r}`);const C=E.split("-");if(C.length!==3)throw new Error(`${t} failed: date misspelled [${a}: ${E}]${r}`);f[`${a}`]=new Date(C[0],C[1]-1,C[2])}),["startTime","endTime"].forEach(a=>{const E=l[`${a}`];if(E){if(E.length!==5)throw new Error(`${t} failed: time misspelled [-> HH:MM]${r}`);const C=E.split(":");if(C.length!==2||C[0]>23||C[1]>59)throw new Error(`${t} failed: time misspelled [${a}: ${E}]${r}`);const M=a==="startTime"?"startDate":"endDate";f[`${M}`]=new Date(f[`${M}`].getTime()+parseInt(C[0],10)*36e5+parseInt(C[1],10)*6e4)}}),l.startTime&&!l.endTime||!l.startTime&&l.endTime)throw new Error(`${t} failed: if you set a starting or end time, the respective other one also needs to be defined${r}`);if(f.endDate<f.startDate)throw new Error(`${t} failed: end date before start date${r}`);return!0}async function B_e(e,t){if(e.recurrence&&e.recurrence!==""&&e.dates.length>1)throw new Error(t+" failed: RRULE and multi-date set at the same time");if(e.recurrence&&e.recurrence!==""&&!/^RRULE:[\w=;,:+-/\\]+$/i.test(e.recurrence))throw new Error(t+" failed: RRULE data misspelled");return!0}async function F_e(e,t){if(e.recurrence_interval&&(e.recurrence_interval<1||e.recurrence_interval%1!==0))throw new Error(t+" failed: recurrence data (interval) misspelled");if(e.recurrence_until&&e.recurrence_until!==""&&!/^(\d|-|:)+$/i.test(e.recurrence_until))throw new Error(t+" failed: recurrence data (until) misspelled");if(e.recurrence_count&&(e.recurrence_count<1||e.recurrence_count%1!==0))throw new Error(t+" failed: recurrence data (interval) misspelled");if(e.recurrence_byMonth&&e.recurrence_byMonth!==""&&!/^(\d|,)+$/.test(e.recurrence_byMonth))throw new Error(t+" failed: recurrence data (byMonth) misspelled");if(e.recurrence_byMonthDay&&e.recurrence_byMonthDay!==""&&!/^(\d|,)+$/.test(e.recurrence_byMonthDay))throw new Error(t+" failed: recurrence data (byMonthDay) misspelled");if(e.recurrence_byDay&&e.recurrence_byDay!==""&&!/^(\d|-|MO|TU|WE|TH|FR|SA|SU|,)+$/im.test(e.recurrence_byDay))throw new Error(t+" failed: recurrence data (byDay) misspelled");if(e.recurrence_weekstart&&e.recurrence_weekstart!==""&&!/^(MO|TU|WE|TH|FR|SA|SU)$/im.test(e.recurrence_weekstart))throw new Error(t+" failed: recurrence data (weekstart) misspelled");return!0}function os(e,t,n="",r=null,l=!1,d=!1){t=="open"?H8(e,n,r,l,d):t=="close"||r.classList.contains("atcb-active")||e.querySelector(".atcb-active-modal")?y1(e,l):H8(e,n,r,l,d)}async function H8(e,t,n=null,r=!1,l=!1){if(e.querySelector(".atcb-list")||e.querySelector(".atcb-modal"))return;_a("openList",t.identifier,t.identifier),gi.active=t.identifier;const d=V_e(e,t),f=document.createElement("div");f.classList.add("atcb-list-wrapper"),f.setAttribute("part","atcb-list-wrapper"),t.hideTextLabelList&&f.classList.add("atcb-no-text"),n?(n.classList.add("atcb-active"),n.setAttribute("aria-expanded",!0),t.listStyle==="modal"?(n.classList.add("atcb-modal-style"),d.classList.add("atcb-modal")):(f.append(d),f.classList.add("atcb-dropdown"),t.listStyle==="overlay"&&f.classList.add("atcb-dropoverlay")),l&&d.classList.add("atcb-generated-button")):d.classList.add("atcb-modal");const y=JW(e,t.trigger,t.listStyle==="modal",!t.hideBackground);if(t.listStyle==="modal"){const E=await Hx(e,t);E.querySelector(".atcb-modal-host-initialized").append(y),y.append(d),t.hideBranding||vS(E,!1),lx(d,t.sizes),l4(E),y0(y)}else t.forceOverlay&&(e=await H_e(e,t),n=e.querySelector("button.atcb-button")),e.querySelector(".atcb-initialized").append(f),f.append(d),t.buttonStyle!="default"&&f.classList.add("atcb-style-"+t.buttonStyle),t.hideBranding||vS(e),e.append(y),lx(d,t.sizes),f.style.display="none",setTimeout(function(){f.style.display="block",t.listStyle==="dropdown-static"?tM(e,n,f,!0):t.listStyle==="dropup-static"?tM(e,n,f,!1,!0):tM(e,n,f)},5),y0(y);const a=function(){const E=e.querySelector(".atcb-list-item");if(E)return E;const C=document.getElementById(t.identifier+"-modal-host");if(C)return C.shadowRoot.querySelector(".atcb-list-item")}();a&&(r?a.focus():(a.focus({preventScroll:!0}),a.blur()))}function y1(e,t=!1){const n=document.getElementById(e.host.getAttribute("atcb-button-id")+"-modal-host"),r=function(){return!n||n.length===0?[]:n.shadowRoot.querySelectorAll(".atcb-modal[data-modal-nr]")}();if(r.length>1){n.shadowRoot.querySelectorAll('.atcb-modal[data-modal-nr="'+r.length+'"]')[0].remove();const l=n.shadowRoot.querySelectorAll('.atcb-modal[data-modal-nr="'+(r.length-1)+'"]')[0];l.classList.remove("atcb-hidden");let d=l;const f=l.getElementsByTagName("button");f.length>0&&(d=f[0]),d.focus(),t||d.blur()}else{const l=function(){const f=e.querySelector(".atcb-active, .atcb-active-modal");return f||document.querySelector(".atcb-active, .atcb-active-modal")}();l&&(l.focus({preventScroll:!0}),t||l.blur()),Array.from(e.querySelectorAll(".atcb-active")).forEach(f=>{f.classList.remove("atcb-active"),f.setAttribute("aria-expanded",!1)}),Array.from(e.querySelectorAll(".atcb-active-modal")).forEach(f=>{f.classList.remove("atcb-active-modal")}),Array.from(document.querySelectorAll(".atcb-active")).forEach(f=>{f.classList.remove("atcb-active"),f.setAttribute("aria-expanded",!1)}),Array.from(document.querySelectorAll(".atcb-active-modal")).forEach(f=>{f.classList.remove("atcb-active-modal")}),n&&n.remove(),document.body.classList.remove("atcb-modal-no-scroll"),document.documentElement.classList.remove("atcb-modal-no-scroll"),Array.from(e.querySelectorAll(".atcb-list-wrapper")).concat(Array.from(e.querySelectorAll(".atcb-list"))).concat(Array.from(e.querySelectorAll("#atcb-reference"))).concat(Array.from(e.querySelectorAll("#atcb-bgoverlay"))).forEach(f=>f.remove());const d=document.querySelector(".atcb-shadow-hide");d&&(d.shadowRoot.querySelector(".atcb-initialized").style.opacity="1",d.classList.remove("atcb-shadow-hide"),window.removeEventListener("scroll",xS),window.removeEventListener("resize",xS)),gi.active=""}}async function W8(e,t){let n=e,r=t;e.host||(n=n.shadowRoot,r=await WW(r));const l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5A3.375 3.375 0 006.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0015 2.25h-1.5a2.251 2.251 0 00-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 00-9-9z" /></svg>',d='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0118 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3l1.5 1.5 3-3.75" /></svg>',f='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" /></svg>';/*!
 *  @preserve
 *  PER LICENSE AGREEMENT, YOU ARE NOT ALLOWED TO REMOVE OR CHANGE THIS FUNCTION!
 */if((!r.proKey||r.proKey==="")&&!window.location.hostname.match(/^(localhost|.*\.add-to-calendar-pro.com)$/))return;const y=await Hx(n,r);y0(y.querySelector(".atcb-modal-host-initialized"));const a=r.ty;(a.type==="link"||a.type==="form")&&(!a.url||a.url===""||!a.url.startsWith("http"))&&(a.type="text"),(!a.headline||a.headline==="")&&(a.headline=kn("thankyou",r)+"!");let E='<div class="pro"><p id="ty-success-msg">'+kn("form.success",r)+'</p><div id="ty-content">';a.text&&a.text!==""&&(E+=Sb(a.text)),a.type==="share"&&(E+=`<p class="pro-pt pro-share-buttons">
    <a href="mailto:?subject=${encodeURIComponent(kn("label.share.email.subject",r))}&body=%0A&#10142;%20${encodeURIComponent(a.url)}%0A%0A" target="_blank" rel="noopener" class="atcb-modal-btn atcb-modal-btn-primary atcb-modal-btn-border btn-flex">
      ${f}
      ${kn("label.share.email",r)}
    </a>
    <button id="atcb-ty-share-copy" class="atcb-modal-btn atcb-modal-btn-primary atcb-modal-btn-border btn-flex">
      ${l}
      ${kn("label.share.copy",r)}
    </button>
    </p>`);let C={};if(a.type==="form"){const M=!a.text||a.text===""||a.text===void 0,P=function(){return a.button_label&&a.button_label!==""?a.button_label:kn("submit",r)}();if(E+='<form id="'+r.identifier+'-ty-form" class="pro-form'+(M?" no-intro":"")+'">',a.fields&&a.fields.length>0){const N=a.fields.find($=>$.name==="header"&&$.type==="hidden");if(N&&N.default&&N.default!==""&&N.default.startsWith("{"))try{C=JSON.parse(N.default),Object.keys(C).length===0&&(C.atcb=!0),a.fields=a.fields.filter($=>$.name!=="header")}catch{}const F=ZW(a.fields,r.identifier+"-ty");a.fields=F.fields,E+=F.html}E+='<p id="submit-error"></p>',E+='<p class="pro-pt"><button type="submit" id="pro-form-submit" class="atcb-modal-btn atcb-modal-btn-primary atcb-modal-btn-border">'+P+'</button><span id="pro-form-submitting" class="pro-waiting"><span>.</span><span>.</span><span>.</span></span></p>',E+="</form>"}if(a.type==="link"){const M=function(){return a.button_label&&a.button_label!==""?a.button_label:kn("continue",r)}();E+='<p class="pro-pt"><a href="'+a.url+'" target="_blank" rel="noopener" class="atcb-modal-btn atcb-modal-btn-primary atcb-modal-btn-border">'+M+"</a></p>"}if(E+="</div></div>",await Jp(y,r,"checkmark",a.headline,E),a.type==="share"){const M=y.getElementById("atcb-ty-share-copy");M.addEventListener("click",function(){wS(a.url),M.innerHTML=d+kn("label.share.copied",r)+"!",setTimeout(function(){M.innerHTML=l+kn("label.share.copy",r)},3e3)}),M.addEventListener("keyup",function(P){P.key==="Enter"&&(P.preventDefault(),M.click())})}if(a.type==="form"){const M=y.getElementById(r.identifier+"-ty-form"),P=y.getElementById("submit-error"),N=y.getElementById("pro-form-submit"),F=y.getElementById("pro-form-submitting");N.addEventListener("click",async function($){$.preventDefault(),F.style.display="block",N.style.display="none";let Z=KW(y,a.fields);if(Z||(P.textContent=kn("form.error.required",r)+"."),Z){const q=[];let K=!1;if(a.fields.forEach(te=>{te.type!=="label"&&(te.type==="radio"?K||(y.querySelectorAll('[name="'+te.name+'"]').forEach(function(ue){ue.checked&&q.push({name:te.name,value:ue.value})}),K=!0):te.type==="checkbox"?(q.push({name:te.name,value:y.getElementById(te.fieldId).checked}),K=!1):(q.push({name:te.name,value:y.getElementById(te.fieldId).value}),K=!1))}),await XW(a.url,q,C)===!0){y.getElementById("ty-success-msg").style.display="block",y.getElementById("ty-content").style.display="none";return}P.textContent=kn("form.error.sending",r)+"."}M.classList.add("form-error"),F.style.display="none",N.style.display="block"}),N.addEventListener("keyup",function($){$.key==="Enter"&&($.preventDefault(),N.click())})}}async function Mh(e,t,n,r=!1){/*!
 *  @preserve
 *  PER LICENSE AGREEMENT, YOU ARE NOT ALLOWED TO REMOVE OR CHANGE THIS FUNCTION!
 */const l=t.rsvp,d=!l.text||l.text===""||l.text===void 0,f=!l.headline||l.headline===""||l.headline===void 0;let y="",a='<div class="pro">';const E=localStorage.getItem(t.proKey+"-rsvp-sent")||!1;E&&(a+='<div id="rsvp-sent-content">',a+="<p>"+kn("form.success.already",t)+"</p>",t.hideButton||(a+='<div id="rsvp-atcb"></div>'),t.inlineRsvp&&(a+='<button id="pro-form-restart" '+(t.disabled&&"disabled")+' class="atcb-modal-btn atcb-modal-btn btn-small atcb-modal-btn-border">'+kn("label.rsvp.restart",t)+"</button>"),a+="</div>"),a+='<div id="rsvp-success-msg"><p>'+kn("form.success.sent",t)+'</p><p id="rsvp-success-msg-email">'+kn("form.success.email",t)+'</p><p id="rsvp-success-msg-doi">'+kn("form.success.doi",t)+"</p></div>",a+='<div id="rsvp-success-msg-demo">'+kn("form.success.demo",t)+"</div>",a+='<div id="rsvp-content" '+(E?'style="display:none;"':"")+">",l.text&&l.text!==""&&(a+=Sb(l.text)),a+='<form id="'+t.identifier+'-rsvp-form" class="pro-form'+(d?" no-intro":"")+(f?" no-headline":"")+'">';const C=t.proKey||"demo-rsvp";l.initial_confirmation===!1?(a+='<div id="rsvp-status-group">',a+="<p>"+kn("form.status",t)+"</p>",a+='<div class="pro-field pro-field-type-radio"><div><input type="radio" name="'+C+'-status" id="'+t.identifier+'-rsvp-status-confirmed" aria-label="'+kn("form.status.confirmed",t)+'" checked value="confirmed" '+(t.disabled&&"disabled")+' /><label for="'+t.identifier+'-rsvp-status-confirmed" class="status-confirmed"><span>'+kn("form.status.confirmed",t)+"</span></label></div>",l.maybe_option===!0&&(a+='<div><input type="radio" name="'+C+'-status" id="'+t.identifier+'-rsvp-status-undecided" aria-label="'+kn("form.status.undecided",t)+'" value="undecided" '+(t.disabled&&"disabled")+' /><label for="'+t.identifier+'-rsvp-status-undecided" class="status-undecided"><span>'+kn("form.status.undecided",t)+"</span></label></div>"),a+='<div><input type="radio" name="'+C+'-status" id="'+t.identifier+'-rsvp-status-declined" aria-label="'+kn("form.status.declined",t)+'" value="declined" '+(t.disabled&&"disabled")+' /><label for="'+t.identifier+'-rsvp-status-declined" class="status-declined"><span>'+kn("form.status.declined",t)+"</span></label></div></div>",a+="</div>"):y+='<input type="hidden" name="'+C+'-status" id="'+t.identifier+'-rsvp-status-confirmed" value="confirmed" />';const M=l.maxpp||1;M===1?y+='<input type="hidden" name="'+C+'-amount" id="'+t.identifier+'-rsvp-amount" value="1" />':(a+='<div class="pro-field"><label for="'+t.identifier+'-rsvp-amount">'+kn("form.amount",t)+" ("+kn("form.max",t)+" "+M+")<span>*</span></label>",a+='<input type="number" name="'+C+'-amount" min="1" max="'+M+'" id="'+t.identifier+'-rsvp-amount" '+(t.disabled&&"disabled")+' aria-label="'+kn("form.amount",t)+'" value="1" /></div>');const P=function(){if(t.attendee&&t.attendee!==""){const ue=t.attendee.split("|");return ue.length>1?ue[1]:ue[0]}return""}();if(P!==""?y+='<input type="hidden" name="'+C+'-email" id="'+t.identifier+'-rsvp-email" value="'+P+'" />':(a+='<div class="pro-field"><label for="'+t.identifier+'-rsvp-email">'+kn("form.email",t)+"<span>*</span></label>",a+='<input type="email" name="'+C+'-email" id="'+t.identifier+'-rsvp-email" '+(t.disabled&&"disabled")+' aria-label="'+kn("form.email",t)+'" value="" /></div>'),l.fields&&l.fields.length>0){const ue=ZW(l.fields,t.identifier+"-rsvp",t.disabled);l.fields=ue.fields,a+=ue.html}a+=y,a+='<p id="submit-error"></p>',a+='<p class="pro-pt"><button type="submit" id="pro-form-submit" '+(t.disabled&&"disabled")+' class="atcb-modal-btn atcb-modal-btn-primary atcb-modal-btn-border">'+kn("submit",t)+'</button><span id="pro-form-submitting" class="pro-waiting"><span>.</span><span>.</span><span>.</span></span></p>',a+="</form>",a+="</div></div>";let N=null;if(!t.inlineRsvp)N=await Hx(e,t),y0(N.querySelector(".atcb-modal-host-initialized")),await Jp(N,t,void 0,l.headline,a,[{type:"none",label:kn("label.rsvp.restart",t),small:!0,primary:!0,id:"pro-form-restart"},{type:"close",label:kn("close",t),small:!0,id:"modal-btn-close"},{type:"close",label:kn("cancel",t),small:!0,id:"modal-btn-cancel"}],[],r,{},!1);else{N=e;const ue=document.createElement("div");if(ue.classList.add("atcb-modal-box","rsvp-inline-wrapper"),ue.setAttribute("part","atcb-modal-box"),t.rtl&&ue.classList.add("atcb-rtl"),n.append(ue),l.headline){const me=document.createElement("div");me.classList.add("atcb-modal-headline"),ue.append(me),me.innerHTML=l.headline}const re=document.createElement("div");if(re.classList.add("atcb-modal-content"),ue.append(re),!t.hideBranding){const me=vS(N,!1,!0);ue.append(me)}if(l.expired){re.innerHTML='<div class="pro"><p>'+kn("label.rsvp.expired",t)+"</p></div>";return}else if(l.bookedOut){re.innerHTML='<div class="pro"><p>'+kn("label.rsvp.bookedout",t)+"</p></div>";return}else re.innerHTML=a}const F=N.getElementById("modal-btn-close"),$=N.getElementById("modal-btn-cancel"),Z=N.getElementById("pro-form-restart");if(_a("openRSVP",t.identifier,t.identifier),t.debug&&console.log('RSVP form for "'+t.identifier+'" created'),E){$&&($.style.display="none");const ue=N.getElementById("rsvp-atcb");if(ue&&!t.hideButton){const re=JSON.parse(JSON.stringify(t));re.hideTextLabelButton=!0,re.hideIconButton=!1,re.buttonsList=!0,QW(e,ue,re)}}else F&&(F.style.display="none"),Z&&(Z.style.display="none");const q=N.getElementById(t.identifier+"-rsvp-form"),K=N.getElementById("submit-error"),Q=N.getElementById("pro-form-submit"),te=N.getElementById("pro-form-submitting"),ie=N.getElementById("pro-form-restart");Q&&(Q.addEventListener("click",async function(ue){ue.preventDefault(),te.style.display="block",Q.style.display="none";const re=[{type:"email",name:t.proKey+"-email",fieldId:t.identifier+"-rsvp-email",required:!0},{type:"number",name:t.proKey+"-amount",fieldId:t.identifier+"-rsvp-amount",required:!0}];let me=KW(N,[...re,...l.fields]);const ve=N.getElementById(t.identifier+"-rsvp-amount"),De=parseInt(ve.value)||1;if(l.maxpp&&l.maxpp>0&&De>l.maxpp&&(ve.classList.add("error"),me=!1),me||(K.textContent=kn("form.error.required",t)+"."),me){if(!t.proKey||t.proKey===""){N.getElementById("rsvp-success-msg-demo").style.display="block",N.getElementById("rsvp-content").style.display="none",_a("successRSVP",t.identifier,t.identifier),$&&($.style.display="none"),F&&(F.style.display="block");return}const je=[];je.push({name:"prokey",value:t.proKey}),je.push({name:"language",value:t.language});const Be=N.querySelector('[name="'+t.proKey+'-status"]:checked');je.push({name:"status",value:Be?Be.value:"confirmed"}),je.push({name:"amount",value:De}),je.push({name:"email",value:N.getElementById(t.identifier+"-rsvp-email").value}),t.dev&&je.push({name:"dev",value:!0});const Ue={};let Ge=!1;l.fields.forEach(ot=>{ot.type!=="label"&&(ot.type==="radio"?Ge||(N.querySelectorAll('[name="'+ot.name+'"]').forEach(function(Re){Re.checked&&(Ue[ot.name]=Re.value)}),Ge=!0):ot.type==="checkbox"?(Ue[ot.name]=N.getElementById(ot.fieldId).checked,Ge=!1):(Ue[ot.name]=N.getElementById(ot.fieldId).value,Ge=!1))}),Object.keys(Ue).length>0&&je.push({name:"payload",value:Ue});const ze=await XW("https://api.add-to-calendar-pro.com/24586219-9910-41fe-9b59-df53de9db7af",je,{rsvp:!0});if(ze==="doi"||ze===!0){N.getElementById("rsvp-success-msg").style.display="block",ze==="doi"?N.getElementById("rsvp-success-msg-doi").style.display="block":N.getElementById("rsvp-success-msg-email").style.display="block",N.getElementById("rsvp-content").style.display="none",$&&($.style.display="none"),F&&(F.style.display="block"),_a("successRSVP",t.identifier,t.identifier),localStorage.setItem(t.proKey+"-rsvp-sent",!0);return}ze.error&&ze.error===2?K.textContent=kn("form.error.email",t)+".":ze.error&&ze.error===5?K.textContent=kn("label.rsvp.expired",t)+".":ze.error&&ze.error===6?De>1?K.textContent=kn("form.error.bookedoutmany",t)+".":K.textContent=kn("label.rsvp.bookedout",t)+".":K.textContent=kn("form.error.sending",t)+"."}q.classList.add("form-error"),te.style.display="none",Q.style.display="block"}),Q.addEventListener("keyup",function(ue){ue.key==="Enter"&&(ue.preventDefault(),Q.click())})),ie&&(ie.addEventListener("click",function(ue){ue.preventDefault(),N.getElementById("rsvp-sent-content").style.display="none",N.getElementById("rsvp-content").style.display="block",F&&(F.style.display="none"),Z&&(Z.style.display="none"),$&&($.style.display="block")}),ie.addEventListener("keyup",function(ue){ue.key==="Enter"&&(ue.preventDefault(),ie.click())}))}async function j_e(e,t){const n=e.querySelector(".atcb-initialized"),r=document.createElement("div");r.classList.add("atcb-button-wrapper"),t.rtl&&r.classList.add("atcb-rtl"),n.append(r),lx(r,t.sizes);const l=document.createElement("button");l.classList.add("atcb-button","atcb-click","atcb-single"),t.disabled&&l.setAttribute("disabled",!0),t.hideTextLabelButton&&l.classList.add("atcb-no-text"),l.type="button",l.setAttribute("aria-expanded",!1),r.append(l);const d=function(){return t.rsvp.expired?kn("label.rsvp.expired",t):t.rsvp.bookedOut?kn("label.rsvp.bookedout",t):kn("label.rsvp",t)}();return ix(e,t,l,"rsvp",!t.hideIconButton,d,!0),t.debug&&console.log('Add to Calendar RSVP Button "'+t.identifier+'" created'),!0}async function Y8(e){if(e.rsvp&&e.rsvp.max&&e.proKey&&e.proKey!=="")try{const t=await fetch("https://api.add-to-calendar-pro.com/dffb8bbd-ee5e-4a4f-a7ea-503af98ca468?prokey="+e.proKey+(e.dev?"&dev=true":""),{method:"GET"});if(!t.ok)throw new Error("Network response was not ok");const n=await t.json();if(parseInt(n.total)>=e.rsvp.max)return!0}catch(t){console.error("Error:",t)}return!1}function ZW(e,t="",n=!1){/*!
 *  @preserve
 *  PER LICENSE AGREEMENT, YOU ARE NOT ALLOWED TO REMOVE OR CHANGE THIS FUNCTION!
 */let r="",l="",d=0,f="",y=!1;for(let a=1;a<=e.length;a++){y=!1;const E=e[a-1];if(E.type!=="label"&&(!E.name||E.name==="")){y=!0;continue}(f==="radio"&&E.type!=="radio"||f!=="radio")&&(d=a),e[a-1].fieldId=t+"-"+a;const C=E.type==="radio"?E.placeholder||"":E.default||"",M=E.label||"",P=E.type==="radio"?"":E.placeholder||"";let N="";f!=="hidden"&&a===d&&a!==1&&!y&&(N+="</div>"),E.type!=="hidden"&&a===d&&(N+='<div class="pro-field pro-field-type-'+E.type+'">'),E.type==="label"?N+="<p>"+M+"</p>":(E.type==="radio"&&(N+="<div>"),E.type==="hidden"?l+='<input type="hidden" name="'+E.name+'" id="'+E.fieldId+'" value="'+C+'" />':N+=$_e(E.type,E.name,M,E.fieldId,E.required,C,E.default,P,n),E.type==="radio"&&(N+="</div>")),r+=N,f=E.type}return f!=="hidden"&&(r+="</div>"),r+=l,{html:r,fields:e}}function $_e(e,t,n,r,l=!1,d,f=null,y="",a=!1){let E="";return(e==="text"||e==="number")&&(n!==""||l)&&(E+='<label for="'+r+'">'+n+(l?"<span>*</span>":"")+"</label>"),E+='<input type="'+e+'"'+(e==="number"?' min="0"':"")+((e==="checkbox"||e==="radio")&&f&&(f==="true"||f===!0)?" checked":"")+' name="'+t+'" id="'+r+'" placeholder="'+y+'" '+(a&&"disabled")+' aria-label="'+n+'" value="'+d+'" />',(e==="checkbox"||e==="radio")&&(n!==""||l)&&(E+='<label for="'+r+'">'+n+(l?"<span>*</span>":"")+"</label>"),E}function KW(e,t){/*!
 *  @preserve
 *  PER LICENSE AGREEMENT, YOU ARE NOT ALLOWED TO REMOVE OR CHANGE THIS FUNCTION!
 */let n=!0;return t.forEach(function(r){if(r.type!=="label"&&r.type!=="radio"){const l=e.getElementById(r.fieldId);if(r.type!=="checkbox"){if(l.value=ax(l.value.trim()),r.type==="number"&&(l.value=l.value.replace(/\D/g,"")),r.type==="email"&&l.value!==""&&!_S(l.value)){l.classList.add("error"),n=!1;return}if(r.required&&l.value===""){l.classList.add("error"),n=!1;return}else l.classList.remove("error")}else if(r.required&&l.checked===!1){l.classList.add("error"),n=!1;return}else l.classList.remove("error")}if(r.type==="radio"){const l=e.querySelectorAll('[name="'+r.name+'"]');let d=!1;if(l.forEach(function(f){f.checked&&(d=!0)}),d===!1){l[0].classList.add("error"),n=!1;return}else l[0].classList.remove("error")}}),n}async function XW(e,t,n={}){/*!
 *  @preserve
 *  PER LICENSE AGREEMENT, YOU ARE NOT ALLOWED TO REMOVE OR CHANGE THIS FUNCTION!
 */let r=new FormData,l={},d={};Object.keys(n).length===0?(t.forEach(f=>{r.append(f.name,f.value)}),d={method:"POST",body:r}):(n["Cache-Control"]="no-cache",n["Content-Type"]="application/json",n.Accept="*/*",t.forEach(f=>{l[f.name]=f.value}),d={method:"POST",headers:n,body:JSON.stringify(l)});try{const f=await fetch(e,d),y=await f.json();return f.ok?y.status&&y.status==="doi"?"doi":!0:(console.error("Network response was not ok"),y.error?y:!1)}catch(f){return console.error("Error:",f),!1}}function ix(e,t,n,r,l=!1,d="",f=!1){switch(r){case"trigger":case"rsvp":default:n.id=t.identifier,t.blockInteraction||(n.addEventListener("keyup",function(y){(y.key==="Enter"||y.code=="Space"||y.key==="Alt"&&y.key==="Control"&&y.code==="Space")&&(y.preventDefault(),r==="rsvp"&&typeof Mh=="function"?Mh(e,t,n,!0):os(e,"auto",t,n,!0,!0))}),n.addEventListener("touchend",Kg(y=>{y.preventDefault(),r==="rsvp"&&typeof Mh=="function"?Mh(e,t,n):os(e,"auto",t,n,!1,!0)})),t.trigger==="click"||r==="rsvp"&&typeof Mh=="function"?n.addEventListener("mouseup",Kg(y=>{y.preventDefault(),r==="rsvp"&&typeof Mh=="function"?Mh(e,t,n):os(e,"auto",t,n,!1,!0)})):n.addEventListener("mouseenter",function(){os(e,"open",t,n,!1,!0)}));break;case"apple":case"google":case"ical":case"msteams":case"ms365":case"outlookcom":case"yahoo":n.id=t.identifier+"-"+r,t.blockInteraction||(n.addEventListener("click",Kg(()=>{f?(e.querySelector("#"+n.id)?.blur(),_a("openSingletonLink",n.id,t.identifier)):(os(e,"close"),_a("openCalendarLink",n.id,t.identifier)),Tb(e,r,t)})),n.addEventListener("keyup",function(y){y.key==="Enter"&&(y.preventDefault(),f?(e.querySelector("#"+n.id)?.blur(),_a("openSingletonLink",n.id,t.identifier)):(os(e,"close"),_a("openCalendarLink",n.id,t.identifier)),Tb(e,r,t,"all",!0))}));break;case"close":n.id=t.identifier+"-close",n.addEventListener("click",ab(()=>{_a("closeList","List Close Button",gi.active),os(e,"close")})),n.addEventListener("keyup",function(y){y.key==="Enter"&&(y.preventDefault(),_a("closeList","List Close Button",gi.active),os(e,"close",t,"all",!0))});break}U_e(t,n,r,l,d,f)}function U_e(e,t,n,r,l,d){const f=function(){if(e.pastDateHandling!="none"){let y=!0;for(let a=0;a<e.dates.length;a++)if(!e.dates[`${a}`].overdue){y=!1;break}if(y)return kn("expired",e)}return kn("label.addtocalendar",e)}();if(l===""&&(e.options.length===1||n==="trigger"?l=f:n==="close"?l=kn("close",e):l=kn(n,e)),!(e.buttonStyle==="date"&&(n==="trigger"||d))){if(t.setAttribute("aria-label",d?kn("label.addtocalendar",e)+" ("+kn(n,e)+"): "+e.name:n==="trigger"?l+": "+e.name:l),r){const y=document.createElement("div");y.classList.add("atcb-icon"),y.setAttribute("part",n==="trigger"?"atcb-button-icon":"atcb-list-icon"),y.classList.add(`atcb-icon-${n}`),y.innerHTML=Eb[`${n}`],t.append(y)}if((n==="trigger"||d)&&!e.hideTextLabelButton||!d&&n!=="trigger"&&!e.hideTextLabelList){const y=document.createElement("span");y.classList.add("atcb-text"),y.setAttribute("part",n==="trigger"?"atcb-button-text":"atcb-list-text"),y.textContent=l,t.append(y)}}}function QW(e,t,n){const r=function(){return!!(n.options.length===1||n.buttonsList&&n.buttonStyle!="date")}();(r?n.options:["default"]).forEach(function(d,f){const y=document.createElement("div");y.classList.add("atcb-button-wrapper"),y.setAttribute("part","atcb-button-wrapper"),n.rtl&&y.classList.add("atcb-rtl"),t.append(y),lx(y,n.sizes);const a=document.createElement("button");if(a.classList.add("atcb-button"),a.setAttribute("part","atcb-button"),n.disabled&&a.setAttribute("disabled",!0),n.hideTextLabelButton&&a.classList.add("atcb-no-text"),n.trigger==="click"&&a.classList.add("atcb-click"),n.listStyle==="overlay"&&a.classList.add("atcb-dropoverlay"),a.type="button",a.setAttribute("aria-expanded",!1),y.append(a),n.buttonStyle==="date"&&eY(n,a,"all",r),r){a.classList.add("atcb-single");const E=function(){return n.buttonsList&&n.options.length>1?kn(`${n.options[`${f}`]}`,n):n.label}();ix(e,n,a,d,!n.hideIconButton,E,!0),a.id=n.identifier,n.buttonsList&&(a.id=n.identifier+"-"+d)}else{ix(e,n,a,"trigger",!n.hideIconButton,n.label);const E=document.createElement("div");E.classList.add("atcb-dropdown-anchor"),a.append(E)}if(!n.hideCheckmark&&!n.hideTextLabelButton&&!n.buttonsList&&!n.disabled&&!n.allCancelled){const E=document.createElement("div");E.classList.add("atcb-checkmark"),E.innerHTML=Eb.checkmark,a.append(E)}}),n.debug&&console.log('Add to Calendar Button "'+n.identifier+'" created')}function V_e(e,t){const n=document.createElement("div");n.classList.add("atcb-list"),n.setAttribute("part","atcb-list"),n.role="list",t.rtl&&n.classList.add("atcb-rtl");let r=0;if(t.options.forEach(function(l){const d=document.createElement("div");d.classList.add("atcb-list-item"),d.setAttribute("part","atcb-list-item"),d.role="link",d.tabIndex=0,r++,d.dataset.optionNumber=r,n.append(d),ix(e,t,d,l,!t.hideIconList)}),t.listStyle==="modal"){const l=document.createElement("div");l.classList.add("atcb-list-item","atcb-list-item-close"),l.setAttribute("part","atcb-list-item-close"),l.role="button",l.tabIndex=0,r++,l.dataset.optionNumber=r,n.append(l),ix(e,t,l,"close",!t.hideIconList)}return n}function JW(e,t="",n=!1,r=!0,l=!0){const d=function(){return n?document.createElement("dialog"):document.createElement("div")}();if(n&&d.setAttribute("open",!0),d.id="atcb-bgoverlay",r||d.classList.add("atcb-no-bg"),d.role="button",d.tabIndex=0,l){d.addEventListener("mouseup",Kg(y=>{y.target===y.currentTarget&&(_a("closeList","Background Hit",gi.active),os(e,"close"))}));let f=!1;d.addEventListener("touchstart",Kg(()=>f=!1),{passive:!0}),d.addEventListener("touchmove",Kg(()=>f=!0),{passive:!0}),d.addEventListener("touchend",ab(y=>{f!==!1||y.target!==y.currentTarget||(_a("closeList","Background Hit",gi.active),os(e,"close"))}),{passive:!0}),t!=="click"?d.addEventListener("mousemove",Kg(y=>{y.target===y.currentTarget&&(_a("closeList","Background Hit",gi.active),os(e,"close"))})):d.classList.add("atcb-click")}return d}function vS(e,t=!0,n=!1){const r=document.createElement("div");if(r.id="atcb-reference",setTimeout(()=>{const l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52.916 2.8305"><path d="M51.446 1.2565c.0708-.2518.293-.4511.5555-.4783.2211-.042.4641.0128.622.18.2474.2472.3045.6146.2916.9503v.8594h-.8307l-.0027-1.0447c-.0079-.1547-.1075-.343-.2868-.3238-.2049.0128-.3115.2421-.295.4257v.9428h-.823l-.0027-1.0435c-.0076-.1569-.1131-.3412-.2918-.3252-.2069.008-.311.2351-.2939.4188v.9499h-.8307V.8237h.8307v.4019c.0906-.2264.2876-.4188.5368-.449.2878-.0533.6071.0705.7509.3331.0279.0465.0509.0959.0699.1468zm-3.9843.5228c-.0102.1874.107.3914.3024.424.1869.0419.3799-.0941.4215-.2776.0535-.1967-.0023-.4493-.2015-.5411-.1767-.0892-.4107.0032-.483.1865-.0297.0649-.0391.1374-.0392.2082zm-.7691 0c.0037-.2984.1395-.5957.3792-.7774.3035-.2327.7168-.2798 1.0829-.2005.3299.0729.6352.3018.7481.6275.1337.3797.0441.8526-.2795 1.1099-.3184.2561-.7624.3092-1.152.2184-.3379-.0788-.6426-.3312-.7369-.6717a1.092 1.092 0 0 1-.0417-.3063zm-.2351-.3308c-.1638-.0482-.3406-.0889-.5104-.0492s-.2742.2154-.2664.3837c-.0082.1705.0998.3468.2712.3876.1657.0389.3389.0016.4979-.0492l.0769.5499c-.2369.1272-.5165.1434-.7791.1149-.3236-.0401-.6353-.2311-.7805-.529-.1237-.2511-.139-.5539-.0485-.8181.108-.3075.3782-.5432.6902-.6287.2064-.058.4286-.0585.6371-.0119.1027.0253.198.0732.2884.1269l-.0769.523zm-2.6877.9806c-.003-.1221.066-.2371.1643-.3062.1303-.0934.3092-.1186.4572-.0533.132.054.2426.1752.2607.3197s-.0575.2836-.1746.3603c-.1633.1093-.3947.1063-.5517-.0135-.0951-.0715-.1577-.187-.1559-.307zm-3.046-1.0111c-.0091-.4276.1794-.8577.5181-1.1231.3714-.2958.8865-.3488 1.3384-.2477.4065.0946.7695.3811.9242.7731.2302.553.1173 1.2562-.3406 1.6606-.4021.3563-.9997.4264-1.5018.273-.4407-.1312-.7876-.5106-.8926-.9564a1.565 1.565 0 0 1-.0458-.3795zm1.4499.6961c.2631.014.4813-.2093.5326-.4557.0785-.3033.0224-.6834-.2491-.8753-.2182-.159-.5514-.1019-.704.1211-.1692.2437-.1902.5756-.088.8501.0775.2087.2816.3661.5085.3597zm-1.631.6458c-.1978.0602-.4078.0938-.6123.0464-.2697-.0443-.5044-.2371-.6009-.4927-.0701-.1852-.1026-.3819-.154-.5728h-.1846v1.0268h-.8614V.0601l1.3192.0034c.3398.0217.7177.1323.9118.434.152.2456.127.584-.0389.8163-.0979.1284-.2387.2162-.3846.2807.0316.1513.0475.3167.1461.4418.1193.1187.3064.1031.4596.0812v.6422zm-.871-1.8651c.0103-.138-.1243-.231-.25-.2384-.1427-.0193-.2871-.0088-.4307-.0115v.5422c.1905-.0038.3947.0138.5678-.0796a.234.234 0 0 0 .1128-.2126zM35.573.0603l1.1424.0047c.3439.0209.7218.1098.9446.3944.2252.2934.2163.7545-.0512 1.0195-.279.2859-.698.3701-1.0838.362-.0329.0105-.1126-.0258-.102.0281v.8987h-.8499V.0603zm1.0192 1.2345c.1672.0054.3805-.0562.4233-.2409.0425-.1434-.0225-.3102-.1619-.3724-.1328-.0705-.2859-.0537-.4306-.0559v.6615c.0561.0073.1128.0073.1692.0077zm-2.5176.2226h1.0576v.4653h-1.0576zM32.3311.8234h.8307v.4019q.0942-.2384.25-.348.1577-.1115.3615-.1115l.1154.6442q-.375 0-.5519.0808-.175.0788-.175.2538v1.023h-.8307zm-1.2257 1.5791c-.0937.2116-.2986.3716-.5319.3897-.3887.0533-.7844-.1743-.9578-.5217-.2044-.381-.1519-.892.1543-1.2049.2461-.2614.6627-.389.9973-.2285.1574.0799.2779.2236.3381.3886V.7662h.8268v2.0017h-.8268v-.3653zm0-.6345c-.0052-.2449-.2747-.4425-.5088-.3585-.217.0615-.3402.3271-.243.5316.0896.2161.3875.3078.5783.1678.1106-.0747.179-.2073.1735-.3408zM27.7118.7662c.2401-.008.4923.1021.6064.3222.0351.0816.045.0806.0397.0023V.1721l.8307-.1231v2.7189h-.8307v-.3653c-.0907.2158-.3003.3744-.5356.39-.3605.0507-.7279-.1432-.9123-.4525-.2569-.3983-.1992-.9693.1456-1.2985.173-.1702.412-.2772.6563-.2754zm.6461 1.0018c-.0048-.2526-.2909-.4519-.5276-.3518-.2324.0782-.3309.3933-.1843.5898.1239.1938.425.2285.5871.0636.0811-.0768.1287-.1897.1248-.3015zM24.139.8233h.7922v.4019c.1006-.2169.2949-.397.5347-.4408.2696-.0572.58.0085.76.2293.2045.2403.2438.5692.2358.8734v.8802h-.8268l-.0022-1.1213c-.004-.1252-.0677-.2748-.2066-.2939-.2045-.0306-.3739.1457-.4412.3226-.0292.0785-.0098.1646-.0154.2467v.8459h-.8306V.8233zm-1.0416 1.4236c.2011-.0002.3981-.0574.5807-.1384l.0961.5288c-.3198.1421-.6806.1894-1.027.145-.3369-.0473-.6587-.2545-.8007-.5699-.1588-.3469-.1132-.7886.1413-1.0788.2741-.3191.7406-.4335 1.1413-.3308.2768.0734.5008.3019.5751.5779.0429.146.0624.3015.043.453l-1.1806.1538c.0368.134.158.2311.2944.2482.0449.0082.0907.0114.1363.0114zm.1461-.7557c-.0268-.1234-.1257-.237-.2578-.244-.143-.0241-.2868.0725-.325.2111-.0103.0527-.0737.2029.0271.1552l.5558-.1223zm-1.4939 1.1721c-.2463.1208-.5356.1686-.805.1092-.227-.0527-.3993-.2481-.4518-.4712-.0545-.2125-.0296-.4333-.0353-.6502V.1714l.8307-.1231.0011 1.9292c.002.1378.1537.1938.2711.1813.0651.0169.1819-.1.162.0152l.0274.4893zm-2.5115-.2609c-.0937.2116-.2986.3716-.5319.3897-.3887.0533-.7844-.1743-.9578-.5217-.2044-.381-.1519-.892.1543-1.2049.2461-.2614.6627-.389.9973-.2285.1574.0799.2779.2236.3381.3886V.7661h.8268v2.0017h-.8268v-.3653zm0-.6345c-.0052-.2449-.2747-.4425-.5088-.3585-.217.0615-.3402.3271-.243.5316.0896.2161.3875.3078.5783.1678.1106-.0747.179-.2073.1735-.3408zm-2.3726.35c.1696.0054.3334-.0479.4884-.1115l.1077.6249c-.5137.3026-1.2229.2625-1.6732-.1399-.2959-.2444-.4693-.6191-.4819-1.0009-.0323-.4791.181-.9792.5853-1.2496.4565-.3128 1.0898-.3142 1.5659-.0438l-.1038.6115c-.2721-.1029-.5957-.168-.8667-.0274-.2291.1239-.3077.4039-.2984.6481-.0043.2465.1061.5161.3427.6212.1037.0495.2198.0676.3339.0676zm-2.923-.6005h1.0576v.4653h-1.0576zm-1.7829.2619c-.0102.1874.107.3914.3024.424.1869.0419.3799-.0941.4215-.2776.0535-.1967-.0023-.4493-.2015-.5411-.1767-.0892-.4107.0032-.4831.1865-.0297.0649-.0391.1374-.0392.2082zm-.7691 0c.0037-.2984.1395-.5957.3792-.7774.3035-.2327.7168-.2798 1.0829-.2005.33.0729.6352.3018.7481.6275.1337.3797.0441.8526-.2795 1.1099-.3184.2561-.7624.3092-1.152.2184-.3379-.0788-.6426-.3312-.7369-.6717a1.092 1.092 0 0 1-.0417-.3063zm-.1976.8841c-.2463.1208-.5356.1686-.805.1092-.227-.0527-.3993-.2481-.4518-.4712-.0557-.2169-.0286-.4422-.0334-.6635l.0019-.3551h-.25V.7943h.3115l.3653-.7461h.4v.7461h.4538v.4884h-.4538l.0011.6943c.0034.1365.1541.1943.2715.1818.0768.006.1848-.0959.1624.0301l.0265.4744zm-2.7861-1.146h1.0575v.4653H8.4068zM6.5412.7662c.2401-.008.4923.1021.6064.3223.0351.0816.045.0806.0397.0023V.172l.8307-.1231v2.7189h-.8307v-.3653c-.0907.2158-.3003.3744-.5356.39-.3605.0507-.7279-.1432-.9123-.4525-.2569-.3983-.1992-.9693.1456-1.2985.173-.1702.412-.2772.6563-.2754zm.6461 1.0018c-.0048-.2526-.2909-.4519-.5276-.3518-.2324.0782-.3308.3933-.1843.5898.1239.1938.425.2285.5871.0636.0811-.0768.1287-.1897.1248-.3015zM3.7956.7662c.2401-.008.4923.1021.6064.3222.0351.0816.045.0806.0397.0023V.172l.8307-.1231v2.7189h-.8307v-.3653c-.0907.2158-.3003.3744-.5356.39-.3605.0507-.7279-.1432-.9123-.4525-.2569-.3983-.1992-.9693.1456-1.2985.173-.1702.4119-.2772.6563-.2754zm.6461 1.0018c-.0048-.2526-.2909-.4519-.5276-.3518-.2324.0782-.3308.3933-.1843.5898.1239.1938.425.2285.5871.0636.0811-.0768.1287-.1897.1248-.3015zM.7498.0603h1.196l.7845 2.7074h-.9268l-.1038-.5192H.9997l-.1115.5192h-.8883zm.8576 1.7037L1.3497.5795 1.0843 1.764z"/></svg>';r.innerHTML='<a href="https://add-to-calendar-pro.com" target="_blank" rel="noopener">'+l+"</a>"},500),t)e.querySelector(".atcb-initialized .atcb-list-wrapper").append(r);else{if(n)return r;(window.innerHeight>1e3||window.innerWidth>1e3)&&(e.append(r),r.classList.add("fixed-ref"))}}async function Jp(e,t,n="",r,l="",d=[],f=[],y=!1,a={},E=!0){gi.active=t.identifier;const C=!r||r===""||r===void 0,M=await Hx(e,t,!1),P=function(){const K=M.getElementById("atcb-bgoverlay");if(!K){const Q=JW(e,"click",!0,!t.hideBackground,E);return M.querySelector(".atcb-modal-host-initialized").append(Q),Q}return K}(),N=document.createElement("div");N.classList.add("atcb-modal"),P.append(N);const F=M.querySelectorAll(".atcb-modal").length;N.dataset.modalNr=F,N.tabIndex=0,N.focus({preventScroll:!0}),N.blur();const $=function(){const K=e.getElementById(t.identifier);return K||document.getElementById(t.identifier)}();$&&$.classList.add("atcb-active-modal");const Z=document.createElement("div");if(Z.classList.add("atcb-modal-box"),Z.setAttribute("part","atcb-modal-box"),t.rtl&&Z.classList.add("atcb-rtl"),N.append(Z),lx(Z,t.sizes),y0(P),n!==""&&!t.hideIconModal){const K=document.createElement("div");K.classList.add("atcb-modal-icon"),K.innerHTML=Eb[`${n}`],Z.append(K)}if(!C){const K=document.createElement("div");K.classList.add("atcb-modal-headline"),K.textContent=r,Z.append(K)}if(l!==""){const K=document.createElement("div");K.classList.add("atcb-modal-content"),C&&K.classList.add("no-headline"),K.innerHTML=l,Z.append(K)}if(t.hideBranding||vS(M,!1),f.length>1){const K=document.createElement("div");K.classList.add("atcb-modal-content"),Z.append(K);const Q=document.createElement("div");Q.classList.add("atcb-modal-content-subevents"),K.append(Q);for(let te=1;te<f.length;te++){const ie=document.createElement("button");ie.type="button",ie.id=t.identifier+"-"+f[0]+"-"+te,gi[`${t.identifier}`][`${f[0]}`][te-1]>0&&ie.classList.add("atcb-saved"),ie.classList.add("atcb-subevent-btn"),Q.append(ie),eY(t,ie,te),!t.dates[te-1].overdue||t.pastDateHandling==="none"?(te===1&&y&&ie.focus(),ie.addEventListener("click",ab(()=>{_a("openSubEventLink",ie.id,t.identifier),ie.blur(),Tb(e,f[0],t,f[`${te}`],y,!0)}))):ie.setAttribute("disabled",!0)}}d.length===0&&d.push({type:"close",label:kn("close",t),small:!0});const q=document.createElement("div");q.classList.add("atcb-modal-buttons"),Z.append(q),d.forEach((K,Q)=>{let te;switch(K.href&&K.href!==""?(te=document.createElement("a"),te.setAttribute("target",s4),te.setAttribute("href",K.href),te.setAttribute("rel","noopener")):(te=document.createElement("button"),te.type="button"),K.id&&K.id!==""&&(te.id=K.id),te.classList.add("atcb-modal-btn"),K.primary&&te.classList.add("atcb-modal-btn-primary"),K.small&&te.classList.add("btn-small"),(!K.label||K.label==="")&&(K.label=kn("modal.button.default",t)),te.textContent=K.label,q.append(te),Q===0&&f.length<2&&y&&te.focus(),K.type){default:case"close":te.addEventListener("click",ab(()=>{_a("closeList","Modal Close Button",gi.active),y1(e)})),te.addEventListener("keyup",function(ie){(ie.key==="Enter"||ie.code=="Space"||ie.key==="Alt"&&ie.key==="Control"&&ie.code==="Space")&&(_a("closeList","Modal Close Button",gi.active),os(e,"close","","",!0))});break;case"yahoo2nd":te.addEventListener("click",ab(()=>{y1(e),G8(e,t)})),te.addEventListener("keyup",function(ie){(ie.key==="Enter"||ie.code=="Space"||ie.key==="Alt"&&ie.key==="Control"&&ie.code==="Space")&&(os(e,"close","","",!0),G8(e,t,y))});break;case"2timeslink":te.addEventListener("click",ab(()=>{y1(e),Tb(e,a.type,t,a.id,y,!1,!0)})),te.addEventListener("keyup",function(ie){(ie.key==="Enter"||ie.code=="Space"||ie.key==="Alt"&&ie.key==="Control"&&ie.code==="Space")&&(os(e,"close","","",!0),Tb(e,a.type,t,a.id,y,!1,!0))});break;case"none":break}}),F>1&&M.querySelector('.atcb-modal[data-modal-nr="'+(F-1)+'"]').classList.add("atcb-hidden"),l4(M,N)}function G8(e,t,n){xk(e,t),Tb(e,"yahoo2nd",t,"all",n)}function eY(e,t,n="all",r=!1){n!="all"?n=parseInt(n)-1:e.dates.length==1&&(n=0);const l=r1e(e.dates,e.language,n),d=function(){return n!=="all"&&e.dates[`${n}`].status.toLowerCase()==="cancelled"||n==="all"&&e.allCancelled?kn("date.status.cancelled",e)+"<br>"+kn("date.status.cancelled.cta",e):e.pastDateHandling!="none"&&(n==="all"&&e.allOverdue||n!="all"&&e.dates[`${n}`].overdue)?kn("expired",e):e.label&&e.label!=""?e.label:"+ "+kn("label.addtocalendar",e)}(),f=function(){return n!=="all"&&e.dates[`${n}`].status.toLowerCase()==="cancelled"||n==="all"&&e.allCancelled?kn("date.status.cancelled",e):""}(),y=function(){return l.length==0?kn("recurring",e)+" &#x27F3;":"&#x27F3;"}();let a=!1;n==="all"&&(n=0,a=!0);const E=new Date(_u(e.dates[`${n}`]).start),C=_u(e.dates[`${n}`]).allday,M=e.dates[`${n}`].timeZone,P=document.createElement("div");P.classList.add("atcb-date-btn-left"),t.append(P);const N=document.createElement("div");N.classList.add("atcb-date-btn-day"),P.append(N);const F=document.createElement("div");F.classList.add("atcb-date-btn-month"),N.textContent=function(){return C?E.toLocaleString(e.language,{day:"numeric"}):E.toLocaleString(e.language,{day:"numeric",timeZone:M})}(),F.textContent=function(){return C?E.toLocaleString(e.language,{month:"short"}):E.toLocaleString(e.language,{month:"short",timeZone:M})}(),P.append(F);const $=document.createElement("div");$.classList.add("atcb-date-btn-right"),t.append($);const Z=document.createElement("div");Z.classList.add("atcb-date-btn-details"),$.append(Z);const q=document.createElement("div");q.classList.add("atcb-date-btn-headline");const K=e.dates.length>1&&a?e.name:e.dates[`${n}`].name;if(q.textContent=K,Z.append(q),e.dates[`${n}`].location&&e.dates[`${n}`].location!==""&&!e.dates[`${n}`].onlineEvent||f!==""){const ie=document.createElement("div");if(ie.classList.add("atcb-date-btn-content"),Z.append(ie),f!="")ie.classList.add("atcb-date-btn-cancelled"),ie.textContent=f;else{const ue=document.createElement("span");ue.classList.add("atcb-date-btn-content-icon"),ue.innerHTML=Eb.location,ie.append(ue);const re=document.createElement("span");re.classList.add("atcb-date-btn-content-location"),re.textContent=e.dates[`${n}`].location,ie.append(re)}}else if(e.dates[`${n}`].description!==""&&l.length===0&&(!e.recurrence||e.recurrence==="")){const ie=document.createElement("div");ie.classList.add("atcb-date-btn-content"),ie.textContent=e.dates[`${n}`].descriptionHtmlFree,ie.style.cssText="overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;",Z.append(ie)}else q.style.cssText="-webkit-line-clamp: 2;",l.length==0&&(e.recurrence==null||e.recurrence=="")&&($.style.alignSelf="center",q.style.cssText="text-align: center; -webkit-line-clamp: 2;");if(l.length>0||e.recurrence!=null&&e.recurrence!=""){const ie=document.createElement("div");ie.classList.add("atcb-date-btn-content"),Z.append(ie);const ue=document.createElement("span");ue.classList.add("atcb-date-btn-content-icon"),ue.innerHTML=Eb.ical,ie.append(ue);const re=document.createElement("span");if(re.classList.add("atcb-date-btn-content-text"),ie.append(re),l.forEach(function(me){const ve=document.createElement("span");ve.textContent=me,re.append(ve)}),e.recurrence!=null&&e.recurrence!=""){const me=document.createElement("span");me.innerHTML=y,re.append(me)}}const Q=document.createElement("div");if(Q.classList.add("atcb-date-btn-hover"),Q.innerHTML=d,$.append(Q),!e.hideCheckmark&&e.dates[`${n}`].status.toLowerCase()!=="cancelled"){const ie=document.createElement("div");ie.classList.add("atcb-checkmark"),ie.innerHTML=Eb.checkmark,t.append(ie)}const te=d.replace(/<br>/g," ").replace(/\+\s/g,"")+(r?" ("+kn(e.options[0],e)+")":"")+": "+K+(e.dates[`${n}`].location&&e.dates[`${n}`].location!==""?", "+e.dates[`${n}`].location:"")+", "+l.join(" ");t.setAttribute("aria-label",te)}async function Hx(e,t,n=!0){const r=document.getElementById(t.identifier+"-modal-host");if(r){if(!n)return r.shadowRoot;r.remove()}let l=document.createElement("div");l.id=t.identifier+"-modal-host",e.host.hasAttribute("cspnonce")&&l.setAttribute("cspnonce",e.host.getAttribute("cspnonce")),l.setAttribute("atcb-button-id",t.identifier),l.setAttribute("style","transform:translate3D(0, 0, 0);visibility:visible;opacity:1;position:fixed;top:0;left:0;width:100%;height:100%;display:flex;z-index:13999998;"),document.body.append(l),l.attachShadow({mode:"open",delegateFocus:!0});const d=document.createElement("template");return d.innerHTML='<div class="atcb-modal-host-initialized" style="transform:translate3D(0, 0, 0);visibility:visible;opacity:1;position:fixed;top:0;left:0;width:100%;height:100%;display:flex;z-index:13999999;"></div>',l.shadowRoot.append(d.content.cloneNode(!0)),c4(l.shadowRoot,t),await sY(l.shadowRoot,null,t),l.shadowRoot}async function H_e(e,t){const n=await Hx(e,t);return y0(n.querySelector(".atcb-modal-host-initialized")),Array.from(e.children).forEach(l=>{l.tagName!="STYLE"&&n.querySelector(".atcb-modal-host-initialized").append(l.cloneNode(!0))}),n.querySelector("button.atcb-button").removeAttribute("id"),e.host.classList.add("atcb-shadow-hide"),e.querySelector(".atcb-initialized").style.opacity="0",nY(e,n),window.addEventListener("scroll",xS),window.addEventListener("resize",xS),n.querySelector(".atcb-modal-host-initialized")}function W_e(e,t){const n=document.createElement("script");if(n.id="atcb-schema-"+e.identifier,t.hasAttribute("cspnonce")){if(/[`'"()[\]{}<>\s]/.test(t.getAttribute("cspnonce")))throw new Error("cspnonce input contains forbidden characters.");n.setAttribute("nonce",t.getAttribute("cspnonce"))}n.type="application/ld+json";const r=e.name.replace(/\s/g,""),l=[];if(e.dates.length>1){const f=[];f.push('"@context":"https://schema.org"'),f.push('"@type":"EventSeries"'),f.push('"@id":"'+r+'"'),f.push('"name":"'+e.name+'",'),l.push(`{\r
`+f.join(`,\r
`)+`\r
`)}const d=[];for(let f=0;f<e.dates.length;f++){const y=[];y.push('"@context":"https://schema.org"'),y.push('"@type":"Event"'),e.dates.length>1&&y.push('"@id":"'+r+"-"+(f+1)+'"'),e.dates[`${f}`].status.toLowerCase()==="cancelled"?y.push('"eventStatus":"https://schema.org/EventCancelled"'):y.push('"eventStatus":"https://schema.org/EventScheduled"'),y.push('"name":"'+e.dates[`${f}`].name+'"'),e.dates[`${f}`].descriptionHtmlFree&&y.push('"description":"'+e.dates[`${f}`].descriptionHtmlFree+'"');const a=_u(e.dates[`${f}`],"delimiters","general",!0);if(y.push('"startDate":"'+a.start+'"'),a.duration&&y.push('"duration":"'+a.duration+'"'),y.push(e.dates[`${f}`].onlineEvent?`"eventAttendanceMode":"https://schema.org/OnlineEventAttendanceMode",\r
"location": {\r
"@type":"VirtualLocation",\r
"url":"`+e.dates[`${f}`].location+`"\r
}`:'"location":"'+e.dates[`${f}`].location+'"'),e.recurrence&&e.recurrence!==""?y.push(...Y_e(e,a)):y.push('"endDate":"'+a.end+'"'),e.dates[`${f}`].organizer&&e.dates[`${f}`].organizer!==""){const C=e.dates[`${f}`].organizer.split("|");y.push(`"organizer":{\r
"@type":"Person",\r
"name":"`+C[0]+`",\r
"email":"`+C[1]+`"\r
}`)}const E=[];if(e.images&&Array.isArray(e.images))for(let C=0;C<e.images.length;C++)sx(e.images[`${C}`],e.debug)&&e.images[`${C}`].startsWith("http")&&E.push('"'+e.images[`${C}`]+'"');E.length>0&&y.push(`"image":[\r
`+E.join(`,\r
`)+"]"),d.push(`{\r
`+y.join(`,\r
`)+`\r
}`)}e.dates.length>1?n.textContent=l.join(`,\r
`)+`"subEvents":[\r
`+d.join(`,\r
`)+`\r
]\r
}`:n.textContent=d[0],document.body.insertBefore(n,document.body.firstChild)}function Y_e(e,t){const n=[];if(n.push('"eventSchedule": { "@type": "Schedule"'),n.push('"scheduleTimezone":"'+e.dates[0].timeZone+'"'),e.recurrence_interval&&e.recurrence_interval!==""&&e.recurrence_frequency&&e.recurrence_frequency!==""){const r="P"+e.recurrence_interval+e.recurrence_frequency.substring(0,1);n.push('"repeatFrequency":"'+r+'"')}if(e.recurrence_byDay&&e.recurrence_byDay!==""){const r=function(){if(/\d/.test(e.recurrence_byDay))return'"'+e.recurrence_byDay+'"';{const l=e.recurrence_byDay.split(","),d={MO:"https://schema.org/Monday",TU:"https://schema.org/Tuesday",WE:"https://schema.org/Wednesday",TH:"https://schema.org/Thursday",FR:"https://schema.org/Friday",SA:"https://schema.org/Saturday",SU:"https://schema.org/Sunday"},f=[];for(let y=0;y<l.length;y++)f.push('"'+d[l[`${y}`]]+'"');return"["+f.join(",")+"]"}}();n.push('"byDay":'+r)}if(e.recurrence_byMonth&&e.recurrence_byMonth!==""){const r=e.recurrence_byMonth.includes(",")?"["+e.recurrence_byMonth+"]":e.recurrence_byMonth;n.push('"byMonth":"'+r+'"')}if(e.recurrence_byMonthDay&&e.recurrence_byMonthDay!==""){const r=e.recurrence_byMonthDay.includes(",")?"["+e.recurrence_byMonthDay+"]":e.recurrence_byMonthDay;n.push('"byMonthDay":"'+r+'"')}return e.recurrence_count&&e.recurrence_count!==""&&n.push('"repeatCount":"'+e.recurrence_count+'"'),e.recurrence_until&&e.recurrence_until!==""&&n.push('"endDate":"'+e.recurrence_until+'"'),e.startTime&&e.startTime!==""&&e.endTime&&e.endTime!==""&&(n.push('"startTime":"'+e.startTime+':00"'),n.push('"endTime":"'+e.endTime+':00"'),n.push('"duration":"'+t.duration+'"')),n.push('"startDate":"'+e.startDate+'" }'),n}function Tb(e,t,n,r="all",l=!1,d=!1,f=!1){let y=t;if(t==="apple"&&(y="ical"),r!=="all"?r=parseInt(r)-1:n.dates.length==1&&(r=0),n.subscribe){q_e(e,y,n,l);return}if(r!=="all"){if(n.dates[`${r}`].status.toLowerCase()==="cancelled"&&y!=="ical")Jp(e,n,"warning",kn("date.status.cancelled",n),kn("date.status.cancelled.cta",n),[],[],l);else{switch(y){case"ical":tY(e,n,r,l);break;case"google":K_e(n,n.dates[`${r}`],r);break;case"msteams":Q_e(n,n.dates[`${r}`],r);break;case"ms365":K8(n,n.dates[`${r}`],r);break;case"outlookcom":K8(n,n.dates[`${r}`],r,"outlookcom");break;case"yahoo":X_e(n,n.dates[`${r}`],r);break}const a=document.getElementById(n.identifier+"-modal-host");if(a){const C=a.shadowRoot.getElementById(n.identifier+"-"+t+"-"+(r+1));C&&C.classList.add("atcb-saved")}n.dates[`${r}`].status.toLowerCase()!=="cancelled"&&gi[`${n.identifier}`][`${t}`][`${r}`]++,gi[`${n.identifier}`][`${t}`].filter(function(C){return C<1}).length==0&&xk(e,n,d)}return}G_e(e,t,y,n,l,d)}function G_e(e,t,n,r,l,d){if(n==="ical"&&r.dates.every(function(f){return!(f.status.toLowerCase()=="cancelled"||f.organizer!=null&&f.organizer!="")})){tY(e,r,"all",l);for(let f=0;f<gi[`${r.identifier}`][`${t}`].length;f++)gi[`${r.identifier}`][`${t}`][`${f}`]++;xk(e,r,d);return}if(!d){const f=[t];for(let y=0;y<r.dates.length;y++)f.push(y+1);Jp(e,r,t,kn("modal.multidate.h",r),kn("modal.multidate.text",r),[],f,l)}}function q_e(e,t,n,r){const l=n.icsFile.replace("https://","webcal://");switch(t){case"ical":if(r0()||n.fakeAndroid){q8(n,n.icsFile);break}q8(n,l);break;case"google":Z_e(n,l);break;case"ms365":Z8(n,l,n.name);break;case"outlookcom":Z8(n,l,n.name,"outlookcom");break;case"yahoo":if(n.proxy){vu(n,"yahoo","",!0);return}wS(n.icsFile),Jp(e,n,"yahoo",kn("modal.subscribe.yahoo.h",n),kn("modal.clipboard.text",n)+"<br>"+kn("modal.subscribe.yahoo.text",n),[{label:kn("modal.subscribe.yahoo.button",n),primary:!0,type:"yahoo2nd",href:"https://www.yahoo.com/calendar"},{label:kn("cancel",n)}],[],r);return;case"yahoo2nd":wS(n.icsFile),Jp(e,n,"yahoo",kn("modal.subscribe.yahoo.h",n),kn("modal.clipboard.text",n)+"<br>"+kn("modal.subscribe.yahoo.text",n),[{label:kn("modal.subscribe.yahoo.button",n),type:"none",href:"https://www.yahoo.com/calendar"},{label:kn("cancel",n)}],[],r);return}xk(e,n)}function xk(e,t,n=!1){const r=e.getElementById(t.identifier);r&&r.classList.add("atcb-saved"),t1e(e,t),n&&e.querySelectorAll(".atcb-modal[data-modal-nr]").length<2&&os(e,"close")}function q8(e,t){vu(e,"ical",t,!0)}function Z_e(e,t){const n="https://calendar.google.com/calendar/r?cid=",r="calendar.google.com/calendar?cid=",l=/^(https?:\/\/|webcal:\/\/|\/\/)calendar\.google\.com\//,d=function(){return l.test(t)?t.replace(/^(.)*\?cid=/,""):encodeURIComponent(t)}();if(r0()||e.fakeAndroid){vu(e,"google","intent://"+r+d+"#Intent;scheme=https;package=com.google.android.calendar;end",!0);return}if((Sl()&&a4()||e.fakeIOS)&&l.test(t)){vu(e,"google","googlecalendar://"+r+d,!0);return}vu(e,"google",n+d,!0)}function Z8(e,t,n,r="ms365"){const l=[],d=function(){return r=="outlookcom"?"https://outlook.live.com/calendar/0/addfromweb/?":"https://outlook.office.com/calendar/0/addfromweb/?"}();l.push("url="+encodeURIComponent(t)),l.push("name="+encodeURIComponent(n)),vu(e,r,d+l.join("&"),!0)}function K_e(e,t,n="all"){const r=[];r.push("https://calendar.google.com/calendar/render?action=TEMPLATE");const l=_u(t,"clean","google");r.push("dates="+encodeURIComponent(l.start)+"%2F"+encodeURIComponent(l.end)),t.timeZone&&t.timeZone!==""&&!/(GMT[+|-]\d{1,2}|Etc\/U|Etc\/Zulu|CET|CST6CDT|EET|EST|EST5EDT|MET|MST|MST7MDT|PST8PDT|WET)/i.test(t.timeZone)&&!l.allday&&r.push("ctz="+t.timeZone),t.name&&t.name!==""&&r.push("text="+encodeURIComponent(t.name));const d=[];if(t.description&&t.description!==""&&d.push(t.description),t.location&&t.location!==""&&(r.push("location="+encodeURIComponent(t.location)),(Sl()||e.fakeIOS)&&(d.length>0&&d.push("<br><br>"),d.push("&#128205;: "+t.location))),d.length>0&&r.push("details="+encodeURIComponent(d.join(""))),t.recurrence&&t.recurrence!==""&&r.push("recur="+encodeURIComponent(t.recurrence)),t.availability&&t.availability!==""){const f=function(){return t.availability=="free"?"crm=AVAILABLE&trp=false":"crm=BUSY&trp=true"}();r.push(f)}vu(e,"google",r.join("&"),!1,n)}function X_e(e,t,n="all"){const r=[];r.push("https://calendar.yahoo.com/?v=60");const l=_u(t,"clean");r.push("st="+encodeURIComponent(l.start)+"&et="+encodeURIComponent(l.end)),l.allday&&r.push("dur=allday"),t.name&&t.name!==""&&r.push("title="+encodeURIComponent(t.name)),t.location&&t.location!==""&&r.push("in_loc="+encodeURIComponent(t.location)),t.descriptionHtmlFree&&t.descriptionHtmlFree!==""&&r.push("desc="+encodeURIComponent(t.descriptionHtmlFree)),vu(e,"yahoo",r.join("&"),!1,n)}function K8(e,t,n="all",r="ms365"){const l=[],d=function(){return ev()||e.fakeMobile?"/calendar/0/deeplink/compose?path=%2Fcalendar%2Faction%2Fcompose&rru=addevent":"/calendar/action/compose?rru=addevent"}(),f=function(){return r=="outlookcom"?"https://outlook.live.com"+d:"https://outlook.office.com"+d}();l.push(f);const y=_u(t,"delimiters","microsoft");l.push("startdt="+y.start),l.push("enddt="+y.end),y.allday&&l.push("allday=true"),t.name&&t.name!==""&&l.push("subject="+encodeURIComponent(t.name.replace(/&/g,"&#xFF06;"))),t.location&&t.location!==""&&l.push("location="+encodeURIComponent(t.location)),t.description&&t.description!==""&&l.push("body="+encodeURIComponent(t.description)),vu(e,r,l.join("&"),!1,n)}function Q_e(e,t,n="all"){const r=[],l="https://teams.microsoft.com/l/meeting/new?",d=_u(t,"delimiters","msteams",!0);!d.allday||ev()||e.fakeMobile?(r.push("startTime="+encodeURIComponent(d.start)),r.push("endTime="+encodeURIComponent(d.end))):(r.push("startTime="+d.start),r.push("endTime="+d.end)),t.name&&t.name!==""&&r.push("subject="+encodeURIComponent(t.name));let f="";t.location&&t.location!==""&&(f=t.location,f+=" // ",r.push("location="+encodeURIComponent(f))),t.descriptionHtmlFree&&t.descriptionHtmlFree!=""&&r.push("content="+f+encodeURIComponent(t.descriptionHtmlFree)),vu(e,"msteams",l+r.join("&"),!1,n)}function vu(e,t,n,r=!1,l=null,d=""){if(d===""&&(d=s4),sx(n)){if(e.proxy&&e.proKey&&e.proKey!==""){const y=r?"s":"o",a=function(){const E=[];return e.attendee&&e.attendee!==""&&E.push("attendee="+encodeURIComponent(e.attendee)),e.customVar&&typeof e.customVar=="object"&&Object.keys(e.customVar).length>0&&E.push("customvar="+encodeURIComponent(JSON.stringify(e.customVar))),e.dates&&e.dates.length>1&&l!==null&&l!=="all"&&E.push("sub-event="+l),E.length>0?"?"+E.join("&"):""}();if(n=(e.dev?"https://dev.caldn.net/":"https://caldn.net/")+e.proKey+"/"+y+"/"+t+a,!sx(n))return}const f=window.open(n,d);f&&f.focus()}}function tY(e,t,n="all",r=!1){n!=="all"&&(n=parseInt(n));const l=J_e(t,n),d=function(){const P=e.host.getAttribute("attendee")||"",N=e.host.getAttribute("customVar")||"";return t.attendee&&t.attendee!==""&&P!==""||t.customVar&&t.customVar!==""&&N!==""?"":n!=="all"&&t.dates[`${n}`].icsFile&&t.dates[`${n}`].icsFile!==""?t.dates[`${n}`].icsFile:t.icsFile&&t.icsFile!==""?t.icsFile:""}();if(t.proxy){vu(t,"ical","https://add-to-calendar-pro.com",!1,n);return}if(d!==""&&(!Sl()||!a5()||t.bypassWebViewCheck)){X8(d,l);return}const f=new Date,y=["BEGIN:VCALENDAR","VERSION:2.0"];y.push("PRODID:-// https://add-to-calendar-pro.com // button v"+VW+" //EN"),y.push("CALSCALE:GREGORIAN"),n=="all"?y.push("METHOD:PUBLISH"):t.dates[`${n}`].status&&t.dates[`${n}`].status.toLowerCase()==="cancelled"?y.push("METHOD:CANCEL"):t.dates[`${n}`].organizer&&t.dates[`${n}`].organizer!=""?y.push("METHOD:REQUEST"):y.push("METHOD:PUBLISH");const a=[],E=function(){return n!="all"?n:0}(),C=function(){return n!="all"?n:t.dates.length-1}();for(let P=E;P<=C;P++){const N=_u(t.dates[`${P}`],"clean","ical"),F=function(){if(N.allday)return";VALUE=DATE";if(t.dates[`${P}`].timeZone&&t.dates[`${P}`].timeZone!==""){const $=Qve(t.dates[`${P}`].timeZone);return a.includes(t.dates[`${P}`].timeZone)||y.push($[0]),a.push(t.dates[`${P}`].timeZone),";"+$[1]}}();if(y.push("BEGIN:VEVENT"),t.dates[`${P}`].uid&&t.dates[`${P}`].uid!==""&&y.push("UID:"+t.dates[`${P}`].uid),y.push("DTSTAMP:"+xl(f,"clean",!0)),y.push("DTSTART"+F+":"+N.start),y.push("DTEND"+F+":"+N.end),y.push("SUMMARY:"+$y(t.dates[`${P}`].name,!0)),t.dates[`${P}`].descriptionHtmlFreeICal&&t.dates[`${P}`].descriptionHtmlFreeICal!==""&&y.push("DESCRIPTION:"+$y(t.dates[`${P}`].descriptionHtmlFreeICal,!0)),t.dates[`${P}`].description&&t.dates[`${P}`].description!==""&&y.push(`X-ALT-DESC;FMTTYPE=text/html:\r
 <!DOCTYPE HTML PUBLIC ""-//W3C//DTD HTML 3.2//EN"">\r
 <HTML><BODY>\r
 `+$y(t.dates[`${P}`].description,!0)+`\r
 </BODY></HTML>`),t.dates[`${P}`].location&&t.dates[`${P}`].location!==""&&y.push("LOCATION:"+$y(t.dates[`${P}`].location,!0)),t.dates[`${P}`].organizer&&t.dates[`${P}`].organizer!==""){const $=t.dates[`${P}`].organizer.split("|");y.push("ORGANIZER;CN="+$y($[0],!1,!0)+":MAILTO:"+$[1])}if(t.dates[`${P}`].attendee&&t.dates[`${P}`].attendee!==""){const $=t.dates[`${P}`].attendee.split("|");$.length===2?y.push("ATTENDEE;CUTYPE=INDIVIDUAL;ROLE=REQ-PARTICIPANT;PARTSTAT=ACCEPTED;CN="+$y($[0],!1,!0)+";X-NUM-GUESTS=0:mailto:"+$[1]):y.push("ATTENDEE;CUTYPE=INDIVIDUAL;ROLE=REQ-PARTICIPANT;PARTSTAT=ACCEPTED;CN="+$[0]+";X-NUM-GUESTS=0:mailto:"+$[0])}if(t.recurrence&&t.recurrence!==""&&y.push(t.recurrence),t.dates[`${P}`].availability&&t.dates[`${P}`].availability!==""){const $=function(){return t.dates[`${P}`].availability=="free"?"TRANSPARENT":"OPAQUE"}();y.push("TRANSP:"+$)}y.push("SEQUENCE:"+t.dates[`${P}`].sequence),y.push("STATUS:"+t.dates[`${P}`].status),y.push("CREATED:"+t.created),y.push("LAST-MODIFIED:"+t.updated),y.push("END:VEVENT")}y.push("END:VCALENDAR");const M=function(){return d!=""?d:"data:text/calendar;charset=utf-8,"+encodeURIComponent(y.join(`\r
`))}();if(Sl()&&!a4()||a5()&&(Sl()||r0()&&e_e())){e1e(e,M,t,r);return}X8(M,l)}function J_e(e,t){const n=function(){return t!="all"&&t!=0?"-"+parseInt(t)+1:""}();if(e.iCalFileName!=null&&e.iCalFileName!="")return e.iCalFileName+n;if(e.icsFile!=null&&e.icsFile!=""){const r=e.icsFile.split("/").pop().split(".")[0];if(r!="")return r+n}return"event-to-save-in-my-calendar"+n}function e1e(e,t,n,r){if(wS(t),Sl()&&!a4()){Jp(e,n,"warning",kn("modal.opensafari.ical.h",n),kn("modal.opensafari.ical.text",n)+"<br>"+kn("modal.clipboard.text",n)+"<br>"+kn("modal.opensafari.ical.steps",n),[],[],r);return}Jp(e,n,"warning",kn("modal.webview.ical.h",n),kn("modal.webview.ical.text",n)+"<br>"+kn("modal.clipboard.text",n)+"<br>"+kn("modal.webview.ical.steps",n),[],[],r)}function t1e(e,t){_a("success",t.identifier,t.identifier),t.ty&&typeof W8=="function"&&setTimeout(()=>{W8(e,t)},1e3)}function X8(e,t){try{const n=document.createElementNS("http://www.w3.org/1999/xhtml","a");n.rel="noopener",n.href=e,ev()?n.target="_self":n.target="_blank",n.download=t+".ics";const r=new MouseEvent("click",{view:window,button:0,bubbles:!0,cancelable:!1});n.dispatchEvent(r),(window.URL||window.webkitURL).revokeObjectURL(n.href)}catch(n){console.error(n)}}function _u(e,t="delimiters",n="general",r=!1){if(e.startTime&&e.startTime!==""&&e.endTime&&e.endTime!==""){const l=new Date(e.startDate+"T"+e.startTime+":00.000+00:00");e.endDate||(e.endDate=e.startDate);const d=new Date(e.endDate+"T"+e.endTime+":00.000+00:00"),f=d-l,y=Math.floor(f/1e3/60/60),a=Math.floor((f-y*60*60*1e3)/1e3/60%60),E=function(){return y<10?"0"+y+":"+("0"+a).slice(-2):y+":"+("0"+a).slice(-2)}();if(n=="ical"||n=="google"&&!/(GMT[+|-]\d{1,2}|Etc\/U|Etc\/Zulu|CET|CST6CDT|EET|EST|EST5EDT|MET|MST|MST7MDT|PST8PDT|WET)/i.test(e.timeZone))return{start:xl(l,"clean",!0,!0),end:xl(d,"clean",!0,!0),duration:E,allday:!1};const C=bS(e.timeZone,e.startDate,e.startTime),M=bS(e.timeZone,e.endDate,e.endTime);if(r){const F=C.slice(0,3)+":"+C.slice(3),$=M.slice(0,3)+":"+M.slice(3);return{start:l.toISOString().replace(".000Z",F),end:d.toISOString().replace(".000Z",$),duration:E,allday:!1}}const P=parseInt(C[0]+1)*-1*((parseInt(C.substring(1,3))*60+parseInt(C.substring(3,5)))*60*1e3),N=parseInt(M[0]+1)*-1*((parseInt(M.substring(1,3))*60+parseInt(M.substring(3,5)))*60*1e3);return l.setTime(l.getTime()+P),d.setTime(d.getTime()+N),{start:xl(l,t),end:xl(d,t),duration:E,allday:!1}}else{const l=e.startDate.split("-"),d=e.endDate?e.endDate.split("-"):l,f=new Date(Date.UTC(l[0],l[1]-1,l[2],12,0,0)),y=new Date(Date.UTC(d[0],d[1]-1,d[2],12,0,0));if((n==="google"||n==="microsoft"&&!ev()||n==="msteams"||n==="ical")&&y.setDate(y.getDate()+1),n==="msteams"){if(ev()){const a=f.getTimezoneOffset(),E=function(){return a<0?"+"+("0"+Math.abs(a/60)).slice(-2)+":"+("0"+Math.abs(a%60)).slice(-2):"-"+("0"+Math.abs(a/60)).slice(-2)+":"+("0"+Math.abs(a%60)).slice(-2)}();return{start:xl(f,t,!1,!0)+"T00:00:00"+E,end:xl(y,t,!1,!0)+"T00:00:00"+E,allday:!0}}return{start:xl(f,t,!1,!0)+"+00:00",end:xl(y,t,!1,!0)+"+00:00",allday:!0}}return{start:xl(f,t,!1),end:xl(y,t,!1),allday:!0}}}function xl(e,t="delimiters",n=!0,r=!1){const l=function(){return n?t=="clean"?/(-|:|(\.\d{3}))/g:/(\.\d{3})/g:t=="clean"?/(-|T(\d{2}:\d{2}:\d{2}\.\d{3})Z)/g:/T(\d{2}:\d{2}:\d{2}\.\d{3})Z/g}();return r?e.toISOString().replace(l,"").replace("Z",""):e.toISOString().replace(l,"")}function n1e(e){const t=e[0]==="+"?1:-1,n=parseInt(e.substring(1,3),10),r=parseInt(e.substring(3,5),10);return(n*60+r)*t*6e4}function Q8(e,t,n,r){const l=new Date(`${e}T${t}:00Z`),d=bS(n,e,t),f=new Date(l.getTime()-n1e(d));return[e,t]=new Intl.DateTimeFormat("en-CA",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:r,hourCycle:"h23"}).format(f).split(", ")}function r1e(e,t="en",n="all",r=!1,l=!1,d=!1,f=!1){if(r){const me=YW();e=GW({dates:e,timeZone:me}).dates}let y,a,E,C,M={},P={},N=[],F="",$="";const Z=Intl.DateTimeFormat().resolvedOptions().timeZone;n==="all"?(M=_u(e[0]),P=_u(e[e.length-1]),E=l?Z:e[0].timeZone,C=l?Z:e[e.length-1].timeZone):(M=_u(e[`${n}`]),P=M,E=l?Z:e[`${n}`].timeZone,C=E),y=new Date(M.start),a=new Date(P.end),M.allday&&(E="GMT"),P.allday&&(C="GMT");const q=["global","world-wide","worldwide","online"];(function(){let me=0,ve=e.length-1;for(n!="all"&&(me=ve=n),me;me<=ve;me++)if(!function(){return!!(e[`${me}`].location&&e[`${me}`].location!==""&&q.includes(e[`${me}`].location.toLowerCase()))}()&&!e[`${me}`].onlineEvent)return!1;return!0})()?E=C=Z:(!M.allday&&Z!==E&&E!==C&&(F="("+E+")"),(!P.allday&&Z!==C||E!==C)&&($="("+C+")"));const Q=new Date,te=function(){return!d&&y.getFullYear()===Q.getFullYear()}(),ie=function(){return!d&&a.getFullYear()===Q.getFullYear()}(),ue=J8(E,te,t),re=J8(C,ie,t);if(y.toLocaleDateString(t,re.DateLong)===a.toLocaleDateString(t,re.DateLong))if(M.allday)te||N.push(y.toLocaleDateString(t,ue.DateLong));else{let me="";te?me=y.toLocaleString(t,ue.Time):me=y.toLocaleString(t,ue.DateTimeLong),t==="en"&&(me=me.replace(/:00/,"")),N.push(me),F!==""&&!f&&N.push(F),N.push("-"),me=a.toLocaleTimeString(t,re.Time),t==="en"&&(me=me.replace(/:00/,"")),N.push(me),$!==""&&!f&&N.push($)}else{if(M.allday)N.push(y.toLocaleDateString(t,ue.DateLong));else{let me="";te?me=y.toLocaleString(t,ue.Time):me=y.toLocaleString(t,ue.DateTimeLong),t==="en"&&(me=me.replace(/:00/,"")),N.push(me)}if(F!==""&&!f&&N.push(F),N.push("-"),P.allday)N.push(a.toLocaleDateString(t,re.DateLong));else{let me=a.toLocaleString(t,re.DateTimeLong);t==="en"&&(me=me.replace(/:00/,"")),N.push(me)}$!==""&&!f&&N.push($)}return N}function J8(e,t=!1,n="en"){const r=function(){return n==="en"?"h12":"h23"}();return t?{DateLong:{timeZone:e,month:"short",day:"numeric"},DateTimeLong:{timeZone:e,month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hourCycle:r},Time:{timeZone:e,hour:"numeric",minute:"2-digit",hourCycle:r}}:{DateLong:{timeZone:e,year:"numeric",month:"numeric",day:"numeric"},DateTimeLong:{timeZone:e,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",hourCycle:r},Time:{timeZone:e,hour:"numeric",minute:"2-digit",hourCycle:r}}}function ax(e,t=!0){const r=(t?JSON.stringify(e):e.toString()).replace(/(<(?!br)([^>]+)>)/gi,"");return t?JSON.parse(r):r}function sx(e,t=!0){return e&&e.match(/((\.\.\/)|(\.\.\\)|(%2e%2e%2f)|(%252e%252e%252f)|(%2e%2e\/)|(%252e%252e\/)|(\.\.%2f)|(\.\.%252f)|(%2e%2e%5c)|(%252e%252e%255c)|(%2e%2e\\)|(%252e%252e\\)|(\.\.%5c)|(\.\.%255c)|(\.\.%c0%af)|(\.\.%25c0%25af)|(\.\.%c1%9c)|(\.\.%25c1%259c))/gi)?(t&&console.error("Seems like the generated URL includes at least one security issue and got blocked. Please check the calendar button parameters!"),!1):!0}function _S(e){return!!/^.{0,70}@.{1,30}\.[a-zA-Z]{2,9}$/.test(e)}function Sb(e,t=!1,n=!1){return t?(n?e=e.replace(/(\[br\s?\/?\]|\{br\s?\/?\}|(\[\/p\](?=.))|(\{\/p\}(?=.)))/gi,"\\n"):e=e.replace(/(\[br\s?\/?\]|\{br\s?\/?\}|(\[\/p\](?=.))|(\{\/p\}(?=.)))/gi," "),e=e.replace(/\[url\](.+?)\[\/url\]/gi,(r,l)=>l.split("|")[0]),e=e.replace(/\{url\}(.+?)\{\/url\}/gi,(r,l)=>l.split("|")[0]),e=e.replace(/\[(|\/)(hr|p|b|strong|u|i|em|li|ul|ol|h\d)\]/gi,""),e=e.replace(/\{(|\/)(hr|p|b|strong|u|i|em|li|ul|ol|h\d)\}/gi,""),e=e.replace(/&[#a-zA-Z0-9]{1,9};/gi,"")):(e=e.replace(/\[url\]((?:(?!\[\/url\])[\w&$+.,:;=~!*'?@^%#|\s\-()[\]/])*)\[\/url\]/gi,function(r,l){return eB(l)}),e=e.replace(/\{url\}((?:(?!\[\/url\])[\w&$+.,:;=~!*'?@^%#|\s\-()[\]/])*)\{\/url\}/gi,function(r,l){return eB(l)}),e=e.replace(/\[(\/|)(br|hr|p|b|strong|u|i|em|li|ul|ol|h\d)(\s?\/?)\]/gi,"<$1$2$3>"),e=e.replace(/\{(\/|)(br|hr|p|b|strong|u|i|em|li|ul|ol|h\d)(\s?\/?)\}/gi,"<$1$2$3>")),e}function eB(e){const t=e.split("|"),n=function(){return t.length>1&&t[1]!=""?t[1]:t[0]}();return'<a href="'+t[0]+'" target="'+s4+'" rel="noopener">'+n+"</a>"}function $y(e,t=!0,n=!1){return n?e=e.replace(/"/g,""):e=e.replace(/\\/g,"\\\\").replace(/(,|;)/g,"\\$1").replace(/\\\\n/g,"\\n"),t&&(e=e.replace(/.{60}/g,`$&\r
 `)),e}function tM(e,t,n,r=!1,l=!1){let d=!1;const f=t;t.querySelector(".atcb-dropdown-anchor")!==null&&(t=t.querySelector(".atcb-dropdown-anchor"),d=!0),n.style.position="relative",n.style.display="inline-block";let y=t.getBoundingClientRect();const a=f.getBoundingClientRect(),E=f.parentNode.getBoundingClientRect(),C=document.documentElement.clientHeight;if(d===!0&&!n.classList.contains("atcb-dropoverlay")){let P=n.getBoundingClientRect();n.style.width=P.width+"px",n.classList.contains("atcb-dropup")||!r&&y.top+P.height>C-20&&2*a.top+a.height-y.top-P.height>20||l?(f.classList.add("atcb-dropup"),n.classList.add("atcb-dropup"),n.style.bottom=E.bottom-a.bottom+(y.top-a.top)+"px"):(n.style.top=a.top-E.top+(y.top-a.top)+"px",f.classList.contains("atcb-dropup")&&f.classList.remove("atcb-dropup")),y=t.getBoundingClientRect(),!n.classList.contains("atcb-style-round")&&!n.classList.contains("atcb-style-text")&&!n.classList.contains("atcb-style-neumorphism")&&(n.style.minWidth=y.width+"px",n.classList.contains("atcb-dropdown")&&(n.style.maxWidth=y.width+"px")),P=n.getBoundingClientRect(),n.style.left=Math.round(y.left-E.left-(P.width-y.width)/2)+"px"}else{n.style.minWidth=a.width+20+"px";const P=n.getBoundingClientRect();n.style.width=P.width+"px";const N=Math.round((a.width-P.width)/2);n.style.margin=-Math.round((P.height+a.height)/2)+"px "+N+"px 0 "+N+"px"}n.style.position="absolute",n.style.display="block";const M=e.querySelector("#atcb-reference");M&&f.classList.contains("atcb-dropup")&&(f.parentNode.after(M),M.classList.add("atcb-dropup"))}function nY(e,t){const n=e.querySelector(".atcb-initialized ").getBoundingClientRect(),r=t.querySelector(".atcb-initialized");let l=n.width;n.width<250&&(l=250),r.style.width=l+"px",r.style.height=n.height+"px",r.style.top=n.top+"px",r.style.left=n.left+"px"}function xS(){const e=gi.active;if(e!==null&&e!==""){const t=document.querySelector("add-to-calendar-button[atcb-button-id="+e+"]").shadowRoot,n=document.querySelector("div[atcb-button-id="+e+"]").shadowRoot;nY(t,n)}}function l4(e,t=null){const n=function(){if(t!=null)return t;{const l=e.querySelectorAll(".atcb-modal");return l.length===0?null:l[l.length-1]}}();if(n==null)return;n.getBoundingClientRect().height+150>window.innerHeight?(document.body.classList.add("atcb-modal-no-scroll"),document.documentElement.classList.add("atcb-modal-no-scroll")):(document.body.classList.remove("atcb-modal-no-scroll"),document.documentElement.classList.remove("atcb-modal-no-scroll"))}function y0(e){e.style.width=window.innerWidth+"px",e.style.height=window.innerHeight+100+"px"}function lx(e,t){e.style.setProperty("--base-font-size-l",t.l+"px"),e.style.setProperty("--base-font-size-m",t.m+"px"),e.style.setProperty("--base-font-size-s",t.s+"px")}function rY(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))}function wS(e){const t=document.createElement("input");document.body.append(t);const n=t.contentEditable,r=t.readOnly;if(t.contentEditable=!0,t.readOnly=!1,t.value=e,Sl()){var l=document.createRange();l.selectNodeContents(t);var d=window.getSelection();d.removeAllRanges(),d.addRange(l),t.setSelectionRange(0,999999)}else t.select();t.contentEditable=n,t.readOnly=r,document.execCommand("copy"),t.remove()}function ab(e,t=200){let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>{e.apply(this,r)},t)}}function Kg(e,t=300){let n;return(...r)=>{n||e.apply(this,r),clearTimeout(n),n=setTimeout(()=>{n=void 0},t)}}function _a(e,t,n){const r=function(){const l=document.getElementById(n);return l||document.querySelector('[atcb-button-id="'+n+'"]')}();r&&r.setAttribute("atcb-last-event",e+":"+t),cf()&&o1e(e,t)}function o1e(e,t){let n="";switch(e){case"initialization":n="Initialized";break;case"openList":n="Opened";break;case"closeList":n="Closed";break;case"openCalendarLink":n="Opened";break;case"openSingletonLink":n="Opened";break;case"openSubEventLink":n="Opened";break;case"openRSVP":n="Opened";break;case"success":n="Saved";break;case"successRSVP":n="Saved";break}const r=e==="openRSVP"||e==="successRSVP"?"Add-to-Calendar-RSVP":"Add-to-Calendar-Button";(window.dataLayer=window.dataLayer||[]).push({eventCategory:r,eventAction:n,eventLabel:t,event:e})}const i1e=["ar","fa"],Ei={apple:"Apple",google:"Google",ms365:"Microsoft 365",msteams:"Microsoft Teams",outlookcom:"Outlook.com",yahoo:"Yahoo"},c5={en:{"label.addtocalendar":"Add to Calendar",ical:"iCal File",...Ei,"modal.button.default":"Click me","modal.webview.ical.h":"Open your browser","modal.webview.ical.text":"Unfortunately, in-app browsers have problems with the way we generate the calendar file.","modal.clipboard.text":"We automatically copied a magical URL into your clipboard.","modal.webview.ical.steps":"<ol><li><strong>Open another browser</strong> on your phone, ...</li><li><strong>Paste</strong> the clipboard content and go.</li></ol>","modal.opensafari.ical.h":"Open Safari","modal.opensafari.ical.text":"Unfortunately, iOS has some problems generating and opening the calendar file outside of Safari.","modal.opensafari.ical.steps":"<ol><li><strong>Open Safari</strong>, ...</li><li><strong>Paste</strong> the clipboard content and go.</li></ol>","modal.multidate.h":"This is an event series","modal.multidate.text":"Add the individual events one by one:","date.status.cancelled":"This date got cancelled.","date.status.cancelled.cta":"Please update your calendar!","modal.subscribe.yahoo.h":"Add Calendar to Yahoo","modal.subscribe.yahoo.text":'<ol><li>Open now the Yahoo Calendar.</li><li>Click the "Actions" tab.</li><li>Hit "Follow Other Calendars".</li><li>Set a name and paste the clipboard content into the url field.</li></ol>',"modal.subscribe.yahoo.button":"Open Yahoo Calendar",close:"Close",continue:"Continue",cancel:"Cancel",expired:"Expired",recurring:"Recurring",thankyou:"Thank you",submit:"Submit","label.rsvp":"RSVP","label.share.email":"Share via Email","label.share.copy":"Copy Link","label.share.copied":"Copied","label.share.email.subject":"Save this event","form.error.required":"You did not properly fill all required fields","form.error.sending":"There was a problem sending your response. Please try again later","form.success":"Sent successfully!"},de:{"label.addtocalendar":"Im Kalender speichern",ical:"iCal-Datei",...Ei,"modal.button.default":"Klick mich","modal.webview.ical.h":"Öffne deinen Browser","modal.webview.ical.text":"Leider haben In-App-Browser Probleme mit der Art, wie wir Kalender-Dateien erzeugen.","modal.clipboard.text":"Wir haben automatisch eine magische URL in deine Zwischenablage kopiert.","modal.webview.ical.steps":"<ol><li><strong>Öffne einen anderen Browser</strong> auf deinem Smartphone, ...</li><li>Nutze die <strong>Einfügen</strong>-Funktion, um fortzufahren.</li></ol>","modal.opensafari.ical.h":"Öffne Safari","modal.opensafari.ical.text":"Leider hat iOS einige Probleme beim Generieren und Öffnen der Kalenderdatei außerhalb von Safari.","modal.opensafari.ical.steps":"<ol><li><strong>Öffne Safari</strong>, ...</li><li>Nutze die <strong>Einfügen</strong>-Funktion, um fortzufahren.</li></ol>","modal.multidate.h":"Dies ist eine Termin-Reihe","modal.multidate.text":"Füge die einzelnen Termine der Reihe nach deinem Kalender hinzu:","date.status.cancelled":"Dieser Termin wurde abgesagt.","date.status.cancelled.cta":"Bitte aktualisiere deinen Kalender!","modal.subscribe.yahoo.h":"Kalender zu Yahoo hinzufügen","modal.subscribe.yahoo.text":'<ol><li>Öffne den Yahoo-Kalender.</li><li>Klicke auf den "Aktionen"-Tab.</li><li>Wähle "Weiteren Kalendern folgen".</li><li>Wähle einen Namen und füge die URL aus deiner Zwischenablage in das URL-Feld ein.</li></ol>',"modal.subscribe.yahoo.button":"Yahoo-Kalender öffnen",close:"Schließen",continue:"Weiter",cancel:"Abbrechen",expired:"Abgelaufen",recurring:"Wiederkehrend",thankyou:"Danke",submit:"Absenden","label.share.email":"Per E-Mail teilen","label.share.copy":"Link kopieren","label.share.copied":"Kopiert","label.share.email.subject":"Merke dir diesen Termin","form.error.required":"Du hast nicht alle erforderlichen Felder korrekt ausgefüllt","form.error.sending":"Es gab ein Problem beim Senden deiner Antwort. Bitte versuche es später noch einmal","form.success":"Erfolgreich gesendet!"},es:{"label.addtocalendar":"Añadir al Calendario",ical:"iCal Ficha",...Ei,"modal.button.default":"Haz clic mí","modal.webview.ical.h":"Abra su browser","modal.webview.ical.text":"Lamentablemente, los browsers in-app tienen problemas con la forma en que generamos el archivo del calendario.","modal.clipboard.text":"Hemos copiado automáticamente una URL mágica en su portapapeles.","modal.webview.ical.steps":"<ol><li><strong>Abre otro browser</strong> en tu smartphone, ...</li><li>Utilice la función de <strong>pegar</strong> para continuar.</li></ol>","modal.opensafari.ical.h":"Abrir Safari","modal.opensafari.ical.text":"Desafortunadamente, iOS tiene algunos problemas para generar y abrir el archivo de calendario fuera de Safari.","modal.opensafari.ical.steps":"<ol><li><strong>Abrir Safari</strong>, ...</li><li>Utilice la función de <strong>pegar</strong> para continuar.</li></ol>","modal.multidate.h":"Esta es una serie de fechas","modal.multidate.text":"Añada las fechas individuales a su calendario en orden:","date.status.cancelled":"Esta fecha fue cancelada.","date.status.cancelled.cta":"Actualice su calendario!","modal.subscribe.yahoo.h":"Añadir calendario a Yahoo","modal.subscribe.yahoo.text":'<ol><li>Abra el calendario de Yahoo.</li><li>Haga clic en la pestaña "Acciones".</li><li>Seleccione "Seguir otros calendarios".</li><li>Elige un nombre y pega la URL de tu portapapeles en el campo URL.</li></ol>',"modal.subscribe.yahoo.button":"Abrir calendario de Yahoo",close:"Ciérralo",continue:"Continuar",cancel:"Cancelar",expired:"Caducada",recurring:"Periódica",thankyou:"Gracias",submit:"Enviar","label.share.email":"Compartir por E-mail","label.share.copy":"Copiar enlace","label.share.copied":"Copiado","label.share.email.subject":"Recuerda esta fecha","form.error.required":"No has completado correctamente todos los campos requeridos","form.error.sending":"Hubo un problema al enviar tu respuesta. Por favor, inténtalo de nuevo más tarde","form.success":"Enviado con éxito!"},pt:{"label.addtocalendar":"Incluir no Calendário",ical:"Ficheiro iCal",...Ei,"modal.button.default":"Clicar-me","modal.webview.ical.h":"Abra o seu browser","modal.webview.ical.text":"Infelizmente, os navegadores em tampas têm problemas com a forma como geramos o ficheiro de calendário.","modal.clipboard.text":"Copiámos automaticamente um URL mágico para a sua área de transferência.","modal.webview.ical.steps":"<ol><li><strong>Abrir outro browser</strong> en tu smartphone, ...</li><li>Use a função <forte>colar</strong> para continuar.</li></ol>","modal.opensafari.ical.h":"Safari aberto","modal.opensafari.ical.text":"Infelizmente, o iOS tem alguns problemas para gerar e abrir o arquivo de calendário fora do Safari.","modal.opensafari.ical.steps":"<ol><li><strong>Safari aberto</strong>, ...</li><li>Use a função <forte>colar</strong> para continuar.</li></ol>","modal.multidate.h":"Esta é uma série de datas","modal.multidate.text":"Adicione as datas individuais ao seu calendário, por ordem:","date.status.cancelled":"Esta data foi cancelada.","date.status.cancelled.cta":"Actualize o seu calendário!","modal.subscribe.yahoo.h":"Adicionar calendário ao Yahoo","modal.subscribe.yahoo.text":'<ol><li>Abrir o calendário do Yahoo.</li><li>Clique no separador "Acções".</li><li>Seleccione "Seguir outros calendários".</li><li>Escolha um nome e cole o URL da sua área de transferência no campo URL.</li></ol>',"modal.subscribe.yahoo.button":"Abra o Calendário do Yahoo",close:"Fechar",continue:"Continuar",cancel:"Cancelar",expired:"Expirada",recurring:"Recorrente",thankyou:"Obrigado",submit:"Enviar","label.share.email":"Compartilhar por e-mail","label.share.copy":"Copiar link","label.share.copied":"Copiado","label.share.email.subject":"Lembre-se desta data","form.error.required":"Você não preencheu todos os campos obrigatórios corretamente","form.error.sending":"Houve um problema ao enviar sua resposta. Por favor, tente novamente mais tarde","form.success":"Enviado com sucesso!"},fr:{"label.addtocalendar":"Ajouter à l'Agenda",ical:"Fichier iCal",...Ei,"modal.button.default":"Cliquez-moi","modal.webview.ical.h":"Ouvrez votre navigateur","modal.webview.ical.text":"Malheureusement, les navigateurs intégrés aux applications ont des problèmes avec la manière dont nous créons les fichiers de calendrier.","modal.clipboard.text":"Nous avons automatiquement copié une URL magique dans votre presse-papier.","modal.webview.ical.steps":"<ol><li><strong>Ouvrez un autre navigateur</strong> sur votre smartphone ;</li><li><strong>Collez</strong> le contenu du presse-papier et continuez.</li></ol>","modal.opensafari.ical.h":"Ouvrir Safari","modal.opensafari.ical.text":"Malheureusement, iOS rencontre des problèmes pour générer et ouvrir le fichier de calendrier en dehors de Safari.","modal.opensafari.ical.steps":"<ol><li><strong>Ouvrez Safari</strong> ;</li><li><strong>Collez</strong> le contenu du presse-papier et continuez.</li></ol>","modal.multidate.h":"Ceci est une liste d’évènements","modal.multidate.text":"Ajouter les évènements un par un :","date.status.cancelled":"Cet évènement est annulé.","date.status.cancelled.cta":"Actualisez votre agenda !","modal.subscribe.yahoo.h":"Ajouter un agenda à Yahoo","modal.subscribe.yahoo.text":"<ol><li>Ouvrez l’Agenda Yahoo ;</li><li>Cliquez sur l’onglet « Actions » ;</li><li>Sélectionnez « Suivre d’autres agendas » ;</li><li>Choisissez un nom et collez le contenu de votre presse-papier dans le champ URL.</li></ol>","modal.subscribe.yahoo.button":"Ouvrir le calendrier Yahoo",close:"Fermer",continue:"Continuer",cancel:"Annuler",expired:"Expiré",recurring:"Récurrent",thankyou:"Merci",submit:"Envoyer","label.share.email":"Partager par E-mail","label.share.copy":"Copier le lien","label.share.copied":"Copié","label.share.email.subject":"Retenez cette date","form.error.required":"Tu n'as pas correctement rempli tous les champs requis","form.error.sending":"Il y a eu un problème lors de l'envoi de ta réponse. Veuillez réessayer plus tard","form.success":"Envoyé avec succès!"},nl:{"label.addtocalendar":"Opslaan in Agenda",ical:"iCal File",...Ei,"modal.button.default":"Klik me","modal.webview.ical.h":"Open uw browser","modal.webview.ical.text":"Helaas hebben in-app browsers problemen met de manier waarop wij kalenderbestanden maken.","modal.clipboard.text":"We hebben automatisch een magische URL naar je klembord gekopieerd.","modal.webview.ical.steps":"<ol><li><strong>Open een andere browser</strong> op uw smartphone, ...</li><li>Gebruik de <strong>insert</strong> functie om verder te gaan.</li></ol>","modal.opensafari.ical.h":"Open Safari","modal.opensafari.ical.text":"Helaas heeft iOS enkele problemen met het genereren en openen van het agendabestand buiten Safari.","modal.opensafari.ical.steps":"<ol><li><strong>Open Safari</strong>, ...</li><li>Gebruik de <strong>insert</strong> functie om verder te gaan.</li></ol>","modal.multidate.h":"Dit is een reeks data","modal.multidate.text":"Voeg de afzonderlijke delen één voor één toe:","date.status.cancelled":"Deze datum is geannuleerd.","date.status.cancelled.cta":"Uw agenda bijwerken!","modal.subscribe.yahoo.h":"Toevoegen aan Yahoo","modal.subscribe.yahoo.text":`<ol><li>Open de Yahoo calendar.</li><li>Klik op de "Acties" tab.</li><li>Selecteer "Volg Andere Agenda's".</li><li>Kies een naam en plak de URL van uw klembord in het URL-veld.</li></ol>`,"modal.subscribe.yahoo.button":"Open Yahoo Agenda",close:"Sluiten",continue:"Doorgaan",cancel:"Annuleren",expired:"Verlopen",recurring:"Terugkerend",thankyou:"Bedankt",submit:"Versturen","label.share.email":"Delen via E-mail","label.share.copy":"Link kopiëren","label.share.copied":"Gekopieerd","label.share.email.subject":"Onthoud deze datum","form.error.required":"Je hebt niet alle vereiste velden correct ingevuld","form.error.sending":"Er was een probleem met het versturen van je antwoord. Probeer het later opnieuw","form.success":"Succesvol verstuurd!"},tr:{"label.addtocalendar":"Takvime Ekle",ical:"iCal Dosyası",...Ei,"modal.button.default":"Beni tıklayın","modal.webview.ical.h":"Tarayıcınızı açın","modal.webview.ical.text":"Ne yazık ki, uygulama içi tarayıcılar takvim dosyalarını oluşturma şeklimizle ilgili sorunlar yaşıyor.","modal.clipboard.text":"Panonuza otomatik olarak sihirli bir URL kopyaladık.","modal.webview.ical.steps":"<ol><li><strong>Akıllı telefonunuzda başka bir tarayıcı açın</strong>, ...</li><li>Devam etmek için <strong>insert</strong> fonksiyonunu kullanın.</li></ol>","modal.opensafari.ical.h":"Açık Safari","modal.opensafari.ical.text":"Ne yazık ki iOS, takvim dosyasını Safari dışında oluştururken ve açarken bazı sorunlar yaşıyor.","modal.opensafari.ical.steps":"<ol><li><strong>Açık Safari</strong>, ...</li><li>Devam etmek için <strong>insert</strong> fonksiyonunu kullanın.</li></ol>","modal.multidate.h":"Bu bir etkinlik serisidir","modal.multidate.text":"Parçaları teker teker ekleyin:","date.status.cancelled":"Bu tarih iptal edildi.","date.status.cancelled.cta":"Lütfen takviminizi güncelleyin!","modal.subscribe.yahoo.h":"Yahoo'ya takvim ekleme","modal.subscribe.yahoo.text":`<ol><li>Yahoo takvimini açın.</li><li>"Eylemler" sekmesine tıklayın.</li><li>"Diğer Takvimleri Takip Et" öğesini seçin.</li><li>Bir ad seçin ve URL'yi panonuzdan URL alanına yapıştırın.</li></ol>`,"modal.subscribe.yahoo.button":"Yahoo Takvimini aç",close:"Kapat",continue:"Devam etmek",cancel:"İptal",expired:"Günü geçmiş",recurring:"Yinelenen",thankyou:"Teşekkürler",submit:"Gönder","label.share.email":"E-posta ile Paylaş","label.share.copy":"Bağlantıyı Kopyala","label.share.copied":"Kopyalandı","label.share.email.subject":"Bu Tarihi Unutma","form.error.required":"Gerekli tüm alanları doğru şekilde doldurmadınız","form.error.sending":"Yanıtınızı gönderirken bir sorun oluştu. Lütfen daha sonra tekrar deneyin","form.success":"Başarıyla gönderildi!"},zh:{"label.addtocalendar":"添加到日历",ical:"iCal 文件",...Ei,"modal.button.default":"点我","modal.webview.ical.h":"打开浏览器","modal.webview.ical.text":"不幸的是，应用内浏览器在我们生成日历文件的方式上存在问题。","modal.clipboard.text":"我们自动将魔术 URL 复制到您的剪贴板。","modal.webview.ical.steps":"<ol><li>打开手机上的任何其他浏览器, ...</li><li>粘贴剪贴板内容并开始。</li></ol>","modal.opensafari.ical.h":"打开 Safari","modal.opensafari.ical.text":"不幸的是，iOS 在 Safari 之外生成和打开日历文件时遇到一些问题。","modal.opensafari.ical.steps":"<ol><li><strong>打开 Safari</strong>, ...</li><li>粘贴剪贴板内容并开始。</li></ol>","modal.multidate.h":"这是一个活动系列","modal.multidate.text":"逐个添加各个部分:","date.status.cancelled":"此日期已取消。","date.status.cancelled.cta":"请更新您的日历!","modal.subscribe.yahoo.h":"将日历添加到 Yahoo","modal.subscribe.yahoo.text":"<ol><li>打开 Yahoo 日历。</li><li>点击“操作”标签。</li><li>选择“关注其他日历”。</li><li>选择一个名称并将剪贴板中的 URL 粘贴到 URL 字段中。</li></ol>","modal.subscribe.yahoo.button":"打开雅虎日历",close:"关",continue:"继续",cancel:"中止",expired:"已到期",recurring:"再次发生的",thankyou:"谢谢",submit:"提交","label.share.email":"通过电子邮件分享","label.share.copy":"复制链接","label.share.copied":"已复制","label.share.email.subject":"记住这个日期","form.error.required":"你没有正确填写所有必填字段","form.error.sending":"发送你的回复时出现问题。请稍后再试","form.success":"成功发送！"},ar:{"label.addtocalendar":"إضافة إلى التقويم",ical:"ملف iCal",...Ei,"modal.button.default":"انقر فوق لي","modal.webview.ical.h":"افتح المستعرض الخاص بك","modal.webview.ical.text":"لسوء الحظ ، تواجه المتصفحات داخل التطبيق مشاكل في طريقة إنشاء ملف التقويم.","modal.clipboard.text":"قمنا تلقائيًا بنسخ عنوان URL سحري إلى الحافظة الخاصة بك.","modal.webview.ical.steps":"<ol><li>افتح أي متصفح آخر على هاتفك الذكي, ...</li><li>.الصق محتوى الحافظة واذهب</li></ol>","modal.opensafari.ical.h":"افتح Safari","modal.opensafari.ical.text":"لسوء الحظ ، يواجه iOS بعض المشكلات في إنشاء ملف التقويم وفتحه خارج Safari.","modal.opensafari.ical.steps":"<ol><li><strong>افتح Safari</strong>, ...</li><li>الصق محتوى الحافظة واذهب.</li></ol>","modal.multidate.h":"هذه سلسلة أحداث","modal.multidate.text":"أضف الأجزاء الفردية واحدة تلو الأخرى:","date.status.cancelled":"تم إلغاء هذا التاريخ.","date.status.cancelled.cta":"الرجاء تحديث التقويم الخاص بك!","modal.subscribe.yahoo.h":"أضف التقويم إلى Yahoo","modal.subscribe.yahoo.text":'<ol><li>افتح تقويم Yahoo.</li><li>انقر فوق علامة التبويب "الإجراءات".</li><li>حدد "متابعة تقويمات أخرى".</li><li>اختر اسمًا والصق عنوان URL من الحافظة الخاصة بك في حقل URL.</li></ol>',"modal.subscribe.yahoo.button":"افتح تقويم ياهو",close:"قريب",continue:"استمر",cancel:"إحباط",expired:"منتهي الصلاحية",recurring:"يتكرر",thankyou:"شكرا",submit:"إرسال","label.share.email":"مشاركة عبر البريد الإلكتروني","label.share.copy":"نسخ الرابط","label.share.copied":"تم النسخ","label.share.email.subject":"تذكر هذا الموعد","form.error.required":"لم تقم بملء جميع الحقول المطلوبة بشكل صحيح","form.error.sending":"حدثت مشكلة أثناء إرسال ردك. الرجاء المحاولة لاحقاً","form.success":"تم الإرسال بنجاح!"},hi:{"label.addtocalendar":"कैलेंडर में जोड़ें",ical:"iCal फ़ाइल",...Ei,"modal.button.default":"मुझे क्लिक करें","modal.webview.ical.h":"अपना ब्राउज़र खोलें","modal.webview.ical.text":"दुर्भाग्य से, इन-ऐप ब्राउज़र में कैलेंडर फ़ाइल बनाने के तरीके में समस्याएँ हैं।","modal.clipboard.text":"हमने आपके क्लिपबोर्ड पर स्वचालित रूप से एक जादुई URL कॉपी कर लिया है।","modal.webview.ical.steps":"<ol><li>अपने फ़ोन पर <strong>दूसरा ब्राउज़र खोलें</strong>, ...</li><li>क्लिपबोर्ड सामग्री <strong>चिपकाएं</strong> और जाएं।</li></ol>","modal.opensafari.ical.h":"सफारी खोलें","modal.opensafari.ical.text":"दुर्भाग्य से, iOS में सफ़ारी के बाहर कैलेंडर फ़ाइल बनाने और खोलने में कुछ समस्याएँ हैं।","modal.opensafari.ical.steps":"<ol><li><strong>सफारी खोलें</strong>, ...</li><li>क्लिपबोर्ड सामग्री <strong>चिपकाएं</strong> और जाएं।</li></ol>","modal.multidate.h":"यह एक इवेंट सीरीज़ है","modal.multidate.text":"अलग-अलग हिस्सों को एक-एक करके जोड़ें:","date.status.cancelled":"यह तिथि रद्द हो गई।","date.status.cancelled.cta":"कृपया अपना कैलेंडर अपडेट करें!","modal.subscribe.yahoo.h":"Yahoo . में कैलेंडर जोड़ें","modal.subscribe.yahoo.text":'<ol><li>Yahoo कैलेंडर खोलें।</li><li>"कृती" टैब पर क्लिक करें।</li><li>"इतर कॅलेंडर्सचे अनुसरण करा" चुनें।</li><li>एक नाम चुनें और अपने क्लिपबोर्ड से URL को URL फ़ील्ड में पेस्ट करें।</li></ol>',"modal.subscribe.yahoo.button":"याहू कैलेंडर खोलें",close:"बंद करना",continue:"जारी रखें",cancel:"रद्द करना",expired:"खत्म हो चुका",recurring:"पुनरावर्ती",thankyou:"धन्यवाद",submit:"जमा करें","label.share.email":"ईमेल के माध्यम से साझा करें","label.share.copy":"लिंक कॉपी करें","label.share.copied":"कॉपी हो गया","label.share.email.subject":"इस तारीख को याद रखें","form.error.required":"आपने सभी आवश्यक फ़ील्ड सही ढंग से नहीं भरी हैं","form.error.sending":"आपका जवाब भेजते समय एक समस्या हुई। कृपया बाद में पुनः प्रयास करें","form.success":"सफलतापूर्वक भेजा गया!"},pl:{"label.addtocalendar":"Dodaj do kalendarza",ical:"Plik iCal",...Ei,"modal.button.default":"Kliknij mnie","modal.webview.ical.h":"Otwórz przeglądarkę","modal.webview.ical.text":"Niestety, przeglądarki in-app mają problemy ze sposobem, w jaki generujemy plik kalendarza.","modal.clipboard.text":"Automatycznie skopiowaliśmy magiczny adres URL do schowka.","modal.webview.ical.steps":"<ol><li><strong>Otwórz inną przeglądarkę</strong> w swoim telefonie, ...</li><li><strong>Wklej</strong> zawartość schowka i ruszaj.</li></ol>","modal.opensafari.ical.h":"Otwórz Safari","modal.opensafari.ical.text":"Niestety iOS ma pewne problemy z generowaniem i otwieraniem pliku kalendarza poza Safari.","modal.opensafari.ical.steps":"<ol><li><strong>Otwórz Safari</strong>, ...</li><li><strong>Wklej</strong> zawartość schowka i ruszaj.</li></ol>","modal.multidate.h":"To jest cykl imprez","modal.multidate.text":"Dodawać po kolei poszczególne części:","date.status.cancelled":"Ta data została odwołana.","date.status.cancelled.cta":"Zaktualizuj swój kalendarz!","modal.subscribe.yahoo.h":"Dodaj kalendarz do Yahoo","modal.subscribe.yahoo.text":'<ol><li>Otwórz kalendarz Yahoo.</li><li>Kliknij na zakładkę "Czynności".</li><li>Wybierz "Obserwuj inne kalendarze".</li><li>Wybierz nazwę i wklej adres URL ze schowka w polu URL.</li></ol>',"modal.subscribe.yahoo.button":"Otwórz kalendarz Yahoo",close:"Zamknij",continue:"Kontynuować",cancel:"Anuluj",expired:"Wygasły",recurring:"Powtarzający się",thankyou:"Dziękuję",submit:"Wyślij","label.share.email":"Udostępnij przez e-mail","label.share.copy":"Kopiuj link","label.share.copied":"Skopiowane","label.share.email.subject":"Zapamiętaj tę datę","form.error.required":"Nie wypełniłeś wszystkich wymaganych pól poprawnie","form.error.sending":"Wystąpił problem z wysłaniem twojej odpowiedzi. Spróbuj ponownie później","form.success":"Wysłano pomyślnie!"},id:{"label.addtocalendar":"Tambahkan ke Kalender",ical:"File iCal",...Ei,"modal.button.default":"Klik saya","modal.webview.ical.h":"Buka browser Anda","modal.webview.ical.text":"Sayangnya, browser dalam aplikasi memiliki masalah dengan cara kami menghasilkan file kalender.","modal.clipboard.text":"Kami telah secara otomatis menyalin URL ajaib ke clipboard Anda.","modal.webview.ical.steps":"<ol><li><strong>Buka peramban lain</strong> pada ponsel Anda, ...</li><li>Tempelkan konten clipboard dan pergi.</li></ol>","modal.opensafari.ical.h":"Buka Safari","modal.opensafari.ical.text":"Sayangnya, iOS memiliki beberapa masalah dalam membuat dan membuka file kalender di luar Safari.","modal.opensafari.ical.steps":"<ol><li><strong>Buka Safari</strong>, ...</li><li>Tempelkan konten clipboard dan pergi.</li></ol>","modal.multidate.h":"Ini adalah rangkaian acara","modal.multidate.text":"Tambahkan masing-masing bagian satu per satu:","date.status.cancelled":"Tanggal ini dibatalkan.","date.status.cancelled.cta":"Perbarui kalender Anda!","modal.subscribe.yahoo.h":"Tambahkan kalender ke Yahoo","modal.subscribe.yahoo.text":'<ol><li>Buka kalender Yahoo.</li><li>Klik pada tab "Tindakan".</li><li>Pilih "Ikuti Kalender Lain".</li><li>Pilih nama dan tempelkan URL dari clipboard Anda ke bidang URL.</li></ol>',"modal.subscribe.yahoo.button":"Buka kalender Yahoo",close:"Tutup",continue:"Lanjutkan",cancel:"Batal",expired:"Kedaluwarsa",recurring:"Berulang",thankyou:"Terima kasih",submit:"Kirim","label.share.email":"Bagikan via email","label.share.copy":"Salin tautan","label.share.copied":"Tersalin","label.share.email.subject":"Ingat tanggal ini","form.error.required":"Kamu belum mengisi semua kolom yang diperlukan dengan benar","form.error.sending":"Ada masalah saat mengirim jawabanmu. Coba lagi nanti","form.success":"Berhasil terkirim!"},no:{"label.addtocalendar":"Legg til i kalenderen",ical:"iCal-fil",...Ei,"modal.button.default":"Klikk på meg","modal.webview.ical.h":"Åpne nettleseren din","modal.webview.ical.text":"Dessverre har nettlesere i appen problemer med måten vi genererer kalenderfilen på.","modal.clipboard.text":"Vi kopierte automatisk en magisk URL til utklippstavlen din.","modal.webview.ical.steps":"<ol><li><strong>Åpne en annen nettleser</strong> på telefonen, ...</li><li><strong>Lim inn</strong> innholdet på utklippstavlen og gå.</li></ol>","modal.opensafari.ical.h":"Åpne Safari","modal.opensafari.ical.text":"Dessverre har iOS noen problemer med å generere og åpne kalenderfilen utenfor Safari.","modal.opensafari.ical.steps":"<ol><li><strong>Åpne Safari</strong>, ...</li><li><strong>Lim inn</strong> innholdet på utklippstavlen og gå.</li></ol>","modal.multidate.h":"Dette er en avtaleserie","modal.multidate.text":"Legg til de enkelte datoene i kalenderen din i rekkefølge:","date.status.cancelled":"Denne datoen ble avlyst.","date.status.cancelled.cta":"Oppdater kalenderen din!","modal.subscribe.yahoo.h":"Legg til kalender til Yahoo","modal.subscribe.yahoo.text":"<ol><li>Åpne Yahoo-kalenderen.</li><li>Klikk på «Handlinger»-fanen.</li><li>Velg «Følg andre kalendere».</li><li>Velg et navn og lim inn URL-en fra utklippstavlen i URL-feltet.</li></ol>","modal.subscribe.yahoo.button":"Åpne Yahoo-kalenderen",close:"Lukk",continue:"Fortsette",cancel:"Avbryt",expired:"Utløpt",recurring:"Tilbakevendende",thankyou:"Takk",submit:"Send inn","label.share.email":"Del via e-post","label.share.copy":"Kopier lenke","label.share.copied":"Kopiert","label.share.email.subject":"Husk denne datoen","form.error.required":"Du har ikke fylt ut alle de nødvendige feltene riktig","form.error.sending":"Det oppsto et problem med å sende svaret ditt. Vennligst prøv igjen senere","form.success":"Sendt suksessfullt!"},fi:{"label.addtocalendar":"Lisää kalenteriin",ical:"iCal-tiedosto",...Ei,"modal.button.default":"Klikkaa minua","modal.webview.ical.h":"Avaa selain","modal.webview.ical.text":"Valitettavasti sovelluksen sisäisillä selaimilla on ongelmia kalenteritiedoston luomisessa.","modal.clipboard.text":"Olemme automaattisesti kopioineet maagisen URL-osoitteen leikepöydällesi.","modal.webview.ical.steps":"<ol><li><strong>Avaa toinen selain</strong> puhelimessasi., ...</li><li><strong>liitä</strong> leikepöydän sisältö ja lähde.</li></ol>","modal.opensafari.ical.h":"Avaa Safari","modal.opensafari.ical.text":"Valitettavasti iOS:llä on ongelmia kalenteritiedoston luomisessa ja avaamisessa Safarin ulkopuolella.","modal.opensafari.ical.steps":"<ol><li><strong>Avaa Safari</strong>, ...</li><li><strong>liitä</strong> leikepöydän sisältö ja lähde.</li></ol>","modal.multidate.h":"Tämä on tapahtumasarja","modal.multidate.text":"Lisää yksittäiset osat yksi kerrallaan:","date.status.cancelled":"Tämä päivämäärä peruttiin.","date.status.cancelled.cta":"Päivitä kalenterisi!","modal.subscribe.yahoo.h":"Lisää kalenteri Yahoo","modal.subscribe.yahoo.text":'<ol><li>Avaa Yahoo-kalenteri.</li><li>Napsauta "Toiminnot"-välilehteä.</li><li>Valitse "Seuraa muiden kalentereita".</li><li>Valitse nimi ja liitä URL-osoite leikepöydältäsi URL-kenttään.</li></ol>',"modal.subscribe.yahoo.button":"Avaa Yahoo-kalenteri",close:"Sulje",continue:"Jatkaa",cancel:"Peruuta",expired:"Vanhentunut",recurring:"Toistuva",thankyou:"Kiitos",submit:"Lähetä","label.share.email":"Jaa sähköpostitse","label.share.copy":"Kopioi linkki","label.share.copied":"Kopioitu","label.share.email.subject":"Muista tämä päivämäärä","form.error.required":"Et täyttänyt kaikkia vaadittuja kenttiä oikein","form.error.sending":"Vastauksen lähettämisessä ilmeni ongelma. Yritä myöhemmin uudelleen","form.success":"Lähetetty onnistuneesti!"},sv:{"label.addtocalendar":"Lägg till i kalender",ical:"iCal-fil",...Ei,"modal.button.default":"Klicka på mig","modal.webview.ical.h":"Öppna din webbläsare","modal.webview.ical.text":"Tyvärr har webbläsare i appen problem med hur vi genererar kalenderfilen.","modal.clipboard.text":"Vi har automatiskt kopierat en magisk URL till ditt klippblock.","modal.webview.ical.steps":"<ol><li><strong>Öppna en annan webbläsare</strong> på telefonen, ...</li><li><strong>Insätt</strong> innehållet i klippbordet och kör.</li></ol>","modal.opensafari.ical.h":"Öppna Safari","modal.opensafari.ical.text":"Tyvärr har iOS vissa problem med att generera och öppna kalenderfilen utanför Safari.","modal.opensafari.ical.steps":"<ol><li><strong>Öppna Safari</strong>, ...</li><li><strong>Insätt</strong> innehållet i klippbordet och kör.</li></ol>","modal.multidate.h":"Detta är en evenemangsserie","modal.multidate.text":"Lägg till de enskilda delarna en efter en:","date.status.cancelled":"Detta datum har ställts in.","date.status.cancelled.cta":"Uppdatera din kalender!","modal.subscribe.yahoo.h":"Lägg till kalender i Yahoo","modal.subscribe.yahoo.text":'<ol><li>Öppna Yahoo-kalendern.</li><li>Klicka på fliken "Åtgärder".</li><li>Välj "Följ andra kalendrar".</li><li>Välj ett namn och klistra in URL:en från klippbordet i URL-fältet.</li></ol>',"modal.subscribe.yahoo.button":"Öppna Yahoo-kalendern",close:"Stäng",continue:"Fortsätta",cancel:"Avbryt",expired:"Utgånget",recurring:"Återkommande",thankyou:"Tack",submit:"Skicka","label.share.email":"Dela via e-post","label.share.copy":"Kopiera länk","label.share.copied":"Kopierat","label.share.email.subject":"Kom ihåg detta datum","form.error.required":"Du har inte fyllt i alla nödvändiga fält korrekt","form.error.sending":"Det uppstod ett problem när ditt svar skickades. Försök igen senare","form.success":"Skickat framgångsrikt!"},cs:{"label.addtocalendar":"Přidat do kalendáře",ical:"Soubor iCal",...Ei,"modal.button.default":"Klikněte na mě","modal.webview.ical.h":"Otevřete prohlížeč","modal.webview.ical.text":"Prohlížeče v aplikacích mají bohužel problémy se způsobem generování souboru kalendáře.","modal.clipboard.text":"Do schránky jsme automaticky zkopírovali kouzelnou adresu URL.","modal.webview.ical.steps":"<ol><li><strong>Otevření jiného prohlížeče</strong> v telefonu, ...</li><li><strong>Vložte</strong> obsah schránky a přejděte.</li></ol>","modal.opensafari.ical.h":"Otevřít Safari","modal.opensafari.ical.text":"Bohužel má iOS nějaké problémy s generováním a otevíráním souboru kalendáře mimo Safari.","modal.opensafari.ical.steps":"<ol><li><strong>Otevřít Safari</strong>, ...</li><li><strong>Vložte</strong> obsah schránky a přejděte.</li></ol>","modal.multidate.h":"Jedná se o sérii událostí","modal.multidate.text":"Přidávejte jednotlivé díly jeden po druhém:","date.status.cancelled":"Toto datum bylo zrušeno.","date.status.cancelled.cta":"Aktualizujte svůj kalendář!","modal.subscribe.yahoo.h":"Přidat kalendář do Yahoo","modal.subscribe.yahoo.text":'<ol><li>Otevřete kalendář Yahoo.</li><li>Klikněte na kartu "Akce".</li><li>Vyberte možnost "Sledovat další kalendáře".</li><li>Vyberte název a vložte adresu URL ze schránky do pole URL.</li></ol>',"modal.subscribe.yahoo.button":"Otevřete kalendář Yahoo",close:"Zavřít",continue:"Pokračovat",cancel:"Storno",expired:"Platnost vypršela",recurring:"Opakující se",thankyou:"Děkuji",submit:"Odeslat","label.share.email":"Sdílet e-mailem","label.share.copy":"Kopírovat odkaz","label.share.copied":"Zkopírováno","label.share.email.subject":"Zapamatuj si tento termín","form.error.required":"Nevyplnil jsi správně všechna požadovaná pole","form.error.sending":"Při odesílání tvé odpovědi došlo k problému. Zkus to prosím později znovu","form.success":"Úspěšně odesláno!"},ja:{"label.addtocalendar":"カレンダーに追加",ical:"iCalファイル",...Ei,"modal.button.default":"クリックしてください","modal.webview.ical.h":"ブラウザを起動する","modal.webview.ical.text":"残念ながら、アプリ内ブラウザは、カレンダーファイルの生成方法に問題があります。","modal.clipboard.text":"魔法のURLを自動的にクリップボードにコピーしています。","modal.webview.ical.steps":"<ol><li>スマートフォンで別のブラウザを起動する, ...</li><li>クリップボードの内容を貼り付けて行く。</li></ol>","modal.opensafari.ical.h":"オープンSafari","modal.opensafari.ical.text":"残念ながら、iOS では、Safari の外でカレンダー ファイルを生成したり開いたりする際にいくつかの問題があります。","modal.opensafari.ical.steps":"<ol><li><strong>オープンSafari</strong>, ...</li><li>クリップボードの内容を貼り付けて行く。</li></ol>","modal.multidate.h":"イベントシリーズです","modal.multidate.text":"個々のパーツを一つずつ追加していく:","date.status.cancelled":"この日はキャンセルになりました。","date.status.cancelled.cta":"カレンダーを更新する!","modal.subscribe.yahoo.h":"Yahooにカレンダーを追加する","modal.subscribe.yahoo.text":"<ol><li>Yahooカレンダーを開く。</li><li>[実行] タブをクリックします。</li><li>[その他のカレンダーのフォロー] を選択します。</li><li>名前を決めて、クリップボードにあるURLをURL欄に貼り付けます。</li></ol>","modal.subscribe.yahoo.button":"Yahooカレンダーを開く",close:"閉じる",continue:"続ける",cancel:"キャンセル",expired:"期限切れ",recurring:"繰り返し",thankyou:"ありがとう",submit:"送信","label.share.email":"メールで共有","label.share.copy":"リンクをコピー","label.share.copied":"コピー済み","label.share.email.subject":"この日付を覚えておいて","form.error.required":"必要なフィールドをすべて正しく入力していません","form.error.sending":"あなたの回答を送信する際に問題が発生しました。後で再試行してください","form.success":"正常に送信されました！"},it:{"label.addtocalendar":"Aggiungi al calendario",ical:"File iCal",...Ei,"modal.button.default":"Clicca su di me","modal.webview.ical.h":"Aprire il browser","modal.webview.ical.text":"Purtroppo i browser in-app hanno problemi con il modo in cui generiamo il file del calendario.","modal.clipboard.text":"Abbiamo copiato automaticamente un URL magico negli appunti.","modal.webview.ical.steps":"<ol><li><strong>Aprire un altro browser</strong> sul cellulare, ...</li><li><strong>Incollare</strong> il contenuto degli appunti e partire.</li></ol>","modal.opensafari.ical.h":"Aprire Safari","modal.opensafari.ical.text":"Sfortunatamente, iOS ha alcuni problemi nella generazione e nell'apertura del file del calendario al di fuori di Safari.","modal.opensafari.ical.steps":"<ol><li><strong>Aprire Safari</strong>, ...</li><li><strong>Incollare</strong> il contenuto degli appunti e partire.</li></ol>","modal.multidate.h":"Questa è una serie di eventi","modal.multidate.text":"Aggiungere le singole parti una per una:","date.status.cancelled":"La data è stata annullata.","date.status.cancelled.cta":"Aggiornare il calendario!","modal.subscribe.yahoo.h":"Aggiungi il calendario a Yahoo","modal.subscribe.yahoo.text":`<ol><li>Aprire il calendario di Yahoo.</li><li>Fare clic sulla scheda "Azioni".</li><li>Selezionare "Segui altri calendari".</li><li>Scegliere un nome e incollare l'URL dagli appunti nel campo URL.</li></ol>`,"modal.subscribe.yahoo.button":"Apri il calendario di Yahoo",close:"Chiudere",continue:"Continuare",cancel:"Annulla",expired:"Scaduta",recurring:"Ricorrente",thankyou:"Grazie",submit:"Invia","label.share.email":"Condividi via Email","label.share.copy":"Copia il link","label.share.copied":"Copiato","label.share.email.subject":"Ricorda questa data","form.error.required":"Non hai compilato correttamente tutti i campi richiesti","form.error.sending":"C'è stato un problema nell'invio della tua risposta. Prova di nuovo più tardi","form.success":"Inviato con successo!"},ko:{"label.addtocalendar":"캘린더에 추가",ical:"iCal 파일",...Ei,"modal.button.default":"클릭 해주세요","modal.webview.ical.h":"브라우저 열기","modal.webview.ical.text":"불행히도 인앱 브라우저는 캘린더 파일을 생성하는 방식에 문제가 있습니다.","modal.clipboard.text":"매직 URL을 클립보드에 자동으로 복사했습니다.","modal.webview.ical.steps":"<ol><li>휴대전화에서 다른 브라우저 열기, ...</li><li>클립보드 내용을 붙여넣고 이동합니다.</li></ol>","modal.opensafari.ical.h":"Safari 열기","modal.opensafari.ical.text":"안타깝게도 iOS에는 Safari 외부에서 캘린더 파일을 생성하고 여는 데 몇 가지 문제가 있습니다.","modal.opensafari.ical.steps":"<ol><li><strong>Safari 열기</strong>, ...</li><li>클립보드 내용을 붙여넣고 이동합니다.</li></ol>","modal.multidate.h":"이벤트 시리즈입니다","modal.multidate.text":"개별 부품을 하나씩 추가:","date.status.cancelled":"이 날짜는 취소되었습니다.","date.status.cancelled.cta":"캘린더를 업데이트하세요!","modal.subscribe.yahoo.h":"Yahoo에 캘린더 추가","modal.subscribe.yahoo.text":'<ol><li>Yahoo 캘린더를 엽니다.</li><li>"동작" 탭을 클릭합니다.</li><li>"다른 일정관리 팔로우"를 선택합니다.</li><li>이름을 선택하고 클립보드의 URL을 URL 필드에 붙여넣습니다.</li></ol>',"modal.subscribe.yahoo.button":"야후 캘린더 열기",close:"닫다",continue:"계속하다",cancel:"취소",expired:"만료됨",recurring:"되풀이",thankyou:"감사합니다",submit:"제출하기","label.share.email":"이메일로 공유하기","label.share.copy":"링크 복사하기","label.share.copied":"복사됨","label.share.email.subject":"이 날짜를 기억하세요","form.error.required":"필수 필드를 모두 올바르게 채우지 않았습니다","form.error.sending":"응답을 보내는 데 문제가 발생했습니다. 나중에 다시 시도해주세요","form.success":"성공적으로 전송됨!"},vi:{"label.addtocalendar":"Thêm vào Lịch",ical:"Tệp iCal",...Ei,"modal.button.default":"Nhấp vào đây","modal.webview.ical.h":"Mở trình duyệt của bạn","modal.webview.ical.text":"Rất tiếc, các trình duyệt trong ứng dụng gặp sự cố với cách chúng tôi tạo tệp lịch.","modal.clipboard.text":"Chúng tôi đã tự động sao chép một URL ma thuật vào khay nhớ tạm của bạn.","modal.webview.ical.steps":"<ol><li><strong> Mở trình duyệt khác </strong> trên điện thoại của bạn, ...</li><li><strong> Dán </strong> nội dung khay nhớ tạm và bắt đầu.</li></ol>","modal.opensafari.ical.h":"Mở Safari","modal.opensafari.ical.text":"Rất tiếc, iOS gặp một số sự cố khi tạo và mở tệp lịch bên ngoài Safari.","modal.opensafari.ical.steps":"<ol><li><strong>Mở Safari</strong>, ...</li><li><strong> Dán </strong> nội dung khay nhớ tạm và bắt đầu.</li></ol>","modal.multidate.h":"Đây là một chuỗi sự kiện","modal.multidate.text":"Thêm từng phần riêng lẻ một:","date.status.cancelled":"Ngày này đã bị hủy.","date.status.cancelled.cta":"Cập nhật lịch của bạn!","modal.subscribe.yahoo.h":"Thêm lịch vào Yahoo","modal.subscribe.yahoo.text":'<ol><li>Mở Lịch Yahoo.</li><li>Nhấp vào tab "Hành động".</li><li>Chọn "Theo dõi các Lịch khác".</li><li>Chọn tên và dán URL từ khay nhớ tạm của bạn vào trường URL.</li></ol>',"modal.subscribe.yahoo.button":"Mở lịch Yahoo",close:"Đóng",continue:"Tiếp tục",cancel:"Hủy bỏ",expired:"Hết hạn",recurring:"Định kỳ",thankyou:"Cảm ơn",submit:"Gửi","label.share.email":"Chia sẻ qua Email","label.share.copy":"Sao chép liên kết","label.share.copied":"Đã sao chép","label.share.email.subject":"Ghi nhớ ngày này","form.error.required":"Bạn chưa điền đúng tất cả các trường bắt buộc","form.error.sending":"Có sự cố khi gửi phản hồi của bạn. Vui lòng thử lại sau","form.success":"Gửi thành công!"},ro:{"label.addtocalendar":"Adauga In Calendar",ical:"Fisier iCal",...Ei,"modal.button.default":"Apasa-ma","modal.webview.ical.h":"Deschide browserul","modal.webview.ical.text":"Din pacate, browserele din aplicatie au probleme cu generarea de fisiere pentru calendar.","modal.clipboard.text":"Ti-am copiat automat un URL magic in clipboard","modal.webview.ical.steps":"<ol><li><strong>Deschide un alt browser</strong> pe telefonul tau, ...</li><li><strong>Lipeste</strong> continutul din clipboard si continua.</li></ol>","modal.opensafari.ical.h":"Deschide Safari","modal.opensafari.ical.text":"Din păcate, iOS are unele probleme la generarea și deschiderea fișierului calendar în afara Safari.","modal.opensafari.ical.steps":"<ol><li><strong>Deschides Safari</strong>, ...</li><li><strong>Lipeste</strong> continutul din clipboard si continua.</li></ol>","modal.multidate.h":"Aceasta este o serie de evenimente","modal.multidate.text":"Adauga evenimentele individuale una cate una:","date.status.cancelled":"Aceasta data a fost anulata.","date.status.cancelled.cta":"Te rugam sa-ti updatezi calendarul!","modal.subscribe.yahoo.h":"Adauga Calendar in Yahoo","modal.subscribe.yahoo.text":'<ol><li>Deschide acum calendarul Yahoo.</li><li>Apasa pe tab-ul de "Actiuni".</li><li>Apasa "Urmareste alte calendare".</li><li>Seteaza un nume si lipeste continutul din clipboard in casuta cu url.</li></ol>',"modal.subscribe.yahoo.button":"Deschideți calendarul Yahoo",close:"Inchide",continue:"Continua",cancel:"Anuleaza",expired:"Expirat",recurring:"Recurente",thankyou:"Mulțumesc",submit:"Trimite","label.share.email":"Distribuie prin e-mail","label.share.copy":"Copiază linkul","label.share.copied":"Copiat","label.share.email.subject":"Ține minte această dată","form.error.required":"Nu ai completat corect toate câmpurile necesare","form.error.sending":"A apărut o problemă la trimiterea răspunsului tău. Încearcă din nou mai târziu","form.success":"Trimis cu succes!"},fa:{"label.addtocalendar":"افزودن به تقویم",ical:"پرونده iCal",...Ei,"modal.button.default":"اینجا کلیک کنید","modal.webview.ical.h":"مرورگر خود را باز کنید","modal.webview.ical.text":"متاسفانه، مرورگرهای درون برنامه‌ای با نحوه تولید پرونده تقویم مشکل دارند.","modal.clipboard.text":"ما به طور خودکار یک نشانی اینترنتی جادویی را در کلیپ‌بورد شما کپی کردیم.","modal.webview.ical.steps":"<ol><li><strong>مرورگر دیگری را </strong> در گوشی خود باز کنید، ...</li><li>محتوای کلیپ‌بورد را <strong>Paste</strong> کنید و Go را بزنید که آدرس باز شود.</li></ol>","modal.opensafari.ical.h":"سافاری را باز کنید","modal.opensafari.ical.text":"متأسفانه iOS در تولید و باز کردن فایل تقویم خارج از سافاری مشکلاتی دارد.","modal.opensafari.ical.steps":"<ol><li><strong>سافاری را باز کنید</strong>، ...</li><li>محتوای کلیپ‌بورد را <strong>Paste</strong> کنید و Go را بزنید که آدرس باز شود.</li></ol>","modal.multidate.h":"این یک سری رویداد است","modal.multidate.text":"رویدادهای شخصی را یکی یکی اضافه کنید:","date.status.cancelled":"این تاریخ لغو شد","date.status.cancelled.cta":"لطفا تقویم خود را به‌روز کنید!","modal.subscribe.yahoo.h":"افزودن تقویم به یاهو","modal.subscribe.yahoo.text":"<ol><li>اکنون تقویم یاهو را باز کنید.</li><li>روی زبانه «Actions» کلیک کنید.</li><li>روی «Follow Other Calendars» ضربه بزنید.</li><li>یک نام وارد کنید و محتوای کلیپ‌بورد را در قسمت url قرار دهید.</li></ol>","modal.subscribe.yahoo.button":"تقویم یاهو را باز کنید",close:"بستن",continue:"ادامه دادن",cancel:"لغو",expired:"منقضی شده",thankyou:"ممنون",submit:"ارسال","label.share.email":"اشتراک‌گذاری از طریق ایمیل","label.share.copy":"کپی لینک","label.share.copied":"کپی شد","label.share.email.subject":"این تاریخ را به یاد داشته باشید","form.error.required":"شما همه فیلدهای لازم را به درستی پر نکرده‌اید","form.error.sending":"مشکلی در ارسال پاسخ شما وجود داشت. لطفا بعدا دوباره تلاش کنید","form.success":"با موفقیت ارسال شد!"},et:{"label.addtocalendar":"Lisa kalendrisse",ical:"iCal fail",...Ei,"modal.button.default":"Kliki siia","modal.webview.ical.h":"Ava oma veebilehitseja","modal.webview.ical.text":"Kahjuks on rakendusesisestel veebilehitsejatel probleeme kalendrifailide loomisega.","modal.clipboard.text":"Kalendri veebi aadress on automaatselt kopeeritud sinu lõikelauale.","modal.webview.ical.steps":"<ol><li><strong>Ava teine veebilehitseja</strong> oma telefonis, ...</li><li><strong>Kleebi</strong> lõikelaua sisu ning mine sellele lehele.</li></ol>","modal.opensafari.ical.h":"Ava Safari","modal.opensafari.ical.text":"Kahjuks on iOS-il probleeme kalendrifaili genereerimise ja avamisega väljaspool Safarit.","modal.opensafari.ical.steps":"<ol><li><strong>Ava Safari</strong>, ...</li><li><strong>Kleebi</strong> lõikelaua sisu ning mine sellele lehele.</li></ol>","modal.multidate.h":"See on sündmuste seeria","modal.multidate.text":"Ava üksikud sündmused ükshaaval:","date.status.cancelled":"See kuupäev on tühistatud.","date.status.cancelled.cta":"Palun uuenda oma kalendrit!","modal.subscribe.yahoo.h":"Lisa kalender Yahoo-sse","modal.subscribe.yahoo.text":'<ol><li>Ava oma Yahoo kalender.</li><li>Kliki "Actions" vahelehte.</li><li>Vajuta "Follow Other Calendars".</li><li>Määra nimi ning lisa lõikelaua sisu URL (veebi aadressi) väljale.</li></ol>',"modal.subscribe.yahoo.button":"Avage Yahoo kalender",close:"Sulge",continue:"Jätkama",cancel:"Tühista",expired:"Aegunud",thankyou:"Aitäh",submit:"Saada","label.share.email":"Jaga e-posti teel","label.share.copy":"Kopeeri link","label.share.copied":"Kopeeritud","label.share.email.subject":"Pane see kuupäev kirja","form.error.required":"Sa pole kõiki nõutavaid välju korrektselt täitnud","form.error.sending":"Sinu vastuse saatmisel tekkis probleem. Palun proovi hiljem uuesti","form.success":"Edukalt saadetud!"}},a1e=Object.keys(c5);function kn(e,t){return t.customLabels&&t.customLabels[`${e}`]&&t.customLabels[`${e}`]!==""?Sb(t.customLabels[`${e}`]):oY(e,t.language)}function oY(e,t){return t||(t="en"),c5[`${t}`][`${e}`]?c5[`${t}`][`${e}`]:t!=="en"?oY(e,"en"):e}let u5=!1,wE=0;const b1=[],tB='<div class="atcb-initialized atcb-hidden"></div>';if(cf()){class e extends HTMLElement{constructor(){super(),this._initialized=new Promise(r=>this._initializedResolver=r);const n=document.createElement("template");n.innerHTML=tB,this.attachShadow({mode:"open",delegateFocus:!0}),this.shadowRoot.append(n.content.cloneNode(!0)),this.state={initializing:!1,initialized:!1,ready:!1,updatePending:!1},this.data={},this.error=!1}connectedCallback(){this.initializing||(this.initializing=!0,setTimeout(()=>this.initializeComponent(),0))}async initializeComponent(){if(this.state.ready)return;this.state.initializing=!0;const n=this.getAttribute("debug");if(this.debug=!!(this.hasAttribute("debug")&&(!n||n==="true"||n==="")),(this.hasAttribute("proKey")&&this.getAttribute("proKey")!==""||this.hasAttribute("prokey")&&this.getAttribute("prokey")!=="")&&(this.hasAttribute("proKey")&&this.getAttribute("proKey")!==""?this.data=await EE(this.getAttribute("proKey"),this):this.data=await EE(this.getAttribute("prokey"),this),this.data.proKey&&(this.proKey=this.data.proKey)),!this.data.name||this.data.name===""){this.data.proKey="";try{this.data=await nB(this,this.debug)}catch(r){this.debug&&(console.error(r),nM(this.shadowRoot,r)),this.state.initializing=!1,this.state.ready=!0;return}}await this.initButton(),this.state.initializing=!1,this.state.initialized=!0,this.state.ready=!0,this._initializedResolver()}whenInitialized(){return this._initialized}disconnectedCallback(){rB(this.shadowRoot,this.identifier),this.debug&&console.log('Add to Calendar Button "'+this.identifier+'" destroyed'),document.querySelectorAll("add-to-calendar-button").length===0&&(wE=0)}static get observedAttributes(){const n=["instance","prokey","proKey"];return this.proKey&&this.proKey!==""?s5.map(r=>r.toLowerCase()).concat(n):HW.map(r=>r.toLowerCase()).concat(n)}attributeChangedCallback(n,r,l){this.state.ready&&(this.debug&&this.state.initialized&&console.log(`${n}'s value has been changed from ${r} to ${l}`),this.updatePending||(this.updatePending=!0,setTimeout(()=>this.updateComponent(),0)))}async updateComponent(){if(!this.updatePending)return;this.data={},this.shadowRoot.querySelector(".atcb-initialized").remove();const n=document.createElement("template");if(n.innerHTML=tB,this.shadowRoot.append(n.content.cloneNode(!0)),this.hasAttribute("proKey")&&this.getAttribute("proKey")!==""?(this.data=await EE(this.getAttribute("proKey"),this),this.data.proKey&&(this.proKey=this.data.proKey)):this.hasAttribute("prokey")&&this.getAttribute("prokey")!==""&&(this.data=await EE(this.getAttribute("prokey"),this),this.data.proKey&&(this.proKey=this.data.proKey)),!this.data.name||this.data.name==="")try{this.data=await nB(this,this.debug)}catch(r){this.debug&&(console.error(r),nM(this.shadowRoot,r)),this.updatePending=!1;return}rB(this.shadowRoot,this.identifier),await this.initButton(),this.updatePending=!1}async initButton(){if(this.state.initialized||(wE=wE+1),this.identifier&&this.identifier!=="")this.data.identifier=this.identifier;else{if(this.data.identifier&&this.data.identifier!==""){if(/^[\w\-_]+$/.test(this.data.identifier))this.data.identifier="atcb-btn-"+this.data.identifier;else if(this.data.identifier="",this.debug){let n="Add to Calendar Button";this.data.rsvp&&Object.keys(this.data.rsvp).length>0&&(n="RSVP"),console.warn(n+" generation: identifier invalid - using auto numbers instead")}}(this.data.identifier==null||this.data.identifier=="")&&(this.data.identifier="atcb-btn-"+wE),this.identifier=this.data.identifier}this.setAttribute("atcb-button-id",this.data.identifier);try{return this.style.visibility="visible",this.style.opacity="1",this.style.position="relative",await s1e(this.shadowRoot,this.data),!0}catch(n){return this.debug&&(console.error(n.message?n.message:n),nM(this.shadowRoot,n)),!1}}}customElements.get("add-to-calendar-button")||customElements.define("add-to-calendar-button",e)}async function nB(e,t=!1){let n;try{n=iY(e),await V8(n)}catch{const l=e.innerHTML.trim();if(!l)throw new Error("Add to Calendar Button generation failed: No data provided.");try{const d=JSON.parse(ax(l.replace(/(\r\n|\n|\r)/g,""),!1));await V8(d),n=d}catch(d){throw t&&console.error(d),new Error("Add to Calendar Button generation failed: no data provided or missing required fields - see console logs for details")}}return n}function iY(e,t=HW){let n={};for(let r=0;r<t.length;r++){let l=t[`${r}`];if(e.hasAttribute(`${l}`)){let d=ax(e.getAttribute(`${l}`).replace(/(\\r\\n|\\n|\\r)/g,""),!1),f;if(l5.includes(l))f=!d||d===""||d.toLowerCase()==="true";else if(a_e.includes(l))f=JSON.parse(d);else if(s_e.includes(l)){const y=function(){return d.substring(0,1)!="["?"["+d+"]":d}();f=JSON.parse(y)}else if(l_e.includes(l)){const y=function(){let a=d;return(d.includes('"')||d.includes("'"))&&(d.includes("[")?a=d.substring(2,d.length-2):a=d.substring(1,d.length-1)),d.includes("|")||(a=a.replace(/\s/g,"")),a}();y.includes("','")?f=y.split("','"):f=y.split('","')}else c_e.includes(l)?f=parseInt(d):f=d;if(typeof f=="object"&&Object.keys(f).length===0||Array.isArray(f)&&(f.length===0||f.length===1&&f[0]===""))continue;n[`${l}`]=f}}return n}async function s1e(e,t){try{t=await WW(t),await E_e(t);const n=e.querySelector(".atcb-initialized");return c4(e,t),n.setAttribute("lang",t.language),sY(e,n,t),l1e(t),u1e(e,t),c1e(t.proKey,t.debug),t.hidden||(typeof Mh=="function"&&t.rsvp&&Object.keys(t.rsvp).length>0?t.inlineRsvp?await Mh(e,t,n):await j_e(e,t):QW(e,n,t),!t.hideRichData&&!t.subscribe&&t.name&&t.dates[0].location&&t.dates[0].startDate&&W_e(t,e.host)),_a("initialization",t.identifier,t.identifier),!0}catch(n){throw new Error(n.message)}}function rB(e,t){y1(e),p1e(t);const n=document.getElementById("atcb-schema-"+t);n&&n.remove(),Array.from(e.querySelectorAll(".atcb-debug-error-msg")).concat(Array.from(e.querySelectorAll("style"))).concat(Array.from(e.querySelectorAll("link"))).concat(Array.from(e.querySelectorAll(".atcb-placeholder"))).concat(Array.from(e.querySelectorAll(".atcb-button-wrapper"))).forEach(r=>r.remove()),delete gi[`${t}`]}function c4(e,t){e.host.classList.remove("atcb-dark","atcb-light","atcb-bodyScheme");const n=function(){return t.lightMode=="bodyScheme"?document.body.classList.contains("atcb-dark")||document.documentElement.classList.contains("atcb-dark")||document.body.classList.contains("atcp-dark")||document.documentElement.classList.contains("atcp-dark")||document.body.classList.contains("dark")||document.documentElement.classList.contains("dark")?"dark":"light":t.lightMode}();e.host.classList.add("atcb-"+n)}function aY(e){const t=/[`'"()[\]{}<>\s]/;if(!e.host.hasAttribute("cspnonce"))return null;if(t.test(e.host.getAttribute("cspnonce")))throw new Error("cspnonce input contains forbidden characters.");return e.host.getAttribute("cspnonce")}async function sY(e,t=null,n){const r=aY(e);if(!document.getElementById("atcb-global-style")){const a=document.createElement("style");a.id="atcb-global-style";const E=window.innerWidth-document.documentElement.clientWidth;a.innerText=".atcb-modal-no-scroll{overflow-y:hidden !important;-webkit-overflow-scrolling:touch;} body.atcb-modal-no-scroll{padding-right:"+E+"px;}",r&&a.setAttribute("nonce",r),document.head.append(a)}const l=document.createElement("style"),d=n.inlineRsvp&&n.rsvp&&Object.keys(n.rsvp).length>0?"100%":"fit-content";l.innerText=`.atcb-initialized { display: block; position: relative; width: ${d}; }.atcb-initialized.atcb-inline { display: inline-block; }.atcb-initialized.atcb-buttons-list { display: flex; flex-wrap: wrap; justify-content: center; gap: var(--buttonslist-gap); }.atcb-hidden { display: none; }`,r&&l.setAttribute("nonce",r),e.prepend(l);const f=function(){return n.styleLight?":host{"+ax(n.styleLight.replace(/(\\r\\n|\\n|\\r)/g,""),!1)+"}":""}(),y=function(){return n.styleDark?":host(.atcb-dark){"+ax(n.styleDark.replace(/(\\r\\n|\\n|\\r)/g,""),!1)+"}":""}();if(n.customCss&&n.customCss!==""){const a=document.createElement("link");if(a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("href",n.customCss),r&&a.setAttribute("nonce",r),!t)await oB(a,e,null,r,null,!1,!1,f+y);else{const E=document.createElement("div");E.classList.add("atcb-placeholder"),e.prepend(E);const C=document.createElement("style");C.innerText=".atcb-placeholder { background-color: #777; border-radius: 200px; height: 40px; opacity: .3; width: 150px; }",r&&C.setAttribute("nonce",r),e.prepend(C),oB(a,e,t,r,E,n.inline,n.buttonsList,f+y)}return}if(n.buttonStyle!=="none"&&$8[`${n.buttonStyle}`]){const a=document.createElement("style");r&&a.setAttribute("nonce",r),a.innerText=$8[`${n.buttonStyle}`]+f+y,e.prepend(a)}t&&(n.inline?(t.style.display="inline-block",t.classList.add("atcb-inline")):n.buttonsList&&t.classList.add("atcb-buttons-list"),t.classList.remove("atcb-hidden"))}async function oB(e,t,n=null,r=null,l=null,d=!1,f=!1,y=""){if(y!==""){const a=document.createElement("style");a.innerText=y,r&&a.setAttribute("nonce",r),t.prepend(a)}try{t.prepend(e),await new Promise(a=>{e.onload=a}),n&&(l&&l.remove(),d?(n.style.display="inline-block",n.classList.add("atcb-inline")):f&&n.classList.add("atcb-buttons-list"),n.classList.remove("atcb-hidden"))}catch(a){console.log(a)}}function nM(e,t){if(e.querySelector(".atcb-debug-error-msg"))return;const n=aY(e),r=document.createElement("div");r.classList.add("atcb-debug-error-msg");const l=document.createElement("style");l.innerText=".atcb-debug-error-msg { color: #bf2e2e; font-size: 12px; font-weight: bold; padding: 12px 15px; border: 2px solid #bf2e2e; max-width: 180px; border-radius: 13px; }",n&&l.setAttribute("nonce",n),e.prepend(l),r.textContent=t,e.append(r)}function l1e(e){const t=[];for(let n=0;n<e.options.length;n++){t[e.options[`${n}`]]=[];for(let r=1;r<=e.dates.length;r++)e.dates[r-1].status.toLowerCase()==="cancelled"?t[e.options[`${n}`]].push(1):t[e.options[`${n}`]].push(0)}gi[e.identifier]=t}function c1e(e="",t=!1){if(!u5){const n=function(){return t?" (version "+VW+")":""}();e!=""?console.log("Add to Calendar PRO script initialized"+n+" | https://add-to-calendar-pro.com"):(console.log(`%c
Add to Calendar Button script initialized`+n+`
see https://add-to-calendar-button.com for details.
`,"font-weight: bold;"),console.log("✨ %cPRO version available at https://add-to-calendar-pro.com ← check it out!","font-weight: bold; line-height: 60px;")),u5=!0}}async function EE(e,t=null,n={}){/*!
 *  @preserve
 *  PER LICENSE AGREEMENT, YOU ARE NOT ALLOWED TO REMOVE OR CHANGE THIS FUNCTION!
 */if(e&&e!=="")try{const r=t?iY(t,s5):n,l=await fetch((r.dev?"https://event-dev.caldn.net/":"https://event.caldn.net/")+e+"/config.json");if(l.ok){const d=await l.json();if(!d.name||d.name==="")throw new Error("Not possible to read proKey config from server...");return s5.forEach(f=>{Object.prototype.hasOwnProperty.call(r,f)&&(d[`${f}`]=r[`${f}`])}),d.proKey=e,d.identifier=e,d}throw new Error("Not possible to read proKey config from server...")}catch{console.error("Add to Calendar Button proKey invalid or server not responding! Falling back to local data...")}return{}}function u1e(e,t){cf()&&(t.lightMode=="bodyScheme"&&(b1[t.identifier]=new MutationObserver(function(n){n.forEach(r=>{r.attributeName==="class"&&c4(e,t)})}),b1[t.identifier].observe(document.documentElement,{attributes:!0}),b1[t.identifier].observe(document.body,{attributes:!0})),u5||(document.addEventListener("keyup",d1e),document.addEventListener("keydown",h1e),window.addEventListener("resize",f1e)))}function d1e(e){const t=function(){const n=document.querySelector('[atcb-button-id="'+gi.active+'"]');return n?n.shadowRoot:null}();t&&e.key==="Escape"&&(_a("closeList","Ecs Hit",gi.active),os(t,"close","","",!0))}function h1e(e){const t=function(){const n=document.querySelector('[atcb-button-id="'+gi.active+'"]'),r=document.getElementById(gi.active+"-modal-host");return r?r.shadowRoot:n?n.shadowRoot:null}();if(t&&t.querySelector(".atcb-list")&&(e.key==="ArrowDown"||e.key==="ArrowUp"||e.key==="Tab")){e.preventDefault();let n=0,r=t.activeElement;const l=t.querySelectorAll(".atcb-list-item").length;if(r&&r.classList.contains("atcb-list-item"))e.key==="ArrowDown"&&r.dataset.optionNumber<l?n=parseInt(r.dataset.optionNumber)+1:e.key==="Tab"?r.dataset.optionNumber<l?n=parseInt(r.dataset.optionNumber)+1:n=1:e.key==="ArrowUp"&&r.dataset.optionNumber>=1&&(n=parseInt(r.dataset.optionNumber)-1),n>0&&t.querySelector('.atcb-list-item[data-option-number="'+n+'"]').focus();else switch(e.key){default:t.querySelector('.atcb-list-item[data-option-number="1"]').focus();break;case"ArrowUp":t.querySelector('.atcb-list-item[data-option-number="'+l+'"]').focus();break}}}function f1e(){const e=function(){const t=document.querySelector('[atcb-button-id="'+gi.active+'"]'),n=document.getElementById(gi.active+"-modal-host");return n?n.shadowRoot:t?t.shadowRoot:null}();if(e){const t=e.querySelector("#atcb-bgoverlay");t&&(y0(t),l4(e))}}function p1e(e){typeof b1[`${e}`]<"u"&&b1[`${e}`].disconnect()}function u4({description:e,title:t,startTime:n,startDate:r,endTime:l,endDate:d,time_zone:f,event_type:y,virtual_event_link:a,event_venue:E,event_venue_address:C,categoryName:M,num_users_attending:P,attendees_needed:N,volunteer_spots_remaining:F,volunteer_roles:$,hosts:Z,lat:q,lon:K,event_photo:Q,id:te}){const ie={cardCSS:{maxWidth:"1000px",margin:"24px"},header:{fontFamily:"Playfair Display, serif",fontOpticalSizing:"auto",fontStyle:"normal",fontWeight:"bold",color:"#6840DF",marginTop:"15px",marginBottom:"15px"},body:{fontFamily:"Poppins, sans-serif",fontWeight:"400",fontStyle:"normal"},subheader:{fontFamily:"Poppins, sans-serif",fontWeight:"400",fontStyle:"normal"},icon:{width:"80vw",maxWidth:"300px",margin:"0 auto",paddingTop:"20px",display:"block"},image:{width:"100%",maxHeight:"500px"}},[ue,re]=j.useState(null);j.useEffect(()=>{if(!ue){let je=Z.map(Be=>Be.display_name);re(je.join(", "))}},[]);function me(){return P===0?"No attendees at this time.":P===1?`${P} mate is currently attending this event.`:`${P} other mates are attending this event.`}function ve(){return F===0?"All volunteer spots filled are filled for this event!":F===1?`${F} volunteer role is still waiting to be filled for this event.`:`${F} volunteer roles are still waiting to be filled for this event.`}const De=Q?ie.image:ie.icon;return O.jsxs(io,{style:ie.cardCSS,sm:8,border:"light",className:"mt-4",children:[O.jsx(io.Img,{className:"",variant:"top",src:Q||FW,style:De,alt:`${t}'s event_photo`}),O.jsxs(io.Body,{children:[O.jsx(io.Title,{as:"h1",style:ie.header,className:"text-center",children:t}),O.jsxs(io.Subtitle,{as:"h5",style:ie.subheader,className:"text-center mt-2",children:[O.jsx("span",{style:{fontStyle:"normal",fontWeight:"bold"},children:"Hosted by:"})," ",ue]}),O.jsxs(cu,{variant:"flush",children:[O.jsx(cu.Item,{}),O.jsx(cu.Item,{className:"text-center",style:{paddingBottom:"10px"},children:e}),O.jsx("br",{}),O.jsxs(cu.Item,{className:"mb-2",children:[O.jsx("strong",{children:" Event Details: "}),O.jsx(cu.Item,{className:"mt-2",children:r===d?O.jsxs(O.Fragment,{children:[O.jsx(j8,{})," ",r]}):O.jsxs(O.Fragment,{children:[O.jsx(j8,{})," ",r," - ",d," "]})}),O.jsxs(cu.Item,{children:[O.jsx(Wve,{}),` ${n} - ${l}`," ",f]}),O.jsx(cu.Item,{children:E?O.jsxs(O.Fragment,{children:[O.jsx(Yve,{})," ",y]}):O.jsxs(O.Fragment,{children:[O.jsx(Gve,{})," ",y]})}),a?O.jsxs(cu.Item,{children:[O.jsx(qve,{})," ",O.jsxs("a",{href:a,style:{fontSize:"14px"},children:[" ",a," "]})]}):O.jsxs(O.Fragment,{children:[O.jsxs(cu.Item,{children:[O.jsx(Zve,{})," ",E]}),O.jsxs(cu.Item,{children:[O.jsx(Kve,{}),O.jsxs(va,{to:`https://www.google.com/maps?q=${q},${K}`,target:"_blank",rel:"noopener noreferrer",children:[" ",C]})]})]})]}),O.jsxs(cu.Item,{className:"mb-2",children:[O.jsx("strong",{children:" Event Activity: "}),O.jsxs("ul",{children:[O.jsx("li",{children:N?O.jsx(io.Text,{children:me()}):null}),O.jsx("li",{children:$?null:O.jsx(io.Text,{children:ve()})})]})]})]})]}),O.jsxs(io.Footer,{className:"text-center",children:["Add to Calendar:",O.jsx("br",{}),O.jsx(Xve,{eventID:te})]})]})}function m1e({show:e,handleClose:t,eventDetails:n}){const[r,l]=j.useState(""),[d,f]=j.useState(""),[y,a]=j.useState(""),[E,C]=j.useState(""),[M,P]=j.useState("no"),[N,F]=j.useState(""),[$,Z]=j.useState(""),[q,K]=j.useState([]),[Q,te]=j.useState([]),{user:ie,userProfileData:ue}=Eu();console.log("userProfileData",ue.id);const re=async()=>{te(n.volunteer_roles)};j.useEffect(()=>{f(ie.user)},[ie]),j.useEffect(()=>{re()},[n]);function me(){P(M==="no"?"yes":"no")}const ve=async()=>{try{for(const je of q)await Ove(je,{email:d,phone_number:y,availability:E,return_volunteer:M,volunteer_interest:N,volunteer_experience:$,volunteer_role:je});alert("Your application has been submitted!"),window.location.reload()}catch(je){console.log("Failed application submission",je)}};function De(je){q.includes(je)?K(q.filter(Be=>Be!==je)):K([...q,je])}return O.jsx(O.Fragment,{children:O.jsxs(Ph,{show:e,onHide:t,centered:!0,children:[O.jsx(Ph.Header,{closeButton:!0,children:O.jsx(Ph.Title,{children:"Volunteer Application"})}),O.jsx(Ph.Body,{style:{overflowY:"scroll",maxHeight:"70vh"},children:O.jsxs(Sn,{children:[O.jsxs(Sn.Group,{className:"mb-3",children:[O.jsx(Sn.Label,{children:"Name"}),O.jsx(Sn.Control,{type:"text",placeholder:"Name",value:r,onChange:je=>l(je.target.value)})]}),O.jsxs(Sn.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[O.jsx(Sn.Label,{children:"Email address"}),O.jsx(Sn.Control,{type:"email",placeholder:"123@email.com",autoFocus:!0,value:d,onChange:je=>f(je.target.value)})]}),O.jsxs(Sn.Group,{className:"mb-3",children:[O.jsx(Sn.Label,{children:"Phone number"}),O.jsx(Sn.Control,{type:"text",placeholder:"111-222-3333",value:y,onChange:je=>a(je.target.value)})]}),O.jsxs(Sn.Group,{className:"mb-3",children:[O.jsx(Sn.Label,{children:"Best time to contact"}),O.jsx(Sn.Control,{type:"text",placeholder:"'evenings', '8-10 AM', etc.",value:E,onChange:je=>C(je.target.value)})]}),O.jsxs(Sn.Group,{className:"mb-3",children:[O.jsxs(Sn.Label,{children:["Have you previously volunteered with this organization/person?"," "]}),O.jsx(Sn.Check,{inline:!0,label:"yes",type:"radio",checked:M==="yes",onClick:me}),O.jsx(Sn.Check,{inline:!0,label:"no",type:"radio",onClick:me,checked:M==="no"})]}),Q.length!==0&&O.jsxs(Sn.Group,{className:"mb-3",children:[O.jsx(Sn.Label,{children:"Select roles you would be interested in"}),O.jsx("br",{}),Q.map((je,Be)=>O.jsx(O.Fragment,{children:O.jsx(Sn.Check,{inline:!0,label:je.role,type:"checkbox",onClick:Ue=>{De(je.id)}},Be)}))]}),O.jsxs(Sn.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[O.jsxs(Sn.Label,{children:["Why would you like to volunteer for this event?"," "]}),O.jsx(Sn.Control,{as:"textarea",rows:3,value:N,onChange:je=>F(je.target.value)})]}),O.jsxs(Sn.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[O.jsx(Sn.Label,{children:"What skills or experience do you have? "}),O.jsx(Sn.Control,{as:"textarea",rows:3,value:$,onChange:je=>Z(je.target.value)})]})]})}),O.jsxs(Ph.Footer,{children:[O.jsx(Ts,{variant:"secondary",onClick:t,children:"Close"}),O.jsx(Ts,{variant:"primary",onClick:ve,children:"Submit"})]})]})})}function g1e(e){return hm({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6"},child:[]},{tag:"path",attr:{d:"M11 13l9 -9"},child:[]},{tag:"path",attr:{d:"M15 4h5v5"},child:[]}]})(e)}Al.accessToken="pk.eyJ1IjoiY3J5c3RhbGpvYmUiLCJhIjoiY2x2Y3VkMzFxMG13ZzJrcGY5dDB0bGJvYyJ9.PV_ZgI2EhyhNfcRHmp2OPw";function y1e({lat:e,lng:t}){const n=j.useRef(null),r=j.useRef(null);return j.useEffect(()=>{r.current||(r.current=new Al.Map({container:n.current,style:"mapbox://styles/mapbox/streets-v12",center:[t,e],zoom:12}),typeof t=="number"&&typeof e=="number"?new Al.Marker().setLngLat([t,e]).addTo(r.current):console.error("Invalid coordinates:",t,e),r.current.addControl(new Al.NavigationControl,"top-right"))},[]),O.jsxs(O.Fragment,{children:[O.jsx("div",{ref:n,className:"static-map-container"}),O.jsxs(va,{to:`https://www.google.com/maps?q=${e},${t}`,target:"_blank",rel:"noopener noreferrer",style:{fontSize:"18px"},children:[O.jsx(g1e,{}),"Directions"]})]})}function b1e(){let{eventID:e}=cm();const{userProfileData:t}=Eu(),[n,r]=j.useState({}),[l,d]=j.useState(!0);j.useEffect(()=>{async function N(){try{const F=await zW(e);r(F)}catch(F){console.error(F)}}N()},[e]),j.useEffect(()=>{if(t.events_attending&&n.id){const N=t.events_attending.some(F=>F.id===n.id);d(!N)}},[t.events_attending,n,e]);const f=async()=>{console.log("put:",l);const N=await wve(e,l);d(!l),N&&console.log("user rsvp")},[y,a]=j.useState(!1),E=()=>a(!1),C=()=>a(!0);function M(){if(n.attendees_needed&&n.volunteer_roles.length>0)return"This event needs attendees and volunteers, how would you like to participate?";if(n.attendees_needed&&n.volunteer_roles.length<1)return"Let the hosts know you'll be attending this event by clicking the button below!";if(!n.attendees_needed&&n.volunteer_roles.length>0)return"This event needs volunteers, to fill out the volunteer form click the button below!"}const P=()=>n.attendees_needed&&l&&n.hosts&&n.volunteer_roles.length>0?O.jsxs(mb,{title:"Count me in!",id:"dropdown-basic-button",children:[O.jsx(aa.Item,{as:"button",className:"text-center dropdown-hover",onClick:f,children:"Attend"}),O.jsx(aa.Divider,{}),O.jsx(aa.Item,{as:"button",className:"text-center dropdown-hover",onClick:C,children:"Volunteer"})]}):n.attendees_needed&&l?O.jsx(mb,{title:"Count me in!",id:"dropdown-basic-button",children:O.jsx(aa.Item,{as:"button",className:"text-center dropdown-hover",onClick:f,children:"Attend"})}):n.hosts&&n.volunteer_roles.length>0?O.jsx(mb,{title:"Count me in!",id:"dropdown-basic-button",children:O.jsx(aa.Item,{as:"button",className:"text-center dropdown-hover",onClick:C,children:"Volunteer"})}):null;return O.jsx(Zi,{children:O.jsxs(Jr,{children:[O.jsx(Ir,{md:8,sm:12,className:"d-flex justify-content-center",children:n.hosts&&O.jsx(u4,{...n})}),O.jsxs(Ir,{md:4,sm:12,className:"text-center",children:[O.jsx("br",{}),n.lat&&O.jsx(Jr,{className:"justify-content-center mt-4",children:O.jsx(y1e,{lat:n.lat,lng:n.lon})}),O.jsx(Jr,{className:"d-flex justify-content-center",children:O.jsxs(io,{className:"mt-5",style:{width:"22rem"},children:[O.jsx(io.Header,{children:"Event Options"}),O.jsx(io.Body,{children:O.jsx(io.Text,{children:n.volunteer_roles&&M()})}),O.jsx(io.Footer,{children:n&&P()})]})}),O.jsx(Jr,{className:"d-flex justify-content-center",children:!l&&O.jsxs(io,{className:"mt-5 d-flex justify-content-center",style:{width:"22rem"},children:[O.jsx(io.Header,{children:"RSVP Options"}),O.jsxs(io.Body,{className:"d-flex justify-content-center flex-wrap",children:["Things happen, if life gets in the way you can always update your RSVP.",O.jsx(la,{onClick:f,className:"mt-2",variant:"outlined",sx:{borderColor:"primary",color:"primary",border:"1px solid","&:hover":{backgroundColor:"secondary.dark",color:"white"}},children:"Un-RSVP"})]})]})}),O.jsx(Jr,{children:n.volunteer_roles&&O.jsx("div",{className:"mt-3",children:O.jsx(m1e,{show:y,handleClose:E,eventDetails:n})})})]})]})})}function v1e(e){return Lr("MuiCollapse",e)}Ar("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const _1e=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],x1e=e=>{const{orientation:t,classes:n}=e,r={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return Or(r,v1e,n)},w1e=_n("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.state==="entered"&&t.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&t.hidden]}})(({theme:e,ownerState:t})=>Ae({height:0,overflow:"hidden",transition:e.transitions.create("height")},t.orientation==="horizontal"&&{height:"auto",width:0,transition:e.transitions.create("width")},t.state==="entered"&&Ae({height:"auto",overflow:"visible"},t.orientation==="horizontal"&&{width:"auto"}),t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&{visibility:"hidden"})),E1e=_n("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>Ae({display:"flex",width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),T1e=_n("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})(({ownerState:e})=>Ae({width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),lY=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiCollapse"}),{addEndListener:l,children:d,className:f,collapsedSize:y="0px",component:a,easing:E,in:C,onEnter:M,onEntered:P,onEntering:N,onExit:F,onExited:$,onExiting:Z,orientation:q="vertical",style:K,timeout:Q=lH.standard,TransitionComponent:te=mv}=r,ie=Tn(r,_1e),ue=Ae({},r,{orientation:q,collapsedSize:y}),re=x1e(ue),me=Id(),ve=Mp(),De=j.useRef(null),je=j.useRef(),Be=typeof y=="number"?`${y}px`:y,Ue=q==="horizontal",Ge=Ue?"width":"height",ze=j.useRef(null),ot=ti(n,ze),st=Mt=>Vn=>{if(Mt){const nt=ze.current;Vn===void 0?Mt(nt):Mt(nt,Vn)}},Re=()=>De.current?De.current[Ue?"clientWidth":"clientHeight"]:0,bt=st((Mt,Vn)=>{De.current&&Ue&&(De.current.style.position="absolute"),Mt.style[Ge]=Be,M&&M(Mt,Vn)}),Lt=st((Mt,Vn)=>{const nt=Re();De.current&&Ue&&(De.current.style.position="");const{duration:Pn,easing:Un}=Cd({style:K,timeout:Q,easing:E},{mode:"enter"});if(Q==="auto"){const En=me.transitions.getAutoHeightDuration(nt);Mt.style.transitionDuration=`${En}ms`,je.current=En}else Mt.style.transitionDuration=typeof Pn=="string"?Pn:`${Pn}ms`;Mt.style[Ge]=`${nt}px`,Mt.style.transitionTimingFunction=Un,N&&N(Mt,Vn)}),Ct=st((Mt,Vn)=>{Mt.style[Ge]="auto",P&&P(Mt,Vn)}),Nt=st(Mt=>{Mt.style[Ge]=`${Re()}px`,F&&F(Mt)}),tn=st($),Dt=st(Mt=>{const Vn=Re(),{duration:nt,easing:Pn}=Cd({style:K,timeout:Q,easing:E},{mode:"exit"});if(Q==="auto"){const Un=me.transitions.getAutoHeightDuration(Vn);Mt.style.transitionDuration=`${Un}ms`,je.current=Un}else Mt.style.transitionDuration=typeof nt=="string"?nt:`${nt}ms`;Mt.style[Ge]=Be,Mt.style.transitionTimingFunction=Pn,Z&&Z(Mt)}),cn=Mt=>{Q==="auto"&&ve.start(je.current||0,Mt),l&&l(ze.current,Mt)};return O.jsx(te,Ae({in:C,onEnter:bt,onEntered:Ct,onEntering:Lt,onExit:Nt,onExited:tn,onExiting:Dt,addEndListener:cn,nodeRef:ze,timeout:Q==="auto"?null:Q},ie,{children:(Mt,Vn)=>O.jsx(w1e,Ae({as:a,className:fn(re.root,f,{entered:re.entered,exited:!C&&Be==="0px"&&re.hidden}[Mt]),style:Ae({[Ue?"minWidth":"minHeight"]:Be},K),ref:ot},Vn,{ownerState:Ae({},ue,{state:Mt}),children:O.jsx(E1e,{ownerState:Ae({},ue,{state:Mt}),className:re.wrapper,ref:De,children:O.jsx(T1e,{ownerState:Ae({},ue,{state:Mt}),className:re.wrapperInner,children:d})})}))}))});lY.muiSupportAuto=!0;const S1e=lY,cY=j.createContext({});function C1e(e){return Lr("MuiAccordion",e)}const k1e=Ar("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),TE=k1e,A1e=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],M1e=lk(),D1e=e=>{const{classes:t,square:n,expanded:r,disabled:l,disableGutters:d}=e;return Or({root:["root",!n&&"rounded",r&&"expanded",l&&"disabled",!d&&"gutters"],region:["region"]},C1e,t)},R1e=_n(A0,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${TE.region}`]:t.region},t.root,!n.square&&t.rounded,!n.disableGutters&&t.gutters]}})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${TE.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${TE.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}},({theme:e})=>({variants:[{props:t=>!t.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:t=>!t.disableGutters,style:{[`&.${TE.expanded}`]:{margin:"16px 0"}}}]})),I1e=j.forwardRef(function(t,n){const r=M1e({props:t,name:"MuiAccordion"}),{children:l,className:d,defaultExpanded:f=!1,disabled:y=!1,disableGutters:a=!1,expanded:E,onChange:C,square:M=!1,slots:P={},slotProps:N={},TransitionComponent:F,TransitionProps:$}=r,Z=Tn(r,A1e),[q,K]=Gb({controlled:E,default:f,name:"Accordion",state:"expanded"}),Q=j.useCallback(Ue=>{K(!q),C&&C(Ue,!q)},[q,C,K]),[te,...ie]=j.Children.toArray(l),ue=j.useMemo(()=>({expanded:q,disabled:y,disableGutters:a,toggle:Q}),[q,y,a,Q]),re=Ae({},r,{square:M,disabled:y,disableGutters:a,expanded:q}),me=D1e(re),ve=Ae({transition:F},P),De=Ae({transition:$},N),[je,Be]=bH("transition",{elementType:S1e,externalForwardedProps:{slots:ve,slotProps:De},ownerState:re});return O.jsxs(R1e,Ae({className:fn(me.root,d),ref:n,ownerState:re,square:M},Z,{children:[O.jsx(cY.Provider,{value:ue,children:te}),O.jsx(je,Ae({in:q,timeout:"auto"},Be,{children:O.jsx("div",{"aria-labelledby":te.props.id,id:te.props["aria-controls"],role:"region",className:me.region,children:ie})}))]}))}),v1=I1e;function P1e(e){return Lr("MuiAccordionDetails",e)}Ar("MuiAccordionDetails",["root"]);const O1e=["className"],L1e=lk(),N1e=e=>{const{classes:t}=e;return Or({root:["root"]},P1e,t)},z1e=_n("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({padding:e.spacing(1,2,2)})),B1e=j.forwardRef(function(t,n){const r=L1e({props:t,name:"MuiAccordionDetails"}),{className:l}=r,d=Tn(r,O1e),f=r,y=N1e(f);return O.jsx(z1e,Ae({className:fn(y.root,l),ref:n,ownerState:f},d))}),_1=B1e;function F1e(e){return Lr("MuiAccordionSummary",e)}const j1e=Ar("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),sb=j1e,$1e=["children","className","expandIcon","focusVisibleClassName","onClick"],U1e=lk(),V1e=e=>{const{classes:t,expanded:n,disabled:r,disableGutters:l}=e;return Or({root:["root",n&&"expanded",r&&"disabled",!l&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!l&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]},F1e,t)},H1e=_n(_v,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${sb.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${sb.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${sb.disabled})`]:{cursor:"pointer"},variants:[{props:n=>!n.disableGutters,style:{[`&.${sb.expanded}`]:{minHeight:64}}}]}}),W1e=_n("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:t=>!t.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${sb.expanded}`]:{margin:"20px 0"}}}]})),Y1e=_n("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${sb.expanded}`]:{transform:"rotate(180deg)"}})),G1e=j.forwardRef(function(t,n){const r=U1e({props:t,name:"MuiAccordionSummary"}),{children:l,className:d,expandIcon:f,focusVisibleClassName:y,onClick:a}=r,E=Tn(r,$1e),{disabled:C=!1,disableGutters:M,expanded:P,toggle:N}=j.useContext(cY),F=q=>{N&&N(q),a&&a(q)},$=Ae({},r,{expanded:P,disabled:C,disableGutters:M}),Z=V1e($);return O.jsxs(H1e,Ae({focusRipple:!1,disableRipple:!0,disabled:C,component:"div","aria-expanded":P,className:fn(Z.root,d),focusVisibleClassName:fn(Z.focusVisible,y),onClick:F,ref:n,ownerState:$},E,{children:[O.jsx(W1e,{className:Z.content,ownerState:$,children:l}),f&&O.jsx(Y1e,{className:Z.expandIconWrapper,ownerState:$,children:f})]}))}),x1=G1e;function q1e(e){return Lr("MuiIconButton",e)}const Z1e=Ar("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),K1e=["edge","children","className","color","disabled","disableFocusRipple","size"],X1e=e=>{const{classes:t,disabled:n,color:r,edge:l,size:d}=e,f={root:["root",n&&"disabled",r!=="default"&&`color${Yn(r)}`,l&&`edge${Yn(l)}`,`size${Yn(d)}`]};return Or(f,q1e,t)},Q1e=_n(_v,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${Yn(n.color)}`],n.edge&&t[`edge${Yn(n.edge)}`],t[`size${Yn(n.size)}`]]}})(({theme:e,ownerState:t})=>Ae({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:da(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var n;const r=(n=(e.vars||e).palette)==null?void 0:n[t.color];return Ae({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&Ae({color:r?.main},!t.disableRipple&&{"&:hover":Ae({},r&&{backgroundColor:e.vars?`rgba(${r.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:da(r.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${Z1e.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),J1e=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiIconButton"}),{edge:l=!1,children:d,className:f,color:y="default",disabled:a=!1,disableFocusRipple:E=!1,size:C="medium"}=r,M=Tn(r,K1e),P=Ae({},r,{edge:l,color:y,disabled:a,disableFocusRipple:E,size:C}),N=X1e(P);return O.jsx(Q1e,Ae({className:fn(N.root,f),centerRipple:!0,focusRipple:!E,disabled:a,ref:n},M,{ownerState:P,children:d}))}),as=J1e;var d4={};Object.defineProperty(d4,"__esModule",{value:!0});var uY=d4.default=void 0,exe=nxe(j),txe=qV;function dY(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(dY=function(r){return r?n:t})(e)}function nxe(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=dY(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if(d!=="default"&&Object.prototype.hasOwnProperty.call(e,d)){var f=l?Object.getOwnPropertyDescriptor(e,d):null;f&&(f.get||f.set)?Object.defineProperty(r,d,f):r[d]=e[d]}return r.default=e,n&&n.set(e,r),r}function rxe(e){return Object.keys(e).length===0}function oxe(e=null){const t=exe.useContext(txe.ThemeContext);return!t||rxe(t)?e:t}uY=d4.default=oxe;const ixe=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],axe=_n(Ipe,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),sxe=j.forwardRef(function(t,n){var r;const l=uY(),d=Hr({props:t,name:"MuiPopper"}),{anchorEl:f,component:y,components:a,componentsProps:E,container:C,disablePortal:M,keepMounted:P,modifiers:N,open:F,placement:$,popperOptions:Z,popperRef:q,transition:K,slots:Q,slotProps:te}=d,ie=Tn(d,ixe),ue=(r=Q?.root)!=null?r:a?.Root,re=Ae({anchorEl:f,container:C,disablePortal:M,keepMounted:P,modifiers:N,open:F,placement:$,popperOptions:Z,popperRef:q,transition:K},ie);return O.jsx(axe,Ae({as:y,direction:l?.direction,slots:{root:ue},slotProps:te??E},re,{ref:n}))}),hY=sxe;function lxe(e){return Lr("MuiCard",e)}Ar("MuiCard",["root"]);const cxe=["className","raised"],uxe=e=>{const{classes:t}=e;return Or({root:["root"]},lxe,t)},dxe=_n(A0,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),hxe=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiCard"}),{className:l,raised:d=!1}=r,f=Tn(r,cxe),y=Ae({},r,{raised:d}),a=uxe(y);return O.jsx(dxe,Ae({className:fn(a.root,l),elevation:d?8:void 0,ref:n,ownerState:y},f))}),fY=hxe;function fxe(e){return Lr("MuiCardContent",e)}Ar("MuiCardContent",["root"]);const pxe=["className","component"],mxe=e=>{const{classes:t}=e;return Or({root:["root"]},fxe,t)},gxe=_n("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),yxe=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiCardContent"}),{className:l,component:d="div"}=r,f=Tn(r,pxe),y=Ae({},r,{component:d}),a=mxe(y);return O.jsx(gxe,Ae({as:d,className:fn(a.root,l),ownerState:y,ref:n},f))}),bxe=yxe;function vxe(e){return Lr("MuiDialog",e)}const _xe=Ar("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),rM=_xe,xxe=j.createContext({}),pY=xxe,wxe=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],Exe=_n(VH,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),Txe=e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:l,fullScreen:d}=e,f={root:["root"],container:["container",`scroll${Yn(n)}`],paper:["paper",`paperScroll${Yn(n)}`,`paperWidth${Yn(String(r))}`,l&&"paperFullWidth",d&&"paperFullScreen"]};return Or(f,vxe,t)},Sxe=_n(wv,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),Cxe=_n("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${Yn(n.scroll)}`]]}})(({ownerState:e})=>Ae({height:"100%","@media print":{height:"auto"},outline:0},e.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},e.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),kxe=_n(A0,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${Yn(n.scroll)}`],t[`paperWidth${Yn(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})(({theme:e,ownerState:t})=>Ae({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},t.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},t.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},t.maxWidth==="xs"&&{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${rM.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.maxWidth&&t.maxWidth!=="xs"&&{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`,[`&.${rM.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${rM.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),Axe=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiDialog"}),l=Id(),d={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{"aria-describedby":f,"aria-labelledby":y,BackdropComponent:a,BackdropProps:E,children:C,className:M,disableEscapeKeyDown:P=!1,fullScreen:N=!1,fullWidth:F=!1,maxWidth:$="sm",onBackdropClick:Z,onClick:q,onClose:K,open:Q,PaperComponent:te=A0,PaperProps:ie={},scroll:ue="paper",TransitionComponent:re=UH,transitionDuration:me=d,TransitionProps:ve}=r,De=Tn(r,wxe),je=Ae({},r,{disableEscapeKeyDown:P,fullScreen:N,fullWidth:F,maxWidth:$,scroll:ue}),Be=Txe(je),Ue=j.useRef(),Ge=Re=>{Ue.current=Re.target===Re.currentTarget},ze=Re=>{q&&q(Re),Ue.current&&(Ue.current=null,Z&&Z(Re),K&&K(Re,"backdropClick"))},ot=$x(y),st=j.useMemo(()=>({titleId:ot}),[ot]);return O.jsx(Sxe,Ae({className:fn(Be.root,M),closeAfterTransition:!0,components:{Backdrop:Exe},componentsProps:{backdrop:Ae({transitionDuration:me,as:a},E)},disableEscapeKeyDown:P,onClose:K,open:Q,ref:n,onClick:ze,ownerState:je},De,{children:O.jsx(re,Ae({appear:!0,in:Q,timeout:me,role:"presentation"},ve,{children:O.jsx(Cxe,{className:fn(Be.container),onMouseDown:Ge,ownerState:je,children:O.jsx(kxe,Ae({as:te,elevation:24,role:"dialog","aria-describedby":f,"aria-labelledby":ot},ie,{className:fn(Be.paper,ie.className),ownerState:je,children:O.jsx(pY.Provider,{value:st,children:C})}))})}))}))}),Mxe=Axe;function Dxe(e){return Lr("MuiDialogActions",e)}Ar("MuiDialogActions",["root","spacing"]);const Rxe=["className","disableSpacing"],Ixe=e=>{const{classes:t,disableSpacing:n}=e;return Or({root:["root",!n&&"spacing"]},Dxe,t)},Pxe=_n("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})(({ownerState:e})=>Ae({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),Oxe=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiDialogActions"}),{className:l,disableSpacing:d=!1}=r,f=Tn(r,Rxe),y=Ae({},r,{disableSpacing:d}),a=Ixe(y);return O.jsx(Pxe,Ae({className:fn(a.root,l),ownerState:y,ref:n},f))}),Lxe=Oxe;function Nxe(e){return Lr("MuiDialogTitle",e)}Ar("MuiDialogTitle",["root"]);const zxe=["className","id"],Bxe=e=>{const{classes:t}=e;return Or({root:["root"]},Nxe,t)},Fxe=_n(sa,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),jxe=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiDialogTitle"}),{className:l,id:d}=r,f=Tn(r,zxe),y=r,a=Bxe(y),{titleId:E=d}=j.useContext(pY);return O.jsx(Fxe,Ae({component:"h2",className:fn(a.root,l),ownerState:y,ref:n,variant:"h6",id:d??E},f))}),$xe=jxe;function Uxe(e){return Lr("MuiDivider",e)}const Vxe=Ar("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),iB=Vxe,Hxe=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],Wxe=e=>{const{absolute:t,children:n,classes:r,flexItem:l,light:d,orientation:f,textAlign:y,variant:a}=e;return Or({root:["root",t&&"absolute",a,d&&"light",f==="vertical"&&"vertical",l&&"flexItem",n&&"withChildren",n&&f==="vertical"&&"withChildrenVertical",y==="right"&&f!=="vertical"&&"textAlignRight",y==="left"&&f!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",f==="vertical"&&"wrapperVertical"]},Uxe,r)},Yxe=_n("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,n.orientation==="vertical"&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&n.orientation==="vertical"&&t.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&t.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&t.textAlignLeft]}})(({theme:e,ownerState:t})=>Ae({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:da(e.palette.divider,.08)},t.variant==="inset"&&{marginLeft:72},t.variant==="middle"&&t.orientation==="horizontal"&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},t.variant==="middle"&&t.orientation==="vertical"&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},t.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"}),({ownerState:e})=>Ae({},e.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}}),({theme:e,ownerState:t})=>Ae({},t.children&&t.orientation!=="vertical"&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`}}),({theme:e,ownerState:t})=>Ae({},t.children&&t.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`}}),({ownerState:e})=>Ae({},e.textAlign==="right"&&e.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},e.textAlign==="left"&&e.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),Gxe=_n("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,n.orientation==="vertical"&&t.wrapperVertical]}})(({theme:e,ownerState:t})=>Ae({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},t.orientation==="vertical"&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`})),mY=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiDivider"}),{absolute:l=!1,children:d,className:f,component:y=d?"div":"hr",flexItem:a=!1,light:E=!1,orientation:C="horizontal",role:M=y!=="hr"?"separator":void 0,textAlign:P="center",variant:N="fullWidth"}=r,F=Tn(r,Hxe),$=Ae({},r,{absolute:l,component:y,flexItem:a,light:E,orientation:C,role:M,textAlign:P,variant:N}),Z=Wxe($);return O.jsx(Yxe,Ae({as:y,className:fn(Z.root,f),role:M,ref:n,ownerState:$},F,{children:d?O.jsx(Gxe,{className:Z.wrapper,ownerState:$,children:d}):null}))});mY.muiSkipListHighlight=!0;const qxe=mY,Zxe=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Kxe(e,t,n){const r=t.getBoundingClientRect(),l=n&&n.getBoundingClientRect(),d=Td(t);let f;if(t.fakeTransform)f=t.fakeTransform;else{const E=d.getComputedStyle(t);f=E.getPropertyValue("-webkit-transform")||E.getPropertyValue("transform")}let y=0,a=0;if(f&&f!=="none"&&typeof f=="string"){const E=f.split("(")[1].split(")")[0].split(",");y=parseInt(E[4],10),a=parseInt(E[5],10)}return e==="left"?l?`translateX(${l.right+y-r.left}px)`:`translateX(${d.innerWidth+y-r.left}px)`:e==="right"?l?`translateX(-${r.right-l.left-y}px)`:`translateX(-${r.left+r.width-y}px)`:e==="up"?l?`translateY(${l.bottom+a-r.top}px)`:`translateY(${d.innerHeight+a-r.top}px)`:l?`translateY(-${r.top-l.top+r.height-a}px)`:`translateY(-${r.top+r.height-a}px)`}function Xxe(e){return typeof e=="function"?e():e}function SE(e,t,n){const r=Xxe(n),l=Kxe(e,t,r);l&&(t.style.webkitTransform=l,t.style.transform=l)}const Qxe=j.forwardRef(function(t,n){const r=Id(),l={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},d={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:f,appear:y=!0,children:a,container:E,direction:C="down",easing:M=l,in:P,onEnter:N,onEntered:F,onEntering:$,onExit:Z,onExited:q,onExiting:K,style:Q,timeout:te=d,TransitionComponent:ie=mv}=t,ue=Tn(t,Zxe),re=j.useRef(null),me=ti(a.ref,re,n),ve=Re=>bt=>{Re&&(bt===void 0?Re(re.current):Re(re.current,bt))},De=ve((Re,bt)=>{SE(C,Re,E),yk(Re),N&&N(Re,bt)}),je=ve((Re,bt)=>{const Lt=Cd({timeout:te,style:Q,easing:M},{mode:"enter"});Re.style.webkitTransition=r.transitions.create("-webkit-transform",Ae({},Lt)),Re.style.transition=r.transitions.create("transform",Ae({},Lt)),Re.style.webkitTransform="none",Re.style.transform="none",$&&$(Re,bt)}),Be=ve(F),Ue=ve(K),Ge=ve(Re=>{const bt=Cd({timeout:te,style:Q,easing:M},{mode:"exit"});Re.style.webkitTransition=r.transitions.create("-webkit-transform",bt),Re.style.transition=r.transitions.create("transform",bt),SE(C,Re,E),Z&&Z(Re)}),ze=ve(Re=>{Re.style.webkitTransition="",Re.style.transition="",q&&q(Re)}),ot=Re=>{f&&f(re.current,Re)},st=j.useCallback(()=>{re.current&&SE(C,re.current,E)},[C,E]);return j.useEffect(()=>{if(P||C==="down"||C==="right")return;const Re=ak(()=>{re.current&&SE(C,re.current,E)}),bt=Td(re.current);return bt.addEventListener("resize",Re),()=>{Re.clear(),bt.removeEventListener("resize",Re)}},[C,P,E]),j.useEffect(()=>{P||st()},[P,st]),O.jsx(ie,Ae({nodeRef:re,onEnter:De,onEntered:Be,onEntering:je,onExit:Ge,onExited:ze,onExiting:Ue,addEndListener:ot,appear:y,in:P,timeout:te},ue,{children:(Re,bt)=>j.cloneElement(a,Ae({ref:me,style:Ae({visibility:Re==="exited"&&!P?"hidden":void 0},Q,a.props.style)},bt))}))}),Jxe=Qxe;function ewe(e){return Lr("MuiDrawer",e)}Ar("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const twe=["BackdropProps"],nwe=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],gY=(e,t)=>{const{ownerState:n}=e;return[t.root,(n.variant==="permanent"||n.variant==="persistent")&&t.docked,t.modal]},rwe=e=>{const{classes:t,anchor:n,variant:r}=e,l={root:["root"],docked:[(r==="permanent"||r==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${Yn(n)}`,r!=="temporary"&&`paperAnchorDocked${Yn(n)}`]};return Or(l,ewe,t)},owe=_n(wv,{name:"MuiDrawer",slot:"Root",overridesResolver:gY})(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer})),aB=_n("div",{shouldForwardProp:Qs,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:gY})({flex:"0 0 auto"}),iwe=_n(A0,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`paperAnchor${Yn(n.anchor)}`],n.variant!=="temporary"&&t[`paperAnchorDocked${Yn(n.anchor)}`]]}})(({theme:e,ownerState:t})=>Ae({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},t.anchor==="left"&&{left:0},t.anchor==="top"&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},t.anchor==="right"&&{right:0},t.anchor==="bottom"&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},t.anchor==="left"&&t.variant!=="temporary"&&{borderRight:`1px solid ${(e.vars||e).palette.divider}`},t.anchor==="top"&&t.variant!=="temporary"&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`},t.anchor==="right"&&t.variant!=="temporary"&&{borderLeft:`1px solid ${(e.vars||e).palette.divider}`},t.anchor==="bottom"&&t.variant!=="temporary"&&{borderTop:`1px solid ${(e.vars||e).palette.divider}`})),yY={left:"right",right:"left",top:"down",bottom:"up"};function awe(e){return["left","right"].indexOf(e)!==-1}function swe({direction:e},t){return e==="rtl"&&awe(t)?yY[t]:t}const lwe=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiDrawer"}),l=Id(),d=jI(),f={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{anchor:y="left",BackdropProps:a,children:E,className:C,elevation:M=16,hideBackdrop:P=!1,ModalProps:{BackdropProps:N}={},onClose:F,open:$=!1,PaperProps:Z={},SlideProps:q,TransitionComponent:K=Jxe,transitionDuration:Q=f,variant:te="temporary"}=r,ie=Tn(r.ModalProps,twe),ue=Tn(r,nwe),re=j.useRef(!1);j.useEffect(()=>{re.current=!0},[]);const me=swe({direction:d?"rtl":"ltr"},y),De=Ae({},r,{anchor:y,elevation:M,open:$,variant:te},ue),je=rwe(De),Be=O.jsx(iwe,Ae({elevation:te==="temporary"?M:0,square:!0},Z,{className:fn(je.paper,Z.className),ownerState:De,children:E}));if(te==="permanent")return O.jsx(aB,Ae({className:fn(je.root,je.docked,C),ownerState:De,ref:n},ue,{children:Be}));const Ue=O.jsx(K,Ae({in:$,direction:yY[me],timeout:Q,appear:re.current},q,{children:Be}));return te==="persistent"?O.jsx(aB,Ae({className:fn(je.root,je.docked,C),ownerState:De,ref:n},ue,{children:Ue})):O.jsx(owe,Ae({BackdropProps:Ae({},a,N,{transitionDuration:Q}),className:fn(je.root,je.modal,C),open:$,ownerState:De,onClose:F,hideBackdrop:P,ref:n},ue,ie,{children:Ue}))}),bY=lwe;function cwe(e){return Lr("MuiFab",e)}const uwe=Ar("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),sB=uwe,dwe=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],hwe=e=>{const{color:t,variant:n,classes:r,size:l}=e,d={root:["root",n,`size${Yn(l)}`,t==="inherit"?"colorInherit":t]},f=Or(d,cwe,r);return Ae({},r,f)},fwe=_n(_v,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>Qs(e)||e==="classes",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${Yn(n.size)}`],n.color==="inherit"&&t.colorInherit,t[Yn(n.size)],t[n.color]]}})(({theme:e,ownerState:t})=>{var n,r;return Ae({},e.typography.button,{minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.text.primary:(n=(r=e.palette).getContrastText)==null?void 0:n.call(r,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${sB.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]}},t.size==="small"&&{width:40,height:40},t.size==="medium"&&{width:48,height:48},t.variant==="extended"&&{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},t.variant==="extended"&&t.size==="small"&&{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34},t.variant==="extended"&&t.size==="medium"&&{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40},t.color==="inherit"&&{color:"inherit"})},({theme:e,ownerState:t})=>Ae({},t.color!=="inherit"&&t.color!=="default"&&(e.vars||e).palette[t.color]!=null&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}}),({theme:e})=>({[`&.${sB.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}})),pwe=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiFab"}),{children:l,className:d,color:f="default",component:y="button",disabled:a=!1,disableFocusRipple:E=!1,focusVisibleClassName:C,size:M="large",variant:P="circular"}=r,N=Tn(r,dwe),F=Ae({},r,{color:f,component:y,disabled:a,disableFocusRipple:E,size:M,variant:P}),$=hwe(F);return O.jsx(fwe,Ae({className:fn($.root,d),component:y,disabled:a,focusRipple:!E,focusVisibleClassName:fn($.focusVisible,C),ownerState:F,ref:n},N,{classes:$,children:l}))}),vY=pwe;function mwe(e){return Lr("MuiInputAdornment",e)}const gwe=Ar("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),lB=gwe;var cB;const ywe=["children","className","component","disablePointerEvents","disableTypography","position","variant"],bwe=(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${Yn(n.position)}`],n.disablePointerEvents===!0&&t.disablePointerEvents,t[n.variant]]},vwe=e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:r,position:l,size:d,variant:f}=e,y={root:["root",n&&"disablePointerEvents",l&&`position${Yn(l)}`,f,r&&"hiddenLabel",d&&`size${Yn(d)}`]};return Or(y,mwe,t)},_we=_n("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:bwe})(({theme:e,ownerState:t})=>Ae({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},t.variant==="filled"&&{[`&.${lB.positionStart}&:not(.${lB.hiddenLabel})`]:{marginTop:16}},t.position==="start"&&{marginRight:8},t.position==="end"&&{marginLeft:8},t.disablePointerEvents===!0&&{pointerEvents:"none"})),xwe=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiInputAdornment"}),{children:l,className:d,component:f="div",disablePointerEvents:y=!1,disableTypography:a=!1,position:E,variant:C}=r,M=Tn(r,ywe),P=k0()||{};let N=C;C&&P.variant,P&&!N&&(N=P.variant);const F=Ae({},r,{hiddenLabel:P.hiddenLabel,size:P.size,disablePointerEvents:y,position:E,variant:N}),$=vwe(F);return O.jsx(hk.Provider,{value:null,children:O.jsx(_we,Ae({as:f,ownerState:F,className:fn($.root,d),ref:n},M,{children:typeof l=="string"&&!a?O.jsx(sa,{color:"text.secondary",children:l}):O.jsxs(j.Fragment,{children:[E==="start"?cB||(cB=O.jsx("span",{className:"notranslate",children:"​"})):null,l]})}))})}),uB=xwe;function wwe(e){return Lr("MuiListItem",e)}const Ewe=Ar("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),Vy=Ewe,Twe=Ar("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),Swe=Twe;function Cwe(e){return Lr("MuiListItemSecondaryAction",e)}Ar("MuiListItemSecondaryAction",["root","disableGutters"]);const kwe=["className"],Awe=e=>{const{disableGutters:t,classes:n}=e;return Or({root:["root",t&&"disableGutters"]},Cwe,n)},Mwe=_n("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})(({ownerState:e})=>Ae({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})),_Y=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiListItemSecondaryAction"}),{className:l}=r,d=Tn(r,kwe),f=j.useContext(Hh),y=Ae({},r,{disableGutters:f.disableGutters}),a=Awe(y);return O.jsx(Mwe,Ae({className:fn(a.root,l),ownerState:y,ref:n},d))});_Y.muiName="ListItemSecondaryAction";const xY=_Y,Dwe=["className"],Rwe=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],Iwe=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button,n.hasSecondaryAction&&t.secondaryAction]},Pwe=e=>{const{alignItems:t,button:n,classes:r,dense:l,disabled:d,disableGutters:f,disablePadding:y,divider:a,hasSecondaryAction:E,selected:C}=e;return Or({root:["root",l&&"dense",!f&&"gutters",!y&&"padding",a&&"divider",d&&"disabled",n&&"button",t==="flex-start"&&"alignItemsFlexStart",E&&"secondaryAction",C&&"selected"],container:["container"]},wwe,r)},Owe=_n("div",{name:"MuiListItem",slot:"Root",overridesResolver:Iwe})(({theme:e,ownerState:t})=>Ae({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&Ae({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${Swe.root}`]:{paddingRight:48}},{[`&.${Vy.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Vy.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:da(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Vy.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:da(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Vy.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.alignItems==="flex-start"&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Vy.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:da(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:da(e.palette.primary.main,e.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48})),Lwe=_n("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),Nwe=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiListItem"}),{alignItems:l="center",autoFocus:d=!1,button:f=!1,children:y,className:a,component:E,components:C={},componentsProps:M={},ContainerComponent:P="li",ContainerProps:{className:N}={},dense:F=!1,disabled:$=!1,disableGutters:Z=!1,disablePadding:q=!1,divider:K=!1,focusVisibleClassName:Q,secondaryAction:te,selected:ie=!1,slotProps:ue={},slots:re={}}=r,me=Tn(r.ContainerProps,Dwe),ve=Tn(r,Rwe),De=j.useContext(Hh),je=j.useMemo(()=>({dense:F||De.dense||!1,alignItems:l,disableGutters:Z}),[l,De.dense,F,Z]),Be=j.useRef(null);Cc(()=>{d&&Be.current&&Be.current.focus()},[d]);const Ue=j.Children.toArray(y),Ge=Ue.length&&bb(Ue[Ue.length-1],["ListItemSecondaryAction"]),ze=Ae({},r,{alignItems:l,autoFocus:d,button:f,dense:je.dense,disabled:$,disableGutters:Z,disablePadding:q,divider:K,hasSecondaryAction:Ge,selected:ie}),ot=Pwe(ze),st=ti(Be,n),Re=re.root||C.Root||Owe,bt=ue.root||M.root||{},Lt=Ae({className:fn(ot.root,bt.className,a),disabled:$},ve);let Ct=E||"li";return f&&(Lt.component=E||"div",Lt.focusVisibleClassName=fn(Vy.focusVisible,Q),Ct=_v),Ge?(Ct=!Lt.component&&!E?"div":Ct,P==="li"&&(Ct==="li"?Ct="div":Lt.component==="li"&&(Lt.component="div")),O.jsx(Hh.Provider,{value:je,children:O.jsxs(Lwe,Ae({as:P,className:fn(ot.container,N),ref:st,ownerState:ze},me,{children:[O.jsx(Re,Ae({},bt,!qb(Re)&&{as:Ct,ownerState:Ae({},ze,bt.ownerState)},Lt,{children:Ue})),Ue.pop()]}))})):O.jsx(Hh.Provider,{value:je,children:O.jsxs(Re,Ae({},bt,{as:Ct,ref:st},!qb(Re)&&{ownerState:Ae({},ze,bt.ownerState)},Lt,{children:[Ue,te&&O.jsx(xY,{children:te})]}))})}),em=Nwe;function zwe(e){return Lr("MuiListItemAvatar",e)}Ar("MuiListItemAvatar",["root","alignItemsFlexStart"]);const Bwe=["className"],Fwe=e=>{const{alignItems:t,classes:n}=e;return Or({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},zwe,n)},jwe=_n("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(({ownerState:e})=>Ae({minWidth:56,flexShrink:0},e.alignItems==="flex-start"&&{marginTop:8})),$we=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiListItemAvatar"}),{className:l}=r,d=Tn(r,Bwe),f=j.useContext(Hh),y=Ae({},r,{alignItems:f.alignItems}),a=Fwe(y);return O.jsx(jwe,Ae({className:fn(a.root,l),ownerState:y,ref:n},d))}),tv=$we,Uwe=Ar("MuiListItemIcon",["root","alignItemsFlexStart"]),dB=Uwe;function Vwe(e){return Lr("MuiListItemText",e)}const Hwe=Ar("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),ES=Hwe,Wwe=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],Ywe=e=>{const{classes:t,inset:n,primary:r,secondary:l,dense:d}=e;return Or({root:["root",n&&"inset",d&&"dense",r&&l&&"multiline"],primary:["primary"],secondary:["secondary"]},Vwe,t)},Gwe=_n("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${ES.primary}`]:t.primary},{[`& .${ES.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})(({ownerState:e})=>Ae({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})),qwe=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiListItemText"}),{children:l,className:d,disableTypography:f=!1,inset:y=!1,primary:a,primaryTypographyProps:E,secondary:C,secondaryTypographyProps:M}=r,P=Tn(r,Wwe),{dense:N}=j.useContext(Hh);let F=a??l,$=C;const Z=Ae({},r,{disableTypography:f,inset:y,primary:!!F,secondary:!!$,dense:N}),q=Ywe(Z);return F!=null&&F.type!==sa&&!f&&(F=O.jsx(sa,Ae({variant:N?"body2":"body1",className:q.primary,component:E!=null&&E.variant?void 0:"span",display:"block"},E,{children:F}))),$!=null&&$.type!==sa&&!f&&($=O.jsx(sa,Ae({variant:"body2",className:q.secondary,color:"text.secondary",display:"block"},M,{children:$}))),O.jsxs(Gwe,Ae({className:fn(q.root,d),ownerState:Z,ref:n},P,{children:[F,$]}))}),b0=qwe;function Zwe(e){return Lr("MuiMenuItem",e)}const Kwe=Ar("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),$_=Kwe,Xwe=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],Qwe=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]},Jwe=e=>{const{disabled:t,dense:n,divider:r,disableGutters:l,selected:d,classes:f}=e,a=Or({root:["root",n&&"dense",t&&"disabled",!l&&"gutters",r&&"divider",d&&"selected"]},Zwe,f);return Ae({},f,a)},eEe=_n(_v,{shouldForwardProp:e=>Qs(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:Qwe})(({theme:e,ownerState:t})=>Ae({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${$_.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:da(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${$_.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:da(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${$_.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:da(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:da(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${$_.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${$_.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${iB.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${iB.inset}`]:{marginLeft:52},[`& .${ES.root}`]:{marginTop:0,marginBottom:0},[`& .${ES.inset}`]:{paddingLeft:36},[`& .${dB.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&Ae({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${dB.root} svg`]:{fontSize:"1.25rem"}}))),tEe=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiMenuItem"}),{autoFocus:l=!1,component:d="li",dense:f=!1,divider:y=!1,disableGutters:a=!1,focusVisibleClassName:E,role:C="menuitem",tabIndex:M,className:P}=r,N=Tn(r,Xwe),F=j.useContext(Hh),$=j.useMemo(()=>({dense:f||F.dense||!1,disableGutters:a}),[F.dense,f,a]),Z=j.useRef(null);Cc(()=>{l&&Z.current&&Z.current.focus()},[l]);const q=Ae({},r,{dense:$.dense,divider:y,disableGutters:a}),K=Jwe(r),Q=ti(Z,n);let te;return r.disabled||(te=M!==void 0?M:-1),O.jsx(Hh.Provider,{value:$,children:O.jsx(eEe,Ae({ref:Q,role:C,tabIndex:te,component:d,focusVisibleClassName:fn(K.focusVisible,E),className:fn(K.root,P)},N,{ownerState:q,classes:K}))})}),oM=tEe,nEe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],rEe={entering:{transform:"none"},entered:{transform:"none"}},oEe=j.forwardRef(function(t,n){const r=Id(),l={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:d,appear:f=!0,children:y,easing:a,in:E,onEnter:C,onEntered:M,onEntering:P,onExit:N,onExited:F,onExiting:$,style:Z,timeout:q=l,TransitionComponent:K=mv}=t,Q=Tn(t,nEe),te=j.useRef(null),ie=ti(te,y.ref,n),ue=Ge=>ze=>{if(Ge){const ot=te.current;ze===void 0?Ge(ot):Ge(ot,ze)}},re=ue(P),me=ue((Ge,ze)=>{yk(Ge);const ot=Cd({style:Z,timeout:q,easing:a},{mode:"enter"});Ge.style.webkitTransition=r.transitions.create("transform",ot),Ge.style.transition=r.transitions.create("transform",ot),C&&C(Ge,ze)}),ve=ue(M),De=ue($),je=ue(Ge=>{const ze=Cd({style:Z,timeout:q,easing:a},{mode:"exit"});Ge.style.webkitTransition=r.transitions.create("transform",ze),Ge.style.transition=r.transitions.create("transform",ze),N&&N(Ge)}),Be=ue(F),Ue=Ge=>{d&&d(te.current,Ge)};return O.jsx(K,Ae({appear:f,in:E,nodeRef:te,onEnter:me,onEntered:ve,onEntering:re,onExit:je,onExited:Be,onExiting:De,addEndListener:Ue,timeout:q},Q,{children:(Ge,ze)=>j.cloneElement(y,Ae({style:Ae({transform:"scale(0)",visibility:Ge==="exited"&&!E?"hidden":void 0},rEe[Ge],Z,y.props.style),ref:ie},ze))}))}),iEe=oEe;function aEe(e){return Lr("MuiSpeedDial",e)}const sEe=Ar("MuiSpeedDial",["root","fab","directionUp","directionDown","directionLeft","directionRight","actions","actionsClosed"]),CE=sEe,lEe=["ref"],cEe=["ariaLabel","FabProps","children","className","direction","hidden","icon","onBlur","onClose","onFocus","onKeyDown","onMouseEnter","onMouseLeave","onOpen","open","openIcon","TransitionComponent","transitionDuration","TransitionProps"],uEe=["ref"],dEe=e=>{const{classes:t,open:n,direction:r}=e,l={root:["root",`direction${Yn(r)}`],fab:["fab"],actions:["actions",!n&&"actionsClosed"]};return Or(l,aEe,t)};function U_(e){if(e==="up"||e==="down")return"vertical";if(e==="right"||e==="left")return"horizontal"}const mp=32,kE=16,hEe=_n("div",{name:"MuiSpeedDial",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`direction${Yn(n.direction)}`]]}})(({theme:e,ownerState:t})=>Ae({zIndex:(e.vars||e).zIndex.speedDial,display:"flex",alignItems:"center",pointerEvents:"none"},t.direction==="up"&&{flexDirection:"column-reverse",[`& .${CE.actions}`]:{flexDirection:"column-reverse",marginBottom:-mp,paddingBottom:kE+mp}},t.direction==="down"&&{flexDirection:"column",[`& .${CE.actions}`]:{flexDirection:"column",marginTop:-mp,paddingTop:kE+mp}},t.direction==="left"&&{flexDirection:"row-reverse",[`& .${CE.actions}`]:{flexDirection:"row-reverse",marginRight:-mp,paddingRight:kE+mp}},t.direction==="right"&&{flexDirection:"row",[`& .${CE.actions}`]:{flexDirection:"row",marginLeft:-mp,paddingLeft:kE+mp}})),fEe=_n(vY,{name:"MuiSpeedDial",slot:"Fab",overridesResolver:(e,t)=>t.fab})(()=>({pointerEvents:"auto"})),pEe=_n("div",{name:"MuiSpeedDial",slot:"Actions",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.actions,!n.open&&t.actionsClosed]}})(({ownerState:e})=>Ae({display:"flex",pointerEvents:"auto"},!e.open&&{transition:"top 0s linear 0.2s",pointerEvents:"none"})),mEe=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiSpeedDial"}),l=Id(),d={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{ariaLabel:f,FabProps:{ref:y}={},children:a,className:E,direction:C="up",hidden:M=!1,icon:P,onBlur:N,onClose:F,onFocus:$,onKeyDown:Z,onMouseEnter:q,onMouseLeave:K,onOpen:Q,open:te,TransitionComponent:ie=iEe,transitionDuration:ue=d,TransitionProps:re}=r,me=Tn(r.FabProps,lEe),ve=Tn(r,cEe),[De,je]=Gb({controlled:te,default:!1,name:"SpeedDial",state:"open"}),Be=Ae({},r,{open:De,direction:C}),Ue=dEe(Be),Ge=Mp(),ze=j.useRef(0),ot=j.useRef(),st=j.useRef([]);st.current=[st.current[0]];const Re=j.useCallback(nt=>{st.current[0]=nt},[]),bt=ti(y,Re),Lt=(nt,Pn)=>Un=>{st.current[nt+1]=Un,Pn&&Pn(Un)},Ct=nt=>{Z&&Z(nt);const Pn=nt.key.replace("Arrow","").toLowerCase(),{current:Un=Pn}=ot;if(nt.key==="Escape"){je(!1),st.current[0].focus(),F&&F(nt,"escapeKeyDown");return}if(U_(Pn)===U_(Un)&&U_(Pn)!==void 0){nt.preventDefault();const En=Pn===Un?1:-1,bn=bV(ze.current+En,0,st.current.length-1);st.current[bn].focus(),ze.current=bn,ot.current=Un}};j.useEffect(()=>{De||(ze.current=0,ot.current=void 0)},[De]);const Nt=nt=>{nt.type==="mouseleave"&&K&&K(nt),nt.type==="blur"&&N&&N(nt),Ge.clear(),nt.type==="blur"?Ge.start(0,()=>{je(!1),F&&F(nt,"blur")}):(je(!1),F&&F(nt,"mouseLeave"))},tn=nt=>{me.onClick&&me.onClick(nt),Ge.clear(),De?(je(!1),F&&F(nt,"toggle")):(je(!0),Q&&Q(nt,"toggle"))},Dt=nt=>{nt.type==="mouseenter"&&q&&q(nt),nt.type==="focus"&&$&&$(nt),Ge.clear(),De||Ge.start(0,()=>{je(!0),Q&&Q(nt,{focus:"focus",mouseenter:"mouseEnter"}[nt.type])})},cn=f.replace(/^[^a-z]+|[^\w:.-]+/gi,""),Mt=j.Children.toArray(a).filter(nt=>j.isValidElement(nt)),Vn=Mt.map((nt,Pn)=>{const Un=nt.props,{FabProps:{ref:En}={},tooltipPlacement:bn}=Un,Fn=Tn(Un.FabProps,uEe),On=bn||(U_(C)==="vertical"?"left":"top");return j.cloneElement(nt,{FabProps:Ae({},Fn,{ref:Lt(Pn,En)}),delay:30*(De?Pn:Mt.length-Pn),open:De,tooltipPlacement:On,id:`${cn}-action-${Pn}`})});return O.jsxs(hEe,Ae({className:fn(Ue.root,E),ref:n,role:"presentation",onKeyDown:Ct,onBlur:Nt,onFocus:Dt,onMouseEnter:Dt,onMouseLeave:Nt,ownerState:Be},ve,{children:[O.jsx(ie,Ae({in:!M,timeout:ue,unmountOnExit:!0},re,{children:O.jsx(fEe,Ae({color:"primary","aria-label":f,"aria-haspopup":"true","aria-expanded":De,"aria-controls":`${cn}-actions`},me,{onClick:tn,className:fn(Ue.fab,me.className),ref:bt,ownerState:Be,children:j.isValidElement(P)&&bb(P,["SpeedDialIcon"])?j.cloneElement(P,{open:De}):P}))})),O.jsx(pEe,{id:`${cn}-actions`,role:"menu","aria-orientation":U_(C),className:fn(Ue.actions,!De&&Ue.actionsClosed),ownerState:Be,children:Vn})]}))}),gEe=mEe;function yEe(e){return Lr("MuiTooltip",e)}const bEe=Ar("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),Dp=bEe,vEe=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function _Ee(e){return Math.round(e*1e5)/1e5}const xEe=e=>{const{classes:t,disableInteractive:n,arrow:r,touch:l,placement:d}=e,f={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",l&&"touch",`tooltipPlacement${Yn(d.split("-")[0])}`],arrow:["arrow"]};return Or(f,yEe,t)},wEe=_n(hY,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})(({theme:e,ownerState:t,open:n})=>Ae({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none"},!t.disableInteractive&&{pointerEvents:"auto"},!n&&{pointerEvents:"none"},t.arrow&&{[`&[data-popper-placement*="bottom"] .${Dp.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Dp.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Dp.arrow}`]:Ae({},t.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${Dp.arrow}`]:Ae({},t.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),EEe=_n("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t[`tooltipPlacement${Yn(n.placement.split("-")[0])}`]]}})(({theme:e,ownerState:t})=>Ae({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:da(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},t.arrow&&{position:"relative",margin:0},t.touch&&{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${_Ee(16/14)}em`,fontWeight:e.typography.fontWeightRegular},{[`.${Dp.popper}[data-popper-placement*="left"] &`]:Ae({transformOrigin:"right center"},t.isRtl?Ae({marginLeft:"14px"},t.touch&&{marginLeft:"24px"}):Ae({marginRight:"14px"},t.touch&&{marginRight:"24px"})),[`.${Dp.popper}[data-popper-placement*="right"] &`]:Ae({transformOrigin:"left center"},t.isRtl?Ae({marginRight:"14px"},t.touch&&{marginRight:"24px"}):Ae({marginLeft:"14px"},t.touch&&{marginLeft:"24px"})),[`.${Dp.popper}[data-popper-placement*="top"] &`]:Ae({transformOrigin:"center bottom",marginBottom:"14px"},t.touch&&{marginBottom:"24px"}),[`.${Dp.popper}[data-popper-placement*="bottom"] &`]:Ae({transformOrigin:"center top",marginTop:"14px"},t.touch&&{marginTop:"24px"})})),TEe=_n("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:da(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let AE=!1;const hB=new jx;let V_={x:0,y:0};function ME(e,t){return(n,...r)=>{t&&t(n,...r),e(n,...r)}}const SEe=j.forwardRef(function(t,n){var r,l,d,f,y,a,E,C,M,P,N,F,$,Z,q,K,Q,te,ie;const ue=Hr({props:t,name:"MuiTooltip"}),{arrow:re=!1,children:me,components:ve={},componentsProps:De={},describeChild:je=!1,disableFocusListener:Be=!1,disableHoverListener:Ue=!1,disableInteractive:Ge=!1,disableTouchListener:ze=!1,enterDelay:ot=100,enterNextDelay:st=0,enterTouchDelay:Re=700,followCursor:bt=!1,id:Lt,leaveDelay:Ct=0,leaveTouchDelay:Nt=1500,onClose:tn,onOpen:Dt,open:cn,placement:Mt="bottom",PopperComponent:Vn,PopperProps:nt={},slotProps:Pn={},slots:Un={},title:En,TransitionComponent:bn=o5,TransitionProps:Fn}=ue,On=Tn(ue,vEe),an=j.isValidElement(me)?me:O.jsx("span",{children:me}),qr=Id(),hn=jI(),[Wr,go]=j.useState(),[pr,Pr]=j.useState(null),to=j.useRef(!1),Mr=Ge||bt,mr=Mp(),eo=Mp(),Ke=Mp(),pe=Mp(),[we,Pe]=Gb({controlled:cn,default:!1,name:"Tooltip",state:"open"});let at=we;const ft=$x(Lt),it=j.useRef(),ct=Fh(()=>{it.current!==void 0&&(document.body.style.WebkitUserSelect=it.current,it.current=void 0),pe.clear()});j.useEffect(()=>ct,[ct]);const tt=Mn=>{hB.clear(),AE=!0,Pe(!0),Dt&&!at&&Dt(Mn)},jt=Fh(Mn=>{hB.start(800+Ct,()=>{AE=!1}),Pe(!1),tn&&at&&tn(Mn),mr.start(qr.transitions.duration.shortest,()=>{to.current=!1})}),Ut=Mn=>{to.current&&Mn.type!=="touchstart"||(Wr&&Wr.removeAttribute("title"),eo.clear(),Ke.clear(),ot||AE&&st?eo.start(AE?st:ot,()=>{tt(Mn)}):tt(Mn))},en=Mn=>{eo.clear(),Ke.start(Ct,()=>{jt(Mn)})},{isFocusVisibleRef:er,onBlur:Fr,onFocus:no,ref:Vr}=ik(),[,Cr]=j.useState(!1),vr=Mn=>{Fr(Mn),er.current===!1&&(Cr(!1),en(Mn))},Nr=Mn=>{Wr||go(Mn.currentTarget),no(Mn),er.current===!0&&(Cr(!0),Ut(Mn))},Qe=Mn=>{to.current=!0;const _r=an.props;_r.onTouchStart&&_r.onTouchStart(Mn)},pt=Mn=>{Qe(Mn),Ke.clear(),mr.clear(),ct(),it.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",pe.start(Re,()=>{document.body.style.WebkitUserSelect=it.current,Ut(Mn)})},_t=Mn=>{an.props.onTouchEnd&&an.props.onTouchEnd(Mn),ct(),Ke.start(Nt,()=>{jt(Mn)})};j.useEffect(()=>{if(!at)return;function Mn(_r){(_r.key==="Escape"||_r.key==="Esc")&&jt(_r)}return document.addEventListener("keydown",Mn),()=>{document.removeEventListener("keydown",Mn)}},[jt,at]);const Kt=ti(an.ref,Vr,go,n);!En&&En!==0&&(at=!1);const vn=j.useRef(),tr=Mn=>{const _r=an.props;_r.onMouseMove&&_r.onMouseMove(Mn),V_={x:Mn.clientX,y:Mn.clientY},vn.current&&vn.current.update()},mn={},sn=typeof En=="string";je?(mn.title=!at&&sn&&!Ue?En:null,mn["aria-describedby"]=at?ft:null):(mn["aria-label"]=sn?En:null,mn["aria-labelledby"]=at&&!sn?ft:null);const Ze=Ae({},mn,On,an.props,{className:fn(On.className,an.props.className),onTouchStart:Qe,ref:Kt},bt?{onMouseMove:tr}:{}),Je={};ze||(Ze.onTouchStart=pt,Ze.onTouchEnd=_t),Ue||(Ze.onMouseOver=ME(Ut,Ze.onMouseOver),Ze.onMouseLeave=ME(en,Ze.onMouseLeave),Mr||(Je.onMouseOver=Ut,Je.onMouseLeave=en)),Be||(Ze.onFocus=ME(Nr,Ze.onFocus),Ze.onBlur=ME(vr,Ze.onBlur),Mr||(Je.onFocus=Nr,Je.onBlur=vr));const Et=j.useMemo(()=>{var Mn;let _r=[{name:"arrow",enabled:!!pr,options:{element:pr,padding:4}}];return(Mn=nt.popperOptions)!=null&&Mn.modifiers&&(_r=_r.concat(nt.popperOptions.modifiers)),Ae({},nt.popperOptions,{modifiers:_r})},[pr,nt]),Tt=Ae({},ue,{isRtl:hn,arrow:re,disableInteractive:Mr,placement:Mt,PopperComponentProp:Vn,touch:to.current}),ut=xEe(Tt),kt=(r=(l=Un.popper)!=null?l:ve.Popper)!=null?r:wEe,Rt=(d=(f=(y=Un.transition)!=null?y:ve.Transition)!=null?f:bn)!=null?d:o5,Bt=(a=(E=Un.tooltip)!=null?E:ve.Tooltip)!=null?a:EEe,Yt=(C=(M=Un.arrow)!=null?M:ve.Arrow)!=null?C:TEe,Ft=ib(kt,Ae({},nt,(P=Pn.popper)!=null?P:De.popper,{className:fn(ut.popper,nt?.className,(N=(F=Pn.popper)!=null?F:De.popper)==null?void 0:N.className)}),Tt),An=ib(Rt,Ae({},Fn,($=Pn.transition)!=null?$:De.transition),Tt),nr=ib(Bt,Ae({},(Z=Pn.tooltip)!=null?Z:De.tooltip,{className:fn(ut.tooltip,(q=(K=Pn.tooltip)!=null?K:De.tooltip)==null?void 0:q.className)}),Tt),nn=ib(Yt,Ae({},(Q=Pn.arrow)!=null?Q:De.arrow,{className:fn(ut.arrow,(te=(ie=Pn.arrow)!=null?ie:De.arrow)==null?void 0:te.className)}),Tt);return O.jsxs(j.Fragment,{children:[j.cloneElement(an,Ze),O.jsx(kt,Ae({as:Vn??hY,placement:Mt,anchorEl:bt?{getBoundingClientRect:()=>({top:V_.y,left:V_.x,right:V_.x,bottom:V_.y,width:0,height:0})}:Wr,popperRef:vn,open:Wr?at:!1,id:ft,transition:!0},Je,Ft,{popperOptions:Et,children:({TransitionProps:Mn})=>O.jsx(Rt,Ae({timeout:qr.transitions.duration.shorter},Mn,An,{children:O.jsxs(Bt,Ae({},nr,{children:[En,re?O.jsx(Yt,Ae({},nn,{ref:Pr})):null]}))}))}))]})}),wY=SEe;function CEe(e){return Lr("MuiSpeedDialAction",e)}const kEe=Ar("MuiSpeedDialAction",["fab","fabClosed","staticTooltip","staticTooltipClosed","staticTooltipLabel","tooltipPlacementLeft","tooltipPlacementRight"]),AEe=kEe,MEe=["className","delay","FabProps","icon","id","open","TooltipClasses","tooltipOpen","tooltipPlacement","tooltipTitle"],DEe=e=>{const{open:t,tooltipPlacement:n,classes:r}=e,l={fab:["fab",!t&&"fabClosed"],staticTooltip:["staticTooltip",`tooltipPlacement${Yn(n)}`,!t&&"staticTooltipClosed"],staticTooltipLabel:["staticTooltipLabel"]};return Or(l,CEe,r)},REe=_n(vY,{name:"MuiSpeedDialAction",slot:"Fab",skipVariantsResolver:!1,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.fab,!n.open&&t.fabClosed]}})(({theme:e,ownerState:t})=>Ae({margin:8,color:(e.vars||e).palette.text.secondary,backgroundColor:(e.vars||e).palette.background.paper,"&:hover":{backgroundColor:e.vars?e.vars.palette.SpeedDialAction.fabHoverBg:ole(e.palette.background.paper,.15)},transition:`${e.transitions.create("transform",{duration:e.transitions.duration.shorter})}, opacity 0.8s`,opacity:1},!t.open&&{opacity:0,transform:"scale(0)"})),IEe=_n("span",{name:"MuiSpeedDialAction",slot:"StaticTooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.staticTooltip,!n.open&&t.staticTooltipClosed,t[`tooltipPlacement${Yn(n.tooltipPlacement)}`]]}})(({theme:e,ownerState:t})=>({position:"relative",display:"flex",alignItems:"center",[`& .${AEe.staticTooltipLabel}`]:Ae({transition:e.transitions.create(["transform","opacity"],{duration:e.transitions.duration.shorter}),opacity:1},!t.open&&{opacity:0,transform:"scale(0.5)"},t.tooltipPlacement==="left"&&{transformOrigin:"100% 50%",right:"100%",marginRight:8},t.tooltipPlacement==="right"&&{transformOrigin:"0% 50%",left:"100%",marginLeft:8})})),PEe=_n("span",{name:"MuiSpeedDialAction",slot:"StaticTooltipLabel",overridesResolver:(e,t)=>t.staticTooltipLabel})(({theme:e})=>Ae({position:"absolute"},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.paper,borderRadius:(e.vars||e).shape.borderRadius,boxShadow:(e.vars||e).shadows[1],color:(e.vars||e).palette.text.secondary,padding:"4px 16px",wordBreak:"keep-all"})),OEe=j.forwardRef(function(t,n){const r=Hr({props:t,name:"MuiSpeedDialAction"}),{className:l,delay:d=0,FabProps:f={},icon:y,id:a,open:E,TooltipClasses:C,tooltipOpen:M=!1,tooltipPlacement:P="left",tooltipTitle:N}=r,F=Tn(r,MEe),$=Ae({},r,{tooltipPlacement:P}),Z=DEe($),[q,K]=j.useState(M),Q=()=>{K(!1)},te=()=>{K(!0)},ie={transitionDelay:`${d}ms`},ue=O.jsx(REe,Ae({size:"small",className:fn(Z.fab,l),tabIndex:-1,role:"menuitem",ownerState:$},f,{style:Ae({},ie,f.style),children:y}));return M?O.jsxs(IEe,Ae({id:a,ref:n,className:Z.staticTooltip,ownerState:$},F,{children:[O.jsx(PEe,{style:ie,id:`${a}-label`,className:Z.staticTooltipLabel,ownerState:$,children:N}),j.cloneElement(ue,{"aria-labelledby":`${a}-label`})]})):(!E&&q&&K(!1),O.jsx(wY,Ae({id:a,ref:n,title:N,placement:P,onClose:Q,onOpen:te,open:E&&q,classes:C},F,{children:ue})))}),LEe=OEe;var h4={},NEe=yi;Object.defineProperty(h4,"__esModule",{value:!0});var EY=h4.default=void 0,zEe=NEe(Bi()),BEe=O;EY=h4.default=(0,zEe.default)((0,BEe.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreHoriz");function FEe({eventID:e,eventCategory:t}){const[n,r]=j.useState(null),l=!!n,d=a=>{r(a.currentTarget)},f=()=>{r(null)};j.useState(!1);const y=Ac();return O.jsxs(j.Fragment,{children:[O.jsx(Nl,{sx:{display:"flex",alignItems:"center",textAlign:"center"},children:O.jsx(wY,{title:"Event Management",children:O.jsx(as,{onClick:d,size:"large",sx:{ml:2},"aria-controls":l?"account-menu":void 0,"aria-haspopup":"true","aria-expanded":l?"true":void 0,children:O.jsx(EY,{fontSize:"large"})})})}),O.jsxs(WH,{anchorEl:n,id:"account-menu",open:l,onClose:f,onClick:f,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&::before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[t==="userEvents"&&O.jsxs(O.Fragment,{children:[O.jsx(oM,{onClick:()=>y(`/admin/${e}`),children:"Admin Page"}),O.jsx(oM,{onClick:()=>y(`/collab/${e}`),children:"Collaboration Page"})]}),t==="volunteerEvents"&&O.jsx(oM,{onClick:()=>y(`/collab/${e}`),children:"Collaboration Page"})]})]})}function w1({eventCategory:e,applicationStatus:t,...n}){const r={icon:{width:"10vw",height:"150px",display:"block",marginTop:"25px",marginBottom:"25px",marginLeft:"15px",marginRight:"5px"},image:{height:"200px"}},[l,d]=j.useState(""),[f,y]=j.useState("");j.useState(!1),Ac();const a=()=>{const P=n.startDate,N=n.endDate;P===N?d(P):y(`${P} - ${N}`)};j.useEffect(()=>{a()},[]);const E=()=>{if(l&&l.length>0)return O.jsxs(io.Text,{style:{margin:"0px"},children:["Date: ",l]});if(f&&f.length>0)return O.jsxs(io.Text,{style:{margin:"0px"},children:["Dates: ",f]})},C=()=>{const P=n.event_type;if(P==="In-person")return O.jsxs(io.Text,{children:["Location: ",n.event_venue]});if(P==="Virtual")return O.jsx(io.Text,{children:"Location: Online"})},M=n.event_photo?r.image:r.icon;return O.jsxs(io,{style:{width:"18rem",height:"30rem"},children:[O.jsx(io.Img,{variant:"top",src:n.event_photo||FW,style:M}),O.jsxs(io.Body,{style:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[O.jsxs(io.Title,{children:[n.title,t&&` : ${t}`]}),E(),C(),O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"auto"},children:[O.jsx(Ts,{variant:"link",style:{color:"#6840DF"},as:va,to:`/event/${n.id}`,children:"More Details"}),e!=="eventsAttending"&&e!==null?O.jsx(FEe,{eventID:n.id,eventCategory:e}):null]})]})]})}function v0(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Gn(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function cx(e){if(!v0(e)&&typeof e!="number")return!1;const t=Gn(e);return!isNaN(Number(t))}const jEe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$Ee=(e,t,n)=>{let r;const l=jEe[e];return typeof l=="string"?r=l:t===1?r=l.one:r=l.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function iM(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const UEe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},VEe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},HEe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},WEe={date:iM({formats:UEe,defaultWidth:"full"}),time:iM({formats:VEe,defaultWidth:"full"}),dateTime:iM({formats:HEe,defaultWidth:"full"})},YEe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},GEe=(e,t,n,r)=>YEe[e];function H_(e){return(t,n)=>{const r=n?.context?String(n.context):"standalone";let l;if(r==="formatting"&&e.formattingValues){const f=e.defaultFormattingWidth||e.defaultWidth,y=n?.width?String(n.width):f;l=e.formattingValues[y]||e.formattingValues[f]}else{const f=e.defaultWidth,y=n?.width?String(n.width):e.defaultWidth;l=e.values[y]||e.values[f]}const d=e.argumentCallback?e.argumentCallback(t):t;return l[d]}}const qEe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ZEe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},KEe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},XEe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},QEe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},JEe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},eTe=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},tTe={ordinalNumber:eTe,era:H_({values:qEe,defaultWidth:"wide"}),quarter:H_({values:ZEe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:H_({values:KEe,defaultWidth:"wide"}),day:H_({values:XEe,defaultWidth:"wide"}),dayPeriod:H_({values:QEe,defaultWidth:"wide",formattingValues:JEe,defaultFormattingWidth:"wide"})};function W_(e){return(t,n={})=>{const r=n.width,l=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],d=t.match(l);if(!d)return null;const f=d[0],y=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],a=Array.isArray(y)?rTe(y,M=>M.test(f)):nTe(y,M=>M.test(f));let E;E=e.valueCallback?e.valueCallback(a):a,E=n.valueCallback?n.valueCallback(E):E;const C=t.slice(f.length);return{value:E,rest:C}}}function nTe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function rTe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function oTe(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const l=r[0],d=t.match(e.parsePattern);if(!d)return null;let f=e.valueCallback?e.valueCallback(d[0]):d[0];f=n.valueCallback?n.valueCallback(f):f;const y=t.slice(l.length);return{value:f,rest:y}}}const iTe=/^(\d+)(th|st|nd|rd)?/i,aTe=/\d+/i,sTe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},lTe={any:[/^b/i,/^(a|c)/i]},cTe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},uTe={any:[/1/i,/2/i,/3/i,/4/i]},dTe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},hTe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},fTe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},pTe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},mTe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},gTe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yTe={ordinalNumber:oTe({matchPattern:iTe,parsePattern:aTe,valueCallback:e=>parseInt(e,10)}),era:W_({matchPatterns:sTe,defaultMatchWidth:"wide",parsePatterns:lTe,defaultParseWidth:"any"}),quarter:W_({matchPatterns:cTe,defaultMatchWidth:"wide",parsePatterns:uTe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:W_({matchPatterns:dTe,defaultMatchWidth:"wide",parsePatterns:hTe,defaultParseWidth:"any"}),day:W_({matchPatterns:fTe,defaultMatchWidth:"wide",parsePatterns:pTe,defaultParseWidth:"any"}),dayPeriod:W_({matchPatterns:mTe,defaultMatchWidth:"any",parsePatterns:gTe,defaultParseWidth:"any"})},TY={code:"en-US",formatDistance:$Ee,formatLong:WEe,formatRelative:GEe,localize:tTe,match:yTe,options:{weekStartsOn:0,firstWeekContainsDate:1}};let bTe={};function M0(){return bTe}const SY=6048e5,vTe=864e5,wk=6e4,Ek=36e5,_Te=1e3;function _d(e){const t=Gn(e);return t.setHours(0,0,0,0),t}function TS(e){const t=Gn(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function ux(e,t){const n=_d(e),r=_d(t),l=+n-TS(n),d=+r-TS(r);return Math.round((l-d)/vTe)}function $o(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Tk(e){const t=Gn(e),n=$o(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function xTe(e){const t=Gn(e);return ux(t,Tk(t))+1}function Ad(e,t){const n=M0(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,l=Gn(e),d=l.getDay(),f=(d<r?7:0)+d-r;return l.setDate(l.getDate()-f),l.setHours(0,0,0,0),l}function nv(e){return Ad(e,{weekStartsOn:1})}function CY(e){const t=Gn(e),n=t.getFullYear(),r=$o(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const l=nv(r),d=$o(e,0);d.setFullYear(n,0,4),d.setHours(0,0,0,0);const f=nv(d);return t.getTime()>=l.getTime()?n+1:t.getTime()>=f.getTime()?n:n-1}function wTe(e){const t=CY(e),n=$o(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),nv(n)}function f4(e){const t=Gn(e),n=+nv(t)-+wTe(t);return Math.round(n/SY)+1}function p4(e,t){const n=Gn(e),r=n.getFullYear(),l=M0(),d=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??l.firstWeekContainsDate??l.locale?.options?.firstWeekContainsDate??1,f=$o(e,0);f.setFullYear(r+1,0,d),f.setHours(0,0,0,0);const y=Ad(f,t),a=$o(e,0);a.setFullYear(r,0,d),a.setHours(0,0,0,0);const E=Ad(a,t);return n.getTime()>=y.getTime()?r+1:n.getTime()>=E.getTime()?r:r-1}function ETe(e,t){const n=M0(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,l=p4(e,t),d=$o(e,0);return d.setFullYear(l,0,r),d.setHours(0,0,0,0),Ad(d,t)}function kY(e,t){const n=Gn(e),r=+Ad(n,t)-+ETe(n,t);return Math.round(r/SY)+1}function Fo(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const gp={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Fo(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Fo(n+1,2)},d(e,t){return Fo(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Fo(e.getHours()%12||12,t.length)},H(e,t){return Fo(e.getHours(),t.length)},m(e,t){return Fo(e.getMinutes(),t.length)},s(e,t){return Fo(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),l=Math.trunc(r*Math.pow(10,n-3));return Fo(l,t.length)}},Uy={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},fB={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),l=r>0?r:1-r;return n.ordinalNumber(l,{unit:"year"})}return gp.y(e,t)},Y:function(e,t,n,r){const l=p4(e,r),d=l>0?l:1-l;if(t==="YY"){const f=d%100;return Fo(f,2)}return t==="Yo"?n.ordinalNumber(d,{unit:"year"}):Fo(d,t.length)},R:function(e,t){const n=CY(e);return Fo(n,t.length)},u:function(e,t){const n=e.getFullYear();return Fo(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Fo(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Fo(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return gp.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Fo(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const l=kY(e,r);return t==="wo"?n.ordinalNumber(l,{unit:"week"}):Fo(l,t.length)},I:function(e,t,n){const r=f4(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Fo(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):gp.d(e,t)},D:function(e,t,n){const r=xTe(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Fo(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const l=e.getDay(),d=(l-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(d);case"ee":return Fo(d,2);case"eo":return n.ordinalNumber(d,{unit:"day"});case"eee":return n.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(l,{width:"short",context:"formatting"});case"eeee":default:return n.day(l,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const l=e.getDay(),d=(l-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(d);case"cc":return Fo(d,t.length);case"co":return n.ordinalNumber(d,{unit:"day"});case"ccc":return n.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(l,{width:"narrow",context:"standalone"});case"cccccc":return n.day(l,{width:"short",context:"standalone"});case"cccc":default:return n.day(l,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),l=r===0?7:r;switch(t){case"i":return String(l);case"ii":return Fo(l,t.length);case"io":return n.ordinalNumber(l,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const l=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let l;switch(r===12?l=Uy.noon:r===0?l=Uy.midnight:l=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let l;switch(r>=17?l=Uy.evening:r>=12?l=Uy.afternoon:r>=4?l=Uy.morning:l=Uy.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return gp.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):gp.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Fo(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Fo(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):gp.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):gp.s(e,t)},S:function(e,t){return gp.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return mB(r);case"XXXX":case"XX":return jg(r);case"XXXXX":case"XXX":default:return jg(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return mB(r);case"xxxx":case"xx":return jg(r);case"xxxxx":case"xxx":default:return jg(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+pB(r,":");case"OOOO":default:return"GMT"+jg(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+pB(r,":");case"zzzz":default:return"GMT"+jg(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return Fo(r,t.length)},T:function(e,t,n){const r=e.getTime();return Fo(r,t.length)}};function pB(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),l=Math.trunc(r/60),d=r%60;return d===0?n+String(l):n+String(l)+t+Fo(d,2)}function mB(e,t){return e%60===0?(e>0?"-":"+")+Fo(Math.abs(e)/60,2):jg(e,t)}function jg(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),l=Fo(Math.trunc(r/60),2),d=Fo(r%60,2);return n+l+t+d}const gB=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},AY=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},TTe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],l=n[2];if(!l)return gB(e,t);let d;switch(r){case"P":d=t.dateTime({width:"short"});break;case"PP":d=t.dateTime({width:"medium"});break;case"PPP":d=t.dateTime({width:"long"});break;case"PPPP":default:d=t.dateTime({width:"full"});break}return d.replace("{{date}}",gB(r,t)).replace("{{time}}",AY(l,t))},SS={p:AY,P:TTe},STe=/^D+$/,CTe=/^Y+$/,kTe=["D","DD","YY","YYYY"];function MY(e){return STe.test(e)}function DY(e){return CTe.test(e)}function d5(e,t,n){const r=ATe(e,t,n);if(console.warn(r),kTe.includes(e))throw new RangeError(r)}function ATe(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const MTe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,DTe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,RTe=/^'([^]*?)'?$/,ITe=/''/g,PTe=/[a-zA-Z]/;function yB(e,t,n){const r=M0(),l=n?.locale??r.locale??TY,d=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,f=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,y=Gn(e);if(!cx(y))throw new RangeError("Invalid time value");let a=t.match(DTe).map(C=>{const M=C[0];if(M==="p"||M==="P"){const P=SS[M];return P(C,l.formatLong)}return C}).join("").match(MTe).map(C=>{if(C==="''")return{isToken:!1,value:"'"};const M=C[0];if(M==="'")return{isToken:!1,value:OTe(C)};if(fB[M])return{isToken:!0,value:C};if(M.match(PTe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+M+"`");return{isToken:!1,value:C}});l.localize.preprocessor&&(a=l.localize.preprocessor(y,a));const E={firstWeekContainsDate:d,weekStartsOn:f,locale:l};return a.map(C=>{if(!C.isToken)return C.value;const M=C.value;(!n?.useAdditionalWeekYearTokens&&DY(M)||!n?.useAdditionalDayOfYearTokens&&MY(M))&&d5(M,t,String(e));const P=fB[M[0]];return P(y,M,l.localize,E)}).join("")}function OTe(e){const t=e.match(RTe);return t?t[1].replace(ITe,"'"):e}function m4(e,t){const n=+Gn(e);return $o(e,n+t)}function h5(e,t){return m4(e,t*wk)}function LTe(e,t){return m4(e,t*Ek)}function fm(e,t){const n=Gn(e);return isNaN(t)?$o(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function CS(e,t){const n=t*7;return fm(e,n)}function wu(e,t){const n=Gn(e);if(isNaN(t))return $o(e,NaN);if(!t)return n;const r=n.getDate(),l=$o(e,n.getTime());l.setMonth(n.getMonth()+t+1,0);const d=l.getDate();return r>=d?l:(n.setFullYear(l.getFullYear(),l.getMonth(),r),n)}function g4(e,t){const n=t*3;return wu(e,n)}function Yh(e,t){return wu(e,t*12)}function NTe(e,t){return fm(e,-t)}function bB(e,t){return CS(e,-t)}function rv(e,t){return wu(e,-t)}function RY(e,t){return g4(e,-t)}function ov(e,t){return Yh(e,-t)}function Gh(e){return Gn(e).getSeconds()}function xd(e){return Gn(e).getMinutes()}function wd(e){return Gn(e).getHours()}function zTe(e){return Gn(e).getDay()}function vB(e){return Gn(e).getDate()}function Ss(e){return Gn(e).getMonth()}function o0(e){const t=Gn(e);return Math.trunc(t.getMonth()/3)+1}function ao(e){return Gn(e).getFullYear()}function f5(e){return Gn(e).getTime()}function gT(e,t){const n=Gn(e);return n.setSeconds(t),n}function yT(e,t){const n=Gn(e);return n.setMinutes(t),n}function bT(e,t){const n=Gn(e);return n.setHours(t),n}function BTe(e){const t=Gn(e),n=t.getFullYear(),r=t.getMonth(),l=$o(e,0);return l.setFullYear(n,r+1,0),l.setHours(0,0,0,0),l.getDate()}function Es(e,t){const n=Gn(e),r=n.getFullYear(),l=n.getDate(),d=$o(e,0);d.setFullYear(r,t,15),d.setHours(0,0,0,0);const f=BTe(d);return n.setMonth(t,Math.min(l,f)),n}function Hy(e,t){const n=Gn(e),r=Math.trunc(n.getMonth()/3)+1,l=t-r;return Es(n,n.getMonth()+l*3)}function ad(e,t){const n=Gn(e);return isNaN(+n)?$o(e,NaN):(n.setFullYear(t),n)}function _B(e){let t;return e.forEach(n=>{const r=Gn(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function xB(e){let t;return e.forEach(function(n){const r=Gn(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function kS(e,t){const n=Gn(e),r=Gn(t),l=n.getFullYear()-r.getFullYear(),d=n.getMonth()-r.getMonth();return l*12+d}function AS(e,t){const n=Gn(e),r=Gn(t);return n.getFullYear()-r.getFullYear()}function MS(e,t){const n=Gn(e),r=Gn(t),l=n.getFullYear()-r.getFullYear(),d=o0(n)-o0(r);return l*4+d}function IY(e){const t=Gn(e);return t.setDate(1),t.setHours(0,0,0,0),t}function p5(e){const t=Gn(e),n=t.getMonth(),r=n-n%3;return t.setMonth(r,1),t.setHours(0,0,0,0),t}function m5(e){const t=Gn(e);return t.setHours(23,59,59,999),t}function PY(e,t){const n=M0(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,l=Gn(e),d=l.getDay(),f=(d<r?-7:0)+6-(d-r);return l.setDate(l.getDate()+f),l.setHours(23,59,59,999),l}function FTe(e){const t=Gn(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function OY(e){const t=Gn(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function jTe(e,t){const n=Gn(e),r=Gn(t);return+n==+r}function $Te(e,t){const n=_d(e),r=_d(t);return+n==+r}function UTe(e,t){const n=Gn(e),r=Gn(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function VTe(e,t){const n=Gn(e),r=Gn(t);return n.getFullYear()===r.getFullYear()}function HTe(e,t){const n=p5(e),r=p5(t);return+n==+r}function tm(e,t){const n=Gn(e),r=Gn(t);return n.getTime()>r.getTime()}function _0(e,t){const n=Gn(e),r=Gn(t);return+n<+r}function dx(e,t){const n=+Gn(e),[r,l]=[+Gn(t.start),+Gn(t.end)].sort((d,f)=>d-f);return n>=r&&n<=l}function WTe(){return Object.assign({},M0())}function YTe(e,t){const n=t instanceof Date?$o(t,0):new t(0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}const GTe=10;class LY{constructor(){Wn(this,"subPriority",0)}validate(t,n){return!0}}class qTe extends LY{constructor(t,n,r,l,d){super(),this.value=t,this.validateValue=n,this.setValue=r,this.priority=l,d&&(this.subPriority=d)}validate(t,n){return this.validateValue(t,this.value,n)}set(t,n,r){return this.setValue(t,n,this.value,r)}}class ZTe extends LY{constructor(){super(...arguments);Wn(this,"priority",GTe);Wn(this,"subPriority",-1)}set(n,r){return r.timestampIsSet?n:$o(n,YTe(n,Date))}}class Io{run(t,n,r,l){const d=this.parse(t,n,r,l);return d?{setter:new qTe(d.value,this.validate,this.set,this.priority,this.subPriority),rest:d.rest}:null}validate(t,n,r){return!0}}class KTe extends Io{constructor(){super(...arguments);Wn(this,"priority",140);Wn(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,l){switch(r){case"G":case"GG":case"GGG":return l.era(n,{width:"abbreviated"})||l.era(n,{width:"narrow"});case"GGGGG":return l.era(n,{width:"narrow"});case"GGGG":default:return l.era(n,{width:"wide"})||l.era(n,{width:"abbreviated"})||l.era(n,{width:"narrow"})}}set(n,r,l){return r.era=l,n.setFullYear(l,0,1),n.setHours(0,0,0,0),n}}const Xi={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},fd={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Qi(e,t){return e&&{value:t(e.value),rest:e.rest}}function Ci(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function pd(e,t){const n=t.match(e);if(!n)return null;if(n[0]==="Z")return{value:0,rest:t.slice(1)};const r=n[1]==="+"?1:-1,l=n[2]?parseInt(n[2],10):0,d=n[3]?parseInt(n[3],10):0,f=n[5]?parseInt(n[5],10):0;return{value:r*(l*Ek+d*wk+f*_Te),rest:t.slice(n[0].length)}}function NY(e){return Ci(Xi.anyDigitsSigned,e)}function zi(e,t){switch(e){case 1:return Ci(Xi.singleDigit,t);case 2:return Ci(Xi.twoDigits,t);case 3:return Ci(Xi.threeDigits,t);case 4:return Ci(Xi.fourDigits,t);default:return Ci(new RegExp("^\\d{1,"+e+"}"),t)}}function DS(e,t){switch(e){case 1:return Ci(Xi.singleDigitSigned,t);case 2:return Ci(Xi.twoDigitsSigned,t);case 3:return Ci(Xi.threeDigitsSigned,t);case 4:return Ci(Xi.fourDigitsSigned,t);default:return Ci(new RegExp("^-?\\d{1,"+e+"}"),t)}}function y4(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function zY(e,t){const n=t>0,r=n?t:1-t;let l;if(r<=50)l=e||100;else{const d=r+50,f=Math.trunc(d/100)*100,y=e>=d%100;l=e+f-(y?100:0)}return n?l:1-l}function BY(e){return e%400===0||e%4===0&&e%100!==0}class XTe extends Io{constructor(){super(...arguments);Wn(this,"priority",130);Wn(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,l){const d=f=>({year:f,isTwoDigitYear:r==="yy"});switch(r){case"y":return Qi(zi(4,n),d);case"yo":return Qi(l.ordinalNumber(n,{unit:"year"}),d);default:return Qi(zi(r.length,n),d)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,l){const d=n.getFullYear();if(l.isTwoDigitYear){const y=zY(l.year,d);return n.setFullYear(y,0,1),n.setHours(0,0,0,0),n}const f=!("era"in r)||r.era===1?l.year:1-l.year;return n.setFullYear(f,0,1),n.setHours(0,0,0,0),n}}class QTe extends Io{constructor(){super(...arguments);Wn(this,"priority",130);Wn(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,l){const d=f=>({year:f,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Qi(zi(4,n),d);case"Yo":return Qi(l.ordinalNumber(n,{unit:"year"}),d);default:return Qi(zi(r.length,n),d)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,l,d){const f=p4(n,d);if(l.isTwoDigitYear){const a=zY(l.year,f);return n.setFullYear(a,0,d.firstWeekContainsDate),n.setHours(0,0,0,0),Ad(n,d)}const y=!("era"in r)||r.era===1?l.year:1-l.year;return n.setFullYear(y,0,d.firstWeekContainsDate),n.setHours(0,0,0,0),Ad(n,d)}}class JTe extends Io{constructor(){super(...arguments);Wn(this,"priority",130);Wn(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return DS(r==="R"?4:r.length,n)}set(n,r,l){const d=$o(n,0);return d.setFullYear(l,0,4),d.setHours(0,0,0,0),nv(d)}}class eSe extends Io{constructor(){super(...arguments);Wn(this,"priority",130);Wn(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return DS(r==="u"?4:r.length,n)}set(n,r,l){return n.setFullYear(l,0,1),n.setHours(0,0,0,0),n}}class tSe extends Io{constructor(){super(...arguments);Wn(this,"priority",120);Wn(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,l){switch(r){case"Q":case"QQ":return zi(r.length,n);case"Qo":return l.ordinalNumber(n,{unit:"quarter"});case"QQQ":return l.quarter(n,{width:"abbreviated",context:"formatting"})||l.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return l.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return l.quarter(n,{width:"wide",context:"formatting"})||l.quarter(n,{width:"abbreviated",context:"formatting"})||l.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,l){return n.setMonth((l-1)*3,1),n.setHours(0,0,0,0),n}}class nSe extends Io{constructor(){super(...arguments);Wn(this,"priority",120);Wn(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,l){switch(r){case"q":case"qq":return zi(r.length,n);case"qo":return l.ordinalNumber(n,{unit:"quarter"});case"qqq":return l.quarter(n,{width:"abbreviated",context:"standalone"})||l.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return l.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return l.quarter(n,{width:"wide",context:"standalone"})||l.quarter(n,{width:"abbreviated",context:"standalone"})||l.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,l){return n.setMonth((l-1)*3,1),n.setHours(0,0,0,0),n}}class rSe extends Io{constructor(){super(...arguments);Wn(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Wn(this,"priority",110)}parse(n,r,l){const d=f=>f-1;switch(r){case"M":return Qi(Ci(Xi.month,n),d);case"MM":return Qi(zi(2,n),d);case"Mo":return Qi(l.ordinalNumber(n,{unit:"month"}),d);case"MMM":return l.month(n,{width:"abbreviated",context:"formatting"})||l.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return l.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return l.month(n,{width:"wide",context:"formatting"})||l.month(n,{width:"abbreviated",context:"formatting"})||l.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,l){return n.setMonth(l,1),n.setHours(0,0,0,0),n}}class oSe extends Io{constructor(){super(...arguments);Wn(this,"priority",110);Wn(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,l){const d=f=>f-1;switch(r){case"L":return Qi(Ci(Xi.month,n),d);case"LL":return Qi(zi(2,n),d);case"Lo":return Qi(l.ordinalNumber(n,{unit:"month"}),d);case"LLL":return l.month(n,{width:"abbreviated",context:"standalone"})||l.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return l.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return l.month(n,{width:"wide",context:"standalone"})||l.month(n,{width:"abbreviated",context:"standalone"})||l.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,l){return n.setMonth(l,1),n.setHours(0,0,0,0),n}}function iSe(e,t,n){const r=Gn(e),l=kY(r,n)-t;return r.setDate(r.getDate()-l*7),r}class aSe extends Io{constructor(){super(...arguments);Wn(this,"priority",100);Wn(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,l){switch(r){case"w":return Ci(Xi.week,n);case"wo":return l.ordinalNumber(n,{unit:"week"});default:return zi(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,l,d){return Ad(iSe(n,l,d),d)}}function sSe(e,t){const n=Gn(e),r=f4(n)-t;return n.setDate(n.getDate()-r*7),n}class lSe extends Io{constructor(){super(...arguments);Wn(this,"priority",100);Wn(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,l){switch(r){case"I":return Ci(Xi.week,n);case"Io":return l.ordinalNumber(n,{unit:"week"});default:return zi(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,l){return nv(sSe(n,l))}}const cSe=[31,28,31,30,31,30,31,31,30,31,30,31],uSe=[31,29,31,30,31,30,31,31,30,31,30,31];class dSe extends Io{constructor(){super(...arguments);Wn(this,"priority",90);Wn(this,"subPriority",1);Wn(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,l){switch(r){case"d":return Ci(Xi.date,n);case"do":return l.ordinalNumber(n,{unit:"date"});default:return zi(r.length,n)}}validate(n,r){const l=n.getFullYear(),d=BY(l),f=n.getMonth();return d?r>=1&&r<=uSe[f]:r>=1&&r<=cSe[f]}set(n,r,l){return n.setDate(l),n.setHours(0,0,0,0),n}}class hSe extends Io{constructor(){super(...arguments);Wn(this,"priority",90);Wn(this,"subpriority",1);Wn(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,l){switch(r){case"D":case"DD":return Ci(Xi.dayOfYear,n);case"Do":return l.ordinalNumber(n,{unit:"date"});default:return zi(r.length,n)}}validate(n,r){const l=n.getFullYear();return BY(l)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,l){return n.setMonth(0,l),n.setHours(0,0,0,0),n}}function b4(e,t,n){const r=M0(),l=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,d=Gn(e),f=d.getDay(),a=(t%7+7)%7,E=7-l,C=t<0||t>6?t-(f+E)%7:(a+E)%7-(f+E)%7;return fm(d,C)}class fSe extends Io{constructor(){super(...arguments);Wn(this,"priority",90);Wn(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,l){switch(r){case"E":case"EE":case"EEE":return l.day(n,{width:"abbreviated",context:"formatting"})||l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return l.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return l.day(n,{width:"wide",context:"formatting"})||l.day(n,{width:"abbreviated",context:"formatting"})||l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,l,d){return n=b4(n,l,d),n.setHours(0,0,0,0),n}}class pSe extends Io{constructor(){super(...arguments);Wn(this,"priority",90);Wn(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,l,d){const f=y=>{const a=Math.floor((y-1)/7)*7;return(y+d.weekStartsOn+6)%7+a};switch(r){case"e":case"ee":return Qi(zi(r.length,n),f);case"eo":return Qi(l.ordinalNumber(n,{unit:"day"}),f);case"eee":return l.day(n,{width:"abbreviated",context:"formatting"})||l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"});case"eeeee":return l.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return l.day(n,{width:"wide",context:"formatting"})||l.day(n,{width:"abbreviated",context:"formatting"})||l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,l,d){return n=b4(n,l,d),n.setHours(0,0,0,0),n}}class mSe extends Io{constructor(){super(...arguments);Wn(this,"priority",90);Wn(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,l,d){const f=y=>{const a=Math.floor((y-1)/7)*7;return(y+d.weekStartsOn+6)%7+a};switch(r){case"c":case"cc":return Qi(zi(r.length,n),f);case"co":return Qi(l.ordinalNumber(n,{unit:"day"}),f);case"ccc":return l.day(n,{width:"abbreviated",context:"standalone"})||l.day(n,{width:"short",context:"standalone"})||l.day(n,{width:"narrow",context:"standalone"});case"ccccc":return l.day(n,{width:"narrow",context:"standalone"});case"cccccc":return l.day(n,{width:"short",context:"standalone"})||l.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return l.day(n,{width:"wide",context:"standalone"})||l.day(n,{width:"abbreviated",context:"standalone"})||l.day(n,{width:"short",context:"standalone"})||l.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,l,d){return n=b4(n,l,d),n.setHours(0,0,0,0),n}}function gSe(e){let n=Gn(e).getDay();return n===0&&(n=7),n}function ySe(e,t){const n=Gn(e),r=gSe(n),l=t-r;return fm(n,l)}class bSe extends Io{constructor(){super(...arguments);Wn(this,"priority",90);Wn(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,l){const d=f=>f===0?7:f;switch(r){case"i":case"ii":return zi(r.length,n);case"io":return l.ordinalNumber(n,{unit:"day"});case"iii":return Qi(l.day(n,{width:"abbreviated",context:"formatting"})||l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"}),d);case"iiiii":return Qi(l.day(n,{width:"narrow",context:"formatting"}),d);case"iiiiii":return Qi(l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"}),d);case"iiii":default:return Qi(l.day(n,{width:"wide",context:"formatting"})||l.day(n,{width:"abbreviated",context:"formatting"})||l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"}),d)}}validate(n,r){return r>=1&&r<=7}set(n,r,l){return n=ySe(n,l),n.setHours(0,0,0,0),n}}class vSe extends Io{constructor(){super(...arguments);Wn(this,"priority",80);Wn(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,l){switch(r){case"a":case"aa":case"aaa":return l.dayPeriod(n,{width:"abbreviated",context:"formatting"})||l.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return l.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return l.dayPeriod(n,{width:"wide",context:"formatting"})||l.dayPeriod(n,{width:"abbreviated",context:"formatting"})||l.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,l){return n.setHours(y4(l),0,0,0),n}}class _Se extends Io{constructor(){super(...arguments);Wn(this,"priority",80);Wn(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,l){switch(r){case"b":case"bb":case"bbb":return l.dayPeriod(n,{width:"abbreviated",context:"formatting"})||l.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return l.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return l.dayPeriod(n,{width:"wide",context:"formatting"})||l.dayPeriod(n,{width:"abbreviated",context:"formatting"})||l.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,l){return n.setHours(y4(l),0,0,0),n}}class xSe extends Io{constructor(){super(...arguments);Wn(this,"priority",80);Wn(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,l){switch(r){case"B":case"BB":case"BBB":return l.dayPeriod(n,{width:"abbreviated",context:"formatting"})||l.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return l.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return l.dayPeriod(n,{width:"wide",context:"formatting"})||l.dayPeriod(n,{width:"abbreviated",context:"formatting"})||l.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,l){return n.setHours(y4(l),0,0,0),n}}class wSe extends Io{constructor(){super(...arguments);Wn(this,"priority",70);Wn(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,l){switch(r){case"h":return Ci(Xi.hour12h,n);case"ho":return l.ordinalNumber(n,{unit:"hour"});default:return zi(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,l){const d=n.getHours()>=12;return d&&l<12?n.setHours(l+12,0,0,0):!d&&l===12?n.setHours(0,0,0,0):n.setHours(l,0,0,0),n}}class ESe extends Io{constructor(){super(...arguments);Wn(this,"priority",70);Wn(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,l){switch(r){case"H":return Ci(Xi.hour23h,n);case"Ho":return l.ordinalNumber(n,{unit:"hour"});default:return zi(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,l){return n.setHours(l,0,0,0),n}}class TSe extends Io{constructor(){super(...arguments);Wn(this,"priority",70);Wn(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,l){switch(r){case"K":return Ci(Xi.hour11h,n);case"Ko":return l.ordinalNumber(n,{unit:"hour"});default:return zi(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,l){return n.getHours()>=12&&l<12?n.setHours(l+12,0,0,0):n.setHours(l,0,0,0),n}}class SSe extends Io{constructor(){super(...arguments);Wn(this,"priority",70);Wn(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,l){switch(r){case"k":return Ci(Xi.hour24h,n);case"ko":return l.ordinalNumber(n,{unit:"hour"});default:return zi(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,l){const d=l<=24?l%24:l;return n.setHours(d,0,0,0),n}}class CSe extends Io{constructor(){super(...arguments);Wn(this,"priority",60);Wn(this,"incompatibleTokens",["t","T"])}parse(n,r,l){switch(r){case"m":return Ci(Xi.minute,n);case"mo":return l.ordinalNumber(n,{unit:"minute"});default:return zi(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,l){return n.setMinutes(l,0,0),n}}class kSe extends Io{constructor(){super(...arguments);Wn(this,"priority",50);Wn(this,"incompatibleTokens",["t","T"])}parse(n,r,l){switch(r){case"s":return Ci(Xi.second,n);case"so":return l.ordinalNumber(n,{unit:"second"});default:return zi(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,l){return n.setSeconds(l,0),n}}class ASe extends Io{constructor(){super(...arguments);Wn(this,"priority",30);Wn(this,"incompatibleTokens",["t","T"])}parse(n,r){const l=d=>Math.trunc(d*Math.pow(10,-r.length+3));return Qi(zi(r.length,n),l)}set(n,r,l){return n.setMilliseconds(l),n}}class MSe extends Io{constructor(){super(...arguments);Wn(this,"priority",10);Wn(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return pd(fd.basicOptionalMinutes,n);case"XX":return pd(fd.basic,n);case"XXXX":return pd(fd.basicOptionalSeconds,n);case"XXXXX":return pd(fd.extendedOptionalSeconds,n);case"XXX":default:return pd(fd.extended,n)}}set(n,r,l){return r.timestampIsSet?n:$o(n,n.getTime()-TS(n)-l)}}class DSe extends Io{constructor(){super(...arguments);Wn(this,"priority",10);Wn(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return pd(fd.basicOptionalMinutes,n);case"xx":return pd(fd.basic,n);case"xxxx":return pd(fd.basicOptionalSeconds,n);case"xxxxx":return pd(fd.extendedOptionalSeconds,n);case"xxx":default:return pd(fd.extended,n)}}set(n,r,l){return r.timestampIsSet?n:$o(n,n.getTime()-TS(n)-l)}}class RSe extends Io{constructor(){super(...arguments);Wn(this,"priority",40);Wn(this,"incompatibleTokens","*")}parse(n){return NY(n)}set(n,r,l){return[$o(n,l*1e3),{timestampIsSet:!0}]}}class ISe extends Io{constructor(){super(...arguments);Wn(this,"priority",20);Wn(this,"incompatibleTokens","*")}parse(n){return NY(n)}set(n,r,l){return[$o(n,l),{timestampIsSet:!0}]}}const PSe={G:new KTe,y:new XTe,Y:new QTe,R:new JTe,u:new eSe,Q:new tSe,q:new nSe,M:new rSe,L:new oSe,w:new aSe,I:new lSe,d:new dSe,D:new hSe,E:new fSe,e:new pSe,c:new mSe,i:new bSe,a:new vSe,b:new _Se,B:new xSe,h:new wSe,H:new ESe,K:new TSe,k:new SSe,m:new CSe,s:new kSe,S:new ASe,X:new MSe,x:new DSe,t:new RSe,T:new ISe},OSe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,LSe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,NSe=/^'([^]*?)'?$/,zSe=/''/g,BSe=/\S/,FSe=/[a-zA-Z]/;function aM(e,t,n,r){const l=WTe(),d=r?.locale??l.locale??TY,f=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??l.firstWeekContainsDate??l.locale?.options?.firstWeekContainsDate??1,y=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??l.weekStartsOn??l.locale?.options?.weekStartsOn??0;if(t==="")return e===""?Gn(n):$o(n,NaN);const a={firstWeekContainsDate:f,weekStartsOn:y,locale:d},E=[new ZTe],C=t.match(LSe).map($=>{const Z=$[0];if(Z in SS){const q=SS[Z];return q($,d.formatLong)}return $}).join("").match(OSe),M=[];for(let $ of C){!r?.useAdditionalWeekYearTokens&&DY($)&&d5($,t,e),!r?.useAdditionalDayOfYearTokens&&MY($)&&d5($,t,e);const Z=$[0],q=PSe[Z];if(q){const{incompatibleTokens:K}=q;if(Array.isArray(K)){const te=M.find(ie=>K.includes(ie.token)||ie.token===Z);if(te)throw new RangeError(`The format string mustn't contain \`${te.fullToken}\` and \`${$}\` at the same time`)}else if(q.incompatibleTokens==="*"&&M.length>0)throw new RangeError(`The format string mustn't contain \`${$}\` and any other token at the same time`);M.push({token:Z,fullToken:$});const Q=q.run(e,$,d.match,a);if(!Q)return $o(n,NaN);E.push(Q.setter),e=Q.rest}else{if(Z.match(FSe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Z+"`");if($==="''"?$="'":Z==="'"&&($=jSe($)),e.indexOf($)===0)e=e.slice($.length);else return $o(n,NaN)}}if(e.length>0&&BSe.test(e))return $o(n,NaN);const P=E.map($=>$.priority).sort(($,Z)=>Z-$).filter(($,Z,q)=>q.indexOf($)===Z).map($=>E.filter(Z=>Z.priority===$).sort((Z,q)=>q.subPriority-Z.subPriority)).map($=>$[0]);let N=Gn(n);if(isNaN(N.getTime()))return $o(n,NaN);const F={};for(const $ of P){if(!$.validate(N,a))return $o(n,NaN);const Z=$.set(N,F,a);Array.isArray(Z)?(N=Z[0],Object.assign(F,Z[1])):N=Z}return $o(n,N)}function jSe(e){return e.match(NSe)[1].replace(zSe,"'")}function $Se(e,t){const n=t?.additionalDigits??2,r=WSe(e);let l;if(r.date){const a=YSe(r.date,n);l=GSe(a.restDateString,a.year)}if(!l||isNaN(l.getTime()))return new Date(NaN);const d=l.getTime();let f=0,y;if(r.time&&(f=qSe(r.time),isNaN(f)))return new Date(NaN);if(r.timezone){if(y=ZSe(r.timezone),isNaN(y))return new Date(NaN)}else{const a=new Date(d+f),E=new Date(0);return E.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),E.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),E}return new Date(d+f+y)}const DE={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},USe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,VSe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,HSe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function WSe(e){const t={},n=e.split(DE.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],DE.timeZoneDelimiter.test(t.date)&&(t.date=e.split(DE.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const l=DE.timezone.exec(r);l?(t.time=r.replace(l[1],""),t.timezone=l[1]):t.time=r}return t}function YSe(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const l=r[1]?parseInt(r[1]):null,d=r[2]?parseInt(r[2]):null;return{year:d===null?l:d*100,restDateString:e.slice((r[1]||r[2]).length)}}function GSe(e,t){if(t===null)return new Date(NaN);const n=e.match(USe);if(!n)return new Date(NaN);const r=!!n[4],l=Y_(n[1]),d=Y_(n[2])-1,f=Y_(n[3]),y=Y_(n[4]),a=Y_(n[5])-1;if(r)return eCe(t,y,a)?KSe(t,y,a):new Date(NaN);{const E=new Date(0);return!QSe(t,d,f)||!JSe(t,l)?new Date(NaN):(E.setUTCFullYear(t,d,Math.max(l,f)),E)}}function Y_(e){return e?parseInt(e):1}function qSe(e){const t=e.match(VSe);if(!t)return NaN;const n=sM(t[1]),r=sM(t[2]),l=sM(t[3]);return tCe(n,r,l)?n*Ek+r*wk+l*1e3:NaN}function sM(e){return e&&parseFloat(e.replace(",","."))||0}function ZSe(e){if(e==="Z")return 0;const t=e.match(HSe);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),l=t[3]&&parseInt(t[3])||0;return nCe(r,l)?n*(r*Ek+l*wk):NaN}function KSe(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const l=r.getUTCDay()||7,d=(t-1)*7+n+1-l;return r.setUTCDate(r.getUTCDate()+d),r}const XSe=[31,null,31,30,31,30,31,31,30,31,30,31];function FY(e){return e%400===0||e%4===0&&e%100!==0}function QSe(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(XSe[t]||(FY(e)?29:28))}function JSe(e,t){return t>=1&&t<=(FY(e)?366:365)}function eCe(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function tCe(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function nCe(e,t){return t>=0&&t<=59}function rCe(e,t){return m4(e,t*1e3)}function oCe(e,t){let n=Gn(e);return isNaN(+n)?$o(e,NaN):(t.year!=null&&n.setFullYear(t.year),t.month!=null&&(n=Es(n,t.month)),t.date!=null&&n.setDate(t.date),t.hours!=null&&n.setHours(t.hours),t.minutes!=null&&n.setMinutes(t.minutes),t.seconds!=null&&n.setSeconds(t.seconds),t.milliseconds!=null&&n.setMilliseconds(t.milliseconds),n)}function iCe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,g5(e,t)}function g5(e,t){return g5=Object.setPrototypeOf||function(r,l){return r.__proto__=l,r},g5(e,t)}function aCe(e,t){if(e==null)return{};var n={},r=Object.keys(e),l,d;for(d=0;d<r.length;d++)l=r[d],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}function wB(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sCe(e,t,n){return e===t?!0:e.correspondingElement?e.correspondingElement.classList.contains(n):e.classList.contains(n)}function lCe(e,t,n){if(e===t)return!0;for(;e.parentNode||e.host;){if(e.parentNode&&sCe(e,t,n))return!0;e=e.parentNode||e.host}return e}function cCe(e){return document.documentElement.clientWidth<=e.clientX||document.documentElement.clientHeight<=e.clientY}var uCe=function(){if(!(typeof window>"u"||typeof window.addEventListener!="function")){var t=!1,n=Object.defineProperty({},"passive",{get:function(){t=!0}}),r=function(){};return window.addEventListener("testPassiveEventSupport",r,n),window.removeEventListener("testPassiveEventSupport",r,n),t}};function dCe(e){return e===void 0&&(e=0),function(){return++e}}var hCe=dCe(),y5,RE={},lM={},fCe=["touchstart","touchmove"],pCe="ignore-react-onclickoutside";function EB(e,t){var n={},r=fCe.indexOf(t)!==-1;return r&&y5&&(n.passive=!e.props.preventDefault),n}function Sk(e,t){var n,r,l=e.displayName||e.name||"Component";return r=n=function(d){iCe(f,d);function f(a){var E;return E=d.call(this,a)||this,E.__outsideClickHandler=function(C){if(typeof E.__clickOutsideHandlerProp=="function"){E.__clickOutsideHandlerProp(C);return}var M=E.getInstance();if(typeof M.props.handleClickOutside=="function"){M.props.handleClickOutside(C);return}if(typeof M.handleClickOutside=="function"){M.handleClickOutside(C);return}throw new Error("WrappedComponent: "+l+" lacks a handleClickOutside(event) function for processing outside click events.")},E.__getComponentNode=function(){var C=E.getInstance();return t&&typeof t.setClickOutsideRef=="function"?t.setClickOutsideRef()(C):typeof C.setClickOutsideRef=="function"?C.setClickOutsideRef():lm.findDOMNode(C)},E.enableOnClickOutside=function(){if(!(typeof document>"u"||lM[E._uid])){typeof y5>"u"&&(y5=uCe()),lM[E._uid]=!0;var C=E.props.eventTypes;C.forEach||(C=[C]),RE[E._uid]=function(M){if(E.componentNode!==null&&(E.props.preventDefault&&M.preventDefault(),E.props.stopPropagation&&M.stopPropagation(),!(E.props.excludeScrollbar&&cCe(M)))){var P=M.composed&&M.composedPath&&M.composedPath().shift()||M.target;lCe(P,E.componentNode,E.props.outsideClickIgnoreClass)===document&&E.__outsideClickHandler(M)}},C.forEach(function(M){document.addEventListener(M,RE[E._uid],EB(wB(E),M))})}},E.disableOnClickOutside=function(){delete lM[E._uid];var C=RE[E._uid];if(C&&typeof document<"u"){var M=E.props.eventTypes;M.forEach||(M=[M]),M.forEach(function(P){return document.removeEventListener(P,C,EB(wB(E),P))}),delete RE[E._uid]}},E.getRef=function(C){return E.instanceRef=C},E._uid=hCe(),E}var y=f.prototype;return y.getInstance=function(){if(e.prototype&&!e.prototype.isReactComponent)return this;var E=this.instanceRef;return E.getInstance?E.getInstance():E},y.componentDidMount=function(){if(!(typeof document>"u"||!document.createElement)){var E=this.getInstance();if(t&&typeof t.handleClickOutside=="function"&&(this.__clickOutsideHandlerProp=t.handleClickOutside(E),typeof this.__clickOutsideHandlerProp!="function"))throw new Error("WrappedComponent: "+l+" lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=this.__getComponentNode(),!this.props.disableOnClickOutside&&this.enableOnClickOutside()}},y.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},y.componentWillUnmount=function(){this.disableOnClickOutside()},y.render=function(){var E=this.props;E.excludeScrollbar;var C=aCe(E,["excludeScrollbar"]);return e.prototype&&e.prototype.isReactComponent?C.ref=this.getRef:C.wrappedRef=this.getRef,C.disableOnClickOutside=this.disableOnClickOutside,C.enableOnClickOutside=this.enableOnClickOutside,j.createElement(e,C)},f}(j.Component),n.displayName="OnClickOutside("+l+")",n.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:t&&t.excludeScrollbar||!1,outsideClickIgnoreClass:pCe,preventDefault:!1,stopPropagation:!1},n.getClass=function(){return e.getClass?e.getClass():e},r}const jY={...A1},mCe=jY.useInsertionEffect,gCe=mCe||(e=>e());function yCe(e){const t=j.useRef(()=>{});return gCe(()=>{t.current=e}),j.useCallback(function(){for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t.current==null?void 0:t.current(...r)},[])}var b5=typeof document<"u"?j.useLayoutEffect:j.useEffect;function v5(){return v5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v5.apply(this,arguments)}let TB=!1,bCe=0;const SB=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+bCe++;function vCe(){const[e,t]=j.useState(()=>TB?SB():void 0);return b5(()=>{e==null&&t(SB())},[]),j.useEffect(()=>{TB=!0},[]),e}const _Ce=jY.useId,$Y=_Ce||vCe,xCe=j.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:l},middlewareData:{arrow:d}},width:f=14,height:y=7,tipRadius:a=0,strokeWidth:E=0,staticOffset:C,stroke:M,d:P,style:{transform:N,...F}={},...$}=t,Z=$Y();if(!l)return null;const q=E*2,K=q/2,Q=f/2*(a/-8+1),te=y/2*a/4,[ie,ue]=r.split("-"),re=DH.isRTL(l),me=!!P,ve=ie==="top"||ie==="bottom",De=C&&ue==="end"?"bottom":"top";let je=C&&ue==="end"?"right":"left";C&&re&&(je=ue==="end"?"left":"right");const Be=d?.x!=null?C||d.x:"",Ue=d?.y!=null?C||d.y:"",Ge=P||"M0,0"+(" H"+f)+(" L"+(f-Q)+","+(y-te))+(" Q"+f/2+","+y+" "+Q+","+(y-te))+" Z",ze={top:me?"rotate(180deg)":"",left:me?"rotate(90deg)":"rotate(-90deg)",bottom:me?"":"rotate(180deg)",right:me?"rotate(-90deg)":"rotate(90deg)"}[ie];return j.createElement("svg",v5({},$,{"aria-hidden":!0,ref:n,width:me?f:f+q,height:f,viewBox:"0 0 "+f+" "+(y>f?y:f),style:{position:"absolute",pointerEvents:"none",[je]:Be,[De]:Ue,[ie]:ve||me?"100%":"calc(100% - "+q/2+"px)",transform:""+ze+(N??""),...F}}),q>0&&j.createElement("path",{clipPath:"url(#"+Z+")",fill:"none",stroke:M,strokeWidth:q+(P?0:1),d:Ge}),j.createElement("path",{stroke:q&&!P?$.fill:"none",d:Ge}),j.createElement("clipPath",{id:Z},j.createElement("rect",{x:-K,y:K*(me?-1:1),width:f+q,height:f})))});function wCe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(l=>l(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(l=>l!==n))||[])}}}const ECe=j.createContext(null),TCe=j.createContext(null),SCe=()=>{var e;return((e=j.useContext(ECe))==null?void 0:e.id)||null},CCe=()=>j.useContext(TCe);function kCe(e){var t;e===void 0&&(e={});const{open:n=!1,onOpenChange:r,nodeId:l}=e,[d,f]=j.useState(null),[y,a]=j.useState(null),C=((t=e.elements)==null?void 0:t.reference)||d;b5(()=>{C&&($.current=C)},[C]);const M=lpe({...e,elements:{...e.elements,...y&&{reference:y}}}),P=CCe(),N=SCe()!=null,F=yCe((me,ve,De)=>{Z.current.openEvent=me?ve:void 0,q.emit("openchange",{open:me,event:ve,reason:De,nested:N}),r?.(me,ve,De)}),$=j.useRef(null),Z=j.useRef({}),q=j.useState(()=>wCe())[0],K=$Y(),Q=j.useCallback(me=>{const ve=kl(me)?{getBoundingClientRect:()=>me.getBoundingClientRect(),contextElement:me}:me;a(ve),M.refs.setReference(ve)},[M.refs]),te=j.useCallback(me=>{(kl(me)||me===null)&&($.current=me,f(me)),(kl(M.refs.reference.current)||M.refs.reference.current===null||me!==null&&!kl(me))&&M.refs.setReference(me)},[M.refs]),ie=j.useMemo(()=>({...M.refs,setReference:te,setPositionReference:Q,domReference:$}),[M.refs,te,Q]),ue=j.useMemo(()=>({...M.elements,domReference:C}),[M.elements,C]),re=j.useMemo(()=>({...M,refs:ie,elements:ue,dataRef:Z,nodeId:l,floatingId:K,events:q,open:n,onOpenChange:F}),[M,l,K,q,n,F,ie,ue]);return b5(()=>{const me=P?.nodesRef.current.find(ve=>ve.id===l);me&&(me.context=re)}),j.useMemo(()=>({...M,context:re,refs:ie,elements:ue}),[M,ie,ue,re])}/*!
  react-datepicker v6.9.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/function Da(e,t,n){return t=RS(t),DCe(e,UY()?Reflect.construct(t,n||[],RS(e).constructor):t.apply(e,n))}function UY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UY=function(){return!!e})()}function CB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function Lh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CB(Object(n),!0).forEach(function(r){He(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ACe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VY(e){var t=ACe(e,"string");return typeof t=="symbol"?t:t+""}function _5(e){"@babel/helpers - typeof";return _5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_5(e)}function Ra(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,VY(r.key),r)}}function Ia(e,t,n){return t&&kB(e.prototype,t),n&&kB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function He(e,t,n){return t=VY(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hx(){return hx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hx.apply(this,arguments)}function Pa(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x5(e,t)}function RS(e){return RS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},RS(e)}function x5(e,t){return x5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,l){return r.__proto__=l,r},x5(e,t)}function MCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DCe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MCe(e)}function nm(e){return RCe(e)||ICe(e)||PCe(e)||OCe()}function RCe(e){if(Array.isArray(e))return w5(e)}function ICe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function PCe(e,t){if(e){if(typeof e=="string")return w5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w5(e,t)}}function w5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function OCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Wx=12,LCe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function Uo(e){var t=e?typeof e=="string"||e instanceof String?$Se(e):Gn(e):new Date;return wp(t)?t:null}function NCe(e,t,n,r,l){var d=null,f=qh(n)||qh(i0()),y=!0;return Array.isArray(t)?(t.forEach(function(a){var E=aM(e,a,new Date,{locale:f,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});r&&(y=wp(E,l)&&e===li(E,a,n)),wp(E,l)&&y&&(d=E)}),d):(d=aM(e,t,new Date,{locale:f,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0}),r?y=wp(d)&&e===li(d,t,n):wp(d)||(t=t.match(LCe).map(function(a){var E=a[0];if(E==="p"||E==="P"){var C=SS[E];return f?C(a,f.formatLong):E}return a}).join(""),e.length>0&&(d=aM(e,t.slice(0,e.length),new Date,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})),wp(d)||(d=new Date(e))),wp(d)&&y?d:null)}function wp(e,t){return t=t||new Date("1/1/1000"),cx(e)&&!_0(e,t)}function li(e,t,n){if(n==="en")return yB(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=qh(n);return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),!r&&i0()&&qh(i0())&&(r=qh(i0())),yB(e,t,{locale:r||null,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function lc(e,t){var n=t.dateFormat,r=t.locale;return e&&li(e,Array.isArray(n)?n[0]:n,r)||""}function zCe(e,t,n){if(!e)return"";var r=lc(e,n),l=t?lc(t,n):"";return"".concat(r," - ").concat(l)}function BCe(e,t){if(!(e!=null&&e.length))return"";var n=lc(e[0],t);if(e.length===1)return n;if(e.length===2){var r=lc(e[1],t);return"".concat(n,", ").concat(r)}var l=e.length-1;return"".concat(n," (+").concat(l,")")}function cM(e,t){var n=t.hour,r=n===void 0?0:n,l=t.minute,d=l===void 0?0:l,f=t.second,y=f===void 0?0:f;return bT(yT(gT(e,y),d),r)}function FCe(e,t){return t&&qh(t)||i0()&&qh(i0()),f4(e)}function jCe(e,t){return li(e,"ddd",t)}function $Ce(e){return _d(e)}function Hp(e,t,n){var r=qh(t||i0());return Ad(e,{locale:r,weekStartsOn:n})}function Wp(e){return IY(e)}function J_(e){return Tk(e)}function AB(e){return p5(e)}function MB(){return _d(Uo())}function UCe(e){return PY(e)}function ud(e,t){return e&&t?VTe(e,t):!e&&!t}function El(e,t){return e&&t?UTe(e,t):!e&&!t}function IS(e,t){return e&&t?HTe(e,t):!e&&!t}function Do(e,t){return e&&t?$Te(e,t):!e&&!t}function Xg(e,t){return e&&t?jTe(e,t):!e&&!t}function e1(e,t,n){var r,l=_d(t),d=m5(n);try{r=dx(e,{start:l,end:d})}catch{r=!1}return r}function i0(){var e=typeof window<"u"?window:globalThis;return e.__localeId__}function qh(e){if(typeof e=="string"){var t=typeof window<"u"?window:globalThis;return t.__localeData__?t.__localeData__[e]:null}else return e}function VCe(e,t,n){return t(li(e,"EEEE",n))}function HCe(e,t){return li(e,"EEEEEE",t)}function WCe(e,t){return li(e,"EEE",t)}function v4(e,t){return li(Es(Uo(),e),"LLLL",t)}function HY(e,t){return li(Es(Uo(),e),"LLL",t)}function YCe(e,t){return li(Hy(Uo(),e),"QQQ",t)}function Ck(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.minDate,r=t.maxDate,l=t.excludeDates,d=t.excludeDateIntervals,f=t.includeDates,y=t.includeDateIntervals,a=t.filterDate;return kk(e,{minDate:n,maxDate:r})||l&&l.some(function(E){return Do(e,E.date?E.date:E)})||d&&d.some(function(E){var C=E.start,M=E.end;return dx(e,{start:C,end:M})})||f&&!f.some(function(E){return Do(e,E)})||y&&!y.some(function(E){var C=E.start,M=E.end;return dx(e,{start:C,end:M})})||a&&!a(Uo(e))||!1}function _4(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.excludeDates,r=t.excludeDateIntervals;return r&&r.length>0?r.some(function(l){var d=l.start,f=l.end;return dx(e,{start:d,end:f})}):n&&n.some(function(l){return Do(e,l.date?l.date:l)})||!1}function vT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.minDate,r=t.maxDate,l=t.excludeDates,d=t.includeDates,f=t.filterDate;return kk(e,{minDate:IY(n),maxDate:FTe(r)})||l&&l.some(function(y){return El(e,y)})||d&&!d.some(function(y){return El(e,y)})||f&&!f(Uo(e))||!1}function IE(e,t,n,r){var l=ao(e),d=Ss(e),f=ao(t),y=Ss(t),a=ao(r);if(l===f&&l===a)return d<=n&&n<=y;if(l<f)return a===l&&d<=n||a===f&&y>=n||a<f&&a>l}function uM(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.minDate,r=t.maxDate,l=t.excludeDates,d=t.includeDates,f=t.filterDate;return kk(e,{minDate:n,maxDate:r})||l&&l.some(function(y){return IS(e,y)})||d&&!d.some(function(y){return IS(e,y)})||f&&!f(Uo(e))||!1}function PE(e,t,n){if(!cx(t)||!cx(n))return!1;var r=ao(t),l=ao(n);return r<=e&&l>=e}function WY(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.minDate,r=t.maxDate,l=t.excludeDates,d=t.includeDates,f=t.filterDate,y=new Date(e,0,1);return kk(y,{minDate:Tk(n),maxDate:OY(r)})||l&&l.some(function(a){return ud(y,a)})||d&&!d.some(function(a){return ud(y,a)})||f&&!f(Uo(y))||!1}function OE(e,t,n,r){var l=ao(e),d=o0(e),f=ao(t),y=o0(t),a=ao(r);if(l===f&&l===a)return d<=n&&n<=y;if(l<f)return a===l&&d<=n||a===f&&y>=n||a<f&&a>l}function kk(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.minDate,r=t.maxDate;return n&&ux(e,n)<0||r&&ux(e,r)>0}function DB(e,t){return t.some(function(n){return wd(n)===wd(e)&&xd(n)===xd(e)&&Gh(n)===Gh(e)})}function RB(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.excludeTimes,r=t.includeTimes,l=t.filterTime;return n&&DB(e,n)||r&&!DB(e,r)||l&&!l(e)||!1}function IB(e,t){var n=t.minTime,r=t.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var l=Uo();l=bT(l,wd(e)),l=yT(l,xd(e)),l=gT(l,Gh(e));var d=Uo();d=bT(d,wd(n)),d=yT(d,xd(n)),d=gT(d,Gh(n));var f=Uo();f=bT(f,wd(r)),f=yT(f,xd(r)),f=gT(f,Gh(r));var y;try{y=!dx(l,{start:d,end:f})}catch{y=!1}return y}function PB(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.minDate,r=t.includeDates,l=rv(e,1);return n&&kS(n,l)>0||r&&r.every(function(d){return kS(d,l)>0})||!1}function OB(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.maxDate,r=t.includeDates,l=wu(e,1);return n&&kS(l,n)>0||r&&r.every(function(d){return kS(l,d)>0})||!1}function GCe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.minDate,r=t.includeDates,l=Tk(e),d=RY(l,1);return n&&MS(n,d)>0||r&&r.every(function(f){return MS(f,d)>0})||!1}function qCe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.maxDate,r=t.includeDates,l=OY(e),d=g4(l,1);return n&&MS(d,n)>0||r&&r.every(function(f){return MS(d,f)>0})||!1}function LB(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.minDate,r=t.includeDates,l=ov(e,1);return n&&AS(n,l)>0||r&&r.every(function(d){return AS(d,l)>0})||!1}function ZCe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.minDate,r=t.yearItemNumber,l=r===void 0?Wx:r,d=J_(ov(e,l)),f=Rp(d,l),y=f.endPeriod,a=n&&ao(n);return a&&a>y||!1}function NB(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.maxDate,r=t.includeDates,l=Yh(e,1);return n&&AS(l,n)>0||r&&r.every(function(d){return AS(l,d)>0})||!1}function KCe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.maxDate,r=t.yearItemNumber,l=r===void 0?Wx:r,d=Yh(e,l),f=Rp(d,l),y=f.startPeriod,a=n&&ao(n);return a&&a<y||!1}function YY(e){var t=e.minDate,n=e.includeDates;if(n&&t){var r=n.filter(function(l){return ux(l,t)>=0});return _B(r)}else return n?_B(n):t}function GY(e){var t=e.maxDate,n=e.includeDates;if(n&&t){var r=n.filter(function(l){return ux(l,t)<=0});return xB(r)}else return n?xB(n):t}function zB(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"react-datepicker__day--highlighted",n=new Map,r=0,l=e.length;r<l;r++){var d=e[r];if(v0(d)){var f=li(d,"MM.dd.yyyy"),y=n.get(f)||[];y.includes(t)||(y.push(t),n.set(f,y))}else if(_5(d)==="object"){var a=Object.keys(d),E=a[0],C=d[a[0]];if(typeof E=="string"&&C.constructor===Array)for(var M=0,P=C.length;M<P;M++){var N=li(C[M],"MM.dd.yyyy"),F=n.get(N)||[];F.includes(E)||(F.push(E),n.set(N,F))}}}return n}function XCe(e,t){return e.length!==t.length?!1:e.every(function(n,r){return n===t[r]})}function QCe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"react-datepicker__day--holidays",n=new Map;return e.forEach(function(r){var l=r.date,d=r.holidayName;if(v0(l)){var f=li(l,"MM.dd.yyyy"),y=n.get(f)||{};if(!("className"in y&&y.className===t&&XCe(y.holidayNames,[d]))){y.className=t;var a=y.holidayNames;y.holidayNames=a?[].concat(nm(a),[d]):[d],n.set(f,y)}}}),n}function JCe(e,t,n,r,l){for(var d=l.length,f=[],y=0;y<d;y++){var a=e;a=LTe(a,wd(l[y])),a=h5(a,xd(l[y])),a=rCe(a,Gh(l[y]));var E=h5(e,(n+1)*r);tm(a,t)&&_0(a,E)&&f.push(l[y])}return f}function BB(e){return e<10?"0".concat(e):"".concat(e)}function Rp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wx,n=Math.ceil(ao(e)/t)*t,r=n-(t-1);return{startPeriod:r,endPeriod:n}}function eke(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+n-+t)/36e5)}function FB(e){var t=e.getSeconds(),n=e.getMilliseconds();return Gn(e.getTime()-t*1e3-n)}function tke(e,t){return FB(e).getTime()===FB(t).getTime()}function jB(e){if(!v0(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function $B(e,t){if(!v0(e)||!v0(t))throw new Error("Invalid date received");var n=jB(e),r=jB(t);return _0(n,r)}function qY(e){var t=" ";return e.key===t}function nke(e,t,n,r){for(var l=[],d=0;d<2*t+1;d++){var f=e+t-d,y=!0;n&&(y=ao(n)<=f),r&&y&&(y=ao(r)>=f),y&&l.push(f)}return l}var rke=function(e){function t(n){var r;Ra(this,t),r=Da(this,t,[n]),He(r,"renderOptions",function(){var y=r.props.year,a=r.state.yearsList.map(function(M){return dt.createElement("div",{className:y===M?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:M,onClick:r.onChange.bind(r,M),"aria-selected":y===M?"true":void 0},y===M?dt.createElement("span",{className:"react-datepicker__year-option--selected"},"✓"):"",M)}),E=r.props.minDate?ao(r.props.minDate):null,C=r.props.maxDate?ao(r.props.maxDate):null;return(!C||!r.state.yearsList.find(function(M){return M===C}))&&a.unshift(dt.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},dt.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!E||!r.state.yearsList.find(function(M){return M===E}))&&a.push(dt.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},dt.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),a}),He(r,"onChange",function(y){r.props.onChange(y)}),He(r,"handleClickOutside",function(){r.props.onCancel()}),He(r,"shiftYears",function(y){var a=r.state.yearsList.map(function(E){return E+y});r.setState({yearsList:a})}),He(r,"incrementYears",function(){return r.shiftYears(1)}),He(r,"decrementYears",function(){return r.shiftYears(-1)});var l=n.yearDropdownItemNumber,d=n.scrollableYearDropdown,f=l||(d?10:5);return r.state={yearsList:nke(r.props.year,f,r.props.minDate,r.props.maxDate)},r.dropdownRef=j.createRef(),r}return Pa(t,e),Ia(t,[{key:"componentDidMount",value:function(){var r=this.dropdownRef.current;if(r){var l=r.children?Array.from(r.children):null,d=l?l.find(function(f){return f.ariaSelected}):null;r.scrollTop=d?d.offsetTop+(d.clientHeight-r.clientHeight)/2:(r.scrollHeight-r.clientHeight)/2}}},{key:"render",value:function(){var r=fn({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return dt.createElement("div",{className:r,ref:this.dropdownRef},this.renderOptions())}}])}(dt.Component),oke=Sk(rke),ike=function(e){function t(){var n;Ra(this,t);for(var r=arguments.length,l=new Array(r),d=0;d<r;d++)l[d]=arguments[d];return n=Da(this,t,[].concat(l)),He(n,"state",{dropdownVisible:!1}),He(n,"renderSelectOptions",function(){for(var f=n.props.minDate?ao(n.props.minDate):1900,y=n.props.maxDate?ao(n.props.maxDate):2100,a=[],E=f;E<=y;E++)a.push(dt.createElement("option",{key:E,value:E},E));return a}),He(n,"onSelectChange",function(f){n.onChange(f.target.value)}),He(n,"renderSelectMode",function(){return dt.createElement("select",{value:n.props.year,className:"react-datepicker__year-select",onChange:n.onSelectChange},n.renderSelectOptions())}),He(n,"renderReadView",function(f){return dt.createElement("div",{key:"read",style:{visibility:f?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(a){return n.toggleDropdown(a)}},dt.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),dt.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},n.props.year))}),He(n,"renderDropdown",function(){return dt.createElement(oke,{key:"dropdown",year:n.props.year,onChange:n.onChange,onCancel:n.toggleDropdown,minDate:n.props.minDate,maxDate:n.props.maxDate,scrollableYearDropdown:n.props.scrollableYearDropdown,yearDropdownItemNumber:n.props.yearDropdownItemNumber})}),He(n,"renderScrollMode",function(){var f=n.state.dropdownVisible,y=[n.renderReadView(!f)];return f&&y.unshift(n.renderDropdown()),y}),He(n,"onChange",function(f){n.toggleDropdown(),f!==n.props.year&&n.props.onChange(f)}),He(n,"toggleDropdown",function(f){n.setState({dropdownVisible:!n.state.dropdownVisible},function(){n.props.adjustDateOnChange&&n.handleYearChange(n.props.date,f)})}),He(n,"handleYearChange",function(f,y){n.onSelect(f,y),n.setOpen()}),He(n,"onSelect",function(f,y){n.props.onSelect&&n.props.onSelect(f,y)}),He(n,"setOpen",function(){n.props.setOpen&&n.props.setOpen(!0)}),n}return Pa(t,e),Ia(t,[{key:"render",value:function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode();break}return dt.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},r)}}])}(dt.Component),ake=function(e){function t(){var n;Ra(this,t);for(var r=arguments.length,l=new Array(r),d=0;d<r;d++)l[d]=arguments[d];return n=Da(this,t,[].concat(l)),He(n,"isSelectedMonth",function(f){return n.props.month===f}),He(n,"renderOptions",function(){return n.props.monthNames.map(function(f,y){return dt.createElement("div",{className:n.isSelectedMonth(y)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:f,onClick:n.onChange.bind(n,y),"aria-selected":n.isSelectedMonth(y)?"true":void 0},n.isSelectedMonth(y)?dt.createElement("span",{className:"react-datepicker__month-option--selected"},"✓"):"",f)})}),He(n,"onChange",function(f){return n.props.onChange(f)}),He(n,"handleClickOutside",function(){return n.props.onCancel()}),n}return Pa(t,e),Ia(t,[{key:"render",value:function(){return dt.createElement("div",{className:"react-datepicker__month-dropdown"},this.renderOptions())}}])}(dt.Component),ske=Sk(ake),lke=function(e){function t(){var n;Ra(this,t);for(var r=arguments.length,l=new Array(r),d=0;d<r;d++)l[d]=arguments[d];return n=Da(this,t,[].concat(l)),He(n,"state",{dropdownVisible:!1}),He(n,"renderSelectOptions",function(f){return f.map(function(y,a){return dt.createElement("option",{key:a,value:a},y)})}),He(n,"renderSelectMode",function(f){return dt.createElement("select",{value:n.props.month,className:"react-datepicker__month-select",onChange:function(a){return n.onChange(a.target.value)}},n.renderSelectOptions(f))}),He(n,"renderReadView",function(f,y){return dt.createElement("div",{key:"read",style:{visibility:f?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:n.toggleDropdown},dt.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),dt.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},y[n.props.month]))}),He(n,"renderDropdown",function(f){return dt.createElement(ske,{key:"dropdown",month:n.props.month,monthNames:f,onChange:n.onChange,onCancel:n.toggleDropdown})}),He(n,"renderScrollMode",function(f){var y=n.state.dropdownVisible,a=[n.renderReadView(!y,f)];return y&&a.unshift(n.renderDropdown(f)),a}),He(n,"onChange",function(f){n.toggleDropdown(),f!==n.props.month&&n.props.onChange(f)}),He(n,"toggleDropdown",function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})}),n}return Pa(t,e),Ia(t,[{key:"render",value:function(){var r=this,l=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(f){return HY(f,r.props.locale)}:function(f){return v4(f,r.props.locale)}),d;switch(this.props.dropdownMode){case"scroll":d=this.renderScrollMode(l);break;case"select":d=this.renderSelectMode(l);break}return dt.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},d)}}])}(dt.Component);function cke(e,t){for(var n=[],r=Wp(e),l=Wp(t);!tm(r,l);)n.push(Uo(r)),r=wu(r,1);return n}var uke=function(e){function t(n){var r;return Ra(this,t),r=Da(this,t,[n]),He(r,"renderOptions",function(){return r.state.monthYearsList.map(function(l){var d=f5(l),f=ud(r.props.date,l)&&El(r.props.date,l);return dt.createElement("div",{className:f?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:d,onClick:r.onChange.bind(r,d),"aria-selected":f?"true":void 0},f?dt.createElement("span",{className:"react-datepicker__month-year-option--selected"},"✓"):"",li(l,r.props.dateFormat,r.props.locale))})}),He(r,"onChange",function(l){return r.props.onChange(l)}),He(r,"handleClickOutside",function(){r.props.onCancel()}),r.state={monthYearsList:cke(r.props.minDate,r.props.maxDate)},r}return Pa(t,e),Ia(t,[{key:"render",value:function(){var r=fn({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return dt.createElement("div",{className:r},this.renderOptions())}}])}(dt.Component),dke=Sk(uke),hke=function(e){function t(){var n;Ra(this,t);for(var r=arguments.length,l=new Array(r),d=0;d<r;d++)l[d]=arguments[d];return n=Da(this,t,[].concat(l)),He(n,"state",{dropdownVisible:!1}),He(n,"renderSelectOptions",function(){for(var f=Wp(n.props.minDate),y=Wp(n.props.maxDate),a=[];!tm(f,y);){var E=f5(f);a.push(dt.createElement("option",{key:E,value:E},li(f,n.props.dateFormat,n.props.locale))),f=wu(f,1)}return a}),He(n,"onSelectChange",function(f){n.onChange(f.target.value)}),He(n,"renderSelectMode",function(){return dt.createElement("select",{value:f5(Wp(n.props.date)),className:"react-datepicker__month-year-select",onChange:n.onSelectChange},n.renderSelectOptions())}),He(n,"renderReadView",function(f){var y=li(n.props.date,n.props.dateFormat,n.props.locale);return dt.createElement("div",{key:"read",style:{visibility:f?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:function(E){return n.toggleDropdown(E)}},dt.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),dt.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},y))}),He(n,"renderDropdown",function(){return dt.createElement(dke,{key:"dropdown",date:n.props.date,dateFormat:n.props.dateFormat,onChange:n.onChange,onCancel:n.toggleDropdown,minDate:n.props.minDate,maxDate:n.props.maxDate,scrollableMonthYearDropdown:n.props.scrollableMonthYearDropdown,locale:n.props.locale})}),He(n,"renderScrollMode",function(){var f=n.state.dropdownVisible,y=[n.renderReadView(!f)];return f&&y.unshift(n.renderDropdown()),y}),He(n,"onChange",function(f){n.toggleDropdown();var y=Uo(parseInt(f));ud(n.props.date,y)&&El(n.props.date,y)||n.props.onChange(y)}),He(n,"toggleDropdown",function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})}),n}return Pa(t,e),Ia(t,[{key:"render",value:function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode();break}return dt.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},r)}}])}(dt.Component),fke=function(e){function t(){var n;Ra(this,t);for(var r=arguments.length,l=new Array(r),d=0;d<r;d++)l[d]=arguments[d];return n=Da(this,t,[].concat(l)),He(n,"dayEl",dt.createRef()),He(n,"handleClick",function(f){!n.isDisabled()&&n.props.onClick&&n.props.onClick(f)}),He(n,"handleMouseEnter",function(f){!n.isDisabled()&&n.props.onMouseEnter&&n.props.onMouseEnter(f)}),He(n,"handleOnKeyDown",function(f){var y=f.key;y===" "&&(f.preventDefault(),f.key="Enter"),n.props.handleOnKeyDown(f)}),He(n,"isSameDay",function(f){return Do(n.props.day,f)}),He(n,"isKeyboardSelected",function(){var f;if(n.props.disabledKeyboardNavigation)return!1;var y=n.props.selectsMultiple?(f=n.props.selectedDates)===null||f===void 0?void 0:f.some(function(a){return n.isSameDayOrWeek(a)}):n.isSameDayOrWeek(n.props.selected);return!y&&n.isSameDayOrWeek(n.props.preSelection)}),He(n,"isDisabled",function(){return Ck(n.props.day,n.props)}),He(n,"isExcluded",function(){return _4(n.props.day,n.props)}),He(n,"isStartOfWeek",function(){return Do(n.props.day,Hp(n.props.day,n.props.locale,n.props.calendarStartDay))}),He(n,"isSameWeek",function(f){return n.props.showWeekPicker&&Do(f,Hp(n.props.day,n.props.locale,n.props.calendarStartDay))}),He(n,"isSameDayOrWeek",function(f){return n.isSameDay(f)||n.isSameWeek(f)}),He(n,"getHighLightedClass",function(){var f=n.props,y=f.day,a=f.highlightDates;if(!a)return!1;var E=li(y,"MM.dd.yyyy");return a.get(E)}),He(n,"getHolidaysClass",function(){var f=n.props,y=f.day,a=f.holidays;if(!a)return!1;var E=li(y,"MM.dd.yyyy");if(a.has(E))return[a.get(E).className]}),He(n,"isInRange",function(){var f=n.props,y=f.day,a=f.startDate,E=f.endDate;return!a||!E?!1:e1(y,a,E)}),He(n,"isInSelectingRange",function(){var f,y=n.props,a=y.day,E=y.selectsStart,C=y.selectsEnd,M=y.selectsRange,P=y.selectsDisabledDaysInRange,N=y.startDate,F=y.endDate,$=(f=n.props.selectingDate)!==null&&f!==void 0?f:n.props.preSelection;return!(E||C||M)||!$||!P&&n.isDisabled()?!1:E&&F&&(_0($,F)||Xg($,F))?e1(a,$,F):C&&N&&(tm($,N)||Xg($,N))||M&&N&&!F&&(tm($,N)||Xg($,N))?e1(a,N,$):!1}),He(n,"isSelectingRangeStart",function(){var f;if(!n.isInSelectingRange())return!1;var y=n.props,a=y.day,E=y.startDate,C=y.selectsStart,M=(f=n.props.selectingDate)!==null&&f!==void 0?f:n.props.preSelection;return C?Do(a,M):Do(a,E)}),He(n,"isSelectingRangeEnd",function(){var f;if(!n.isInSelectingRange())return!1;var y=n.props,a=y.day,E=y.endDate,C=y.selectsEnd,M=y.selectsRange,P=(f=n.props.selectingDate)!==null&&f!==void 0?f:n.props.preSelection;return C||M?Do(a,P):Do(a,E)}),He(n,"isRangeStart",function(){var f=n.props,y=f.day,a=f.startDate,E=f.endDate;return!a||!E?!1:Do(a,y)}),He(n,"isRangeEnd",function(){var f=n.props,y=f.day,a=f.startDate,E=f.endDate;return!a||!E?!1:Do(E,y)}),He(n,"isWeekend",function(){var f=zTe(n.props.day);return f===0||f===6}),He(n,"isAfterMonth",function(){return n.props.month!==void 0&&(n.props.month+1)%12===Ss(n.props.day)}),He(n,"isBeforeMonth",function(){return n.props.month!==void 0&&(Ss(n.props.day)+1)%12===n.props.month}),He(n,"isCurrentDay",function(){return n.isSameDay(Uo())}),He(n,"isSelected",function(){if(n.props.selectsMultiple){var f;return(f=n.props.selectedDates)===null||f===void 0?void 0:f.some(function(y){return n.isSameDayOrWeek(y)})}return n.isSameDayOrWeek(n.props.selected)}),He(n,"getClassNames",function(f){var y=n.props.dayClassName?n.props.dayClassName(f):void 0;return fn("react-datepicker__day",y,"react-datepicker__day--"+jCe(n.props.day),{"react-datepicker__day--disabled":n.isDisabled(),"react-datepicker__day--excluded":n.isExcluded(),"react-datepicker__day--selected":n.isSelected(),"react-datepicker__day--keyboard-selected":n.isKeyboardSelected(),"react-datepicker__day--range-start":n.isRangeStart(),"react-datepicker__day--range-end":n.isRangeEnd(),"react-datepicker__day--in-range":n.isInRange(),"react-datepicker__day--in-selecting-range":n.isInSelectingRange(),"react-datepicker__day--selecting-range-start":n.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":n.isSelectingRangeEnd(),"react-datepicker__day--today":n.isCurrentDay(),"react-datepicker__day--weekend":n.isWeekend(),"react-datepicker__day--outside-month":n.isAfterMonth()||n.isBeforeMonth()},n.getHighLightedClass("react-datepicker__day--highlighted"),n.getHolidaysClass())}),He(n,"getAriaLabel",function(){var f=n.props,y=f.day,a=f.ariaLabelPrefixWhenEnabled,E=a===void 0?"Choose":a,C=f.ariaLabelPrefixWhenDisabled,M=C===void 0?"Not available":C,P=n.isDisabled()||n.isExcluded()?M:E;return"".concat(P," ").concat(li(y,"PPPP",n.props.locale))}),He(n,"getTitle",function(){var f=n.props,y=f.day,a=f.holidays,E=a===void 0?new Map:a,C=f.excludeDates,M=li(y,"MM.dd.yyyy"),P=[];return E.has(M)&&P.push.apply(P,nm(E.get(M).holidayNames)),n.isExcluded()&&P.push(C?.filter(function(N){return Do(N.date?N.date:N,y)}).map(function(N){return N.message})),P.join(", ")}),He(n,"getTabIndex",function(f,y){var a=f||n.props.selected,E=y||n.props.preSelection,C=!(n.props.showWeekPicker&&(n.props.showWeekNumber||!n.isStartOfWeek()))&&(n.isKeyboardSelected()||n.isSameDay(a)&&Do(E,a))?0:-1;return C}),He(n,"handleFocusDay",function(){var f,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=!1;n.getTabIndex()===0&&!y.isInputFocused&&n.isSameDay(n.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(a=!0),n.props.inline&&!n.props.shouldFocusDayInline&&(a=!1),n.props.containerRef&&n.props.containerRef.current&&n.props.containerRef.current.contains(document.activeElement)&&document.activeElement.classList.contains("react-datepicker__day")&&(a=!0),n.props.monthShowsDuplicateDaysEnd&&n.isAfterMonth()&&(a=!1),n.props.monthShowsDuplicateDaysStart&&n.isBeforeMonth()&&(a=!1)),a&&((f=n.dayEl.current)===null||f===void 0||f.focus({preventScroll:!0}))}),He(n,"renderDayContents",function(){return n.props.monthShowsDuplicateDaysEnd&&n.isAfterMonth()||n.props.monthShowsDuplicateDaysStart&&n.isBeforeMonth()?null:n.props.renderDayContents?n.props.renderDayContents(vB(n.props.day),n.props.day):vB(n.props.day)}),He(n,"render",function(){return dt.createElement("div",{ref:n.dayEl,className:n.getClassNames(n.props.day),onKeyDown:n.handleOnKeyDown,onClick:n.handleClick,onMouseEnter:n.props.usePointerEvent?void 0:n.handleMouseEnter,onPointerEnter:n.props.usePointerEvent?n.handleMouseEnter:void 0,tabIndex:n.getTabIndex(),"aria-label":n.getAriaLabel(),role:"option",title:n.getTitle(),"aria-disabled":n.isDisabled(),"aria-current":n.isCurrentDay()?"date":void 0,"aria-selected":n.isSelected()||n.isInRange()},n.renderDayContents(),n.getTitle()!==""&&dt.createElement("span",{className:"overlay"},n.getTitle()))}),n}return Pa(t,e),Ia(t,[{key:"componentDidMount",value:function(){this.handleFocusDay()}},{key:"componentDidUpdate",value:function(r){this.handleFocusDay(r)}}])}(dt.Component),pke=function(e){function t(){var n;Ra(this,t);for(var r=arguments.length,l=new Array(r),d=0;d<r;d++)l[d]=arguments[d];return n=Da(this,t,[].concat(l)),He(n,"weekNumberEl",dt.createRef()),He(n,"handleClick",function(f){n.props.onClick&&n.props.onClick(f)}),He(n,"handleOnKeyDown",function(f){var y=f.key;y===" "&&(f.preventDefault(),f.key="Enter"),n.props.handleOnKeyDown(f)}),He(n,"isKeyboardSelected",function(){return!n.props.disabledKeyboardNavigation&&!Do(n.props.date,n.props.selected)&&Do(n.props.date,n.props.preSelection)}),He(n,"getTabIndex",function(){return n.props.showWeekPicker&&n.props.showWeekNumber&&(n.isKeyboardSelected()||Do(n.props.date,n.props.selected)&&Do(n.props.preSelection,n.props.selected))?0:-1}),He(n,"handleFocusWeekNumber",function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=!1;n.getTabIndex()===0&&!f.isInputFocused&&Do(n.props.date,n.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(y=!0),n.props.inline&&!n.props.shouldFocusDayInline&&(y=!1),n.props.containerRef&&n.props.containerRef.current&&n.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(y=!0)),y&&n.weekNumberEl.current&&n.weekNumberEl.current.focus({preventScroll:!0})}),n}return Pa(t,e),Ia(t,[{key:"componentDidMount",value:function(){this.handleFocusWeekNumber()}},{key:"componentDidUpdate",value:function(r){this.handleFocusWeekNumber(r)}},{key:"render",value:function(){var r=this.props,l=r.weekNumber,d=r.ariaLabelPrefix,f=d===void 0?"week ":d,y=r.onClick,a={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!y,"react-datepicker__week-number--selected":!!y&&Do(this.props.date,this.props.selected),"react-datepicker__week-number--keyboard-selected":this.isKeyboardSelected()};return dt.createElement("div",{ref:this.weekNumberEl,className:fn(a),"aria-label":"".concat(f," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},l)}}],[{key:"defaultProps",get:function(){return{ariaLabelPrefix:"week "}}}])}(dt.Component),mke=function(e){function t(){var n;Ra(this,t);for(var r=arguments.length,l=new Array(r),d=0;d<r;d++)l[d]=arguments[d];return n=Da(this,t,[].concat(l)),He(n,"handleDayClick",function(f,y){n.props.onDayClick&&n.props.onDayClick(f,y)}),He(n,"handleDayMouseEnter",function(f){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(f)}),He(n,"handleWeekClick",function(f,y,a){typeof n.props.onWeekSelect=="function"&&n.props.onWeekSelect(f,y,a),n.props.showWeekPicker&&n.handleDayClick(f,a),n.props.shouldCloseOnSelect&&n.props.setOpen(!1)}),He(n,"formatWeekNumber",function(f){return n.props.formatWeekNumber?n.props.formatWeekNumber(f):FCe(f)}),He(n,"renderDays",function(){var f=n.startOfWeek(),y=[],a=n.formatWeekNumber(f);if(n.props.showWeekNumber){var E=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(n,f,a):void 0;y.push(dt.createElement(pke,{key:"W",weekNumber:a,date:f,onClick:E,selected:n.props.selected,preSelection:n.props.preSelection,ariaLabelPrefix:n.props.ariaLabelPrefix,showWeekPicker:n.props.showWeekPicker,showWeekNumber:n.props.showWeekNumber,disabledKeyboardNavigation:n.props.disabledKeyboardNavigation,handleOnKeyDown:n.props.handleOnKeyDown,isInputFocused:n.props.isInputFocused,containerRef:n.props.containerRef}))}return y.concat([0,1,2,3,4,5,6].map(function(C){var M=fm(f,C);return dt.createElement(fke,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:M.valueOf(),day:M,month:n.props.month,onClick:n.handleDayClick.bind(n,M),usePointerEvent:n.props.usePointerEvent,onMouseEnter:n.handleDayMouseEnter.bind(n,M),minDate:n.props.minDate,maxDate:n.props.maxDate,calendarStartDay:n.props.calendarStartDay,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDates:n.props.includeDates,includeDateIntervals:n.props.includeDateIntervals,highlightDates:n.props.highlightDates,holidays:n.props.holidays,selectingDate:n.props.selectingDate,filterDate:n.props.filterDate,preSelection:n.props.preSelection,selected:n.props.selected,selectsStart:n.props.selectsStart,selectsEnd:n.props.selectsEnd,selectsRange:n.props.selectsRange,showWeekPicker:n.props.showWeekPicker,showWeekNumber:n.props.showWeekNumber,selectsDisabledDaysInRange:n.props.selectsDisabledDaysInRange,selectsMultiple:n.props.selectsMultiple,selectedDates:n.props.selectedDates,startDate:n.props.startDate,endDate:n.props.endDate,dayClassName:n.props.dayClassName,renderDayContents:n.props.renderDayContents,disabledKeyboardNavigation:n.props.disabledKeyboardNavigation,handleOnKeyDown:n.props.handleOnKeyDown,isInputFocused:n.props.isInputFocused,containerRef:n.props.containerRef,inline:n.props.inline,shouldFocusDayInline:n.props.shouldFocusDayInline,monthShowsDuplicateDaysEnd:n.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:n.props.monthShowsDuplicateDaysStart,locale:n.props.locale})}))}),He(n,"startOfWeek",function(){return Hp(n.props.day,n.props.locale,n.props.calendarStartDay)}),He(n,"isKeyboardSelected",function(){return!n.props.disabledKeyboardNavigation&&!Do(n.startOfWeek(),n.props.selected)&&Do(n.startOfWeek(),n.props.preSelection)}),n}return Pa(t,e),Ia(t,[{key:"render",value:function(){var r={"react-datepicker__week":!0,"react-datepicker__week--selected":Do(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return dt.createElement("div",{className:fn(r)},this.renderDays())}}],[{key:"defaultProps",get:function(){return{shouldCloseOnSelect:!0}}}])}(dt.Component),gke=6,Cb={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},dM=He(He(He({},Cb.TWO_COLUMNS,{grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2}),Cb.THREE_COLUMNS,{grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3}),Cb.FOUR_COLUMNS,{grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4}),LE=1;function UB(e,t){return e?Cb.FOUR_COLUMNS:t?Cb.TWO_COLUMNS:Cb.THREE_COLUMNS}var yke=function(e){function t(){var n;Ra(this,t);for(var r=arguments.length,l=new Array(r),d=0;d<r;d++)l[d]=arguments[d];return n=Da(this,t,[].concat(l)),He(n,"MONTH_REFS",nm(Array(12)).map(function(){return dt.createRef()})),He(n,"QUARTER_REFS",nm(Array(4)).map(function(){return dt.createRef()})),He(n,"isDisabled",function(f){return Ck(f,n.props)}),He(n,"isExcluded",function(f){return _4(f,n.props)}),He(n,"handleDayClick",function(f,y){n.props.onDayClick&&n.props.onDayClick(f,y,n.props.orderInDisplay)}),He(n,"handleDayMouseEnter",function(f){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(f)}),He(n,"handleMouseLeave",function(){n.props.onMouseLeave&&n.props.onMouseLeave()}),He(n,"isRangeStartMonth",function(f){var y=n.props,a=y.day,E=y.startDate,C=y.endDate;return!E||!C?!1:El(Es(a,f),E)}),He(n,"isRangeStartQuarter",function(f){var y=n.props,a=y.day,E=y.startDate,C=y.endDate;return!E||!C?!1:IS(Hy(a,f),E)}),He(n,"isRangeEndMonth",function(f){var y=n.props,a=y.day,E=y.startDate,C=y.endDate;return!E||!C?!1:El(Es(a,f),C)}),He(n,"isRangeEndQuarter",function(f){var y=n.props,a=y.day,E=y.startDate,C=y.endDate;return!E||!C?!1:IS(Hy(a,f),C)}),He(n,"isInSelectingRangeMonth",function(f){var y,a=n.props,E=a.day,C=a.selectsStart,M=a.selectsEnd,P=a.selectsRange,N=a.startDate,F=a.endDate,$=(y=n.props.selectingDate)!==null&&y!==void 0?y:n.props.preSelection;return!(C||M||P)||!$?!1:C&&F?IE($,F,f,E):M&&N||P&&N&&!F?IE(N,$,f,E):!1}),He(n,"isSelectingMonthRangeStart",function(f){var y;if(!n.isInSelectingRangeMonth(f))return!1;var a=n.props,E=a.day,C=a.startDate,M=a.selectsStart,P=Es(E,f),N=(y=n.props.selectingDate)!==null&&y!==void 0?y:n.props.preSelection;return M?El(P,N):El(P,C)}),He(n,"isSelectingMonthRangeEnd",function(f){var y;if(!n.isInSelectingRangeMonth(f))return!1;var a=n.props,E=a.day,C=a.endDate,M=a.selectsEnd,P=a.selectsRange,N=Es(E,f),F=(y=n.props.selectingDate)!==null&&y!==void 0?y:n.props.preSelection;return M||P?El(N,F):El(N,C)}),He(n,"isInSelectingRangeQuarter",function(f){var y,a=n.props,E=a.day,C=a.selectsStart,M=a.selectsEnd,P=a.selectsRange,N=a.startDate,F=a.endDate,$=(y=n.props.selectingDate)!==null&&y!==void 0?y:n.props.preSelection;return!(C||M||P)||!$?!1:C&&F?OE($,F,f,E):M&&N||P&&N&&!F?OE(N,$,f,E):!1}),He(n,"isWeekInMonth",function(f){var y=n.props.day,a=fm(f,6);return El(f,y)||El(a,y)}),He(n,"isCurrentMonth",function(f,y){return ao(f)===ao(Uo())&&y===Ss(Uo())}),He(n,"isCurrentQuarter",function(f,y){return ao(f)===ao(Uo())&&y===o0(Uo())}),He(n,"isSelectedMonth",function(f,y,a){return Ss(a)===y&&ao(f)===ao(a)}),He(n,"isSelectedQuarter",function(f,y,a){return o0(f)===y&&ao(f)===ao(a)}),He(n,"renderWeeks",function(){for(var f=[],y=n.props.fixedHeight,a=0,E=!1,C=Hp(Wp(n.props.day),n.props.locale,n.props.calendarStartDay),M=n.props.showWeekPicker?Hp(n.props.selected,n.props.locale,n.props.calendarStartDay):n.props.selected,P=n.props.showWeekPicker?Hp(n.props.preSelection,n.props.locale,n.props.calendarStartDay):n.props.preSelection;f.push(dt.createElement(mke,{ariaLabelPrefix:n.props.weekAriaLabelPrefix,chooseDayAriaLabelPrefix:n.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:n.props.disabledDayAriaLabelPrefix,key:a,day:C,month:Ss(n.props.day),onDayClick:n.handleDayClick,usePointerEvent:n.props.usePointerEvent,onDayMouseEnter:n.handleDayMouseEnter,onWeekSelect:n.props.onWeekSelect,formatWeekNumber:n.props.formatWeekNumber,locale:n.props.locale,minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDates:n.props.includeDates,includeDateIntervals:n.props.includeDateIntervals,inline:n.props.inline,shouldFocusDayInline:n.props.shouldFocusDayInline,highlightDates:n.props.highlightDates,holidays:n.props.holidays,selectingDate:n.props.selectingDate,filterDate:n.props.filterDate,preSelection:P,selected:M,selectsStart:n.props.selectsStart,selectsEnd:n.props.selectsEnd,selectsRange:n.props.selectsRange,selectsDisabledDaysInRange:n.props.selectsDisabledDaysInRange,selectsMultiple:n.props.selectsMultiple,selectedDates:n.props.selectedDates,showWeekNumber:n.props.showWeekNumbers,showWeekPicker:n.props.showWeekPicker,startDate:n.props.startDate,endDate:n.props.endDate,dayClassName:n.props.dayClassName,setOpen:n.props.setOpen,shouldCloseOnSelect:n.props.shouldCloseOnSelect,disabledKeyboardNavigation:n.props.disabledKeyboardNavigation,renderDayContents:n.props.renderDayContents,handleOnKeyDown:n.props.handleOnKeyDown,isInputFocused:n.props.isInputFocused,containerRef:n.props.containerRef,calendarStartDay:n.props.calendarStartDay,monthShowsDuplicateDaysEnd:n.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:n.props.monthShowsDuplicateDaysStart})),!E;){a++,C=CS(C,1);var N=y&&a>=gke,F=!y&&!n.isWeekInMonth(C);if(N||F)if(n.props.peekNextMonth)E=!0;else break}return f}),He(n,"onMonthClick",function(f,y){var a=Es(n.props.day,y);vT(a,n.props)||n.handleDayClick(Wp(a),f)}),He(n,"onMonthMouseEnter",function(f){var y=Es(n.props.day,f);vT(y,n.props)||n.handleDayMouseEnter(Wp(y))}),He(n,"handleMonthNavigation",function(f,y){n.isDisabled(y)||n.isExcluded(y)||(n.props.setPreSelection(y),n.MONTH_REFS[f].current&&n.MONTH_REFS[f].current.focus())}),He(n,"onMonthKeyDown",function(f,y){var a=n.props,E=a.selected,C=a.preSelection,M=a.disabledKeyboardNavigation,P=a.showTwoColumnMonthYearPicker,N=a.showFourColumnMonthYearPicker,F=a.setPreSelection,$=a.handleOnMonthKeyDown,Z=f.key;if(Z!=="Tab"&&f.preventDefault(),!M){var q=UB(N,P),K=dM[q].verticalNavigationOffset,Q=dM[q].grid;switch(Z){case"Enter":n.onMonthClick(f,y),F(E);break;case"ArrowRight":n.handleMonthNavigation(y===11?0:y+LE,wu(C,LE));break;case"ArrowLeft":n.handleMonthNavigation(y===0?11:y-LE,rv(C,LE));break;case"ArrowUp":n.handleMonthNavigation(Q[0].includes(y)?y+12-K:y-K,rv(C,K));break;case"ArrowDown":n.handleMonthNavigation(Q[Q.length-1].includes(y)?y-12+K:y+K,wu(C,K));break}}$&&$(f)}),He(n,"onQuarterClick",function(f,y){var a=Hy(n.props.day,y);uM(a,n.props)||n.handleDayClick(AB(a),f)}),He(n,"onQuarterMouseEnter",function(f){var y=Hy(n.props.day,f);uM(y,n.props)||n.handleDayMouseEnter(AB(y))}),He(n,"handleQuarterNavigation",function(f,y){n.isDisabled(y)||n.isExcluded(y)||(n.props.setPreSelection(y),n.QUARTER_REFS[f-1].current&&n.QUARTER_REFS[f-1].current.focus())}),He(n,"onQuarterKeyDown",function(f,y){var a=f.key;if(!n.props.disabledKeyboardNavigation)switch(a){case"Enter":n.onQuarterClick(f,y),n.props.setPreSelection(n.props.selected);break;case"ArrowRight":n.handleQuarterNavigation(y===4?1:y+1,g4(n.props.preSelection,1));break;case"ArrowLeft":n.handleQuarterNavigation(y===1?4:y-1,RY(n.props.preSelection,1));break}}),He(n,"isMonthDisabled",function(f){var y=n.props,a=y.day,E=y.minDate,C=y.maxDate,M=y.excludeDates,P=y.includeDates,N=Es(a,f);return(E||C||M||P)&&vT(N,n.props)}),He(n,"getMonthClassNames",function(f){var y=n.props,a=y.day,E=y.startDate,C=y.endDate,M=y.selected,P=y.preSelection,N=y.monthClassName,F=N?N(Es(a,f)):void 0;return fn("react-datepicker__month-text","react-datepicker__month-".concat(f),F,{"react-datepicker__month-text--disabled":n.isMonthDisabled(f),"react-datepicker__month-text--selected":n.isSelectedMonth(a,f,M),"react-datepicker__month-text--keyboard-selected":!n.props.disabledKeyboardNavigation&&n.isSelectedMonth(a,f,P),"react-datepicker__month-text--in-selecting-range":n.isInSelectingRangeMonth(f),"react-datepicker__month-text--in-range":IE(E,C,f,a),"react-datepicker__month-text--range-start":n.isRangeStartMonth(f),"react-datepicker__month-text--range-end":n.isRangeEndMonth(f),"react-datepicker__month-text--selecting-range-start":n.isSelectingMonthRangeStart(f),"react-datepicker__month-text--selecting-range-end":n.isSelectingMonthRangeEnd(f),"react-datepicker__month-text--today":n.isCurrentMonth(a,f)})}),He(n,"getTabIndex",function(f){var y=Ss(n.props.preSelection),a=!n.props.disabledKeyboardNavigation&&f===y?"0":"-1";return a}),He(n,"getQuarterTabIndex",function(f){var y=o0(n.props.preSelection),a=!n.props.disabledKeyboardNavigation&&f===y?"0":"-1";return a}),He(n,"getAriaLabel",function(f){var y=n.props,a=y.chooseDayAriaLabelPrefix,E=a===void 0?"Choose":a,C=y.disabledDayAriaLabelPrefix,M=C===void 0?"Not available":C,P=y.day,N=y.locale,F=Es(P,f),$=n.isDisabled(F)||n.isExcluded(F)?M:E;return"".concat($," ").concat(li(F,"MMMM yyyy",N))}),He(n,"getQuarterClassNames",function(f){var y=n.props,a=y.day,E=y.startDate,C=y.endDate,M=y.selected,P=y.minDate,N=y.maxDate,F=y.preSelection,$=y.disabledKeyboardNavigation;return fn("react-datepicker__quarter-text","react-datepicker__quarter-".concat(f),{"react-datepicker__quarter-text--disabled":(P||N)&&uM(Hy(a,f),n.props),"react-datepicker__quarter-text--selected":n.isSelectedQuarter(a,f,M),"react-datepicker__quarter-text--keyboard-selected":!$&&n.isSelectedQuarter(a,f,F),"react-datepicker__quarter-text--in-selecting-range":n.isInSelectingRangeQuarter(f),"react-datepicker__quarter-text--in-range":OE(E,C,f,a),"react-datepicker__quarter-text--range-start":n.isRangeStartQuarter(f),"react-datepicker__quarter-text--range-end":n.isRangeEndQuarter(f)})}),He(n,"getMonthContent",function(f){var y=n.props,a=y.showFullMonthYearPicker,E=y.renderMonthContent,C=y.locale,M=y.day,P=HY(f,C),N=v4(f,C);return E?E(f,P,N,M):a?N:P}),He(n,"getQuarterContent",function(f){var y=n.props,a=y.renderQuarterContent,E=y.locale,C=YCe(f,E);return a?a(f,C):C}),He(n,"renderMonths",function(){var f=n.props,y=f.showTwoColumnMonthYearPicker,a=f.showFourColumnMonthYearPicker,E=f.day,C=f.selected,M=dM[UB(a,y)].grid;return M.map(function(P,N){return dt.createElement("div",{className:"react-datepicker__month-wrapper",key:N},P.map(function(F,$){return dt.createElement("div",{ref:n.MONTH_REFS[F],key:$,onClick:function(q){n.onMonthClick(q,F)},onKeyDown:function(q){qY(q)&&(q.preventDefault(),q.key="Enter"),n.onMonthKeyDown(q,F)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onMonthMouseEnter(F)},onPointerEnter:n.props.usePointerEvent?function(){return n.onMonthMouseEnter(F)}:void 0,tabIndex:n.getTabIndex(F),className:n.getMonthClassNames(F),"aria-disabled":n.isMonthDisabled(F),role:"option","aria-label":n.getAriaLabel(F),"aria-current":n.isCurrentMonth(E,F)?"date":void 0,"aria-selected":n.isSelectedMonth(E,F,C)},n.getMonthContent(F))}))})}),He(n,"renderQuarters",function(){var f=n.props,y=f.day,a=f.selected,E=[1,2,3,4];return dt.createElement("div",{className:"react-datepicker__quarter-wrapper"},E.map(function(C,M){return dt.createElement("div",{key:M,ref:n.QUARTER_REFS[M],role:"option",onClick:function(N){n.onQuarterClick(N,C)},onKeyDown:function(N){n.onQuarterKeyDown(N,C)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onQuarterMouseEnter(C)},onPointerEnter:n.props.usePointerEvent?function(){return n.onQuarterMouseEnter(C)}:void 0,className:n.getQuarterClassNames(C),"aria-selected":n.isSelectedQuarter(y,C,a),tabIndex:n.getQuarterTabIndex(C),"aria-current":n.isCurrentQuarter(y,C)?"date":void 0},n.getQuarterContent(C))}))}),He(n,"getClassNames",function(){var f=n.props,y=f.selectingDate,a=f.selectsStart,E=f.selectsEnd,C=f.showMonthYearPicker,M=f.showQuarterYearPicker,P=f.showWeekPicker;return fn("react-datepicker__month",{"react-datepicker__month--selecting-range":y&&(a||E)},{"react-datepicker__monthPicker":C},{"react-datepicker__quarterPicker":M},{"react-datepicker__weekPicker":P})}),n}return Pa(t,e),Ia(t,[{key:"render",value:function(){var r=this.props,l=r.showMonthYearPicker,d=r.showQuarterYearPicker,f=r.day,y=r.ariaLabelPrefix,a=y===void 0?"Month ":y,E=a?a.trim()+" ":"";return dt.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(E).concat(li(f,"MMMM, yyyy",this.props.locale)),role:"listbox"},l?this.renderMonths():d?this.renderQuarters():this.renderWeeks())}}])}(dt.Component),ZY=function(e){function t(){var n;Ra(this,t);for(var r=arguments.length,l=new Array(r),d=0;d<r;d++)l[d]=arguments[d];return n=Da(this,t,[].concat(l)),He(n,"state",{height:null}),He(n,"scrollToTheSelectedTime",function(){requestAnimationFrame(function(){n.list&&(n.list.scrollTop=n.centerLi&&t.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-n.header.clientHeight:n.list.clientHeight,n.centerLi))})}),He(n,"handleClick",function(f){(n.props.minTime||n.props.maxTime)&&IB(f,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&RB(f,n.props)||n.props.onChange(f)}),He(n,"isSelectedTime",function(f){return n.props.selected&&tke(n.props.selected,f)}),He(n,"isDisabledTime",function(f){return(n.props.minTime||n.props.maxTime)&&IB(f,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&RB(f,n.props)}),He(n,"liClasses",function(f){var y=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(f):void 0];return n.isSelectedTime(f)&&y.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(f)&&y.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(wd(f)*3600+xd(f)*60+Gh(f))%(n.props.intervals*60)!==0&&y.push("react-datepicker__time-list-item--injected"),y.join(" ")}),He(n,"handleOnKeyDown",function(f,y){f.key===" "&&(f.preventDefault(),f.key="Enter"),(f.key==="ArrowUp"||f.key==="ArrowLeft")&&f.target.previousSibling&&(f.preventDefault(),f.target.previousSibling.focus()),(f.key==="ArrowDown"||f.key==="ArrowRight")&&f.target.nextSibling&&(f.preventDefault(),f.target.nextSibling.focus()),f.key==="Enter"&&n.handleClick(y),n.props.handleOnKeyDown(f)}),He(n,"renderTimes",function(){for(var f=[],y=n.props.format?n.props.format:"p",a=n.props.intervals,E=n.props.selected||n.props.openToDate||Uo(),C=$Ce(E),M=n.props.injectTimes&&n.props.injectTimes.sort(function(K,Q){return K-Q}),P=60*eke(E),N=P/a,F=0;F<N;F++){var $=h5(C,F*a);if(f.push($),M){var Z=JCe(C,$,F,a,M);f=f.concat(Z)}}var q=f.reduce(function(K,Q){return Q.getTime()<=E.getTime()?Q:K},f[0]);return f.map(function(K,Q){return dt.createElement("li",{key:Q,onClick:n.handleClick.bind(n,K),className:n.liClasses(K),ref:function(ie){K===q&&(n.centerLi=ie)},onKeyDown:function(ie){n.handleOnKeyDown(ie,K)},tabIndex:K===q?0:-1,role:"option","aria-selected":n.isSelectedTime(K)?"true":void 0,"aria-disabled":n.isDisabledTime(K)?"true":void 0},li(K,y,n.props.locale))})}),n}return Pa(t,e),Ia(t,[{key:"componentDidMount",value:function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})}},{key:"render",value:function(){var r=this,l=this.state.height;return dt.createElement("div",{className:"react-datepicker__time-container ".concat(this.props.todayButton?"react-datepicker__time-container--with-today-button":"")},dt.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(this.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(f){r.header=f}},dt.createElement("div",{className:"react-datepicker-time__header"},this.props.timeCaption)),dt.createElement("div",{className:"react-datepicker__time"},dt.createElement("div",{className:"react-datepicker__time-box"},dt.createElement("ul",{className:"react-datepicker__time-list",ref:function(f){r.list=f},style:l?{height:l}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))}}],[{key:"defaultProps",get:function(){return{intervals:30,onTimeChange:function(){},todayButton:null,timeCaption:"Time"}}}])}(dt.Component);He(ZY,"calcCenterPosition",function(e,t){return t.offsetTop-(e/2-t.clientHeight/2)});var VB=3,bke=function(e){function t(n){var r;return Ra(this,t),r=Da(this,t,[n]),He(r,"YEAR_REFS",nm(Array(r.props.yearItemNumber)).map(function(){return dt.createRef()})),He(r,"isDisabled",function(l){return Ck(l,r.props)}),He(r,"isExcluded",function(l){return _4(l,r.props)}),He(r,"selectingDate",function(){var l;return(l=r.props.selectingDate)!==null&&l!==void 0?l:r.props.preSelection}),He(r,"updateFocusOnPaginate",function(l){var d=function(){this.YEAR_REFS[l].current.focus()}.bind(r);window.requestAnimationFrame(d)}),He(r,"handleYearClick",function(l,d){r.props.onDayClick&&r.props.onDayClick(l,d)}),He(r,"handleYearNavigation",function(l,d){var f=r.props,y=f.date,a=f.yearItemNumber,E=Rp(y,a),C=E.startPeriod;r.isDisabled(d)||r.isExcluded(d)||(r.props.setPreSelection(d),l-C<0?r.updateFocusOnPaginate(a-(C-l)):l-C>=a?r.updateFocusOnPaginate(Math.abs(a-(l-C))):r.YEAR_REFS[l-C].current.focus())}),He(r,"isSameDay",function(l,d){return Do(l,d)}),He(r,"isCurrentYear",function(l){return l===ao(Uo())}),He(r,"isRangeStart",function(l){return r.props.startDate&&r.props.endDate&&ud(ad(Uo(),l),r.props.startDate)}),He(r,"isRangeEnd",function(l){return r.props.startDate&&r.props.endDate&&ud(ad(Uo(),l),r.props.endDate)}),He(r,"isInRange",function(l){return PE(l,r.props.startDate,r.props.endDate)}),He(r,"isInSelectingRange",function(l){var d=r.props,f=d.selectsStart,y=d.selectsEnd,a=d.selectsRange,E=d.startDate,C=d.endDate;return!(f||y||a)||!r.selectingDate()?!1:f&&C?PE(l,r.selectingDate(),C):y&&E||a&&E&&!C?PE(l,E,r.selectingDate()):!1}),He(r,"isSelectingRangeStart",function(l){if(!r.isInSelectingRange(l))return!1;var d=r.props,f=d.startDate,y=d.selectsStart,a=ad(Uo(),l);return y?ud(a,r.selectingDate()):ud(a,f)}),He(r,"isSelectingRangeEnd",function(l){if(!r.isInSelectingRange(l))return!1;var d=r.props,f=d.endDate,y=d.selectsEnd,a=d.selectsRange,E=ad(Uo(),l);return y||a?ud(E,r.selectingDate()):ud(E,f)}),He(r,"isKeyboardSelected",function(l){var d=J_(ad(r.props.date,l));return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!Do(d,J_(r.props.selected))&&Do(d,J_(r.props.preSelection))}),He(r,"onYearClick",function(l,d){var f=r.props.date;r.handleYearClick(J_(ad(f,d)),l)}),He(r,"onYearKeyDown",function(l,d){var f=l.key,y=r.props,a=y.date,E=y.yearItemNumber,C=y.handleOnKeyDown;if(f!=="Tab"&&l.preventDefault(),!r.props.disabledKeyboardNavigation)switch(f){case"Enter":r.onYearClick(l,d),r.props.setPreSelection(r.props.selected);break;case"ArrowRight":r.handleYearNavigation(d+1,Yh(r.props.preSelection,1));break;case"ArrowLeft":r.handleYearNavigation(d-1,ov(r.props.preSelection,1));break;case"ArrowUp":{var M=Rp(a,E),P=M.startPeriod,N=VB,F=d-N;if(F<P){var $=E%N;d>=P&&d<P+$?N=$:N+=$,F=d-N}r.handleYearNavigation(F,ov(r.props.preSelection,N));break}case"ArrowDown":{var Z=Rp(a,E),q=Z.endPeriod,K=VB,Q=d+K;if(Q>q){var te=E%K;d<=q&&d>q-te?K=te:K+=te,Q=d+K}r.handleYearNavigation(Q,Yh(r.props.preSelection,K));break}}C&&C(l)}),He(r,"getYearClassNames",function(l){var d=r.props,f=d.date,y=d.minDate,a=d.maxDate,E=d.selected,C=d.excludeDates,M=d.includeDates,P=d.filterDate,N=d.yearClassName;return fn("react-datepicker__year-text","react-datepicker__year-".concat(l),N?N(ad(f,l)):void 0,{"react-datepicker__year-text--selected":l===ao(E),"react-datepicker__year-text--disabled":(y||a||C||M||P)&&WY(l,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(l),"react-datepicker__year-text--range-start":r.isRangeStart(l),"react-datepicker__year-text--range-end":r.isRangeEnd(l),"react-datepicker__year-text--in-range":r.isInRange(l),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(l),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(l),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(l),"react-datepicker__year-text--today":r.isCurrentYear(l)})}),He(r,"getYearTabIndex",function(l){if(r.props.disabledKeyboardNavigation)return"-1";var d=ao(r.props.preSelection);return l===d?"0":"-1"}),He(r,"getYearContainerClassNames",function(){var l=r.props,d=l.selectingDate,f=l.selectsStart,y=l.selectsEnd,a=l.selectsRange;return fn("react-datepicker__year",{"react-datepicker__year--selecting-range":d&&(f||y||a)})}),He(r,"getYearContent",function(l){return r.props.renderYearContent?r.props.renderYearContent(l):l}),r}return Pa(t,e),Ia(t,[{key:"render",value:function(){for(var r=this,l=[],d=this.props,f=d.date,y=d.yearItemNumber,a=d.onYearMouseEnter,E=d.onYearMouseLeave,C=Rp(f,y),M=C.startPeriod,P=C.endPeriod,N=function(Z){l.push(dt.createElement("div",{ref:r.YEAR_REFS[Z-M],onClick:function(K){r.onYearClick(K,Z)},onKeyDown:function(K){qY(K)&&(K.preventDefault(),K.key="Enter"),r.onYearKeyDown(K,Z)},tabIndex:r.getYearTabIndex(Z),className:r.getYearClassNames(Z),onMouseEnter:r.props.usePointerEvent?void 0:function(q){return a(q,Z)},onPointerEnter:r.props.usePointerEvent?function(q){return a(q,Z)}:void 0,onMouseLeave:r.props.usePointerEvent?void 0:function(q){return E(q,Z)},onPointerLeave:r.props.usePointerEvent?function(q){return E(q,Z)}:void 0,key:Z,"aria-current":r.isCurrentYear(Z)?"date":void 0},r.getYearContent(Z)))},F=M;F<=P;F++)N(F);return dt.createElement("div",{className:this.getYearContainerClassNames()},dt.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},l))}}])}(dt.Component),vke=function(e){function t(n){var r;return Ra(this,t),r=Da(this,t,[n]),He(r,"onTimeChange",function(l){r.setState({time:l});var d=r.props.date,f=d instanceof Date&&!isNaN(d),y=f?d:new Date;y.setHours(l.split(":")[0]),y.setMinutes(l.split(":")[1]),r.props.onChange(y)}),He(r,"renderTimeInput",function(){var l=r.state.time,d=r.props,f=d.date,y=d.timeString,a=d.customTimeInput;return a?dt.cloneElement(a,{date:f,value:l,onChange:r.onTimeChange}):dt.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",required:!0,value:l,onChange:function(C){r.onTimeChange(C.target.value||y)}})}),r.state={time:r.props.timeString},r}return Pa(t,e),Ia(t,[{key:"render",value:function(){return dt.createElement("div",{className:"react-datepicker__input-time-container"},dt.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),dt.createElement("div",{className:"react-datepicker-time__input-container"},dt.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))}}],[{key:"getDerivedStateFromProps",value:function(r,l){return r.timeString!==l.time?{time:r.timeString}:null}}])}(dt.Component);function _ke(e){var t=e.showTimeSelectOnly,n=t===void 0?!1:t,r=e.showTime,l=r===void 0?!1:r,d=e.className,f=e.children,y=n?"Choose Time":"Choose Date".concat(l?" and Time":"");return dt.createElement("div",{className:d,role:"dialog","aria-label":y,"aria-modal":"true"},f)}var xke=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],wke=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=(t.className||"").split(/\s+/);return xke.some(function(r){return n.indexOf(r)>=0})},Eke=function(e){function t(n){var r;return Ra(this,t),r=Da(this,t,[n]),He(r,"handleClickOutside",function(l){r.props.onClickOutside(l)}),He(r,"setClickOutsideRef",function(){return r.containerRef.current}),He(r,"handleDropdownFocus",function(l){wke(l.target)&&r.props.onDropdownFocus()}),He(r,"getDateInView",function(){var l=r.props,d=l.preSelection,f=l.selected,y=l.openToDate,a=YY(r.props),E=GY(r.props),C=Uo(),M=y||f||d;return M||(a&&_0(C,a)?a:E&&tm(C,E)?E:C)}),He(r,"increaseMonth",function(){r.setState(function(l){var d=l.date;return{date:wu(d,1)}},function(){return r.handleMonthChange(r.state.date)})}),He(r,"decreaseMonth",function(){r.setState(function(l){var d=l.date;return{date:rv(d,1)}},function(){return r.handleMonthChange(r.state.date)})}),He(r,"handleDayClick",function(l,d,f){r.props.onSelect(l,d,f),r.props.setPreSelection&&r.props.setPreSelection(l)}),He(r,"handleDayMouseEnter",function(l){r.setState({selectingDate:l}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(l)}),He(r,"handleMonthMouseLeave",function(){r.setState({selectingDate:null}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()}),He(r,"handleYearMouseEnter",function(l,d){r.setState({selectingDate:ad(Uo(),d)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(l,d)}),He(r,"handleYearMouseLeave",function(l,d){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(l,d)}),He(r,"handleYearChange",function(l){r.props.onYearChange&&(r.props.onYearChange(l),r.setState({isRenderAriaLiveMessage:!0})),r.props.adjustDateOnChange&&(r.props.onSelect&&r.props.onSelect(l),r.props.setOpen&&r.props.setOpen(!0)),r.props.setPreSelection&&r.props.setPreSelection(l)}),He(r,"handleMonthChange",function(l){r.handleCustomMonthChange(l),r.props.adjustDateOnChange&&(r.props.onSelect&&r.props.onSelect(l),r.props.setOpen&&r.props.setOpen(!0)),r.props.setPreSelection&&r.props.setPreSelection(l)}),He(r,"handleCustomMonthChange",function(l){r.props.onMonthChange&&(r.props.onMonthChange(l),r.setState({isRenderAriaLiveMessage:!0}))}),He(r,"handleMonthYearChange",function(l){r.handleYearChange(l),r.handleMonthChange(l)}),He(r,"changeYear",function(l){r.setState(function(d){var f=d.date;return{date:ad(f,l)}},function(){return r.handleYearChange(r.state.date)})}),He(r,"changeMonth",function(l){r.setState(function(d){var f=d.date;return{date:Es(f,l)}},function(){return r.handleMonthChange(r.state.date)})}),He(r,"changeMonthYear",function(l){r.setState(function(d){var f=d.date;return{date:ad(Es(f,Ss(l)),ao(l))}},function(){return r.handleMonthYearChange(r.state.date)})}),He(r,"header",function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r.state.date,d=Hp(l,r.props.locale,r.props.calendarStartDay),f=[];return r.props.showWeekNumbers&&f.push(dt.createElement("div",{key:"W",className:"react-datepicker__day-name"},r.props.weekLabel||"#")),f.concat([0,1,2,3,4,5,6].map(function(y){var a=fm(d,y),E=r.formatWeekday(a,r.props.locale),C=r.props.weekDayClassName?r.props.weekDayClassName(a):void 0;return dt.createElement("div",{key:y,"aria-label":li(a,"EEEE",r.props.locale),className:fn("react-datepicker__day-name",C)},E)}))}),He(r,"formatWeekday",function(l,d){return r.props.formatWeekDay?VCe(l,r.props.formatWeekDay,d):r.props.useWeekdaysShort?WCe(l,d):HCe(l,d)}),He(r,"decreaseYear",function(){r.setState(function(l){var d=l.date;return{date:ov(d,r.props.showYearPicker?r.props.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})}),He(r,"clearSelectingDate",function(){r.setState({selectingDate:null})}),He(r,"renderPreviousButton",function(){if(!r.props.renderCustomHeader){var l;switch(!0){case r.props.showMonthYearPicker:l=LB(r.state.date,r.props);break;case r.props.showYearPicker:l=ZCe(r.state.date,r.props);break;case r.props.showQuarterYearPicker:l=GCe(r.state.date,r.props);break;default:l=PB(r.state.date,r.props);break}if(!(!r.props.forceShowMonthNavigation&&!r.props.showDisabledMonthNavigation&&l||r.props.showTimeSelectOnly)){var d=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],f=["react-datepicker__navigation","react-datepicker__navigation--previous"],y=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(y=r.decreaseYear),l&&r.props.showDisabledMonthNavigation&&(f.push("react-datepicker__navigation--previous--disabled"),y=null);var a=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,E=r.props,C=E.previousMonthButtonLabel,M=E.previousYearButtonLabel,P=r.props,N=P.previousMonthAriaLabel,F=N===void 0?typeof C=="string"?C:"Previous Month":N,$=P.previousYearAriaLabel,Z=$===void 0?typeof M=="string"?M:"Previous Year":$;return dt.createElement("button",{type:"button",className:f.join(" "),onClick:y,onKeyDown:r.props.handleOnKeyDown,"aria-label":a?Z:F},dt.createElement("span",{className:d.join(" ")},a?r.props.previousYearButtonLabel:r.props.previousMonthButtonLabel))}}}),He(r,"increaseYear",function(){r.setState(function(l){var d=l.date;return{date:Yh(d,r.props.showYearPicker?r.props.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})}),He(r,"renderNextButton",function(){if(!r.props.renderCustomHeader){var l;switch(!0){case r.props.showMonthYearPicker:l=NB(r.state.date,r.props);break;case r.props.showYearPicker:l=KCe(r.state.date,r.props);break;case r.props.showQuarterYearPicker:l=qCe(r.state.date,r.props);break;default:l=OB(r.state.date,r.props);break}if(!(!r.props.forceShowMonthNavigation&&!r.props.showDisabledMonthNavigation&&l||r.props.showTimeSelectOnly)){var d=["react-datepicker__navigation","react-datepicker__navigation--next"],f=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];r.props.showTimeSelect&&d.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&d.push("react-datepicker__navigation--next--with-today-button");var y=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(y=r.increaseYear),l&&r.props.showDisabledMonthNavigation&&(d.push("react-datepicker__navigation--next--disabled"),y=null);var a=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,E=r.props,C=E.nextMonthButtonLabel,M=E.nextYearButtonLabel,P=r.props,N=P.nextMonthAriaLabel,F=N===void 0?typeof C=="string"?C:"Next Month":N,$=P.nextYearAriaLabel,Z=$===void 0?typeof M=="string"?M:"Next Year":$;return dt.createElement("button",{type:"button",className:d.join(" "),onClick:y,onKeyDown:r.props.handleOnKeyDown,"aria-label":a?Z:F},dt.createElement("span",{className:f.join(" ")},a?r.props.nextYearButtonLabel:r.props.nextMonthButtonLabel))}}}),He(r,"renderCurrentMonth",function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r.state.date,d=["react-datepicker__current-month"];return r.props.showYearDropdown&&d.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&d.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&d.push("react-datepicker__current-month--hasMonthYearDropdown"),dt.createElement("div",{className:d.join(" ")},li(l,r.props.dateFormat,r.props.locale))}),He(r,"renderYearDropdown",function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(!r.props.showYearDropdown||l))return dt.createElement(ike,{adjustDateOnChange:r.props.adjustDateOnChange,date:r.state.date,onSelect:r.props.onSelect,setOpen:r.props.setOpen,dropdownMode:r.props.dropdownMode,onChange:r.changeYear,minDate:r.props.minDate,maxDate:r.props.maxDate,year:ao(r.state.date),scrollableYearDropdown:r.props.scrollableYearDropdown,yearDropdownItemNumber:r.props.yearDropdownItemNumber})}),He(r,"renderMonthDropdown",function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(!r.props.showMonthDropdown||l))return dt.createElement(lke,{dropdownMode:r.props.dropdownMode,locale:r.props.locale,onChange:r.changeMonth,month:Ss(r.state.date),useShortMonthInDropdown:r.props.useShortMonthInDropdown})}),He(r,"renderMonthYearDropdown",function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(!r.props.showMonthYearDropdown||l))return dt.createElement(hke,{dropdownMode:r.props.dropdownMode,locale:r.props.locale,dateFormat:r.props.dateFormat,onChange:r.changeMonthYear,minDate:r.props.minDate,maxDate:r.props.maxDate,date:r.state.date,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown})}),He(r,"handleTodayButtonClick",function(l){r.props.onSelect(MB(),l),r.props.setPreSelection&&r.props.setPreSelection(MB())}),He(r,"renderTodayButton",function(){if(!(!r.props.todayButton||r.props.showTimeSelectOnly))return dt.createElement("div",{className:"react-datepicker__today-button",onClick:function(d){return r.handleTodayButtonClick(d)}},r.props.todayButton)}),He(r,"renderDefaultHeader",function(l){var d=l.monthDate,f=l.i;return dt.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(d),dt.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(f!==0),r.renderMonthYearDropdown(f!==0),r.renderYearDropdown(f!==0)),dt.createElement("div",{className:"react-datepicker__day-names"},r.header(d)))}),He(r,"renderCustomHeader",function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=l.monthDate,f=l.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var y=PB(r.state.date,r.props),a=OB(r.state.date,r.props),E=LB(r.state.date,r.props),C=NB(r.state.date,r.props),M=!r.props.showMonthYearPicker&&!r.props.showQuarterYearPicker&&!r.props.showYearPicker;return dt.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},r.props.renderCustomHeader(Lh(Lh({},r.state),{},{customHeaderCount:f,monthDate:d,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:y,nextMonthButtonDisabled:a,prevYearButtonDisabled:E,nextYearButtonDisabled:C})),M&&dt.createElement("div",{className:"react-datepicker__day-names"},r.header(d)))}),He(r,"renderYearHeader",function(l){var d=l.monthDate,f=r.props,y=f.showYearPicker,a=f.yearItemNumber,E=Rp(d,a),C=E.startPeriod,M=E.endPeriod;return dt.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},y?"".concat(C," - ").concat(M):ao(d))}),He(r,"renderHeader",function(l){switch(!0){case r.props.renderCustomHeader!==void 0:return r.renderCustomHeader(l);case(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker):return r.renderYearHeader(l);default:return r.renderDefaultHeader(l)}}),He(r,"renderMonths",function(){var l;if(!(r.props.showTimeSelectOnly||r.props.showYearPicker)){for(var d=[],f=r.props.showPreviousMonths?r.props.monthsShown-1:0,y=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Yh(r.state.date,f):rv(r.state.date,f),a=(l=r.props.monthSelectedIn)!==null&&l!==void 0?l:f,E=0;E<r.props.monthsShown;++E){var C=E-a+f,M=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Yh(y,C):wu(y,C),P="month-".concat(E),N=E<r.props.monthsShown-1,F=E>0;d.push(dt.createElement("div",{key:P,ref:function(Z){r.monthContainer=Z},className:"react-datepicker__month-container"},r.renderHeader({monthDate:M,i:E}),dt.createElement(yke,{chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:r.props.weekAriaLabelPrefix,ariaLabelPrefix:r.props.monthAriaLabelPrefix,onChange:r.changeMonthYear,day:M,dayClassName:r.props.dayClassName,calendarStartDay:r.props.calendarStartDay,monthClassName:r.props.monthClassName,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,usePointerEvent:r.props.usePointerEvent,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,onWeekSelect:r.props.onWeekSelect,orderInDisplay:E,formatWeekNumber:r.props.formatWeekNumber,locale:r.props.locale,minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,highlightDates:r.props.highlightDates,holidays:r.props.holidays,selectingDate:r.state.selectingDate,includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,inline:r.props.inline,shouldFocusDayInline:r.props.shouldFocusDayInline,fixedHeight:r.props.fixedHeight,filterDate:r.props.filterDate,preSelection:r.props.preSelection,setPreSelection:r.props.setPreSelection,selected:r.props.selected,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,selectsMultiple:r.props.selectsMultiple,selectedDates:r.props.selectedDates,showWeekNumbers:r.props.showWeekNumbers,startDate:r.props.startDate,endDate:r.props.endDate,peekNextMonth:r.props.peekNextMonth,setOpen:r.props.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,renderDayContents:r.props.renderDayContents,renderMonthContent:r.props.renderMonthContent,renderQuarterContent:r.props.renderQuarterContent,renderYearContent:r.props.renderYearContent,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,showMonthYearPicker:r.props.showMonthYearPicker,showFullMonthYearPicker:r.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:r.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:r.props.showFourColumnMonthYearPicker,showYearPicker:r.props.showYearPicker,showQuarterYearPicker:r.props.showQuarterYearPicker,showWeekPicker:r.props.showWeekPicker,isInputFocused:r.props.isInputFocused,containerRef:r.containerRef,monthShowsDuplicateDaysEnd:N,monthShowsDuplicateDaysStart:F})))}return d}}),He(r,"renderYears",function(){if(!r.props.showTimeSelectOnly&&r.props.showYearPicker)return dt.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),dt.createElement(bke,hx({onDayClick:r.handleDayClick,selectingDate:r.state.selectingDate,clearSelectingDate:r.clearSelectingDate,date:r.state.date},r.props,{onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave})))}),He(r,"renderTimeSection",function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return dt.createElement(ZY,{selected:r.props.selected,openToDate:r.props.openToDate,onChange:r.props.onTimeChange,timeClassName:r.props.timeClassName,format:r.props.timeFormat,includeTimes:r.props.includeTimes,intervals:r.props.timeIntervals,minTime:r.props.minTime,maxTime:r.props.maxTime,excludeTimes:r.props.excludeTimes,filterTime:r.props.filterTime,timeCaption:r.props.timeCaption,todayButton:r.props.todayButton,showMonthDropdown:r.props.showMonthDropdown,showMonthYearDropdown:r.props.showMonthYearDropdown,showYearDropdown:r.props.showYearDropdown,withPortal:r.props.withPortal,monthRef:r.state.monthContainer,injectTimes:r.props.injectTimes,locale:r.props.locale,handleOnKeyDown:r.props.handleOnKeyDown,showTimeSelectOnly:r.props.showTimeSelectOnly})}),He(r,"renderInputTimeSection",function(){var l=new Date(r.props.selected),d=wp(l)&&!!r.props.selected,f=d?"".concat(BB(l.getHours()),":").concat(BB(l.getMinutes())):"";if(r.props.showTimeInput)return dt.createElement(vke,{date:l,timeString:f,timeInputLabel:r.props.timeInputLabel,onChange:r.props.onTimeChange,customTimeInput:r.props.customTimeInput})}),He(r,"renderAriaLiveRegion",function(){var l=Rp(r.state.date,r.props.yearItemNumber),d=l.startPeriod,f=l.endPeriod,y;return r.props.showYearPicker?y="".concat(d," - ").concat(f):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?y=ao(r.state.date):y="".concat(v4(Ss(r.state.date),r.props.locale)," ").concat(ao(r.state.date)),dt.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&y)}),He(r,"renderChildren",function(){if(r.props.children)return dt.createElement("div",{className:"react-datepicker__children-container"},r.props.children)}),r.containerRef=dt.createRef(),r.state={date:r.getDateInView(),selectingDate:null,monthContainer:null,isRenderAriaLiveMessage:!1},r}return Pa(t,e),Ia(t,[{key:"componentDidMount",value:function(){var r=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){r.setState({monthContainer:r.monthContainer})}())}},{key:"componentDidUpdate",value:function(r){var l=this;if(this.props.preSelection&&(!Do(this.props.preSelection,r.preSelection)||this.props.monthSelectedIn!==r.monthSelectedIn)){var d=!El(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return d&&l.handleCustomMonthChange(l.state.date)})}else this.props.openToDate&&!Do(this.props.openToDate,r.openToDate)&&this.setState({date:this.props.openToDate})}},{key:"render",value:function(){var r=this.props.container||_ke;return dt.createElement("div",{style:{display:"contents"},ref:this.containerRef},dt.createElement(r,{className:fn("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))}}],[{key:"defaultProps",get:function(){return{onDropdownFocus:function(){},monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",customTimeInput:null,yearItemNumber:Wx}}}])}(dt.Component),Tke=function(t){var n=t.icon,r=t.className,l=r===void 0?"":r,d=t.onClick,f="react-datepicker__calendar-icon";return dt.isValidElement(n)?dt.cloneElement(n,{className:"".concat(n.props.className||""," ").concat(f," ").concat(l),onClick:function(a){typeof n.props.onClick=="function"&&n.props.onClick(a),typeof d=="function"&&d(a)}}):typeof n=="string"?dt.createElement("i",{className:"".concat(f," ").concat(n," ").concat(l),"aria-hidden":"true",onClick:d}):dt.createElement("svg",{className:"".concat(f," ").concat(l),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:d},dt.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},Ske=Tke,KY=function(e){function t(n){var r;return Ra(this,t),r=Da(this,t,[n]),r.el=document.createElement("div"),r}return Pa(t,e),Ia(t,[{key:"componentDidMount",value:function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.portalRoot.removeChild(this.el)}},{key:"render",value:function(){return kp.createPortal(this.props.children,this.el)}}])}(dt.Component),Cke="[tabindex], a, button, input, select, textarea",kke=function(t){return!t.disabled&&t.tabIndex!==-1},XY=function(e){function t(n){var r;return Ra(this,t),r=Da(this,t,[n]),He(r,"getTabChildren",function(){return Array.prototype.slice.call(r.tabLoopRef.current.querySelectorAll(Cke),1,-1).filter(kke)}),He(r,"handleFocusStart",function(){var l=r.getTabChildren();l&&l.length>1&&l[l.length-1].focus()}),He(r,"handleFocusEnd",function(){var l=r.getTabChildren();l&&l.length>1&&l[0].focus()}),r.tabLoopRef=dt.createRef(),r}return Pa(t,e),Ia(t,[{key:"render",value:function(){return this.props.enableTabLoop?dt.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},dt.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:"0",onFocus:this.handleFocusStart}),this.props.children,dt.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:"0",onFocus:this.handleFocusEnd})):this.props.children}}],[{key:"defaultProps",get:function(){return{enableTabLoop:!0}}}])}(dt.Component);function Ake(e){var t=function(r){var l=Lh(Lh({},r),{},{popperModifiers:r.popperModifiers||[],popperProps:r.popperProps||{},hidePopper:typeof r.hidePopper=="boolean"?r.hidePopper:!0}),d=dt.useRef(),f=kCe(Lh({open:!l.hidePopper,whileElementsMounted:ope,placement:l.popperPlacement,middleware:[ipe({padding:15}),jfe(10),spe({element:d})].concat(nm(l.popperModifiers))},l.popperProps));return dt.createElement(e,hx({},l,{popperProps:Lh(Lh({},f),{},{arrowRef:d})}))};return t}var Mke=function(e){function t(){return Ra(this,t),Da(this,t,arguments)}return Pa(t,e),Ia(t,[{key:"render",value:function(){var r=this.props,l=r.className,d=r.wrapperClassName,f=r.hidePopper,y=r.popperComponent,a=r.targetComponent,E=r.enableTabLoop,C=r.popperOnKeyDown,M=r.portalId,P=r.portalHost,N=r.popperProps,F=r.showArrow,$;if(!f){var Z=fn("react-datepicker-popper",l);$=dt.createElement(XY,{enableTabLoop:E},dt.createElement("div",{ref:N.refs.setFloating,style:N.floatingStyles,className:Z,"data-placement":N.placement,onKeyDown:C},y,F&&dt.createElement(xCe,{ref:N.arrowRef,context:N.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&($=dt.createElement(this.props.popperContainer,{},$)),M&&!f&&($=dt.createElement(KY,{portalId:M,portalHost:P},$));var q=fn("react-datepicker-wrapper",d);return dt.createElement(dt.Fragment,null,dt.createElement("div",{ref:N.refs.setReference,className:q},a),$)}}],[{key:"defaultProps",get:function(){return{hidePopper:!0}}}])}(dt.Component),Dke=Ake(Mke),HB="react-datepicker-ignore-onclickoutside",Rke=Sk(Eke);function Ike(e,t){return e&&t?Ss(e)!==Ss(t)||ao(e)!==ao(t):e!==t}var hM="Date input not valid.",Pke=function(e){function t(n){var r;return Ra(this,t),r=Da(this,t,[n]),He(r,"getPreSelection",function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:Uo()}),He(r,"modifyHolidays",function(){var l;return(l=r.props.holidays)===null||l===void 0?void 0:l.reduce(function(d,f){var y=new Date(f.date);return cx(y)?[].concat(nm(d),[Lh(Lh({},f),{},{date:y})]):d},[])}),He(r,"calcInitialState",function(){var l,d=r.getPreSelection(),f=YY(r.props),y=GY(r.props),a=f&&_0(d,_d(f))?f:y&&tm(d,m5(y))?y:d;return{open:r.props.startOpen||!1,preventFocus:!1,preSelection:(l=r.props.selectsRange?r.props.startDate:r.props.selected)!==null&&l!==void 0?l:a,highlightDates:zB(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1}}),He(r,"clearPreventFocusTimeout",function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)}),He(r,"setFocus",function(){r.input&&r.input.focus&&r.input.focus({preventScroll:!0})}),He(r,"setBlur",function(){r.input&&r.input.blur&&r.input.blur(),r.cancelFocusInput()}),He(r,"setOpen",function(l){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r.setState({open:l,preSelection:l&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:fM},function(){l||r.setState(function(f){return{focused:d?f.focused:!1}},function(){!d&&r.setBlur(),r.setState({inputValue:null})})})}),He(r,"inputOk",function(){return v0(r.state.preSelection)}),He(r,"isCalendarOpen",function(){return r.props.open===void 0?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open}),He(r,"handleFocus",function(l){r.state.preventFocus||(r.props.onFocus(l),!r.props.preventOpenOnFocus&&!r.props.readOnly&&r.setOpen(!0)),r.setState({focused:!0})}),He(r,"sendFocusBackToInput",function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})}),He(r,"cancelFocusInput",function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=null}),He(r,"deferFocusInput",function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)}),He(r,"handleDropdownFocus",function(){r.cancelFocusInput()}),He(r,"handleBlur",function(l){(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&r.props.onBlur(l),r.setState({focused:!1})}),He(r,"handleCalendarClickOutside",function(l){r.props.inline||r.setOpen(!1),r.props.onClickOutside(l),r.props.withPortal&&l.preventDefault()}),He(r,"handleChange",function(){for(var l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];var y=d[0];if(!(r.props.onChangeRaw&&(r.props.onChangeRaw.apply(r,d),typeof y.isDefaultPrevented!="function"||y.isDefaultPrevented()))){r.setState({inputValue:y.target.value,lastPreSelectChange:Oke});var a=NCe(y.target.value,r.props.dateFormat,r.props.locale,r.props.strictParsing,r.props.minDate);r.props.showTimeSelectOnly&&r.props.selected&&a&&!Do(a,r.props.selected)&&(a=oCe(r.props.selected,{hours:wd(a),minutes:xd(a),seconds:Gh(a)})),(a||!y.target.value)&&r.setSelected(a,y,!0)}}),He(r,"handleSelect",function(l,d,f){if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(d),r.setSelected(l,d,!1,f),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect)r.setPreSelection(l);else if(!r.props.inline){r.props.selectsRange||r.setOpen(!1);var y=r.props,a=y.startDate,E=y.endDate;a&&!E&&(r.props.swapRange||!$B(l,a))&&r.setOpen(!1)}}),He(r,"setSelected",function(l,d,f,y){var a=l;if(r.props.showYearPicker){if(a!==null&&WY(ao(a),r.props))return}else if(r.props.showMonthYearPicker){if(a!==null&&vT(a,r.props))return}else if(a!==null&&Ck(a,r.props))return;var E=r.props,C=E.onChange,M=E.selectsRange,P=E.startDate,N=E.endDate,F=E.selectsMultiple,$=E.selectedDates,Z=E.minTime,q=E.swapRange;if(!Xg(r.props.selected,a)||r.props.allowSameDay||M||F)if(a!==null&&(r.props.selected&&(!f||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly&&!r.props.showTimeInput)&&(a=cM(a,{hour:wd(r.props.selected),minute:xd(r.props.selected),second:Gh(r.props.selected)})),!f&&(r.props.showTimeSelect||r.props.showTimeSelectOnly)&&Z&&(a=cM(a,{hour:Z.getHours(),minute:Z.getMinutes(),second:Z.getSeconds()})),r.props.inline||r.setState({preSelection:a}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:y})),M){var K=!P&&!N,Q=P&&!N,te=P&&N;K?C([a,null],d):Q&&(a===null?C([null,null],d):$B(a,P)?C(q?[a,P]:[a,null],d):C([P,a],d)),te&&C([a,null],d)}else if(F)if(!($!=null&&$.length))C([a],d);else{var ie=$.some(function(re){return Do(re,a)});if(ie){var ue=$.filter(function(re){return!Do(re,a)});C(ue,d)}else C([].concat(nm($),[a]),d)}else C(a,d);f||(r.props.onSelect(a,d),r.setState({inputValue:null}))}),He(r,"setPreSelection",function(l){var d=typeof r.props.minDate<"u",f=typeof r.props.maxDate<"u",y=!0;if(l){var a=_d(l);if(d&&f)y=e1(l,r.props.minDate,r.props.maxDate);else if(d){var E=_d(r.props.minDate);y=tm(l,E)||Xg(a,E)}else if(f){var C=m5(r.props.maxDate);y=_0(l,C)||Xg(a,C)}}y&&r.setState({preSelection:l})}),He(r,"toggleCalendar",function(){r.setOpen(!r.state.open)}),He(r,"handleTimeChange",function(l){var d=r.props.selected?r.props.selected:r.getPreSelection(),f=r.props.selected?l:cM(d,{hour:wd(l),minute:xd(l)});r.setState({preSelection:f}),r.props.onChange(f),r.props.shouldCloseOnSelect&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}),He(r,"onInputClick",function(){!r.props.disabled&&!r.props.readOnly&&r.setOpen(!0),r.props.onInputClick()}),He(r,"onInputKeyDown",function(l){r.props.onKeyDown(l);var d=l.key;if(!r.state.open&&!r.props.inline&&!r.props.preventOpenOnFocus){(d==="ArrowDown"||d==="ArrowUp"||d==="Enter")&&r.onInputClick();return}if(r.state.open){if(d==="ArrowDown"||d==="ArrowUp"){l.preventDefault();var f=r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',y=r.calendar.componentNode&&r.calendar.componentNode.querySelector(f);y&&y.focus({preventScroll:!0});return}var a=Uo(r.state.preSelection);d==="Enter"?(l.preventDefault(),r.inputOk()&&r.state.lastPreSelectChange===fM?(r.handleSelect(a,l),!r.props.shouldCloseOnSelect&&r.setPreSelection(a)):r.setOpen(!1)):d==="Escape"?(l.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1)):d==="Tab"&&r.setOpen(!1),r.inputOk()||r.props.onInputError({code:1,msg:hM})}}),He(r,"onPortalKeyDown",function(l){var d=l.key;d==="Escape"&&(l.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))}),He(r,"onDayKeyDown",function(l){r.props.onKeyDown(l);var d=l.key,f=l.shiftKey,y=Uo(r.state.preSelection);if(d==="Enter")l.preventDefault(),r.handleSelect(y,l),!r.props.shouldCloseOnSelect&&r.setPreSelection(y);else if(d==="Escape")l.preventDefault(),r.setOpen(!1),r.inputOk()||r.props.onInputError({code:1,msg:hM});else if(!r.props.disabledKeyboardNavigation){var a;switch(d){case"ArrowLeft":r.props.showWeekPicker?a=bB(y,1):a=NTe(y,1);break;case"ArrowRight":r.props.showWeekPicker?a=CS(y,1):a=fm(y,1);break;case"ArrowUp":a=bB(y,1);break;case"ArrowDown":a=CS(y,1);break;case"PageUp":a=f?ov(y,1):rv(y,1);break;case"PageDown":a=f?Yh(y,1):wu(y,1);break;case"Home":a=Hp(y,r.props.locale,r.props.calendarStartDay);break;case"End":a=UCe(y);break;default:a=null;break}if(!a){r.props.onInputError&&r.props.onInputError({code:1,msg:hM});return}if(l.preventDefault(),r.setState({lastPreSelectChange:fM}),r.props.adjustDateOnChange&&r.setSelected(a),r.setPreSelection(a),r.props.inline){var E=Ss(y),C=Ss(a),M=ao(y),P=ao(a);E!==C||M!==P?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}}),He(r,"onPopperKeyDown",function(l){var d=l.key;d==="Escape"&&(l.preventDefault(),r.sendFocusBackToInput())}),He(r,"onClearClick",function(l){l&&l.preventDefault&&l.preventDefault(),r.sendFocusBackToInput(),r.props.selectsRange?r.props.onChange([null,null],l):r.props.onChange(null,l),r.setState({inputValue:null})}),He(r,"clear",function(){r.onClearClick()}),He(r,"onScroll",function(l){typeof r.props.closeOnScroll=="boolean"&&r.props.closeOnScroll?(l.target===document||l.target===document.documentElement||l.target===document.body)&&r.setOpen(!1):typeof r.props.closeOnScroll=="function"&&r.props.closeOnScroll(l)&&r.setOpen(!1)}),He(r,"renderCalendar",function(){return!r.props.inline&&!r.isCalendarOpen()?null:dt.createElement(Rke,{ref:function(d){r.calendar=d},locale:r.props.locale,calendarStartDay:r.props.calendarStartDay,chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:r.props.weekAriaLabelPrefix,monthAriaLabelPrefix:r.props.monthAriaLabelPrefix,adjustDateOnChange:r.props.adjustDateOnChange,setOpen:r.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,dateFormat:r.props.dateFormatCalendar,useWeekdaysShort:r.props.useWeekdaysShort,formatWeekDay:r.props.formatWeekDay,dropdownMode:r.props.dropdownMode,selected:r.props.selected,preSelection:r.state.preSelection,onSelect:r.handleSelect,onWeekSelect:r.props.onWeekSelect,openToDate:r.props.openToDate,minDate:r.props.minDate,maxDate:r.props.maxDate,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,selectsMultiple:r.props.selectsMultiple,selectedDates:r.props.selectedDates,startDate:r.props.startDate,endDate:r.props.endDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,filterDate:r.props.filterDate,onClickOutside:r.handleCalendarClickOutside,formatWeekNumber:r.props.formatWeekNumber,highlightDates:r.state.highlightDates,holidays:QCe(r.modifyHolidays()),includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,includeTimes:r.props.includeTimes,injectTimes:r.props.injectTimes,inline:r.props.inline,shouldFocusDayInline:r.state.shouldFocusDayInline,peekNextMonth:r.props.peekNextMonth,showMonthDropdown:r.props.showMonthDropdown,showPreviousMonths:r.props.showPreviousMonths,useShortMonthInDropdown:r.props.useShortMonthInDropdown,showMonthYearDropdown:r.props.showMonthYearDropdown,showWeekNumbers:r.props.showWeekNumbers,showYearDropdown:r.props.showYearDropdown,withPortal:r.props.withPortal,forceShowMonthNavigation:r.props.forceShowMonthNavigation,showDisabledMonthNavigation:r.props.showDisabledMonthNavigation,scrollableYearDropdown:r.props.scrollableYearDropdown,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown,todayButton:r.props.todayButton,weekLabel:r.props.weekLabel,outsideClickIgnoreClass:HB,fixedHeight:r.props.fixedHeight,monthsShown:r.props.monthsShown,monthSelectedIn:r.state.monthSelectedIn,onDropdownFocus:r.handleDropdownFocus,onMonthChange:r.props.onMonthChange,onYearChange:r.props.onYearChange,dayClassName:r.props.dayClassName,weekDayClassName:r.props.weekDayClassName,monthClassName:r.props.monthClassName,timeClassName:r.props.timeClassName,showDateSelect:r.props.showDateSelect,showTimeSelect:r.props.showTimeSelect,showTimeSelectOnly:r.props.showTimeSelectOnly,onTimeChange:r.handleTimeChange,timeFormat:r.props.timeFormat,timeIntervals:r.props.timeIntervals,minTime:r.props.minTime,maxTime:r.props.maxTime,excludeTimes:r.props.excludeTimes,filterTime:r.props.filterTime,timeCaption:r.props.timeCaption,className:r.props.calendarClassName,container:r.props.calendarContainer,yearItemNumber:r.props.yearItemNumber,yearDropdownItemNumber:r.props.yearDropdownItemNumber,previousMonthAriaLabel:r.props.previousMonthAriaLabel,previousMonthButtonLabel:r.props.previousMonthButtonLabel,nextMonthAriaLabel:r.props.nextMonthAriaLabel,nextMonthButtonLabel:r.props.nextMonthButtonLabel,previousYearAriaLabel:r.props.previousYearAriaLabel,previousYearButtonLabel:r.props.previousYearButtonLabel,nextYearAriaLabel:r.props.nextYearAriaLabel,nextYearButtonLabel:r.props.nextYearButtonLabel,timeInputLabel:r.props.timeInputLabel,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,renderCustomHeader:r.props.renderCustomHeader,popperProps:r.props.popperProps,renderDayContents:r.props.renderDayContents,renderMonthContent:r.props.renderMonthContent,renderQuarterContent:r.props.renderQuarterContent,renderYearContent:r.props.renderYearContent,onDayMouseEnter:r.props.onDayMouseEnter,onMonthMouseLeave:r.props.onMonthMouseLeave,onYearMouseEnter:r.props.onYearMouseEnter,onYearMouseLeave:r.props.onYearMouseLeave,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,showTimeInput:r.props.showTimeInput,showMonthYearPicker:r.props.showMonthYearPicker,showFullMonthYearPicker:r.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:r.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:r.props.showFourColumnMonthYearPicker,showYearPicker:r.props.showYearPicker,showQuarterYearPicker:r.props.showQuarterYearPicker,showWeekPicker:r.props.showWeekPicker,excludeScrollbar:r.props.excludeScrollbar,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,isInputFocused:r.state.focused,customTimeInput:r.props.customTimeInput,setPreSelection:r.setPreSelection,usePointerEvent:r.props.usePointerEvent,yearClassName:r.props.yearClassName},r.props.children)}),He(r,"renderAriaLiveRegion",function(){var l=r.props,d=l.dateFormat,f=l.locale,y=r.props.showTimeInput||r.props.showTimeSelect,a=y?"PPPPp":"PPPP",E;return r.props.selectsRange?E="Selected start date: ".concat(lc(r.props.startDate,{dateFormat:a,locale:f}),". ").concat(r.props.endDate?"End date: "+lc(r.props.endDate,{dateFormat:a,locale:f}):""):r.props.showTimeSelectOnly?E="Selected time: ".concat(lc(r.props.selected,{dateFormat:d,locale:f})):r.props.showYearPicker?E="Selected year: ".concat(lc(r.props.selected,{dateFormat:"yyyy",locale:f})):r.props.showMonthYearPicker?E="Selected month: ".concat(lc(r.props.selected,{dateFormat:"MMMM yyyy",locale:f})):r.props.showQuarterYearPicker?E="Selected quarter: ".concat(lc(r.props.selected,{dateFormat:"yyyy, QQQ",locale:f})):E="Selected date: ".concat(lc(r.props.selected,{dateFormat:a,locale:f})),dt.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},E)}),He(r,"renderDateInput",function(){var l,d=fn(r.props.className,He({},HB,r.state.open)),f=r.props.customInput||dt.createElement("input",{type:"text"}),y=r.props.customInputRef||"ref",a=typeof r.props.value=="string"?r.props.value:typeof r.state.inputValue=="string"?r.state.inputValue:r.props.selectsRange?zCe(r.props.startDate,r.props.endDate,r.props):r.props.selectsMultiple?BCe(r.props.selectedDates,r.props):lc(r.props.selected,r.props);return dt.cloneElement(f,(l={},He(He(He(He(He(He(He(He(He(He(l,y,function(E){r.input=E}),"value",a),"onBlur",r.handleBlur),"onChange",r.handleChange),"onClick",r.onInputClick),"onFocus",r.handleFocus),"onKeyDown",r.onInputKeyDown),"id",r.props.id),"name",r.props.name),"form",r.props.form),He(He(He(He(He(He(He(He(He(He(l,"autoFocus",r.props.autoFocus),"placeholder",r.props.placeholderText),"disabled",r.props.disabled),"autoComplete",r.props.autoComplete),"className",fn(f.props.className,d)),"title",r.props.title),"readOnly",r.props.readOnly),"required",r.props.required),"tabIndex",r.props.tabIndex),"aria-describedby",r.props.ariaDescribedBy),He(He(He(l,"aria-invalid",r.props.ariaInvalid),"aria-labelledby",r.props.ariaLabelledBy),"aria-required",r.props.ariaRequired)))}),He(r,"renderClearButton",function(){var l=r.props,d=l.isClearable,f=l.disabled,y=l.selected,a=l.startDate,E=l.endDate,C=l.clearButtonTitle,M=l.clearButtonClassName,P=M===void 0?"":M,N=l.ariaLabelClose,F=N===void 0?"Close":N,$=l.selectedDates;return d&&(y!=null||a!=null||E!=null||$!=null&&$.length)?dt.createElement("button",{type:"button",className:fn("react-datepicker__close-icon",P,{"react-datepicker__close-icon--disabled":f}),disabled:f,"aria-label":F,onClick:r.onClearClick,title:C,tabIndex:-1}):null}),r.state=r.calcInitialState(),r.preventFocusTimeout=null,r}return Pa(t,e),Ia(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll,!0)}},{key:"componentDidUpdate",value:function(r,l){r.inline&&Ike(r.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&r.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),r.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:zB(this.props.highlightDates)}),!l.focused&&!Xg(r.selected,this.props.selected)&&this.setState({inputValue:null}),l.open!==this.state.open&&(l.open===!1&&this.state.open===!0&&this.props.onCalendarOpen(),l.open===!0&&this.state.open===!1&&this.props.onCalendarClose())}},{key:"componentWillUnmount",value:function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0)}},{key:"renderInputContainer",value:function(){var r=this.props,l=r.showIcon,d=r.icon,f=r.calendarIconClassname,y=r.toggleCalendarOnIconClick,a=this.state.open;return dt.createElement("div",{className:"react-datepicker__input-container".concat(l?" react-datepicker__view-calendar-icon":"")},l&&dt.createElement(Ske,hx({icon:d,className:"".concat(f," ").concat(a&&"react-datepicker-ignore-onclickoutside")},y?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())}},{key:"render",value:function(){var r=this.renderCalendar();if(this.props.inline)return r;if(this.props.withPortal){var l=this.state.open?dt.createElement(XY,{enableTabLoop:this.props.enableTabLoop},dt.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},r)):null;return this.state.open&&this.props.portalId&&(l=dt.createElement(KY,{portalId:this.props.portalId,portalHost:this.props.portalHost},l)),dt.createElement("div",null,this.renderInputContainer(),l)}return dt.createElement(Dke,{className:this.props.popperClassName,wrapperClassName:this.props.wrapperClassName,hidePopper:!this.isCalendarOpen(),portalId:this.props.portalId,portalHost:this.props.portalHost,popperModifiers:this.props.popperModifiers,targetComponent:this.renderInputContainer(),popperContainer:this.props.popperContainer,popperComponent:r,popperPlacement:this.props.popperPlacement,popperProps:this.props.popperProps,popperOnKeyDown:this.onPopperKeyDown,enableTabLoop:this.props.enableTabLoop,showArrow:this.props.showPopperArrow})}}],[{key:"defaultProps",get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",onChange:function(){},disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",onFocus:function(){},onBlur:function(){},onKeyDown:function(){},onInputClick:function(){},onSelect:function(){},onClickOutside:function(){},onMonthChange:function(){},onCalendarOpen:function(){},onCalendarClose:function(){},preventOpenOnFocus:!1,onYearChange:function(){},onInputError:function(){},monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Wx,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}}}])}(dt.Component),Oke="input",fM="navigate";const Lke=({setSelectedCategory:e,setSelectedStartDate:t,setSelectedEndDate:n,setDistance:r,handleSubmit:l,selectedCategory:d,selectedEndDate:f,selectedStartDate:y,distance:a})=>{const[E,C]=j.useState([]),[M,P]=j.useState(!1),[N,F]=j.useState(new Date),[$,Z]=j.useState(new Date),q=["5","10","25","50","100"],K=async()=>{const Ue=await _k();C(Ue)};j.useEffect(()=>{K()},[]);const Q=Ue=>{const Ge=Ue.getDate().toString().padStart(2,"0"),ze=(Ue.getMonth()+1).toString().padStart(2,"0");return`${Ue.getFullYear()}-${ze}-${Ge}`},te=()=>{const Ue=new Date,Ge=Ad(Ue),ze=PY(Ue);t(Q(Ge)),n(Q(ze))},ie=Ue=>new Date(Ue.getFullYear(),Ue.getMonth(),1),ue=Ue=>new Date(Ue.getFullYear(),Ue.getMonth()+1,0),re=()=>{const Ue=new Date,Ge=ie(Ue),ze=ue(Ue);t(Q(Ge)),n(Q(ze))},me=async Ue=>{Ue.preventDefault(),e(""),t(""),n(""),r(200)};j.useEffect(()=>{l()},[d,y,f,a]);const ve=()=>{if(a){if(a<200)return O.jsx(Ts,{onClick:()=>Be("distance"),variant:"link",children:`Remove ${a} Mile Radius  X`})}else return null},De=()=>d&&d.length>0?O.jsx(Ts,{onClick:()=>Be("category"),variant:"link",children:`Remove ${d}  X`}):null,je=()=>y&&y.length>0&&f&&f.length>0?y===f?O.jsx(Ts,{onClick:()=>Be("date"),variant:"link",children:`Remove ${y}  X`}):O.jsx(Ts,{onClick:()=>Be("date"),variant:"link",children:`Remove ${y} thru ${f}  X`}):null,Be=Ue=>{Ue=="distance"?r(200):Ue=="category"?e(""):Ue=="date"&&(t(""),n(""))};return O.jsxs(Zi,{fluid:!0,className:"mt-5",children:[O.jsx(Jr,{className:"justify-content-center mt-4",children:O.jsxs(Ir,{xs:12,style:{display:"flex",justifyContent:"center",gap:"20px",padding:"10px 0",flexWrap:"wrap"},children:[O.jsx(mb,{id:"proximity-dropdown",title:"Filter by Proximity",variant:"secondary",children:q.map(Ue=>O.jsxs(aa.Item,{as:"button",onClick:()=>{r(parseInt(Ue))},children:[Ue," miles"]},Ue))}),O.jsx(mb,{id:"category-dropdown",title:"Filter by Category",variant:"secondary",children:E.map(Ue=>O.jsx(aa.Item,{as:"button",onClick:()=>e(Ue.category),children:Ue.category},Ue.id))}),O.jsxs(mb,{id:"date-dropdown",title:"Filter by Day",variant:"secondary",children:[O.jsx(aa.Item,{as:"button",onClick:()=>P(!M&&!0),children:"Custom Range"}),O.jsx(aa.Item,{as:"button",onClick:()=>{const Ue=new Date;t(Q(Ue)),n(Q(Ue))},children:"Today"}),O.jsx(aa.Item,{as:"button",onClick:()=>te(),children:"This Week"}),O.jsx(aa.Item,{as:"button",onClick:()=>re(),children:"This Month"})]}),M&&O.jsxs(Sn,{children:[O.jsx(Pke,{selected:N,onChange:Ue=>{if(Array.isArray(Ue)){const[Ge,ze]=Ue;F(Ge),Z(ze)}else F(Ue),Z(Ue)},startDate:N,endDate:$,selectsRange:!0,inline:!0,highlightDates:[{startDate:N,endDate:$,key:"selection"}]}),O.jsx(Ts,{variant:"primary",onClick:()=>{t(Q(N)),n(Q($)),P(!1)},children:"Update"})]})]})}),O.jsx(Jr,{children:O.jsxs(Ir,{xs:12,style:{display:"flex",justifyContent:"center",gap:"20px",padding:"10px 0",flexWrap:"wrap"},children:[ve(),De(),je()]})}),O.jsx(Jr,{children:O.jsx(Ts,{variant:"link",onClick:Ue=>me(Ue),children:"Reset Filters"})})]})},Nke=({setCoords:e})=>{const[t,n]=j.useState("");return console.log(t),j.useEffect(()=>{const r=new o4({accessToken:"pk.eyJ1IjoiY3J5c3RhbGpvYmUiLCJhIjoiY2x2Y3VkMzFxMG13ZzJrcGY5dDB0bGJvYyJ9.PV_ZgI2EhyhNfcRHmp2OPw",types:"country,region,place,postcode,locality,neighborhood",placeholder:"address, city, state",limit:3});return r.addTo("#geocoder"),r.on("result",l=>{e(l.result.geometry.coordinates),console.log(l.result)}),r.on("clear",()=>{result=""}),()=>{r.onRemove()}},[]),O.jsx("div",{className:"geocoder-container",children:O.jsx("div",{id:"geocoder"})})};function zke(){const{userProfileData:e}=Eu(),[t,n]=j.useState([]),[r,l]=j.useState(200),[d,f]=j.useState([]),[y,a]=j.useState(!1),[E,C]=j.useState(""),[M,P]=j.useState([]),[N,F]=j.useState(""),[$,Z]=j.useState(""),[q,K]=j.useState(""),[Q,te]=j.useState(""),[ie,ue]=j.useState([]),[re,me]=j.useState([]),[ve,De]=j.useState([]),[je,Be]=j.useState(4);j.useEffect(()=>{const Ct=()=>{const Nt=window.innerWidth;Nt>=3e3?Be(8):Nt>=2700?Be(7):Nt>=2300?Be(6):Nt>=2e3?Be(5):Nt>=1700?Be(4):Nt>=1400||Nt>=992?Be(3):Nt>=768?Be(2):Be(1)};return Ct(),window.addEventListener("resize",Ct),()=>{window.removeEventListener("resize",Ct)}},[]);const Ue=async()=>{n(e.coordinates)};j.useEffect(()=>{Ue()},[e]);const Ge=async()=>{if(t&&t.length>0){const Ct={coordinates:t,distance:r/60};z8(Ct).then(Nt=>{f(Nt)})}};j.useEffect(()=>{Ge()},[t]);const ze=async Ct=>{Ct&&Ct.preventDefault();const Nt={type:N,coordinates:M,distance:r/60,keyword:E,start_date:q,end_date:Q,category:$};z8(Nt).then(tn=>{f(tn),a(!0)})};j.useEffect(()=>{ot(d),st(d)},[d]);const ot=async Ct=>{const Nt=[],tn=[];for(const Dt of Ct)Dt.num_users_attending>1?Nt.push(Dt):tn.push(Dt);ue(Nt),De(tn)},st=async Ct=>{const Nt=[];for(const tn of Ct)tn.volunteer_spots_remaining>0&&Nt.push(tn);me(Nt)};function Re(Ct,Nt){const tn=[];for(let Dt=0;Dt<Ct.length;Dt+=Nt)tn.push(Ct.slice(Dt,Dt+Nt));return tn}const bt=Re(re,je),Lt=Re(ve,je);return O.jsxs("div",{className:"search-events p-4",children:[O.jsx("div",{className:"search-events-background",children:O.jsx("div",{className:"container-fluid mt-5",children:O.jsx("div",{className:"row",children:O.jsx("div",{className:"col-md-10 mx-auto",children:O.jsx(Sn,{onSubmit:ze,className:"shadow p-3 mb-5 rounded",style:{backgroundColor:"#93eeef",filter:"drop-shadow(#22054c -1rem 1rem 10px)"},children:O.jsxs(Zi,{children:[O.jsxs(Jr,{className:"justify-content-center",children:[" ",O.jsx(Ir,{xs:12,md:4,children:O.jsxs(Bg,{children:[O.jsx(Bg.Text,{children:"Search Events"}),O.jsx(Sn.Control,{placeholder:"Search","aria-label":"Keyword search",onChange:Ct=>C(Ct.target.value)})]})}),O.jsx(Ir,{xs:12,md:4,children:O.jsxs(Bg,{className:"d-flex flex-nowrap",children:[O.jsx(Bg.Text,{children:"Location"}),O.jsx(Nke,{setCoords:P})]})}),O.jsx(Ir,{xs:12,md:4,children:O.jsxs(Bg,{children:[O.jsx(Bg.Text,{children:"Type"}),O.jsxs(Sn.Select,{onChange:Ct=>F(Ct.target.value),defaultValue:"In-person",children:[O.jsx("option",{value:"In-person",children:"In-Person"}),O.jsx("option",{value:"Virtual",children:"Virtual"})]})]})})]}),O.jsxs(Jr,{className:"justify-content-center mt-3",children:[" ",O.jsx(Ir,{xs:9,md:4,children:O.jsx(la,{className:"text-center",type:"submit",style:{width:"100%",paddingLeft:"0",paddingRight:"0"},size:"small",sx:{borderColor:"primary.dark",backgroundColor:"white",color:"black",border:"2px solid",fontWeight:"bold","&:hover":{backgroundColor:"secondary.dark",color:"white"}},children:"Search Events"})})]})]})})})})})}),y&&O.jsx(Lke,{distance:r,selectedStartDate:q,selectedEndDate:Q,selectedCategory:$,handleSubmit:ze,setSelectedCategory:Z,setSelectedStartDate:K,setSelectedEndDate:te,setDistance:l}),O.jsxs("div",{className:"search-events p-4",children:[O.jsxs(Zi,{fluid:!0,className:"mt-5",children:[O.jsx("h1",{className:"text-center",children:"Events"}),ve.length===0?O.jsx("p",{className:"text-muted text-center",children:"No events found."}):O.jsx(sd,{interval:null,indicators:!1,prevLabel:"",nextLabel:"",className:"px-5",children:Lt.map((Ct,Nt)=>O.jsx(sd.Item,{children:O.jsx("div",{className:"d-flex justify-content-around",children:Ct.map((tn,Dt)=>O.jsx("div",{className:"ms-4",children:O.jsx(w1,{...tn,eventCategory:null})},Dt))})},Nt))})]}),O.jsxs(Zi,{fluid:!0,className:"mt-5",children:[O.jsx("h1",{className:"text-center",children:"Events Looking for Volunteers"}),re.length===0?O.jsx("p",{className:"text-muted text-center",children:"No events needing volunteers found."}):O.jsx(sd,{interval:null,indicators:!1,prevLabel:"",nextLabel:"",className:"px-5",children:bt.map((Ct,Nt)=>O.jsx(sd.Item,{children:O.jsx("div",{className:"d-flex justify-content-around",children:Ct.map((tn,Dt)=>O.jsx("div",{className:"ms-4",children:O.jsx(w1,{...tn,eventCategory:null})},Dt))})},Nt))})]})]})]})}var Bke={exports:{}};/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(e,t){(function(n,r){e.exports=r()})(pc,function(){const n=new Map,r={set(G,R,H){n.has(G)||n.set(G,new Map);const le=n.get(G);if(!le.has(R)&&le.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(le.keys())[0]}.`);return}le.set(R,H)},get(G,R){return n.has(G)&&n.get(G).get(R)||null},remove(G,R){if(!n.has(G))return;const H=n.get(G);H.delete(R),H.size===0&&n.delete(G)}},l=1e6,d=1e3,f="transitionend",y=G=>(G&&window.CSS&&window.CSS.escape&&(G=G.replace(/#([^\s"#']+)/g,(R,H)=>`#${CSS.escape(H)}`)),G),a=G=>G==null?`${G}`:Object.prototype.toString.call(G).match(/\s([a-z]+)/i)[1].toLowerCase(),E=G=>{do G+=Math.floor(Math.random()*l);while(document.getElementById(G));return G},C=G=>{if(!G)return 0;let{transitionDuration:R,transitionDelay:H}=window.getComputedStyle(G);const le=Number.parseFloat(R),ge=Number.parseFloat(H);return!le&&!ge?0:(R=R.split(",")[0],H=H.split(",")[0],(Number.parseFloat(R)+Number.parseFloat(H))*d)},M=G=>{G.dispatchEvent(new Event(f))},P=G=>!G||typeof G!="object"?!1:(typeof G.jquery<"u"&&(G=G[0]),typeof G.nodeType<"u"),N=G=>P(G)?G.jquery?G[0]:G:typeof G=="string"&&G.length>0?document.querySelector(y(G)):null,F=G=>{if(!P(G)||G.getClientRects().length===0)return!1;const R=getComputedStyle(G).getPropertyValue("visibility")==="visible",H=G.closest("details:not([open])");if(!H)return R;if(H!==G){const le=G.closest("summary");if(le&&le.parentNode!==H||le===null)return!1}return R},$=G=>!G||G.nodeType!==Node.ELEMENT_NODE||G.classList.contains("disabled")?!0:typeof G.disabled<"u"?G.disabled:G.hasAttribute("disabled")&&G.getAttribute("disabled")!=="false",Z=G=>{if(!document.documentElement.attachShadow)return null;if(typeof G.getRootNode=="function"){const R=G.getRootNode();return R instanceof ShadowRoot?R:null}return G instanceof ShadowRoot?G:G.parentNode?Z(G.parentNode):null},q=()=>{},K=G=>{G.offsetHeight},Q=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,te=[],ie=G=>{document.readyState==="loading"?(te.length||document.addEventListener("DOMContentLoaded",()=>{for(const R of te)R()}),te.push(G)):G()},ue=()=>document.documentElement.dir==="rtl",re=G=>{ie(()=>{const R=Q();if(R){const H=G.NAME,le=R.fn[H];R.fn[H]=G.jQueryInterface,R.fn[H].Constructor=G,R.fn[H].noConflict=()=>(R.fn[H]=le,G.jQueryInterface)}})},me=(G,R=[],H=G)=>typeof G=="function"?G(...R):H,ve=(G,R,H=!0)=>{if(!H){me(G);return}const ge=C(R)+5;let Oe=!1;const Se=({target:Le})=>{Le===R&&(Oe=!0,R.removeEventListener(f,Se),me(G))};R.addEventListener(f,Se),setTimeout(()=>{Oe||M(R)},ge)},De=(G,R,H,le)=>{const ge=G.length;let Oe=G.indexOf(R);return Oe===-1?!H&&le?G[ge-1]:G[0]:(Oe+=H?1:-1,le&&(Oe=(Oe+ge)%ge),G[Math.max(0,Math.min(Oe,ge-1))])},je=/[^.]*(?=\..*)\.|.*/,Be=/\..*/,Ue=/::\d+$/,Ge={};let ze=1;const ot={mouseenter:"mouseover",mouseleave:"mouseout"},st=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Re(G,R){return R&&`${R}::${ze++}`||G.uidEvent||ze++}function bt(G){const R=Re(G);return G.uidEvent=R,Ge[R]=Ge[R]||{},Ge[R]}function Lt(G,R){return function H(le){return Pn(le,{delegateTarget:G}),H.oneOff&&nt.off(G,le.type,R),R.apply(G,[le])}}function Ct(G,R,H){return function le(ge){const Oe=G.querySelectorAll(R);for(let{target:Se}=ge;Se&&Se!==this;Se=Se.parentNode)for(const Le of Oe)if(Le===Se)return Pn(ge,{delegateTarget:Se}),le.oneOff&&nt.off(G,ge.type,R,H),H.apply(Se,[ge])}}function Nt(G,R,H=null){return Object.values(G).find(le=>le.callable===R&&le.delegationSelector===H)}function tn(G,R,H){const le=typeof R=="string",ge=le?H:R||H;let Oe=Vn(G);return st.has(Oe)||(Oe=G),[le,ge,Oe]}function Dt(G,R,H,le,ge){if(typeof R!="string"||!G)return;let[Oe,Se,Le]=tn(R,H,le);R in ot&&(Se=(Wt=>function(Vt){if(!Vt.relatedTarget||Vt.relatedTarget!==Vt.delegateTarget&&!Vt.delegateTarget.contains(Vt.relatedTarget))return Wt.call(this,Vt)})(Se));const ke=bt(G),Ve=ke[Le]||(ke[Le]={}),Ye=Nt(Ve,Se,Oe?H:null);if(Ye){Ye.oneOff=Ye.oneOff&&ge;return}const gt=Re(Se,R.replace(je,"")),yt=Oe?Ct(G,H,Se):Lt(G,Se);yt.delegationSelector=Oe?H:null,yt.callable=Se,yt.oneOff=ge,yt.uidEvent=gt,Ve[gt]=yt,G.addEventListener(Le,yt,Oe)}function cn(G,R,H,le,ge){const Oe=Nt(R[H],le,ge);Oe&&(G.removeEventListener(H,Oe,!!ge),delete R[H][Oe.uidEvent])}function Mt(G,R,H,le){const ge=R[H]||{};for(const[Oe,Se]of Object.entries(ge))Oe.includes(le)&&cn(G,R,H,Se.callable,Se.delegationSelector)}function Vn(G){return G=G.replace(Be,""),ot[G]||G}const nt={on(G,R,H,le){Dt(G,R,H,le,!1)},one(G,R,H,le){Dt(G,R,H,le,!0)},off(G,R,H,le){if(typeof R!="string"||!G)return;const[ge,Oe,Se]=tn(R,H,le),Le=Se!==R,ke=bt(G),Ve=ke[Se]||{},Ye=R.startsWith(".");if(typeof Oe<"u"){if(!Object.keys(Ve).length)return;cn(G,ke,Se,Oe,ge?H:null);return}if(Ye)for(const gt of Object.keys(ke))Mt(G,ke,gt,R.slice(1));for(const[gt,yt]of Object.entries(Ve)){const vt=gt.replace(Ue,"");(!Le||R.includes(vt))&&cn(G,ke,Se,yt.callable,yt.delegationSelector)}},trigger(G,R,H){if(typeof R!="string"||!G)return null;const le=Q(),ge=Vn(R),Oe=R!==ge;let Se=null,Le=!0,ke=!0,Ve=!1;Oe&&le&&(Se=le.Event(R,H),le(G).trigger(Se),Le=!Se.isPropagationStopped(),ke=!Se.isImmediatePropagationStopped(),Ve=Se.isDefaultPrevented());const Ye=Pn(new Event(R,{bubbles:Le,cancelable:!0}),H);return Ve&&Ye.preventDefault(),ke&&G.dispatchEvent(Ye),Ye.defaultPrevented&&Se&&Se.preventDefault(),Ye}};function Pn(G,R={}){for(const[H,le]of Object.entries(R))try{G[H]=le}catch{Object.defineProperty(G,H,{configurable:!0,get(){return le}})}return G}function Un(G){if(G==="true")return!0;if(G==="false")return!1;if(G===Number(G).toString())return Number(G);if(G===""||G==="null")return null;if(typeof G!="string")return G;try{return JSON.parse(decodeURIComponent(G))}catch{return G}}function En(G){return G.replace(/[A-Z]/g,R=>`-${R.toLowerCase()}`)}const bn={setDataAttribute(G,R,H){G.setAttribute(`data-bs-${En(R)}`,H)},removeDataAttribute(G,R){G.removeAttribute(`data-bs-${En(R)}`)},getDataAttributes(G){if(!G)return{};const R={},H=Object.keys(G.dataset).filter(le=>le.startsWith("bs")&&!le.startsWith("bsConfig"));for(const le of H){let ge=le.replace(/^bs/,"");ge=ge.charAt(0).toLowerCase()+ge.slice(1,ge.length),R[ge]=Un(G.dataset[le])}return R},getDataAttribute(G,R){return Un(G.getAttribute(`data-bs-${En(R)}`))}};class Fn{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(R){return R=this._mergeConfigObj(R),R=this._configAfterMerge(R),this._typeCheckConfig(R),R}_configAfterMerge(R){return R}_mergeConfigObj(R,H){const le=P(H)?bn.getDataAttribute(H,"config"):{};return{...this.constructor.Default,...typeof le=="object"?le:{},...P(H)?bn.getDataAttributes(H):{},...typeof R=="object"?R:{}}}_typeCheckConfig(R,H=this.constructor.DefaultType){for(const[le,ge]of Object.entries(H)){const Oe=R[le],Se=P(Oe)?"element":a(Oe);if(!new RegExp(ge).test(Se))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${le}" provided type "${Se}" but expected type "${ge}".`)}}}const On="5.3.3";class an extends Fn{constructor(R,H){super(),R=N(R),R&&(this._element=R,this._config=this._getConfig(H),r.set(this._element,this.constructor.DATA_KEY,this))}dispose(){r.remove(this._element,this.constructor.DATA_KEY),nt.off(this._element,this.constructor.EVENT_KEY);for(const R of Object.getOwnPropertyNames(this))this[R]=null}_queueCallback(R,H,le=!0){ve(R,H,le)}_getConfig(R){return R=this._mergeConfigObj(R,this._element),R=this._configAfterMerge(R),this._typeCheckConfig(R),R}static getInstance(R){return r.get(N(R),this.DATA_KEY)}static getOrCreateInstance(R,H={}){return this.getInstance(R)||new this(R,typeof H=="object"?H:null)}static get VERSION(){return On}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(R){return`${R}${this.EVENT_KEY}`}}const qr=G=>{let R=G.getAttribute("data-bs-target");if(!R||R==="#"){let H=G.getAttribute("href");if(!H||!H.includes("#")&&!H.startsWith("."))return null;H.includes("#")&&!H.startsWith("#")&&(H=`#${H.split("#")[1]}`),R=H&&H!=="#"?H.trim():null}return R?R.split(",").map(H=>y(H)).join(","):null},hn={find(G,R=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(R,G))},findOne(G,R=document.documentElement){return Element.prototype.querySelector.call(R,G)},children(G,R){return[].concat(...G.children).filter(H=>H.matches(R))},parents(G,R){const H=[];let le=G.parentNode.closest(R);for(;le;)H.push(le),le=le.parentNode.closest(R);return H},prev(G,R){let H=G.previousElementSibling;for(;H;){if(H.matches(R))return[H];H=H.previousElementSibling}return[]},next(G,R){let H=G.nextElementSibling;for(;H;){if(H.matches(R))return[H];H=H.nextElementSibling}return[]},focusableChildren(G){const R=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(H=>`${H}:not([tabindex^="-"])`).join(",");return this.find(R,G).filter(H=>!$(H)&&F(H))},getSelectorFromElement(G){const R=qr(G);return R&&hn.findOne(R)?R:null},getElementFromSelector(G){const R=qr(G);return R?hn.findOne(R):null},getMultipleElementsFromSelector(G){const R=qr(G);return R?hn.find(R):[]}},Wr=(G,R="hide")=>{const H=`click.dismiss${G.EVENT_KEY}`,le=G.NAME;nt.on(document,H,`[data-bs-dismiss="${le}"]`,function(ge){if(["A","AREA"].includes(this.tagName)&&ge.preventDefault(),$(this))return;const Oe=hn.getElementFromSelector(this)||this.closest(`.${le}`);G.getOrCreateInstance(Oe)[R]()})},go="alert",Pr=".bs.alert",to=`close${Pr}`,Mr=`closed${Pr}`,mr="fade",eo="show";class Ke extends an{static get NAME(){return go}close(){if(nt.trigger(this._element,to).defaultPrevented)return;this._element.classList.remove(eo);const H=this._element.classList.contains(mr);this._queueCallback(()=>this._destroyElement(),this._element,H)}_destroyElement(){this._element.remove(),nt.trigger(this._element,Mr),this.dispose()}static jQueryInterface(R){return this.each(function(){const H=Ke.getOrCreateInstance(this);if(typeof R=="string"){if(H[R]===void 0||R.startsWith("_")||R==="constructor")throw new TypeError(`No method named "${R}"`);H[R](this)}})}}Wr(Ke,"close"),re(Ke);const pe="button",Pe=".bs.button",at=".data-api",ft="active",it='[data-bs-toggle="button"]',ct=`click${Pe}${at}`;class tt extends an{static get NAME(){return pe}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(ft))}static jQueryInterface(R){return this.each(function(){const H=tt.getOrCreateInstance(this);R==="toggle"&&H[R]()})}}nt.on(document,ct,it,G=>{G.preventDefault();const R=G.target.closest(it);tt.getOrCreateInstance(R).toggle()}),re(tt);const jt="swipe",Ut=".bs.swipe",en=`touchstart${Ut}`,er=`touchmove${Ut}`,Fr=`touchend${Ut}`,no=`pointerdown${Ut}`,Vr=`pointerup${Ut}`,Cr="touch",vr="pen",Nr="pointer-event",Qe=40,pt={endCallback:null,leftCallback:null,rightCallback:null},_t={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Kt extends Fn{constructor(R,H){super(),this._element=R,!(!R||!Kt.isSupported())&&(this._config=this._getConfig(H),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return pt}static get DefaultType(){return _t}static get NAME(){return jt}dispose(){nt.off(this._element,Ut)}_start(R){if(!this._supportPointerEvents){this._deltaX=R.touches[0].clientX;return}this._eventIsPointerPenTouch(R)&&(this._deltaX=R.clientX)}_end(R){this._eventIsPointerPenTouch(R)&&(this._deltaX=R.clientX-this._deltaX),this._handleSwipe(),me(this._config.endCallback)}_move(R){this._deltaX=R.touches&&R.touches.length>1?0:R.touches[0].clientX-this._deltaX}_handleSwipe(){const R=Math.abs(this._deltaX);if(R<=Qe)return;const H=R/this._deltaX;this._deltaX=0,H&&me(H>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(nt.on(this._element,no,R=>this._start(R)),nt.on(this._element,Vr,R=>this._end(R)),this._element.classList.add(Nr)):(nt.on(this._element,en,R=>this._start(R)),nt.on(this._element,er,R=>this._move(R)),nt.on(this._element,Fr,R=>this._end(R)))}_eventIsPointerPenTouch(R){return this._supportPointerEvents&&(R.pointerType===vr||R.pointerType===Cr)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const vn="carousel",mn=".bs.carousel",sn=".data-api",Ze="ArrowLeft",Je="ArrowRight",Et=500,Tt="next",ut="prev",kt="left",Rt="right",Bt=`slide${mn}`,Yt=`slid${mn}`,Ft=`keydown${mn}`,An=`mouseenter${mn}`,nr=`mouseleave${mn}`,nn=`dragstart${mn}`,Mn=`load${mn}${sn}`,_r=`click${mn}${sn}`,Zr="carousel",Xn="active",ro="slide",sr="carousel-item-end",fo="carousel-item-start",Fi="carousel-item-next",ni="carousel-item-prev",jl=".active",el=".carousel-item",Tu=jl+el,mm=".carousel-item img",Rc=".carousel-indicators",gm="[data-bs-slide], [data-bs-slide-to]",Su='[data-bs-ride="carousel"]',L0={[Ze]:Rt,[Je]:kt},df={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ym={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class tl extends an{constructor(R,H){super(R,H),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=hn.findOne(Rc,this._element),this._addEventListeners(),this._config.ride===Zr&&this.cycle()}static get Default(){return df}static get DefaultType(){return ym}static get NAME(){return vn}next(){this._slide(Tt)}nextWhenVisible(){!document.hidden&&F(this._element)&&this.next()}prev(){this._slide(ut)}pause(){this._isSliding&&M(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){nt.one(this._element,Yt,()=>this.cycle());return}this.cycle()}}to(R){const H=this._getItems();if(R>H.length-1||R<0)return;if(this._isSliding){nt.one(this._element,Yt,()=>this.to(R));return}const le=this._getItemIndex(this._getActive());if(le===R)return;const ge=R>le?Tt:ut;this._slide(ge,H[R])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(R){return R.defaultInterval=R.interval,R}_addEventListeners(){this._config.keyboard&&nt.on(this._element,Ft,R=>this._keydown(R)),this._config.pause==="hover"&&(nt.on(this._element,An,()=>this.pause()),nt.on(this._element,nr,()=>this._maybeEnableCycle())),this._config.touch&&Kt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const le of hn.find(mm,this._element))nt.on(le,nn,ge=>ge.preventDefault());const H={leftCallback:()=>this._slide(this._directionToOrder(kt)),rightCallback:()=>this._slide(this._directionToOrder(Rt)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Et+this._config.interval))}};this._swipeHelper=new Kt(this._element,H)}_keydown(R){if(/input|textarea/i.test(R.target.tagName))return;const H=L0[R.key];H&&(R.preventDefault(),this._slide(this._directionToOrder(H)))}_getItemIndex(R){return this._getItems().indexOf(R)}_setActiveIndicatorElement(R){if(!this._indicatorsElement)return;const H=hn.findOne(jl,this._indicatorsElement);H.classList.remove(Xn),H.removeAttribute("aria-current");const le=hn.findOne(`[data-bs-slide-to="${R}"]`,this._indicatorsElement);le&&(le.classList.add(Xn),le.setAttribute("aria-current","true"))}_updateInterval(){const R=this._activeElement||this._getActive();if(!R)return;const H=Number.parseInt(R.getAttribute("data-bs-interval"),10);this._config.interval=H||this._config.defaultInterval}_slide(R,H=null){if(this._isSliding)return;const le=this._getActive(),ge=R===Tt,Oe=H||De(this._getItems(),le,ge,this._config.wrap);if(Oe===le)return;const Se=this._getItemIndex(Oe),Le=vt=>nt.trigger(this._element,vt,{relatedTarget:Oe,direction:this._orderToDirection(R),from:this._getItemIndex(le),to:Se});if(Le(Bt).defaultPrevented||!le||!Oe)return;const Ve=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(Se),this._activeElement=Oe;const Ye=ge?fo:sr,gt=ge?Fi:ni;Oe.classList.add(gt),K(Oe),le.classList.add(Ye),Oe.classList.add(Ye);const yt=()=>{Oe.classList.remove(Ye,gt),Oe.classList.add(Xn),le.classList.remove(Xn,gt,Ye),this._isSliding=!1,Le(Yt)};this._queueCallback(yt,le,this._isAnimated()),Ve&&this.cycle()}_isAnimated(){return this._element.classList.contains(ro)}_getActive(){return hn.findOne(Tu,this._element)}_getItems(){return hn.find(el,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(R){return ue()?R===kt?ut:Tt:R===kt?Tt:ut}_orderToDirection(R){return ue()?R===ut?kt:Rt:R===ut?Rt:kt}static jQueryInterface(R){return this.each(function(){const H=tl.getOrCreateInstance(this,R);if(typeof R=="number"){H.to(R);return}if(typeof R=="string"){if(H[R]===void 0||R.startsWith("_")||R==="constructor")throw new TypeError(`No method named "${R}"`);H[R]()}})}}nt.on(document,_r,gm,function(G){const R=hn.getElementFromSelector(this);if(!R||!R.classList.contains(Zr))return;G.preventDefault();const H=tl.getOrCreateInstance(R),le=this.getAttribute("data-bs-slide-to");if(le){H.to(le),H._maybeEnableCycle();return}if(bn.getDataAttribute(this,"slide")==="next"){H.next(),H._maybeEnableCycle();return}H.prev(),H._maybeEnableCycle()}),nt.on(window,Mn,()=>{const G=hn.find(Su);for(const R of G)tl.getOrCreateInstance(R)}),re(tl);const bm="collapse",So=".bs.collapse",yr=".data-api",N0=`show${So}`,hf=`shown${So}`,vm=`hide${So}`,Sv=`hidden${So}`,Ms=`click${So}${yr}`,Pd="show",Cu="collapse",nl="collapsing",Qt="collapsed",jr=`:scope .${Cu} .${Cu}`,$r="collapse-horizontal",Ga="width",ku="height",kr=".collapse.show, .collapse.collapsing",Au='[data-bs-toggle="collapse"]',Mu={parent:null,toggle:!0},Od={parent:"(null|element)",toggle:"boolean"};class bi extends an{constructor(R,H){super(R,H),this._isTransitioning=!1,this._triggerArray=[];const le=hn.find(Au);for(const ge of le){const Oe=hn.getSelectorFromElement(ge),Se=hn.find(Oe).filter(Le=>Le===this._element);Oe!==null&&Se.length&&this._triggerArray.push(ge)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Mu}static get DefaultType(){return Od}static get NAME(){return bm}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let R=[];if(this._config.parent&&(R=this._getFirstLevelChildren(kr).filter(Le=>Le!==this._element).map(Le=>bi.getOrCreateInstance(Le,{toggle:!1}))),R.length&&R[0]._isTransitioning||nt.trigger(this._element,N0).defaultPrevented)return;for(const Le of R)Le.hide();const le=this._getDimension();this._element.classList.remove(Cu),this._element.classList.add(nl),this._element.style[le]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const ge=()=>{this._isTransitioning=!1,this._element.classList.remove(nl),this._element.classList.add(Cu,Pd),this._element.style[le]="",nt.trigger(this._element,hf)},Se=`scroll${le[0].toUpperCase()+le.slice(1)}`;this._queueCallback(ge,this._element,!0),this._element.style[le]=`${this._element[Se]}px`}hide(){if(this._isTransitioning||!this._isShown()||nt.trigger(this._element,vm).defaultPrevented)return;const H=this._getDimension();this._element.style[H]=`${this._element.getBoundingClientRect()[H]}px`,K(this._element),this._element.classList.add(nl),this._element.classList.remove(Cu,Pd);for(const ge of this._triggerArray){const Oe=hn.getElementFromSelector(ge);Oe&&!this._isShown(Oe)&&this._addAriaAndCollapsedClass([ge],!1)}this._isTransitioning=!0;const le=()=>{this._isTransitioning=!1,this._element.classList.remove(nl),this._element.classList.add(Cu),nt.trigger(this._element,Sv)};this._element.style[H]="",this._queueCallback(le,this._element,!0)}_isShown(R=this._element){return R.classList.contains(Pd)}_configAfterMerge(R){return R.toggle=!!R.toggle,R.parent=N(R.parent),R}_getDimension(){return this._element.classList.contains($r)?Ga:ku}_initializeChildren(){if(!this._config.parent)return;const R=this._getFirstLevelChildren(Au);for(const H of R){const le=hn.getElementFromSelector(H);le&&this._addAriaAndCollapsedClass([H],this._isShown(le))}}_getFirstLevelChildren(R){const H=hn.find(jr,this._config.parent);return hn.find(R,this._config.parent).filter(le=>!H.includes(le))}_addAriaAndCollapsedClass(R,H){if(R.length)for(const le of R)le.classList.toggle(Qt,!H),le.setAttribute("aria-expanded",H)}static jQueryInterface(R){const H={};return typeof R=="string"&&/show|hide/.test(R)&&(H.toggle=!1),this.each(function(){const le=bi.getOrCreateInstance(this,H);if(typeof R=="string"){if(typeof le[R]>"u")throw new TypeError(`No method named "${R}"`);le[R]()}})}}nt.on(document,Ms,Au,function(G){(G.target.tagName==="A"||G.delegateTarget&&G.delegateTarget.tagName==="A")&&G.preventDefault();for(const R of hn.getMultipleElementsFromSelector(this))bi.getOrCreateInstance(R,{toggle:!1}).toggle()}),re(bi);var Kr="top",gn="bottom",vi="right",Dn="left",ds="auto",rr=[Kr,gn,vi,Dn],qa="start",qo="end",Rn="clippingParents",ff="viewport",Za="popper",Zo="reference",wa=rr.reduce(function(G,R){return G.concat([R+"-"+qa,R+"-"+qo])},[]),Ds=[].concat(rr,[ds]).reduce(function(G,R){return G.concat([R,R+"-"+qa,R+"-"+qo])},[]),Rs="beforeRead",Ko="read",pf="afterRead",mf="beforeMain",Is="main",Ic="afterMain",$l="beforeWrite",Pc="write",Ka="afterWrite",Ld=[Rs,Ko,pf,mf,Is,Ic,$l,Pc,Ka];function Ri(G){return G?(G.nodeName||"").toLowerCase():null}function ji(G){if(G==null)return window;if(G.toString()!=="[object Window]"){var R=G.ownerDocument;return R&&R.defaultView||window}return G}function Ul(G){var R=ji(G).Element;return G instanceof R||G instanceof Element}function Ii(G){var R=ji(G).HTMLElement;return G instanceof R||G instanceof HTMLElement}function gf(G){if(typeof ShadowRoot>"u")return!1;var R=ji(G).ShadowRoot;return G instanceof R||G instanceof ShadowRoot}function xr(G){var R=G.state;Object.keys(R.elements).forEach(function(H){var le=R.styles[H]||{},ge=R.attributes[H]||{},Oe=R.elements[H];!Ii(Oe)||!Ri(Oe)||(Object.assign(Oe.style,le),Object.keys(ge).forEach(function(Se){var Le=ge[Se];Le===!1?Oe.removeAttribute(Se):Oe.setAttribute(Se,Le===!0?"":Le)}))})}function Nd(G){var R=G.state,H={popper:{position:R.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(R.elements.popper.style,H.popper),R.styles=H,R.elements.arrow&&Object.assign(R.elements.arrow.style,H.arrow),function(){Object.keys(R.elements).forEach(function(le){var ge=R.elements[le],Oe=R.attributes[le]||{},Se=Object.keys(R.styles.hasOwnProperty(le)?R.styles[le]:H[le]),Le=Se.reduce(function(ke,Ve){return ke[Ve]="",ke},{});!Ii(ge)||!Ri(ge)||(Object.assign(ge.style,Le),Object.keys(Oe).forEach(function(ke){ge.removeAttribute(ke)}))})}}const zd={name:"applyStyles",enabled:!0,phase:"write",fn:xr,effect:Nd,requires:["computeStyles"]};function Ps(G){return G.split("-")[0]}var Oc=Math.max,hs=Math.min,La=Math.round;function Du(){var G=navigator.userAgentData;return G!=null&&G.brands&&Array.isArray(G.brands)?G.brands.map(function(R){return R.brand+"/"+R.version}).join(" "):navigator.userAgent}function Lc(){return!/^((?!chrome|android).)*safari/i.test(Du())}function Vl(G,R,H){R===void 0&&(R=!1),H===void 0&&(H=!1);var le=G.getBoundingClientRect(),ge=1,Oe=1;R&&Ii(G)&&(ge=G.offsetWidth>0&&La(le.width)/G.offsetWidth||1,Oe=G.offsetHeight>0&&La(le.height)/G.offsetHeight||1);var Se=Ul(G)?ji(G):window,Le=Se.visualViewport,ke=!Lc()&&H,Ve=(le.left+(ke&&Le?Le.offsetLeft:0))/ge,Ye=(le.top+(ke&&Le?Le.offsetTop:0))/Oe,gt=le.width/ge,yt=le.height/Oe;return{width:gt,height:yt,top:Ye,right:Ve+gt,bottom:Ye+yt,left:Ve,x:Ve,y:Ye}}function fs(G){var R=Vl(G),H=G.offsetWidth,le=G.offsetHeight;return Math.abs(R.width-H)<=1&&(H=R.width),Math.abs(R.height-le)<=1&&(le=R.height),{x:G.offsetLeft,y:G.offsetTop,width:H,height:le}}function rl(G,R){var H=R.getRootNode&&R.getRootNode();if(G.contains(R))return!0;if(H&&gf(H)){var le=R;do{if(le&&G.isSameNode(le))return!0;le=le.parentNode||le.host}while(le)}return!1}function Na(G){return ji(G).getComputedStyle(G)}function _m(G){return["table","td","th"].indexOf(Ri(G))>=0}function Os(G){return((Ul(G)?G.ownerDocument:G.document)||window.document).documentElement}function fa(G){return Ri(G)==="html"?G:G.assignedSlot||G.parentNode||(gf(G)?G.host:null)||Os(G)}function xm(G){return!Ii(G)||Na(G).position==="fixed"?null:G.offsetParent}function wm(G){var R=/firefox/i.test(Du()),H=/Trident/i.test(Du());if(H&&Ii(G)){var le=Na(G);if(le.position==="fixed")return null}var ge=fa(G);for(gf(ge)&&(ge=ge.host);Ii(ge)&&["html","body"].indexOf(Ri(ge))<0;){var Oe=Na(ge);if(Oe.transform!=="none"||Oe.perspective!=="none"||Oe.contain==="paint"||["transform","perspective"].indexOf(Oe.willChange)!==-1||R&&Oe.willChange==="filter"||R&&Oe.filter&&Oe.filter!=="none")return ge;ge=ge.parentNode}return null}function Nc(G){for(var R=ji(G),H=xm(G);H&&_m(H)&&Na(H).position==="static";)H=xm(H);return H&&(Ri(H)==="html"||Ri(H)==="body"&&Na(H).position==="static")?R:H||wm(G)||R}function Bd(G){return["top","bottom"].indexOf(G)>=0?"x":"y"}function zc(G,R,H){return Oc(G,hs(R,H))}function Em(G,R,H){var le=zc(G,R,H);return le>H?H:le}function Bc(){return{top:0,right:0,bottom:0,left:0}}function Fd(G){return Object.assign({},Bc(),G)}function Ru(G,R){return R.reduce(function(H,le){return H[le]=G,H},{})}var Hl=function(R,H){return R=typeof R=="function"?R(Object.assign({},H.rects,{placement:H.placement})):R,Fd(typeof R!="number"?R:Ru(R,rr))};function Tm(G){var R,H=G.state,le=G.name,ge=G.options,Oe=H.elements.arrow,Se=H.modifiersData.popperOffsets,Le=Ps(H.placement),ke=Bd(Le),Ve=[Dn,vi].indexOf(Le)>=0,Ye=Ve?"height":"width";if(!(!Oe||!Se)){var gt=Hl(ge.padding,H),yt=fs(Oe),vt=ke==="y"?Kr:Dn,Wt=ke==="y"?gn:vi,Vt=H.rects.reference[Ye]+H.rects.reference[ke]-Se[ke]-H.rects.popper[Ye],Ht=Se[ke]-H.rects.reference[ke],Zt=Nc(Oe),In=Zt?ke==="y"?Zt.clientHeight||0:Zt.clientWidth||0:0,xn=Vt/2-Ht/2,on=gt[vt],yn=In-yt[Ye]-gt[Wt],Ln=In/2-yt[Ye]/2+xn,lr=zc(on,Ln,yn),jn=ke;H.modifiersData[le]=(R={},R[jn]=lr,R.centerOffset=lr-Ln,R)}}function Xa(G){var R=G.state,H=G.options,le=H.element,ge=le===void 0?"[data-popper-arrow]":le;ge!=null&&(typeof ge=="string"&&(ge=R.elements.popper.querySelector(ge),!ge)||rl(R.elements.popper,ge)&&(R.elements.arrow=ge))}const Xt={name:"arrow",enabled:!0,phase:"main",fn:Tm,effect:Xa,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ol(G){return G.split("-")[1]}var Sm={top:"auto",right:"auto",bottom:"auto",left:"auto"};function jd(G,R){var H=G.x,le=G.y,ge=R.devicePixelRatio||1;return{x:La(H*ge)/ge||0,y:La(le*ge)/ge||0}}function yf(G){var R,H=G.popper,le=G.popperRect,ge=G.placement,Oe=G.variation,Se=G.offsets,Le=G.position,ke=G.gpuAcceleration,Ve=G.adaptive,Ye=G.roundOffsets,gt=G.isFixed,yt=Se.x,vt=yt===void 0?0:yt,Wt=Se.y,Vt=Wt===void 0?0:Wt,Ht=typeof Ye=="function"?Ye({x:vt,y:Vt}):{x:vt,y:Vt};vt=Ht.x,Vt=Ht.y;var Zt=Se.hasOwnProperty("x"),In=Se.hasOwnProperty("y"),xn=Dn,on=Kr,yn=window;if(Ve){var Ln=Nc(H),lr="clientHeight",jn="clientWidth";if(Ln===ji(H)&&(Ln=Os(H),Na(Ln).position!=="static"&&Le==="absolute"&&(lr="scrollHeight",jn="scrollWidth")),Ln=Ln,ge===Kr||(ge===Dn||ge===vi)&&Oe===qo){on=gn;var Dr=gt&&Ln===yn&&yn.visualViewport?yn.visualViewport.height:Ln[lr];Vt-=Dr-le.height,Vt*=ke?1:-1}if(ge===Dn||(ge===Kr||ge===gn)&&Oe===qo){xn=vi;var zn=gt&&Ln===yn&&yn.visualViewport?yn.visualViewport.width:Ln[jn];vt-=zn-le.width,vt*=ke?1:-1}}var Qn=Object.assign({position:Le},Ve&&Sm),qn=Ye===!0?jd({x:vt,y:Vt},ji(H)):{x:vt,y:Vt};if(vt=qn.x,Vt=qn.y,ke){var Jn;return Object.assign({},Qn,(Jn={},Jn[on]=In?"0":"",Jn[xn]=Zt?"0":"",Jn.transform=(yn.devicePixelRatio||1)<=1?"translate("+vt+"px, "+Vt+"px)":"translate3d("+vt+"px, "+Vt+"px, 0)",Jn))}return Object.assign({},Qn,(R={},R[on]=In?Vt+"px":"",R[xn]=Zt?vt+"px":"",R.transform="",R))}function Wl(G){var R=G.state,H=G.options,le=H.gpuAcceleration,ge=le===void 0?!0:le,Oe=H.adaptive,Se=Oe===void 0?!0:Oe,Le=H.roundOffsets,ke=Le===void 0?!0:Le,Ve={placement:Ps(R.placement),variation:ol(R.placement),popper:R.elements.popper,popperRect:R.rects.popper,gpuAcceleration:ge,isFixed:R.options.strategy==="fixed"};R.modifiersData.popperOffsets!=null&&(R.styles.popper=Object.assign({},R.styles.popper,yf(Object.assign({},Ve,{offsets:R.modifiersData.popperOffsets,position:R.options.strategy,adaptive:Se,roundOffsets:ke})))),R.modifiersData.arrow!=null&&(R.styles.arrow=Object.assign({},R.styles.arrow,yf(Object.assign({},Ve,{offsets:R.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:ke})))),R.attributes.popper=Object.assign({},R.attributes.popper,{"data-popper-placement":R.placement})}const za={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Wl,data:{}};var Iu={passive:!0};function Fc(G){var R=G.state,H=G.instance,le=G.options,ge=le.scroll,Oe=ge===void 0?!0:ge,Se=le.resize,Le=Se===void 0?!0:Se,ke=ji(R.elements.popper),Ve=[].concat(R.scrollParents.reference,R.scrollParents.popper);return Oe&&Ve.forEach(function(Ye){Ye.addEventListener("scroll",H.update,Iu)}),Le&&ke.addEventListener("resize",H.update,Iu),function(){Oe&&Ve.forEach(function(Ye){Ye.removeEventListener("scroll",H.update,Iu)}),Le&&ke.removeEventListener("resize",H.update,Iu)}}const Pu={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Fc,data:{}};var jc={left:"right",right:"left",bottom:"top",top:"bottom"};function Ou(G){return G.replace(/left|right|bottom|top/g,function(R){return jc[R]})}var Cv={start:"end",end:"start"};function $c(G){return G.replace(/start|end/g,function(R){return Cv[R]})}function Cm(G){var R=ji(G),H=R.pageXOffset,le=R.pageYOffset;return{scrollLeft:H,scrollTop:le}}function bf(G){return Vl(Os(G)).left+Cm(G).scrollLeft}function z0(G,R){var H=ji(G),le=Os(G),ge=H.visualViewport,Oe=le.clientWidth,Se=le.clientHeight,Le=0,ke=0;if(ge){Oe=ge.width,Se=ge.height;var Ve=Lc();(Ve||!Ve&&R==="fixed")&&(Le=ge.offsetLeft,ke=ge.offsetTop)}return{width:Oe,height:Se,x:Le+bf(G),y:ke}}function km(G){var R,H=Os(G),le=Cm(G),ge=(R=G.ownerDocument)==null?void 0:R.body,Oe=Oc(H.scrollWidth,H.clientWidth,ge?ge.scrollWidth:0,ge?ge.clientWidth:0),Se=Oc(H.scrollHeight,H.clientHeight,ge?ge.scrollHeight:0,ge?ge.clientHeight:0),Le=-le.scrollLeft+bf(G),ke=-le.scrollTop;return Na(ge||H).direction==="rtl"&&(Le+=Oc(H.clientWidth,ge?ge.clientWidth:0)-Oe),{width:Oe,height:Se,x:Le,y:ke}}function Am(G){var R=Na(G),H=R.overflow,le=R.overflowX,ge=R.overflowY;return/auto|scroll|overlay|hidden/.test(H+ge+le)}function B0(G){return["html","body","#document"].indexOf(Ri(G))>=0?G.ownerDocument.body:Ii(G)&&Am(G)?G:B0(fa(G))}function $d(G,R){var H;R===void 0&&(R=[]);var le=B0(G),ge=le===((H=G.ownerDocument)==null?void 0:H.body),Oe=ji(le),Se=ge?[Oe].concat(Oe.visualViewport||[],Am(le)?le:[]):le,Le=R.concat(Se);return ge?Le:Le.concat($d(fa(Se)))}function vf(G){return Object.assign({},G,{left:G.x,top:G.y,right:G.x+G.width,bottom:G.y+G.height})}function Ud(G,R){var H=Vl(G,!1,R==="fixed");return H.top=H.top+G.clientTop,H.left=H.left+G.clientLeft,H.bottom=H.top+G.clientHeight,H.right=H.left+G.clientWidth,H.width=G.clientWidth,H.height=G.clientHeight,H.x=H.left,H.y=H.top,H}function F0(G,R,H){return R===ff?vf(z0(G,H)):Ul(R)?Ud(R,H):vf(km(Os(G)))}function _f(G){var R=$d(fa(G)),H=["absolute","fixed"].indexOf(Na(G).position)>=0,le=H&&Ii(G)?Nc(G):G;return Ul(le)?R.filter(function(ge){return Ul(ge)&&rl(ge,le)&&Ri(ge)!=="body"}):[]}function Mm(G,R,H,le){var ge=R==="clippingParents"?_f(G):[].concat(R),Oe=[].concat(ge,[H]),Se=Oe[0],Le=Oe.reduce(function(ke,Ve){var Ye=F0(G,Ve,le);return ke.top=Oc(Ye.top,ke.top),ke.right=hs(Ye.right,ke.right),ke.bottom=hs(Ye.bottom,ke.bottom),ke.left=Oc(Ye.left,ke.left),ke},F0(G,Se,le));return Le.width=Le.right-Le.left,Le.height=Le.bottom-Le.top,Le.x=Le.left,Le.y=Le.top,Le}function Dm(G){var R=G.reference,H=G.element,le=G.placement,ge=le?Ps(le):null,Oe=le?ol(le):null,Se=R.x+R.width/2-H.width/2,Le=R.y+R.height/2-H.height/2,ke;switch(ge){case Kr:ke={x:Se,y:R.y-H.height};break;case gn:ke={x:Se,y:R.y+R.height};break;case vi:ke={x:R.x+R.width,y:Le};break;case Dn:ke={x:R.x-H.width,y:Le};break;default:ke={x:R.x,y:R.y}}var Ve=ge?Bd(ge):null;if(Ve!=null){var Ye=Ve==="y"?"height":"width";switch(Oe){case qa:ke[Ve]=ke[Ve]-(R[Ye]/2-H[Ye]/2);break;case qo:ke[Ve]=ke[Ve]+(R[Ye]/2-H[Ye]/2);break}}return ke}function Yl(G,R){R===void 0&&(R={});var H=R,le=H.placement,ge=le===void 0?G.placement:le,Oe=H.strategy,Se=Oe===void 0?G.strategy:Oe,Le=H.boundary,ke=Le===void 0?Rn:Le,Ve=H.rootBoundary,Ye=Ve===void 0?ff:Ve,gt=H.elementContext,yt=gt===void 0?Za:gt,vt=H.altBoundary,Wt=vt===void 0?!1:vt,Vt=H.padding,Ht=Vt===void 0?0:Vt,Zt=Fd(typeof Ht!="number"?Ht:Ru(Ht,rr)),In=yt===Za?Zo:Za,xn=G.rects.popper,on=G.elements[Wt?In:yt],yn=Mm(Ul(on)?on:on.contextElement||Os(G.elements.popper),ke,Ye,Se),Ln=Vl(G.elements.reference),lr=Dm({reference:Ln,element:xn,strategy:"absolute",placement:ge}),jn=vf(Object.assign({},xn,lr)),Dr=yt===Za?jn:Ln,zn={top:yn.top-Dr.top+Zt.top,bottom:Dr.bottom-yn.bottom+Zt.bottom,left:yn.left-Dr.left+Zt.left,right:Dr.right-yn.right+Zt.right},Qn=G.modifiersData.offset;if(yt===Za&&Qn){var qn=Qn[ge];Object.keys(zn).forEach(function(Jn){var Xr=[vi,gn].indexOf(Jn)>=0?1:-1,br=[Kr,gn].indexOf(Jn)>=0?"y":"x";zn[Jn]+=qn[br]*Xr})}return zn}function xf(G,R){R===void 0&&(R={});var H=R,le=H.placement,ge=H.boundary,Oe=H.rootBoundary,Se=H.padding,Le=H.flipVariations,ke=H.allowedAutoPlacements,Ve=ke===void 0?Ds:ke,Ye=ol(le),gt=Ye?Le?wa:wa.filter(function(Wt){return ol(Wt)===Ye}):rr,yt=gt.filter(function(Wt){return Ve.indexOf(Wt)>=0});yt.length===0&&(yt=gt);var vt=yt.reduce(function(Wt,Vt){return Wt[Vt]=Yl(G,{placement:Vt,boundary:ge,rootBoundary:Oe,padding:Se})[Ps(Vt)],Wt},{});return Object.keys(vt).sort(function(Wt,Vt){return vt[Wt]-vt[Vt]})}function Rm(G){if(Ps(G)===ds)return[];var R=Ou(G);return[$c(G),R,$c(R)]}function Uc(G){var R=G.state,H=G.options,le=G.name;if(!R.modifiersData[le]._skip){for(var ge=H.mainAxis,Oe=ge===void 0?!0:ge,Se=H.altAxis,Le=Se===void 0?!0:Se,ke=H.fallbackPlacements,Ve=H.padding,Ye=H.boundary,gt=H.rootBoundary,yt=H.altBoundary,vt=H.flipVariations,Wt=vt===void 0?!0:vt,Vt=H.allowedAutoPlacements,Ht=R.options.placement,Zt=Ps(Ht),In=Zt===Ht,xn=ke||(In||!Wt?[Ou(Ht)]:Rm(Ht)),on=[Ht].concat(xn).reduce(function(ui,ri){return ui.concat(Ps(ri)===ds?xf(R,{placement:ri,boundary:Ye,rootBoundary:gt,padding:Ve,flipVariations:Wt,allowedAutoPlacements:Vt}):ri)},[]),yn=R.rects.reference,Ln=R.rects.popper,lr=new Map,jn=!0,Dr=on[0],zn=0;zn<on.length;zn++){var Qn=on[zn],qn=Ps(Qn),Jn=ol(Qn)===qa,Xr=[Kr,gn].indexOf(qn)>=0,br=Xr?"width":"height",uo=Yl(R,{placement:Qn,boundary:Ye,rootBoundary:gt,altBoundary:yt,padding:Ve}),Eo=Xr?Jn?vi:Dn:Jn?gn:Kr;yn[br]>Ln[br]&&(Eo=Ou(Eo));var Ui=Ou(Eo),oa=[];if(Oe&&oa.push(uo[qn]<=0),Le&&oa.push(uo[Eo]<=0,uo[Ui]<=0),oa.every(function(ui){return ui})){Dr=Qn,jn=!1;break}lr.set(Qn,oa)}if(jn)for(var Vi=Wt?3:1,Qo=function(ri){var Sa=on.find(function(_s){var $a=lr.get(_s);if($a)return $a.slice(0,ri).every(function(Qc){return Qc})});if(Sa)return Dr=Sa,"break"},Oo=Vi;Oo>0;Oo--){var _i=Qo(Oo);if(_i==="break")break}R.placement!==Dr&&(R.modifiersData[le]._skip=!0,R.placement=Dr,R.reset=!0)}}const Vd={name:"flip",enabled:!0,phase:"main",fn:Uc,requiresIfExists:["offset"],data:{_skip:!1}};function Lu(G,R,H){return H===void 0&&(H={x:0,y:0}),{top:G.top-R.height-H.y,right:G.right-R.width+H.x,bottom:G.bottom-R.height+H.y,left:G.left-R.width-H.x}}function wf(G){return[Kr,vi,gn,Dn].some(function(R){return G[R]>=0})}function Hd(G){var R=G.state,H=G.name,le=R.rects.reference,ge=R.rects.popper,Oe=R.modifiersData.preventOverflow,Se=Yl(R,{elementContext:"reference"}),Le=Yl(R,{altBoundary:!0}),ke=Lu(Se,le),Ve=Lu(Le,ge,Oe),Ye=wf(ke),gt=wf(Ve);R.modifiersData[H]={referenceClippingOffsets:ke,popperEscapeOffsets:Ve,isReferenceHidden:Ye,hasPopperEscaped:gt},R.attributes.popper=Object.assign({},R.attributes.popper,{"data-popper-reference-hidden":Ye,"data-popper-escaped":gt})}const Vc={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Hd};function Nu(G,R,H){var le=Ps(G),ge=[Dn,Kr].indexOf(le)>=0?-1:1,Oe=typeof H=="function"?H(Object.assign({},R,{placement:G})):H,Se=Oe[0],Le=Oe[1];return Se=Se||0,Le=(Le||0)*ge,[Dn,vi].indexOf(le)>=0?{x:Le,y:Se}:{x:Se,y:Le}}function Wd(G){var R=G.state,H=G.options,le=G.name,ge=H.offset,Oe=ge===void 0?[0,0]:ge,Se=Ds.reduce(function(Ye,gt){return Ye[gt]=Nu(gt,R.rects,Oe),Ye},{}),Le=Se[R.placement],ke=Le.x,Ve=Le.y;R.modifiersData.popperOffsets!=null&&(R.modifiersData.popperOffsets.x+=ke,R.modifiersData.popperOffsets.y+=Ve),R.modifiersData[le]=Se}const zu={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Wd};function Pi(G){var R=G.state,H=G.name;R.modifiersData[H]=Dm({reference:R.rects.reference,element:R.rects.popper,strategy:"absolute",placement:R.placement})}const Ls={name:"popperOffsets",enabled:!0,phase:"read",fn:Pi,data:{}};function pa(G){return G==="x"?"y":"x"}function Im(G){var R=G.state,H=G.options,le=G.name,ge=H.mainAxis,Oe=ge===void 0?!0:ge,Se=H.altAxis,Le=Se===void 0?!1:Se,ke=H.boundary,Ve=H.rootBoundary,Ye=H.altBoundary,gt=H.padding,yt=H.tether,vt=yt===void 0?!0:yt,Wt=H.tetherOffset,Vt=Wt===void 0?0:Wt,Ht=Yl(R,{boundary:ke,rootBoundary:Ve,padding:gt,altBoundary:Ye}),Zt=Ps(R.placement),In=ol(R.placement),xn=!In,on=Bd(Zt),yn=pa(on),Ln=R.modifiersData.popperOffsets,lr=R.rects.reference,jn=R.rects.popper,Dr=typeof Vt=="function"?Vt(Object.assign({},R.rects,{placement:R.placement})):Vt,zn=typeof Dr=="number"?{mainAxis:Dr,altAxis:Dr}:Object.assign({mainAxis:0,altAxis:0},Dr),Qn=R.modifiersData.offset?R.modifiersData.offset[R.placement]:null,qn={x:0,y:0};if(Ln){if(Oe){var Jn,Xr=on==="y"?Kr:Dn,br=on==="y"?gn:vi,uo=on==="y"?"height":"width",Eo=Ln[on],Ui=Eo+Ht[Xr],oa=Eo-Ht[br],Vi=vt?-jn[uo]/2:0,Qo=In===qa?lr[uo]:jn[uo],Oo=In===qa?-jn[uo]:-lr[uo],_i=R.elements.arrow,ui=vt&&_i?fs(_i):{width:0,height:0},ri=R.modifiersData["arrow#persistent"]?R.modifiersData["arrow#persistent"].padding:Bc(),Sa=ri[Xr],_s=ri[br],$a=zc(0,lr[uo],ui[uo]),Qc=xn?lr[uo]/2-Vi-$a-Sa-zn.mainAxis:Qo-$a-Sa-zn.mainAxis,yh=xn?-lr[uo]/2+Vi+$a+_s+zn.mainAxis:Oo+$a+_s+zn.mainAxis,bh=R.elements.arrow&&Nc(R.elements.arrow),vh=bh?on==="y"?bh.clientTop||0:bh.clientLeft||0:0,Jc=(Jn=Qn?.[on])!=null?Jn:0,Kf=Eo+Qc-Jc-vh,fl=Eo+yh-Jc,jv=zc(vt?hs(Ui,Kf):Ui,Eo,vt?Oc(oa,fl):oa);Ln[on]=jv,qn[on]=jv-Eo}if(Le){var Qx,Xf=on==="x"?Kr:Dn,$v=on==="x"?gn:vi,Bs=Ln[yn],_h=yn==="y"?"height":"width",Uv=Bs+Ht[Xf],Vv=Bs-Ht[$v],Hv=[Kr,Dn].indexOf(Zt)!==-1,Jx=(Qx=Qn?.[yn])!=null?Qx:0,di=Hv?Uv:Bs-lr[_h]-jn[_h]-Jx+zn.altAxis,hi=Hv?Bs+lr[_h]+jn[_h]-Jx-zn.altAxis:Vv,Wv=vt&&Hv?Em(di,Bs,hi):zc(vt?di:Uv,Bs,vt?hi:Vv);Ln[yn]=Wv,qn[yn]=Wv-Bs}R.modifiersData[le]=qn}}const Pm={name:"preventOverflow",enabled:!0,phase:"main",fn:Im,requiresIfExists:["offset"]};function Om(G){return{scrollLeft:G.scrollLeft,scrollTop:G.scrollTop}}function Hc(G){return G===ji(G)||!Ii(G)?Cm(G):Om(G)}function Ef(G){var R=G.getBoundingClientRect(),H=La(R.width)/G.offsetWidth||1,le=La(R.height)/G.offsetHeight||1;return H!==1||le!==1}function Yd(G,R,H){H===void 0&&(H=!1);var le=Ii(R),ge=Ii(R)&&Ef(R),Oe=Os(R),Se=Vl(G,ge,H),Le={scrollLeft:0,scrollTop:0},ke={x:0,y:0};return(le||!le&&!H)&&((Ri(R)!=="body"||Am(Oe))&&(Le=Hc(R)),Ii(R)?(ke=Vl(R,!0),ke.x+=R.clientLeft,ke.y+=R.clientTop):Oe&&(ke.x=bf(Oe))),{x:Se.left+Le.scrollLeft-ke.x,y:Se.top+Le.scrollTop-ke.y,width:Se.width,height:Se.height}}function j0(G){var R=new Map,H=new Set,le=[];G.forEach(function(Oe){R.set(Oe.name,Oe)});function ge(Oe){H.add(Oe.name);var Se=[].concat(Oe.requires||[],Oe.requiresIfExists||[]);Se.forEach(function(Le){if(!H.has(Le)){var ke=R.get(Le);ke&&ge(ke)}}),le.push(Oe)}return G.forEach(function(Oe){H.has(Oe.name)||ge(Oe)}),le}function Gl(G){var R=j0(G);return Ld.reduce(function(H,le){return H.concat(R.filter(function(ge){return ge.phase===le}))},[])}function $0(G){var R;return function(){return R||(R=new Promise(function(H){Promise.resolve().then(function(){R=void 0,H(G())})})),R}}function Bu(G){var R=G.reduce(function(H,le){var ge=H[le.name];return H[le.name]=ge?Object.assign({},ge,le,{options:Object.assign({},ge.options,le.options),data:Object.assign({},ge.data,le.data)}):le,H},{});return Object.keys(R).map(function(H){return R[H]})}var Tf={placement:"bottom",modifiers:[],strategy:"absolute"};function Lm(){for(var G=arguments.length,R=new Array(G),H=0;H<G;H++)R[H]=arguments[H];return!R.some(function(le){return!(le&&typeof le.getBoundingClientRect=="function")})}function Sf(G){G===void 0&&(G={});var R=G,H=R.defaultModifiers,le=H===void 0?[]:H,ge=R.defaultOptions,Oe=ge===void 0?Tf:ge;return function(Le,ke,Ve){Ve===void 0&&(Ve=Oe);var Ye={placement:"bottom",orderedModifiers:[],options:Object.assign({},Tf,Oe),modifiersData:{},elements:{reference:Le,popper:ke},attributes:{},styles:{}},gt=[],yt=!1,vt={state:Ye,setOptions:function(Zt){var In=typeof Zt=="function"?Zt(Ye.options):Zt;Vt(),Ye.options=Object.assign({},Oe,Ye.options,In),Ye.scrollParents={reference:Ul(Le)?$d(Le):Le.contextElement?$d(Le.contextElement):[],popper:$d(ke)};var xn=Gl(Bu([].concat(le,Ye.options.modifiers)));return Ye.orderedModifiers=xn.filter(function(on){return on.enabled}),Wt(),vt.update()},forceUpdate:function(){if(!yt){var Zt=Ye.elements,In=Zt.reference,xn=Zt.popper;if(Lm(In,xn)){Ye.rects={reference:Yd(In,Nc(xn),Ye.options.strategy==="fixed"),popper:fs(xn)},Ye.reset=!1,Ye.placement=Ye.options.placement,Ye.orderedModifiers.forEach(function(zn){return Ye.modifiersData[zn.name]=Object.assign({},zn.data)});for(var on=0;on<Ye.orderedModifiers.length;on++){if(Ye.reset===!0){Ye.reset=!1,on=-1;continue}var yn=Ye.orderedModifiers[on],Ln=yn.fn,lr=yn.options,jn=lr===void 0?{}:lr,Dr=yn.name;typeof Ln=="function"&&(Ye=Ln({state:Ye,options:jn,name:Dr,instance:vt})||Ye)}}}},update:$0(function(){return new Promise(function(Ht){vt.forceUpdate(),Ht(Ye)})}),destroy:function(){Vt(),yt=!0}};if(!Lm(Le,ke))return vt;vt.setOptions(Ve).then(function(Ht){!yt&&Ve.onFirstUpdate&&Ve.onFirstUpdate(Ht)});function Wt(){Ye.orderedModifiers.forEach(function(Ht){var Zt=Ht.name,In=Ht.options,xn=In===void 0?{}:In,on=Ht.effect;if(typeof on=="function"){var yn=on({state:Ye,name:Zt,instance:vt,options:xn}),Ln=function(){};gt.push(yn||Ln)}})}function Vt(){gt.forEach(function(Ht){return Ht()}),gt=[]}return vt}}var ps=Sf(),Cf=[Pu,Ls,za,zd],kf=Sf({defaultModifiers:Cf}),Af=[Pu,Ls,za,zd,zu,Vd,Pm,Xt,Vc],Fu=Sf({defaultModifiers:Af});const Mf=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Ic,afterRead:pf,afterWrite:Ka,applyStyles:zd,arrow:Xt,auto:ds,basePlacements:rr,beforeMain:mf,beforeRead:Rs,beforeWrite:$l,bottom:gn,clippingParents:Rn,computeStyles:za,createPopper:Fu,createPopperBase:ps,createPopperLite:kf,detectOverflow:Yl,end:qo,eventListeners:Pu,flip:Vd,hide:Vc,left:Dn,main:Is,modifierPhases:Ld,offset:zu,placements:Ds,popper:Za,popperGenerator:Sf,popperOffsets:Ls,preventOverflow:Pm,read:Ko,reference:Zo,right:vi,start:qa,top:Kr,variationPlacements:wa,viewport:ff,write:Pc},Symbol.toStringTag,{value:"Module"})),Df="dropdown",Qa=".bs.dropdown",ql=".data-api",Nm="Escape",ju="Tab",$u="ArrowUp",Ea="ArrowDown",Uu=2,zm=`hide${Qa}`,Rf=`hidden${Qa}`,Bm=`show${Qa}`,Zl=`shown${Qa}`,Tr=`click${Qa}${ql}`,If=`keydown${Qa}${ql}`,Av=`keyup${Qa}${ql}`,il="show",U0="dropup",Fm="dropend",V0="dropstart",Pf="dropup-center",H0="dropdown-center",ms='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Vu=`${ms}.${il}`,Hu=".dropdown-menu",jm=".navbar",Wu=".navbar-nav",$m=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Um=ue()?"top-end":"top-start",Mv=ue()?"top-start":"top-end",Dv=ue()?"bottom-end":"bottom-start",W0=ue()?"bottom-start":"bottom-end",Rv=ue()?"left-start":"right-start",Vm=ue()?"right-start":"left-start",Hm="top",Y0="bottom",Wm={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Ym={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ja extends an{constructor(R,H){super(R,H),this._popper=null,this._parent=this._element.parentNode,this._menu=hn.next(this._element,Hu)[0]||hn.prev(this._element,Hu)[0]||hn.findOne(Hu,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Wm}static get DefaultType(){return Ym}static get NAME(){return Df}toggle(){return this._isShown()?this.hide():this.show()}show(){if($(this._element)||this._isShown())return;const R={relatedTarget:this._element};if(!nt.trigger(this._element,Bm,R).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Wu))for(const le of[].concat(...document.body.children))nt.on(le,"mouseover",q);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(il),this._element.classList.add(il),nt.trigger(this._element,Zl,R)}}hide(){if($(this._element)||!this._isShown())return;const R={relatedTarget:this._element};this._completeHide(R)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(R){if(!nt.trigger(this._element,zm,R).defaultPrevented){if("ontouchstart"in document.documentElement)for(const le of[].concat(...document.body.children))nt.off(le,"mouseover",q);this._popper&&this._popper.destroy(),this._menu.classList.remove(il),this._element.classList.remove(il),this._element.setAttribute("aria-expanded","false"),bn.removeDataAttribute(this._menu,"popper"),nt.trigger(this._element,Rf,R)}}_getConfig(R){if(R=super._getConfig(R),typeof R.reference=="object"&&!P(R.reference)&&typeof R.reference.getBoundingClientRect!="function")throw new TypeError(`${Df.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return R}_createPopper(){if(typeof Mf>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let R=this._element;this._config.reference==="parent"?R=this._parent:P(this._config.reference)?R=N(this._config.reference):typeof this._config.reference=="object"&&(R=this._config.reference);const H=this._getPopperConfig();this._popper=Fu(R,this._menu,H)}_isShown(){return this._menu.classList.contains(il)}_getPlacement(){const R=this._parent;if(R.classList.contains(Fm))return Rv;if(R.classList.contains(V0))return Vm;if(R.classList.contains(Pf))return Hm;if(R.classList.contains(H0))return Y0;const H=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return R.classList.contains(U0)?H?Mv:Um:H?W0:Dv}_detectNavbar(){return this._element.closest(jm)!==null}_getOffset(){const{offset:R}=this._config;return typeof R=="string"?R.split(",").map(H=>Number.parseInt(H,10)):typeof R=="function"?H=>R(H,this._element):R}_getPopperConfig(){const R={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(bn.setDataAttribute(this._menu,"popper","static"),R.modifiers=[{name:"applyStyles",enabled:!1}]),{...R,...me(this._config.popperConfig,[R])}}_selectMenuItem({key:R,target:H}){const le=hn.find($m,this._menu).filter(ge=>F(ge));le.length&&De(le,H,R===Ea,!le.includes(H)).focus()}static jQueryInterface(R){return this.each(function(){const H=Ja.getOrCreateInstance(this,R);if(typeof R=="string"){if(typeof H[R]>"u")throw new TypeError(`No method named "${R}"`);H[R]()}})}static clearMenus(R){if(R.button===Uu||R.type==="keyup"&&R.key!==ju)return;const H=hn.find(Vu);for(const le of H){const ge=Ja.getInstance(le);if(!ge||ge._config.autoClose===!1)continue;const Oe=R.composedPath(),Se=Oe.includes(ge._menu);if(Oe.includes(ge._element)||ge._config.autoClose==="inside"&&!Se||ge._config.autoClose==="outside"&&Se||ge._menu.contains(R.target)&&(R.type==="keyup"&&R.key===ju||/input|select|option|textarea|form/i.test(R.target.tagName)))continue;const Le={relatedTarget:ge._element};R.type==="click"&&(Le.clickEvent=R),ge._completeHide(Le)}}static dataApiKeydownHandler(R){const H=/input|textarea/i.test(R.target.tagName),le=R.key===Nm,ge=[$u,Ea].includes(R.key);if(!ge&&!le||H&&!le)return;R.preventDefault();const Oe=this.matches(ms)?this:hn.prev(this,ms)[0]||hn.next(this,ms)[0]||hn.findOne(ms,R.delegateTarget.parentNode),Se=Ja.getOrCreateInstance(Oe);if(ge){R.stopPropagation(),Se.show(),Se._selectMenuItem(R);return}Se._isShown()&&(R.stopPropagation(),Se.hide(),Oe.focus())}}nt.on(document,If,ms,Ja.dataApiKeydownHandler),nt.on(document,If,Hu,Ja.dataApiKeydownHandler),nt.on(document,Tr,Ja.clearMenus),nt.on(document,Av,Ja.clearMenus),nt.on(document,Tr,ms,function(G){G.preventDefault(),Ja.getOrCreateInstance(this).toggle()}),re(Ja);const Of="backdrop",Gm="fade",Kl="show",Wc=`mousedown.bs.${Of}`,qm={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Yc={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Zm extends Fn{constructor(R){super(),this._config=this._getConfig(R),this._isAppended=!1,this._element=null}static get Default(){return qm}static get DefaultType(){return Yc}static get NAME(){return Of}show(R){if(!this._config.isVisible){me(R);return}this._append();const H=this._getElement();this._config.isAnimated&&K(H),H.classList.add(Kl),this._emulateAnimation(()=>{me(R)})}hide(R){if(!this._config.isVisible){me(R);return}this._getElement().classList.remove(Kl),this._emulateAnimation(()=>{this.dispose(),me(R)})}dispose(){this._isAppended&&(nt.off(this._element,Wc),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const R=document.createElement("div");R.className=this._config.className,this._config.isAnimated&&R.classList.add(Gm),this._element=R}return this._element}_configAfterMerge(R){return R.rootElement=N(R.rootElement),R}_append(){if(this._isAppended)return;const R=this._getElement();this._config.rootElement.append(R),nt.on(R,Wc,()=>{me(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(R){ve(R,this._getElement(),this._config.isAnimated)}}const Lf="focustrap",Gd=".bs.focustrap",Km=`focusin${Gd}`,Nf=`keydown.tab${Gd}`,q0="Tab",Xm="forward",Yu="backward",Iv={autofocus:!0,trapElement:null},Pv={autofocus:"boolean",trapElement:"element"};class Qm extends Fn{constructor(R){super(),this._config=this._getConfig(R),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Iv}static get DefaultType(){return Pv}static get NAME(){return Lf}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),nt.off(document,Gd),nt.on(document,Km,R=>this._handleFocusin(R)),nt.on(document,Nf,R=>this._handleKeydown(R)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,nt.off(document,Gd))}_handleFocusin(R){const{trapElement:H}=this._config;if(R.target===document||R.target===H||H.contains(R.target))return;const le=hn.focusableChildren(H);le.length===0?H.focus():this._lastTabNavDirection===Yu?le[le.length-1].focus():le[0].focus()}_handleKeydown(R){R.key===q0&&(this._lastTabNavDirection=R.shiftKey?Yu:Xm)}}const Jm=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",qd=".sticky-top",Xl="padding-right",Zd="margin-right";class Kd{constructor(){this._element=document.body}getWidth(){const R=document.documentElement.clientWidth;return Math.abs(window.innerWidth-R)}hide(){const R=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Xl,H=>H+R),this._setElementAttributes(Jm,Xl,H=>H+R),this._setElementAttributes(qd,Zd,H=>H-R)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Xl),this._resetElementAttributes(Jm,Xl),this._resetElementAttributes(qd,Zd)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(R,H,le){const ge=this.getWidth(),Oe=Se=>{if(Se!==this._element&&window.innerWidth>Se.clientWidth+ge)return;this._saveInitialAttribute(Se,H);const Le=window.getComputedStyle(Se).getPropertyValue(H);Se.style.setProperty(H,`${le(Number.parseFloat(Le))}px`)};this._applyManipulationCallback(R,Oe)}_saveInitialAttribute(R,H){const le=R.style.getPropertyValue(H);le&&bn.setDataAttribute(R,H,le)}_resetElementAttributes(R,H){const le=ge=>{const Oe=bn.getDataAttribute(ge,H);if(Oe===null){ge.style.removeProperty(H);return}bn.removeDataAttribute(ge,H),ge.style.setProperty(H,Oe)};this._applyManipulationCallback(R,le)}_applyManipulationCallback(R,H){if(P(R)){H(R);return}for(const le of hn.find(R,this._element))H(le)}}const Xd="modal",ta=".bs.modal",Qd=".data-api",Ov="Escape",gs=`hide${ta}`,ys=`hidePrevented${ta}`,Ns=`hidden${ta}`,Gu=`show${ta}`,rn=`shown${ta}`,Z0=`resize${ta}`,zf=`click.dismiss${ta}`,Ql=`mousedown.dismiss${ta}`,Gc=`keydown.dismiss${ta}`,un=`click${ta}${Qd}`,al="modal-open",Lv="fade",K0="show",Jd="modal-static",X0=".modal.show",Q0=".modal-dialog",J0=".modal-body",tg='[data-bs-toggle="modal"]',ng={backdrop:!0,focus:!0,keyboard:!0},rg={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class sl extends an{constructor(R,H){super(R,H),this._dialog=hn.findOne(Q0,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Kd,this._addEventListeners()}static get Default(){return ng}static get DefaultType(){return rg}static get NAME(){return Xd}toggle(R){return this._isShown?this.hide():this.show(R)}show(R){this._isShown||this._isTransitioning||nt.trigger(this._element,Gu,{relatedTarget:R}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(al),this._adjustDialog(),this._backdrop.show(()=>this._showElement(R)))}hide(){!this._isShown||this._isTransitioning||nt.trigger(this._element,gs).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(K0),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){nt.off(window,ta),nt.off(this._dialog,ta),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Zm({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Qm({trapElement:this._element})}_showElement(R){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const H=hn.findOne(J0,this._dialog);H&&(H.scrollTop=0),K(this._element),this._element.classList.add(K0);const le=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,nt.trigger(this._element,rn,{relatedTarget:R})};this._queueCallback(le,this._dialog,this._isAnimated())}_addEventListeners(){nt.on(this._element,Gc,R=>{if(R.key===Ov){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),nt.on(window,Z0,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),nt.on(this._element,Ql,R=>{nt.one(this._element,zf,H=>{if(!(this._element!==R.target||this._element!==H.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(al),this._resetAdjustments(),this._scrollBar.reset(),nt.trigger(this._element,Ns)})}_isAnimated(){return this._element.classList.contains(Lv)}_triggerBackdropTransition(){if(nt.trigger(this._element,ys).defaultPrevented)return;const H=this._element.scrollHeight>document.documentElement.clientHeight,le=this._element.style.overflowY;le==="hidden"||this._element.classList.contains(Jd)||(H||(this._element.style.overflowY="hidden"),this._element.classList.add(Jd),this._queueCallback(()=>{this._element.classList.remove(Jd),this._queueCallback(()=>{this._element.style.overflowY=le},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const R=this._element.scrollHeight>document.documentElement.clientHeight,H=this._scrollBar.getWidth(),le=H>0;if(le&&!R){const ge=ue()?"paddingLeft":"paddingRight";this._element.style[ge]=`${H}px`}if(!le&&R){const ge=ue()?"paddingRight":"paddingLeft";this._element.style[ge]=`${H}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(R,H){return this.each(function(){const le=sl.getOrCreateInstance(this,R);if(typeof R=="string"){if(typeof le[R]>"u")throw new TypeError(`No method named "${R}"`);le[R](H)}})}}nt.on(document,un,tg,function(G){const R=hn.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&G.preventDefault(),nt.one(R,Gu,ge=>{ge.defaultPrevented||nt.one(R,Ns,()=>{F(this)&&this.focus()})});const H=hn.findOne(X0);H&&sl.getInstance(H).hide(),sl.getOrCreateInstance(R).toggle(this)}),Wr(sl),re(sl);const og="offcanvas",na=".bs.offcanvas",ig=".data-api",ag=`load${na}${ig}`,sg="Escape",ll="show",Bf="showing",Ta="hiding",xo="offcanvas-backdrop",eh=".offcanvas.show",lg=`show${na}`,cl=`shown${na}`,cg=`hide${na}`,Jl=`hidePrevented${na}`,ey=`hidden${na}`,qu=`resize${na}`,th=`click${na}${ig}`,$t=`keydown.dismiss${na}`,Cn='[data-bs-toggle="offcanvas"]',qc={backdrop:!0,keyboard:!0,scroll:!1},wo={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Fa extends an{constructor(R,H){super(R,H),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return qc}static get DefaultType(){return wo}static get NAME(){return og}toggle(R){return this._isShown?this.hide():this.show(R)}show(R){if(this._isShown||nt.trigger(this._element,lg,{relatedTarget:R}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Kd().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Bf);const le=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(ll),this._element.classList.remove(Bf),nt.trigger(this._element,cl,{relatedTarget:R})};this._queueCallback(le,this._element,!0)}hide(){if(!this._isShown||nt.trigger(this._element,cg).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Ta),this._backdrop.hide();const H=()=>{this._element.classList.remove(ll,Ta),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Kd().reset(),nt.trigger(this._element,ey)};this._queueCallback(H,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const R=()=>{if(this._config.backdrop==="static"){nt.trigger(this._element,Jl);return}this.hide()},H=!!this._config.backdrop;return new Zm({className:xo,isVisible:H,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:H?R:null})}_initializeFocusTrap(){return new Qm({trapElement:this._element})}_addEventListeners(){nt.on(this._element,$t,R=>{if(R.key===sg){if(this._config.keyboard){this.hide();return}nt.trigger(this._element,Jl)}})}static jQueryInterface(R){return this.each(function(){const H=Fa.getOrCreateInstance(this,R);if(typeof R=="string"){if(H[R]===void 0||R.startsWith("_")||R==="constructor")throw new TypeError(`No method named "${R}"`);H[R](this)}})}}nt.on(document,th,Cn,function(G){const R=hn.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&G.preventDefault(),$(this))return;nt.one(R,ey,()=>{F(this)&&this.focus()});const H=hn.findOne(eh);H&&H!==R&&Fa.getInstance(H).hide(),Fa.getOrCreateInstance(R).toggle(this)}),nt.on(window,ag,()=>{for(const G of hn.find(eh))Fa.getOrCreateInstance(G).show()}),nt.on(window,qu,()=>{for(const G of hn.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(G).position!=="fixed"&&Fa.getOrCreateInstance(G).hide()}),Wr(Fa),re(Fa);const et={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},ug=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),ja=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,ty=(G,R)=>{const H=G.nodeName.toLowerCase();return R.includes(H)?ug.has(H)?!!ja.test(G.nodeValue):!0:R.filter(le=>le instanceof RegExp).some(le=>le.test(H))};function dg(G,R,H){if(!G.length)return G;if(H&&typeof H=="function")return H(G);const ge=new window.DOMParser().parseFromString(G,"text/html"),Oe=[].concat(...ge.body.querySelectorAll("*"));for(const Se of Oe){const Le=Se.nodeName.toLowerCase();if(!Object.keys(R).includes(Le)){Se.remove();continue}const ke=[].concat(...Se.attributes),Ve=[].concat(R["*"]||[],R[Le]||[]);for(const Ye of ke)ty(Ye,Ve)||Se.removeAttribute(Ye.nodeName)}return ge.body.innerHTML}const Zu="TemplateFactory",Nv={allowList:et,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},zv={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},ny={entry:"(string|element|function|null)",selector:"(string|element)"};class nh extends Fn{constructor(R){super(),this._config=this._getConfig(R)}static get Default(){return Nv}static get DefaultType(){return zv}static get NAME(){return Zu}getContent(){return Object.values(this._config.content).map(R=>this._resolvePossibleFunction(R)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(R){return this._checkContent(R),this._config.content={...this._config.content,...R},this}toHtml(){const R=document.createElement("div");R.innerHTML=this._maybeSanitize(this._config.template);for(const[ge,Oe]of Object.entries(this._config.content))this._setContent(R,Oe,ge);const H=R.children[0],le=this._resolvePossibleFunction(this._config.extraClass);return le&&H.classList.add(...le.split(" ")),H}_typeCheckConfig(R){super._typeCheckConfig(R),this._checkContent(R.content)}_checkContent(R){for(const[H,le]of Object.entries(R))super._typeCheckConfig({selector:H,entry:le},ny)}_setContent(R,H,le){const ge=hn.findOne(le,R);if(ge){if(H=this._resolvePossibleFunction(H),!H){ge.remove();return}if(P(H)){this._putElementInTemplate(N(H),ge);return}if(this._config.html){ge.innerHTML=this._maybeSanitize(H);return}ge.textContent=H}}_maybeSanitize(R){return this._config.sanitize?dg(R,this._config.allowList,this._config.sanitizeFn):R}_resolvePossibleFunction(R){return me(R,[this])}_putElementInTemplate(R,H){if(this._config.html){H.innerHTML="",H.append(R);return}H.textContent=R.textContent}}const rh="tooltip",hg=new Set(["sanitize","allowList","sanitizeFn"]),jf="fade",oh="modal",Zc="show",fg=".tooltip-inner",Ku=`.${oh}`,ma="hide.bs.modal",ih="hover",Xu="focus",yo="click",Yr="manual",ah="hide",bs="hidden",ga="show",ul="shown",pg="inserted",mg="click",ec="focusin",tc="focusout",Qu="mouseenter",$f="mouseleave",sh={AUTO:"auto",TOP:"top",RIGHT:ue()?"left":"right",BOTTOM:"bottom",LEFT:ue()?"right":"left"},gg={allowList:et,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},yg={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ra extends an{constructor(R,H){if(typeof Mf>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(R,H),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return gg}static get DefaultType(){return yg}static get NAME(){return rh}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),nt.off(this._element.closest(Ku),ma,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const R=nt.trigger(this._element,this.constructor.eventName(ga)),le=(Z(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(R.defaultPrevented||!le)return;this._disposePopper();const ge=this._getTipElement();this._element.setAttribute("aria-describedby",ge.getAttribute("id"));const{container:Oe}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(Oe.append(ge),nt.trigger(this._element,this.constructor.eventName(pg))),this._popper=this._createPopper(ge),ge.classList.add(Zc),"ontouchstart"in document.documentElement)for(const Le of[].concat(...document.body.children))nt.on(Le,"mouseover",q);const Se=()=>{nt.trigger(this._element,this.constructor.eventName(ul)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(Se,this.tip,this._isAnimated())}hide(){if(!this._isShown()||nt.trigger(this._element,this.constructor.eventName(ah)).defaultPrevented)return;if(this._getTipElement().classList.remove(Zc),"ontouchstart"in document.documentElement)for(const ge of[].concat(...document.body.children))nt.off(ge,"mouseover",q);this._activeTrigger[yo]=!1,this._activeTrigger[Xu]=!1,this._activeTrigger[ih]=!1,this._isHovered=null;const le=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),nt.trigger(this._element,this.constructor.eventName(bs)))};this._queueCallback(le,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(R){const H=this._getTemplateFactory(R).toHtml();if(!H)return null;H.classList.remove(jf,Zc),H.classList.add(`bs-${this.constructor.NAME}-auto`);const le=E(this.constructor.NAME).toString();return H.setAttribute("id",le),this._isAnimated()&&H.classList.add(jf),H}setContent(R){this._newContent=R,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(R){return this._templateFactory?this._templateFactory.changeContent(R):this._templateFactory=new nh({...this._config,content:R,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[fg]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(R){return this.constructor.getOrCreateInstance(R.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(jf)}_isShown(){return this.tip&&this.tip.classList.contains(Zc)}_createPopper(R){const H=me(this._config.placement,[this,R,this._element]),le=sh[H.toUpperCase()];return Fu(this._element,R,this._getPopperConfig(le))}_getOffset(){const{offset:R}=this._config;return typeof R=="string"?R.split(",").map(H=>Number.parseInt(H,10)):typeof R=="function"?H=>R(H,this._element):R}_resolvePossibleFunction(R){return me(R,[this._element])}_getPopperConfig(R){const H={placement:R,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:le=>{this._getTipElement().setAttribute("data-popper-placement",le.state.placement)}}]};return{...H,...me(this._config.popperConfig,[H])}}_setListeners(){const R=this._config.trigger.split(" ");for(const H of R)if(H==="click")nt.on(this._element,this.constructor.eventName(mg),this._config.selector,le=>{this._initializeOnDelegatedTarget(le).toggle()});else if(H!==Yr){const le=H===ih?this.constructor.eventName(Qu):this.constructor.eventName(ec),ge=H===ih?this.constructor.eventName($f):this.constructor.eventName(tc);nt.on(this._element,le,this._config.selector,Oe=>{const Se=this._initializeOnDelegatedTarget(Oe);Se._activeTrigger[Oe.type==="focusin"?Xu:ih]=!0,Se._enter()}),nt.on(this._element,ge,this._config.selector,Oe=>{const Se=this._initializeOnDelegatedTarget(Oe);Se._activeTrigger[Oe.type==="focusout"?Xu:ih]=Se._element.contains(Oe.relatedTarget),Se._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},nt.on(this._element.closest(Ku),ma,this._hideModalHandler)}_fixTitle(){const R=this._element.getAttribute("title");R&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",R),this._element.setAttribute("data-bs-original-title",R),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(R,H){clearTimeout(this._timeout),this._timeout=setTimeout(R,H)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(R){const H=bn.getDataAttributes(this._element);for(const le of Object.keys(H))hg.has(le)&&delete H[le];return R={...H,...typeof R=="object"&&R?R:{}},R=this._mergeConfigObj(R),R=this._configAfterMerge(R),this._typeCheckConfig(R),R}_configAfterMerge(R){return R.container=R.container===!1?document.body:N(R.container),typeof R.delay=="number"&&(R.delay={show:R.delay,hide:R.delay}),typeof R.title=="number"&&(R.title=R.title.toString()),typeof R.content=="number"&&(R.content=R.content.toString()),R}_getDelegateConfig(){const R={};for(const[H,le]of Object.entries(this._config))this.constructor.Default[H]!==le&&(R[H]=le);return R.selector=!1,R.trigger="manual",R}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(R){return this.each(function(){const H=ra.getOrCreateInstance(this,R);if(typeof R=="string"){if(typeof H[R]>"u")throw new TypeError(`No method named "${R}"`);H[R]()}})}}re(ra);const bg="popover",lh=".popover-header",Uf=".popover-body",vg={...ra.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},ci={...ra.DefaultType,content:"(null|string|element|function)"};class dl extends ra{static get Default(){return vg}static get DefaultType(){return ci}static get NAME(){return bg}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[lh]:this._getTitle(),[Uf]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(R){return this.each(function(){const H=dl.getOrCreateInstance(this,R);if(typeof R=="string"){if(typeof H[R]>"u")throw new TypeError(`No method named "${R}"`);H[R]()}})}}re(dl);const Vf="scrollspy",zs=".bs.scrollspy",_g=".data-api",ch=`activate${zs}`,Wf=`click${zs}`,Kc=`load${zs}${_g}`,uh="dropdown-item",nc="active",dh='[data-bs-spy="scroll"]',hh="[href]",ry=".nav, .list-group",xg=".nav-link",oy=`${xg}, .nav-item > ${xg}, .list-group-item`,iy=".dropdown",ay=".dropdown-toggle",fh={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},sy={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Ju extends an{constructor(R,H){super(R,H),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return fh}static get DefaultType(){return sy}static get NAME(){return Vf}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const R of this._observableSections.values())this._observer.observe(R)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(R){return R.target=N(R.target)||document.body,R.rootMargin=R.offset?`${R.offset}px 0px -30%`:R.rootMargin,typeof R.threshold=="string"&&(R.threshold=R.threshold.split(",").map(H=>Number.parseFloat(H))),R}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(nt.off(this._config.target,Wf),nt.on(this._config.target,Wf,hh,R=>{const H=this._observableSections.get(R.target.hash);if(H){R.preventDefault();const le=this._rootElement||window,ge=H.offsetTop-this._element.offsetTop;if(le.scrollTo){le.scrollTo({top:ge,behavior:"smooth"});return}le.scrollTop=ge}}))}_getNewObserver(){const R={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(H=>this._observerCallback(H),R)}_observerCallback(R){const H=Se=>this._targetLinks.get(`#${Se.target.id}`),le=Se=>{this._previousScrollData.visibleEntryTop=Se.target.offsetTop,this._process(H(Se))},ge=(this._rootElement||document.documentElement).scrollTop,Oe=ge>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=ge;for(const Se of R){if(!Se.isIntersecting){this._activeTarget=null,this._clearActiveClass(H(Se));continue}const Le=Se.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(Oe&&Le){if(le(Se),!ge)return;continue}!Oe&&!Le&&le(Se)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const R=hn.find(hh,this._config.target);for(const H of R){if(!H.hash||$(H))continue;const le=hn.findOne(decodeURI(H.hash),this._element);F(le)&&(this._targetLinks.set(decodeURI(H.hash),H),this._observableSections.set(H.hash,le))}}_process(R){this._activeTarget!==R&&(this._clearActiveClass(this._config.target),this._activeTarget=R,R.classList.add(nc),this._activateParents(R),nt.trigger(this._element,ch,{relatedTarget:R}))}_activateParents(R){if(R.classList.contains(uh)){hn.findOne(ay,R.closest(iy)).classList.add(nc);return}for(const H of hn.parents(R,ry))for(const le of hn.prev(H,oy))le.classList.add(nc)}_clearActiveClass(R){R.classList.remove(nc);const H=hn.find(`${hh}.${nc}`,R);for(const le of H)le.classList.remove(nc)}static jQueryInterface(R){return this.each(function(){const H=Ju.getOrCreateInstance(this,R);if(typeof R=="string"){if(H[R]===void 0||R.startsWith("_")||R==="constructor")throw new TypeError(`No method named "${R}"`);H[R]()}})}}nt.on(window,Kc,()=>{for(const G of hn.find(dh))Ju.getOrCreateInstance(G)}),re(Ju);const ph="tab",rc=".bs.tab",Po=`hide${rc}`,wg=`hidden${rc}`,ly=`show${rc}`,cy=`shown${rc}`,mh=`click${rc}`,Yf=`keydown${rc}`,Eg=`load${rc}`,uy="ArrowLeft",Tg="ArrowRight",dy="ArrowUp",Gf="ArrowDown",Xc="Home",Sg="End",hl="active",gh="fade",vs="show",qf="dropdown",$i=".dropdown-toggle",oc=".dropdown-menu",Zf=`:not(${$i})`,g='.list-group, .nav, [role="tablist"]',c=".nav-item, .list-group-item",h=`.nav-link${Zf}, .list-group-item${Zf}, [role="tab"]${Zf}`,b='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',_=`${h}, ${b}`,w=`.${hl}[data-bs-toggle="tab"], .${hl}[data-bs-toggle="pill"], .${hl}[data-bs-toggle="list"]`;class k extends an{constructor(R){super(R),this._parent=this._element.closest(g),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),nt.on(this._element,Yf,H=>this._keydown(H)))}static get NAME(){return ph}show(){const R=this._element;if(this._elemIsActive(R))return;const H=this._getActiveElem(),le=H?nt.trigger(H,Po,{relatedTarget:R}):null;nt.trigger(R,ly,{relatedTarget:H}).defaultPrevented||le&&le.defaultPrevented||(this._deactivate(H,R),this._activate(R,H))}_activate(R,H){if(!R)return;R.classList.add(hl),this._activate(hn.getElementFromSelector(R));const le=()=>{if(R.getAttribute("role")!=="tab"){R.classList.add(vs);return}R.removeAttribute("tabindex"),R.setAttribute("aria-selected",!0),this._toggleDropDown(R,!0),nt.trigger(R,cy,{relatedTarget:H})};this._queueCallback(le,R,R.classList.contains(gh))}_deactivate(R,H){if(!R)return;R.classList.remove(hl),R.blur(),this._deactivate(hn.getElementFromSelector(R));const le=()=>{if(R.getAttribute("role")!=="tab"){R.classList.remove(vs);return}R.setAttribute("aria-selected",!1),R.setAttribute("tabindex","-1"),this._toggleDropDown(R,!1),nt.trigger(R,wg,{relatedTarget:H})};this._queueCallback(le,R,R.classList.contains(gh))}_keydown(R){if(![uy,Tg,dy,Gf,Xc,Sg].includes(R.key))return;R.stopPropagation(),R.preventDefault();const H=this._getChildren().filter(ge=>!$(ge));let le;if([Xc,Sg].includes(R.key))le=H[R.key===Xc?0:H.length-1];else{const ge=[Tg,Gf].includes(R.key);le=De(H,R.target,ge,!0)}le&&(le.focus({preventScroll:!0}),k.getOrCreateInstance(le).show())}_getChildren(){return hn.find(_,this._parent)}_getActiveElem(){return this._getChildren().find(R=>this._elemIsActive(R))||null}_setInitialAttributes(R,H){this._setAttributeIfNotExists(R,"role","tablist");for(const le of H)this._setInitialAttributesOnChild(le)}_setInitialAttributesOnChild(R){R=this._getInnerElement(R);const H=this._elemIsActive(R),le=this._getOuterElement(R);R.setAttribute("aria-selected",H),le!==R&&this._setAttributeIfNotExists(le,"role","presentation"),H||R.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(R,"role","tab"),this._setInitialAttributesOnTargetPanel(R)}_setInitialAttributesOnTargetPanel(R){const H=hn.getElementFromSelector(R);H&&(this._setAttributeIfNotExists(H,"role","tabpanel"),R.id&&this._setAttributeIfNotExists(H,"aria-labelledby",`${R.id}`))}_toggleDropDown(R,H){const le=this._getOuterElement(R);if(!le.classList.contains(qf))return;const ge=(Oe,Se)=>{const Le=hn.findOne(Oe,le);Le&&Le.classList.toggle(Se,H)};ge($i,hl),ge(oc,vs),le.setAttribute("aria-expanded",H)}_setAttributeIfNotExists(R,H,le){R.hasAttribute(H)||R.setAttribute(H,le)}_elemIsActive(R){return R.classList.contains(hl)}_getInnerElement(R){return R.matches(_)?R:hn.findOne(_,R)}_getOuterElement(R){return R.closest(c)||R}static jQueryInterface(R){return this.each(function(){const H=k.getOrCreateInstance(this);if(typeof R=="string"){if(H[R]===void 0||R.startsWith("_")||R==="constructor")throw new TypeError(`No method named "${R}"`);H[R]()}})}}nt.on(document,mh,b,function(G){["A","AREA"].includes(this.tagName)&&G.preventDefault(),!$(this)&&k.getOrCreateInstance(this).show()}),nt.on(window,Eg,()=>{for(const G of hn.find(w))k.getOrCreateInstance(G)}),re(k);const D="toast",B=".bs.toast",U=`mouseover${B}`,W=`mouseout${B}`,J=`focusin${B}`,ee=`focusout${B}`,ce=`hide${B}`,se=`hidden${B}`,de=`show${B}`,oe=`shown${B}`,fe="fade",Te="hide",be="show",Ee="showing",he={animation:"boolean",autohide:"boolean",delay:"number"},Ce={animation:!0,autohide:!0,delay:5e3};class Ne extends an{constructor(R,H){super(R,H),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Ce}static get DefaultType(){return he}static get NAME(){return D}show(){if(nt.trigger(this._element,de).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(fe);const H=()=>{this._element.classList.remove(Ee),nt.trigger(this._element,oe),this._maybeScheduleHide()};this._element.classList.remove(Te),K(this._element),this._element.classList.add(be,Ee),this._queueCallback(H,this._element,this._config.animation)}hide(){if(!this.isShown()||nt.trigger(this._element,ce).defaultPrevented)return;const H=()=>{this._element.classList.add(Te),this._element.classList.remove(Ee,be),nt.trigger(this._element,se)};this._element.classList.add(Ee),this._queueCallback(H,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(be),super.dispose()}isShown(){return this._element.classList.contains(be)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(R,H){switch(R.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=H;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=H;break}}if(H){this._clearTimeout();return}const le=R.relatedTarget;this._element===le||this._element.contains(le)||this._maybeScheduleHide()}_setListeners(){nt.on(this._element,U,R=>this._onInteraction(R,!0)),nt.on(this._element,W,R=>this._onInteraction(R,!1)),nt.on(this._element,J,R=>this._onInteraction(R,!0)),nt.on(this._element,ee,R=>this._onInteraction(R,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(R){return this.each(function(){const H=Ne.getOrCreateInstance(this,R);if(typeof R=="string"){if(typeof H[R]>"u")throw new TypeError(`No method named "${R}"`);H[R](this)}})}}return Wr(Ne),re(Ne),{Alert:Ke,Button:tt,Carousel:tl,Collapse:bi,Dropdown:Ja,Modal:sl,Offcanvas:Fa,Popover:dl,ScrollSpy:Ju,Tab:k,Toast:Ne,Tooltip:ra}})})(Bke);Al.accessToken="pk.eyJ1IjoibWNyZXlub2xkc2giLCJhIjoiY2x2MzFuNzN6MGhoOTJycnd5ZHQ3eWR4ayJ9.QKI5tsCAXhuzNb2XzhyjOg";function Fke(){const e=j.useRef(null),t=j.useRef(null),[n,r]=j.useState(-70.9),[l,d]=j.useState(42.35),[f,y]=j.useState(9);return j.useEffect(()=>{if(!t.current){var a=new MapboxDirections({accessToken:Al.accessToken,unit:"metric",profile:"mapbox/driving",steps:!0});"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(E=>{t.current=new Al.Map({container:e.current,style:"mapbox://styles/mapbox/streets-v12",center:[E.coords.longitude,E.coords.latitude],zoom:f}),t.current.on("move",()=>{r(t.current.getCenter().lng.toFixed(4)),d(t.current.getCenter().lat.toFixed(4)),y(t.current.getZoom().toFixed(2))}),t.current.addControl(new o4({accessToken:Al.accessToken,marker:{color:"orange"},mapboxgl:Al})),a.setOrigin([E.coords.longitude,E.coords.latitude]),t.current.addControl(a,"bottom-right")})}}),O.jsxs("div",{children:[O.jsxs("div",{className:"sidebar",children:["Longitude: ",n," | Latitude: ",l," | Zoom: ",f]}),O.jsx("div",{ref:e,className:"map-container"})]})}function jke(){return O.jsxs(Zi,{children:[O.jsx("h1",{children:"Get Directions to Your Upcoming Event:"}),O.jsx("div",{className:"App",children:O.jsx(Fke,{})})]})}var Ak,Er,QY,JY,iv,Vg,WB,eG,tG,PS={},nG=[],$ke=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Ip(e,t){for(var n in t)e[n]=t[n];return e}function rG(e){var t=e.parentNode;t&&t.removeChild(e)}function Ot(e,t,n){var r,l,d,f={};for(d in t)d=="key"?r=t[d]:d=="ref"?l=t[d]:f[d]=t[d];if(arguments.length>2&&(f.children=arguments.length>3?Ak.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(d in e.defaultProps)f[d]===void 0&&(f[d]=e.defaultProps[d]);return _T(e,f,r,l,null)}function _T(e,t,n,r,l){var d={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:l??++QY};return l==null&&Er.vnode!=null&&Er.vnode(d),d}function tf(){return{current:null}}function Ki(e){return e.children}function Uke(e,t,n,r,l){var d;for(d in n)d==="children"||d==="key"||d in t||OS(e,d,null,n[d],r);for(d in t)l&&typeof t[d]!="function"||d==="children"||d==="key"||d==="value"||d==="checked"||n[d]===t[d]||OS(e,d,t[d],n[d],r)}function YB(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||$ke.test(t)?n:n+"px"}function OS(e,t,n,r,l){var d;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||YB(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||YB(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")d=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+d]=n,n?r||e.addEventListener(t,d?qB:GB,d):e.removeEventListener(t,d?qB:GB,d);else if(t!=="dangerouslySetInnerHTML"){if(l)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t.indexOf("-")==-1?e.removeAttribute(t):e.setAttribute(t,n))}}function GB(e){iv=!0;try{return this.l[e.type+!1](Er.event?Er.event(e):e)}finally{iv=!1}}function qB(e){iv=!0;try{return this.l[e.type+!0](Er.event?Er.event(e):e)}finally{iv=!1}}function Pl(e,t){this.props=e,this.context=t}function fx(e,t){if(t==null)return e.__?fx(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?fx(e):null}function oG(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return oG(e)}}function Vke(e){iv?setTimeout(e):eG(e)}function E5(e){(!e.__d&&(e.__d=!0)&&Vg.push(e)&&!LS.__r++||WB!==Er.debounceRendering)&&((WB=Er.debounceRendering)||Vke)(LS)}function LS(){var e,t,n,r,l,d,f,y;for(Vg.sort(function(a,E){return a.__v.__b-E.__v.__b});e=Vg.shift();)e.__d&&(t=Vg.length,r=void 0,l=void 0,f=(d=(n=e).__v).__e,(y=n.__P)&&(r=[],(l=Ip({},d)).__v=d.__v+1,x4(y,d,l,n.__n,y.ownerSVGElement!==void 0,d.__h!=null?[f]:null,r,f??fx(d),d.__h),cG(r,d),d.__e!=f&&oG(d)),Vg.length>t&&Vg.sort(function(a,E){return a.__v.__b-E.__v.__b}));LS.__r=0}function iG(e,t,n,r,l,d,f,y,a,E){var C,M,P,N,F,$,Z,q=r&&r.__k||nG,K=q.length;for(n.__k=[],C=0;C<t.length;C++)if((N=n.__k[C]=(N=t[C])==null||typeof N=="boolean"?null:typeof N=="string"||typeof N=="number"||typeof N=="bigint"?_T(null,N,null,null,N):Array.isArray(N)?_T(Ki,{children:N},null,null,null):N.__b>0?_T(N.type,N.props,N.key,N.ref?N.ref:null,N.__v):N)!=null){if(N.__=n,N.__b=n.__b+1,(P=q[C])===null||P&&N.key==P.key&&N.type===P.type)q[C]=void 0;else for(M=0;M<K;M++){if((P=q[M])&&N.key==P.key&&N.type===P.type){q[M]=void 0;break}P=null}x4(e,N,P=P||PS,l,d,f,y,a,E),F=N.__e,(M=N.ref)&&P.ref!=M&&(Z||(Z=[]),P.ref&&Z.push(P.ref,null,N),Z.push(M,N.__c||F,N)),F!=null?($==null&&($=F),typeof N.type=="function"&&N.__k===P.__k?N.__d=a=aG(N,a,e):a=sG(e,N,P,q,F,a),typeof n.type=="function"&&(n.__d=a)):a&&P.__e==a&&a.parentNode!=e&&(a=fx(P))}for(n.__e=$,C=K;C--;)q[C]!=null&&(typeof n.type=="function"&&q[C].__e!=null&&q[C].__e==n.__d&&(n.__d=lG(r).nextSibling),dG(q[C],q[C]));if(Z)for(C=0;C<Z.length;C++)uG(Z[C],Z[++C],Z[++C])}function aG(e,t,n){for(var r,l=e.__k,d=0;l&&d<l.length;d++)(r=l[d])&&(r.__=e,t=typeof r.type=="function"?aG(r,t,n):sG(n,r,r,l,r.__e,t));return t}function NS(e,t){return t=t||[],e==null||typeof e=="boolean"||(Array.isArray(e)?e.some(function(n){NS(n,t)}):t.push(e)),t}function sG(e,t,n,r,l,d){var f,y,a;if(t.__d!==void 0)f=t.__d,t.__d=void 0;else if(n==null||l!=d||l.parentNode==null)e:if(d==null||d.parentNode!==e)e.appendChild(l),f=null;else{for(y=d,a=0;(y=y.nextSibling)&&a<r.length;a+=1)if(y==l)break e;e.insertBefore(l,d),f=d}return f!==void 0?f:l.nextSibling}function lG(e){var t,n,r;if(e.type==null||typeof e.type=="string")return e.__e;if(e.__k){for(t=e.__k.length-1;t>=0;t--)if((n=e.__k[t])&&(r=lG(n)))return r}return null}function x4(e,t,n,r,l,d,f,y,a){var E,C,M,P,N,F,$,Z,q,K,Q,te,ie,ue,re,me=t.type;if(t.constructor!==void 0)return null;n.__h!=null&&(a=n.__h,y=t.__e=n.__e,t.__h=null,d=[y]),(E=Er.__b)&&E(t);try{e:if(typeof me=="function"){if(Z=t.props,q=(E=me.contextType)&&r[E.__c],K=E?q?q.props.value:E.__:r,n.__c?$=(C=t.__c=n.__c).__=C.__E:("prototype"in me&&me.prototype.render?t.__c=C=new me(Z,K):(t.__c=C=new Pl(Z,K),C.constructor=me,C.render=Wke),q&&q.sub(C),C.props=Z,C.state||(C.state={}),C.context=K,C.__n=r,M=C.__d=!0,C.__h=[],C._sb=[]),C.__s==null&&(C.__s=C.state),me.getDerivedStateFromProps!=null&&(C.__s==C.state&&(C.__s=Ip({},C.__s)),Ip(C.__s,me.getDerivedStateFromProps(Z,C.__s))),P=C.props,N=C.state,C.__v=t,M)me.getDerivedStateFromProps==null&&C.componentWillMount!=null&&C.componentWillMount(),C.componentDidMount!=null&&C.__h.push(C.componentDidMount);else{if(me.getDerivedStateFromProps==null&&Z!==P&&C.componentWillReceiveProps!=null&&C.componentWillReceiveProps(Z,K),!C.__e&&C.shouldComponentUpdate!=null&&C.shouldComponentUpdate(Z,C.__s,K)===!1||t.__v===n.__v){for(t.__v!==n.__v&&(C.props=Z,C.state=C.__s,C.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(ve){ve&&(ve.__=t)}),Q=0;Q<C._sb.length;Q++)C.__h.push(C._sb[Q]);C._sb=[],C.__h.length&&f.push(C);break e}C.componentWillUpdate!=null&&C.componentWillUpdate(Z,C.__s,K),C.componentDidUpdate!=null&&C.__h.push(function(){C.componentDidUpdate(P,N,F)})}if(C.context=K,C.props=Z,C.__P=e,te=Er.__r,ie=0,"prototype"in me&&me.prototype.render){for(C.state=C.__s,C.__d=!1,te&&te(t),E=C.render(C.props,C.state,C.context),ue=0;ue<C._sb.length;ue++)C.__h.push(C._sb[ue]);C._sb=[]}else do C.__d=!1,te&&te(t),E=C.render(C.props,C.state,C.context),C.state=C.__s;while(C.__d&&++ie<25);C.state=C.__s,C.getChildContext!=null&&(r=Ip(Ip({},r),C.getChildContext())),M||C.getSnapshotBeforeUpdate==null||(F=C.getSnapshotBeforeUpdate(P,N)),re=E!=null&&E.type===Ki&&E.key==null?E.props.children:E,iG(e,Array.isArray(re)?re:[re],t,n,r,l,d,f,y,a),C.base=t.__e,t.__h=null,C.__h.length&&f.push(C),$&&(C.__E=C.__=null),C.__e=!1}else d==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Hke(n.__e,t,n,r,l,d,f,a);(E=Er.diffed)&&E(t)}catch(ve){t.__v=null,(a||d!=null)&&(t.__e=y,t.__h=!!a,d[d.indexOf(y)]=null),Er.__e(ve,t,n)}}function cG(e,t){Er.__c&&Er.__c(t,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(r){r.call(n)})}catch(r){Er.__e(r,n.__v)}})}function Hke(e,t,n,r,l,d,f,y){var a,E,C,M=n.props,P=t.props,N=t.type,F=0;if(N==="svg"&&(l=!0),d!=null){for(;F<d.length;F++)if((a=d[F])&&"setAttribute"in a==!!N&&(N?a.localName===N:a.nodeType===3)){e=a,d[F]=null;break}}if(e==null){if(N===null)return document.createTextNode(P);e=l?document.createElementNS("http://www.w3.org/2000/svg",N):document.createElement(N,P.is&&P),d=null,y=!1}if(N===null)M===P||y&&e.data===P||(e.data=P);else{if(d=d&&Ak.call(e.childNodes),E=(M=n.props||PS).dangerouslySetInnerHTML,C=P.dangerouslySetInnerHTML,!y){if(d!=null)for(M={},F=0;F<e.attributes.length;F++)M[e.attributes[F].name]=e.attributes[F].value;(C||E)&&(C&&(E&&C.__html==E.__html||C.__html===e.innerHTML)||(e.innerHTML=C&&C.__html||""))}if(Uke(e,P,M,l,y),C)t.__k=[];else if(F=t.props.children,iG(e,Array.isArray(F)?F:[F],t,n,r,l&&N!=="foreignObject",d,f,d?d[0]:n.__k&&fx(n,0),y),d!=null)for(F=d.length;F--;)d[F]!=null&&rG(d[F]);y||("value"in P&&(F=P.value)!==void 0&&(F!==e.value||N==="progress"&&!F||N==="option"&&F!==M.value)&&OS(e,"value",F,M.value,!1),"checked"in P&&(F=P.checked)!==void 0&&F!==e.checked&&OS(e,"checked",F,M.checked,!1))}return e}function uG(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){Er.__e(r,n)}}function dG(e,t,n){var r,l;if(Er.unmount&&Er.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||uG(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(d){Er.__e(d,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(l=0;l<r.length;l++)r[l]&&dG(r[l],t,n||typeof e.type!="function");n||e.__e==null||rG(e.__e),e.__=e.__e=e.__d=void 0}function Wke(e,t,n){return this.constructor(e,n)}function px(e,t,n){var r,l,d;Er.__&&Er.__(e,t),l=(r=typeof n=="function")?null:n&&n.__k||t.__k,d=[],x4(t,e=(!r&&n||t).__k=Ot(Ki,null,[e]),l||PS,PS,t.ownerSVGElement!==void 0,!r&&n?[n]:l?null:t.firstChild?Ak.call(t.childNodes):null,d,!r&&n?n:l?l.__e:t.firstChild,r),cG(d,e)}function Yke(e,t){var n={__c:t="__cC"+tG++,__:e,Consumer:function(r,l){return r.children(l)},Provider:function(r){var l,d;return this.getChildContext||(l=[],(d={})[t]=this,this.getChildContext=function(){return d},this.shouldComponentUpdate=function(f){this.props.value!==f.value&&l.some(function(y){y.__e=!0,E5(y)})},this.sub=function(f){l.push(f);var y=f.componentWillUnmount;f.componentWillUnmount=function(){l.splice(l.indexOf(f),1),y&&y.call(f)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}Ak=nG.slice,Er={__e:function(e,t,n,r){for(var l,d,f;t=t.__;)if((l=t.__c)&&!l.__)try{if((d=l.constructor)&&d.getDerivedStateFromError!=null&&(l.setState(d.getDerivedStateFromError(e)),f=l.__d),l.componentDidCatch!=null&&(l.componentDidCatch(e,r||{}),f=l.__d),f)return l.__E=l}catch(y){e=y}throw e}},QY=0,JY=function(e){return e!=null&&e.constructor===void 0},iv=!1,Pl.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ip({},this.state),typeof e=="function"&&(e=e(Ip({},n),this.props)),e&&Ip(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),E5(this))},Pl.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),E5(this))},Pl.prototype.render=Ki,Vg=[],eG=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,LS.__r=0,tG=0;var dd,pM,ZB,hG=[],mM=[],KB=Er.__b,XB=Er.__r,QB=Er.diffed,JB=Er.__c,eF=Er.unmount;function Gke(){for(var e;e=hG.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(xT),e.__H.__h.forEach(T5),e.__H.__h=[]}catch(t){e.__H.__h=[],Er.__e(t,e.__v)}}Er.__b=function(e){dd=null,KB&&KB(e)},Er.__r=function(e){XB&&XB(e);var t=(dd=e.__c).__H;t&&(pM===dd?(t.__h=[],dd.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=mM,n.__N=n.i=void 0})):(t.__h.forEach(xT),t.__h.forEach(T5),t.__h=[])),pM=dd},Er.diffed=function(e){QB&&QB(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(hG.push(t)!==1&&ZB===Er.requestAnimationFrame||((ZB=Er.requestAnimationFrame)||qke)(Gke)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==mM&&(n.__=n.__V),n.i=void 0,n.__V=mM})),pM=dd=null},Er.__c=function(e,t){t.some(function(n){try{n.__h.forEach(xT),n.__h=n.__h.filter(function(r){return!r.__||T5(r)})}catch(r){t.some(function(l){l.__h&&(l.__h=[])}),t=[],Er.__e(r,n.__v)}}),JB&&JB(e,t)},Er.unmount=function(e){eF&&eF(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{xT(r)}catch(l){t=l}}),n.__H=void 0,t&&Er.__e(t,n.__v))};var tF=typeof requestAnimationFrame=="function";function qke(e){var t,n=function(){clearTimeout(r),tF&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);tF&&(t=requestAnimationFrame(n))}function xT(e){var t=dd,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),dd=t}function T5(e){var t=dd;e.__c=e.__(),dd=t}function Zke(e,t){for(var n in t)e[n]=t[n];return e}function nF(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var r in t)if(r!=="__source"&&e[r]!==t[r])return!0;return!1}function rF(e){this.props=e}(rF.prototype=new Pl).isPureReactComponent=!0,rF.prototype.shouldComponentUpdate=function(e,t){return nF(this.props,e)||nF(this.state,t)};var oF=Er.__b;Er.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),oF&&oF(e)};var Kke=Er.__e;Er.__e=function(e,t,n,r){if(e.then){for(var l,d=t;d=d.__;)if((l=d.__c)&&l.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),l.__c(e,t)}Kke(e,t,n,r)};var iF=Er.unmount;function fG(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),e.__c.__H=null),(e=Zke({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(r){return fG(r,t,n)})),e}function pG(e,t,n){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(r){return pG(r,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=n)),e}function gM(){this.__u=0,this.t=null,this.__b=null}function mG(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function NE(){this.u=null,this.o=null}Er.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&e.__h===!0&&(e.type=null),iF&&iF(e)},(gM.prototype=new Pl).__c=function(e,t){var n=t.__c,r=this;r.t==null&&(r.t=[]),r.t.push(n);var l=mG(r.__v),d=!1,f=function(){d||(d=!0,n.__R=null,l?l(y):y())};n.__R=f;var y=function(){if(!--r.__u){if(r.state.__a){var E=r.state.__a;r.__v.__k[0]=pG(E,E.__c.__P,E.__c.__O)}var C;for(r.setState({__a:r.__b=null});C=r.t.pop();)C.forceUpdate()}},a=t.__h===!0;r.__u++||a||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(f,f)},gM.prototype.componentWillUnmount=function(){this.t=[]},gM.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=fG(this.__b,n,r.__O=r.__P)}this.__b=null}var l=t.__a&&Ot(Ki,null,e.fallback);return l&&(l.__h=null),[Ot(Ki,null,t.__a?null:e.children),l]};var aF=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function Xke(e){return this.getChildContext=function(){return e.context},e.children}function Qke(e){var t=this,n=e.i;t.componentWillUnmount=function(){px(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),e.__v?(t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(r){this.childNodes.push(r),t.i.appendChild(r)},insertBefore:function(r,l){this.childNodes.push(r),t.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),t.i.removeChild(r)}}),px(Ot(Xke,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}function Jke(e,t){var n=Ot(Qke,{__v:e,i:t});return n.containerInfo=t,n}(NE.prototype=new Pl).__a=function(e){var t=this,n=mG(t.__v),r=t.o.get(e);return r[0]++,function(l){var d=function(){t.props.revealOrder?(r.push(l),aF(t,e,r)):l()};n?n(d):d()}},NE.prototype.render=function(e){this.u=null,this.o=new Map;var t=NS(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},NE.prototype.componentDidUpdate=NE.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,n){aF(e,n,t)})};var eAe=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,tAe=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,nAe=typeof document<"u",rAe=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(e)};Pl.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(Pl.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var sF=Er.event;function oAe(){}function iAe(){return this.cancelBubble}function aAe(){return this.defaultPrevented}Er.event=function(e){return sF&&(e=sF(e)),e.persist=oAe,e.isPropagationStopped=iAe,e.isDefaultPrevented=aAe,e.nativeEvent=e};var lF={configurable:!0,get:function(){return this.class}},cF=Er.vnode;Er.vnode=function(e){var t=e.type,n=e.props,r=n;if(typeof t=="string"){var l=t.indexOf("-")===-1;for(var d in r={},n){var f=n[d];nAe&&d==="children"&&t==="noscript"||d==="value"&&"defaultValue"in n&&f==null||(d==="defaultValue"&&"value"in n&&n.value==null?d="value":d==="download"&&f===!0?f="":/ondoubleclick/i.test(d)?d="ondblclick":/^onchange(textarea|input)/i.test(d+t)&&!rAe(n.type)?d="oninput":/^onfocus$/i.test(d)?d="onfocusin":/^onblur$/i.test(d)?d="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(d)?d=d.toLowerCase():l&&tAe.test(d)?d=d.replace(/[A-Z0-9]/g,"-$&").toLowerCase():f===null&&(f=void 0),/^oninput$/i.test(d)&&(d=d.toLowerCase(),r[d]&&(d="oninputCapture")),r[d]=f)}t=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=NS(n.children).forEach(function(y){y.props.selected=r.value.indexOf(y.props.value)!=-1})),t=="select"&&r.defaultValue!=null&&(r.value=NS(n.children).forEach(function(y){y.props.selected=r.multiple?r.defaultValue.indexOf(y.props.value)!=-1:r.defaultValue==y.props.value})),e.props=r,n.class!=n.className&&(lF.enumerable="className"in n,n.className!=null&&(r.class=n.className),Object.defineProperty(r,"className",lF))}e.$$typeof=eAe,cF&&cF(e)};var uF=Er.__r;Er.__r=function(e){uF&&uF(e),e.__c};const gG=[],S5=new Map;function yG(e){gG.push(e),S5.forEach(t=>{vG(t,e)})}function sAe(e){e.isConnected&&e.getRootNode&&bG(e.getRootNode())}function bG(e){let t=S5.get(e);if(!t||!t.isConnected){if(t=e.querySelector("style[data-fullcalendar]"),!t){t=document.createElement("style"),t.setAttribute("data-fullcalendar","");const n=cAe();n&&(t.nonce=n);const r=e===document?document.head:e,l=e===document?r.querySelector("script,link[rel=stylesheet],link[as=style],style"):r.firstChild;r.insertBefore(t,l)}S5.set(e,t),lAe(t)}}function lAe(e){for(const t of gG)vG(e,t)}function vG(e,t){const{sheet:n}=e,r=n.cssRules.length;t.split("}").forEach((l,d)=>{l=l.trim(),l&&n.insertRule(l+"}",r+d)})}let yM;function cAe(){return yM===void 0&&(yM=uAe()),yM}function uAe(){const e=document.querySelector('meta[name="csp-nonce"]');if(e&&e.hasAttribute("content"))return e.getAttribute("content");const t=document.querySelector("script[nonce]");return t&&t.nonce||""}typeof document<"u"&&bG(document);var dAe=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';yG(dAe);class w4{constructor(t){this.drainedOption=t,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(t){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),t==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),t))}pause(t=""){let{pauseDepths:n}=this;n[t]=(n[t]||0)+1,this.clearTimeout()}resume(t="",n){let{pauseDepths:r}=this;t in r&&(n?delete r[t]:(r[t]-=1,r[t]<=0&&delete r[t]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function hAe(e){e.parentNode&&e.parentNode.removeChild(e)}function Nh(e,t){if(e.closest)return e.closest(t);if(!document.documentElement.contains(e))return null;do{if(fAe(e,t))return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1);return null}function fAe(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector).call(e,t)}function pAe(e,t){let n=e instanceof HTMLElement?[e]:e,r=[];for(let l=0;l<n.length;l+=1){let d=n[l].querySelectorAll(t);for(let f=0;f<d.length;f+=1)r.push(d[f])}return r}const mAe=/(top|left|right|bottom|width|height)$/i;function gAe(e,t){for(let n in t)_G(e,n,t[n])}function _G(e,t,n){n==null?e.style[t]="":typeof n=="number"&&mAe.test(t)?e.style[t]=`${n}px`:e.style[t]=n}function yAe(e){var t,n;return(n=(t=e.composedPath)===null||t===void 0?void 0:t.call(e)[0])!==null&&n!==void 0?n:e.target}let dF=0;function Mk(){return dF+=1,"fc-dom-"+dF}function bAe(e,t){return n=>{let r=Nh(n.target,e);r&&t.call(r,n,r)}}function xG(e,t,n,r){let l=bAe(n,r);return e.addEventListener(t,l),()=>{e.removeEventListener(t,l)}}function vAe(e,t,n,r){let l;return xG(e,"mouseover",t,(d,f)=>{if(f!==l){l=f,n(d,f);let y=a=>{l=null,r(a,f),f.removeEventListener("mouseleave",y)};f.addEventListener("mouseleave",y)}})}function wG(e){return Object.assign({onClick:e},EG(e))}function EG(e){return{tabIndex:0,onKeyDown(t){(t.key==="Enter"||t.key===" ")&&(e(t),t.preventDefault())}}}let hF=0;function D0(){return hF+=1,String(hF)}function _Ae(e){let t=[],n=[],r,l;for(typeof e=="string"?n=e.split(/\s*,\s*/):typeof e=="function"?n=[e]:Array.isArray(e)&&(n=e),r=0;r<n.length;r+=1)l=n[r],typeof l=="string"?t.push(l.charAt(0)==="-"?{field:l.substring(1),order:-1}:{field:l,order:1}):typeof l=="function"&&t.push({func:l});return t}function xAe(e,t,n){let r,l;for(r=0;r<n.length;r+=1)if(l=wAe(e,t,n[r]),l)return l;return 0}function wAe(e,t,n){return n.func?n.func(e,t):EAe(e[n.field],t[n.field])*(n.order||1)}function EAe(e,t){return!e&&!t?0:t==null?-1:e==null?1:typeof e=="string"||typeof t=="string"?String(e).localeCompare(String(t)):e-t}function bM(e,t){let n=String(e);return"000".substr(0,t-n.length)+n}function E1(e,t,n){return typeof e=="function"?e(...t):typeof e=="string"?t.reduce((r,l,d)=>r.replace("$"+d,l||""),e):n}function vM(e){return e%1===0}function TAe(e){let t=e.querySelector(".fc-scrollgrid-shrink-frame"),n=e.querySelector(".fc-scrollgrid-shrink-cushion");if(!t)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!n)throw new Error("needs fc-scrollgrid-shrink-cushion className");return e.getBoundingClientRect().width-t.getBoundingClientRect().width+n.getBoundingClientRect().width}const SAe=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function jo(e,t){return typeof e=="string"?CAe(e):typeof e=="object"&&e?fF(e):typeof e=="number"?fF({[t||"milliseconds"]:e}):null}function CAe(e){let t=SAe.exec(e);if(t){let n=t[1]?-1:1;return{years:0,months:0,days:n*(t[2]?parseInt(t[2],10):0),milliseconds:n*((t[3]?parseInt(t[3],10):0)*60*60*1e3+(t[4]?parseInt(t[4],10):0)*60*1e3+(t[5]?parseInt(t[5],10):0)*1e3+(t[6]?parseInt(t[6],10):0))}}return null}function fF(e){let t={years:e.years||e.year||0,months:e.months||e.month||0,days:e.days||e.day||0,milliseconds:(e.hours||e.hour||0)*60*60*1e3+(e.minutes||e.minute||0)*60*1e3+(e.seconds||e.second||0)*1e3+(e.milliseconds||e.millisecond||e.ms||0)},n=e.weeks||e.week;return n&&(t.days+=n*7,t.specifiedWeeks=!0),t}function kAe(e,t){return e.years===t.years&&e.months===t.months&&e.days===t.days&&e.milliseconds===t.milliseconds}function AAe(e,t){return{years:e.years-t.years,months:e.months-t.months,days:e.days-t.days,milliseconds:e.milliseconds-t.milliseconds}}function MAe(e){return kb(e)/365}function DAe(e){return kb(e)/30}function kb(e){return mx(e)/864e5}function mx(e){return e.years*(365*864e5)+e.months*(30*864e5)+e.days*864e5+e.milliseconds}function C5(e){let t=e.milliseconds;if(t){if(t%1e3!==0)return{unit:"millisecond",value:t};if(t%(1e3*60)!==0)return{unit:"second",value:t/1e3};if(t%(1e3*60*60)!==0)return{unit:"minute",value:t/(1e3*60)};if(t)return{unit:"hour",value:t/(1e3*60*60)}}return e.days?e.specifiedWeeks&&e.days%7===0?{unit:"week",value:e.days/7}:{unit:"day",value:e.days}:e.months?{unit:"month",value:e.months}:e.years?{unit:"year",value:e.years}:{unit:"millisecond",value:0}}function rm(e,t,n){if(e===t)return!0;let r=e.length,l;if(r!==t.length)return!1;for(l=0;l<r;l+=1)if(!(n?n(e[l],t[l]):e[l]===t[l]))return!1;return!0}const RAe=["sun","mon","tue","wed","thu","fri","sat"];function pF(e,t){let n=Pp(e);return n[2]+=t*7,Ws(n)}function ls(e,t){let n=Pp(e);return n[2]+=t,Ws(n)}function om(e,t){let n=Pp(e);return n[6]+=t,Ws(n)}function IAe(e,t){return Tv(e,t)/7}function Tv(e,t){return(t.valueOf()-e.valueOf())/(1e3*60*60*24)}function PAe(e,t){return(t.valueOf()-e.valueOf())/(1e3*60*60)}function OAe(e,t){return(t.valueOf()-e.valueOf())/(1e3*60)}function LAe(e,t){return(t.valueOf()-e.valueOf())/1e3}function NAe(e,t){let n=ki(e),r=ki(t);return{years:0,months:0,days:Math.round(Tv(n,r)),milliseconds:t.valueOf()-r.valueOf()-(e.valueOf()-n.valueOf())}}function zAe(e,t){let n=zS(e,t);return n!==null&&n%7===0?n/7:null}function zS(e,t){return Op(e)===Op(t)?Math.round(Tv(e,t)):null}function ki(e){return Ws([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()])}function BAe(e){return Ws([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours()])}function FAe(e){return Ws([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes()])}function jAe(e){return Ws([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()])}function $Ae(e,t,n){let r=e.getUTCFullYear(),l=_M(e,r,t,n);if(l<1)return _M(e,r-1,t,n);let d=_M(e,r+1,t,n);return d>=1?Math.min(l,d):l}function _M(e,t,n,r){let l=Ws([t,0,1+UAe(t,n,r)]),d=ki(e),f=Math.round(Tv(l,d));return Math.floor(f/7)+1}function UAe(e,t,n){let r=7+t-n;return-((7+Ws([e,0,r]).getUTCDay()-t)%7)+r-1}function mF(e){return[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]}function gF(e){return new Date(e[0],e[1]||0,e[2]==null?1:e[2],e[3]||0,e[4]||0,e[5]||0)}function Pp(e){return[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()]}function Ws(e){return e.length===1&&(e=e.concat([0])),new Date(Date.UTC(...e))}function TG(e){return!isNaN(e.valueOf())}function Op(e){return e.getUTCHours()*1e3*60*60+e.getUTCMinutes()*1e3*60+e.getUTCSeconds()*1e3+e.getUTCMilliseconds()}function VAe(e,t,n=!1){let r=e.toISOString();return r=r.replace(".000",""),n&&(r=r.replace("T00:00:00Z","")),r.length>10&&(t==null?r=r.replace("Z",""):t!==0&&(r=r.replace("Z",T4(t,!0)))),r}function E4(e){return e.toISOString().replace(/T.*$/,"")}function HAe(e){return e.toISOString().match(/^\d{4}-\d{2}/)[0]}function T4(e,t=!1){let n=e<0?"-":"+",r=Math.abs(e),l=Math.floor(r/60),d=Math.round(r%60);return t?`${n+bM(l,2)}:${bM(d,2)}`:`GMT${n}${l}${d?`:${bM(d,2)}`:""}`}function Ro(e,t,n){let r,l;return function(...d){if(!r)l=e.apply(this,d);else if(!rm(r,d)){n&&n(l);let f=e.apply(this,d);(!t||!t(f,l))&&(l=f)}return r=d,l}}function wT(e,t,n){let r,l;return d=>{if(!r)l=e.call(this,d);else if(!Md(r,d)){n&&n(l);let f=e.call(this,d);(!t||!t(f,l))&&(l=f)}return r=d,l}}const yF={week:3,separator:0,omitZeroMinute:0,meridiem:0,omitCommas:0},BS={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},zE=/\s*([ap])\.?m\.?/i,WAe=/,/g,YAe=/\s+/g,GAe=/\u200e/g,qAe=/UTC|GMT/;class ZAe{constructor(t){let n={},r={},l=0;for(let d in t)d in yF?(r[d]=t[d],l=Math.max(yF[d],l)):(n[d]=t[d],d in BS&&(l=Math.max(BS[d],l)));this.standardDateProps=n,this.extendedSettings=r,this.severity=l,this.buildFormattingFunc=Ro(bF)}format(t,n){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,n)(t)}formatRange(t,n,r,l){let{standardDateProps:d,extendedSettings:f}=this,y=t3e(t.marker,n.marker,r.calendarSystem);if(!y)return this.format(t,r);let a=y;a>1&&(d.year==="numeric"||d.year==="2-digit")&&(d.month==="numeric"||d.month==="2-digit")&&(d.day==="numeric"||d.day==="2-digit")&&(a=1);let E=this.format(t,r),C=this.format(n,r);if(E===C)return E;let M=n3e(d,a),P=bF(M,f,r),N=P(t),F=P(n),$=r3e(E,N,C,F),Z=f.separator||l||r.defaultSeparator||"";return $?$.before+N+Z+F+$.after:E+Z+C}getLargestUnit(){switch(this.severity){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function bF(e,t,n){let r=Object.keys(e).length;return r===1&&e.timeZoneName==="short"?l=>T4(l.timeZoneOffset):r===0&&t.week?l=>e3e(n.computeWeekNumber(l.marker),n.weekText,n.weekTextLong,n.locale,t.week):KAe(e,t,n)}function KAe(e,t,n){e=Object.assign({},e),t=Object.assign({},t),XAe(e,t),e.timeZone="UTC";let r=new Intl.DateTimeFormat(n.locale.codes,e),l;if(t.omitZeroMinute){let d=Object.assign({},e);delete d.minute,l=new Intl.DateTimeFormat(n.locale.codes,d)}return d=>{let{marker:f}=d,y;l&&!f.getUTCMinutes()?y=l:y=r;let a=y.format(f);return QAe(a,d,e,t,n)}}function XAe(e,t){e.timeZoneName&&(e.hour||(e.hour="2-digit"),e.minute||(e.minute="2-digit")),e.timeZoneName==="long"&&(e.timeZoneName="short"),t.omitZeroMinute&&(e.second||e.millisecond)&&delete t.omitZeroMinute}function QAe(e,t,n,r,l){return e=e.replace(GAe,""),n.timeZoneName==="short"&&(e=JAe(e,l.timeZone==="UTC"||t.timeZoneOffset==null?"UTC":T4(t.timeZoneOffset))),r.omitCommas&&(e=e.replace(WAe,"").trim()),r.omitZeroMinute&&(e=e.replace(":00","")),r.meridiem===!1?e=e.replace(zE,"").trim():r.meridiem==="narrow"?e=e.replace(zE,(d,f)=>f.toLocaleLowerCase()):r.meridiem==="short"?e=e.replace(zE,(d,f)=>`${f.toLocaleLowerCase()}m`):r.meridiem==="lowercase"&&(e=e.replace(zE,d=>d.toLocaleLowerCase())),e=e.replace(YAe," "),e=e.trim(),e}function JAe(e,t){let n=!1;return e=e.replace(qAe,()=>(n=!0,t)),n||(e+=` ${t}`),e}function e3e(e,t,n,r,l){let d=[];return l==="long"?d.push(n):(l==="short"||l==="narrow")&&d.push(t),(l==="long"||l==="short")&&d.push(" "),d.push(r.simpleNumberFormat.format(e)),r.options.direction==="rtl"&&d.reverse(),d.join("")}function t3e(e,t,n){return n.getMarkerYear(e)!==n.getMarkerYear(t)?5:n.getMarkerMonth(e)!==n.getMarkerMonth(t)?4:n.getMarkerDay(e)!==n.getMarkerDay(t)?2:Op(e)!==Op(t)?1:0}function n3e(e,t){let n={};for(let r in e)(!(r in BS)||BS[r]<=t)&&(n[r]=e[r]);return n}function r3e(e,t,n,r){let l=0;for(;l<e.length;){let d=e.indexOf(t,l);if(d===-1)break;let f=e.substr(0,d);l=d+t.length;let y=e.substr(l),a=0;for(;a<n.length;){let E=n.indexOf(r,a);if(E===-1)break;let C=n.substr(0,E);a=E+r.length;let M=n.substr(a);if(f===C&&y===M)return{before:f,after:y}}}return null}function vF(e,t){let n=t.markerToArray(e.marker);return{marker:e.marker,timeZoneOffset:e.timeZoneOffset,array:n,year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]}}function FS(e,t,n,r){let l=vF(e,n.calendarSystem),d=t?vF(t,n.calendarSystem):null;return{date:l,start:l,end:d,timeZone:n.timeZone,localeCodes:n.locale.codes,defaultSeparator:r||n.defaultSeparator}}class o3e{constructor(t){this.cmdStr=t}format(t,n,r){return n.cmdFormatter(this.cmdStr,FS(t,null,n,r))}formatRange(t,n,r,l){return r.cmdFormatter(this.cmdStr,FS(t,n,r,l))}}class i3e{constructor(t){this.func=t}format(t,n,r){return this.func(FS(t,null,n,r))}formatRange(t,n,r,l){return this.func(FS(t,n,r,l))}}function ka(e){return typeof e=="object"&&e?new ZAe(e):typeof e=="string"?new o3e(e):typeof e=="function"?new i3e(e):null}const _F={navLinkDayClick:zt,navLinkWeekClick:zt,duration:jo,bootstrapFontAwesome:zt,buttonIcons:zt,customButtons:zt,defaultAllDayEventDuration:jo,defaultTimedEventDuration:jo,nextDayThreshold:jo,scrollTime:jo,scrollTimeReset:Boolean,slotMinTime:jo,slotMaxTime:jo,dayPopoverFormat:ka,slotDuration:jo,snapDuration:jo,headerToolbar:zt,footerToolbar:zt,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:ka,dayHeaderClassNames:zt,dayHeaderContent:zt,dayHeaderDidMount:zt,dayHeaderWillUnmount:zt,dayCellClassNames:zt,dayCellContent:zt,dayCellDidMount:zt,dayCellWillUnmount:zt,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:zt,weekNumbers:Boolean,weekNumberClassNames:zt,weekNumberContent:zt,weekNumberDidMount:zt,weekNumberWillUnmount:zt,editable:Boolean,viewClassNames:zt,viewDidMount:zt,viewWillUnmount:zt,nowIndicator:Boolean,nowIndicatorClassNames:zt,nowIndicatorContent:zt,nowIndicatorDidMount:zt,nowIndicatorWillUnmount:zt,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:zt,locale:zt,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:zt,eventOrder:_Ae,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:zt,contentHeight:zt,direction:String,weekNumberFormat:ka,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:zt,initialDate:zt,now:zt,eventDataTransform:zt,stickyHeaderDates:zt,stickyFooterScrollbar:zt,viewHeight:zt,defaultAllDay:Boolean,eventSourceFailure:zt,eventSourceSuccess:zt,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:zt,eventConstraint:zt,eventAllow:zt,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:zt,eventContent:zt,eventDidMount:zt,eventWillUnmount:zt,selectConstraint:zt,selectOverlap:zt,selectAllow:zt,droppable:Boolean,unselectCancel:String,slotLabelFormat:zt,slotLaneClassNames:zt,slotLaneContent:zt,slotLaneDidMount:zt,slotLaneWillUnmount:zt,slotLabelClassNames:zt,slotLabelContent:zt,slotLabelDidMount:zt,slotLabelWillUnmount:zt,dayMaxEvents:zt,dayMaxEventRows:zt,dayMinWidth:Number,slotLabelInterval:jo,allDayText:String,allDayClassNames:zt,allDayContent:zt,allDayDidMount:zt,allDayWillUnmount:zt,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:ka,rerenderDelay:Number,moreLinkText:zt,moreLinkHint:zt,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:zt,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:jo,hiddenDays:zt,fixedWeekCount:Boolean,validRange:zt,visibleRange:zt,titleFormat:zt,eventInteractive:Boolean,noEventsText:String,viewHint:zt,navLinkHint:zt,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:zt,moreLinkClassNames:zt,moreLinkContent:zt,moreLinkDidMount:zt,moreLinkWillUnmount:zt,monthStartFormat:ka,handleCustomRendering:zt,customRenderingMetaMap:zt,customRenderingReplaces:Boolean},T1={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" – ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"}},xF={datesSet:zt,eventsSet:zt,eventAdd:zt,eventChange:zt,eventRemove:zt,windowResize:zt,eventClick:zt,eventMouseEnter:zt,eventMouseLeave:zt,select:zt,unselect:zt,loading:zt,_unmount:zt,_beforeprint:zt,_afterprint:zt,_noEventDrop:zt,_noEventResize:zt,_resize:zt,_scrollRequest:zt},wF={buttonText:zt,buttonHints:zt,views:zt,plugins:zt,initialEvents:zt,events:zt,eventSources:zt},$g={headerToolbar:Ug,footerToolbar:Ug,buttonText:Ug,buttonHints:Ug,buttonIcons:Ug,dateIncrement:Ug,plugins:BE,events:BE,eventSources:BE,resources:BE};function Ug(e,t){return typeof e=="object"&&typeof t=="object"&&e&&t?Md(e,t):e===t}function BE(e,t){return Array.isArray(e)&&Array.isArray(t)?rm(e,t):e===t}const a3e={type:String,component:zt,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:zt,usesMinMaxTime:Boolean,classNames:zt,content:zt,didMount:zt,willUnmount:zt};function xM(e){return C4(e,$g)}function S4(e,t){let n={},r={};for(let l in t)l in e&&(n[l]=t[l](e[l]));for(let l in e)l in t||(r[l]=e[l]);return{refined:n,extra:r}}function zt(e){return e}const{hasOwnProperty:jS}=Object.prototype;function C4(e,t){let n={};if(t){for(let r in t)if(t[r]===Ug){let l=[];for(let d=e.length-1;d>=0;d-=1){let f=e[d][r];if(typeof f=="object"&&f)l.unshift(f);else if(f!==void 0){n[r]=f;break}}l.length&&(n[r]=C4(l))}}for(let r=e.length-1;r>=0;r-=1){let l=e[r];for(let d in l)d in n||(n[d]=l[d])}return n}function av(e,t){let n={};for(let r in e)t(e[r],r)&&(n[r]=e[r]);return n}function Yx(e,t){let n={};for(let r in e)n[r]=t(e[r],r);return n}function SG(e){let t={};for(let n of e)t[n]=!0;return t}function k4(e){let t=[];for(let n in e)t.push(e[n]);return t}function Md(e,t){if(e===t)return!0;for(let n in e)if(jS.call(e,n)&&!(n in t))return!1;for(let n in t)if(jS.call(t,n)&&e[n]!==t[n])return!1;return!0}const s3e=/^on[A-Z]/;function l3e(e,t){const n=k5(e,t);for(let r of n)if(!s3e.test(r))return!1;return!0}function k5(e,t){let n=[];for(let r in e)jS.call(e,r)&&(r in t||n.push(r));for(let r in t)jS.call(t,r)&&e[r]!==t[r]&&n.push(r);return n}function wM(e,t,n={}){if(e===t)return!0;for(let r in t)if(!(r in e&&c3e(e[r],t[r],n[r])))return!1;for(let r in e)if(!(r in t))return!1;return!0}function c3e(e,t,n){return e===t||n===!0?!0:n?n(e,t):!1}function u3e(e,t=0,n,r=1){let l=[];n==null&&(n=Object.keys(e).length);for(let d=t;d<n;d+=r){let f=e[d];f!==void 0&&l.push(f)}return l}let CG={};function d3e(e,t){CG[e]=t}function h3e(e){return new CG[e]}class f3e{getMarkerYear(t){return t.getUTCFullYear()}getMarkerMonth(t){return t.getUTCMonth()}getMarkerDay(t){return t.getUTCDate()}arrayToMarker(t){return Ws(t)}markerToArray(t){return Pp(t)}}d3e("gregory",f3e);const p3e=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function m3e(e){let t=p3e.exec(e);if(t){let n=new Date(Date.UTC(Number(t[1]),t[3]?Number(t[3])-1:0,Number(t[5]||1),Number(t[7]||0),Number(t[8]||0),Number(t[10]||0),t[12]?+`0.${t[12]}`*1e3:0));if(TG(n)){let r=null;return t[13]&&(r=(t[15]==="-"?-1:1)*(Number(t[16]||0)*60+Number(t[18]||0))),{marker:n,isTimeUnspecified:!t[6],timeZoneOffset:r}}}return null}class g3e{constructor(t){let n=this.timeZone=t.timeZone,r=n!=="local"&&n!=="UTC";t.namedTimeZoneImpl&&r&&(this.namedTimeZoneImpl=new t.namedTimeZoneImpl(n)),this.canComputeOffset=!!(!r||this.namedTimeZoneImpl),this.calendarSystem=h3e(t.calendarSystem),this.locale=t.locale,this.weekDow=t.locale.week.dow,this.weekDoy=t.locale.week.doy,t.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof t.firstDay=="number"&&(this.weekDow=t.firstDay),typeof t.weekNumberCalculation=="function"&&(this.weekNumberFunc=t.weekNumberCalculation),this.weekText=t.weekText!=null?t.weekText:t.locale.options.weekText,this.weekTextLong=(t.weekTextLong!=null?t.weekTextLong:t.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=t.cmdFormatter,this.defaultSeparator=t.defaultSeparator}createMarker(t){let n=this.createMarkerMeta(t);return n===null?null:n.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):Ws(mF(new Date))}createMarkerMeta(t){if(typeof t=="string")return this.parse(t);let n=null;return typeof t=="number"?n=this.timestampToMarker(t):t instanceof Date?(t=t.valueOf(),isNaN(t)||(n=this.timestampToMarker(t))):Array.isArray(t)&&(n=Ws(t)),n===null||!TG(n)?null:{marker:n,isTimeUnspecified:!1,forcedTzo:null}}parse(t){let n=m3e(t);if(n===null)return null;let{marker:r}=n,l=null;return n.timeZoneOffset!==null&&(this.canComputeOffset?r=this.timestampToMarker(r.valueOf()-n.timeZoneOffset*60*1e3):l=n.timeZoneOffset),{marker:r,isTimeUnspecified:n.isTimeUnspecified,forcedTzo:l}}getYear(t){return this.calendarSystem.getMarkerYear(t)}getMonth(t){return this.calendarSystem.getMarkerMonth(t)}getDay(t){return this.calendarSystem.getMarkerDay(t)}add(t,n){let r=this.calendarSystem.markerToArray(t);return r[0]+=n.years,r[1]+=n.months,r[2]+=n.days,r[6]+=n.milliseconds,this.calendarSystem.arrayToMarker(r)}subtract(t,n){let r=this.calendarSystem.markerToArray(t);return r[0]-=n.years,r[1]-=n.months,r[2]-=n.days,r[6]-=n.milliseconds,this.calendarSystem.arrayToMarker(r)}addYears(t,n){let r=this.calendarSystem.markerToArray(t);return r[0]+=n,this.calendarSystem.arrayToMarker(r)}addMonths(t,n){let r=this.calendarSystem.markerToArray(t);return r[1]+=n,this.calendarSystem.arrayToMarker(r)}diffWholeYears(t,n){let{calendarSystem:r}=this;return Op(t)===Op(n)&&r.getMarkerDay(t)===r.getMarkerDay(n)&&r.getMarkerMonth(t)===r.getMarkerMonth(n)?r.getMarkerYear(n)-r.getMarkerYear(t):null}diffWholeMonths(t,n){let{calendarSystem:r}=this;return Op(t)===Op(n)&&r.getMarkerDay(t)===r.getMarkerDay(n)?r.getMarkerMonth(n)-r.getMarkerMonth(t)+(r.getMarkerYear(n)-r.getMarkerYear(t))*12:null}greatestWholeUnit(t,n){let r=this.diffWholeYears(t,n);return r!==null?{unit:"year",value:r}:(r=this.diffWholeMonths(t,n),r!==null?{unit:"month",value:r}:(r=zAe(t,n),r!==null?{unit:"week",value:r}:(r=zS(t,n),r!==null?{unit:"day",value:r}:(r=PAe(t,n),vM(r)?{unit:"hour",value:r}:(r=OAe(t,n),vM(r)?{unit:"minute",value:r}:(r=LAe(t,n),vM(r)?{unit:"second",value:r}:{unit:"millisecond",value:n.valueOf()-t.valueOf()}))))))}countDurationsBetween(t,n,r){let l;return r.years&&(l=this.diffWholeYears(t,n),l!==null)?l/MAe(r):r.months&&(l=this.diffWholeMonths(t,n),l!==null)?l/DAe(r):r.days&&(l=zS(t,n),l!==null)?l/kb(r):(n.valueOf()-t.valueOf())/mx(r)}startOf(t,n){return n==="year"?this.startOfYear(t):n==="month"?this.startOfMonth(t):n==="week"?this.startOfWeek(t):n==="day"?ki(t):n==="hour"?BAe(t):n==="minute"?FAe(t):n==="second"?jAe(t):null}startOfYear(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t)])}startOfMonth(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t),this.calendarSystem.getMarkerMonth(t)])}startOfWeek(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t),this.calendarSystem.getMarkerMonth(t),t.getUTCDate()-(t.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(t){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(t)):$Ae(t,this.weekDow,this.weekDoy)}format(t,n,r={}){return n.format({marker:t,timeZoneOffset:r.forcedTzo!=null?r.forcedTzo:this.offsetForMarker(t)},this)}formatRange(t,n,r,l={}){return l.isEndExclusive&&(n=om(n,-1)),r.formatRange({marker:t,timeZoneOffset:l.forcedStartTzo!=null?l.forcedStartTzo:this.offsetForMarker(t)},{marker:n,timeZoneOffset:l.forcedEndTzo!=null?l.forcedEndTzo:this.offsetForMarker(n)},this,l.defaultSeparator)}formatIso(t,n={}){let r=null;return n.omitTimeZoneOffset||(n.forcedTzo!=null?r=n.forcedTzo:r=this.offsetForMarker(t)),VAe(t,r,n.omitTime)}timestampToMarker(t){return this.timeZone==="local"?Ws(mF(new Date(t))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(t):Ws(this.namedTimeZoneImpl.timestampToArray(t))}offsetForMarker(t){return this.timeZone==="local"?-gF(Pp(t)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Pp(t)):null}toDate(t,n){return this.timeZone==="local"?gF(Pp(t)):this.timeZone==="UTC"?new Date(t.valueOf()):this.namedTimeZoneImpl?new Date(t.valueOf()-this.namedTimeZoneImpl.offsetForArray(Pp(t))*1e3*60):new Date(t.valueOf()-(n||0))}}class Gx{constructor(t){this.iconOverrideOption&&this.setIconOverride(t[this.iconOverrideOption])}setIconOverride(t){let n,r;if(typeof t=="object"&&t){n=Object.assign({},this.iconClasses);for(r in t)n[r]=this.applyIconOverridePrefix(t[r]);this.iconClasses=n}else t===!1&&(this.iconClasses={})}applyIconOverridePrefix(t){let n=this.iconOverridePrefix;return n&&t.indexOf(n)!==0&&(t=n+t),t}getClass(t){return this.classes[t]||""}getIconClass(t,n){let r;return n&&this.rtlIconClasses?r=this.rtlIconClasses[t]||this.iconClasses[t]:r=this.iconClasses[t],r?`${this.baseIconClass} ${r}`:""}getCustomButtonIconClass(t){let n;return this.iconOverrideCustomButtonOption&&(n=t[this.iconOverrideCustomButtonOption],n)?`${this.baseIconClass} ${this.applyIconOverridePrefix(n)}`:""}}Gx.prototype.classes={};Gx.prototype.iconClasses={};Gx.prototype.baseIconClass="";Gx.prototype.iconOverridePrefix="";function $S(e){e();let t=Er.debounceRendering,n=[];function r(l){n.push(l)}for(Er.debounceRendering=r,px(Ot(y3e,{}),document.createElement("div"));n.length;)n.shift()();Er.debounceRendering=t}class y3e extends Pl{render(){return Ot("div",{})}componentDidMount(){this.setState({})}}function kG(e){let t=Yke(e),n=t.Provider;return t.Provider=function(){let r=!this.getChildContext,l=n.apply(this,arguments);if(r){let d=[];this.shouldComponentUpdate=f=>{this.props.value!==f.value&&d.forEach(y=>{y.context=f.value,y.forceUpdate()})},this.sub=f=>{d.push(f);let y=f.componentWillUnmount;f.componentWillUnmount=()=>{d.splice(d.indexOf(f),1),y&&y.call(f)}}}return l},t}class b3e{constructor(t,n,r,l){this.execFunc=t,this.emitter=n,this.scrollTime=r,this.scrollTimeReset=l,this.handleScrollRequest=d=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},d),this.drain()},n.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(t){t&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const R0=kG({});function v3e(e,t,n,r,l,d,f,y,a,E,C,M,P){return{dateEnv:l,options:n,pluginHooks:f,emitter:E,dispatch:y,getCurrentData:a,calendarApi:C,viewSpec:e,viewApi:t,dateProfileGenerator:r,theme:d,isRtl:n.direction==="rtl",addResizeHandler(N){E.on("_resize",N)},removeResizeHandler(N){E.off("_resize",N)},createScrollResponder(N){return new b3e(N,E,jo(n.scrollTime),n.scrollTimeReset)},registerInteractiveComponent:M,unregisterInteractiveComponent:P}}class I0 extends Pl{shouldComponentUpdate(t,n){return this.debug&&console.log(k5(t,this.props),k5(n,this.state)),!wM(this.props,t,this.propEquality)||!wM(this.state,n,this.stateEquality)}safeSetState(t){wM(this.state,Object.assign(Object.assign({},this.state),t),this.stateEquality)||this.setState(t)}}I0.addPropsEquality=_3e;I0.addStateEquality=x3e;I0.contextType=R0;I0.prototype.propEquality={};I0.prototype.stateEquality={};let Di=class extends I0{};Di.contextType=R0;function _3e(e){let t=Object.create(this.prototype.propEquality);Object.assign(t,e),this.prototype.propEquality=t}function x3e(e){let t=Object.create(this.prototype.stateEquality);Object.assign(t,e),this.prototype.stateEquality=t}function nf(e,t){typeof e=="function"?e(t):e&&(e.current=t)}class A4 extends Di{constructor(){super(...arguments),this.id=D0(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=t=>{const{options:n}=this.context,{generatorName:r}=this.props;(!n.customRenderingReplaces||!A5(r,n))&&this.updateElRef(t)},this.updateElRef=t=>{this.props.elRef&&nf(this.props.elRef,t)}}render(){const{props:t,context:n}=this,{options:r}=n,{customGenerator:l,defaultGenerator:d,renderProps:f}=t,y=AG(t,[],this.handleEl);let a=!1,E,C=[],M;if(l!=null){const P=typeof l=="function"?l(f,Ot):l;if(P===!0)a=!0;else{const N=P&&typeof P=="object";N&&"html"in P?y.dangerouslySetInnerHTML={__html:P.html}:N&&"domNodes"in P?C=Array.prototype.slice.call(P.domNodes):(N?JY(P):typeof P!="function")?E=P:M=P}}else a=!A5(t.generatorName,r);return a&&d&&(E=d(f)),this.queuedDomNodes=C,this.currentGeneratorMeta=M,Ot(t.elTag,y,E)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(t){var n;const{props:r,context:l}=this,{handleCustomRendering:d,customRenderingMetaMap:f}=l.options;if(d){const y=(n=this.currentGeneratorMeta)!==null&&n!==void 0?n:f?.[r.generatorName];y&&d(Object.assign(Object.assign({id:this.id,isActive:t,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:y},r),{elClasses:(r.elClasses||[]).filter(w3e)}))}}applyQueueudDomNodes(){const{queuedDomNodes:t,currentDomNodes:n}=this,r=this.base;if(!rm(t,n)){n.forEach(hAe);for(let l of t)r.appendChild(l);this.currentDomNodes=t}}}A4.addPropsEquality({elClasses:rm,elStyle:Md,elAttrs:l3e,renderProps:Md});function A5(e,t){var n;return!!(t.handleCustomRendering&&e&&(!((n=t.customRenderingMetaMap)===null||n===void 0)&&n[e]))}function AG(e,t,n){const r=Object.assign(Object.assign({},e.elAttrs),{ref:n});return(e.elClasses||t)&&(r.className=(e.elClasses||[]).concat(t||[]).concat(r.className||[]).filter(Boolean).join(" ")),e.elStyle&&(r.style=e.elStyle),r}function w3e(e){return!!e}const MG=kG(0);class uf extends Pl{constructor(){super(...arguments),this.InnerContent=E3e.bind(void 0,this),this.handleEl=t=>{this.el=t,this.props.elRef&&(nf(this.props.elRef,t),t&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:t}=this,n=T3e(t.classNameGenerator,t.renderProps);if(t.children){const r=AG(t,n,this.handleEl),l=t.children(this.InnerContent,t.renderProps,r);return t.elTag?Ot(t.elTag,r,l):l}else return Ot(A4,Object.assign(Object.assign({},t),{elRef:this.handleEl,elTag:t.elTag||"div",elClasses:(t.elClasses||[]).concat(n),renderId:this.context}))}componentDidMount(){var t,n;this.el?(n=(t=this.props).didMount)===null||n===void 0||n.call(t,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var t,n;(n=(t=this.props).willUnmount)===null||n===void 0||n.call(t,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}uf.contextType=MG;function E3e(e,t){const n=e.props;return Ot(A4,Object.assign({renderProps:n.renderProps,generatorName:n.generatorName,customGenerator:n.customGenerator,defaultGenerator:n.defaultGenerator,renderId:e.context},t))}function T3e(e,t){const n=typeof e=="function"?e(t):e||[];return typeof n=="string"?[n]:n}class EF extends Di{render(){let{props:t,context:n}=this,{options:r}=n,l={view:n.viewApi};return Ot(uf,Object.assign({},t,{elTag:t.elTag||"div",elClasses:[...DG(t.viewSpec),...t.elClasses||[]],renderProps:l,classNameGenerator:r.viewClassNames,generatorName:void 0,didMount:r.viewDidMount,willUnmount:r.viewWillUnmount}),()=>t.children)}}function DG(e){return[`fc-${e.type}-view`,"fc-view"]}function S3e(e,t){let n=null,r=null;return e.start&&(n=t.createMarker(e.start)),e.end&&(r=t.createMarker(e.end)),!n&&!r||n&&r&&r<n?null:{start:n,end:r}}function TF(e,t){let n=[],{start:r}=t,l,d;for(e.sort(C3e),l=0;l<e.length;l+=1)d=e[l],d.start>r&&n.push({start:r,end:d.start}),d.end>r&&(r=d.end);return r<t.end&&n.push({start:r,end:t.end}),n}function C3e(e,t){return e.start.valueOf()-t.start.valueOf()}function sv(e,t){let{start:n,end:r}=e,l=null;return t.start!==null&&(n===null?n=t.start:n=new Date(Math.max(n.valueOf(),t.start.valueOf()))),t.end!=null&&(r===null?r=t.end:r=new Date(Math.min(r.valueOf(),t.end.valueOf()))),(n===null||r===null||n<r)&&(l={start:n,end:r}),l}function k3e(e,t){return(e.end===null||t.start===null||e.end>t.start)&&(e.start===null||t.end===null||e.start<t.end)}function Yp(e,t){return(e.start===null||t>=e.start)&&(e.end===null||t<e.end)}function A3e(e,t){return t.start!=null&&e<t.start?t.start:t.end!=null&&e>=t.end?new Date(t.end.valueOf()-1):e}function RG(e){let t=Math.floor(Tv(e.start,e.end))||1,n=ki(e.start),r=ls(n,t);return{start:n,end:r}}function IG(e,t=jo(0)){let n=null,r=null;if(e.end){r=ki(e.end);let l=e.end.valueOf()-r.valueOf();l&&l>=mx(t)&&(r=ls(r,1))}return e.start&&(n=ki(e.start),r&&r<=n&&(r=ls(n,1))),{start:n,end:r}}function FE(e,t,n,r){return r==="year"?jo(n.diffWholeYears(e,t),"year"):r==="month"?jo(n.diffWholeMonths(e,t),"month"):NAe(e,t)}function M3e(e,t){switch(t.type){case"CHANGE_DATE":return t.dateMarker;default:return e}}function D3e(e,t){let n=e.initialDate;return n!=null?t.createMarker(n):qx(e.now,t)}function qx(e,t){return typeof e=="function"&&(e=e()),e==null?t.createNowMarker():t.createMarker(e)}class PG{constructor(t){this.props=t,this.nowDate=qx(t.nowInput,t.dateEnv),this.initHiddenDays()}buildPrev(t,n,r){let{dateEnv:l}=this.props,d=l.subtract(l.startOf(n,t.currentRangeUnit),t.dateIncrement);return this.build(d,-1,r)}buildNext(t,n,r){let{dateEnv:l}=this.props,d=l.add(l.startOf(n,t.currentRangeUnit),t.dateIncrement);return this.build(d,1,r)}build(t,n,r=!0){let{props:l}=this,d,f,y,a,E,C;return d=this.buildValidRange(),d=this.trimHiddenDays(d),r&&(t=A3e(t,d)),f=this.buildCurrentRangeInfo(t,n),y=/^(year|month|week|day)$/.test(f.unit),a=this.buildRenderRange(this.trimHiddenDays(f.range),f.unit,y),a=this.trimHiddenDays(a),E=a,l.showNonCurrentDates||(E=sv(E,f.range)),E=this.adjustActiveRange(E),E=sv(E,d),C=k3e(f.range,d),Yp(a,t)||(t=a.start),{currentDate:t,validRange:d,currentRange:f.range,currentRangeUnit:f.unit,isRangeAllDay:y,activeRange:E,renderRange:a,slotMinTime:l.slotMinTime,slotMaxTime:l.slotMaxTime,isValid:C,dateIncrement:this.buildDateIncrement(f.duration)}}buildValidRange(){let t=this.props.validRangeInput,n=typeof t=="function"?t.call(this.props.calendarApi,this.nowDate):t;return this.refineRange(n)||{start:null,end:null}}buildCurrentRangeInfo(t,n){let{props:r}=this,l=null,d=null,f=null,y;return r.duration?(l=r.duration,d=r.durationUnit,f=this.buildRangeFromDuration(t,n,l,d)):(y=this.props.dayCount)?(d="day",f=this.buildRangeFromDayCount(t,n,y)):(f=this.buildCustomVisibleRange(t))?d=r.dateEnv.greatestWholeUnit(f.start,f.end).unit:(l=this.getFallbackDuration(),d=C5(l).unit,f=this.buildRangeFromDuration(t,n,l,d)),{duration:l,unit:d,range:f}}getFallbackDuration(){return jo({day:1})}adjustActiveRange(t){let{dateEnv:n,usesMinMaxTime:r,slotMinTime:l,slotMaxTime:d}=this.props,{start:f,end:y}=t;return r&&(kb(l)<0&&(f=ki(f),f=n.add(f,l)),kb(d)>1&&(y=ki(y),y=ls(y,-1),y=n.add(y,d))),{start:f,end:y}}buildRangeFromDuration(t,n,r,l){let{dateEnv:d,dateAlignment:f}=this.props,y,a,E;if(!f){let{dateIncrement:M}=this.props;M&&mx(M)<mx(r)?f=C5(M).unit:f=l}kb(r)<=1&&this.isHiddenDay(y)&&(y=this.skipHiddenDays(y,n),y=ki(y));function C(){y=d.startOf(t,f),a=d.add(y,r),E={start:y,end:a}}return C(),this.trimHiddenDays(E)||(t=this.skipHiddenDays(t,n),C()),E}buildRangeFromDayCount(t,n,r){let{dateEnv:l,dateAlignment:d}=this.props,f=0,y=t,a;d&&(y=l.startOf(y,d)),y=ki(y),y=this.skipHiddenDays(y,n),a=y;do a=ls(a,1),this.isHiddenDay(a)||(f+=1);while(f<r);return{start:y,end:a}}buildCustomVisibleRange(t){let{props:n}=this,r=n.visibleRangeInput,l=typeof r=="function"?r.call(n.calendarApi,n.dateEnv.toDate(t)):r,d=this.refineRange(l);return d&&(d.start==null||d.end==null)?null:d}buildRenderRange(t,n,r){return t}buildDateIncrement(t){let{dateIncrement:n}=this.props,r;return n||((r=this.props.dateAlignment)?jo(1,r):t||jo({days:1}))}refineRange(t){if(t){let n=S3e(t,this.props.dateEnv);return n&&(n=IG(n)),n}return null}initHiddenDays(){let t=this.props.hiddenDays||[],n=[],r=0,l;for(this.props.weekends===!1&&t.push(0,6),l=0;l<7;l+=1)(n[l]=t.indexOf(l)!==-1)||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=n}trimHiddenDays(t){let{start:n,end:r}=t;return n&&(n=this.skipHiddenDays(n)),r&&(r=this.skipHiddenDays(r,-1,!0)),n==null||r==null||n<r?{start:n,end:r}:null}isHiddenDay(t){return t instanceof Date&&(t=t.getUTCDay()),this.isHiddenDayHash[t]}skipHiddenDays(t,n=1,r=!1){for(;this.isHiddenDayHash[(t.getUTCDay()+(r?n:0)+7)%7];)t=ls(t,n);return t}}function M4(e,t,n,r){return{instanceId:D0(),defId:e,range:t,forcedStartTzo:n??null,forcedEndTzo:r??null}}function R3e(e,t,n,r){for(let l=0;l<r.length;l+=1){let d=r[l].parse(e,n);if(d){let{allDay:f}=e;return f==null&&(f=t,f==null&&(f=d.allDayGuess,f==null&&(f=!1))),{allDay:f,duration:d.duration,typeData:d.typeData,typeId:l}}}return null}function Zx(e,t,n){let{dateEnv:r,pluginHooks:l,options:d}=n,{defs:f,instances:y}=e;y=av(y,a=>!f[a.defId].recurringDef);for(let a in f){let E=f[a];if(E.recurringDef){let{duration:C}=E.recurringDef;C||(C=E.allDay?d.defaultAllDayEventDuration:d.defaultTimedEventDuration);let M=I3e(E,C,t,r,l.recurringTypes);for(let P of M){let N=M4(a,{start:P,end:r.add(P,C)});y[N.instanceId]=N}}}return{defs:f,instances:y}}function I3e(e,t,n,r,l){let f=l[e.recurringDef.typeId].expand(e.recurringDef.typeData,{start:r.subtract(n.start,t),end:n.end},r);return e.allDay&&(f=f.map(ki)),f}const ET={id:String,groupId:String,title:String,url:String,interactive:Boolean},OG={start:zt,end:zt,date:zt,allDay:Boolean},P3e=Object.assign(Object.assign(Object.assign({},ET),OG),{extendedProps:zt});function LG(e,t,n,r,l=D4(n),d,f){let{refined:y,extra:a}=NG(e,n,l),E=L3e(t,n),C=R3e(y,E,n.dateEnv,n.pluginHooks.recurringTypes);if(C){let P=M5(y,a,t?t.sourceId:"",C.allDay,!!C.duration,n,d);return P.recurringDef={typeId:C.typeId,typeData:C.typeData,duration:C.duration},{def:P,instance:null}}let M=O3e(y,E,n,r);if(M){let P=M5(y,a,t?t.sourceId:"",M.allDay,M.hasEnd,n,d),N=M4(P.defId,M.range,M.forcedStartTzo,M.forcedEndTzo);return f&&P.publicId&&f[P.publicId]&&(N.instanceId=f[P.publicId]),{def:P,instance:N}}return null}function NG(e,t,n=D4(t)){return S4(e,n)}function D4(e){return Object.assign(Object.assign(Object.assign({},US),P3e),e.pluginHooks.eventRefiners)}function M5(e,t,n,r,l,d,f){let y={title:e.title||"",groupId:e.groupId||"",publicId:e.id||"",url:e.url||"",recurringDef:null,defId:(f&&e.id?f[e.id]:"")||D0(),sourceId:n,allDay:r,hasEnd:l,interactive:e.interactive,ui:VS(e,d),extendedProps:Object.assign(Object.assign({},e.extendedProps||{}),t)};for(let a of d.pluginHooks.eventDefMemberAdders)Object.assign(y,a(e));return Object.freeze(y.ui.classNames),Object.freeze(y.extendedProps),y}function O3e(e,t,n,r){let{allDay:l}=e,d,f=null,y=!1,a,E=null,C=e.start!=null?e.start:e.date;if(d=n.dateEnv.createMarkerMeta(C),d)f=d.marker;else if(!r)return null;return e.end!=null&&(a=n.dateEnv.createMarkerMeta(e.end)),l==null&&(t!=null?l=t:l=(!d||d.isTimeUnspecified)&&(!a||a.isTimeUnspecified)),l&&f&&(f=ki(f)),a&&(E=a.marker,l&&(E=ki(E)),f&&E<=f&&(E=null)),E?y=!0:r||(y=n.options.forceEventDuration||!1,E=n.dateEnv.add(f,l?n.options.defaultAllDayEventDuration:n.options.defaultTimedEventDuration)),{allDay:l,hasEnd:y,range:{start:f,end:E},forcedStartTzo:d?d.forcedTzo:null,forcedEndTzo:a?a.forcedTzo:null}}function L3e(e,t){let n=null;return e&&(n=e.defaultAllDay),n==null&&(n=t.options.defaultAllDay),n}function gx(e,t,n,r,l,d){let f=x0(),y=D4(n);for(let a of e){let E=LG(a,t,n,r,y,l,d);E&&D5(E,f)}return f}function D5(e,t=x0()){return t.defs[e.def.defId]=e.def,e.instance&&(t.instances[e.instance.instanceId]=e.instance),t}function N3e(e,t){let n=e.instances[t];if(n){let r=e.defs[n.defId],l=I4(e,d=>z3e(r,d));return l.defs[r.defId]=r,l.instances[n.instanceId]=n,l}return x0()}function z3e(e,t){return!!(e.groupId&&e.groupId===t.groupId)}function x0(){return{defs:{},instances:{}}}function R4(e,t){return{defs:Object.assign(Object.assign({},e.defs),t.defs),instances:Object.assign(Object.assign({},e.instances),t.instances)}}function I4(e,t){let n=av(e.defs,t),r=av(e.instances,l=>n[l.defId]);return{defs:n,instances:r}}function B3e(e,t){let{defs:n,instances:r}=e,l={},d={};for(let f in n)t.defs[f]||(l[f]=n[f]);for(let f in r)!t.instances[f]&&l[r[f].defId]&&(d[f]=r[f]);return{defs:l,instances:d}}function F3e(e,t){return Array.isArray(e)?gx(e,null,t,!0):typeof e=="object"&&e?gx([e],null,t,!0):e!=null?String(e):null}function SF(e){return Array.isArray(e)?e:typeof e=="string"?e.split(/\s+/):[]}const US={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:zt,overlap:zt,allow:zt,className:SF,classNames:SF,color:String,backgroundColor:String,borderColor:String,textColor:String},j3e={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function VS(e,t){let n=F3e(e.constraint,t);return{display:e.display||null,startEditable:e.startEditable!=null?e.startEditable:e.editable,durationEditable:e.durationEditable!=null?e.durationEditable:e.editable,constraints:n!=null?[n]:[],overlap:e.overlap!=null?e.overlap:null,allows:e.allow!=null?[e.allow]:[],backgroundColor:e.backgroundColor||e.color||"",borderColor:e.borderColor||e.color||"",textColor:e.textColor||"",classNames:(e.className||[]).concat(e.classNames||[])}}function $3e(e){return e.reduce(U3e,j3e)}function U3e(e,t){return{display:t.display!=null?t.display:e.display,startEditable:t.startEditable!=null?t.startEditable:e.startEditable,durationEditable:t.durationEditable!=null?t.durationEditable:e.durationEditable,constraints:e.constraints.concat(t.constraints),overlap:typeof t.overlap=="boolean"?t.overlap:e.overlap,allows:e.allows.concat(t.allows),backgroundColor:t.backgroundColor||e.backgroundColor,borderColor:t.borderColor||e.borderColor,textColor:t.textColor||e.textColor,classNames:e.classNames.concat(t.classNames)}}const V3e={id:String,defaultAllDay:Boolean,url:String,format:String,events:zt,eventDataTransform:zt,success:zt,failure:zt};function zG(e,t,n=BG(t)){let r;if(typeof e=="string"?r={url:e}:typeof e=="function"||Array.isArray(e)?r={events:e}:typeof e=="object"&&e&&(r=e),r){let{refined:l,extra:d}=S4(r,n),f=H3e(l,t);if(f)return{_raw:e,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:l.defaultAllDay,eventDataTransform:l.eventDataTransform,success:l.success,failure:l.failure,publicId:l.id||"",sourceId:D0(),sourceDefId:f.sourceDefId,meta:f.meta,ui:VS(l,t),extendedProps:d}}return null}function BG(e){return Object.assign(Object.assign(Object.assign({},US),V3e),e.pluginHooks.eventSourceRefiners)}function H3e(e,t){let n=t.pluginHooks.eventSourceDefs;for(let r=n.length-1;r>=0;r-=1){let d=n[r].parseMeta(e);if(d)return{sourceDefId:r,meta:d}}return null}function W3e(e,t,n,r,l){switch(t.type){case"RECEIVE_EVENTS":return Y3e(e,n[t.sourceId],t.fetchId,t.fetchRange,t.rawEvents,l);case"RESET_RAW_EVENTS":return G3e(e,n[t.sourceId],t.rawEvents,r.activeRange,l);case"ADD_EVENTS":return q3e(e,t.eventStore,r?r.activeRange:null,l);case"RESET_EVENTS":return t.eventStore;case"MERGE_EVENTS":return R4(e,t.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?Zx(e,r.activeRange,l):e;case"REMOVE_EVENTS":return B3e(e,t.eventStore);case"REMOVE_EVENT_SOURCE":return jG(e,t.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return I4(e,d=>!d.sourceId);case"REMOVE_ALL_EVENTS":return x0();default:return e}}function Y3e(e,t,n,r,l,d){if(t&&n===t.latestFetchId){let f=gx(FG(l,t,d),t,d);return r&&(f=Zx(f,r,d)),R4(jG(e,t.sourceId),f)}return e}function G3e(e,t,n,r,l){const{defIdMap:d,instanceIdMap:f}=Z3e(e);let y=gx(FG(n,t,l),t,l,!1,d,f);return Zx(y,r,l)}function FG(e,t,n){let r=n.options.eventDataTransform,l=t?t.eventDataTransform:null;return l&&(e=CF(e,l)),r&&(e=CF(e,r)),e}function CF(e,t){let n;if(!t)n=e;else{n=[];for(let r of e){let l=t(r);l?n.push(l):l==null&&n.push(r)}}return n}function q3e(e,t,n,r){return n&&(t=Zx(t,n,r)),R4(e,t)}function kF(e,t,n){let{defs:r}=e,l=Yx(e.instances,d=>r[d.defId].allDay?d:Object.assign(Object.assign({},d),{range:{start:n.createMarker(t.toDate(d.range.start,d.forcedStartTzo)),end:n.createMarker(t.toDate(d.range.end,d.forcedEndTzo))},forcedStartTzo:n.canComputeOffset?null:d.forcedStartTzo,forcedEndTzo:n.canComputeOffset?null:d.forcedEndTzo}));return{defs:r,instances:l}}function jG(e,t){return I4(e,n=>n.sourceId!==t)}function Z3e(e){const{defs:t,instances:n}=e,r={},l={};for(let d in t){const f=t[d],{publicId:y}=f;y&&(r[y]=d)}for(let d in n){const f=n[d],y=t[f.defId],{publicId:a}=y;a&&(l[a]=d)}return{defIdMap:r,instanceIdMap:l}}class K3e{constructor(){this.handlers={},this.thisContext=null}setThisContext(t){this.thisContext=t}setOptions(t){this.options=t}on(t,n){X3e(this.handlers,t,n)}off(t,n){Q3e(this.handlers,t,n)}trigger(t,...n){let r=this.handlers[t]||[],l=this.options&&this.options[t],d=[].concat(l||[],r);for(let f of d)f.apply(this.thisContext,n)}hasHandlers(t){return!!(this.handlers[t]&&this.handlers[t].length||this.options&&this.options[t])}}function X3e(e,t,n){(e[t]||(e[t]=[])).push(n)}function Q3e(e,t,n){n?e[t]&&(e[t]=e[t].filter(r=>r!==n)):delete e[t]}const J3e={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function eMe(e,t){return gx(tMe(e),null,t)}function tMe(e){let t;return e===!0?t=[{}]:Array.isArray(e)?t=e.filter(n=>n.daysOfWeek):typeof e=="object"&&e?t=[e]:t=[],t=t.map(n=>Object.assign(Object.assign({},J3e),n)),t}function nMe(e,t,n){n.emitter.trigger("select",Object.assign(Object.assign({},oMe(e,n)),{jsEvent:t?t.origEvent:null,view:n.viewApi||n.calendarApi.view}))}function rMe(e,t){t.emitter.trigger("unselect",{jsEvent:e?e.origEvent:null,view:t.viewApi||t.calendarApi.view})}function oMe(e,t){let n={};for(let r of t.pluginHooks.dateSpanTransforms)Object.assign(n,r(e,t));return Object.assign(n,bMe(e,t.dateEnv)),n}function AF(e,t,n){let{dateEnv:r,options:l}=n,d=t;return e?(d=ki(d),d=r.add(d,l.defaultAllDayEventDuration)):d=r.add(d,l.defaultTimedEventDuration),d}function iMe(e,t,n,r){let l=UG(e.defs,t),d=x0();for(let f in e.defs){let y=e.defs[f];d.defs[f]=aMe(y,l[f],n,r)}for(let f in e.instances){let y=e.instances[f],a=d.defs[y.defId];d.instances[f]=sMe(y,a,l[y.defId],n,r)}return d}function aMe(e,t,n,r){let l=n.standardProps||{};l.hasEnd==null&&t.durationEditable&&(n.startDelta||n.endDelta)&&(l.hasEnd=!0);let d=Object.assign(Object.assign(Object.assign({},e),l),{ui:Object.assign(Object.assign({},e.ui),l.ui)});n.extendedProps&&(d.extendedProps=Object.assign(Object.assign({},d.extendedProps),n.extendedProps));for(let f of r.pluginHooks.eventDefMutationAppliers)f(d,n,r);return!d.hasEnd&&r.options.forceEventDuration&&(d.hasEnd=!0),d}function sMe(e,t,n,r,l){let{dateEnv:d}=l,f=r.standardProps&&r.standardProps.allDay===!0,y=r.standardProps&&r.standardProps.hasEnd===!1,a=Object.assign({},e);return f&&(a.range=RG(a.range)),r.datesDelta&&n.startEditable&&(a.range={start:d.add(a.range.start,r.datesDelta),end:d.add(a.range.end,r.datesDelta)}),r.startDelta&&n.durationEditable&&(a.range={start:d.add(a.range.start,r.startDelta),end:a.range.end}),r.endDelta&&n.durationEditable&&(a.range={start:a.range.start,end:d.add(a.range.end,r.endDelta)}),y&&(a.range={start:a.range.start,end:AF(t.allDay,a.range.start,l)}),t.allDay&&(a.range={start:ki(a.range.start),end:ki(a.range.end)}),a.range.end<a.range.start&&(a.range.end=AF(t.allDay,a.range.start,l)),a}class Wy{constructor(t,n){this.context=t,this.internalEventSource=n}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class gc{constructor(t,n,r){this._context=t,this._def=n,this._instance=r||null}setProp(t,n){if(t in OG)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(t==="id")n=ET[t](n),this.mutate({standardProps:{publicId:n}});else if(t in ET)n=ET[t](n),this.mutate({standardProps:{[t]:n}});else if(t in US){let r=US[t](n);t==="color"?r={backgroundColor:n,borderColor:n}:t==="editable"?r={startEditable:n,durationEditable:n}:r={[t]:n},this.mutate({standardProps:{ui:r}})}else console.warn(`Could not set prop '${t}'. Use setExtendedProp instead.`)}setExtendedProp(t,n){this.mutate({extendedProps:{[t]:n}})}setStart(t,n={}){let{dateEnv:r}=this._context,l=r.createMarker(t);if(l&&this._instance){let d=this._instance.range,f=FE(d.start,l,r,n.granularity);n.maintainDuration?this.mutate({datesDelta:f}):this.mutate({startDelta:f})}}setEnd(t,n={}){let{dateEnv:r}=this._context,l;if(!(t!=null&&(l=r.createMarker(t),!l))&&this._instance)if(l){let d=FE(this._instance.range.end,l,r,n.granularity);this.mutate({endDelta:d})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(t,n,r={}){let{dateEnv:l}=this._context,d={allDay:r.allDay},f=l.createMarker(t),y;if(f&&!(n!=null&&(y=l.createMarker(n),!y))&&this._instance){let a=this._instance.range;r.allDay===!0&&(a=RG(a));let E=FE(a.start,f,l,r.granularity);if(y){let C=FE(a.end,y,l,r.granularity);kAe(E,C)?this.mutate({datesDelta:E,standardProps:d}):this.mutate({startDelta:E,endDelta:C,standardProps:d})}else d.hasEnd=!1,this.mutate({datesDelta:E,standardProps:d})}}moveStart(t){let n=jo(t);n&&this.mutate({startDelta:n})}moveEnd(t){let n=jo(t);n&&this.mutate({endDelta:n})}moveDates(t){let n=jo(t);n&&this.mutate({datesDelta:n})}setAllDay(t,n={}){let r={allDay:t},{maintainDuration:l}=n;l==null&&(l=this._context.options.allDayMaintainDuration),this._def.allDay!==t&&(r.hasEnd=l),this.mutate({standardProps:r})}formatRange(t){let{dateEnv:n}=this._context,r=this._instance,l=ka(t);return this._def.hasEnd?n.formatRange(r.range.start,r.range.end,l,{forcedStartTzo:r.forcedStartTzo,forcedEndTzo:r.forcedEndTzo}):n.format(r.range.start,l,{forcedTzo:r.forcedStartTzo})}mutate(t){let n=this._instance;if(n){let r=this._def,l=this._context,{eventStore:d}=l.getCurrentData(),f=N3e(d,n.instanceId);f=iMe(f,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},t,l);let a=new gc(l,r,n);this._def=f.defs[r.defId],this._instance=f.instances[n.instanceId],l.dispatch({type:"MERGE_EVENTS",eventStore:f}),l.emitter.trigger("eventChange",{oldEvent:a,event:this,relatedEvents:P4(f,l,n),revert(){l.dispatch({type:"RESET_EVENTS",eventStore:d})}})}}remove(){let t=this._context,n=$G(this);t.dispatch({type:"REMOVE_EVENTS",eventStore:n}),t.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){t.dispatch({type:"MERGE_EVENTS",eventStore:n})}})}get source(){let{sourceId:t}=this._def;return t?new Wy(this._context,this._context.getCurrentData().eventSources[t]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let t=this._instance;return t?this._context.dateEnv.formatIso(t.range.start,{omitTime:this._def.allDay,forcedTzo:t.forcedStartTzo}):""}get endStr(){let t=this._instance;return t&&this._def.hasEnd?this._context.dateEnv.formatIso(t.range.end,{omitTime:this._def.allDay,forcedTzo:t.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(t={}){let n=this._def,{ui:r}=n,{startStr:l,endStr:d}=this,f={allDay:n.allDay};return n.title&&(f.title=n.title),l&&(f.start=l),d&&(f.end=d),n.publicId&&(f.id=n.publicId),n.groupId&&(f.groupId=n.groupId),n.url&&(f.url=n.url),r.display&&r.display!=="auto"&&(f.display=r.display),t.collapseColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?f.color=r.backgroundColor:(r.backgroundColor&&(f.backgroundColor=r.backgroundColor),r.borderColor&&(f.borderColor=r.borderColor)),r.textColor&&(f.textColor=r.textColor),r.classNames.length&&(f.classNames=r.classNames),Object.keys(n.extendedProps).length&&(t.collapseExtendedProps?Object.assign(f,n.extendedProps):f.extendedProps=n.extendedProps),f}toJSON(){return this.toPlainObject()}}function $G(e){let t=e._def,n=e._instance;return{defs:{[t.defId]:t},instances:n?{[n.instanceId]:n}:{}}}function P4(e,t,n){let{defs:r,instances:l}=e,d=[],f=n?n.instanceId:"";for(let y in l){let a=l[y],E=r[a.defId];a.instanceId!==f&&d.push(new gc(t,E,a))}return d}function MF(e,t,n,r){let l={},d={},f={},y=[],a=[],E=UG(e.defs,t);for(let C in e.defs){let M=e.defs[C];E[M.defId].display==="inverse-background"&&(M.groupId?(l[M.groupId]=[],f[M.groupId]||(f[M.groupId]=M)):d[C]=[])}for(let C in e.instances){let M=e.instances[C],P=e.defs[M.defId],N=E[P.defId],F=M.range,$=!P.allDay&&r?IG(F,r):F,Z=sv($,n);Z&&(N.display==="inverse-background"?P.groupId?l[P.groupId].push(Z):d[M.defId].push(Z):N.display!=="none"&&(N.display==="background"?y:a).push({def:P,ui:N,instance:M,range:Z,isStart:$.start&&$.start.valueOf()===Z.start.valueOf(),isEnd:$.end&&$.end.valueOf()===Z.end.valueOf()}))}for(let C in l){let M=l[C],P=TF(M,n);for(let N of P){let F=f[C],$=E[F.defId];y.push({def:F,ui:$,instance:null,range:N,isStart:!1,isEnd:!1})}}for(let C in d){let M=d[C],P=TF(M,n);for(let N of P)y.push({def:e.defs[C],ui:E[C],instance:null,range:N,isStart:!1,isEnd:!1})}return{bg:y,fg:a}}function DF(e,t){e.fcSeg=t}function R5(e){return e.fcSeg||e.parentNode.fcSeg||null}function UG(e,t){return Yx(e,n=>VG(n,t))}function VG(e,t){let n=[];return t[""]&&n.push(t[""]),t[e.defId]&&n.push(t[e.defId]),n.push(e.ui),$3e(n)}function lMe(e,t){let n=e.map(cMe);return n.sort((r,l)=>xAe(r,l,t)),n.map(r=>r._seg)}function cMe(e){let{eventRange:t}=e,n=t.def,r=t.instance?t.instance.range:t.range,l=r.start?r.start.valueOf():0,d=r.end?r.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},n.extendedProps),n),{id:n.publicId,start:l,end:d,duration:d-l,allDay:Number(n.allDay),_seg:e})}function uMe(e,t){let{pluginHooks:n}=t,r=n.isDraggableTransformers,{def:l,ui:d}=e.eventRange,f=d.startEditable;for(let y of r)f=y(f,l,d,t);return f}function dMe(e,t){return e.isStart&&e.eventRange.ui.durationEditable&&t.options.eventResizableFromStart}function hMe(e,t){return e.isEnd&&e.eventRange.ui.durationEditable}function HG(e,t,n,r,l,d,f){let{dateEnv:y,options:a}=n,{displayEventTime:E,displayEventEnd:C}=a,M=e.eventRange.def,P=e.eventRange.instance;E==null&&(E=r!==!1),C==null&&(C=l!==!1);let N=P.range.start,F=P.range.end,$=d||e.start||e.eventRange.range.start,Z=f||e.end||e.eventRange.range.end,q=ki(N).valueOf()===ki($).valueOf(),K=ki(om(F,-1)).valueOf()===ki(om(Z,-1)).valueOf();return E&&!M.allDay&&(q||K)?($=q?N:$,Z=K?F:Z,C&&M.hasEnd?y.formatRange($,Z,t,{forcedStartTzo:d?null:P.forcedStartTzo,forcedEndTzo:f?null:P.forcedEndTzo}):y.format($,t,{forcedTzo:d?null:P.forcedStartTzo})):""}function S1(e,t,n){let r=e.eventRange.range;return{isPast:r.end<=(n||t.start),isFuture:r.start>=(n||t.end),isToday:t&&Yp(t,r.start)}}function fMe(e){let t=["fc-event"];return e.isMirror&&t.push("fc-event-mirror"),e.isDraggable&&t.push("fc-event-draggable"),(e.isStartResizable||e.isEndResizable)&&t.push("fc-event-resizable"),e.isDragging&&t.push("fc-event-dragging"),e.isResizing&&t.push("fc-event-resizing"),e.isSelected&&t.push("fc-event-selected"),e.isStart&&t.push("fc-event-start"),e.isEnd&&t.push("fc-event-end"),e.isPast&&t.push("fc-event-past"),e.isToday&&t.push("fc-event-today"),e.isFuture&&t.push("fc-event-future"),t}function pMe(e){return e.instance?e.instance.instanceId:`${e.def.defId}:${e.range.start.toISOString()}`}function WG(e,t){let{def:n,instance:r}=e.eventRange,{url:l}=n;if(l)return{href:l};let{emitter:d,options:f}=t,{eventInteractive:y}=f;return y==null&&(y=n.interactive,y==null&&(y=!!d.hasHandlers("eventClick"))),y?EG(a=>{d.trigger("eventClick",{el:a.target,event:new gc(t,n,r),jsEvent:a,view:t.viewApi})}):{}}const mMe={start:zt,end:zt,allDay:Boolean};function gMe(e,t,n){let r=yMe(e,t),{range:l}=r;if(!l.start)return null;if(!l.end){if(n==null)return null;l.end=t.add(l.start,n)}return r}function yMe(e,t){let{refined:n,extra:r}=S4(e,mMe),l=n.start?t.createMarkerMeta(n.start):null,d=n.end?t.createMarkerMeta(n.end):null,{allDay:f}=n;return f==null&&(f=l&&l.isTimeUnspecified&&(!d||d.isTimeUnspecified)),Object.assign({range:{start:l?l.marker:null,end:d?d.marker:null},allDay:f},r)}function bMe(e,t){return Object.assign(Object.assign({},GG(e.range,t,e.allDay)),{allDay:e.allDay})}function YG(e,t,n){return Object.assign(Object.assign({},GG(e,t,n)),{timeZone:t.timeZone})}function GG(e,t,n){return{start:t.toDate(e.start),end:t.toDate(e.end),startStr:t.formatIso(e.start,{omitTime:n}),endStr:t.formatIso(e.end,{omitTime:n})}}function vMe(e,t,n){let r=NG({editable:!1},n),l=M5(r.refined,r.extra,"",e.allDay,!0,n);return{def:l,ui:VG(l,t),instance:M4(l.defId,e.range),range:e.range,isStart:!0,isEnd:!0}}function _Me(e,t,n){let r=!1,l=function(y){r||(r=!0,t(y))},d=function(y){r||(r=!0,n(y))},f=e(l,d);f&&typeof f.then=="function"&&f.then(l,d)}class RF extends Error{constructor(t,n){super(t),this.response=n}}function xMe(e,t,n){e=e.toUpperCase();const r={method:e};return e==="GET"?t+=(t.indexOf("?")===-1?"?":"&")+new URLSearchParams(n):(r.body=new URLSearchParams(n),r.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(t,r).then(l=>{if(l.ok)return l.json().then(d=>[d,l],()=>{throw new RF("Failure parsing JSON",l)});throw new RF("Request failed",l)})}let EM;function qG(){return EM==null&&(EM=wMe()),EM}function wMe(){if(typeof document>"u")return!0;let e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.innerHTML="<table><tr><td><div></div></td></tr></table>",e.querySelector("table").style.height="100px",e.querySelector("div").style.height="100%",document.body.appendChild(e);let n=e.querySelector("div").offsetHeight>0;return document.body.removeChild(e),n}class EMe extends Di{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{$S(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{$S(()=>{this.setState({forPrint:!1})})}}render(){let{props:t}=this,{options:n}=t,{forPrint:r}=this.state,l=r||n.height==="auto"||n.contentHeight==="auto",d=!l&&n.height!=null?n.height:"",f=["fc",r?"fc-media-print":"fc-media-screen",`fc-direction-${n.direction}`,t.theme.getClass("root")];return qG()||f.push("fc-liquid-hack"),t.children(f,d,l,r)}componentDidMount(){let{emitter:t}=this.props;t.on("_beforeprint",this.handleBeforePrint),t.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:t}=this.props;t.off("_beforeprint",this.handleBeforePrint),t.off("_afterprint",this.handleAfterPrint)}}class ZG{constructor(t){this.component=t.component,this.isHitComboAllowed=t.isHitComboAllowed||null}destroy(){}}function TMe(e,t){return{component:e,el:t.el,useEventCenter:t.useEventCenter!=null?t.useEventCenter:!0,isHitComboAllowed:t.isHitComboAllowed||null}}const IF={};class SMe{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(t){this.currentDataManager.dispatch(t)}get view(){return this.getCurrentData().viewApi}batchRendering(t){t()}updateSize(){this.trigger("_resize",!0)}setOption(t,n){this.dispatch({type:"SET_OPTION",optionName:t,rawOptionValue:n})}getOption(t){return this.currentDataManager.currentCalendarOptionsInput[t]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(t,n){let{currentDataManager:r}=this;r.currentCalendarOptionsRefiners[t]?r.emitter.on(t,n):console.warn(`Unknown listener name '${t}'`)}off(t,n){this.currentDataManager.emitter.off(t,n)}trigger(t,...n){this.currentDataManager.emitter.trigger(t,...n)}changeView(t,n){this.batchRendering(()=>{if(this.unselect(),n)if(n.start&&n.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:n});else{let{dateEnv:r}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t,dateMarker:r.createMarker(n)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t})})}zoomTo(t,n){let r=this.getCurrentData(),l;n=n||"day",l=r.viewSpecs[n]||this.getUnitViewSpec(n),this.unselect(),l?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:l.type,dateMarker:t}):this.dispatch({type:"CHANGE_DATE",dateMarker:t})}getUnitViewSpec(t){let{viewSpecs:n,toolbarConfig:r}=this.getCurrentData(),l=[].concat(r.header?r.header.viewsWithButtons:[],r.footer?r.footer.viewsWithButtons:[]),d,f;for(let y in n)l.push(y);for(d=0;d<l.length;d+=1)if(f=n[l[d]],f&&f.singleUnit===t)return f;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.addYears(t.currentDate,-1)})}nextYear(){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.addYears(t.currentDate,1)})}today(){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:qx(t.calendarOptions.now,t.dateEnv)})}gotoDate(t){let n=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.createMarker(t)})}incrementDate(t){let n=this.getCurrentData(),r=jo(t);r&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.add(n.currentDate,r)}))}getDate(){let t=this.getCurrentData();return t.dateEnv.toDate(t.currentDate)}formatDate(t,n){let{dateEnv:r}=this.getCurrentData();return r.format(r.createMarker(t),ka(n))}formatRange(t,n,r){let{dateEnv:l}=this.getCurrentData();return l.formatRange(l.createMarker(t),l.createMarker(n),ka(r),r)}formatIso(t,n){let{dateEnv:r}=this.getCurrentData();return r.formatIso(r.createMarker(t),{omitTime:n})}select(t,n){let r;n==null?t.start!=null?r=t:r={start:t,end:null}:r={start:t,end:n};let l=this.getCurrentData(),d=gMe(r,l.dateEnv,jo({days:1}));d&&(this.dispatch({type:"SELECT_DATES",selection:d}),nMe(d,null,l))}unselect(t){let n=this.getCurrentData();n.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),rMe(t,n))}addEvent(t,n){if(t instanceof gc){let f=t._def,y=t._instance;return this.getCurrentData().eventStore.defs[f.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:D5({def:f,instance:y})}),this.triggerEventAdd(t)),t}let r=this.getCurrentData(),l;if(n instanceof Wy)l=n.internalEventSource;else if(typeof n=="boolean")n&&([l]=k4(r.eventSources));else if(n!=null){let f=this.getEventSourceById(n);if(!f)return console.warn(`Could not find an event source with ID "${n}"`),null;l=f.internalEventSource}let d=LG(t,l,r,!1);if(d){let f=new gc(r,d.def,d.def.recurringDef?null:d.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:D5(d)}),this.triggerEventAdd(f),f}return null}triggerEventAdd(t){let{emitter:n}=this.getCurrentData();n.trigger("eventAdd",{event:t,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:$G(t)})}})}getEventById(t){let n=this.getCurrentData(),{defs:r,instances:l}=n.eventStore;t=String(t);for(let d in r){let f=r[d];if(f.publicId===t){if(f.recurringDef)return new gc(n,f,null);for(let y in l){let a=l[y];if(a.defId===f.defId)return new gc(n,f,a)}}}return null}getEvents(){let t=this.getCurrentData();return P4(t.eventStore,t)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let t=this.getCurrentData(),n=t.eventSources,r=[];for(let l in n)r.push(new Wy(t,n[l]));return r}getEventSourceById(t){let n=this.getCurrentData(),r=n.eventSources;t=String(t);for(let l in r)if(r[l].publicId===t)return new Wy(n,r[l]);return null}addEventSource(t){let n=this.getCurrentData();if(t instanceof Wy)return n.eventSources[t.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[t.internalEventSource]}),t;let r=zG(t,n);return r?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[r]}),new Wy(n,r)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(t){let n=jo(t);n&&this.trigger("_scrollRequest",{time:n})}}function CMe(e,t){let n={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function KG(e,t,n,r){return{dow:e.getUTCDay(),isDisabled:!!(r&&!Yp(r.activeRange,e)),isOther:!!(r&&!Yp(r.currentRange,e)),isToday:!!(t&&Yp(t,e)),isPast:!!(n?e<n:t&&e<t.start),isFuture:!!(n?e>n:t&&e>=t.end)}}function O4(e,t){let n=["fc-day",`fc-day-${RAe[e.dow]}`];return e.isDisabled?n.push("fc-day-disabled"):(e.isToday&&(n.push("fc-day-today"),n.push(t.getClass("today"))),e.isPast&&n.push("fc-day-past"),e.isFuture&&n.push("fc-day-future"),e.isOther&&n.push("fc-day-other")),n}const kMe=ka({year:"numeric",month:"long",day:"numeric"}),AMe=ka({week:"long"});function I5(e,t,n="day",r=!0){const{dateEnv:l,options:d,calendarApi:f}=e;let y=l.format(t,n==="week"?AMe:kMe);if(d.navLinks){let a=l.toDate(t);const E=C=>{let M=n==="day"?d.navLinkDayClick:n==="week"?d.navLinkWeekClick:null;typeof M=="function"?M.call(f,l.toDate(t),C):(typeof M=="string"&&(n=M),f.zoomTo(t,n))};return Object.assign({title:E1(d.navLinkHint,[y,a],y),"data-navlink":""},r?wG(E):{onClick:E})}return{"aria-label":y}}let TM;function MMe(){return TM||(TM=DMe()),TM}function DMe(){let e=document.createElement("div");e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",e.style.left="-9999px",document.body.appendChild(e);let t=RMe(e);return document.body.removeChild(e),t}function RMe(e){return{x:e.offsetHeight-e.clientHeight,y:e.offsetWidth-e.clientWidth}}function IMe(e){let t=PMe(e),n=e.getBoundingClientRect();for(let r of t){let l=CMe(n,r.getBoundingClientRect());if(l)n=l;else return null}return n}function PMe(e){let t=[];for(;e instanceof HTMLElement;){let n=window.getComputedStyle(e);if(n.position==="fixed")break;/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&t.push(e),e=e.parentNode}return t}class HS{constructor(t,n,r,l){this.els=n;let d=this.originClientRect=t.getBoundingClientRect();r&&this.buildElHorizontals(d.left),l&&this.buildElVerticals(d.top)}buildElHorizontals(t){let n=[],r=[];for(let l of this.els){let d=l.getBoundingClientRect();n.push(d.left-t),r.push(d.right-t)}this.lefts=n,this.rights=r}buildElVerticals(t){let n=[],r=[];for(let l of this.els){let d=l.getBoundingClientRect();n.push(d.top-t),r.push(d.bottom-t)}this.tops=n,this.bottoms=r}leftToIndex(t){let{lefts:n,rights:r}=this,l=n.length,d;for(d=0;d<l;d+=1)if(t>=n[d]&&t<r[d])return d}topToIndex(t){let{tops:n,bottoms:r}=this,l=n.length,d;for(d=0;d<l;d+=1)if(t>=n[d]&&t<r[d])return d}getWidth(t){return this.rights[t]-this.lefts[t]}getHeight(t){return this.bottoms[t]-this.tops[t]}similarTo(t){return jE(this.tops||[],t.tops||[])&&jE(this.bottoms||[],t.bottoms||[])&&jE(this.lefts||[],t.lefts||[])&&jE(this.rights||[],t.rights||[])}}function jE(e,t){const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(Math.round(e[r])!==Math.round(t[r]))return!1;return!0}class P0 extends Di{constructor(){super(...arguments),this.uid=D0()}prepareHits(){}queryHit(t,n,r,l){return null}isValidSegDownEl(t){return!this.props.eventDrag&&!this.props.eventResize&&!Nh(t,".fc-event-mirror")}isValidDateDownEl(t){return!Nh(t,".fc-event:not(.fc-bg-event)")&&!Nh(t,".fc-more-link")&&!Nh(t,"a[data-navlink]")&&!Nh(t,".fc-popover")}}class OMe{constructor(t=n=>n.thickness||1){this.getEntryThickness=t,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(t){let n=[];for(let r of t)this.insertEntry(r,n);return n}insertEntry(t,n){let r=this.findInsertion(t);this.isInsertionValid(r,t)?this.insertEntryAt(t,r):this.handleInvalidInsertion(r,t,n)}isInsertionValid(t,n){return(this.maxCoord===-1||t.levelCoord+this.getEntryThickness(n)<=this.maxCoord)&&(this.maxStackCnt===-1||t.stackCnt<this.maxStackCnt)}handleInvalidInsertion(t,n,r){if(this.allowReslicing&&t.touchingEntry){const l=Object.assign(Object.assign({},n),{span:XG(n.span,t.touchingEntry.span)});r.push(l),this.splitEntry(n,t.touchingEntry,r)}else r.push(n)}splitEntry(t,n,r){let l=t.span,d=n.span;l.start<d.start&&this.insertEntry({index:t.index,thickness:t.thickness,span:{start:l.start,end:d.start}},r),l.end>d.end&&this.insertEntry({index:t.index,thickness:t.thickness,span:{start:d.end,end:l.end}},r)}insertEntryAt(t,n){let{entriesByLevel:r,levelCoords:l}=this;n.lateral===-1?(SM(l,n.level,n.levelCoord),SM(r,n.level,[t])):SM(r[n.level],n.lateral,t),this.stackCnts[C1(t)]=n.stackCnt}findInsertion(t){let{levelCoords:n,entriesByLevel:r,strictOrder:l,stackCnts:d}=this,f=n.length,y=0,a=-1,E=-1,C=null,M=0;for(let F=0;F<f;F+=1){const $=n[F];if(!l&&$>=y+this.getEntryThickness(t))break;let Z=r[F],q,K=OF(Z,t.span.start,PF),Q=K[0]+K[1];for(;(q=Z[Q])&&q.span.start<t.span.end;){let te=$+this.getEntryThickness(q);te>y&&(y=te,C=q,a=F,E=Q),te===y&&(M=Math.max(M,d[C1(q)]+1)),Q+=1}}let P=0;if(C)for(P=a+1;P<f&&n[P]<y;)P+=1;let N=-1;return P<f&&n[P]===y&&(N=OF(r[P],t.span.end,PF)[0]),{touchingLevel:a,touchingLateral:E,touchingEntry:C,stackCnt:M,levelCoord:y,level:P,lateral:N}}toRects(){let{entriesByLevel:t,levelCoords:n}=this,r=t.length,l=[];for(let d=0;d<r;d+=1){let f=t[d],y=n[d];for(let a of f)l.push(Object.assign(Object.assign({},a),{thickness:this.getEntryThickness(a),levelCoord:y}))}return l}}function PF(e){return e.span.end}function C1(e){return e.index+":"+e.span.start}function XG(e,t){let n=Math.max(e.start,t.start),r=Math.min(e.end,t.end);return n<r?{start:n,end:r}:null}function SM(e,t,n){e.splice(t,0,n)}function OF(e,t,n){let r=0,l=e.length;if(!l||t<n(e[r]))return[0,0];if(t>n(e[l-1]))return[l,0];for(;r<l;){let d=Math.floor(r+(l-r)/2),f=n(e[d]);if(t<f)l=d;else if(t>f)r=d+1;else return[d,1]}return[r,0]}function LMe(e,t){return!e||t>10?ka({weekday:"short"}):t>1?ka({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):ka({weekday:"long"})}const QG="fc-col-header-cell";function JG(e){return e.text}class NMe extends Di{render(){let{dateEnv:t,options:n,theme:r,viewApi:l}=this.context,{props:d}=this,{date:f,dateProfile:y}=d,a=KG(f,d.todayRange,null,y),E=[QG].concat(O4(a,r)),C=t.format(f,d.dayHeaderFormat),M=!a.isDisabled&&d.colCnt>1?I5(this.context,f):{},P=Object.assign(Object.assign(Object.assign({date:t.toDate(f),view:l},d.extraRenderProps),{text:C}),a);return Ot(uf,{elTag:"th",elClasses:E,elAttrs:Object.assign({role:"columnheader",colSpan:d.colSpan,"data-date":a.isDisabled?void 0:E4(f)},d.extraDataAttrs),renderProps:P,generatorName:"dayHeaderContent",customGenerator:n.dayHeaderContent,defaultGenerator:JG,classNameGenerator:n.dayHeaderClassNames,didMount:n.dayHeaderDidMount,willUnmount:n.dayHeaderWillUnmount},N=>Ot("div",{className:"fc-scrollgrid-sync-inner"},!a.isDisabled&&Ot(N,{elTag:"a",elAttrs:M,elClasses:["fc-col-header-cell-cushion",d.isSticky&&"fc-sticky"]})))}}const zMe=ka({weekday:"long"});class BMe extends Di{render(){let{props:t}=this,{dateEnv:n,theme:r,viewApi:l,options:d}=this.context,f=ls(new Date(2592e5),t.dow),y={dow:t.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},a=n.format(f,t.dayHeaderFormat),E=Object.assign(Object.assign(Object.assign(Object.assign({date:f},y),{view:l}),t.extraRenderProps),{text:a});return Ot(uf,{elTag:"th",elClasses:[QG,...O4(y,r),...t.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:t.colSpan},t.extraDataAttrs),renderProps:E,generatorName:"dayHeaderContent",customGenerator:d.dayHeaderContent,defaultGenerator:JG,classNameGenerator:d.dayHeaderClassNames,didMount:d.dayHeaderDidMount,willUnmount:d.dayHeaderWillUnmount},C=>Ot("div",{className:"fc-scrollgrid-sync-inner"},Ot(C,{elTag:"a",elClasses:["fc-col-header-cell-cushion",t.isSticky&&"fc-sticky"],elAttrs:{"aria-label":n.format(f,zMe)}})))}}class L4 extends Pl{constructor(t,n){super(t,n),this.initialNowDate=qx(n.options.now,n.dateEnv),this.initialNowQueriedMs=new Date().valueOf(),this.state=this.computeTiming().currentState}render(){let{props:t,state:n}=this;return t.children(n.nowDate,n.todayRange)}componentDidMount(){this.setTimeout()}componentDidUpdate(t){t.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout()}computeTiming(){let{props:t,context:n}=this,r=om(this.initialNowDate,new Date().valueOf()-this.initialNowQueriedMs),l=n.dateEnv.startOf(r,t.unit),d=n.dateEnv.add(l,jo(1,t.unit)),f=d.valueOf()-r.valueOf();return f=Math.min(1e3*60*60*24,f),{currentState:{nowDate:l,todayRange:LF(l)},nextState:{nowDate:d,todayRange:LF(d)},waitMs:f}}setTimeout(){let{nextState:t,waitMs:n}=this.computeTiming();this.timeoutId=setTimeout(()=>{this.setState(t,()=>{this.setTimeout()})},n)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}L4.contextType=R0;function LF(e){let t=ki(e),n=ls(t,1);return{start:t,end:n}}class FMe extends Di{constructor(){super(...arguments),this.createDayHeaderFormatter=Ro(jMe)}render(){let{context:t}=this,{dates:n,dateProfile:r,datesRepDistinctDays:l,renderIntro:d}=this.props,f=this.createDayHeaderFormatter(t.options.dayHeaderFormat,l,n.length);return Ot(L4,{unit:"day"},(y,a)=>Ot("tr",{role:"row"},d&&d("day"),n.map(E=>l?Ot(NMe,{key:E.toISOString(),date:E,dateProfile:r,todayRange:a,colCnt:n.length,dayHeaderFormat:f}):Ot(BMe,{key:E.getUTCDay(),dow:E.getUTCDay(),dayHeaderFormat:f}))))}}function jMe(e,t,n){return e||LMe(t,n)}class $Me{constructor(t,n){let r=t.start,{end:l}=t,d=[],f=[],y=-1;for(;r<l;)n.isHiddenDay(r)?d.push(y+.5):(y+=1,d.push(y),f.push(r)),r=ls(r,1);this.dates=f,this.indices=d,this.cnt=f.length}sliceRange(t){let n=this.getDateDayIndex(t.start),r=this.getDateDayIndex(ls(t.end,-1)),l=Math.max(0,n),d=Math.min(this.cnt-1,r);return l=Math.ceil(l),d=Math.floor(d),l<=d?{firstIndex:l,lastIndex:d,isStart:n===l,isEnd:r===d}:null}getDateDayIndex(t){let{indices:n}=this,r=Math.floor(Tv(this.dates[0],t));return r<0?n[0]-1:r>=n.length?n[n.length-1]+1:n[r]}}class UMe{constructor(t,n){let{dates:r}=t,l,d,f;if(n){for(d=r[0].getUTCDay(),l=1;l<r.length&&r[l].getUTCDay()!==d;l+=1);f=Math.ceil(r.length/l)}else f=1,l=r.length;this.rowCnt=f,this.colCnt=l,this.daySeries=t,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let t=[];for(let n=0;n<this.rowCnt;n+=1){let r=[];for(let l=0;l<this.colCnt;l+=1)r.push(this.buildCell(n,l));t.push(r)}return t}buildCell(t,n){let r=this.daySeries.dates[t*this.colCnt+n];return{key:r.toISOString(),date:r}}buildHeaderDates(){let t=[];for(let n=0;n<this.colCnt;n+=1)t.push(this.cells[0][n].date);return t}sliceRange(t){let{colCnt:n}=this,r=this.daySeries.sliceRange(t),l=[];if(r){let{firstIndex:d,lastIndex:f}=r,y=d;for(;y<=f;){let a=Math.floor(y/n),E=Math.min((a+1)*n,f+1);l.push({row:a,firstCol:y%n,lastCol:(E-1)%n,isStart:r.isStart&&y===d,isEnd:r.isEnd&&E-1===f}),y=E}}return l}}class VMe{constructor(){this.sliceBusinessHours=Ro(this._sliceBusinessHours),this.sliceDateSelection=Ro(this._sliceDateSpan),this.sliceEventStore=Ro(this._sliceEventStore),this.sliceEventDrag=Ro(this._sliceInteraction),this.sliceEventResize=Ro(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(t,n,r,l,...d){let{eventUiBases:f}=t,y=this.sliceEventStore(t.eventStore,f,n,r,...d);return{dateSelectionSegs:this.sliceDateSelection(t.dateSelection,n,r,f,l,...d),businessHourSegs:this.sliceBusinessHours(t.businessHours,n,r,l,...d),fgEventSegs:y.fg,bgEventSegs:y.bg,eventDrag:this.sliceEventDrag(t.eventDrag,f,n,r,...d),eventResize:this.sliceEventResize(t.eventResize,f,n,r,...d),eventSelection:t.eventSelection}}sliceNowDate(t,n,r,l,...d){return this._sliceDateSpan({range:{start:t,end:om(t,1)},allDay:!1},n,r,{},l,...d)}_sliceBusinessHours(t,n,r,l,...d){return t?this._sliceEventStore(Zx(t,$E(n,!!r),l),{},n,r,...d).bg:[]}_sliceEventStore(t,n,r,l,...d){if(t){let f=MF(t,n,$E(r,!!l),l);return{bg:this.sliceEventRanges(f.bg,d),fg:this.sliceEventRanges(f.fg,d)}}return{bg:[],fg:[]}}_sliceInteraction(t,n,r,l,...d){if(!t)return null;let f=MF(t.mutatedEvents,n,$E(r,!!l),l);return{segs:this.sliceEventRanges(f.fg,d),affectedInstances:t.affectedEvents.instances,isEvent:t.isEvent}}_sliceDateSpan(t,n,r,l,d,...f){if(!t)return[];let y=$E(n,!!r),a=sv(t.range,y);if(a){t=Object.assign(Object.assign({},t),{range:a});let E=vMe(t,l,d),C=this.sliceRange(t.range,...f);for(let M of C)M.eventRange=E;return C}return[]}sliceEventRanges(t,n){let r=[];for(let l of t)r.push(...this.sliceEventRange(l,n));return r}sliceEventRange(t,n){let r=t.range;this.forceDayIfListItem&&t.ui.display==="list-item"&&(r={start:r.start,end:ls(r.start,1)});let l=this.sliceRange(r,...n);for(let d of l)d.eventRange=t,d.isStart=t.isStart&&d.isStart,d.isEnd=t.isEnd&&d.isEnd;return l}}function $E(e,t){let n=e.activeRange;return t?n:{start:om(n.start,e.slotMinTime.milliseconds),end:om(n.end,e.slotMaxTime.milliseconds-864e5)}}const UE=/^(visible|hidden)$/;class HMe extends Di{constructor(){super(...arguments),this.handleEl=t=>{this.el=t,nf(this.props.elRef,t)}}render(){let{props:t}=this,{liquid:n,liquidIsAbsolute:r}=t,l=n&&r,d=["fc-scroller"];return n&&(r?d.push("fc-scroller-liquid-absolute"):d.push("fc-scroller-liquid")),Ot("div",{ref:this.handleEl,className:d.join(" "),style:{overflowX:t.overflowX,overflowY:t.overflowY,left:l&&-(t.overcomeLeft||0)||"",right:l&&-(t.overcomeRight||0)||"",bottom:l&&-(t.overcomeBottom||0)||"",marginLeft:!l&&-(t.overcomeLeft||0)||"",marginRight:!l&&-(t.overcomeRight||0)||"",marginBottom:!l&&-(t.overcomeBottom||0)||"",maxHeight:t.maxHeight||""}},t.children)}needsXScrolling(){if(UE.test(this.props.overflowX))return!1;let{el:t}=this,n=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:r}=t;for(let l=0;l<r.length;l+=1)if(r[l].getBoundingClientRect().width>n)return!0;return!1}needsYScrolling(){if(UE.test(this.props.overflowY))return!1;let{el:t}=this,n=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:r}=t;for(let l=0;l<r.length;l+=1)if(r[l].getBoundingClientRect().height>n)return!0;return!1}getXScrollbarWidth(){return UE.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return UE.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class Qg{constructor(t){this.masterCallback=t,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(n,r)=>{let{depths:l,currentMap:d}=this,f=!1,y=!1;n!==null?(f=r in d,d[r]=n,l[r]=(l[r]||0)+1,y=!0):(l[r]-=1,l[r]||(delete d[r],delete this.callbackMap[r],f=!0)),this.masterCallback&&(f&&this.masterCallback(null,String(r)),y&&this.masterCallback(n,String(r)))}}createRef(t){let n=this.callbackMap[t];return n||(n=this.callbackMap[t]=r=>{this.handleValue(r,String(t))}),n}collect(t,n,r){return u3e(this.currentMap,t,n,r)}getAll(){return k4(this.currentMap)}}function WMe(e){let t=pAe(e,".fc-scrollgrid-shrink"),n=0;for(let r of t)n=Math.max(n,TAe(r));return Math.ceil(n)}function eq(e,t){return e.liquid&&t.liquid}function YMe(e,t){return t.maxHeight!=null||eq(e,t)}function GMe(e,t,n,r){let{expandRows:l}=n;return typeof t.content=="function"?t.content(n):Ot("table",{role:"presentation",className:[t.tableClassName,e.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:n.tableMinWidth,width:n.clientWidth,height:l?n.clientHeight:""}},n.tableColGroupNode,Ot(r?"thead":"tbody",{role:"presentation"},typeof t.rowContent=="function"?t.rowContent(n):t.rowContent))}function qMe(e,t){return rm(e,t,Md)}function ZMe(e,t){let n=[];for(let r of e){let l=r.span||1;for(let d=0;d<l;d+=1)n.push(Ot("col",{style:{width:r.width==="shrink"?KMe(t):r.width||"",minWidth:r.minWidth||""}}))}return Ot("colgroup",{},...n)}function KMe(e){return e??4}function XMe(e){for(let t of e)if(t.width==="shrink")return!0;return!1}function QMe(e,t){let n=["fc-scrollgrid",t.theme.getClass("table")];return e&&n.push("fc-scrollgrid-liquid"),n}function JMe(e,t){let n=["fc-scrollgrid-section",`fc-scrollgrid-section-${e.type}`,e.className];return t&&e.liquid&&e.maxHeight==null&&n.push("fc-scrollgrid-section-liquid"),e.isSticky&&n.push("fc-scrollgrid-section-sticky"),n}function eDe(e){return Ot("div",{className:"fc-scrollgrid-sticky-shim",style:{width:e.clientWidth,minWidth:e.tableMinWidth}})}function NF(e){let{stickyHeaderDates:t}=e;return(t==null||t==="auto")&&(t=e.height==="auto"||e.viewHeight==="auto"),t}function tDe(e){let{stickyFooterScrollbar:t}=e;return(t==null||t==="auto")&&(t=e.height==="auto"||e.viewHeight==="auto"),t}class tq extends Di{constructor(){super(...arguments),this.processCols=Ro(t=>t,qMe),this.renderMicroColGroup=Ro(ZMe),this.scrollerRefs=new Qg,this.scrollerElRefs=new Qg(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:t,state:n,context:r}=this,l=t.sections||[],d=this.processCols(t.cols),f=this.renderMicroColGroup(d,n.shrinkWidth),y=QMe(t.liquid,r);t.collapsibleWidth&&y.push("fc-scrollgrid-collapsible");let a=l.length,E=0,C,M=[],P=[],N=[];for(;E<a&&(C=l[E]).type==="header";)M.push(this.renderSection(C,f,!0)),E+=1;for(;E<a&&(C=l[E]).type==="body";)P.push(this.renderSection(C,f,!1)),E+=1;for(;E<a&&(C=l[E]).type==="footer";)N.push(this.renderSection(C,f,!0)),E+=1;let F=!qG();const $={role:"rowgroup"};return Ot("table",{role:"grid",className:y.join(" "),style:{height:t.height}},!!(!F&&M.length)&&Ot("thead",$,...M),!!(!F&&P.length)&&Ot("tbody",$,...P),!!(!F&&N.length)&&Ot("tfoot",$,...N),F&&Ot("tbody",$,...M,...P,...N))}renderSection(t,n,r){return"outerContent"in t?Ot(Ki,{key:t.key},t.outerContent):Ot("tr",{key:t.key,role:"presentation",className:JMe(t,this.props.liquid).join(" ")},this.renderChunkTd(t,n,t.chunk,r))}renderChunkTd(t,n,r,l){if("outerContent"in r)return r.outerContent;let{props:d}=this,{forceYScrollbars:f,scrollerClientWidths:y,scrollerClientHeights:a}=this.state,E=YMe(d,t),C=eq(d,t),M=d.liquid?f?"scroll":E?"auto":"hidden":"visible",P=t.key,N=GMe(t,r,{tableColGroupNode:n,tableMinWidth:"",clientWidth:!d.collapsibleWidth&&y[P]!==void 0?y[P]:null,clientHeight:a[P]!==void 0?a[P]:null,expandRows:t.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},l);return Ot(l?"th":"td",{ref:r.elRef,role:"presentation"},Ot("div",{className:`fc-scroller-harness${C?" fc-scroller-harness-liquid":""}`},Ot(HMe,{ref:this.scrollerRefs.createRef(P),elRef:this.scrollerElRefs.createRef(P),overflowY:M,overflowX:d.liquid?"hidden":"visible",maxHeight:t.maxHeight,liquid:C,liquidIsAbsolute:!0},N)))}_handleScrollerEl(t,n){let r=nDe(this.props.sections,n);r&&nf(r.chunk.scrollerElRef,t)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return XMe(this.props.cols)?WMe(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let t=MMe(),{scrollerRefs:n,scrollerElRefs:r}=this,l=!1,d={},f={};for(let y in n.currentMap){let a=n.currentMap[y];if(a&&a.needsYScrolling()){l=!0;break}}for(let y of this.props.sections){let a=y.key,E=r.currentMap[a];if(E){let C=E.parentNode;d[a]=Math.floor(C.getBoundingClientRect().width-(l?t.y:0)),f[a]=Math.floor(C.getBoundingClientRect().height)}}return{forceYScrollbars:l,scrollerClientWidths:d,scrollerClientHeights:f}}}tq.addStateEquality({scrollerClientWidths:Md,scrollerClientHeights:Md});function nDe(e,t){for(let n of e)if(n.key===t)return n;return null}class N4 extends Di{constructor(){super(...arguments),this.handleEl=t=>{this.el=t,t&&DF(t,this.props.seg)}}render(){const{props:t,context:n}=this,{options:r}=n,{seg:l}=t,{eventRange:d}=l,{ui:f}=d,y={event:new gc(n,d.def,d.instance),view:n.viewApi,timeText:t.timeText,textColor:f.textColor,backgroundColor:f.backgroundColor,borderColor:f.borderColor,isDraggable:!t.disableDragging&&uMe(l,n),isStartResizable:!t.disableResizing&&dMe(l,n),isEndResizable:!t.disableResizing&&hMe(l),isMirror:!!(t.isDragging||t.isResizing||t.isDateSelecting),isStart:!!l.isStart,isEnd:!!l.isEnd,isPast:!!t.isPast,isFuture:!!t.isFuture,isToday:!!t.isToday,isSelected:!!t.isSelected,isDragging:!!t.isDragging,isResizing:!!t.isResizing};return Ot(uf,Object.assign({},t,{elRef:this.handleEl,elClasses:[...fMe(y),...l.eventRange.ui.classNames,...t.elClasses||[]],renderProps:y,generatorName:"eventContent",customGenerator:r.eventContent,defaultGenerator:t.defaultGenerator,classNameGenerator:r.eventClassNames,didMount:r.eventDidMount,willUnmount:r.eventWillUnmount}))}componentDidUpdate(t){this.el&&this.props.seg!==t.seg&&DF(this.el,this.props.seg)}}class rDe extends Di{render(){let{props:t,context:n}=this,{options:r}=n,{seg:l}=t,{ui:d}=l.eventRange,f=r.eventTimeFormat||t.defaultTimeFormat,y=HG(l,f,n,t.defaultDisplayEventTime,t.defaultDisplayEventEnd);return Ot(N4,Object.assign({},t,{elTag:"a",elStyle:{borderColor:d.borderColor,backgroundColor:d.backgroundColor},elAttrs:WG(l,n),defaultGenerator:oDe,timeText:y}),(a,E)=>Ot(Ki,null,Ot(a,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:E.textColor}}),!!E.isStartResizable&&Ot("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!E.isEndResizable&&Ot("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}function oDe(e){return Ot("div",{className:"fc-event-main-frame"},e.timeText&&Ot("div",{className:"fc-event-time"},e.timeText),Ot("div",{className:"fc-event-title-container"},Ot("div",{className:"fc-event-title fc-sticky"},e.event.title||Ot(Ki,null," "))))}const iDe=ka({day:"numeric"});class nq extends Di{constructor(){super(...arguments),this.refineRenderProps=wT(aDe)}render(){let{props:t,context:n}=this,{options:r}=n,l=this.refineRenderProps({date:t.date,dateProfile:t.dateProfile,todayRange:t.todayRange,isMonthStart:t.isMonthStart||!1,showDayNumber:t.showDayNumber,extraRenderProps:t.extraRenderProps,viewApi:n.viewApi,dateEnv:n.dateEnv,monthStartFormat:r.monthStartFormat});return Ot(uf,Object.assign({},t,{elClasses:[...O4(l,n.theme),...t.elClasses||[]],elAttrs:Object.assign(Object.assign({},t.elAttrs),l.isDisabled?{}:{"data-date":E4(t.date)}),renderProps:l,generatorName:"dayCellContent",customGenerator:r.dayCellContent,defaultGenerator:t.defaultGenerator,classNameGenerator:l.isDisabled?void 0:r.dayCellClassNames,didMount:r.dayCellDidMount,willUnmount:r.dayCellWillUnmount}))}}function rq(e){return!!(e.dayCellContent||A5("dayCellContent",e))}function aDe(e){let{date:t,dateEnv:n,dateProfile:r,isMonthStart:l}=e,d=KG(t,e.todayRange,null,r),f=e.showDayNumber?n.format(t,l?e.monthStartFormat:iDe):"";return Object.assign(Object.assign(Object.assign({date:n.toDate(t),view:e.viewApi},d),{isMonthStart:l,dayNumberText:f}),e.extraRenderProps)}class sDe extends Di{render(){let{props:t}=this,{seg:n}=t;return Ot(N4,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:n.eventRange.ui.backgroundColor},defaultGenerator:lDe,seg:n,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:t.isPast,isFuture:t.isFuture,isToday:t.isToday,disableDragging:!0,disableResizing:!0})}}function lDe(e){let{title:t}=e.event;return t&&Ot("div",{className:"fc-event-title"},e.event.title)}function cDe(e){return Ot("div",{className:`fc-${e}`})}const uDe=e=>Ot(R0.Consumer,null,t=>{let{dateEnv:n,options:r}=t,{date:l}=e,d=r.weekNumberFormat||e.defaultFormat,f=n.computeWeekNumber(l),y=n.format(l,d);return Ot(uf,Object.assign({},e,{renderProps:{num:f,text:y,date:l},generatorName:"weekNumberContent",customGenerator:r.weekNumberContent,defaultGenerator:dDe,classNameGenerator:r.weekNumberClassNames,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount}))});function dDe(e){return e.text}const CM=10;class hDe extends Di{constructor(){super(...arguments),this.state={titleId:Mk()},this.handleRootEl=t=>{this.rootEl=t,this.props.elRef&&nf(this.props.elRef,t)},this.handleDocumentMouseDown=t=>{const n=yAe(t);this.rootEl.contains(n)||this.handleCloseClick()},this.handleDocumentKeyDown=t=>{t.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:t}=this.props;t&&t()}}render(){let{theme:t,options:n}=this.context,{props:r,state:l}=this,d=["fc-popover",t.getClass("popover")].concat(r.extraClassNames||[]);return Jke(Ot("div",Object.assign({},r.extraAttrs,{id:r.id,className:d.join(" "),"aria-labelledby":l.titleId,ref:this.handleRootEl}),Ot("div",{className:"fc-popover-header "+t.getClass("popoverHeader")},Ot("span",{className:"fc-popover-title",id:l.titleId},r.title),Ot("span",{className:"fc-popover-close "+t.getIconClass("close"),title:n.closeHint,onClick:this.handleCloseClick})),Ot("div",{className:"fc-popover-body "+t.getClass("popoverContent")},r.children)),r.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:t}=this.context,{alignmentEl:n,alignGridTop:r}=this.props,{rootEl:l}=this,d=IMe(n);if(d){let f=l.getBoundingClientRect(),y=r?Nh(n,".fc-scrollgrid").getBoundingClientRect().top:d.top,a=t?d.right-f.width:d.left;y=Math.max(y,CM),a=Math.min(a,document.documentElement.clientWidth-CM-f.width),a=Math.max(a,CM);let E=l.offsetParent.getBoundingClientRect();gAe(l,{top:y-E.top,left:a-E.left})}}}class fDe extends P0{constructor(){super(...arguments),this.handleRootEl=t=>{this.rootEl=t,t?this.context.registerInteractiveComponent(this,{el:t,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:t,dateEnv:n}=this.context,{props:r}=this,{startDate:l,todayRange:d,dateProfile:f}=r,y=n.format(l,t.dayPopoverFormat);return Ot(nq,{elRef:this.handleRootEl,date:l,dateProfile:f,todayRange:d},(a,E,C)=>Ot(hDe,{elRef:C.ref,id:r.id,title:y,extraClassNames:["fc-more-popover"].concat(C.className||[]),extraAttrs:C,parentEl:r.parentEl,alignmentEl:r.alignmentEl,alignGridTop:r.alignGridTop,onClose:r.onClose},rq(t)&&Ot(a,{elTag:"div",elClasses:["fc-more-popover-misc"]}),r.children))}queryHit(t,n,r,l){let{rootEl:d,props:f}=this;return t>=0&&t<r&&n>=0&&n<l?{dateProfile:f.dateProfile,dateSpan:Object.assign({allDay:!f.forceTimed,range:{start:f.startDate,end:f.endDate}},f.extraDateSpan),dayEl:d,rect:{left:0,top:0,right:r,bottom:l},layer:1}:null}}class pDe extends Di{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:Mk()},this.handleLinkEl=t=>{this.linkEl=t,this.props.elRef&&nf(this.props.elRef,t)},this.handleClick=t=>{let{props:n,context:r}=this,{moreLinkClick:l}=r.options,d=zF(n).start;function f(y){let{def:a,instance:E,range:C}=y.eventRange;return{event:new gc(r,a,E),start:r.dateEnv.toDate(C.start),end:r.dateEnv.toDate(C.end),isStart:y.isStart,isEnd:y.isEnd}}typeof l=="function"&&(l=l({date:d,allDay:!!n.allDayDate,allSegs:n.allSegs.map(f),hiddenSegs:n.hiddenSegs.map(f),jsEvent:t,view:r.viewApi})),!l||l==="popover"?this.setState({isPopoverOpen:!0}):typeof l=="string"&&r.calendarApi.zoomTo(d,l)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:t,state:n}=this;return Ot(R0.Consumer,null,r=>{let{viewApi:l,options:d,calendarApi:f}=r,{moreLinkText:y}=d,{moreCnt:a}=t,E=zF(t),C=typeof y=="function"?y.call(f,a):`+${a} ${y}`,M=E1(d.moreLinkHint,[a],C),P={num:a,shortText:`+${a}`,text:C,view:l};return Ot(Ki,null,!!t.moreCnt&&Ot(uf,{elTag:t.elTag||"a",elRef:this.handleLinkEl,elClasses:[...t.elClasses||[],"fc-more-link"],elStyle:t.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},t.elAttrs),wG(this.handleClick)),{title:M,"aria-expanded":n.isPopoverOpen,"aria-controls":n.isPopoverOpen?n.popoverId:""}),renderProps:P,generatorName:"moreLinkContent",customGenerator:d.moreLinkContent,defaultGenerator:t.defaultGenerator||mDe,classNameGenerator:d.moreLinkClassNames,didMount:d.moreLinkDidMount,willUnmount:d.moreLinkWillUnmount},t.children),n.isPopoverOpen&&Ot(fDe,{id:n.popoverId,startDate:E.start,endDate:E.end,dateProfile:t.dateProfile,todayRange:t.todayRange,extraDateSpan:t.extraDateSpan,parentEl:this.parentEl,alignmentEl:t.alignmentElRef?t.alignmentElRef.current:this.linkEl,alignGridTop:t.alignGridTop,forceTimed:t.forceTimed,onClose:this.handlePopoverClose},t.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Nh(this.linkEl,".fc-view-harness"))}}function mDe(e){return e.text}function zF(e){if(e.allDayDate)return{start:e.allDayDate,end:ls(e.allDayDate,1)};let{hiddenSegs:t}=e;return{start:gDe(t),end:bDe(t)}}function gDe(e){return e.reduce(yDe).eventRange.range.start}function yDe(e,t){return e.eventRange.range.start<t.eventRange.range.start?e:t}function bDe(e){return e.reduce(vDe).eventRange.range.end}function vDe(e,t){return e.eventRange.range.end>t.eventRange.range.end?e:t}class _De{constructor(){this.handlers=[]}set(t){this.currentValue=t;for(let n of this.handlers)n(t)}subscribe(t){this.handlers.push(t),this.currentValue!==void 0&&t(this.currentValue)}}class xDe extends _De{constructor(){super(...arguments),this.map=new Map}handle(t){const{map:n}=this;let r=!1;t.isActive?(n.set(t.id,t),r=!0):n.has(t.id)&&(n.delete(t.id),r=!0),r&&this.set(n)}}const wDe=[],oq={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},iq=Object.assign(Object.assign({},oq),{buttonHints:{prev:"Previous $0",next:"Next $0",today(e,t){return t==="day"?"Today":`This ${e}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(e){return`Show ${e} more event${e===1?"":"s"}`}});function EDe(e){let t=e.length>0?e[0].code:"en",n=wDe.concat(e),r={en:iq};for(let l of n)r[l.code]=l;return{map:r,defaultCode:t}}function aq(e,t){return typeof e=="object"&&!Array.isArray(e)?sq(e.code,[e.code],e):TDe(e,t)}function TDe(e,t){let n=[].concat(e||[]),r=SDe(n,t)||iq;return sq(e,n,r)}function SDe(e,t){for(let n=0;n<e.length;n+=1){let r=e[n].toLocaleLowerCase().split("-");for(let l=r.length;l>0;l-=1){let d=r.slice(0,l).join("-");if(t[d])return t[d]}}return null}function sq(e,t,n){let r=C4([oq,n],["buttonText"]);delete r.code;let{week:l}=r;return delete r.week,{codeArg:e,codes:t,week:l,simpleNumberFormat:new Intl.NumberFormat(e),options:r}}function O0(e){return{id:D0(),name:e.name,premiumReleaseDate:e.premiumReleaseDate?new Date(e.premiumReleaseDate):void 0,deps:e.deps||[],reducers:e.reducers||[],isLoadingFuncs:e.isLoadingFuncs||[],contextInit:[].concat(e.contextInit||[]),eventRefiners:e.eventRefiners||{},eventDefMemberAdders:e.eventDefMemberAdders||[],eventSourceRefiners:e.eventSourceRefiners||{},isDraggableTransformers:e.isDraggableTransformers||[],eventDragMutationMassagers:e.eventDragMutationMassagers||[],eventDefMutationAppliers:e.eventDefMutationAppliers||[],dateSelectionTransformers:e.dateSelectionTransformers||[],datePointTransforms:e.datePointTransforms||[],dateSpanTransforms:e.dateSpanTransforms||[],views:e.views||{},viewPropsTransformers:e.viewPropsTransformers||[],isPropsValid:e.isPropsValid||null,externalDefTransforms:e.externalDefTransforms||[],viewContainerAppends:e.viewContainerAppends||[],eventDropTransformers:e.eventDropTransformers||[],componentInteractions:e.componentInteractions||[],calendarInteractions:e.calendarInteractions||[],themeClasses:e.themeClasses||{},eventSourceDefs:e.eventSourceDefs||[],cmdFormatter:e.cmdFormatter,recurringTypes:e.recurringTypes||[],namedTimeZonedImpl:e.namedTimeZonedImpl,initialView:e.initialView||"",elementDraggingImpl:e.elementDraggingImpl,optionChangeHandlers:e.optionChangeHandlers||{},scrollGridImpl:e.scrollGridImpl||null,listenerRefiners:e.listenerRefiners||{},optionRefiners:e.optionRefiners||{},propSetHandlers:e.propSetHandlers||{}}}function CDe(e,t){let n={},r={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function l(d){for(let f of d){const y=f.name,a=n[y];a===void 0?(n[y]=f.id,l(f.deps),r=ADe(r,f)):a!==f.id&&console.warn(`Duplicate plugin '${y}'`)}}return e&&l(e),l(t),r}function kDe(){let e=[],t=[],n;return(r,l)=>((!n||!rm(r,e)||!rm(l,t))&&(n=CDe(r,l)),e=r,t=l,n)}function ADe(e,t){return{premiumReleaseDate:MDe(e.premiumReleaseDate,t.premiumReleaseDate),reducers:e.reducers.concat(t.reducers),isLoadingFuncs:e.isLoadingFuncs.concat(t.isLoadingFuncs),contextInit:e.contextInit.concat(t.contextInit),eventRefiners:Object.assign(Object.assign({},e.eventRefiners),t.eventRefiners),eventDefMemberAdders:e.eventDefMemberAdders.concat(t.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},e.eventSourceRefiners),t.eventSourceRefiners),isDraggableTransformers:e.isDraggableTransformers.concat(t.isDraggableTransformers),eventDragMutationMassagers:e.eventDragMutationMassagers.concat(t.eventDragMutationMassagers),eventDefMutationAppliers:e.eventDefMutationAppliers.concat(t.eventDefMutationAppliers),dateSelectionTransformers:e.dateSelectionTransformers.concat(t.dateSelectionTransformers),datePointTransforms:e.datePointTransforms.concat(t.datePointTransforms),dateSpanTransforms:e.dateSpanTransforms.concat(t.dateSpanTransforms),views:Object.assign(Object.assign({},e.views),t.views),viewPropsTransformers:e.viewPropsTransformers.concat(t.viewPropsTransformers),isPropsValid:t.isPropsValid||e.isPropsValid,externalDefTransforms:e.externalDefTransforms.concat(t.externalDefTransforms),viewContainerAppends:e.viewContainerAppends.concat(t.viewContainerAppends),eventDropTransformers:e.eventDropTransformers.concat(t.eventDropTransformers),calendarInteractions:e.calendarInteractions.concat(t.calendarInteractions),componentInteractions:e.componentInteractions.concat(t.componentInteractions),themeClasses:Object.assign(Object.assign({},e.themeClasses),t.themeClasses),eventSourceDefs:e.eventSourceDefs.concat(t.eventSourceDefs),cmdFormatter:t.cmdFormatter||e.cmdFormatter,recurringTypes:e.recurringTypes.concat(t.recurringTypes),namedTimeZonedImpl:t.namedTimeZonedImpl||e.namedTimeZonedImpl,initialView:e.initialView||t.initialView,elementDraggingImpl:e.elementDraggingImpl||t.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},e.optionChangeHandlers),t.optionChangeHandlers),scrollGridImpl:t.scrollGridImpl||e.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},e.listenerRefiners),t.listenerRefiners),optionRefiners:Object.assign(Object.assign({},e.optionRefiners),t.optionRefiners),propSetHandlers:Object.assign(Object.assign({},e.propSetHandlers),t.propSetHandlers)}}function MDe(e,t){return e===void 0?t:t===void 0?e:new Date(Math.max(e.valueOf(),t.valueOf()))}class pm extends Gx{}pm.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};pm.prototype.baseIconClass="fc-icon";pm.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};pm.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};pm.prototype.iconOverrideOption="buttonIcons";pm.prototype.iconOverrideCustomButtonOption="icon";pm.prototype.iconOverridePrefix="fc-icon-";function DDe(e,t){let n={},r;for(r in e)P5(r,n,e,t);for(r in t)P5(r,n,e,t);return n}function P5(e,t,n,r){if(t[e])return t[e];let l=RDe(e,t,n,r);return l&&(t[e]=l),l}function RDe(e,t,n,r){let l=n[e],d=r[e],f=C=>l&&l[C]!==null?l[C]:d&&d[C]!==null?d[C]:null,y=f("component"),a=f("superType"),E=null;if(a){if(a===e)throw new Error("Can't have a custom view type that references itself");E=P5(a,t,n,r)}return!y&&E&&(y=E.component),y?{type:e,component:y,defaults:Object.assign(Object.assign({},E?E.defaults:{}),l?l.rawOptions:{}),overrides:Object.assign(Object.assign({},E?E.overrides:{}),d?d.rawOptions:{})}:null}function BF(e){return Yx(e,IDe)}function IDe(e){let t=typeof e=="function"?{component:e}:e,{component:n}=t;return t.content?n=FF(t):n&&!(n.prototype instanceof Di)&&(n=FF(Object.assign(Object.assign({},t),{content:n}))),{superType:t.type,component:n,rawOptions:t}}function FF(e){return t=>Ot(R0.Consumer,null,n=>Ot(uf,{elTag:"div",elClasses:DG(n.viewSpec),renderProps:Object.assign(Object.assign({},t),{nextDayThreshold:n.options.nextDayThreshold}),generatorName:void 0,customGenerator:e.content,classNameGenerator:e.classNames,didMount:e.didMount,willUnmount:e.willUnmount}))}function PDe(e,t,n,r){let l=BF(e),d=BF(t.views),f=DDe(l,d);return Yx(f,y=>ODe(y,d,t,n,r))}function ODe(e,t,n,r,l){let d=e.overrides.duration||e.defaults.duration||r.duration||n.duration,f=null,y="",a="",E={};if(d&&(f=LDe(d),f)){let P=C5(f);y=P.unit,P.value===1&&(a=y,E=t[y]?t[y].rawOptions:{})}let C=P=>{let N=P.buttonText||{},F=e.defaults.buttonTextKey;return F!=null&&N[F]!=null?N[F]:N[e.type]!=null?N[e.type]:N[a]!=null?N[a]:null},M=P=>{let N=P.buttonHints||{},F=e.defaults.buttonTextKey;return F!=null&&N[F]!=null?N[F]:N[e.type]!=null?N[e.type]:N[a]!=null?N[a]:null};return{type:e.type,component:e.component,duration:f,durationUnit:y,singleUnit:a,optionDefaults:e.defaults,optionOverrides:Object.assign(Object.assign({},E),e.overrides),buttonTextOverride:C(r)||C(n)||e.overrides.buttonText,buttonTextDefault:C(l)||e.defaults.buttonText||C(T1)||e.type,buttonTitleOverride:M(r)||M(n)||e.overrides.buttonHint,buttonTitleDefault:M(l)||e.defaults.buttonHint||M(T1)}}let jF={};function LDe(e){let t=JSON.stringify(e),n=jF[t];return n===void 0&&(n=jo(e),jF[t]=n),n}function NDe(e,t){switch(t.type){case"CHANGE_VIEW_TYPE":e=t.viewType}return e}function zDe(e,t){switch(t.type){case"SET_OPTION":return Object.assign(Object.assign({},e),{[t.optionName]:t.rawOptionValue});default:return e}}function BDe(e,t,n,r){let l;switch(t.type){case"CHANGE_VIEW_TYPE":return r.build(t.dateMarker||n);case"CHANGE_DATE":return r.build(t.dateMarker);case"PREV":if(l=r.buildPrev(e,n),l.isValid)return l;break;case"NEXT":if(l=r.buildNext(e,n),l.isValid)return l;break}return e}function FDe(e,t,n){let r=t?t.activeRange:null;return cq({},YDe(e,n),r,n)}function jDe(e,t,n,r){let l=n?n.activeRange:null;switch(t.type){case"ADD_EVENT_SOURCES":return cq(e,t.sources,l,r);case"REMOVE_EVENT_SOURCE":return UDe(e,t.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?uq(e,l,r):e;case"FETCH_EVENT_SOURCES":return z4(e,t.sourceIds?SG(t.sourceIds):dq(e,r),l,t.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return WDe(e,t.sourceId,t.fetchId,t.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return e}}function $De(e,t,n){let r=t?t.activeRange:null;return z4(e,dq(e,n),r,!0,n)}function lq(e){for(let t in e)if(e[t].isFetching)return!0;return!1}function cq(e,t,n,r){let l={};for(let d of t)l[d.sourceId]=d;return n&&(l=uq(l,n,r)),Object.assign(Object.assign({},e),l)}function UDe(e,t){return av(e,n=>n.sourceId!==t)}function uq(e,t,n){return z4(e,av(e,r=>VDe(r,t,n)),t,!1,n)}function VDe(e,t,n){return hq(e,n)?!n.options.lazyFetching||!e.fetchRange||e.isFetching||t.start<e.fetchRange.start||t.end>e.fetchRange.end:!e.latestFetchId}function z4(e,t,n,r,l){let d={};for(let f in e){let y=e[f];t[f]?d[f]=HDe(y,n,r,l):d[f]=y}return d}function HDe(e,t,n,r){let{options:l,calendarApi:d}=r,f=r.pluginHooks.eventSourceDefs[e.sourceDefId],y=D0();return f.fetch({eventSource:e,range:t,isRefetch:n,context:r},a=>{let{rawEvents:E}=a;l.eventSourceSuccess&&(E=l.eventSourceSuccess.call(d,E,a.response)||E),e.success&&(E=e.success.call(d,E,a.response)||E),r.dispatch({type:"RECEIVE_EVENTS",sourceId:e.sourceId,fetchId:y,fetchRange:t,rawEvents:E})},a=>{let E=!1;l.eventSourceFailure&&(l.eventSourceFailure.call(d,a),E=!0),e.failure&&(e.failure(a),E=!0),E||console.warn(a.message,a),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:e.sourceId,fetchId:y,fetchRange:t,error:a})}),Object.assign(Object.assign({},e),{isFetching:!0,latestFetchId:y})}function WDe(e,t,n,r){let l=e[t];return l&&n===l.latestFetchId?Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},l),{isFetching:!1,fetchRange:r})}):e}function dq(e,t){return av(e,n=>hq(n,t))}function YDe(e,t){let n=BG(t),r=[].concat(e.eventSources||[]),l=[];e.initialEvents&&r.unshift(e.initialEvents),e.events&&r.unshift(e.events);for(let d of r){let f=zG(d,t,n);f&&l.push(f)}return l}function hq(e,t){return!t.pluginHooks.eventSourceDefs[e.sourceDefId].ignoreRange}function GDe(e,t){switch(t.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return t.selection;default:return e}}function qDe(e,t){switch(t.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return t.eventInstanceId;default:return e}}function ZDe(e,t){let n;switch(t.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return n=t.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return e}}function KDe(e,t){let n;switch(t.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return n=t.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return e}}function XDe(e,t,n,r,l){let d=e.headerToolbar?$F(e.headerToolbar,e,t,n,r,l):null,f=e.footerToolbar?$F(e.footerToolbar,e,t,n,r,l):null;return{header:d,footer:f}}function $F(e,t,n,r,l,d){let f={},y=[],a=!1;for(let E in e){let C=e[E],M=QDe(C,t,n,r,l,d);f[E]=M.widgets,y.push(...M.viewsWithButtons),a=a||M.hasTitle}return{sectionWidgets:f,viewsWithButtons:y,hasTitle:a}}function QDe(e,t,n,r,l,d){let f=t.direction==="rtl",y=t.customButtons||{},a=n.buttonText||{},E=t.buttonText||{},C=n.buttonHints||{},M=t.buttonHints||{},P=e?e.split(" "):[],N=[],F=!1;return{widgets:P.map(Z=>Z.split(",").map(q=>{if(q==="title")return F=!0,{buttonName:q};let K,Q,te,ie,ue,re;if(K=y[q])te=me=>{K.click&&K.click.call(me.target,me,me.target)},(ie=r.getCustomButtonIconClass(K))||(ie=r.getIconClass(q,f))||(ue=K.text),re=K.hint||K.text;else if(Q=l[q]){N.push(q),te=()=>{d.changeView(q)},(ue=Q.buttonTextOverride)||(ie=r.getIconClass(q,f))||(ue=Q.buttonTextDefault);let me=Q.buttonTextOverride||Q.buttonTextDefault;re=E1(Q.buttonTitleOverride||Q.buttonTitleDefault||t.viewHint,[me,q],me)}else if(d[q])if(te=()=>{d[q]()},(ue=a[q])||(ie=r.getIconClass(q,f))||(ue=E[q]),q==="prevYear"||q==="nextYear"){let me=q==="prevYear"?"prev":"next";re=E1(C[me]||M[me],[E.year||"year","year"],E[q])}else re=me=>E1(C[q]||M[q],[E[me]||me,me],E[q]);return{buttonName:q,buttonClick:te,buttonIcon:ie,buttonText:ue,buttonHint:re}})),viewsWithButtons:N,hasTitle:F}}class JDe{constructor(t,n,r){this.type=t,this.getCurrentData=n,this.dateEnv=r}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(t){return this.getCurrentData().options[t]}}let e5e={ignoreRange:!0,parseMeta(e){return Array.isArray(e.events)?e.events:null},fetch(e,t){t({rawEvents:e.eventSource.meta})}};const t5e=O0({name:"array-event-source",eventSourceDefs:[e5e]});let n5e={parseMeta(e){return typeof e.events=="function"?e.events:null},fetch(e,t,n){const{dateEnv:r}=e.context,l=e.eventSource.meta;_Me(l.bind(null,YG(e.range,r)),d=>t({rawEvents:d}),n)}};const r5e=O0({name:"func-event-source",eventSourceDefs:[n5e]}),o5e={method:String,extraParams:zt,startParam:String,endParam:String,timeZoneParam:String};let i5e={parseMeta(e){return e.url&&(e.format==="json"||!e.format)?{url:e.url,format:"json",method:(e.method||"GET").toUpperCase(),extraParams:e.extraParams,startParam:e.startParam,endParam:e.endParam,timeZoneParam:e.timeZoneParam}:null},fetch(e,t,n){const{meta:r}=e.eventSource,l=s5e(r,e.range,e.context);xMe(r.method,r.url,l).then(([d,f])=>{t({rawEvents:d,response:f})},n)}};const a5e=O0({name:"json-event-source",eventSourceRefiners:o5e,eventSourceDefs:[i5e]});function s5e(e,t,n){let{dateEnv:r,options:l}=n,d,f,y,a,E={};return d=e.startParam,d==null&&(d=l.startParam),f=e.endParam,f==null&&(f=l.endParam),y=e.timeZoneParam,y==null&&(y=l.timeZoneParam),typeof e.extraParams=="function"?a=e.extraParams():a=e.extraParams||{},Object.assign(E,a),E[d]=r.formatIso(t.start),E[f]=r.formatIso(t.end),r.timeZone!=="local"&&(E[y]=r.timeZone),E}const l5e={daysOfWeek:zt,startTime:jo,endTime:jo,duration:jo,startRecur:zt,endRecur:zt};let c5e={parse(e,t){if(e.daysOfWeek||e.startTime||e.endTime||e.startRecur||e.endRecur){let n={daysOfWeek:e.daysOfWeek||null,startTime:e.startTime||null,endTime:e.endTime||null,startRecur:e.startRecur?t.createMarker(e.startRecur):null,endRecur:e.endRecur?t.createMarker(e.endRecur):null},r;return e.duration&&(r=e.duration),!r&&e.startTime&&e.endTime&&(r=AAe(e.endTime,e.startTime)),{allDayGuess:!e.startTime&&!e.endTime,duration:r,typeData:n}}return null},expand(e,t,n){let r=sv(t,{start:e.startRecur,end:e.endRecur});return r?d5e(e.daysOfWeek,e.startTime,r,n):[]}};const u5e=O0({name:"simple-recurring-event",recurringTypes:[c5e],eventRefiners:l5e});function d5e(e,t,n,r){let l=e?SG(e):null,d=ki(n.start),f=n.end,y=[];for(;d<f;){let a;(!l||l[d.getUTCDay()])&&(t?a=r.add(d,t):a=d,y.push(a)),d=ls(d,1)}return y}const h5e=O0({name:"change-handler",optionChangeHandlers:{events(e,t){UF([e],t)},eventSources:UF}});function UF(e,t){let n=k4(t.getCurrentData().eventSources);if(n.length===1&&e.length===1&&Array.isArray(n[0]._raw)&&Array.isArray(e[0])){t.dispatch({type:"RESET_RAW_EVENTS",sourceId:n[0].sourceId,rawEvents:e[0]});return}let r=[];for(let l of e){let d=!1;for(let f=0;f<n.length;f+=1)if(n[f]._raw===l){n.splice(f,1),d=!0;break}d||r.push(l)}for(let l of n)t.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:l.sourceId});for(let l of r)t.calendarApi.addEventSource(l)}function f5e(e,t){t.emitter.trigger("datesSet",Object.assign(Object.assign({},YG(e.activeRange,t.dateEnv)),{view:t.viewApi}))}function p5e(e,t){let{emitter:n}=t;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",P4(e,t))}const m5e=[t5e,r5e,a5e,u5e,h5e,O0({name:"misc",isLoadingFuncs:[e=>lq(e.eventSources)],propSetHandlers:{dateProfile:f5e,eventStore:p5e}})];class g5e{constructor(t,n){this.runTaskOption=t,this.drainedOption=n,this.queue=[],this.delayedRunner=new w4(this.drain.bind(this))}request(t,n){this.queue.push(t),this.delayedRunner.request(n)}pause(t){this.delayedRunner.pause(t)}resume(t,n){this.delayedRunner.resume(t,n)}drain(){let{queue:t}=this;for(;t.length;){let n=[],r;for(;r=t.shift();)this.runTask(r),n.push(r);this.drained(n)}}runTask(t){this.runTaskOption&&this.runTaskOption(t)}drained(t){this.drainedOption&&this.drainedOption(t)}}function y5e(e,t,n){let r;return/^(year|month)$/.test(e.currentRangeUnit)?r=e.currentRange:r=e.activeRange,n.formatRange(r.start,r.end,ka(t.titleFormat||b5e(e)),{isEndExclusive:e.isRangeAllDay,defaultSeparator:t.titleRangeSeparator})}function b5e(e){let{currentRangeUnit:t}=e;if(t==="year")return{year:"numeric"};if(t==="month")return{year:"numeric",month:"long"};let n=zS(e.currentRange.start,e.currentRange.end);return n!==null&&n>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class v5e{constructor(t){this.computeCurrentViewData=Ro(this._computeCurrentViewData),this.organizeRawLocales=Ro(EDe),this.buildLocale=Ro(aq),this.buildPluginHooks=kDe(),this.buildDateEnv=Ro(_5e),this.buildTheme=Ro(x5e),this.parseToolbars=Ro(XDe),this.buildViewSpecs=Ro(PDe),this.buildDateProfileGenerator=wT(w5e),this.buildViewApi=Ro(E5e),this.buildViewUiProps=wT(C5e),this.buildEventUiBySource=Ro(T5e,Md),this.buildEventUiBases=Ro(S5e),this.parseContextBusinessHours=wT(k5e),this.buildTitle=Ro(y5e),this.emitter=new K3e,this.actionRunner=new g5e(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=P=>{this.actionRunner.request(P)},this.props=t,this.actionRunner.pause();let n={},r=this.computeOptionsData(t.optionOverrides,n,t.calendarApi),l=r.calendarOptions.initialView||r.pluginHooks.initialView,d=this.computeCurrentViewData(l,r,t.optionOverrides,n);t.calendarApi.currentDataManager=this,this.emitter.setThisContext(t.calendarApi),this.emitter.setOptions(d.options);let f=D3e(r.calendarOptions,r.dateEnv),y=d.dateProfileGenerator.build(f);Yp(y.activeRange,f)||(f=y.currentRange.start);let a={dateEnv:r.dateEnv,options:r.calendarOptions,pluginHooks:r.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData};for(let P of r.pluginHooks.contextInit)P(a);let E=FDe(r.calendarOptions,y,a),C={dynamicOptionOverrides:n,currentViewType:l,currentDate:f,dateProfile:y,businessHours:this.parseContextBusinessHours(a),eventSources:E,eventUiBases:{},eventStore:x0(),renderableEventStore:x0(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(a).selectionConfig},M=Object.assign(Object.assign({},a),C);for(let P of r.pluginHooks.reducers)Object.assign(C,P(null,null,M));kM(C,a)&&this.emitter.trigger("loading",!0),this.state=C,this.updateData(),this.actionRunner.resume()}resetOptions(t,n){let{props:r}=this;n===void 0?r.optionOverrides=t:(r.optionOverrides=Object.assign(Object.assign({},r.optionOverrides||{}),t),this.optionsForRefining.push(...n)),(n===void 0||n.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(t){let{props:n,state:r,emitter:l}=this,d=zDe(r.dynamicOptionOverrides,t),f=this.computeOptionsData(n.optionOverrides,d,n.calendarApi),y=NDe(r.currentViewType,t),a=this.computeCurrentViewData(y,f,n.optionOverrides,d);n.calendarApi.currentDataManager=this,l.setThisContext(n.calendarApi),l.setOptions(a.options);let E={dateEnv:f.dateEnv,options:f.calendarOptions,pluginHooks:f.pluginHooks,calendarApi:n.calendarApi,dispatch:this.dispatch,emitter:l,getCurrentData:this.getCurrentData},{currentDate:C,dateProfile:M}=r;this.data&&this.data.dateProfileGenerator!==a.dateProfileGenerator&&(M=a.dateProfileGenerator.build(C)),C=M3e(C,t),M=BDe(M,t,C,a.dateProfileGenerator),(t.type==="PREV"||t.type==="NEXT"||!Yp(M.currentRange,C))&&(C=M.currentRange.start);let P=jDe(r.eventSources,t,M,E),N=W3e(r.eventStore,t,P,M,E),$=lq(P)&&!a.options.progressiveEventRendering&&r.renderableEventStore||N,{eventUiSingleBase:Z,selectionConfig:q}=this.buildViewUiProps(E),K=this.buildEventUiBySource(P),Q=this.buildEventUiBases($.defs,Z,K),te={dynamicOptionOverrides:d,currentViewType:y,currentDate:C,dateProfile:M,eventSources:P,eventStore:N,renderableEventStore:$,selectionConfig:q,eventUiBases:Q,businessHours:this.parseContextBusinessHours(E),dateSelection:GDe(r.dateSelection,t),eventSelection:qDe(r.eventSelection,t),eventDrag:ZDe(r.eventDrag,t),eventResize:KDe(r.eventResize,t)},ie=Object.assign(Object.assign({},E),te);for(let me of f.pluginHooks.reducers)Object.assign(te,me(r,t,ie));let ue=kM(r,E),re=kM(te,E);!ue&&re?l.trigger("loading",!0):ue&&!re&&l.trigger("loading",!1),this.state=te,n.onAction&&n.onAction(t)}updateData(){let{props:t,state:n}=this,r=this.data,l=this.computeOptionsData(t.optionOverrides,n.dynamicOptionOverrides,t.calendarApi),d=this.computeCurrentViewData(n.currentViewType,l,t.optionOverrides,n.dynamicOptionOverrides),f=this.data=Object.assign(Object.assign(Object.assign({viewTitle:this.buildTitle(n.dateProfile,d.options,l.dateEnv),calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},l),d),n),y=l.pluginHooks.optionChangeHandlers,a=r&&r.calendarOptions,E=l.calendarOptions;if(a&&a!==E){a.timeZone!==E.timeZone&&(n.eventSources=f.eventSources=$De(f.eventSources,n.dateProfile,f),n.eventStore=f.eventStore=kF(f.eventStore,r.dateEnv,f.dateEnv),n.renderableEventStore=f.renderableEventStore=kF(f.renderableEventStore,r.dateEnv,f.dateEnv));for(let C in y)(this.optionsForHandling.indexOf(C)!==-1||a[C]!==E[C])&&y[C](E[C],f)}this.optionsForHandling=[],t.onData&&t.onData(f)}computeOptionsData(t,n,r){if(!this.optionsForRefining.length&&t===this.stableOptionOverrides&&n===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:l,pluginHooks:d,localeDefaults:f,availableLocaleData:y,extra:a}=this.processRawCalendarOptions(t,n);VF(a);let E=this.buildDateEnv(l.timeZone,l.locale,l.weekNumberCalculation,l.firstDay,l.weekText,d,y,l.defaultRangeSeparator),C=this.buildViewSpecs(d.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,f),M=this.buildTheme(l,d),P=this.parseToolbars(l,this.stableOptionOverrides,M,C,r);return this.stableCalendarOptionsData={calendarOptions:l,pluginHooks:d,dateEnv:E,viewSpecs:C,theme:M,toolbarConfig:P,localeDefaults:f,availableRawLocales:y.map}}processRawCalendarOptions(t,n){let{locales:r,locale:l}=xM([T1,t,n]),d=this.organizeRawLocales(r),f=d.map,y=this.buildLocale(l||d.defaultCode,f).options,a=this.buildPluginHooks(t.plugins||[],m5e),E=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},_F),xF),wF),a.listenerRefiners),a.optionRefiners),C={},M=xM([T1,y,t,n]),P={},N=this.currentCalendarOptionsInput,F=this.currentCalendarOptionsRefined,$=!1;for(let Z in M)this.optionsForRefining.indexOf(Z)===-1&&(M[Z]===N[Z]||$g[Z]&&Z in N&&$g[Z](N[Z],M[Z]))?P[Z]=F[Z]:E[Z]?(P[Z]=E[Z](M[Z]),$=!0):C[Z]=N[Z];return $&&(this.currentCalendarOptionsInput=M,this.currentCalendarOptionsRefined=P,this.stableOptionOverrides=t,this.stableDynamicOptionOverrides=n),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:a,availableLocaleData:d,localeDefaults:y,extra:C}}_computeCurrentViewData(t,n,r,l){let d=n.viewSpecs[t];if(!d)throw new Error(`viewType "${t}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:f,extra:y}=this.processRawViewOptions(d,n.pluginHooks,n.localeDefaults,r,l);VF(y);let a=this.buildDateProfileGenerator({dateProfileGeneratorClass:d.optionDefaults.dateProfileGeneratorClass,duration:d.duration,durationUnit:d.durationUnit,usesMinMaxTime:d.optionDefaults.usesMinMaxTime,dateEnv:n.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:f.slotMinTime,slotMaxTime:f.slotMaxTime,showNonCurrentDates:f.showNonCurrentDates,dayCount:f.dayCount,dateAlignment:f.dateAlignment,dateIncrement:f.dateIncrement,hiddenDays:f.hiddenDays,weekends:f.weekends,nowInput:f.now,validRangeInput:f.validRange,visibleRangeInput:f.visibleRange,fixedWeekCount:f.fixedWeekCount}),E=this.buildViewApi(t,this.getCurrentData,n.dateEnv);return{viewSpec:d,options:f,dateProfileGenerator:a,viewApi:E}}processRawViewOptions(t,n,r,l,d){let f=xM([T1,t.optionDefaults,r,l,t.optionOverrides,d]),y=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},_F),xF),wF),a3e),n.listenerRefiners),n.optionRefiners),a={},E=this.currentViewOptionsInput,C=this.currentViewOptionsRefined,M=!1,P={};for(let N in f)f[N]===E[N]||$g[N]&&$g[N](f[N],E[N])?a[N]=C[N]:(f[N]===this.currentCalendarOptionsInput[N]||$g[N]&&$g[N](f[N],this.currentCalendarOptionsInput[N])?N in this.currentCalendarOptionsRefined&&(a[N]=this.currentCalendarOptionsRefined[N]):y[N]?a[N]=y[N](f[N]):P[N]=f[N],M=!0);return M&&(this.currentViewOptionsInput=f,this.currentViewOptionsRefined=a),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:P}}}function _5e(e,t,n,r,l,d,f,y){let a=aq(t||f.defaultCode,f.map);return new g3e({calendarSystem:"gregory",timeZone:e,namedTimeZoneImpl:d.namedTimeZonedImpl,locale:a,weekNumberCalculation:n,firstDay:r,weekText:l,cmdFormatter:d.cmdFormatter,defaultSeparator:y})}function x5e(e,t){let n=t.themeClasses[e.themeSystem]||pm;return new n(e)}function w5e(e){let t=e.dateProfileGeneratorClass||PG;return new t(e)}function E5e(e,t,n){return new JDe(e,t,n)}function T5e(e){return Yx(e,t=>t.ui)}function S5e(e,t,n){let r={"":t};for(let l in e){let d=e[l];d.sourceId&&n[d.sourceId]&&(r[l]=n[d.sourceId])}return r}function C5e(e){let{options:t}=e;return{eventUiSingleBase:VS({display:t.eventDisplay,editable:t.editable,startEditable:t.eventStartEditable,durationEditable:t.eventDurationEditable,constraint:t.eventConstraint,overlap:typeof t.eventOverlap=="boolean"?t.eventOverlap:void 0,allow:t.eventAllow,backgroundColor:t.eventBackgroundColor,borderColor:t.eventBorderColor,textColor:t.eventTextColor,color:t.eventColor},e),selectionConfig:VS({constraint:t.selectConstraint,overlap:typeof t.selectOverlap=="boolean"?t.selectOverlap:void 0,allow:t.selectAllow},e)}}function kM(e,t){for(let n of t.pluginHooks.isLoadingFuncs)if(n(e))return!0;return!1}function k5e(e){return eMe(e.options.businessHours,e)}function VF(e,t){for(let n in e)console.warn(`Unknown option '${n}'`+(t?` for view '${t}'`:""))}class A5e extends Di{render(){let t=this.props.widgetGroups.map(n=>this.renderWidgetGroup(n));return Ot("div",{className:"fc-toolbar-chunk"},...t)}renderWidgetGroup(t){let{props:n}=this,{theme:r}=this.context,l=[],d=!0;for(let f of t){let{buttonName:y,buttonClick:a,buttonText:E,buttonIcon:C,buttonHint:M}=f;if(y==="title")d=!1,l.push(Ot("h2",{className:"fc-toolbar-title",id:n.titleId},n.title));else{let P=y===n.activeButton,N=!n.isTodayEnabled&&y==="today"||!n.isPrevEnabled&&y==="prev"||!n.isNextEnabled&&y==="next",F=[`fc-${y}-button`,r.getClass("button")];P&&F.push(r.getClass("buttonActive")),l.push(Ot("button",{type:"button",title:typeof M=="function"?M(n.navUnit):M,disabled:N,"aria-pressed":P,className:F.join(" "),onClick:a},E||(C?Ot("span",{className:C,role:"img"}):"")))}}if(l.length>1){let f=d&&r.getClass("buttonGroup")||"";return Ot("div",{className:f},...l)}return l[0]}}class HF extends Di{render(){let{model:t,extraClassName:n}=this.props,r=!1,l,d,f=t.sectionWidgets,y=f.center;return f.left?(r=!0,l=f.left):l=f.start,f.right?(r=!0,d=f.right):d=f.end,Ot("div",{className:[n||"","fc-toolbar",r?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",l||[]),this.renderSection("center",y||[]),this.renderSection("end",d||[]))}renderSection(t,n){let{props:r}=this;return Ot(A5e,{key:t,widgetGroups:n,title:r.title,navUnit:r.navUnit,activeButton:r.activeButton,isTodayEnabled:r.isTodayEnabled,isPrevEnabled:r.isPrevEnabled,isNextEnabled:r.isNextEnabled,titleId:r.titleId})}}class M5e extends Di{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=t=>{this.el=t,nf(this.props.elRef,t),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:t,state:n}=this,{aspectRatio:r}=t,l=["fc-view-harness",r||t.liquid||t.height?"fc-view-harness-active":"fc-view-harness-passive"],d="",f="";return r?n.availableWidth!==null?d=n.availableWidth/r:f=`${1/r*100}%`:d=t.height||"",Ot("div",{"aria-labelledby":t.labeledById,ref:this.handleEl,className:l.join(" "),style:{height:d,paddingBottom:f}},t.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class D5e extends ZG{constructor(t){super(t),this.handleSegClick=(n,r)=>{let{component:l}=this,{context:d}=l,f=R5(r);if(f&&l.isValidSegDownEl(n.target)){let y=Nh(n.target,".fc-event-forced-url"),a=y?y.querySelector("a[href]").href:"";d.emitter.trigger("eventClick",{el:r,event:new gc(l.context,f.eventRange.def,f.eventRange.instance),jsEvent:n,view:d.viewApi}),a&&!n.defaultPrevented&&(window.location.href=a)}},this.destroy=xG(t.el,"click",".fc-event",this.handleSegClick)}}class R5e extends ZG{constructor(t){super(t),this.handleEventElRemove=n=>{n===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(n,r)=>{R5(r)&&(this.currentSegEl=r,this.triggerEvent("eventMouseEnter",n,r))},this.handleSegLeave=(n,r)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",n,r))},this.removeHoverListeners=vAe(t.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(t,n,r){let{component:l}=this,{context:d}=l,f=R5(r);(!n||l.isValidSegDownEl(n.target))&&d.emitter.trigger(t,{el:r,event:new gc(d,f.eventRange.def,f.eventRange.instance),jsEvent:n,view:d.viewApi})}}class I5e extends I0{constructor(){super(...arguments),this.buildViewContext=Ro(v3e),this.buildViewPropTransformers=Ro(O5e),this.buildToolbarProps=Ro(P5e),this.headerRef=tf(),this.footerRef=tf(),this.interactionsStore={},this.state={viewLabelId:Mk()},this.registerInteractiveComponent=(t,n)=>{let r=TMe(t,n),f=[D5e,R5e].concat(this.props.pluginHooks.componentInteractions).map(y=>new y(r));this.interactionsStore[t.uid]=f,IF[t.uid]=r},this.unregisterInteractiveComponent=t=>{let n=this.interactionsStore[t.uid];if(n){for(let r of n)r.destroy();delete this.interactionsStore[t.uid]}delete IF[t.uid]},this.resizeRunner=new w4(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=t=>{let{options:n}=this.props;n.handleWindowResize&&t.target===window&&this.resizeRunner.request(n.windowResizeDelay)}}render(){let{props:t}=this,{toolbarConfig:n,options:r}=t,l=this.buildToolbarProps(t.viewSpec,t.dateProfile,t.dateProfileGenerator,t.currentDate,qx(t.options.now,t.dateEnv),t.viewTitle),d=!1,f="",y;t.isHeightAuto||t.forPrint?f="":r.height!=null?d=!0:r.contentHeight!=null?f=r.contentHeight:y=Math.max(r.aspectRatio,.5);let a=this.buildViewContext(t.viewSpec,t.viewApi,t.options,t.dateProfileGenerator,t.dateEnv,t.theme,t.pluginHooks,t.dispatch,t.getCurrentData,t.emitter,t.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),E=n.header&&n.header.hasTitle?this.state.viewLabelId:void 0;return Ot(R0.Provider,{value:a},n.header&&Ot(HF,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:n.header,titleId:E},l)),Ot(M5e,{liquid:d,height:f,aspectRatio:y,labeledById:E},this.renderView(t),this.buildAppendContent()),n.footer&&Ot(HF,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:n.footer,titleId:""},l)))}componentDidMount(){let{props:t}=this;this.calendarInteractions=t.pluginHooks.calendarInteractions.map(r=>new r(t)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:n}=t.pluginHooks;for(let r in n)n[r](t[r],t)}componentDidUpdate(t){let{props:n}=this,{propSetHandlers:r}=n.pluginHooks;for(let l in r)n[l]!==t[l]&&r[l](n[l],n)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let t of this.calendarInteractions)t.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:t}=this,n=t.pluginHooks.viewContainerAppends.map(r=>r(t));return Ot(Ki,{},...n)}renderView(t){let{pluginHooks:n}=t,{viewSpec:r}=t,l={dateProfile:t.dateProfile,businessHours:t.businessHours,eventStore:t.renderableEventStore,eventUiBases:t.eventUiBases,dateSelection:t.dateSelection,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,isHeightAuto:t.isHeightAuto,forPrint:t.forPrint},d=this.buildViewPropTransformers(n.viewPropsTransformers);for(let y of d)Object.assign(l,y.transform(l,t));let f=r.component;return Ot(f,Object.assign({},l))}}function P5e(e,t,n,r,l,d){let f=n.build(l,void 0,!1),y=n.buildPrev(t,r,!1),a=n.buildNext(t,r,!1);return{title:d,activeButton:e.type,navUnit:e.singleUnit,isTodayEnabled:f.isValid&&!Yp(t.currentRange,l),isPrevEnabled:y.isValid,isNextEnabled:a.isValid}}function O5e(e){return e.map(t=>new t)}class L5e extends SMe{constructor(t,n={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=r=>{switch(r.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=r=>{this.currentData=r,this.renderRunner.request(r.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:r}=this;$S(()=>{px(Ot(EMe,{options:r.calendarOptions,theme:r.theme,emitter:r.emitter},(l,d,f,y)=>(this.setClassNames(l),this.setHeight(d),Ot(MG.Provider,{value:this.customContentRenderId},Ot(I5e,Object.assign({isHeightAuto:f,forPrint:y},r))))),this.el)})}else this.isRendered&&(this.isRendered=!1,px(null,this.el),this.setClassNames([]),this.setHeight(""))},sAe(t),this.el=t,this.renderRunner=new w4(this.handleRenderRequest),new v5e({optionOverrides:n,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let t=this.isRendering;t?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),t&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){$S(()=>{super.updateSize()})}batchRendering(t){this.renderRunner.pause("batchRendering"),t(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(t,n){this.currentDataManager.resetOptions(t,n)}setClassNames(t){if(!rm(t,this.currentClassNames)){let{classList:n}=this.el;for(let r of this.currentClassNames)n.remove(r);for(let r of t)n.add(r);this.currentClassNames=t}}setHeight(t){_G(this.el,"height",t)}}const N5e=parseInt(String(dt.version).split(".")[0]),z5e=N5e<18;class fq extends j.Component{constructor(){super(...arguments),this.elRef=j.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const t=[];for(const n of this.state.customRenderingMap.values())t.push(dt.createElement(B5e,{key:n.id,customRendering:n}));return dt.createElement("div",{ref:this.elRef},t)}componentDidMount(){this.isUnmounting=!1;const t=new xDe;this.handleCustomRendering=t.handle.bind(t),this.calendar=new L5e(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render();let n;t.subscribe(r=>{const l=Date.now(),d=!n;(z5e||d||this.isUpdating||this.isUnmounting||l-n<100?pq:lm.flushSync)(()=>{this.setState({customRenderingMap:r},()=>{n=l,d?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}fq.act=pq;class B5e extends j.PureComponent{render(){const{customRendering:t}=this.props,{generatorMeta:n}=t,r=typeof n=="function"?n(t.renderProps):n;return lm.createPortal(r,t.containerEl)}}function pq(e){e()}class F5e extends P0{constructor(){super(...arguments),this.headerElRef=tf()}renderSimpleLayout(t,n){let{props:r,context:l}=this,d=[],f=NF(l.options);return t&&d.push({type:"header",key:"header",isSticky:f,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}}),d.push({type:"body",key:"body",liquid:!0,chunk:{content:n}}),Ot(EF,{elClasses:["fc-daygrid"],viewSpec:l.viewSpec},Ot(tq,{liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:r.forPrint,cols:[],sections:d}))}renderHScrollLayout(t,n,r,l){let d=this.context.pluginHooks.scrollGridImpl;if(!d)throw new Error("No ScrollGrid implementation");let{props:f,context:y}=this,a=!f.forPrint&&NF(y.options),E=!f.forPrint&&tDe(y.options),C=[];return t&&C.push({type:"header",key:"header",isSticky:a,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}]}),C.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:n}]}),E&&C.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:eDe}]}),Ot(EF,{elClasses:["fc-daygrid"],viewSpec:y.viewSpec},Ot(d,{liquid:!f.isHeightAuto&&!f.forPrint,forPrint:f.forPrint,collapsibleWidth:f.forPrint,colGroups:[{cols:[{span:r,minWidth:l}]}],sections:C}))}}function VE(e,t){let n=[];for(let r=0;r<t;r+=1)n[r]=[];for(let r of e)n[r.row].push(r);return n}function HE(e,t){let n=[];for(let r=0;r<t;r+=1)n[r]=[];for(let r of e)n[r.firstCol].push(r);return n}function WF(e,t){let n=[];if(e){for(let r=0;r<t;r+=1)n[r]={affectedInstances:e.affectedInstances,isEvent:e.isEvent,segs:[]};for(let r of e.segs)n[r.row].segs.push(r)}else for(let r=0;r<t;r+=1)n[r]=null;return n}const mq=ka({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function gq(e){let{display:t}=e.eventRange.ui;return t==="list-item"||t==="auto"&&!e.eventRange.def.allDay&&e.firstCol===e.lastCol&&e.isStart&&e.isEnd}class yq extends Di{render(){let{props:t}=this;return Ot(rDe,Object.assign({},t,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:mq,defaultDisplayEventEnd:t.defaultDisplayEventEnd,disableResizing:!t.seg.eventRange.def.allDay}))}}class bq extends Di{render(){let{props:t,context:n}=this,{options:r}=n,{seg:l}=t,d=r.eventTimeFormat||mq,f=HG(l,d,n,!0,t.defaultDisplayEventEnd);return Ot(N4,Object.assign({},t,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:WG(t.seg,n),defaultGenerator:j5e,timeText:f,isResizing:!1,isDateSelecting:!1}))}}function j5e(e){return Ot(Ki,null,Ot("div",{className:"fc-daygrid-event-dot",style:{borderColor:e.borderColor||e.backgroundColor}}),e.timeText&&Ot("div",{className:"fc-event-time"},e.timeText),Ot("div",{className:"fc-event-title"},e.event.title||Ot(Ki,null," ")))}class $5e extends Di{constructor(){super(...arguments),this.compileSegs=Ro(U5e)}render(){let{props:t}=this,{allSegs:n,invisibleSegs:r}=this.compileSegs(t.singlePlacements);return Ot(pDe,{elClasses:["fc-daygrid-more-link"],dateProfile:t.dateProfile,todayRange:t.todayRange,allDayDate:t.allDayDate,moreCnt:t.moreCnt,allSegs:n,hiddenSegs:r,alignmentElRef:t.alignmentElRef,alignGridTop:t.alignGridTop,extraDateSpan:t.extraDateSpan,popoverContent:()=>{let l=(t.eventDrag?t.eventDrag.affectedInstances:null)||(t.eventResize?t.eventResize.affectedInstances:null)||{};return Ot(Ki,null,n.map(d=>{let f=d.eventRange.instance.instanceId;return Ot("div",{className:"fc-daygrid-event-harness",key:f,style:{visibility:l[f]?"hidden":""}},gq(d)?Ot(bq,Object.assign({seg:d,isDragging:!1,isSelected:f===t.eventSelection,defaultDisplayEventEnd:!1},S1(d,t.todayRange))):Ot(yq,Object.assign({seg:d,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:f===t.eventSelection,defaultDisplayEventEnd:!1},S1(d,t.todayRange))))}))}})}}function U5e(e){let t=[],n=[];for(let r of e)t.push(r.seg),r.isVisible||n.push(r.seg);return{allSegs:t,invisibleSegs:n}}const V5e=ka({week:"narrow"});class H5e extends P0{constructor(){super(...arguments),this.rootElRef=tf(),this.state={dayNumberId:Mk()},this.handleRootEl=t=>{nf(this.rootElRef,t),nf(this.props.elRef,t)}}render(){let{context:t,props:n,state:r,rootElRef:l}=this,{options:d,dateEnv:f}=t,{date:y,dateProfile:a}=n;const E=n.showDayNumber&&Y5e(y,a.currentRange,f);return Ot(nq,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...n.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},n.extraDataAttrs),n.showDayNumber?{"aria-labelledby":r.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:W5e,date:y,dateProfile:a,todayRange:n.todayRange,showDayNumber:n.showDayNumber,isMonthStart:E,extraRenderProps:n.extraRenderProps},(C,M)=>Ot("div",{ref:n.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:n.minHeight}},n.showWeekNumber&&Ot(uDe,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:I5(t,y,"week"),date:y,defaultFormat:V5e}),!M.isDisabled&&(n.showDayNumber||rq(d)||n.forceDayTop)?Ot("div",{className:"fc-daygrid-day-top"},Ot(C,{elTag:"a",elClasses:["fc-daygrid-day-number",E&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},I5(t,y)),{id:r.dayNumberId})})):n.showDayNumber?Ot("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},Ot("a",{className:"fc-daygrid-day-number"}," ")):void 0,Ot("div",{className:"fc-daygrid-day-events",ref:n.fgContentElRef},n.fgContent,Ot("div",{className:"fc-daygrid-day-bottom",style:{marginTop:n.moreMarginTop}},Ot($5e,{allDayDate:y,singlePlacements:n.singlePlacements,moreCnt:n.moreCnt,alignmentElRef:l,alignGridTop:!n.showDayNumber,extraDateSpan:n.extraDateSpan,dateProfile:n.dateProfile,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,todayRange:n.todayRange}))),Ot("div",{className:"fc-daygrid-day-bg"},n.bgContent)))}}function W5e(e){return e.dayNumberText||Ot(Ki,null," ")}function Y5e(e,t,n){const{start:r,end:l}=t,d=om(l,-1),f=n.getYear(r),y=n.getMonth(r),a=n.getYear(d),E=n.getMonth(d);return!(f===a&&y===E)&&(e.valueOf()===r.valueOf()||n.getDay(e)===1&&e.valueOf()<l.valueOf())}function vq(e){return e.eventRange.instance.instanceId+":"+e.firstCol}function _q(e){return vq(e)+":"+e.lastCol}function G5e(e,t,n,r,l,d,f){let y=new K5e(q=>{let K=e[q.index].eventRange.instance.instanceId+":"+q.span.start+":"+(q.span.end-1);return l[K]||1});y.allowReslicing=!0,y.strictOrder=r,t===!0||n===!0?(y.maxCoord=d,y.hiddenConsumes=!0):typeof t=="number"?y.maxStackCnt=t:typeof n=="number"&&(y.maxStackCnt=n,y.hiddenConsumes=!0);let a=[],E=[];for(let q=0;q<e.length;q+=1){let K=e[q],Q=_q(K);l[Q]!=null?a.push({index:q,span:{start:K.firstCol,end:K.lastCol+1}}):E.push(K)}let C=y.addSegs(a),M=y.toRects(),{singleColPlacements:P,multiColPlacements:N,leftoverMargins:F}=q5e(M,e,f),$=[],Z=[];for(let q of E){N[q.firstCol].push({seg:q,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let K=q.firstCol;K<=q.lastCol;K+=1)P[K].push({seg:Ab(q,K,K+1,f),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let q=0;q<f.length;q+=1)$.push(0);for(let q of C){let K=e[q.index],Q=q.span;N[Q.start].push({seg:Ab(K,Q.start,Q.end,f),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let te=Q.start;te<Q.end;te+=1)$[te]+=1,P[te].push({seg:Ab(K,te,te+1,f),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let q=0;q<f.length;q+=1)Z.push(F[q]);return{singleColPlacements:P,multiColPlacements:N,moreCnts:$,moreMarginTops:Z}}function q5e(e,t,n){let r=Z5e(e,n.length),l=[],d=[],f=[];for(let y=0;y<n.length;y+=1){let a=r[y],E=[],C=0,M=0;for(let N of a){let F=t[N.index];E.push({seg:Ab(F,y,y+1,n),isVisible:!0,isAbsolute:!1,absoluteTop:N.levelCoord,marginTop:N.levelCoord-C}),C=N.levelCoord+N.thickness}let P=[];C=0,M=0;for(let N of a){let F=t[N.index],$=N.span.end-N.span.start>1,Z=N.span.start===y;M+=N.levelCoord-C,C=N.levelCoord+N.thickness,$?(M+=N.thickness,Z&&P.push({seg:Ab(F,N.span.start,N.span.end,n),isVisible:!0,isAbsolute:!0,absoluteTop:N.levelCoord,marginTop:0})):Z&&(P.push({seg:Ab(F,N.span.start,N.span.end,n),isVisible:!0,isAbsolute:!1,absoluteTop:N.levelCoord,marginTop:M}),M=0)}l.push(E),d.push(P),f.push(M)}return{singleColPlacements:l,multiColPlacements:d,leftoverMargins:f}}function Z5e(e,t){let n=[];for(let r=0;r<t;r+=1)n.push([]);for(let r of e)for(let l=r.span.start;l<r.span.end;l+=1)n[l].push(r);return n}function Ab(e,t,n,r){if(e.firstCol===t&&e.lastCol===n-1)return e;let l=e.eventRange,d=l.range,f=sv(d,{start:r[t].date,end:ls(r[n-1].date,1)});return Object.assign(Object.assign({},e),{firstCol:t,lastCol:n-1,eventRange:{def:l.def,ui:Object.assign(Object.assign({},l.ui),{durationEditable:!1}),instance:l.instance,range:f},isStart:e.isStart&&f.start.valueOf()===d.start.valueOf(),isEnd:e.isEnd&&f.end.valueOf()===d.end.valueOf()})}class K5e extends OMe{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(t){const n=super.addSegs(t),{entriesByLevel:r}=this,l=d=>!this.forceHidden[C1(d)];for(let d=0;d<r.length;d+=1)r[d]=r[d].filter(l);return n}handleInvalidInsertion(t,n,r){const{entriesByLevel:l,forceHidden:d}=this,{touchingEntry:f,touchingLevel:y,touchingLateral:a}=t;if(this.hiddenConsumes&&f){const E=C1(f);if(!d[E])if(this.allowReslicing){const C=Object.assign(Object.assign({},f),{span:XG(f.span,n.span)}),M=C1(C);d[M]=!0,l[y][a]=C,r.push(C),this.splitEntry(f,n,r)}else d[E]=!0,r.push(f)}super.handleInvalidInsertion(t,n,r)}}class xq extends P0{constructor(){super(...arguments),this.cellElRefs=new Qg,this.frameElRefs=new Qg,this.fgElRefs=new Qg,this.segHarnessRefs=new Qg,this.rootElRef=tf(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=t=>{t&&this.updateSizing(!0)}}render(){let{props:t,state:n,context:r}=this,{options:l}=r,d=t.cells.length,f=HE(t.businessHourSegs,d),y=HE(t.bgEventSegs,d),a=HE(this.getHighlightSegs(),d),E=HE(this.getMirrorSegs(),d),{singleColPlacements:C,multiColPlacements:M,moreCnts:P,moreMarginTops:N}=G5e(lMe(t.fgEventSegs,l.eventOrder),t.dayMaxEvents,t.dayMaxEventRows,l.eventOrderStrict,n.segHeights,n.maxContentHeight,t.cells),F=t.eventDrag&&t.eventDrag.affectedInstances||t.eventResize&&t.eventResize.affectedInstances||{};return Ot("tr",{ref:this.rootElRef,role:"row"},t.renderIntro&&t.renderIntro(),t.cells.map(($,Z)=>{let q=this.renderFgSegs(Z,t.forPrint?C[Z]:M[Z],t.todayRange,F),K=this.renderFgSegs(Z,X5e(E[Z],M),t.todayRange,{},!!t.eventDrag,!!t.eventResize,!1);return Ot(H5e,{key:$.key,elRef:this.cellElRefs.createRef($.key),innerElRef:this.frameElRefs.createRef($.key),dateProfile:t.dateProfile,date:$.date,showDayNumber:t.showDayNumbers,showWeekNumber:t.showWeekNumbers&&Z===0,forceDayTop:t.showWeekNumbers,todayRange:t.todayRange,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,extraRenderProps:$.extraRenderProps,extraDataAttrs:$.extraDataAttrs,extraClassNames:$.extraClassNames,extraDateSpan:$.extraDateSpan,moreCnt:P[Z],moreMarginTop:N[Z],singlePlacements:C[Z],fgContentElRef:this.fgElRefs.createRef($.key),fgContent:Ot(Ki,null,Ot(Ki,null,q),Ot(Ki,null,K)),bgContent:Ot(Ki,null,this.renderFillSegs(a[Z],"highlight"),this.renderFillSegs(f[Z],"non-business"),this.renderFillSegs(y[Z],"bg-event")),minHeight:t.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(t,n){let r=this.props;this.updateSizing(!Md(t,r))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:t}=this;return t.eventDrag&&t.eventDrag.segs.length?t.eventDrag.segs:t.eventResize&&t.eventResize.segs.length?t.eventResize.segs:t.dateSelectionSegs}getMirrorSegs(){let{props:t}=this;return t.eventResize&&t.eventResize.segs.length?t.eventResize.segs:[]}renderFgSegs(t,n,r,l,d,f,y){let{context:a}=this,{eventSelection:E}=this.props,{framePositions:C}=this.state,M=this.props.cells.length===1,P=d||f||y,N=[];if(C)for(let F of n){let{seg:$}=F,{instanceId:Z}=$.eventRange.instance,q=F.isVisible&&!l[Z],K=F.isAbsolute,Q="",te="";K&&(a.isRtl?(te=0,Q=C.lefts[$.lastCol]-C.lefts[$.firstCol]):(Q=0,te=C.rights[$.firstCol]-C.rights[$.lastCol])),N.push(Ot("div",{className:"fc-daygrid-event-harness"+(K?" fc-daygrid-event-harness-abs":""),key:vq($),ref:P?null:this.segHarnessRefs.createRef(_q($)),style:{visibility:q?"":"hidden",marginTop:K?"":F.marginTop,top:K?F.absoluteTop:"",left:Q,right:te}},gq($)?Ot(bq,Object.assign({seg:$,isDragging:d,isSelected:Z===E,defaultDisplayEventEnd:M},S1($,r))):Ot(yq,Object.assign({seg:$,isDragging:d,isResizing:f,isDateSelecting:y,isSelected:Z===E,defaultDisplayEventEnd:M},S1($,r)))))}return N}renderFillSegs(t,n){let{isRtl:r}=this.context,{todayRange:l}=this.props,{framePositions:d}=this.state,f=[];if(d)for(let y of t){let a=r?{right:0,left:d.lefts[y.lastCol]-d.lefts[y.firstCol]}:{left:0,right:d.rights[y.firstCol]-d.rights[y.lastCol]};f.push(Ot("div",{key:pMe(y.eventRange),className:"fc-daygrid-bg-harness",style:a},n==="bg-event"?Ot(sDe,Object.assign({seg:y},S1(y,l))):cDe(n)))}return Ot(Ki,{},...f)}updateSizing(t){let{props:n,state:r,frameElRefs:l}=this;if(!n.forPrint&&n.clientWidth!==null){if(t){let a=n.cells.map(E=>l.currentMap[E.key]);if(a.length){let E=this.rootElRef.current,C=new HS(E,a,!0,!1);(!r.framePositions||!r.framePositions.similarTo(C))&&this.setState({framePositions:new HS(E,a,!0,!1)})}}const d=this.state.segHeights,f=this.querySegHeights(),y=n.dayMaxEvents===!0||n.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},d),f),maxContentHeight:y?this.computeMaxContentHeight():null})}}querySegHeights(){let t=this.segHarnessRefs.currentMap,n={};for(let r in t){let l=Math.round(t[r].getBoundingClientRect().height);n[r]=Math.max(n[r]||0,l)}return n}computeMaxContentHeight(){let t=this.props.cells[0].key,n=this.cellElRefs.currentMap[t],r=this.fgElRefs.currentMap[t];return n.getBoundingClientRect().bottom-r.getBoundingClientRect().top}getCellEls(){let t=this.cellElRefs.currentMap;return this.props.cells.map(n=>t[n.key])}}xq.addStateEquality({segHeights:Md});function X5e(e,t){if(!e.length)return[];let n=Q5e(t);return e.map(r=>({seg:r,isVisible:!0,isAbsolute:!0,absoluteTop:n[r.eventRange.instance.instanceId],marginTop:0}))}function Q5e(e){let t={};for(let n of e)for(let r of n)t[r.seg.eventRange.instance.instanceId]=r.absoluteTop;return t}class J5e extends P0{constructor(){super(...arguments),this.splitBusinessHourSegs=Ro(VE),this.splitBgEventSegs=Ro(VE),this.splitFgEventSegs=Ro(VE),this.splitDateSelectionSegs=Ro(VE),this.splitEventDrag=Ro(WF),this.splitEventResize=Ro(WF),this.rowRefs=new Qg}render(){let{props:t,context:n}=this,r=t.cells.length,l=this.splitBusinessHourSegs(t.businessHourSegs,r),d=this.splitBgEventSegs(t.bgEventSegs,r),f=this.splitFgEventSegs(t.fgEventSegs,r),y=this.splitDateSelectionSegs(t.dateSelectionSegs,r),a=this.splitEventDrag(t.eventDrag,r),E=this.splitEventResize(t.eventResize,r),C=r>=7&&t.clientWidth?t.clientWidth/n.options.aspectRatio/6:null;return Ot(L4,{unit:"day"},(M,P)=>Ot(Ki,null,t.cells.map((N,F)=>Ot(xq,{ref:this.rowRefs.createRef(F),key:N.length?N[0].date.toISOString():F,showDayNumbers:r>1,showWeekNumbers:t.showWeekNumbers,todayRange:P,dateProfile:t.dateProfile,cells:N,renderIntro:t.renderRowIntro,businessHourSegs:l[F],eventSelection:t.eventSelection,bgEventSegs:d[F].filter(eRe),fgEventSegs:f[F],dateSelectionSegs:y[F],eventDrag:a[F],eventResize:E[F],dayMaxEvents:t.dayMaxEvents,dayMaxEventRows:t.dayMaxEventRows,clientWidth:t.clientWidth,clientHeight:t.clientHeight,cellMinHeight:C,forPrint:t.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const t=this.rowRefs.currentMap[0].getCellEls()[0],n=t?t.closest(".fc-daygrid-body"):null;n&&(this.rootEl=n,this.context.registerInteractiveComponent(this,{el:n,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new HS(this.rootEl,this.rowRefs.collect().map(t=>t.getCellEls()[0]),!1,!0),this.colPositions=new HS(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(t,n){let{colPositions:r,rowPositions:l}=this,d=r.leftToIndex(t),f=l.topToIndex(n);if(f!=null&&d!=null){let y=this.props.cells[f][d];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(f,d),allDay:!0},y.extraDateSpan),dayEl:this.getCellEl(f,d),rect:{left:r.lefts[d],right:r.rights[d],top:l.tops[f],bottom:l.bottoms[f]},layer:0}}return null}getCellEl(t,n){return this.rowRefs.currentMap[t].getCellEls()[n]}getCellRange(t,n){let r=this.props.cells[t][n].date,l=ls(r,1);return{start:r,end:l}}}function eRe(e){return e.eventRange.def.allDay}class tRe extends P0{constructor(){super(...arguments),this.elRef=tf(),this.needsScrollReset=!1}render(){let{props:t}=this,{dayMaxEventRows:n,dayMaxEvents:r,expandRows:l}=t,d=r===!0||n===!0;d&&!l&&(d=!1,n=null,r=null);let f=["fc-daygrid-body",d?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",l?"":"fc-daygrid-body-natural"];return Ot("div",{ref:this.elRef,className:f.join(" "),style:{width:t.clientWidth,minWidth:t.tableMinWidth}},Ot("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:t.clientWidth,minWidth:t.tableMinWidth,height:l?t.clientHeight:""}},t.colGroupNode,Ot("tbody",{role:"presentation"},Ot(J5e,{dateProfile:t.dateProfile,cells:t.cells,renderRowIntro:t.renderRowIntro,showWeekNumbers:t.showWeekNumbers,clientWidth:t.clientWidth,clientHeight:t.clientHeight,businessHourSegs:t.businessHourSegs,bgEventSegs:t.bgEventSegs,fgEventSegs:t.fgEventSegs,dateSelectionSegs:t.dateSelectionSegs,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,dayMaxEvents:r,dayMaxEventRows:n,forPrint:t.forPrint,isHitComboAllowed:t.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(t){t.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const t=nRe(this.elRef.current,this.props.dateProfile);if(t){const n=t.closest(".fc-daygrid-body"),r=n.closest(".fc-scroller"),l=t.getBoundingClientRect().top-n.getBoundingClientRect().top;r.scrollTop=l?l+1:0}this.needsScrollReset=!1}}}function nRe(e,t){let n;return t.currentRangeUnit.match(/year|month/)&&(n=e.querySelector(`[data-date="${HAe(t.currentDate)}-01"]`)),n||(n=e.querySelector(`[data-date="${E4(t.currentDate)}"]`)),n}class rRe extends VMe{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(t,n){return n.sliceRange(t)}}class oRe extends P0{constructor(){super(...arguments),this.slicer=new rRe,this.tableRef=tf()}render(){let{props:t,context:n}=this;return Ot(tRe,Object.assign({ref:this.tableRef},this.slicer.sliceProps(t,t.dateProfile,t.nextDayThreshold,n,t.dayTableModel),{dateProfile:t.dateProfile,cells:t.dayTableModel.cells,colGroupNode:t.colGroupNode,tableMinWidth:t.tableMinWidth,renderRowIntro:t.renderRowIntro,dayMaxEvents:t.dayMaxEvents,dayMaxEventRows:t.dayMaxEventRows,showWeekNumbers:t.showWeekNumbers,expandRows:t.expandRows,headerAlignElRef:t.headerAlignElRef,clientWidth:t.clientWidth,clientHeight:t.clientHeight,forPrint:t.forPrint}))}}class iRe extends F5e{constructor(){super(...arguments),this.buildDayTableModel=Ro(aRe),this.headerRef=tf(),this.tableRef=tf()}render(){let{options:t,dateProfileGenerator:n}=this.context,{props:r}=this,l=this.buildDayTableModel(r.dateProfile,n),d=t.dayHeaders&&Ot(FMe,{ref:this.headerRef,dateProfile:r.dateProfile,dates:l.headerDates,datesRepDistinctDays:l.rowCnt===1}),f=y=>Ot(oRe,{ref:this.tableRef,dateProfile:r.dateProfile,dayTableModel:l,businessHours:r.businessHours,dateSelection:r.dateSelection,eventStore:r.eventStore,eventUiBases:r.eventUiBases,eventSelection:r.eventSelection,eventDrag:r.eventDrag,eventResize:r.eventResize,nextDayThreshold:t.nextDayThreshold,colGroupNode:y.tableColGroupNode,tableMinWidth:y.tableMinWidth,dayMaxEvents:t.dayMaxEvents,dayMaxEventRows:t.dayMaxEventRows,showWeekNumbers:t.weekNumbers,expandRows:!r.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:y.clientWidth,clientHeight:y.clientHeight,forPrint:r.forPrint});return t.dayMinWidth?this.renderHScrollLayout(d,f,l.colCnt,t.dayMinWidth):this.renderSimpleLayout(d,f)}}function aRe(e,t){let n=new $Me(e.renderRange,t);return new UMe(n,/year|month|week/.test(e.currentRangeUnit))}class sRe extends PG{buildRenderRange(t,n,r){let l=super.buildRenderRange(t,n,r),{props:d}=this;return lRe({currentRange:l,snapToWeek:/^(year|month)$/.test(n),fixedWeekCount:d.fixedWeekCount,dateEnv:d.dateEnv})}}function lRe(e){let{dateEnv:t,currentRange:n}=e,{start:r,end:l}=n,d;if(e.snapToWeek&&(r=t.startOfWeek(r),d=t.startOfWeek(l),d.valueOf()!==l.valueOf()&&(l=pF(d,1))),e.fixedWeekCount){let f=t.startOfWeek(t.startOfMonth(ls(n.end,-1))),y=Math.ceil(IAe(f,l));l=pF(l,6-y)}return{start:r,end:l}}var cRe=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';yG(cRe);var uRe=O0({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:iRe,dateProfileGeneratorClass:sRe},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}}),B4={},dRe=yi;Object.defineProperty(B4,"__esModule",{value:!0});var wq=B4.default=void 0,hRe=dRe(Bi()),G_=O;wq=B4.default=(0,hRe.default)([(0,G_.jsx)("circle",{cx:"4",cy:"14",r:"2"},"0"),(0,G_.jsx)("path",{d:"M1.22 17.58C.48 17.9 0 18.62 0 19.43V21h4.5v-1.61c0-.83.23-1.61.63-2.29-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58"},"1"),(0,G_.jsx)("circle",{cx:"20",cy:"14",r:"2"},"2"),(0,G_.jsx)("path",{d:"M22.78 17.58c-.85-.37-1.79-.58-2.78-.58-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V21H24v-1.57c0-.81-.48-1.53-1.22-1.85m-6.54-.93c-1.17-.52-2.61-.9-4.24-.9-1.63 0-3.07.39-4.24.9C6.68 17.13 6 18.21 6 19.39V21h12v-1.61c0-1.18-.68-2.26-1.76-2.74M9 12c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3"},"3"),(0,G_.jsx)("path",{d:"M2.48 10.86C2.17 10.1 2 9.36 2 8.6 2 6.02 4.02 4 6.6 4c2.68 0 3.82 1.74 5.4 3.59C13.57 5.76 14.7 4 17.4 4 19.98 4 22 6.02 22 8.6c0 .76-.17 1.5-.48 2.26.65.31 1.18.82 1.53 1.44.6-1.2.95-2.42.95-3.7C24 4.9 21.1 2 17.4 2c-2.09 0-4.09.97-5.4 2.51C10.69 2.97 8.69 2 6.6 2 2.9 2 0 4.9 0 8.6c0 1.28.35 2.5.96 3.7.35-.62.88-1.13 1.52-1.44"},"4")],"Diversity1");var F4={},fRe=yi;Object.defineProperty(F4,"__esModule",{value:!0});var Eq=F4.default=void 0,pRe=fRe(Bi()),mRe=O;Eq=F4.default=(0,pRe.default)((0,mRe.jsx)("path",{d:"M1 11h4v11H1zm15-7.75C16.65 2.49 17.66 2 18.7 2 20.55 2 22 3.45 22 5.3c0 2.27-2.91 4.9-6 7.7-3.09-2.81-6-5.44-6-7.7C10 3.45 11.45 2 13.3 2c1.04 0 2.05.49 2.7 1.25M20 17h-7l-2.09-.73.33-.94L13 16h2.82c.65 0 1.18-.53 1.18-1.18 0-.49-.31-.93-.77-1.11L8.97 11H7v9.02L14 22l8.01-3c-.01-1.1-.9-2-2.01-2"}),"VolunteerActivism");var j4={},gRe=yi;Object.defineProperty(j4,"__esModule",{value:!0});var Tq=j4.default=void 0,yRe=gRe(Bi()),bRe=O;Tq=j4.default=(0,yRe.default)((0,bRe.jsx)("path",{d:"M9.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2M5.75 8.9 3 23h2.1l1.75-8L9 17v6h2v-7.55L8.95 13.4l.6-3C10.85 12 12.8 13 15 13v-2c-1.85 0-3.45-1-4.35-2.45l-.95-1.6C9.35 6.35 8.7 6 8 6c-.25 0-.5.05-.75.15L2 8.3V13h2V9.65zM13 2v7h3.75v14h1.5V9H22V2zm5.01 6V6.25H14.5v-1.5h3.51V3l2.49 2.5z"}),"FollowTheSigns");const vRe="/assets/profile_banner-BORYUAaw.webp";function _Re({image:e,display_name:t,location:n,badges:r,userEvents:l,eventsAttending:d,volunteerEvents:f,interests:y}){return console.log(y),O.jsxs(io,{className:"text-center shadow-lg",style:{width:"100%",overflow:"hidden",borderRadius:"15px"},children:[O.jsx(io.Img,{variant:"top",src:vRe,style:{height:"250px",objectFit:"fluid",objectPosition:"center top"},alt:`${t}'s photo`}),O.jsx(io.Body,{style:{backgroundColor:"#f8f9fa",padding:"20px"},children:O.jsxs(Jr,{children:[O.jsx(Ir,{md:2,children:O.jsx(gu,{alt:t,src:e||oU,sx:{width:150,height:150}})}),O.jsxs(Ir,{md:2,className:"mt-3 text-start",style:{paddingLeft:"20px"},children:[O.jsx(io.Title,{as:"h3",style:{fontWeight:"bold",color:"#6840DF"},children:t}),O.jsx(io.Text,{className:"mt-1",children:n||"Not specified"})]}),O.jsx(Ir,{md:1}),O.jsxs(Ir,{md:3,className:"text-center mt-3",children:[O.jsx(io.Title,{as:"h3",style:{fontWeight:"bold",color:"#6840DF"},children:"Interests:"}),O.jsx(io.Text,{children:y.map(a=>a.category).join(", ")||"Not specified"})]}),O.jsxs(Ir,{md:4,className:"mt-3",children:[O.jsx(io.Title,{as:"h3",style:{fontWeight:"bold",color:"#6840DF",textAlign:"right",paddingRight:"20px"},children:"Social Impact"}),O.jsx("div",{style:{textAlign:"right",paddingRight:"20px"},children:r&&O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"mt-2",children:[l.length," Events Created"," ",O.jsx(wq,{})]}),O.jsxs("div",{children:[f.length," Events Volunteered For"," ",O.jsx(Eq,{})]}),O.jsxs("div",{children:[d.length," Events Committed To"," ",O.jsx(Tq,{})]})]})})]})]})})]})}function xRe(){const{userProfileData:e,setUserProfileData:t}=Eu(),[n,r]=j.useState({}),[l,d]=j.useState(!1),[f,y]=j.useState(4);j.useEffect(()=>{const N=()=>{const F=window.innerWidth;F>=3e3?y(8):F>=2700?y(7):F>=2300?y(6):F>=2e3?y(5):F>=1700?y(4):F>=1400||F>=992?y(3):F>=768?y(2):y(1)};return N(),window.addEventListener("resize",N),()=>{window.removeEventListener("resize",N)}},[]);function a(N,F){const $=[];for(let Z=0;Z<N.length;Z+=F)$.push(N.slice(Z,Z+F));return $}const E=()=>e.user_events.length===0?[]:a(e.user_events,f),C=()=>e.volunteer_events.length===0?[]:a(e.volunteer_events,f),M=()=>e.events_attending.length===0?[]:a(e.events_attending,f),P=()=>{d(!l)};return O.jsx(Zi,{fluid:!0,children:e.id&&O.jsxs(O.Fragment,{children:[O.jsx(Jr,{children:O.jsxs(Ir,{xs:12,children:[O.jsx(_Re,{...e,badges:n,interests:e.interests,userEvents:e.user_events,eventsAttending:e.events_attending,volunteerEvents:e.volunteer_events}),console.log(e)]})}),O.jsxs(Jr,{className:"justify-content-center",children:[O.jsxs(Ir,{xs:12,sm:6,md:4,lg:3,xl:2,children:[" ",O.jsxs(Ts,{onClick:P,style:{marginBottom:"10px",textAlign:"center",width:"100%"},children:[" ",l?"Hide Calendar":"Show Calendar"]})]}),l&&O.jsxs(Ph,{show:l,onHide:P,size:"xl",children:[" ",O.jsx(Ph.Header,{closeButton:!0,children:O.jsx(Ph.Title,{children:"Calendar"})}),O.jsx(Ph.Body,{children:O.jsx("div",{className:"calendar-container",style:{maxWidth:"800px",margin:"auto"},children:O.jsx(fq,{plugins:[uRe],initialView:"dayGridMonth",events:e.user_events.map(N=>({title:N.title,start:N.event_start,end:N.event_end}))})})})]})]}),O.jsx(Jr,{className:"justify-content-center",children:O.jsxs(Ir,{xs:12,children:[O.jsx("h1",{style:{color:"#6840DF",textAlign:"center",marginTop:"4vh",marginBottom:"3vh"},children:"Hosted Events"}),e.events_attending.length===0?O.jsx("h3",{className:"text-muted text-center",children:"Doesn't look like you have any events you're collaborating on at this time."}):O.jsx(sd,{interval:null,indicators:!1,prevLabel:"",nextLabel:"",className:"px-5",children:E().map((N,F)=>O.jsx(sd.Item,{children:O.jsx("div",{className:"d-flex justify-content-around",children:N.map($=>O.jsx(w1,{...$,eventCategory:"userEvents"},$.id))})},F))}),O.jsx("h1",{style:{color:"#6840DF",textAlign:"center",marginTop:"4vh",marginBottom:"3vh"},children:"Volunteer Events"}),e.volunteer_events.length===0?O.jsx("h3",{className:"text-muted text-center",children:"Doesn't look like you've Volunteered for any events yet."}):O.jsx(sd,{interval:null,indicators:!1,prevLabel:"",nextLabel:"",className:"px-5",children:C().map((N,F)=>O.jsx(sd.Item,{children:O.jsx("div",{className:"d-flex justify-content-around",children:N.map($=>{const Z=$.event;return O.jsx(w1,{eventCategory:"volunteerEvents",...Z,applicationStatus:$.application_status},$.id)})})},F))}),O.jsx("h1",{style:{color:"#6840DF",textAlign:"center",marginTop:"4vh",marginBottom:"3vh"},children:"Attending Events"}),e.events_attending.length===0?O.jsx("h3",{className:"text-muted text-center",children:"Doesn't look like you've RSVP'd to any events yet."}):O.jsx(sd,{interval:null,indicators:!1,prevLabel:"",nextLabel:"",className:"px-5",children:M().map((N,F)=>O.jsx(sd.Item,{children:O.jsx("div",{className:"d-flex justify-content-around",children:N.map($=>O.jsx(w1,{...$,eventCategory:"eventsAttending"},$.id))})},F))})]})})]})})}const wRe=async(e,t,n)=>{const r=await ho.put(`volunteer_applications/decision/${e}/`,{application_status:t,decision_text:n});if(console.log("putApplicationDecision utilities page",r.data),r.status===200)return r.data;console.log("error:",r.data)},ERe=async e=>(await ho.get(`volunteer_applications/decision/${e}/`)).data,TRe=async(e,t,n)=>{try{let r=await ho.post(`events/${e}/volunteers/`,{role:t,num_volunteers_needed:n});return console.log(r.status),r.status===201?!0:(console.log("Error Status:",r.status),console.log("Error Data:",r.data),!1)}catch(r){return console.error("Error when creating new volunteer role",r),!1}},SRe=async(e,t)=>(await ho.delete(`events/${e}/volunteers/${t}/`)).status===204;var $4={},CRe=yi;Object.defineProperty($4,"__esModule",{value:!0});var Mb=$4.default=void 0,kRe=CRe(Bi()),ARe=O;Mb=$4.default=(0,kRe.default)((0,ARe.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");var U4={},MRe=yi;Object.defineProperty(U4,"__esModule",{value:!0});var lv=U4.default=void 0,DRe=MRe(Bi()),RRe=O;lv=U4.default=(0,DRe.default)((0,RRe.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");var V4={},IRe=yi;Object.defineProperty(V4,"__esModule",{value:!0});var H4=V4.default=void 0,PRe=IRe(Bi()),ORe=O;H4=V4.default=(0,PRe.default)((0,ORe.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutline");function LRe({roles:e,setRoles:t,approvedVolunteers:n,volunteerApplications:r,eventID:l,getEvent:d}){const[f,y]=j.useState(!1),[a,E]=j.useState(null),[C,M]=j.useState(""),[P,N]=j.useState(""),[F,$]=j.useState({}),Z=De=>{E(De),y(!0),ue(De.application_id)},q=()=>{y(!1)},K=()=>{C&&P&&(te(C),M(""),N(""))},Q=De=>{const je=r.filter(Be=>Be.role===De);ie(je[0].role_id),t(e.filter(Be=>Be!==De))},te=async De=>{try{await TRe(l,De,Number(P)),d()}catch(je){console.error("Failed to create a new volunteer role",je)}},ie=async De=>{const je=await SRe(l,De);console.log("delete role - response status",je)},ue=async De=>{const je=await ERe(De);$(je)},re=async(De,je,Be)=>{try{console.log("volunteer decision put request",De,je),await wRe(De,je,Be),d()}catch(Ue){console.error("Failed to give application decision",Ue)}},me=()=>{re(a.application_id,"Approved",null)&&console.log("accepted application successfully"),q()},ve=()=>{re(a.application_id,"Denied",null),shoulBeTrue&&console.log("rejected application successfully"),q()};return O.jsxs("div",{className:"cardCSS pt-0",style:{maxWidth:"100%"},children:[O.jsxs(v1,{defaultExpanded:!0,children:[O.jsx(x1,{expandIcon:O.jsx(Mb,{}),children:O.jsx("h2",{style:{width:"100%",textAlign:"center"},children:"Pending Volunteer Applications"})}),O.jsx(_1,{children:O.jsx(Wh,{children:r.map((De,je)=>O.jsx(dt.Fragment,{children:De.applications&&De.applications.map((Be,Ue)=>Be.application_status==="Pending"&&O.jsxs(em,{button:!0,onClick:()=>Z(Be),children:[O.jsx(tv,{children:O.jsx(gu,{src:Be.profile_picture})}),O.jsx(b0,{primary:Be.display_name,secondary:`Applying for: ${De.role}`})]},`${De.role}-${Be.user_id}`))},De.role))})})]}),O.jsxs(v1,{style:{marginTop:"1vh"},children:[O.jsx(x1,{expandIcon:O.jsx(Mb,{}),children:O.jsx("h2",{style:{width:"100%",textAlign:"center"},children:"Volunteers"})}),O.jsxs(_1,{children:[O.jsxs(Jr,{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",marginBottom:"1vh"},children:[O.jsxs(Ir,{style:{flex:"75%"},children:[O.jsx(kd,{label:"New Role",variant:"outlined",fullWidth:!0,value:C,onChange:De=>M(De.target.value),onKeyPress:De=>De.key==="Enter"&&K()}),O.jsx(kd,{label:"Number of volunteers needed",variant:"outlined",fullWidth:!0,value:P,onChange:De=>N(De.target.value),onKeyPress:De=>De.key==="Enter"&&K()})]}),O.jsx(Ir,{style:{flex:"20%"},children:O.jsx(la,{onClick:K,startIcon:O.jsx(H4,{}),style:{marginTop:"20px",paddingLeft:"2rem",paddingRight:"2rem"},size:"large",variant:"outlined",sx:{borderColor:"primary.dark",color:"black",fontWeight:"bold",border:"2px solid","&:hover":{backgroundColor:"secondary.dark",borderColor:"secondary.dark",color:"white"}},children:"Add"})})]}),e&&e.map((De,je)=>O.jsxs(v1,{children:[O.jsxs(x1,{expandIcon:O.jsx(Mb,{}),children:[O.jsx(as,{edge:"start","aria-label":"delete",onClick:Be=>{Be.stopPropagation(),Q(De)},size:"small",children:O.jsx(lv,{})}),O.jsx("span",{className:"card-body",children:De})]}),O.jsx(_1,{children:O.jsx(Wh,{children:n.map((Be,Ue)=>Be.role===De&&O.jsxs(em,{button:!0,onClick:()=>Z(Be),children:[O.jsx(tv,{children:O.jsx(gu,{src:Be.profile_picture,children:" "})}),O.jsx(b0,{primary:Be.display_name})]},Ue))})})]},De))]})]}),O.jsx(wv,{open:f,onClose:q,"aria-labelledby":"volunteer-application-modal","aria-describedby":"volunteer-application-details",children:O.jsxs(Nl,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4},children:[O.jsx(sa,{className:"modal-header",id:"modal-modal-title",variant:"h6",children:"Application"}),O.jsx(sa,{className:"modal-header",id:"volunteer-application-details",sx:{mt:2},children:a?`Email: ${F.email}`:""}),O.jsx(sa,{className:"card-body",id:"volunteer-application-details",sx:{mt:2},children:a?`Phone Number: ${F.phone_number}`:""}),O.jsx(sa,{className:"card-body",id:"volunteer-application-details",sx:{mt:2},children:a?`Preferred Contact Method: ${F.preferred_contact_method}`:""}),O.jsx(sa,{className:"card-body",id:"volunteer-application-details",sx:{mt:2},children:a?`Availability: ${F.availability}`:""}),O.jsx(sa,{className:"card-body",id:"volunteer-application-details",sx:{mt:2},children:a?`Previously Volunteered: ${F.return_volunteer}`:""}),O.jsx(sa,{className:"card-body",id:"volunteer-application-details",sx:{mt:2},children:a?`Interested because: ${F.volunteer_interest}`:""}),O.jsx(sa,{className:"card-body",id:"volunteer-application-details",sx:{mt:2},children:a?`Relevant experience: ${F.volunteer_experience}`:""}),O.jsx(la,{onClick:me,sx:{mt:2},children:"Accept"}),O.jsx(la,{onClick:ve,sx:{mt:2},children:"Reject"}),O.jsx(la,{onClick:q,sx:{mt:2},children:"Close"})]})})]})}const NRe=async e=>{let n=(await ho.get(`todo/event/${e}/`)).data;return console.log("utilities --todos",n),n},zRe=async(e,t)=>{const n=await ho.post(`todo/event/${e}/`,{task:t});return n.status===201?!0:(console.log("error:",n.data),!1)},BRe=async(e,t,n)=>{const r=await ho.put(`todo/${e}/`,{assigned_host:t,completed:n});return r.status===200?!0:(console.log("error:",r.data),!1)},FRe=async e=>{const t=await ho.delete(`todo/${e}/`);return t.status===204?!0:(console.log("error:",t.data),!1)};var W4={},jRe=yi;Object.defineProperty(W4,"__esModule",{value:!0});var Sq=W4.default=void 0,$Re=jRe(Bi()),URe=O;Sq=W4.default=(0,$Re.default)((0,URe.jsx)("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"CheckCircleOutline");var Y4={},VRe=yi;Object.defineProperty(Y4,"__esModule",{value:!0});var Cq=Y4.default=void 0,HRe=VRe(Bi()),WRe=O;Cq=Y4.default=(0,HRe.default)((0,WRe.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle");var G4={},YRe=yi;Object.defineProperty(G4,"__esModule",{value:!0});var q4=G4.default=void 0,GRe=YRe(Bi()),qRe=O;q4=G4.default=(0,GRe.default)((0,qRe.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings");var Z4={},ZRe=yi;Object.defineProperty(Z4,"__esModule",{value:!0});var WS=Z4.default=void 0,KRe=ZRe(Bi()),XRe=O;WS=Z4.default=(0,KRe.default)((0,XRe.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");function YS({showAddToDo:e,hosts:t,approvedVolunteers:n,setShowMenu:r}){const[l,d]=j.useState([]);Eu();const[f,y]=j.useState(""),[a,E]=j.useState([]),[C,M]=j.useState({}),[P,N]=j.useState(!1),F=()=>N(!0),$=()=>N(!1),{eventID:Z}=cm(),q=re=>{F(),M(re),console.log("a Task",re)};j.useEffect(()=>{Q()},[Z]),j.useEffect(()=>{let re=K();E(re)},[n,t]);function K(){if(t){let re=[...t,...n];return Array.from(new Set(re.map(ve=>ve.user_id))).map(ve=>re.find(De=>De.user_id===ve))}}const Q=async()=>{let re=await NRe(Z);d(re),console.log("all todos!! tasks--",l)},te=async()=>{await zRe(Z,f)?(Q(),y("")):console.log("todo could not be created")},ie=async(re,me,ve)=>{console.log("update the todo funct --",re,me,ve),await BRe(re,me,ve)?(Q(),$()):console.log("todo could not be updated")},ue=async re=>{await FRe(re)?(Q(),$()):console.log("todo could not be deleted")};return O.jsxs(fY,{className:"flex-column",style:{padding:"24px",minWidth:"300px",maxWidth:"100%",margin:"50px",marginTop:"24px",flex:"1 1 0%"},children:[O.jsx("h2",{style:{width:"100%",textAlign:"center"},children:"To-Do List"}),O.jsx("hr",{}),O.jsxs(bxe,{children:[O.jsx(Wh,{children:l.map(re=>O.jsxs(em,{style:{marginLeft:0},dense:!0,children:[O.jsx(b0,{primary:O.jsx("span",{className:"card-body",children:re.task}),secondary:O.jsx("span",{className:"card-body",children:re.assigned_host.display_name}),style:{textDecoration:re.completed?"line-through":"none"}}),e&&O.jsxs(xY,{children:[O.jsx(as,{onClick:()=>q(re),children:O.jsx(q4,{})}),O.jsx(as,{edge:"end","aria-label":"toggle",onClick:()=>ie(re.id,re.assigned_host.id,!re.completed),children:re.completed?O.jsx(Cq,{}):O.jsx(Sq,{})})]})]},re.id))}),e&&O.jsxs(O.Fragment,{children:[O.jsx(kd,{label:"Add new task",variant:"outlined",fullWidth:!0,value:f,onChange:re=>y(re.target.value),onKeyPress:re=>re.key==="Enter"&&te()}),O.jsx("div",{className:"d-flex justify-content-center",children:O.jsx(la,{startIcon:O.jsx(H4,{}),onClick:te,style:{marginTop:"20px",paddingLeft:"2rem",paddingRight:"2rem"},size:"large",variant:"outlined",sx:{borderColor:"primary.dark",color:"black",fontWeight:"bold",border:"2px solid","&:hover":{backgroundColor:"secondary.dark",borderColor:"secondary.dark",color:"white"}},children:"Add Task"})})]})]}),O.jsx(wv,{open:P,onClose:$,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:O.jsxs(Nl,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4},children:[O.jsxs(sa,{className:"d-flex flex-nowrap",children:[O.jsx("span",{className:"modal-header",children:"Delete this todo item?"}),O.jsx(as,{edge:"end","aria-label":"delete",onClick:()=>ue(C.id),children:O.jsx(lv,{})})]}),O.jsxs(Wh,{children:[O.jsx("span",{className:"modal-header",children:"Assign to a different participant:"}),a&&a.length?a.map((re,me)=>O.jsxs(em,{children:[re.display_name,O.jsx(as,{onClick:()=>ie(C.id,re.user_id,!1),children:O.jsx(WS,{})})]},me)):null]})]})})]})}var K4={},QRe=yi;Object.defineProperty(K4,"__esModule",{value:!0});var kq=K4.default=void 0,JRe=QRe(Bi()),eIe=O;kq=K4.default=(0,JRe.default)((0,eIe.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"}),"AccountCircle");function YF({eventID:e,hosts:t,getEvent:n}){const[r,l]=j.useState(""),[d,f]=j.useState({}),[y,a]=j.useState(!1),E=()=>a(!0),C=()=>{a(!1),f({})},[M,P]=j.useState(!1),N=()=>P(!0),F=te=>{te.preventDefault(),te.stopPropagation(),P(!1)},$=async()=>{let ie=await dse(r);ie?f(ie):console.log("No users by this email"),console.log("admin page -- NEW HOST:",ie)},Z=()=>{$(),E()},q=async te=>{await Q(te,"add")?(console.log("added host successfully"),n(),C(),f({})):console.log("not able to add host")},K=async(te,ie)=>{F(te),await Q(ie,"remove")?(console.log("host removed successfully"),n()):console.log("not able to remove host")},Q=async(te,ie)=>{const ue=await Ave(e,te,ie);return console.log("update host",ue),l(""),ue};return O.jsxs(fY,{id:"hostmanager",className:"flex-column",style:{padding:"24px",minWidth:"300px",maxWidth:"100%",margin:"50px",flex:"1 1 0%"},children:[O.jsxs(v1,{defaultExpanded:!0,children:[O.jsxs(x1,{expandIcon:O.jsx(Mb,{}),children:[O.jsx("h2",{style:{width:"100%",textAlign:"center"},children:"Current Hosts"}),O.jsx("hr",{})]}),O.jsx(_1,{children:O.jsx(Wh,{children:t.map((te,ie)=>O.jsxs(em,{children:[O.jsx(tv,{children:O.jsx(gu,{src:te.profile_picture,children:" "},te.user_id)}),O.jsx(b0,{primary:O.jsx("span",{className:"card-body",children:te.display_name})}),O.jsxs(as,{edge:"start","aria-label":"delete",onClick:N,size:"small",children:[O.jsx(lv,{}),O.jsxs(Mxe,{open:M,onClose:F,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[O.jsx($xe,{id:"alert-dialog-title",children:"ARE YOU SURE YOU WANT TO DELETE THIS HOST?"}),O.jsxs(Lxe,{children:[O.jsx(la,{onClick:ue=>{ue.stopPropagation(),K(ue,te.user_id)},children:"Yes"}),O.jsx(la,{onClick:ue=>F(ue),autoFocus:!0,children:"No"})]})]})]})]},ie))})})]}),O.jsxs(v1,{defaultExpanded:!1,children:[O.jsx(x1,{expandIcon:O.jsx(Mb,{}),children:O.jsx("h4",{children:"Add Hosts"})}),O.jsx(_1,{children:O.jsx(Wh,{children:O.jsxs(Nl,{sx:{display:"flex",alignItems:"flex-end"},component:"form",noValidate:!0,autoComplete:"off",children:[O.jsx(kq,{sx:{color:"action.active",mr:1,my:.5}}),O.jsx(kd,{id:"input-with-sx",label:"enter a user's email",variant:"standard",value:r,sx:{width:"100%",fontSize:"1.5rem"},onChange:te=>l(te.target.value),inputProps:{style:{fontSize:"1.2rem"}}}),O.jsx(as,{onClick:Z,children:O.jsx(WS,{})})]})})})]}),O.jsx(wv,{open:y,onClose:C,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:O.jsx(Nl,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4},children:Object.keys(d).length?O.jsxs(sa,{id:"modal-modal-title",variant:"h6",component:"h2",children:["User Found:",O.jsx(Wh,{children:O.jsxs(em,{children:[" ",O.jsx(tv,{children:O.jsx(gu,{src:d.image,children:" "})}),O.jsx(b0,{children:d.display_name}),O.jsx(as,{edge:"start","aria-label":"delete",onClick:()=>q(d.id),size:"small",children:O.jsx(WS,{})})]})})]}):O.jsx(O.Fragment,{children:O.jsx(sa,{id:"modal-modal-title",variant:"h6",component:"h2",children:"No user with that email, try again."})})})})]})}var X4={},tIe=yi;Object.defineProperty(X4,"__esModule",{value:!0});var Aq=X4.default=void 0,nIe=tIe(Bi()),rIe=O;Aq=X4.default=(0,nIe.default)((0,rIe.jsx)("path",{d:"M16 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V8zM7 7h5v2H7zm10 10H7v-2h10zm0-4H7v-2h10zm-2-4V5l4 4z"}),"Feed");var Q4={},oIe=yi;Object.defineProperty(Q4,"__esModule",{value:!0});var Mq=Q4.default=void 0,iIe=oIe(Bi()),aIe=O;Mq=Q4.default=(0,iIe.default)((0,aIe.jsx)("path",{d:"M12 12.75c1.63 0 3.07.39 4.24.9 1.08.48 1.76 1.56 1.76 2.73V18H6v-1.61c0-1.18.68-2.26 1.76-2.73 1.17-.52 2.61-.91 4.24-.91M4 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m1.13 1.1c-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58C.48 14.9 0 15.62 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29M20 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m4 3.43c0-.81-.48-1.53-1.22-1.85-.85-.37-1.79-.58-2.78-.58-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V18H24zM12 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3"}),"Groups");var J4={},sIe=yi;Object.defineProperty(J4,"__esModule",{value:!0});var Dq=J4.default=void 0,lIe=sIe(Bi()),GF=O;Dq=J4.default=(0,lIe.default)([(0,GF.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,GF.jsx)("path",{d:"M10.67 13.02c-.22-.01-.44-.02-.67-.02-2.42 0-4.68.67-6.61 1.82-.88.52-1.39 1.5-1.39 2.53V20h9.26c-.79-1.13-1.26-2.51-1.26-4 0-1.07.25-2.07.67-2.98M20.75 16c0-.22-.03-.42-.06-.63l1.14-1.01-1-1.73-1.45.49c-.32-.27-.68-.48-1.08-.63L18 11h-2l-.3 1.49c-.4.15-.76.36-1.08.63l-1.45-.49-1 1.73 1.14 1.01c-.03.21-.06.41-.06.63s.03.42.06.63l-1.14 1.01 1 1.73 1.45-.49c.32.27.68.48 1.08.63L16 21h2l.3-1.49c.4-.15.76-.36 1.08-.63l1.45.49 1-1.73-1.14-1.01c.03-.21.06-.41.06-.63M17 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"},"1")],"ManageAccounts");var eP={},cIe=yi;Object.defineProperty(eP,"__esModule",{value:!0});var Rq=eP.default=void 0,uIe=cIe(Bi()),dIe=O;Rq=eP.default=(0,uIe.default)((0,dIe.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");const hIe=_n(gEe)(({theme:e})=>({position:"absolute","&.MuiSpeedDial-directionDown":{top:e.spacing(2),left:e.spacing(2)}}));function Iq(){const{eventID:e}=cm(),t=[{icon:O.jsx(Rq,{}),name:"Edit Event",url:`/editEvent/${e}`},{icon:O.jsx(Dq,{}),name:"Admin Page",url:`/admin/${e}`},{icon:O.jsx(Mq,{}),name:"Collaboration Page",url:`/collab/${e}`},{icon:O.jsx(Aq,{}),name:"Public Event Page",url:`/event/${e}`}];return O.jsx("div",{style:{zIndex:"1000",position:"absolute",top:0,right:0,margin:"30px",marginRight:"130px",backgroundColor:"rgba(255, 255, 255, 0.7)",padding:"0"},children:O.jsx(hIe,{ariaLabel:"Event Management Menu",icon:O.jsx(q4,{}),direction:"down",children:t.map((n,r)=>O.jsx(LEe,{icon:n.icon,tooltipTitle:n.name,component:va,to:n.url},r))})})}var tP={},fIe=yi;Object.defineProperty(tP,"__esModule",{value:!0});var nP=tP.default=void 0,pIe=fIe(Bi()),mIe=O;nP=tP.default=(0,pIe.default)((0,mIe.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");var rP={},gIe=yi;Object.defineProperty(rP,"__esModule",{value:!0});var oP=rP.default=void 0,yIe=gIe(Bi()),bIe=O;oP=rP.default=(0,yIe.default)((0,bIe.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function vIe(){const[e,t]=j.useState({}),[n,r]=j.useState([]),[l,d]=j.useState([]),[f,y]=j.useState([]),[a,E]=j.useState(!0),[C,M]=j.useState(!1),[P,N]=j.useState(!1),[F,$]=j.useState(!1),[Z,q]=j.useState([]),{userProfileData:K}=Eu();let{eventID:Q}=cm();const te=Ac(),ie=!0;console.log("eventDetails",e);const ue=De=>{if(Array.isArray(Z)&&Z.length>0&&typeof De<"u"){for(const je of Z)if(je&&je.user_id&&je.user_id===De){N(!0),console.log("isallowed"),$(!0);return}console.log("notallowed"),$(!0);return}};j.useEffect(()=>{ue(K.id)},[K]);const re=()=>{console.log("userValidated",F),console.log("isAllowed",P),F===!0&&(console.log("userValidated",F),P===!1?(console.log("NOT AUTHORIZED"),te(`/event/${Q}`)):console.log("AUTHORIZED"))};j.useEffect(()=>{re()},[F]);const me=De=>()=>{M(De)},ve=async()=>{const De=await Cve(Q);t(De);const je=De.hosts,Be=De.volunteers,Ue=De.applicants;let Ge=[];Ue.map(ze=>{Ge.push(ze.role)}),d(Be),y(Ue),q(je),r(Ge)};return j.useEffect(()=>{ve()},[]),j.useEffect(()=>{const De=()=>{window.innerWidth<=1400?(M(!1),E(!1)):E(!0)};return window.addEventListener("resize",De),De(),()=>{window.removeEventListener("resize",De)}},[]),O.jsxs(Zi,{fluid:!0,children:[O.jsxs(Jr,{className:"gx-5",children:[O.jsxs(Ir,{sm:12,md:12,lg:4,xl:a?3:4,className:"event-details-col",style:{position:"relative"},children:[O.jsx("div",{style:{position:"absolute",top:0,right:0,zIndex:"1"},children:O.jsx(Iq,{})}),e.hosts&&O.jsx(u4,{...e})]}),O.jsx(Ir,{sm:12,md:12,lg:7,xl:a?5:6,className:"volunteer-manager-col",children:O.jsx(Jr,{children:O.jsx(LRe,{approvedVolunteers:l,volunteerApplications:f,eventID:Q,roles:n,setRoles:r,getEvent:ve})})}),O.jsx(Ir,{sm:12,md:0,lg:3,xl:4,className:"todo-participant-col",children:a?O.jsx(Ir,{className:"todo-partipants-col d-flex justify-content-end",children:e.hosts&&O.jsxs(Ir,{children:[O.jsx(Jr,{children:O.jsx(YS,{setShowMenu:E,hosts:Z,approvedVolunteers:l,showAddToDo:ie,eventID:Q})}),O.jsx(Jr,{style:{},children:O.jsx(YF,{eventID:Q,hosts:Z,getEvent:ve})})]})}):O.jsx(Nl,{position:"relative",children:O.jsxs(bY,{anchor:"right",open:C,onClose:me(!1),children:[O.jsx(as,{style:{position:"absolute",top:0,left:0},onClick:me(!1),children:O.jsx(oP,{})}),O.jsxs(Ir,{children:[O.jsx(Jr,{children:O.jsx(YS,{setShowMenu:E,hosts:Z,approvedVolunteers:l,showAddToDo:ie,eventID:Q})}),O.jsx(Jr,{children:O.jsx(YF,{eventID:Q,hosts:Z,getEvent:ve})})]})]})})})]}),!a&&O.jsx(Nl,{position:"fixed",right:"1%",top:"40%",margin:"0",display:"flex",alignItems:"center",children:O.jsxs(la,{variant:"outlined",margin:"0",style:{transform:"rotate(-90deg)",transformOrigin:"bottom right"},onClick:me(!C),children:["To-Do List & Hosts",O.jsx(nP,{})]})})]})}function _Ie(){return O.jsxs(O.Fragment,{children:[O.jsx("div",{style:{height:"2rem"}}),O.jsx(Zi,{children:O.jsx(JT,{className:"d-flex jusify-self-center",src:pH,alt:"Your impact matters",style:{borderRadius:"10px",boxShadow:"0 2px 4px rgba(0,0,0,0.5)"}})}),O.jsx("div",{style:{height:"7rem"}}),O.jsxs(Zi,{children:[O.jsx("h1",{style:{textAlign:"center"},children:"FAQs"}),O.jsx("h4",{children:"How do I create an event?"}),O.jsx("p",{style:{marginTop:"1rem"},children:"To create an event, simply go to the menu and click on the 'Create Event' option. Fill in the necessary details, such as the event name, date, location, and description. Once you're done, click 'Submit' to create the event."}),O.jsx("h4",{children:"How do I volunteer?"}),O.jsx("p",{style:{marginTop:"1rem"},children:"Volunteering is a great way to make a difference! Visit the 'Search Events' option on the menu to explore volunteering opportunities. You can filter by location, cause, date or whether it's In-Person or Virtual to find the perfect volunteer opportunity for you. Once you've found an opportunity you're interested in, click 'Count Me In' to get involved."}),O.jsx("h4",{children:"How can I manage my events?"}),O.jsx("p",{style:{marginTop:"1rem"},children:"Managing your events is simple! Just go to your event and click on the 'Event Admin' button. From there, you can view and edit your events, manage volunteers and collabrorators, and create tasks for your event's to-do list. Make sure to keep your event details up to date to ensure a successful event."}),O.jsx("h4",{children:"How do I sign up?"}),O.jsx("p",{style:{marginTop:"1rem"},children:"Signing up is quick and easy! Just click on the 'Sign Up' button on the homepage and fill in your details. Once you've completed the registration process, you'll be ready to start using our app and making a difference!"}),O.jsx("div",{style:{height:"5rem"}}),O.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"7rem"}})]})]})}var iP={},xIe=yi;Object.defineProperty(iP,"__esModule",{value:!0});var O5=iP.default=void 0,wIe=xIe(Bi()),EIe=O;O5=iP.default=(0,wIe.default)((0,EIe.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");var aP={},TIe=yi;Object.defineProperty(aP,"__esModule",{value:!0});var Pq=aP.default=void 0,SIe=TIe(Bi()),CIe=O;Pq=aP.default=(0,SIe.default)((0,CIe.jsx)("path",{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11"}),"Reply");var sP={},kIe=yi;Object.defineProperty(sP,"__esModule",{value:!0});var L5=sP.default=void 0,AIe=kIe(Bi()),MIe=O;L5=sP.default=(0,AIe.default)((0,MIe.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person");function DIe({eventDetails:e,postType:t}){const{userProfileData:n}=Eu(),[r,l]=j.useState([]),[d,f]=j.useState(""),[y,a]=j.useState(""),[E,C]=j.useState(null),[M,P]=j.useState(!1),N=j.useRef(null),F=async()=>{try{const ie=await Mve(e.id,t);l(ie)}catch(ie){console.error("Error fetching posts:",ie)}};j.useEffect(()=>{F()},[e]);const $=async()=>{if(d.trim()){const ie={event:e.id,context:d},ue=await Dve(e.id,t,ie);f(""),P(!1),l(ue)}},Z=async ie=>{if(y.trim()){const ue={post:ie,content:y},re=await Rve(e.id,ie,ue);a(""),C(null),l(re)}},q=async ie=>{const ue=await Pve(e.id,ie);l(ue)},K=async(ie,ue)=>{const re=await Ive(e.id,ue);l(re)},Q={cardCSS:{maxWidth:"none",margin:"24px",width:"100%",maxHeight:"1300px"}},te=()=>{N.current&&(N.current.scrollTop=N.current.scrollHeight)};return j.useEffect(()=>{te()},[r]),O.jsxs(A0,{className:"cardCSS ms-0 me-0",style:Q.cardCSS,children:[O.jsx("h2",{children:"Discussion Forum"}),O.jsx("hr",{}),O.jsx(Wh,{ref:N,style:{overflow:"scroll"},children:r&&r.length===0?O.jsx("h3",{className:"d-flex justify-content-center pt-5 pb-4",children:"This event doesn't have any posts yet"}):r.map((ie,ue)=>O.jsxs(j.Fragment,{children:[O.jsxs(em,{style:{border:"1px solid #e0e0e0",borderRadius:"6px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},alignItems:"flex-start",sx:{mb:1},children:[O.jsx(tv,{className:"me-3",children:ie.user.image?O.jsx(gu,{alt:ie.user.display_name,src:ie.user.image,sx:{width:70,height:70}}):O.jsxs(gu,{children:[" ",O.jsx(L5,{})," "]})}),O.jsx(b0,{primary:O.jsx("span",{className:"card-body",children:ie.context}),secondary:O.jsxs(O.Fragment,{children:[O.jsx("span",{className:"card-body",children:`${ie.user.display_name} - `}),O.jsx("span",{className:"card-body",style:{fontSize:"1rem"},children:new Date(ie.timestamp).toLocaleString()})]})}),O.jsx(as,{onClick:()=>C(ie.id===E?null:ie.id),edge:"end","aria-label":"reply",children:O.jsx(Pq,{})}),n.id===ie.user.id&&O.jsx(as,{onClick:()=>q(ie.id),edge:"end","aria-label":"delete",children:O.jsx(lv,{})})]}),E===ie.id&&O.jsx(kd,{label:"Write a reply...",variant:"outlined",fullWidth:!0,multiline:!0,minRows:1,value:y,onChange:re=>a(re.target.value),margin:"normal",InputProps:{endAdornment:O.jsx(uB,{position:"end",children:O.jsx(as,{onClick:()=>Z(ie.id),children:O.jsx(O5,{})})})}}),ie.comments&&ie.comments.map(re=>O.jsxs(em,{sx:{pl:6},children:[O.jsx(tv,{className:"d-flex justify-content-end pe-1 ps-0",style:{borderLeft:"2px solid #6840DF",height:"3rem"},children:re.user.image?O.jsx(gu,{className:"align-self-center pt-0",alt:re.user.display_name,src:re.user.image,sx:{width:33,height:33}}):O.jsxs(gu,{children:[" ",O.jsx(L5,{})," "]})}),O.jsx(b0,{className:"ms-0 ps-2",primary:O.jsx("span",{style:{fontStyle:"italic"},className:"card-body",children:re.content}),secondary:`${re.user.display_name} - ${new Date(re.timestamp).toLocaleString()}`}),n.id===re.user.id&&O.jsx(as,{onClick:()=>K(ie.id,re.id),edge:"end","aria-label":"delete",children:O.jsx(lv,{})})]},re.id)),O.jsx(qxe,{variant:"inset",component:"li"})]},ie.id))}),O.jsx(kd,{label:"Message...",variant:"outlined",fullWidth:!0,multiline:!0,minRows:1,maxRows:3,value:d,onChange:ie=>f(ie.target.value),margin:"normal",InputProps:{endAdornment:O.jsx(uB,{position:"end",children:O.jsx(as,{onClick:$,children:O.jsx(O5,{})})})}})]})}function RIe(){const{userProfileData:e}=Eu(),[t,n]=j.useState({}),{eventID:r}=cm(),l="collaborators",[d,f]=j.useState(!0),[y,a]=dt.useState(!1),[E,C]=j.useState(!1),[M,P]=j.useState(!1),N=Ac(),F=te=>{if(Array.isArray(t.hosts)&&t.hosts.length>0&&Array.isArray(t.volunteers)&&typeof te<"u"){for(const ie of t.hosts)if(ie&&ie.user_id&&ie.user_id===te){C(!0),P(!0);return}for(const ie of t.volunteers)if(ie&&ie.user_id&&ie.user_id===te){C(!0),P(!0);return}P(!0);return}};j.useEffect(()=>{F(e.id)},[e]);const $=()=>{M===!0&&(console.log("userValidated",M),E===!1?N(`/event/${r}`):console.log("AUTHORIZED"))};j.useEffect(()=>{$()},[M]);const Z=te=>()=>{a(te)};console.log(t),j.useEffect(()=>{const te=()=>{window.innerWidth<=1500?(a(!1),f(!1)):f(!0)};return window.addEventListener("resize",te),te(),()=>{window.removeEventListener("resize",te)}},[]),j.useEffect(()=>{q()},[]);const q=async()=>{const te=await kve(r);n(te),console.log(te)},K=!1,Q=()=>!t.hosts||!e?!1:t.hosts.some(te=>te.user_id===e.id);return console.log(Q),O.jsxs(Zi,{fluid:!0,className:"event-collab-container",children:[O.jsxs(Jr,{className:"gx-5",children:[O.jsxs(Ir,{sm:12,md:12,lg:4,xl:d?3:4,style:{position:"relative"},children:[Q()&&O.jsx("div",{style:{position:"absolute",top:0,right:0,zIndex:"1"},children:O.jsx(Iq,{})}),t.hosts&&O.jsx(u4,{...t})]}),O.jsx(Ir,{sm:12,md:12,lg:7,xl:d?6:7,className:"discussion-forum-col p-0",children:t.hosts&&O.jsx(DIe,{eventDetails:t,postType:l})}),d?O.jsx(Ir,{sm:12,md:0,lg:3,xl:3,className:"todo-partipants-col d-flex justify-content-end",children:t.hosts&&O.jsx(YS,{setShowMenu:f,showAddToDo:K,approvedVolunteers:[],hosts:null})}):O.jsx(Nl,{position:"relative",children:O.jsxs(bY,{anchor:"right",open:y,onClose:Z(!1),children:[O.jsx(as,{style:{position:"absolute",top:0,left:0},onClick:Z(!1),children:O.jsx(oP,{})}),O.jsx(YS,{setShowMenu:f,showAddToDo:K,approvedVolunteers:[],hosts:null})]})})]}),!d&&O.jsx(Nl,{position:"fixed",top:"40%",right:"0",margin:"0",display:"flex",alignItems:"center",children:O.jsxs(la,{variant:"outlined",margin:"0",style:{transform:"rotate(-90deg)",transformOrigin:"bottom right"},onClick:Z(!y),children:["To-Do List",O.jsx(nP,{})]})})]})}const IIe=sne([{path:"/",element:O.jsx(hse,{}),loader:ise,children:[{index:!0,element:O.jsx(qhe,{})},{path:"/signup",element:O.jsx(tye,{})},{path:"/login",element:O.jsx(nye,{})},{path:"/profile",element:O.jsx(xRe,{})},{path:"/editprofile",element:O.jsx(zve,{})},{path:"/event/:eventID",element:O.jsx(b1e,{})},{path:"/eventdirections",element:O.jsx(jke,{})},{path:"/createevent",element:O.jsx(Lve,{})},{path:"/editevent/:eventID",element:O.jsx(Nve,{})},{path:"/events",element:O.jsx(zke,{})},{path:"/collab/:eventID",element:O.jsx(RIe,{})},{path:"/admin/:eventID",element:O.jsx(vIe,{})},{path:"/FAQ",element:O.jsx(_Ie,{})}],errorElement:O.jsx(oye,{})}]),yp=new Map,AM={set(e,t,n){yp.has(e)||yp.set(e,new Map);const r=yp.get(e);if(!r.has(t)&&r.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`);return}r.set(t,n)},get(e,t){return yp.has(e)&&yp.get(e).get(t)||null},remove(e,t){if(!yp.has(e))return;const n=yp.get(e);n.delete(t),n.size===0&&yp.delete(e)}},PIe=1e3,N5="transitionend",Oq=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(t,n)=>`#${CSS.escape(n)}`)),e),OIe=e=>e==null?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),LIe=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);const r=Number.parseFloat(t),l=Number.parseFloat(n);return!r&&!l?0:(t=t.split(",")[0],n=n.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(n))*PIe)},NIe=e=>{e.dispatchEvent(new Event(N5))},k1=e=>!e||typeof e!="object"?!1:(typeof e.jquery<"u"&&(e=e[0]),typeof e.nodeType<"u"),z5=e=>k1(e)?e.jquery?e[0]:e:typeof e=="string"&&e.length>0?document.querySelector(Oq(e)):null,zIe=e=>{if(!k1(e)||e.getClientRects().length===0)return!1;const t=getComputedStyle(e).getPropertyValue("visibility")==="visible",n=e.closest("details:not([open])");if(!n)return t;if(n!==e){const r=e.closest("summary");if(r&&r.parentNode!==n||r===null)return!1}return t},BIe=e=>!e||e.nodeType!==Node.ELEMENT_NODE||e.classList.contains("disabled")?!0:typeof e.disabled<"u"?e.disabled:e.hasAttribute("disabled")&&e.getAttribute("disabled")!=="false",FIe=e=>{e.offsetHeight},Lq=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,MM=[],jIe=e=>{document.readyState==="loading"?(MM.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of MM)t()}),MM.push(e)):e()},$Ie=e=>{jIe(()=>{const t=Lq();if(t){const n=e.NAME,r=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=r,e.jQueryInterface)}})},qF=(e,t=[],n=e)=>typeof e=="function"?e(...t):n,UIe=(e,t,n=!0)=>{if(!n){qF(e);return}const l=LIe(t)+5;let d=!1;const f=({target:y})=>{y===t&&(d=!0,t.removeEventListener(N5,f),qF(e))};t.addEventListener(N5,f),setTimeout(()=>{d||NIe(t)},l)},VIe=/[^.]*(?=\..*)\.|.*/,HIe=/\..*/,WIe=/::\d+$/,DM={};let ZF=1;const Nq={mouseenter:"mouseover",mouseleave:"mouseout"},YIe=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function zq(e,t){return t&&`${t}::${ZF++}`||e.uidEvent||ZF++}function Bq(e){const t=zq(e);return e.uidEvent=t,DM[t]=DM[t]||{},DM[t]}function GIe(e,t){return function n(r){return lP(r,{delegateTarget:e}),n.oneOff&&Lp.off(e,r.type,t),t.apply(e,[r])}}function qIe(e,t,n){return function r(l){const d=e.querySelectorAll(t);for(let{target:f}=l;f&&f!==this;f=f.parentNode)for(const y of d)if(y===f)return lP(l,{delegateTarget:f}),r.oneOff&&Lp.off(e,l.type,t,n),n.apply(f,[l])}}function Fq(e,t,n=null){return Object.values(e).find(r=>r.callable===t&&r.delegationSelector===n)}function jq(e,t,n){const r=typeof t=="string",l=r?n:t||n;let d=$q(e);return YIe.has(d)||(d=e),[r,l,d]}function KF(e,t,n,r,l){if(typeof t!="string"||!e)return;let[d,f,y]=jq(t,n,r);t in Nq&&(f=(F=>function($){if(!$.relatedTarget||$.relatedTarget!==$.delegateTarget&&!$.delegateTarget.contains($.relatedTarget))return F.call(this,$)})(f));const a=Bq(e),E=a[y]||(a[y]={}),C=Fq(E,f,d?n:null);if(C){C.oneOff=C.oneOff&&l;return}const M=zq(f,t.replace(VIe,"")),P=d?qIe(e,n,f):GIe(e,f);P.delegationSelector=d?n:null,P.callable=f,P.oneOff=l,P.uidEvent=M,E[M]=P,e.addEventListener(y,P,d)}function B5(e,t,n,r,l){const d=Fq(t[n],r,l);d&&(e.removeEventListener(n,d,!!l),delete t[n][d.uidEvent])}function ZIe(e,t,n,r){const l=t[n]||{};for(const[d,f]of Object.entries(l))d.includes(r)&&B5(e,t,n,f.callable,f.delegationSelector)}function $q(e){return e=e.replace(HIe,""),Nq[e]||e}const Lp={on(e,t,n,r){KF(e,t,n,r,!1)},one(e,t,n,r){KF(e,t,n,r,!0)},off(e,t,n,r){if(typeof t!="string"||!e)return;const[l,d,f]=jq(t,n,r),y=f!==t,a=Bq(e),E=a[f]||{},C=t.startsWith(".");if(typeof d<"u"){if(!Object.keys(E).length)return;B5(e,a,f,d,l?n:null);return}if(C)for(const M of Object.keys(a))ZIe(e,a,M,t.slice(1));for(const[M,P]of Object.entries(E)){const N=M.replace(WIe,"");(!y||t.includes(N))&&B5(e,a,f,P.callable,P.delegationSelector)}},trigger(e,t,n){if(typeof t!="string"||!e)return null;const r=Lq(),l=$q(t),d=t!==l;let f=null,y=!0,a=!0,E=!1;d&&r&&(f=r.Event(t,n),r(e).trigger(f),y=!f.isPropagationStopped(),a=!f.isImmediatePropagationStopped(),E=f.isDefaultPrevented());const C=lP(new Event(t,{bubbles:y,cancelable:!0}),n);return E&&C.preventDefault(),a&&e.dispatchEvent(C),C.defaultPrevented&&f&&f.preventDefault(),C}};function lP(e,t={}){for(const[n,r]of Object.entries(t))try{e[n]=r}catch{Object.defineProperty(e,n,{configurable:!0,get(){return r}})}return e}function XF(e){if(e==="true")return!0;if(e==="false")return!1;if(e===Number(e).toString())return Number(e);if(e===""||e==="null")return null;if(typeof e!="string")return e;try{return JSON.parse(decodeURIComponent(e))}catch{return e}}function RM(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const QF={setDataAttribute(e,t,n){e.setAttribute(`data-bs-${RM(t)}`,n)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${RM(t)}`)},getDataAttributes(e){if(!e)return{};const t={},n=Object.keys(e.dataset).filter(r=>r.startsWith("bs")&&!r.startsWith("bsConfig"));for(const r of n){let l=r.replace(/^bs/,"");l=l.charAt(0).toLowerCase()+l.slice(1,l.length),t[l]=XF(e.dataset[r])}return t},getDataAttribute(e,t){return XF(e.getAttribute(`data-bs-${RM(t)}`))}};class KIe{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,n){const r=k1(n)?QF.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof r=="object"?r:{},...k1(n)?QF.getDataAttributes(n):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,n=this.constructor.DefaultType){for(const[r,l]of Object.entries(n)){const d=t[r],f=k1(d)?"element":OIe(d);if(!new RegExp(l).test(f))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${f}" but expected type "${l}".`)}}}const XIe="5.3.3";class QIe extends KIe{constructor(t,n){super(),t=z5(t),t&&(this._element=t,this._config=this._getConfig(n),AM.set(this._element,this.constructor.DATA_KEY,this))}dispose(){AM.remove(this._element,this.constructor.DATA_KEY),Lp.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,n,r=!0){UIe(t,n,r)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return AM.get(z5(t),this.DATA_KEY)}static getOrCreateInstance(t,n={}){return this.getInstance(t)||new this(t,typeof n=="object"?n:null)}static get VERSION(){return XIe}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const IM=e=>{let t=e.getAttribute("data-bs-target");if(!t||t==="#"){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),t=n&&n!=="#"?n.trim():null}return t?t.split(",").map(n=>Oq(n)).join(","):null},fu={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter(n=>n.matches(t))},parents(e,t){const n=[];let r=e.parentNode.closest(t);for(;r;)n.push(r),r=r.parentNode.closest(t);return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(n=>!BIe(n)&&zIe(n))},getSelectorFromElement(e){const t=IM(e);return t&&fu.findOne(t)?t:null},getElementFromSelector(e){const t=IM(e);return t?fu.findOne(t):null},getMultipleElementsFromSelector(e){const t=IM(e);return t?fu.find(t):[]}},JIe="collapse",e4e="bs.collapse",Kx=`.${e4e}`,t4e=".data-api",n4e=`show${Kx}`,r4e=`shown${Kx}`,o4e=`hide${Kx}`,i4e=`hidden${Kx}`,a4e=`click${Kx}${t4e}`,PM="show",lb="collapse",WE="collapsing",s4e="collapsed",l4e=`:scope .${lb} .${lb}`,c4e="collapse-horizontal",u4e="width",d4e="height",h4e=".collapse.show, .collapse.collapsing",F5='[data-bs-toggle="collapse"]',f4e={parent:null,toggle:!0},p4e={parent:"(null|element)",toggle:"boolean"};class yx extends QIe{constructor(t,n){super(t,n),this._isTransitioning=!1,this._triggerArray=[];const r=fu.find(F5);for(const l of r){const d=fu.getSelectorFromElement(l),f=fu.find(d).filter(y=>y===this._element);d!==null&&f.length&&this._triggerArray.push(l)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return f4e}static get DefaultType(){return p4e}static get NAME(){return JIe}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(h4e).filter(y=>y!==this._element).map(y=>yx.getOrCreateInstance(y,{toggle:!1}))),t.length&&t[0]._isTransitioning||Lp.trigger(this._element,n4e).defaultPrevented)return;for(const y of t)y.hide();const r=this._getDimension();this._element.classList.remove(lb),this._element.classList.add(WE),this._element.style[r]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const l=()=>{this._isTransitioning=!1,this._element.classList.remove(WE),this._element.classList.add(lb,PM),this._element.style[r]="",Lp.trigger(this._element,r4e)},f=`scroll${r[0].toUpperCase()+r.slice(1)}`;this._queueCallback(l,this._element,!0),this._element.style[r]=`${this._element[f]}px`}hide(){if(this._isTransitioning||!this._isShown()||Lp.trigger(this._element,o4e).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,FIe(this._element),this._element.classList.add(WE),this._element.classList.remove(lb,PM);for(const l of this._triggerArray){const d=fu.getElementFromSelector(l);d&&!this._isShown(d)&&this._addAriaAndCollapsedClass([l],!1)}this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(WE),this._element.classList.add(lb),Lp.trigger(this._element,i4e)};this._element.style[n]="",this._queueCallback(r,this._element,!0)}_isShown(t=this._element){return t.classList.contains(PM)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=z5(t.parent),t}_getDimension(){return this._element.classList.contains(c4e)?u4e:d4e}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(F5);for(const n of t){const r=fu.getElementFromSelector(n);r&&this._addAriaAndCollapsedClass([n],this._isShown(r))}}_getFirstLevelChildren(t){const n=fu.find(l4e,this._config.parent);return fu.find(t,this._config.parent).filter(r=>!n.includes(r))}_addAriaAndCollapsedClass(t,n){if(t.length)for(const r of t)r.classList.toggle(s4e,!n),r.setAttribute("aria-expanded",n)}static jQueryInterface(t){const n={};return typeof t=="string"&&/show|hide/.test(t)&&(n.toggle=!1),this.each(function(){const r=yx.getOrCreateInstance(this,n);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}}Lp.on(document,a4e,F5,function(e){(e.target.tagName==="A"||e.delegateTarget&&e.delegateTarget.tagName==="A")&&e.preventDefault();for(const t of fu.getMultipleElementsFromSelector(this))yx.getOrCreateInstance(t,{toggle:!1}).toggle()});$Ie(yx);DD.createRoot(document.getElementById("root")).render(O.jsx(gne,{router:IIe}));
